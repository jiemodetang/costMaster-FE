(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerpolicy&&(u.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?u.credentials="include":s.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(s){if(s.ep)return;s.ep=!0;const u=r(s);fetch(s.href,u)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e){const n=Object.create(null);for(const r of e.split(","))n[r]=1;return r=>r in n}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend$2=Object.assign,remove=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},hasOwnProperty$e=Object.prototype.hasOwnProperty,hasOwn$1=(e,n)=>hasOwnProperty$e.call(e,n),isArray$4=Array.isArray,isMap=e=>toTypeString$1(e)==="[object Map]",isSet=e=>toTypeString$1(e)==="[object Set]",isDate$2=e=>toTypeString$1(e)==="[object Date]",isFunction$3=e=>typeof e=="function",isString$4=e=>typeof e=="string",isSymbol$2=e=>typeof e=="symbol",isObject$5=e=>e!==null&&typeof e=="object",isPromise$1=e=>(isObject$5(e)||isFunction$3(e))&&isFunction$3(e.then)&&isFunction$3(e.catch),objectToString$3=Object.prototype.toString,toTypeString$1=e=>objectToString$3.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$4=e=>toTypeString$1(e)==="[object Object]",isIntegerKey=e=>isString$4(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(n,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$1(e)}`:""),hasChanged=(e,n)=>!Object.is(e,n),invokeArrayFns=(e,...n)=>{for(let r=0;r<e.length;r++)e[r](...n)},def=(e,n,r,o=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:o,value:r})},looseToNumber=e=>{const n=parseFloat(e);return isNaN(n)?e:n},toNumber$1=e=>{const n=isString$4(e)?Number(e):NaN;return isNaN(n)?e:n};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$4(e)){const n={};for(let r=0;r<e.length;r++){const o=e[r],s=isString$4(o)?parseStringStyle(o):normalizeStyle(o);if(s)for(const u in s)n[u]=s[u]}return n}else if(isString$4(e)||isObject$5(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const n={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const o=r.split(propertyDelimiterRE);o.length>1&&(n[o[0].trim()]=o[1].trim())}}),n}function normalizeClass(e){let n="";if(isString$4(e))n=e;else if(isArray$4(e))for(let r=0;r<e.length;r++){const o=normalizeClass(e[r]);o&&(n+=o+" ")}else if(isObject$5(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function looseCompareArrays(e,n){if(e.length!==n.length)return!1;let r=!0;for(let o=0;r&&o<e.length;o++)r=looseEqual(e[o],n[o]);return r}function looseEqual(e,n){if(e===n)return!0;let r=isDate$2(e),o=isDate$2(n);if(r||o)return r&&o?e.getTime()===n.getTime():!1;if(r=isSymbol$2(e),o=isSymbol$2(n),r||o)return e===n;if(r=isArray$4(e),o=isArray$4(n),r||o)return r&&o?looseCompareArrays(e,n):!1;if(r=isObject$5(e),o=isObject$5(n),r||o){if(!r||!o)return!1;const s=Object.keys(e).length,u=Object.keys(n).length;if(s!==u)return!1;for(const d in e){const f=e.hasOwnProperty(d),g=n.hasOwnProperty(d);if(f&&!g||!f&&g||!looseEqual(e[d],n[d]))return!1}}return String(e)===String(n)}function looseIndexOf(e,n){return e.findIndex(r=>looseEqual(r,n))}const isRef$1=e=>!!(e&&e.__v_isRef===!0),toDisplayString$1=e=>isString$4(e)?e:e==null?"":isArray$4(e)||isObject$5(e)&&(e.toString===objectToString$3||!isFunction$3(e.toString))?isRef$1(e)?toDisplayString$1(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,n)=>isRef$1(n)?replacer(e,n.value):isMap(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[o,s],u)=>(r[stringifySymbol(o,u)+" =>"]=s,r),{})}:isSet(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>stringifySymbol(r))}:isSymbol$2(n)?stringifySymbol(n):isObject$5(n)&&!isArray$4(n)&&!isPlainObject$4(n)?String(n):n,stringifySymbol=(e,n="")=>{var r;return isSymbol$2(e)?`Symbol(${(r=e.description)!=null?r:n})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].pause();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,r;if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].resume();for(n=0,r=this.effects.length;n<r;n++)this.effects[n].resume()}}run(n){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let r,o;for(r=0,o=this.effects.length;r<o;r++)this.effects[r].stop();for(r=0,o=this.cleanups.length;r<o;r++)this.cleanups[r]();if(this.scopes)for(r=0,o=this.scopes.length;r<o;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!n){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e,n=!1){activeEffectScope&&activeEffectScope.cleanups.push(e)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const n=activeSub,r=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=n,shouldTrack=r,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)removeSub(n);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,n=!1){if(e.flags|=8,n){e.next=batchedComputed,batchedComputed=e;return}e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let n=batchedComputed;for(batchedComputed=void 0;n;){const r=n.next;n.next=void 0,n.flags&=-9,n=r}}let e;for(;batchedSub;){let n=batchedSub;for(batchedSub=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(o){e||(e=o)}n=r}}if(e)throw e}function prepareDeps(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function cleanupDeps(e){let n,r=e.depsTail,o=r;for(;o;){const s=o.prevDep;o.version===-1?(o===r&&(r=s),removeSub(o),removeDep(o)):n=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}e.deps=n,e.depsTail=r}function isDirty(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(refreshComputed(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function refreshComputed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===globalVersion))return;e.globalVersion=globalVersion;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!isDirty(e)){e.flags&=-3;return}const r=activeSub,o=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const s=e.fn(e._value);(n.version===0||hasChanged(s,e._value))&&(e._value=s,n.version++)}catch(s){throw n.version++,s}finally{activeSub=r,shouldTrack=o,cleanupDeps(e),e.flags&=-3}}function removeSub(e,n=!1){const{dep:r,prevSub:o,nextSub:s}=e;if(o&&(o.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=o,e.nextSub=void 0),r.subs===e&&(r.subs=o,!o&&r.computed)){r.computed.flags&=-5;for(let u=r.computed.deps;u;u=u.nextDep)removeSub(u,!0)}!n&&!--r.sc&&r.map&&r.map.delete(r.key)}function removeDep(e){const{prevDep:n,nextDep:r}=e;n&&(n.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=n,e.nextDep=void 0)}function effect(e,n){e.effect instanceof ReactiveEffect&&(e=e.effect.fn);const r=new ReactiveEffect(e);n&&extend$2(r,n);try{r.run()}catch(s){throw r.stop(),s}const o=r.run.bind(r);return o.effect=r,o}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function cleanupEffect(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const r=activeSub;activeSub=void 0;try{n()}finally{activeSub=r}}}let globalVersion=0;class Link$1{constructor(n,r){this.sub=n,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==activeSub)r=this.activeLink=new Link$1(activeSub,this),activeSub.deps?(r.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=r,activeSub.depsTail=r):activeSub.deps=activeSub.depsTail=r,addSub(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const o=r.nextDep;o.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=o),r.prevDep=activeSub.depsTail,r.nextDep=void 0,activeSub.depsTail.nextDep=r,activeSub.depsTail=r,activeSub.deps===r&&(activeSub.deps=o)}return r}trigger(n){this.version++,globalVersion++,this.notify(n)}notify(n){startBatch();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let o=n.deps;o;o=o.nextDep)addSub(o)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,n,r){if(shouldTrack&&activeSub){let o=targetMap.get(e);o||targetMap.set(e,o=new Map);let s=o.get(r);s||(o.set(r,s=new Dep),s.map=o,s.key=r),s.track()}}function trigger$1(e,n,r,o,s,u){const d=targetMap.get(e);if(!d){globalVersion++;return}const f=g=>{g&&g.trigger()};if(startBatch(),n==="clear")d.forEach(f);else{const g=isArray$4(e),m=g&&isIntegerKey(r);if(g&&r==="length"){const y=Number(o);d.forEach((v,_)=>{(_==="length"||_===ARRAY_ITERATE_KEY||!isSymbol$2(_)&&_>=y)&&f(v)})}else switch((r!==void 0||d.has(void 0))&&f(d.get(r)),m&&f(d.get(ARRAY_ITERATE_KEY)),n){case"add":g?m&&f(d.get("length")):(f(d.get(ITERATE_KEY)),isMap(e)&&f(d.get(MAP_KEY_ITERATE_KEY)));break;case"delete":g||(f(d.get(ITERATE_KEY)),isMap(e)&&f(d.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&f(d.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(e,n){const r=targetMap.get(e);return r&&r.get(n)}function reactiveReadArray(e){const n=toRaw(e);return n===e?n:(track(n,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?n:n.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(n=>isArray$4(n)?reactiveReadArray(n):n))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,n){return apply$2(this,"every",e,n,void 0,arguments)},filter(e,n){return apply$2(this,"filter",e,n,r=>r.map(toReactive),arguments)},find(e,n){return apply$2(this,"find",e,n,toReactive,arguments)},findIndex(e,n){return apply$2(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return apply$2(this,"findLast",e,n,toReactive,arguments)},findLastIndex(e,n){return apply$2(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return apply$2(this,"forEach",e,n,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,n){return apply$2(this,"map",e,n,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...n){return reduce(this,"reduce",e,n)},reduceRight(e,...n){return reduce(this,"reduceRight",e,n)},shift(){return noTracking(this,"shift")},some(e,n){return apply$2(this,"some",e,n,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,n,r){const o=shallowReadArray(e),s=o[n]();return o!==e&&!isShallow(e)&&(s._next=s.next,s.next=()=>{const u=s._next();return u.value&&(u.value=r(u.value)),u}),s}const arrayProto$1=Array.prototype;function apply$2(e,n,r,o,s,u){const d=shallowReadArray(e),f=d!==e&&!isShallow(e),g=d[n];if(g!==arrayProto$1[n]){const v=g.apply(e,u);return f?toReactive(v):v}let m=r;d!==e&&(f?m=function(v,_){return r.call(this,toReactive(v),_,e)}:r.length>2&&(m=function(v,_){return r.call(this,v,_,e)}));const y=g.call(d,m,o);return f&&s?s(y):y}function reduce(e,n,r,o){const s=shallowReadArray(e);let u=r;return s!==e&&(isShallow(e)?r.length>3&&(u=function(d,f,g){return r.call(this,d,f,g,e)}):u=function(d,f,g){return r.call(this,d,toReactive(f),g,e)}),s[n](u,...o)}function searchProxy(e,n,r){const o=toRaw(e);track(o,"iterate",ARRAY_ITERATE_KEY);const s=o[n](...r);return(s===-1||s===!1)&&isProxy(r[0])?(r[0]=toRaw(r[0]),o[n](...r)):s}function noTracking(e,n,r=[]){pauseTracking(),startBatch();const o=toRaw(e)[n].apply(e,r);return endBatch(),resetTracking(),o}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$2));function hasOwnProperty$d(e){isSymbol$2(e)||(e=String(e));const n=toRaw(this);return track(n,"has",e),n.hasOwnProperty(e)}class BaseReactiveHandler{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,o){const s=this._isReadonly,u=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return u;if(r==="__v_raw")return o===(s?u?shallowReadonlyMap:readonlyMap:u?shallowReactiveMap:reactiveMap).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(o)?n:void 0;const d=isArray$4(n);if(!s){let g;if(d&&(g=arrayInstrumentations[r]))return g;if(r==="hasOwnProperty")return hasOwnProperty$d}const f=Reflect.get(n,r,isRef(n)?n:o);return(isSymbol$2(r)?builtInSymbols.has(r):isNonTrackableKeys(r))||(s||track(n,"get",r),u)?f:isRef(f)?d&&isIntegerKey(r)?f:f.value:isObject$5(f)?s?readonly(f):reactive(f):f}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!1,n)}set(n,r,o,s){let u=n[r];if(!this._isShallow){const g=isReadonly(u);if(!isShallow(o)&&!isReadonly(o)&&(u=toRaw(u),o=toRaw(o)),!isArray$4(n)&&isRef(u)&&!isRef(o))return g?!1:(u.value=o,!0)}const d=isArray$4(n)&&isIntegerKey(r)?Number(r)<n.length:hasOwn$1(n,r),f=Reflect.set(n,r,o,isRef(n)?n:s);return n===toRaw(s)&&(d?hasChanged(o,u)&&trigger$1(n,"set",r,o):trigger$1(n,"add",r,o)),f}deleteProperty(n,r){const o=hasOwn$1(n,r);n[r];const s=Reflect.deleteProperty(n,r);return s&&o&&trigger$1(n,"delete",r,void 0),s}has(n,r){const o=Reflect.has(n,r);return(!isSymbol$2(r)||!builtInSymbols.has(r))&&track(n,"has",r),o}ownKeys(n){return track(n,"iterate",isArray$4(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,n,r){return function(...o){const s=this.__v_raw,u=toRaw(s),d=isMap(u),f=e==="entries"||e===Symbol.iterator&&d,g=e==="keys"&&d,m=s[e](...o),y=r?toShallow:n?toReadonly:toReactive;return!n&&track(u,"iterate",g?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:v,done:_}=m.next();return _?{value:v,done:_}:{value:f?[y(v[0]),y(v[1])]:y(v),done:_}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(e,n){const r={get(s){const u=this.__v_raw,d=toRaw(u),f=toRaw(s);e||(hasChanged(s,f)&&track(d,"get",s),track(d,"get",f));const{has:g}=getProto(d),m=n?toShallow:e?toReadonly:toReactive;if(g.call(d,s))return m(u.get(s));if(g.call(d,f))return m(u.get(f));u!==d&&u.get(s)},get size(){const s=this.__v_raw;return!e&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)},has(s){const u=this.__v_raw,d=toRaw(u),f=toRaw(s);return e||(hasChanged(s,f)&&track(d,"has",s),track(d,"has",f)),s===f?u.has(s):u.has(s)||u.has(f)},forEach(s,u){const d=this,f=d.__v_raw,g=toRaw(f),m=n?toShallow:e?toReadonly:toReactive;return!e&&track(g,"iterate",ITERATE_KEY),f.forEach((y,v)=>s.call(u,m(y),m(v),d))}};return extend$2(r,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(s){!n&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const u=toRaw(this);return getProto(u).has.call(u,s)||(u.add(s),trigger$1(u,"add",s,s)),this},set(s,u){!n&&!isShallow(u)&&!isReadonly(u)&&(u=toRaw(u));const d=toRaw(this),{has:f,get:g}=getProto(d);let m=f.call(d,s);m||(s=toRaw(s),m=f.call(d,s));const y=g.call(d,s);return d.set(s,u),m?hasChanged(u,y)&&trigger$1(d,"set",s,u):trigger$1(d,"add",s,u),this},delete(s){const u=toRaw(this),{has:d,get:f}=getProto(u);let g=d.call(u,s);g||(s=toRaw(s),g=d.call(u,s)),f&&f.call(u,s);const m=u.delete(s);return g&&trigger$1(u,"delete",s,void 0),m},clear(){const s=toRaw(this),u=s.size!==0,d=s.clear();return u&&trigger$1(s,"clear",void 0,void 0),d}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=createIterableMethod(s,e,n)}),r}function createInstrumentationGetter(e,n){const r=createInstrumentations(e,n);return(o,s,u)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(hasOwn$1(r,s)&&s in o?r:o,s,u)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,n,r,o,s){if(!isObject$5(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const u=s.get(e);if(u)return u;const d=getTargetType(e);if(d===0)return e;const f=new Proxy(e,d===2?o:r);return s.set(e,f),f}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const n=e&&e.__v_raw;return n?toRaw(n):e}function markRaw(e){return!hasOwn$1(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject$5(e)?reactive(e):e,toReadonly=e=>isObject$5(e)?readonly(e):e;function isRef(e){return e?e.__v_isRef===!0:!1}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,n){return isRef(e)?e:new RefImpl(e,n)}class RefImpl{constructor(n,r){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?n:toRaw(n),this._value=r?n:toReactive(n),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(n){const r=this._rawValue,o=this.__v_isShallow||isShallow(n)||isReadonly(n);n=o?n:toRaw(n),hasChanged(n,r)&&(this._rawValue=n,this._value=o?n:toReactive(n),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,n,r)=>n==="__v_raw"?e:unref(Reflect.get(e,n,r)),set:(e,n,r,o)=>{const s=e[n];return isRef(s)&&!isRef(r)?(s.value=r,!0):Reflect.set(e,n,r,o)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const n=isArray$4(e)?new Array(e.length):{};for(const r in e)n[r]=propertyToRef(e,r);return n}class ObjectRefImpl{constructor(n,r,o){this._object=n,this._key=r,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(e,n,r){return isRef(e)?e:isFunction$3(e)?new GetterRefImpl(e):isObject$5(e)&&arguments.length>1?propertyToRef(e,n,r):ref(e)}function propertyToRef(e,n,r){const o=e[n];return isRef(o)?o:new ObjectRefImpl(e,n,r)}class ComputedRefImpl{constructor(n,r,o){this.fn=n,this.setter=r,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const n=this.dep.track();return refreshComputed(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function computed$1(e,n,r=!1){let o,s;return isFunction$3(e)?o=e:(o=e.get,s=e.set),new ComputedRefImpl(o,s,r)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,n=!1,r=activeWatcher){if(r){let o=cleanupMap.get(r);o||cleanupMap.set(r,o=[]),o.push(e)}}function watch$1(e,n,r=EMPTY_OBJ){const{immediate:o,deep:s,once:u,scheduler:d,augmentJob:f,call:g}=r,m=T=>s?T:isShallow(T)||s===!1||s===0?traverse(T,1):traverse(T);let y,v,_,w,x=!1,k=!1;if(isRef(e)?(v=()=>e.value,x=isShallow(e)):isReactive(e)?(v=()=>m(e),x=!0):isArray$4(e)?(k=!0,x=e.some(T=>isReactive(T)||isShallow(T)),v=()=>e.map(T=>{if(isRef(T))return T.value;if(isReactive(T))return m(T);if(isFunction$3(T))return g?g(T,2):T()})):isFunction$3(e)?n?v=g?()=>g(e,2):e:v=()=>{if(_){pauseTracking();try{_()}finally{resetTracking()}}const T=activeWatcher;activeWatcher=y;try{return g?g(e,3,[w]):e(w)}finally{activeWatcher=T}}:v=NOOP,n&&s){const T=v,D=s===!0?1/0:s;v=()=>traverse(T(),D)}const S=getCurrentScope(),M=()=>{y.stop(),S&&remove(S.effects,y)};if(u&&n){const T=n;n=(...D)=>{T(...D),M()}}let E=k?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const P=T=>{if(!(!(y.flags&1)||!y.dirty&&!T))if(n){const D=y.run();if(s||x||(k?D.some((F,I)=>hasChanged(F,E[I])):hasChanged(D,E))){_&&_();const F=activeWatcher;activeWatcher=y;try{const I=[D,E===INITIAL_WATCHER_VALUE?void 0:k&&E[0]===INITIAL_WATCHER_VALUE?[]:E,w];g?g(n,3,I):n(...I),E=D}finally{activeWatcher=F}}}else y.run()};return f&&f(P),y=new ReactiveEffect(v),y.scheduler=d?()=>d(P,!1):P,w=T=>onWatcherCleanup(T,!1,y),_=y.onStop=()=>{const T=cleanupMap.get(y);if(T){if(g)g(T,4);else for(const D of T)D();cleanupMap.delete(y)}},n?o?P(!0):E=y.run():d?d(P.bind(null,!0),!0):y.run(),M.pause=y.pause.bind(y),M.resume=y.resume.bind(y),M.stop=M,M}function traverse(e,n=1/0,r){if(n<=0||!isObject$5(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),n--,isRef(e))traverse(e.value,n,r);else if(isArray$4(e))for(let o=0;o<e.length;o++)traverse(e[o],n,r);else if(isSet(e)||isMap(e))e.forEach(o=>{traverse(o,n,r)});else if(isPlainObject$4(e)){for(const o in e)traverse(e[o],n,r);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&traverse(e[o],n,r)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack$1=[];let isWarning=!1;function warn$1$1(e,...n){if(isWarning)return;isWarning=!0,pauseTracking();const r=stack$1.length?stack$1[stack$1.length-1].component:null,o=r&&r.appContext.config.warnHandler,s=getComponentTrace();if(o)callWithErrorHandling(o,r,11,[e+n.map(u=>{var d,f;return(f=(d=u.toString)==null?void 0:d.call(u))!=null?f:JSON.stringify(u)}).join(""),r&&r.proxy,s.map(({vnode:u})=>`at <${formatComponentName(r,u.type)}>`).join(`
`),s]);else{const u=[`[Vue warn]: ${e}`,...n];s.length&&u.push(`
`,...formatTrace(s)),console.warn(...u)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack$1[stack$1.length-1];if(!e)return[];const n=[];for(;e;){const r=n[0];r&&r.vnode===e?r.recurseCount++:n.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return n}function formatTrace(e){const n=[];return e.forEach((r,o)=>{n.push(...o===0?[]:[`
`],...formatTraceEntry(r))}),n}function formatTraceEntry({vnode:e,recurseCount:n}){const r=n>0?`... (${n} recursive calls)`:"",o=e.component?e.component.parent==null:!1,s=` at <${formatComponentName(e.component,e.type,o)}`,u=">"+r;return e.props?[s,...formatProps(e.props),u]:[s+u]}function formatProps(e){const n=[],r=Object.keys(e);return r.slice(0,3).forEach(o=>{n.push(...formatProp(o,e[o]))}),r.length>3&&n.push(" ..."),n}function formatProp(e,n,r){return isString$4(n)?(n=JSON.stringify(n),r?n:[`${e}=${n}`]):typeof n=="number"||typeof n=="boolean"||n==null?r?n:[`${e}=${n}`]:isRef(n)?(n=formatProp(e,toRaw(n.value),!0),r?n:[`${e}=Ref<`,n,">"]):isFunction$3(n)?[`${e}=fn${n.name?`<${n.name}>`:""}`]:(n=toRaw(n),r?n:[`${e}=`,n])}function callWithErrorHandling(e,n,r,o){try{return o?e(...o):e()}catch(s){handleError(s,n,r)}}function callWithAsyncErrorHandling(e,n,r,o){if(isFunction$3(e)){const s=callWithErrorHandling(e,n,r,o);return s&&isPromise$1(s)&&s.catch(u=>{handleError(u,n,r)}),s}if(isArray$4(e)){const s=[];for(let u=0;u<e.length;u++)s.push(callWithAsyncErrorHandling(e[u],n,r,o));return s}}function handleError(e,n,r,o=!0){const s=n?n.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:d}=n&&n.appContext.config||EMPTY_OBJ;if(n){let f=n.parent;const g=n.proxy,m=`https://vuejs.org/error-reference/#runtime-${r}`;for(;f;){const y=f.ec;if(y){for(let v=0;v<y.length;v++)if(y[v](e,g,m)===!1)return}f=f.parent}if(u){pauseTracking(),callWithErrorHandling(u,null,10,[e,g,m]),resetTracking();return}}logError(e,r,s,o,d)}function logError(e,n,r,o=!0,s=!1){if(s)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const n=currentFlushPromise||resolvedPromise;return e?n.then(this?e.bind(this):e):n}function findInsertionIndex(e){let n=flushIndex+1,r=queue.length;for(;n<r;){const o=n+r>>>1,s=queue[o],u=getId(s);u<e||u===e&&s.flags&2?n=o+1:r=o}return n}function queueJob(e){if(!(e.flags&1)){const n=getId(e),r=queue[queue.length-1];!r||!(e.flags&2)&&n>=getId(r)?queue.push(e):queue.splice(findInsertionIndex(n),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray$4(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&e.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,e):e.flags&1||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,n,r=flushIndex+1){for(;r<queue.length;r++){const o=queue[r];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;queue.splice(r,1),r--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)].sort((r,o)=>getId(r)-getId(o));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const r=activePostFlushCbs[postFlushIndex];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?e.flags&2?-1:1/0:e.id;function flushJobs(e){const n=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),callWithErrorHandling(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&(r.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const n=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,n}function withCtx(e,n=currentRenderingInstance,r){if(!n||e._n)return e;const o=(...s)=>{o._d&&setBlockTracking(-1);const u=setCurrentRenderingInstance(n);let d;try{d=e(...s)}finally{setCurrentRenderingInstance(u),o._d&&setBlockTracking(1)}return d};return o._n=!0,o._c=!0,o._d=!0,o}function withDirectives(e,n){if(currentRenderingInstance===null)return e;const r=getComponentPublicInstance(currentRenderingInstance),o=e.dirs||(e.dirs=[]);for(let s=0;s<n.length;s++){let[u,d,f,g=EMPTY_OBJ]=n[s];u&&(isFunction$3(u)&&(u={mounted:u,updated:u}),u.deep&&traverse(d),o.push({dir:u,instance:r,value:d,oldValue:void 0,arg:f,modifiers:g}))}return e}function invokeDirectiveHook(e,n,r,o){const s=e.dirs,u=n&&n.dirs;for(let d=0;d<s.length;d++){const f=s[d];u&&(f.oldValue=u[d].value);let g=f.dir[o];g&&(pauseTracking(),callWithAsyncErrorHandling(g,r,8,[e.el,f,e,n]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTeleportDeferred=e=>e&&(e.defer||e.defer===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,isTargetMathML=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,resolveTarget=(e,n)=>{const r=e&&e.to;return isString$4(r)?n?n(r):null:r},TeleportImpl={name:"Teleport",__isTeleport:!0,process(e,n,r,o,s,u,d,f,g,m){const{mc:y,pc:v,pbc:_,o:{insert:w,querySelector:x,createText:k,createComment:S}}=m,M=isTeleportDisabled(n.props);let{shapeFlag:E,children:P,dynamicChildren:T}=n;if(e==null){const D=n.el=k(""),F=n.anchor=k("");w(D,r,o),w(F,r,o);const I=(q,Y)=>{E&16&&(s&&s.isCE&&(s.ce._teleportTarget=q),y(P,q,Y,s,u,d,f,g))},N=()=>{const q=n.target=resolveTarget(n.props,x),Y=prepareAnchor(q,n,k,w);q&&(d!=="svg"&&isTargetSVG(q)?d="svg":d!=="mathml"&&isTargetMathML(q)&&(d="mathml"),M||(I(q,Y),updateCssVars(n,!1)))};M&&(I(r,F),updateCssVars(n,!0)),isTeleportDeferred(n.props)?queuePostRenderEffect(N,u):N()}else{n.el=e.el,n.targetStart=e.targetStart;const D=n.anchor=e.anchor,F=n.target=e.target,I=n.targetAnchor=e.targetAnchor,N=isTeleportDisabled(e.props),q=N?r:F,Y=N?D:I;if(d==="svg"||isTargetSVG(F)?d="svg":(d==="mathml"||isTargetMathML(F))&&(d="mathml"),T?(_(e.dynamicChildren,T,q,s,u,d,f),traverseStaticChildren(e,n,!0)):g||v(e,n,q,Y,s,u,d,f,!1),M)N?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):moveTeleport(n,r,D,m,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const Z=n.target=resolveTarget(n.props,x);Z&&moveTeleport(n,Z,null,m,0)}else N&&moveTeleport(n,F,I,m,1);updateCssVars(n,M)}},remove(e,n,r,{um:o,o:{remove:s}},u){const{shapeFlag:d,children:f,anchor:g,targetStart:m,targetAnchor:y,target:v,props:_}=e;if(v&&(s(m),s(y)),u&&s(g),d&16){const w=u||!isTeleportDisabled(_);for(let x=0;x<f.length;x++){const k=f[x];o(k,n,r,w,!!k.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,n,r,{o:{insert:o},m:s},u=2){u===0&&o(e.targetAnchor,n,r);const{el:d,anchor:f,shapeFlag:g,children:m,props:y}=e,v=u===2;if(v&&o(d,n,r),(!v||isTeleportDisabled(y))&&g&16)for(let _=0;_<m.length;_++)s(m[_],n,r,2);v&&o(f,n,r)}function hydrateTeleport(e,n,r,o,s,u,{o:{nextSibling:d,parentNode:f,querySelector:g,insert:m,createText:y}},v){const _=n.target=resolveTarget(n.props,g);if(_){const w=isTeleportDisabled(n.props),x=_._lpa||_.firstChild;if(n.shapeFlag&16)if(w)n.anchor=v(d(e),n,f(e),r,o,s,u),n.targetStart=x,n.targetAnchor=x&&d(x);else{n.anchor=d(e);let k=x;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")n.targetStart=k;else if(k.data==="teleport anchor"){n.targetAnchor=k,_._lpa=n.targetAnchor&&d(n.targetAnchor);break}}k=d(k)}n.targetAnchor||prepareAnchor(_,n,y,m),v(x&&d(x),n,_,r,o,s,u)}updateCssVars(n,w)}return n.anchor&&d(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(e,n){const r=e.ctx;if(r&&r.ut){let o,s;for(n?(o=e.el,s=e.anchor):(o=e.targetStart,s=e.targetAnchor);o&&o!==s;)o.nodeType===1&&o.setAttribute("data-v-owner",r.uid),o=o.nextSibling;r.ut()}}function prepareAnchor(e,n,r,o){const s=n.targetStart=r(""),u=n.targetAnchor=r("");return s[TeleportEndKey]=u,e&&(o(s,e),o(u,e)),u}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=e=>{const n=e.subTree;return n.component?recursiveGetSubtree(n.component):n},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:n}){const r=getCurrentInstance(),o=useTransitionState();return()=>{const s=n.default&&getTransitionRawChildren(n.default(),!0);if(!s||!s.length)return;const u=findNonCommentChild(s),d=toRaw(e),{mode:f}=d;if(o.isLeaving)return emptyPlaceholder(u);const g=getInnerChild$1(u);if(!g)return emptyPlaceholder(u);let m=resolveTransitionHooks(g,d,o,r,_=>m=_);g.type!==Comment&&setTransitionHooks(g,m);const y=r.subTree,v=y&&getInnerChild$1(y);if(v&&v.type!==Comment&&!isSameVNodeType(g,v)&&recursiveGetSubtree(r).type!==Comment){const _=resolveTransitionHooks(v,d,o,r);if(setTransitionHooks(v,_),f==="out-in"&&g.type!==Comment)return o.isLeaving=!0,_.afterLeave=()=>{o.isLeaving=!1,r.job.flags&8||r.update(),delete _.afterLeave},emptyPlaceholder(u);f==="in-out"&&g.type!==Comment&&(_.delayLeave=(w,x,k)=>{const S=getLeavingNodesForType(o,v);S[String(v.key)]=v,w[leaveCbKey]=()=>{x(),w[leaveCbKey]=void 0,delete m.delayedLeave},m.delayedLeave=k})}return u}}};function findNonCommentChild(e){let n=e[0];if(e.length>1){for(const r of e)if(r.type!==Comment){n=r;break}}return n}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,n){const{leavingVNodes:r}=e;let o=r.get(n.type);return o||(o=Object.create(null),r.set(n.type,o)),o}function resolveTransitionHooks(e,n,r,o,s){const{appear:u,mode:d,persisted:f=!1,onBeforeEnter:g,onEnter:m,onAfterEnter:y,onEnterCancelled:v,onBeforeLeave:_,onLeave:w,onAfterLeave:x,onLeaveCancelled:k,onBeforeAppear:S,onAppear:M,onAfterAppear:E,onAppearCancelled:P}=n,T=String(e.key),D=getLeavingNodesForType(r,e),F=(q,Y)=>{q&&callWithAsyncErrorHandling(q,o,9,Y)},I=(q,Y)=>{const Z=Y[1];F(q,Y),isArray$4(q)?q.every(j=>j.length<=1)&&Z():q.length<=1&&Z()},N={mode:d,persisted:f,beforeEnter(q){let Y=g;if(!r.isMounted)if(u)Y=S||g;else return;q[leaveCbKey]&&q[leaveCbKey](!0);const Z=D[T];Z&&isSameVNodeType(e,Z)&&Z.el[leaveCbKey]&&Z.el[leaveCbKey](),F(Y,[q])},enter(q){let Y=m,Z=y,j=v;if(!r.isMounted)if(u)Y=M||m,Z=E||y,j=P||v;else return;let ne=!1;const le=q[enterCbKey$1]=J=>{ne||(ne=!0,J?F(j,[q]):F(Z,[q]),N.delayedLeave&&N.delayedLeave(),q[enterCbKey$1]=void 0)};Y?I(Y,[q,le]):le()},leave(q,Y){const Z=String(e.key);if(q[enterCbKey$1]&&q[enterCbKey$1](!0),r.isUnmounting)return Y();F(_,[q]);let j=!1;const ne=q[leaveCbKey]=le=>{j||(j=!0,Y(),le?F(k,[q]):F(x,[q]),q[leaveCbKey]=void 0,D[Z]===e&&delete D[Z])};D[Z]=e,w?I(w,[q,ne]):ne()},clone(q){const Y=resolveTransitionHooks(q,n,r,o,s);return s&&s(Y),Y}};return N}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getInnerChild$1(e){if(!isKeepAlive(e))return isTeleport(e.type)&&e.children?findNonCommentChild(e.children):e;const{shapeFlag:n,children:r}=e;if(r){if(n&16)return r[0];if(n&32&&isFunction$3(r.default))return r.default()}}function setTransitionHooks(e,n){e.shapeFlag&6&&e.component?(e.transition=n,setTransitionHooks(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function getTransitionRawChildren(e,n=!1,r){let o=[],s=0;for(let u=0;u<e.length;u++){let d=e[u];const f=r==null?d.key:String(r)+String(d.key!=null?d.key:u);d.type===Fragment?(d.patchFlag&128&&s++,o=o.concat(getTransitionRawChildren(d.children,n,f))):(n||d.type!==Comment)&&o.push(f!=null?cloneVNode(d,{key:f}):d)}if(s>1)for(let u=0;u<o.length;u++)o[u].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,n){return isFunction$3(e)?(()=>extend$2({name:e.name},n,{setup:e}))():e}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function setRef(e,n,r,o,s=!1){if(isArray$4(e)){e.forEach((x,k)=>setRef(x,n&&(isArray$4(n)?n[k]:n),r,o,s));return}if(isAsyncWrapper(o)&&!s)return;const u=o.shapeFlag&4?getComponentPublicInstance(o.component):o.el,d=s?null:u,{i:f,r:g}=e,m=n&&n.r,y=f.refs===EMPTY_OBJ?f.refs={}:f.refs,v=f.setupState,_=toRaw(v),w=v===EMPTY_OBJ?()=>!1:x=>hasOwn$1(_,x);if(m!=null&&m!==g&&(isString$4(m)?(y[m]=null,w(m)&&(v[m]=null)):isRef(m)&&(m.value=null)),isFunction$3(g))callWithErrorHandling(g,f,12,[d,y]);else{const x=isString$4(g),k=isRef(g);if(x||k){const S=()=>{if(e.f){const M=x?w(g)?v[g]:y[g]:g.value;s?isArray$4(M)&&remove(M,u):isArray$4(M)?M.includes(u)||M.push(u):x?(y[g]=[u],w(g)&&(v[g]=y[g])):(g.value=[u],e.k&&(y[e.k]=g.value))}else x?(y[g]=d,w(g)&&(v[g]=d)):k&&(g.value=d,e.k&&(y[e.k]=d))};d?(S.id=-1,queuePostRenderEffect(S,r)):S()}}}getGlobalThis$1().requestIdleCallback;getGlobalThis$1().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,n){registerKeepAliveHook(e,"a",n)}function onDeactivated(e,n){registerKeepAliveHook(e,"da",n)}function registerKeepAliveHook(e,n,r=currentInstance){const o=e.__wdc||(e.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(injectHook(n,o,r),r){let s=r.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(o,n,r,s),s=s.parent}}function injectToKeepAliveRoot(e,n,r,o){const s=injectHook(n,e,o,!0);onUnmounted(()=>{remove(o[n],s)},r)}function injectHook(e,n,r=currentInstance,o=!1){if(r){const s=r[e]||(r[e]=[]),u=n.__weh||(n.__weh=(...d)=>{pauseTracking();const f=setCurrentInstance(r),g=callWithAsyncErrorHandling(n,r,e,d);return f(),resetTracking(),g});return o?s.unshift(u):s.push(u),u}}const createHook=e=>(n,r=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...o)=>n(...o),r)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,n=currentInstance){injectHook("ec",e,n)}const COMPONENTS="components";function resolveComponent(e,n){return resolveAsset(COMPONENTS,e,!0,n)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(e,n,r=!0,o=!1){const s=currentRenderingInstance||currentInstance;if(s){const u=s.type;if(e===COMPONENTS){const f=getComponentName(u,!1);if(f&&(f===n||f===camelize(n)||f===capitalize$1(camelize(n))))return u}const d=resolve(s[e]||u[e],n)||resolve(s.appContext[e],n);return!d&&o?u:d}}function resolve(e,n){return e&&(e[n]||e[camelize(n)]||e[capitalize$1(camelize(n))])}function renderList(e,n,r,o){let s;const u=r&&r[o],d=isArray$4(e);if(d||isString$4(e)){const f=d&&isReactive(e);let g=!1;f&&(g=!isShallow(e),e=shallowReadArray(e)),s=new Array(e.length);for(let m=0,y=e.length;m<y;m++)s[m]=n(g?toReactive(e[m]):e[m],m,void 0,u&&u[m])}else if(typeof e=="number"){s=new Array(e);for(let f=0;f<e;f++)s[f]=n(f+1,f,void 0,u&&u[f])}else if(isObject$5(e))if(e[Symbol.iterator])s=Array.from(e,(f,g)=>n(f,g,void 0,u&&u[g]));else{const f=Object.keys(e);s=new Array(f.length);for(let g=0,m=f.length;g<m;g++){const y=f[g];s[g]=n(e[y],y,g,u&&u[g])}}else s=[];return r&&(r[o]=s),s}function renderSlot(e,n,r={},o,s){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return n!=="default"&&(r.name=n),openBlock(),createBlock(Fragment,null,[createVNode("slot",r,o&&o())],64);let u=e[n];u&&u._c&&(u._d=!1),openBlock();const d=u&&ensureValidVNode$1(u(r)),f=r.key||d&&d.key,g=createBlock(Fragment,{key:(f&&!isSymbol$2(f)?f:`_${n}`)+(!d&&o?"_fb":"")},d||(o?o():[]),d&&e._===1?64:-2);return!s&&g.scopeId&&(g.slotScopeIds=[g.scopeId+"-s"]),u&&u._c&&(u._d=!0),g}function ensureValidVNode$1(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode$1(n.children)):!0)?e:null}function toHandlers(e,n){const r={};for(const o in e)r[n&&/[A-Z]/.test(o)?`on:${o}`:toHandlerKey(o)]=e[o];return r}const getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,n)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$1(e,n),PublicInstanceProxyHandlers={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:o,data:s,props:u,accessCache:d,type:f,appContext:g}=e;let m;if(n[0]!=="$"){const w=d[n];if(w!==void 0)switch(w){case 1:return o[n];case 2:return s[n];case 4:return r[n];case 3:return u[n]}else{if(hasSetupBinding(o,n))return d[n]=1,o[n];if(s!==EMPTY_OBJ&&hasOwn$1(s,n))return d[n]=2,s[n];if((m=e.propsOptions[0])&&hasOwn$1(m,n))return d[n]=3,u[n];if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return d[n]=4,r[n];shouldCacheAccess&&(d[n]=0)}}const y=publicPropertiesMap[n];let v,_;if(y)return n==="$attrs"&&track(e.attrs,"get",""),y(e);if((v=f.__cssModules)&&(v=v[n]))return v;if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return d[n]=4,r[n];if(_=g.config.globalProperties,hasOwn$1(_,n))return _[n]},set({_:e},n,r){const{data:o,setupState:s,ctx:u}=e;return hasSetupBinding(s,n)?(s[n]=r,!0):o!==EMPTY_OBJ&&hasOwn$1(o,n)?(o[n]=r,!0):hasOwn$1(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(u[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:o,appContext:s,propsOptions:u}},d){let f;return!!r[d]||e!==EMPTY_OBJ&&hasOwn$1(e,d)||hasSetupBinding(n,d)||(f=u[0])&&hasOwn$1(f,d)||hasOwn$1(o,d)||hasOwn$1(publicPropertiesMap,d)||hasOwn$1(s.config.globalProperties,d)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:hasOwn$1(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};function normalizePropsOrEmits(e){return isArray$4(e)?e.reduce((n,r)=>(n[r]=null,n),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const n=resolveMergedOptions(e),r=e.proxy,o=e.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,e,"bc");const{data:s,computed:u,methods:d,watch:f,provide:g,inject:m,created:y,beforeMount:v,mounted:_,beforeUpdate:w,updated:x,activated:k,deactivated:S,beforeDestroy:M,beforeUnmount:E,destroyed:P,unmounted:T,render:D,renderTracked:F,renderTriggered:I,errorCaptured:N,serverPrefetch:q,expose:Y,inheritAttrs:Z,components:j,directives:ne,filters:le}=n;if(m&&resolveInjections(m,o,null),d)for(const U in d){const W=d[U];isFunction$3(W)&&(o[U]=W.bind(r))}if(s){const U=s.call(r,r);isObject$5(U)&&(e.data=reactive(U))}if(shouldCacheAccess=!0,u)for(const U in u){const W=u[U],H=isFunction$3(W)?W.bind(r,r):isFunction$3(W.get)?W.get.bind(r,r):NOOP,X=!isFunction$3(W)&&isFunction$3(W.set)?W.set.bind(r):NOOP,Q=computed({get:H,set:X});Object.defineProperty(o,U,{enumerable:!0,configurable:!0,get:()=>Q.value,set:fe=>Q.value=fe})}if(f)for(const U in f)createWatcher(f[U],o,r,U);if(g){const U=isFunction$3(g)?g.call(r):g;Reflect.ownKeys(U).forEach(W=>{provide(W,U[W])})}y&&callHook$1(y,e,"c");function O(U,W){isArray$4(W)?W.forEach(H=>U(H.bind(r))):W&&U(W.bind(r))}if(O(onBeforeMount,v),O(onMounted,_),O(onBeforeUpdate,w),O(onUpdated,x),O(onActivated,k),O(onDeactivated,S),O(onErrorCaptured,N),O(onRenderTracked,F),O(onRenderTriggered,I),O(onBeforeUnmount,E),O(onUnmounted,T),O(onServerPrefetch,q),isArray$4(Y))if(Y.length){const U=e.exposed||(e.exposed={});Y.forEach(W=>{Object.defineProperty(U,W,{get:()=>r[W],set:H=>r[W]=H})})}else e.exposed||(e.exposed={});D&&e.render===NOOP&&(e.render=D),Z!=null&&(e.inheritAttrs=Z),j&&(e.components=j),ne&&(e.directives=ne),q&&markAsyncBoundary(e)}function resolveInjections(e,n,r=NOOP){isArray$4(e)&&(e=normalizeInject(e));for(const o in e){const s=e[o];let u;isObject$5(s)?"default"in s?u=inject(s.from||o,s.default,!0):u=inject(s.from||o):u=inject(s),isRef(u)?Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:()=>u.value,set:d=>u.value=d}):n[o]=u}}function callHook$1(e,n,r){callWithAsyncErrorHandling(isArray$4(e)?e.map(o=>o.bind(n.proxy)):e.bind(n.proxy),n,r)}function createWatcher(e,n,r,o){let s=o.includes(".")?createPathGetter(r,o):()=>r[o];if(isString$4(e)){const u=n[e];isFunction$3(u)&&watch(s,u)}else if(isFunction$3(e))watch(s,e.bind(r));else if(isObject$5(e))if(isArray$4(e))e.forEach(u=>createWatcher(u,n,r,o));else{const u=isFunction$3(e.handler)?e.handler.bind(r):n[e.handler];isFunction$3(u)&&watch(s,u,e)}}function resolveMergedOptions(e){const n=e.type,{mixins:r,extends:o}=n,{mixins:s,optionsCache:u,config:{optionMergeStrategies:d}}=e.appContext,f=u.get(n);let g;return f?g=f:!s.length&&!r&&!o?g=n:(g={},s.length&&s.forEach(m=>mergeOptions(g,m,d,!0)),mergeOptions(g,n,d)),isObject$5(n)&&u.set(n,g),g}function mergeOptions(e,n,r,o=!1){const{mixins:s,extends:u}=n;u&&mergeOptions(e,u,r,!0),s&&s.forEach(d=>mergeOptions(e,d,r,!0));for(const d in n)if(!(o&&d==="expose")){const f=internalOptionMergeStrats[d]||r&&r[d];e[d]=f?f(e[d],n[d]):n[d]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,n){return n?e?function(){return extend$2(isFunction$3(e)?e.call(this,this):e,isFunction$3(n)?n.call(this,this):n)}:n:e}function mergeInject(e,n){return mergeObjectOptions(normalizeInject(e),normalizeInject(n))}function normalizeInject(e){if(isArray$4(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function mergeAsArray(e,n){return e?[...new Set([].concat(e,n))]:n}function mergeObjectOptions(e,n){return e?extend$2(Object.create(null),e,n):n}function mergeEmitsOrPropsOptions(e,n){return e?isArray$4(e)&&isArray$4(n)?[...new Set([...e,...n])]:extend$2(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(n!=null?n:{})):n}function mergeWatchOptions(e,n){if(!e)return n;if(!n)return e;const r=extend$2(Object.create(null),e);for(const o in n)r[o]=mergeAsArray(e[o],n[o]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,n){return function(o,s=null){isFunction$3(o)||(o=extend$2({},o)),s!=null&&!isObject$5(s)&&(s=null);const u=createAppContext(),d=new WeakSet,f=[];let g=!1;const m=u.app={_uid:uid$1++,_component:o,_props:s,_container:null,_context:u,_instance:null,version:version$2,get config(){return u.config},set config(y){},use(y,...v){return d.has(y)||(y&&isFunction$3(y.install)?(d.add(y),y.install(m,...v)):isFunction$3(y)&&(d.add(y),y(m,...v))),m},mixin(y){return u.mixins.includes(y)||u.mixins.push(y),m},component(y,v){return v?(u.components[y]=v,m):u.components[y]},directive(y,v){return v?(u.directives[y]=v,m):u.directives[y]},mount(y,v,_){if(!g){const w=m._ceVNode||createVNode(o,s);return w.appContext=u,_===!0?_="svg":_===!1&&(_=void 0),v&&n?n(w,y):e(w,y,_),g=!0,m._container=y,y.__vue_app__=m,getComponentPublicInstance(w.component)}},onUnmount(y){f.push(y)},unmount(){g&&(callWithAsyncErrorHandling(f,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(y,v){return u.provides[y]=v,m},runWithContext(y){const v=currentApp;currentApp=m;try{return y()}finally{currentApp=v}}};return m}}let currentApp=null;function provide(e,n){if(currentInstance){let r=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===r&&(r=currentInstance.provides=Object.create(o)),r[e]=n}}function inject(e,n,r=!1){const o=currentInstance||currentRenderingInstance;if(o||currentApp){const s=currentApp?currentApp._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return r&&isFunction$3(n)?n.call(o&&o.proxy):n}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,n,r,o=!1){const s={},u=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,n,s,u);for(const d in e.propsOptions[0])d in s||(s[d]=void 0);r?e.props=o?s:shallowReactive(s):e.type.props?e.props=s:e.props=u,e.attrs=u}function updateProps(e,n,r,o){const{props:s,attrs:u,vnode:{patchFlag:d}}=e,f=toRaw(s),[g]=e.propsOptions;let m=!1;if((o||d>0)&&!(d&16)){if(d&8){const y=e.vnode.dynamicProps;for(let v=0;v<y.length;v++){let _=y[v];if(isEmitListener(e.emitsOptions,_))continue;const w=n[_];if(g)if(hasOwn$1(u,_))w!==u[_]&&(u[_]=w,m=!0);else{const x=camelize(_);s[x]=resolvePropValue(g,f,x,w,e,!1)}else w!==u[_]&&(u[_]=w,m=!0)}}}else{setFullProps(e,n,s,u)&&(m=!0);let y;for(const v in f)(!n||!hasOwn$1(n,v)&&((y=hyphenate(v))===v||!hasOwn$1(n,y)))&&(g?r&&(r[v]!==void 0||r[y]!==void 0)&&(s[v]=resolvePropValue(g,f,v,void 0,e,!0)):delete s[v]);if(u!==f)for(const v in u)(!n||!hasOwn$1(n,v)&&!0)&&(delete u[v],m=!0)}m&&trigger$1(e.attrs,"set","")}function setFullProps(e,n,r,o){const[s,u]=e.propsOptions;let d=!1,f;if(n)for(let g in n){if(isReservedProp(g))continue;const m=n[g];let y;s&&hasOwn$1(s,y=camelize(g))?!u||!u.includes(y)?r[y]=m:(f||(f={}))[y]=m:isEmitListener(e.emitsOptions,g)||(!(g in o)||m!==o[g])&&(o[g]=m,d=!0)}if(u){const g=toRaw(r),m=f||EMPTY_OBJ;for(let y=0;y<u.length;y++){const v=u[y];r[v]=resolvePropValue(s,g,v,m[v],e,!hasOwn$1(m,v))}}return d}function resolvePropValue(e,n,r,o,s,u){const d=e[r];if(d!=null){const f=hasOwn$1(d,"default");if(f&&o===void 0){const g=d.default;if(d.type!==Function&&!d.skipFactory&&isFunction$3(g)){const{propsDefaults:m}=s;if(r in m)o=m[r];else{const y=setCurrentInstance(s);o=m[r]=g.call(null,n),y()}}else o=g;s.ce&&s.ce._setProp(r,o)}d[0]&&(u&&!f?o=!1:d[1]&&(o===""||o===hyphenate(r))&&(o=!0))}return o}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,n,r=!1){const o=r?mixinPropsCache:n.propsCache,s=o.get(e);if(s)return s;const u=e.props,d={},f=[];let g=!1;if(!isFunction$3(e)){const y=v=>{g=!0;const[_,w]=normalizePropsOptions(v,n,!0);extend$2(d,_),w&&f.push(...w)};!r&&n.mixins.length&&n.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!u&&!g)return isObject$5(e)&&o.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$4(u))for(let y=0;y<u.length;y++){const v=camelize(u[y]);validatePropName(v)&&(d[v]=EMPTY_OBJ)}else if(u)for(const y in u){const v=camelize(y);if(validatePropName(v)){const _=u[y],w=d[v]=isArray$4(_)||isFunction$3(_)?{type:_}:extend$2({},_),x=w.type;let k=!1,S=!0;if(isArray$4(x))for(let M=0;M<x.length;++M){const E=x[M],P=isFunction$3(E)&&E.name;if(P==="Boolean"){k=!0;break}else P==="String"&&(S=!1)}else k=isFunction$3(x)&&x.name==="Boolean";w[0]=k,w[1]=S,(k||hasOwn$1(w,"default"))&&f.push(v)}}const m=[d,f];return isObject$5(e)&&o.set(e,m),m}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$4(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,n,r)=>{if(n._n)return n;const o=withCtx((...s)=>normalizeSlotValue(n(...s)),r);return o._c=!1,o},normalizeObjectSlots=(e,n,r)=>{const o=e._ctx;for(const s in e){if(isInternalKey(s))continue;const u=e[s];if(isFunction$3(u))n[s]=normalizeSlot(s,u,o);else if(u!=null){const d=normalizeSlotValue(u);n[s]=()=>d}}},normalizeVNodeSlots=(e,n)=>{const r=normalizeSlotValue(n);e.slots.default=()=>r},assignSlots=(e,n,r)=>{for(const o in n)(r||o!=="_")&&(e[o]=n[o])},initSlots=(e,n,r)=>{const o=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const s=n._;s?(assignSlots(o,n,r),r&&def(o,"_",s,!0)):normalizeObjectSlots(n,o)}else n&&normalizeVNodeSlots(e,n)},updateSlots=(e,n,r)=>{const{vnode:o,slots:s}=e;let u=!0,d=EMPTY_OBJ;if(o.shapeFlag&32){const f=n._;f?r&&f===1?u=!1:assignSlots(s,n,r):(u=!n.$stable,normalizeObjectSlots(n,s)),d=n}else n&&(normalizeVNodeSlots(e,n),d={default:1});if(u)for(const f in s)!isInternalKey(f)&&d[f]==null&&delete s[f]};function initFeatureFlags$2(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(getGlobalThis$1().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,n){initFeatureFlags$2();const r=getGlobalThis$1();r.__VUE__=!0;const{insert:o,remove:s,patchProp:u,createElement:d,createText:f,createComment:g,setText:m,setElementText:y,parentNode:v,nextSibling:_,setScopeId:w=NOOP,insertStaticContent:x}=e,k=(ye,we,ke,Me=null,Le=null,Fe=null,ze=void 0,te=null,oe=!!we.dynamicChildren)=>{if(ye===we)return;ye&&!isSameVNodeType(ye,we)&&(Me=Ne(ye),fe(ye,Le,Fe,!0),ye=null),we.patchFlag===-2&&(oe=!1,we.dynamicChildren=null);const{type:_e,ref:Ce,shapeFlag:Ee}=we;switch(_e){case Text$2:S(ye,we,ke,Me);break;case Comment:M(ye,we,ke,Me);break;case Static:ye==null&&E(we,ke,Me,ze);break;case Fragment:j(ye,we,ke,Me,Le,Fe,ze,te,oe);break;default:Ee&1?D(ye,we,ke,Me,Le,Fe,ze,te,oe):Ee&6?ne(ye,we,ke,Me,Le,Fe,ze,te,oe):(Ee&64||Ee&128)&&_e.process(ye,we,ke,Me,Le,Fe,ze,te,oe,Ve)}Ce!=null&&Le&&setRef(Ce,ye&&ye.ref,Fe,we||ye,!we)},S=(ye,we,ke,Me)=>{if(ye==null)o(we.el=f(we.children),ke,Me);else{const Le=we.el=ye.el;we.children!==ye.children&&m(Le,we.children)}},M=(ye,we,ke,Me)=>{ye==null?o(we.el=g(we.children||""),ke,Me):we.el=ye.el},E=(ye,we,ke,Me)=>{[ye.el,ye.anchor]=x(ye.children,we,ke,Me,ye.el,ye.anchor)},P=({el:ye,anchor:we},ke,Me)=>{let Le;for(;ye&&ye!==we;)Le=_(ye),o(ye,ke,Me),ye=Le;o(we,ke,Me)},T=({el:ye,anchor:we})=>{let ke;for(;ye&&ye!==we;)ke=_(ye),s(ye),ye=ke;s(we)},D=(ye,we,ke,Me,Le,Fe,ze,te,oe)=>{we.type==="svg"?ze="svg":we.type==="math"&&(ze="mathml"),ye==null?F(we,ke,Me,Le,Fe,ze,te,oe):q(ye,we,Le,Fe,ze,te,oe)},F=(ye,we,ke,Me,Le,Fe,ze,te)=>{let oe,_e;const{props:Ce,shapeFlag:Ee,transition:Te,dirs:Re}=ye;if(oe=ye.el=d(ye.type,Fe,Ce&&Ce.is,Ce),Ee&8?y(oe,ye.children):Ee&16&&N(ye.children,oe,null,Me,Le,resolveChildrenNamespace(ye,Fe),ze,te),Re&&invokeDirectiveHook(ye,null,Me,"created"),I(oe,ye,ye.scopeId,ze,Me),Ce){for(const je in Ce)je!=="value"&&!isReservedProp(je)&&u(oe,je,null,Ce[je],Fe,Me);"value"in Ce&&u(oe,"value",null,Ce.value,Fe),(_e=Ce.onVnodeBeforeMount)&&invokeVNodeHook(_e,Me,ye)}Re&&invokeDirectiveHook(ye,null,Me,"beforeMount");const Oe=needTransition(Le,Te);Oe&&Te.beforeEnter(oe),o(oe,we,ke),((_e=Ce&&Ce.onVnodeMounted)||Oe||Re)&&queuePostRenderEffect(()=>{_e&&invokeVNodeHook(_e,Me,ye),Oe&&Te.enter(oe),Re&&invokeDirectiveHook(ye,null,Me,"mounted")},Le)},I=(ye,we,ke,Me,Le)=>{if(ke&&w(ye,ke),Me)for(let Fe=0;Fe<Me.length;Fe++)w(ye,Me[Fe]);if(Le){let Fe=Le.subTree;if(we===Fe||isSuspense(Fe.type)&&(Fe.ssContent===we||Fe.ssFallback===we)){const ze=Le.vnode;I(ye,ze,ze.scopeId,ze.slotScopeIds,Le.parent)}}},N=(ye,we,ke,Me,Le,Fe,ze,te,oe=0)=>{for(let _e=oe;_e<ye.length;_e++){const Ce=ye[_e]=te?cloneIfMounted(ye[_e]):normalizeVNode(ye[_e]);k(null,Ce,we,ke,Me,Le,Fe,ze,te)}},q=(ye,we,ke,Me,Le,Fe,ze)=>{const te=we.el=ye.el;let{patchFlag:oe,dynamicChildren:_e,dirs:Ce}=we;oe|=ye.patchFlag&16;const Ee=ye.props||EMPTY_OBJ,Te=we.props||EMPTY_OBJ;let Re;if(ke&&toggleRecurse(ke,!1),(Re=Te.onVnodeBeforeUpdate)&&invokeVNodeHook(Re,ke,we,ye),Ce&&invokeDirectiveHook(we,ye,ke,"beforeUpdate"),ke&&toggleRecurse(ke,!0),(Ee.innerHTML&&Te.innerHTML==null||Ee.textContent&&Te.textContent==null)&&y(te,""),_e?Y(ye.dynamicChildren,_e,te,ke,Me,resolveChildrenNamespace(we,Le),Fe):ze||W(ye,we,te,null,ke,Me,resolveChildrenNamespace(we,Le),Fe,!1),oe>0){if(oe&16)Z(te,Ee,Te,ke,Le);else if(oe&2&&Ee.class!==Te.class&&u(te,"class",null,Te.class,Le),oe&4&&u(te,"style",Ee.style,Te.style,Le),oe&8){const Oe=we.dynamicProps;for(let je=0;je<Oe.length;je++){const We=Oe[je],Ze=Ee[We],Xe=Te[We];(Xe!==Ze||We==="value")&&u(te,We,Ze,Xe,Le,ke)}}oe&1&&ye.children!==we.children&&y(te,we.children)}else!ze&&_e==null&&Z(te,Ee,Te,ke,Le);((Re=Te.onVnodeUpdated)||Ce)&&queuePostRenderEffect(()=>{Re&&invokeVNodeHook(Re,ke,we,ye),Ce&&invokeDirectiveHook(we,ye,ke,"updated")},Me)},Y=(ye,we,ke,Me,Le,Fe,ze)=>{for(let te=0;te<we.length;te++){const oe=ye[te],_e=we[te],Ce=oe.el&&(oe.type===Fragment||!isSameVNodeType(oe,_e)||oe.shapeFlag&70)?v(oe.el):ke;k(oe,_e,Ce,null,Me,Le,Fe,ze,!0)}},Z=(ye,we,ke,Me,Le)=>{if(we!==ke){if(we!==EMPTY_OBJ)for(const Fe in we)!isReservedProp(Fe)&&!(Fe in ke)&&u(ye,Fe,we[Fe],null,Le,Me);for(const Fe in ke){if(isReservedProp(Fe))continue;const ze=ke[Fe],te=we[Fe];ze!==te&&Fe!=="value"&&u(ye,Fe,te,ze,Le,Me)}"value"in ke&&u(ye,"value",we.value,ke.value,Le)}},j=(ye,we,ke,Me,Le,Fe,ze,te,oe)=>{const _e=we.el=ye?ye.el:f(""),Ce=we.anchor=ye?ye.anchor:f("");let{patchFlag:Ee,dynamicChildren:Te,slotScopeIds:Re}=we;Re&&(te=te?te.concat(Re):Re),ye==null?(o(_e,ke,Me),o(Ce,ke,Me),N(we.children||[],ke,Ce,Le,Fe,ze,te,oe)):Ee>0&&Ee&64&&Te&&ye.dynamicChildren?(Y(ye.dynamicChildren,Te,ke,Le,Fe,ze,te),(we.key!=null||Le&&we===Le.subTree)&&traverseStaticChildren(ye,we,!0)):W(ye,we,ke,Ce,Le,Fe,ze,te,oe)},ne=(ye,we,ke,Me,Le,Fe,ze,te,oe)=>{we.slotScopeIds=te,ye==null?we.shapeFlag&512?Le.ctx.activate(we,ke,Me,ze,oe):le(we,ke,Me,Le,Fe,ze,oe):J(ye,we,oe)},le=(ye,we,ke,Me,Le,Fe,ze)=>{const te=ye.component=createComponentInstance(ye,Me,Le);if(isKeepAlive(ye)&&(te.ctx.renderer=Ve),setupComponent(te,!1,ze),te.asyncDep){if(Le&&Le.registerDep(te,O,ze),!ye.el){const oe=te.subTree=createVNode(Comment);M(null,oe,we,ke)}}else O(te,ye,we,ke,Le,Fe,ze)},J=(ye,we,ke)=>{const Me=we.component=ye.component;if(shouldUpdateComponent(ye,we,ke))if(Me.asyncDep&&!Me.asyncResolved){U(Me,we,ke);return}else Me.next=we,Me.update();else we.el=ye.el,Me.vnode=we},O=(ye,we,ke,Me,Le,Fe,ze)=>{const te=()=>{if(ye.isMounted){let{next:Ee,bu:Te,u:Re,parent:Oe,vnode:je}=ye;{const Qe=locateNonHydratedAsyncRoot(ye);if(Qe){Ee&&(Ee.el=je.el,U(ye,Ee,ze)),Qe.asyncDep.then(()=>{ye.isUnmounted||te()});return}}let We=Ee,Ze;toggleRecurse(ye,!1),Ee?(Ee.el=je.el,U(ye,Ee,ze)):Ee=je,Te&&invokeArrayFns(Te),(Ze=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ze,Oe,Ee,je),toggleRecurse(ye,!0);const Xe=renderComponentRoot(ye),Ge=ye.subTree;ye.subTree=Xe,k(Ge,Xe,v(Ge.el),Ne(Ge),ye,Le,Fe),Ee.el=Xe.el,We===null&&updateHOCHostEl(ye,Xe.el),Re&&queuePostRenderEffect(Re,Le),(Ze=Ee.props&&Ee.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ze,Oe,Ee,je),Le)}else{let Ee;const{el:Te,props:Re}=we,{bm:Oe,m:je,parent:We,root:Ze,type:Xe}=ye,Ge=isAsyncWrapper(we);if(toggleRecurse(ye,!1),Oe&&invokeArrayFns(Oe),!Ge&&(Ee=Re&&Re.onVnodeBeforeMount)&&invokeVNodeHook(Ee,We,we),toggleRecurse(ye,!0),Te&&ve){const Qe=()=>{ye.subTree=renderComponentRoot(ye),ve(Te,ye.subTree,ye,Le,null)};Ge&&Xe.__asyncHydrate?Xe.__asyncHydrate(Te,ye,Qe):Qe()}else{Ze.ce&&Ze.ce._injectChildStyle(Xe);const Qe=ye.subTree=renderComponentRoot(ye);k(null,Qe,ke,Me,ye,Le,Fe),we.el=Qe.el}if(je&&queuePostRenderEffect(je,Le),!Ge&&(Ee=Re&&Re.onVnodeMounted)){const Qe=we;queuePostRenderEffect(()=>invokeVNodeHook(Ee,We,Qe),Le)}(we.shapeFlag&256||We&&isAsyncWrapper(We.vnode)&&We.vnode.shapeFlag&256)&&ye.a&&queuePostRenderEffect(ye.a,Le),ye.isMounted=!0,we=ke=Me=null}};ye.scope.on();const oe=ye.effect=new ReactiveEffect(te);ye.scope.off();const _e=ye.update=oe.run.bind(oe),Ce=ye.job=oe.runIfDirty.bind(oe);Ce.i=ye,Ce.id=ye.uid,oe.scheduler=()=>queueJob(Ce),toggleRecurse(ye,!0),_e()},U=(ye,we,ke)=>{we.component=ye;const Me=ye.vnode.props;ye.vnode=we,ye.next=null,updateProps(ye,we.props,Me,ke),updateSlots(ye,we.children,ke),pauseTracking(),flushPreFlushCbs(ye),resetTracking()},W=(ye,we,ke,Me,Le,Fe,ze,te,oe=!1)=>{const _e=ye&&ye.children,Ce=ye?ye.shapeFlag:0,Ee=we.children,{patchFlag:Te,shapeFlag:Re}=we;if(Te>0){if(Te&128){X(_e,Ee,ke,Me,Le,Fe,ze,te,oe);return}else if(Te&256){H(_e,Ee,ke,Me,Le,Fe,ze,te,oe);return}}Re&8?(Ce&16&&Ie(_e,Le,Fe),Ee!==_e&&y(ke,Ee)):Ce&16?Re&16?X(_e,Ee,ke,Me,Le,Fe,ze,te,oe):Ie(_e,Le,Fe,!0):(Ce&8&&y(ke,""),Re&16&&N(Ee,ke,Me,Le,Fe,ze,te,oe))},H=(ye,we,ke,Me,Le,Fe,ze,te,oe)=>{ye=ye||EMPTY_ARR,we=we||EMPTY_ARR;const _e=ye.length,Ce=we.length,Ee=Math.min(_e,Ce);let Te;for(Te=0;Te<Ee;Te++){const Re=we[Te]=oe?cloneIfMounted(we[Te]):normalizeVNode(we[Te]);k(ye[Te],Re,ke,null,Le,Fe,ze,te,oe)}_e>Ce?Ie(ye,Le,Fe,!0,!1,Ee):N(we,ke,Me,Le,Fe,ze,te,oe,Ee)},X=(ye,we,ke,Me,Le,Fe,ze,te,oe)=>{let _e=0;const Ce=we.length;let Ee=ye.length-1,Te=Ce-1;for(;_e<=Ee&&_e<=Te;){const Re=ye[_e],Oe=we[_e]=oe?cloneIfMounted(we[_e]):normalizeVNode(we[_e]);if(isSameVNodeType(Re,Oe))k(Re,Oe,ke,null,Le,Fe,ze,te,oe);else break;_e++}for(;_e<=Ee&&_e<=Te;){const Re=ye[Ee],Oe=we[Te]=oe?cloneIfMounted(we[Te]):normalizeVNode(we[Te]);if(isSameVNodeType(Re,Oe))k(Re,Oe,ke,null,Le,Fe,ze,te,oe);else break;Ee--,Te--}if(_e>Ee){if(_e<=Te){const Re=Te+1,Oe=Re<Ce?we[Re].el:Me;for(;_e<=Te;)k(null,we[_e]=oe?cloneIfMounted(we[_e]):normalizeVNode(we[_e]),ke,Oe,Le,Fe,ze,te,oe),_e++}}else if(_e>Te)for(;_e<=Ee;)fe(ye[_e],Le,Fe,!0),_e++;else{const Re=_e,Oe=_e,je=new Map;for(_e=Oe;_e<=Te;_e++){const qe=we[_e]=oe?cloneIfMounted(we[_e]):normalizeVNode(we[_e]);qe.key!=null&&je.set(qe.key,_e)}let We,Ze=0;const Xe=Te-Oe+1;let Ge=!1,Qe=0;const rt=new Array(Xe);for(_e=0;_e<Xe;_e++)rt[_e]=0;for(_e=Re;_e<=Ee;_e++){const qe=ye[_e];if(Ze>=Xe){fe(qe,Le,Fe,!0);continue}let He;if(qe.key!=null)He=je.get(qe.key);else for(We=Oe;We<=Te;We++)if(rt[We-Oe]===0&&isSameVNodeType(qe,we[We])){He=We;break}He===void 0?fe(qe,Le,Fe,!0):(rt[He-Oe]=_e+1,He>=Qe?Qe=He:Ge=!0,k(qe,we[He],ke,null,Le,Fe,ze,te,oe),Ze++)}const dt=Ge?getSequence(rt):EMPTY_ARR;for(We=dt.length-1,_e=Xe-1;_e>=0;_e--){const qe=Oe+_e,He=we[qe],Ke=qe+1<Ce?we[qe+1].el:Me;rt[_e]===0?k(null,He,ke,Ke,Le,Fe,ze,te,oe):Ge&&(We<0||_e!==dt[We]?Q(He,ke,Ke,2):We--)}}},Q=(ye,we,ke,Me,Le=null)=>{const{el:Fe,type:ze,transition:te,children:oe,shapeFlag:_e}=ye;if(_e&6){Q(ye.component.subTree,we,ke,Me);return}if(_e&128){ye.suspense.move(we,ke,Me);return}if(_e&64){ze.move(ye,we,ke,Ve);return}if(ze===Fragment){o(Fe,we,ke);for(let Ee=0;Ee<oe.length;Ee++)Q(oe[Ee],we,ke,Me);o(ye.anchor,we,ke);return}if(ze===Static){P(ye,we,ke);return}if(Me!==2&&_e&1&&te)if(Me===0)te.beforeEnter(Fe),o(Fe,we,ke),queuePostRenderEffect(()=>te.enter(Fe),Le);else{const{leave:Ee,delayLeave:Te,afterLeave:Re}=te,Oe=()=>o(Fe,we,ke),je=()=>{Ee(Fe,()=>{Oe(),Re&&Re()})};Te?Te(Fe,Oe,je):je()}else o(Fe,we,ke)},fe=(ye,we,ke,Me=!1,Le=!1)=>{const{type:Fe,props:ze,ref:te,children:oe,dynamicChildren:_e,shapeFlag:Ce,patchFlag:Ee,dirs:Te,cacheIndex:Re}=ye;if(Ee===-2&&(Le=!1),te!=null&&setRef(te,null,ke,ye,!0),Re!=null&&(we.renderCache[Re]=void 0),Ce&256){we.ctx.deactivate(ye);return}const Oe=Ce&1&&Te,je=!isAsyncWrapper(ye);let We;if(je&&(We=ze&&ze.onVnodeBeforeUnmount)&&invokeVNodeHook(We,we,ye),Ce&6)$e(ye.component,ke,Me);else{if(Ce&128){ye.suspense.unmount(ke,Me);return}Oe&&invokeDirectiveHook(ye,null,we,"beforeUnmount"),Ce&64?ye.type.remove(ye,we,ke,Ve,Me):_e&&!_e.hasOnce&&(Fe!==Fragment||Ee>0&&Ee&64)?Ie(_e,we,ke,!1,!0):(Fe===Fragment&&Ee&384||!Le&&Ce&16)&&Ie(oe,we,ke),Me&&Se(ye)}(je&&(We=ze&&ze.onVnodeUnmounted)||Oe)&&queuePostRenderEffect(()=>{We&&invokeVNodeHook(We,we,ye),Oe&&invokeDirectiveHook(ye,null,we,"unmounted")},ke)},Se=ye=>{const{type:we,el:ke,anchor:Me,transition:Le}=ye;if(we===Fragment){Pe(ke,Me);return}if(we===Static){T(ye);return}const Fe=()=>{s(ke),Le&&!Le.persisted&&Le.afterLeave&&Le.afterLeave()};if(ye.shapeFlag&1&&Le&&!Le.persisted){const{leave:ze,delayLeave:te}=Le,oe=()=>ze(ke,Fe);te?te(ye.el,Fe,oe):oe()}else Fe()},Pe=(ye,we)=>{let ke;for(;ye!==we;)ke=_(ye),s(ye),ye=ke;s(we)},$e=(ye,we,ke)=>{const{bum:Me,scope:Le,job:Fe,subTree:ze,um:te,m:oe,a:_e}=ye;invalidateMount(oe),invalidateMount(_e),Me&&invokeArrayFns(Me),Le.stop(),Fe&&(Fe.flags|=8,fe(ze,ye,we,ke)),te&&queuePostRenderEffect(te,we),queuePostRenderEffect(()=>{ye.isUnmounted=!0},we),we&&we.pendingBranch&&!we.isUnmounted&&ye.asyncDep&&!ye.asyncResolved&&ye.suspenseId===we.pendingId&&(we.deps--,we.deps===0&&we.resolve())},Ie=(ye,we,ke,Me=!1,Le=!1,Fe=0)=>{for(let ze=Fe;ze<ye.length;ze++)fe(ye[ze],we,ke,Me,Le)},Ne=ye=>{if(ye.shapeFlag&6)return Ne(ye.component.subTree);if(ye.shapeFlag&128)return ye.suspense.next();const we=_(ye.anchor||ye.el),ke=we&&we[TeleportEndKey];return ke?_(ke):we};let Be=!1;const be=(ye,we,ke)=>{ye==null?we._vnode&&fe(we._vnode,null,null,!0):k(we._vnode||null,ye,we,null,null,null,ke),we._vnode=ye,Be||(Be=!0,flushPreFlushCbs(),flushPostFlushCbs(),Be=!1)},Ve={p:k,um:fe,m:Q,r:Se,mt:le,mc:N,pc:W,pbc:Y,n:Ne,o:e};let De,ve;return n&&([De,ve]=n(Ve)),{render:be,hydrate:De,createApp:createAppAPI(be,De)}}function resolveChildrenNamespace({type:e,props:n},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function toggleRecurse({effect:e,job:n},r){r?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function needTransition(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function traverseStaticChildren(e,n,r=!1){const o=e.children,s=n.children;if(isArray$4(o)&&isArray$4(s))for(let u=0;u<o.length;u++){const d=o[u];let f=s[u];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=s[u]=cloneIfMounted(s[u]),f.el=d.el),!r&&f.patchFlag!==-2&&traverseStaticChildren(d,f)),f.type===Text$2&&(f.el=d.el)}}function getSequence(e){const n=e.slice(),r=[0];let o,s,u,d,f;const g=e.length;for(o=0;o<g;o++){const m=e[o];if(m!==0){if(s=r[r.length-1],e[s]<m){n[o]=s,r.push(o);continue}for(u=0,d=r.length-1;u<d;)f=u+d>>1,e[r[f]]<m?u=f+1:d=f;m<e[r[u]]&&(u>0&&(n[o]=r[u-1]),r[u]=o)}}for(u=r.length,d=r[u-1];u-- >0;)r[u]=d,d=n[d];return r}function locateNonHydratedAsyncRoot(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:locateNonHydratedAsyncRoot(n)}function invalidateMount(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const ssrContextKey$1=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey$1);function watchEffect(e,n){return doWatch(e,null,n)}function watch(e,n,r){return doWatch(e,n,r)}function doWatch(e,n,r=EMPTY_OBJ){const{immediate:o,deep:s,flush:u,once:d}=r,f=extend$2({},r),g=n&&o||!n&&u!=="post";let m;if(isInSSRComponentSetup){if(u==="sync"){const w=useSSRContext();m=w.__watcherHandles||(w.__watcherHandles=[])}else if(!g){const w=()=>{};return w.stop=NOOP,w.resume=NOOP,w.pause=NOOP,w}}const y=currentInstance;f.call=(w,x,k)=>callWithAsyncErrorHandling(w,y,x,k);let v=!1;u==="post"?f.scheduler=w=>{queuePostRenderEffect(w,y&&y.suspense)}:u!=="sync"&&(v=!0,f.scheduler=(w,x)=>{x?w():queueJob(w)}),f.augmentJob=w=>{n&&(w.flags|=4),v&&(w.flags|=2,y&&(w.id=y.uid,w.i=y))};const _=watch$1(e,n,f);return isInSSRComponentSetup&&(m?m.push(_):g&&_()),_}function instanceWatch(e,n,r){const o=this.proxy,s=isString$4(e)?e.includes(".")?createPathGetter(o,e):()=>o[e]:e.bind(o,o);let u;isFunction$3(n)?u=n:(u=n.handler,r=n);const d=setCurrentInstance(this),f=doWatch(s,u.bind(o),r);return d(),f}function createPathGetter(e,n){const r=n.split(".");return()=>{let o=e;for(let s=0;s<r.length&&o;s++)o=o[r[s]];return o}}const getModelModifiers=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${camelize(n)}Modifiers`]||e[`${hyphenate(n)}Modifiers`];function emit(e,n,...r){if(e.isUnmounted)return;const o=e.vnode.props||EMPTY_OBJ;let s=r;const u=n.startsWith("update:"),d=u&&getModelModifiers(o,n.slice(7));d&&(d.trim&&(s=r.map(y=>isString$4(y)?y.trim():y)),d.number&&(s=r.map(looseToNumber)));let f,g=o[f=toHandlerKey(n)]||o[f=toHandlerKey(camelize(n))];!g&&u&&(g=o[f=toHandlerKey(hyphenate(n))]),g&&callWithAsyncErrorHandling(g,e,6,s);const m=o[f+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,callWithAsyncErrorHandling(m,e,6,s)}}function normalizeEmitsOptions(e,n,r=!1){const o=n.emitsCache,s=o.get(e);if(s!==void 0)return s;const u=e.emits;let d={},f=!1;if(!isFunction$3(e)){const g=m=>{const y=normalizeEmitsOptions(m,n,!0);y&&(f=!0,extend$2(d,y))};!r&&n.mixins.length&&n.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}return!u&&!f?(isObject$5(e)&&o.set(e,null),null):(isArray$4(u)?u.forEach(g=>d[g]=null):extend$2(d,u),isObject$5(e)&&o.set(e,d),d)}function isEmitListener(e,n){return!e||!isOn(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$1(e,n[0].toLowerCase()+n.slice(1))||hasOwn$1(e,hyphenate(n))||hasOwn$1(e,n))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:n,vnode:r,proxy:o,withProxy:s,propsOptions:[u],slots:d,attrs:f,emit:g,render:m,renderCache:y,props:v,data:_,setupState:w,ctx:x,inheritAttrs:k}=e,S=setCurrentRenderingInstance(e);let M,E;try{if(r.shapeFlag&4){const T=s||o,D=T;M=normalizeVNode(m.call(D,T,y,v,w,_,x)),E=f}else{const T=n;M=normalizeVNode(T.length>1?T(v,{attrs:f,slots:d,emit:g}):T(v,null)),E=n.props?f:getFunctionalFallthrough(f)}}catch(T){blockStack.length=0,handleError(T,e,1),M=createVNode(Comment)}let P=M;if(E&&k!==!1){const T=Object.keys(E),{shapeFlag:D}=P;T.length&&D&7&&(u&&T.some(isModelListener)&&(E=filterModelListeners(E,u)),P=cloneVNode(P,E,!1,!0))}return r.dirs&&(P=cloneVNode(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(r.dirs):r.dirs),r.transition&&setTransitionHooks(P,r.transition),M=P,setCurrentRenderingInstance(S),M}const getFunctionalFallthrough=e=>{let n;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((n||(n={}))[r]=e[r]);return n},filterModelListeners=(e,n)=>{const r={};for(const o in e)(!isModelListener(o)||!(o.slice(9)in n))&&(r[o]=e[o]);return r};function shouldUpdateComponent(e,n,r){const{props:o,children:s,component:u}=e,{props:d,children:f,patchFlag:g}=n,m=u.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&g>=0){if(g&1024)return!0;if(g&16)return o?hasPropsChanged(o,d,m):!!d;if(g&8){const y=n.dynamicProps;for(let v=0;v<y.length;v++){const _=y[v];if(d[_]!==o[_]&&!isEmitListener(m,_))return!0}}}else return(s||f)&&(!f||!f.$stable)?!0:o===d?!1:o?d?hasPropsChanged(o,d,m):!0:!!d;return!1}function hasPropsChanged(e,n,r){const o=Object.keys(n);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const u=o[s];if(n[u]!==e[u]&&!isEmitListener(r,u))return!0}return!1}function updateHOCHostEl({vnode:e,parent:n},r){for(;n;){const o=n.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=n.vnode).el=r,n=n.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,n){n&&n.pendingBranch?isArray$4(e)?n.effects.push(...e):n.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text$2=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e,e<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,n,r,o,s,u){return setupBlock(createBaseVNode(e,n,r,o,s,u,!0))}function createBlock(e,n,r,o,s){return setupBlock(createVNode(e,n,r,o,s,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,n){return e.type===n.type&&e.key===n.key}const normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:n,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?isString$4(e)||isRef(e)||isFunction$3(e)?{i:currentRenderingInstance,r:e,k:n,f:!!r}:e:null);function createBaseVNode(e,n=null,r=null,o=0,s=null,u=e===Fragment?0:1,d=!1,f=!1){const g={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return f?(normalizeChildren(g,r),u&128&&e.normalize(g)):r&&(g.shapeFlag|=isString$4(r)?8:16),isBlockTreeEnabled>0&&!d&&currentBlock&&(g.patchFlag>0||u&6)&&g.patchFlag!==32&&currentBlock.push(g),g}const createVNode=_createVNode;function _createVNode(e,n=null,r=null,o=0,s=null,u=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode$1(e)){const f=cloneVNode(e,n,!0);return r&&normalizeChildren(f,r),isBlockTreeEnabled>0&&!u&&currentBlock&&(f.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=f:currentBlock.push(f)),f.patchFlag=-2,f}if(isClassComponent(e)&&(e=e.__vccOpts),n){n=guardReactiveProps(n);let{class:f,style:g}=n;f&&!isString$4(f)&&(n.class=normalizeClass(f)),isObject$5(g)&&(isProxy(g)&&!isArray$4(g)&&(g=extend$2({},g)),n.style=normalizeStyle(g))}const d=isString$4(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$5(e)?4:isFunction$3(e)?2:0;return createBaseVNode(e,n,r,o,s,d,u,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend$2({},e):e:null}function cloneVNode(e,n,r=!1,o=!1){const{props:s,ref:u,patchFlag:d,children:f,transition:g}=e,m=n?mergeProps(s||{},n):s,y={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&normalizeKey(m),ref:n&&n.ref?r&&u?isArray$4(u)?u.concat(normalizeRef(n)):[u,normalizeRef(n)]:normalizeRef(n):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Fragment?d===-1?16:d|16:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:g,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return g&&o&&setTransitionHooks(y,g.clone(y)),y}function createTextVNode(e=" ",n=0){return createVNode(Text$2,null,e,n)}function createStaticVNode(e,n){const r=createVNode(Static,null,e);return r.staticCount=n,r}function createCommentVNode(e="",n=!1){return n?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$4(e)?createVNode(Fragment,null,e.slice()):isVNode$1(e)?cloneIfMounted(e):createVNode(Text$2,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,n){let r=0;const{shapeFlag:o}=e;if(n==null)n=null;else if(isArray$4(n))r=16;else if(typeof n=="object")if(o&65){const s=n.default;s&&(s._c&&(s._d=!1),normalizeChildren(e,s()),s._c&&(s._d=!0));return}else{r=32;const s=n._;!s&&!isInternalObject(n)?n._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else isFunction$3(n)?(n={default:n,_ctx:currentRenderingInstance},r=32):(n=String(n),o&64?(r=16,n=[createTextVNode(n)]):r=8);e.children=n,e.shapeFlag|=r}function mergeProps(...e){const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const s in o)if(s==="class")n.class!==o.class&&(n.class=normalizeClass([n.class,o.class]));else if(s==="style")n.style=normalizeStyle([n.style,o.style]);else if(isOn(s)){const u=n[s],d=o[s];d&&u!==d&&!(isArray$4(u)&&u.includes(d))&&(n[s]=u?[].concat(u,d):d)}else s!==""&&(n[s]=o[s])}return n}function invokeVNodeHook(e,n,r,o=null){callWithAsyncErrorHandling(e,n,7,[r,o])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,n,r){const o=e.type,s=(n?n.appContext:e.appContext)||emptyAppContext,u={uid:uid++,vnode:e,type:o,parent:n,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(s.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,s),emitsOptions:normalizeEmitsOptions(o,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=n?n.root:u,u.emit=emit.bind(null,u),e.ce&&e.ce(u),u}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis$1(),n=(r,o)=>{let s;return(s=e[r])||(s=e[r]=[]),s.push(o),u=>{s.length>1?s.forEach(d=>d(u)):s[0](u)}};internalSetCurrentInstance=n("__VUE_INSTANCE_SETTERS__",r=>currentInstance=r),setInSSRSetupState=n("__VUE_SSR_SETTERS__",r=>isInSSRComponentSetup=r)}const setCurrentInstance=e=>{const n=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(n)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,n=!1,r=!1){n&&setInSSRSetupState(n);const{props:o,children:s}=e.vnode,u=isStatefulComponent(e);initProps(e,o,u,n),initSlots(e,s,r);const d=u?setupStatefulComponent(e,n):void 0;return n&&setInSSRSetupState(!1),d}function setupStatefulComponent(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:o}=r;if(o){pauseTracking();const s=e.setupContext=o.length>1?createSetupContext(e):null,u=setCurrentInstance(e),d=callWithErrorHandling(o,e,0,[e.props,s]),f=isPromise$1(d);if(resetTracking(),u(),(f||e.sp)&&!isAsyncWrapper(e)&&markAsyncBoundary(e),f){if(d.then(unsetCurrentInstance,unsetCurrentInstance),n)return d.then(g=>{handleSetupResult(e,g,n)}).catch(g=>{handleError(g,e,0)});e.asyncDep=d}else handleSetupResult(e,d,n)}else finishComponentSetup(e,n)}function handleSetupResult(e,n,r){isFunction$3(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:isObject$5(n)&&(e.setupState=proxyRefs(n)),finishComponentSetup(e,r)}let compile$1;function finishComponentSetup(e,n,r){const o=e.type;if(!e.render){if(!n&&compile$1&&!o.render){const s=o.template||resolveMergedOptions(e).template;if(s){const{isCustomElement:u,compilerOptions:d}=e.appContext.config,{delimiters:f,compilerOptions:g}=o,m=extend$2(extend$2({isCustomElement:u,delimiters:f},d),g);o.render=compile$1(s,m)}}e.render=o.render||NOOP}{const s=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),s()}}}const attrsProxyHandlers={get(e,n){return track(e,"get",""),e[n]}};function createSetupContext(e){const n=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:n}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(n,r){return r in n||r in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,n=>n.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,n=!0){return isFunction$3(e)?e.displayName||e.name:e.name||n&&e.__name}function formatComponentName(e,n,r=!1){let o=getComponentName(n);if(!o&&n.__file){const s=n.__file.match(/([^/\\]+)\.\w+$/);s&&(o=s[1])}if(!o&&e&&e.parent){const s=u=>{for(const d in u)if(u[d]===n)return d};o=s(e.components||e.parent.type.components)||s(e.appContext.components)}return o?classify(o):r?"App":"Anonymous"}function isClassComponent(e){return isFunction$3(e)&&"__vccOpts"in e}const computed=(e,n)=>computed$1(e,n,isInSSRComponentSetup);function h$1(e,n,r){const o=arguments.length;return o===2?isObject$5(n)&&!isArray$4(n)?isVNode$1(n)?createVNode(e,null,[n]):createVNode(e,n):createVNode(e,null,n):(o>3?r=Array.prototype.slice.call(arguments,2):o===3&&isVNode$1(r)&&(r=[r]),createVNode(e,n,r))}const version$2="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch{}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,o)=>{const s=n==="svg"?doc.createElementNS(svgNS,e):n==="mathml"?doc.createElementNS(mathmlNS,e):r?doc.createElement(e,{is:r}):doc.createElement(e);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,o,s,u){const d=r?r.previousSibling:n.lastChild;if(s&&(s===u||s.nextSibling))for(;n.insertBefore(s.cloneNode(!0),r),!(s===u||!(s=s.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const f=templateContainer.content;if(o==="svg"||o==="mathml"){const g=f.firstChild;for(;g.firstChild;)f.appendChild(g.firstChild);f.removeChild(g)}n.insertBefore(f,r)}return[d?d.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=e=>(e.displayName="Transition",e.props=TransitionPropsValidators,e),Transition=decorate$1((e,{slots:n})=>h$1(BaseTransition,resolveTransitionProps(e),n)),callHook=(e,n=[])=>{isArray$4(e)?e.forEach(r=>r(...n)):e&&e(...n)},hasExplicitCallback=e=>e?isArray$4(e)?e.some(n=>n.length>1):e.length>1:!1;function resolveTransitionProps(e){const n={};for(const j in e)j in DOMTransitionPropsValidators||(n[j]=e[j]);if(e.css===!1)return n;const{name:r="v",type:o,duration:s,enterFromClass:u=`${r}-enter-from`,enterActiveClass:d=`${r}-enter-active`,enterToClass:f=`${r}-enter-to`,appearFromClass:g=u,appearActiveClass:m=d,appearToClass:y=f,leaveFromClass:v=`${r}-leave-from`,leaveActiveClass:_=`${r}-leave-active`,leaveToClass:w=`${r}-leave-to`}=e,x=normalizeDuration(s),k=x&&x[0],S=x&&x[1],{onBeforeEnter:M,onEnter:E,onEnterCancelled:P,onLeave:T,onLeaveCancelled:D,onBeforeAppear:F=M,onAppear:I=E,onAppearCancelled:N=P}=n,q=(j,ne,le)=>{removeTransitionClass(j,ne?y:f),removeTransitionClass(j,ne?m:d),le&&le()},Y=(j,ne)=>{j._isLeaving=!1,removeTransitionClass(j,v),removeTransitionClass(j,w),removeTransitionClass(j,_),ne&&ne()},Z=j=>(ne,le)=>{const J=j?I:E,O=()=>q(ne,j,le);callHook(J,[ne,O]),nextFrame(()=>{removeTransitionClass(ne,j?g:u),addTransitionClass(ne,j?y:f),hasExplicitCallback(J)||whenTransitionEnds(ne,o,k,O)})};return extend$2(n,{onBeforeEnter(j){callHook(M,[j]),addTransitionClass(j,u),addTransitionClass(j,d)},onBeforeAppear(j){callHook(F,[j]),addTransitionClass(j,g),addTransitionClass(j,m)},onEnter:Z(!1),onAppear:Z(!0),onLeave(j,ne){j._isLeaving=!0;const le=()=>Y(j,ne);addTransitionClass(j,v),addTransitionClass(j,_),forceReflow(),nextFrame(()=>{!j._isLeaving||(removeTransitionClass(j,v),addTransitionClass(j,w),hasExplicitCallback(T)||whenTransitionEnds(j,o,S,le))}),callHook(T,[j,le])},onEnterCancelled(j){q(j,!1),callHook(P,[j])},onAppearCancelled(j){q(j,!0),callHook(N,[j])},onLeaveCancelled(j){Y(j),callHook(D,[j])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$5(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const n=NumberOf(e);return[n,n]}}function NumberOf(e){return toNumber$1(e)}function addTransitionClass(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[vtcKey]||(e[vtcKey]=new Set)).add(n)}function removeTransitionClass(e,n){n.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const r=e[vtcKey];r&&(r.delete(n),r.size||(e[vtcKey]=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,n,r,o){const s=e._endId=++endId,u=()=>{s===e._endId&&o()};if(r!=null)return setTimeout(u,r);const{type:d,timeout:f,propCount:g}=getTransitionInfo(e,n);if(!d)return o();const m=d+"end";let y=0;const v=()=>{e.removeEventListener(m,_),u()},_=w=>{w.target===e&&++y>=g&&v()};setTimeout(()=>{y<g&&v()},f+1),e.addEventListener(m,_)}function getTransitionInfo(e,n){const r=window.getComputedStyle(e),o=x=>(r[x]||"").split(", "),s=o(`${TRANSITION}Delay`),u=o(`${TRANSITION}Duration`),d=getTimeout(s,u),f=o(`${ANIMATION}Delay`),g=o(`${ANIMATION}Duration`),m=getTimeout(f,g);let y=null,v=0,_=0;n===TRANSITION?d>0&&(y=TRANSITION,v=d,_=u.length):n===ANIMATION?m>0&&(y=ANIMATION,v=m,_=g.length):(v=Math.max(d,m),y=v>0?d>m?TRANSITION:ANIMATION:null,_=y?y===TRANSITION?u.length:g.length:0);const w=y===TRANSITION&&/\b(transform|all)(,|$)/.test(o(`${TRANSITION}Property`).toString());return{type:y,timeout:v,propCount:_,hasTransform:w}}function getTimeout(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,o)=>toMs(r)+toMs(e[o])))}function toMs(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(e,n,r){const o=e[vtcKey];o&&(n=(n?[n,...o]:[...o]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(e,{value:n},{transition:r}){e[vShowOriginalDisplay]=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):setDisplay(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:o}){!n!=!r&&(o?n?(o.beforeEnter(e),setDisplay(e,!0),o.enter(e)):o.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,n))},beforeUnmount(e,{value:n}){setDisplay(e,n)}};function setDisplay(e,n){e.style.display=n?e[vShowOriginalDisplay]:"none",e[vShowHidden]=!n}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,n,r){const o=e.style,s=isString$4(r);let u=!1;if(r&&!s){if(n)if(isString$4(n))for(const d of n.split(";")){const f=d.slice(0,d.indexOf(":")).trim();r[f]==null&&setStyle(o,f,"")}else for(const d in n)r[d]==null&&setStyle(o,d,"");for(const d in r)d==="display"&&(u=!0),setStyle(o,d,r[d])}else if(s){if(n!==r){const d=o[CSS_VAR_TEXT];d&&(r+=";"+d),o.cssText=r,u=displayRE.test(r)}}else n&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=u?o.display:"",e[vShowHidden]&&(o.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,n,r){if(isArray$4(r))r.forEach(o=>setStyle(e,n,o));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const o=autoPrefix(e,n);importantRE.test(r)?e.setProperty(hyphenate(o),r.replace(importantRE,""),"important"):e[o]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,n){const r=prefixCache[n];if(r)return r;let o=camelize(n);if(o!=="filter"&&o in e)return prefixCache[n]=o;o=capitalize$1(o);for(let s=0;s<prefixes.length;s++){const u=prefixes[s]+o;if(u in e)return prefixCache[n]=u}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,n,r,o,s,u=isSpecialBooleanAttr(n)){o&&n.startsWith("xlink:")?r==null?e.removeAttributeNS(xlinkNS,n.slice(6,n.length)):e.setAttributeNS(xlinkNS,n,r):r==null||u&&!includeBooleanAttr(r)?e.removeAttribute(n):e.setAttribute(n,u?"":isSymbol$2(r)?String(r):r)}function patchDOMProp(e,n,r,o,s){if(n==="innerHTML"||n==="textContent"){r!=null&&(e[n]=n==="innerHTML"?unsafeToTrustedHTML(r):r);return}const u=e.tagName;if(n==="value"&&u!=="PROGRESS"&&!u.includes("-")){const f=u==="OPTION"?e.getAttribute("value")||"":e.value,g=r==null?e.type==="checkbox"?"on":"":String(r);(f!==g||!("_value"in e))&&(e.value=g),r==null&&e.removeAttribute(n),e._value=r;return}let d=!1;if(r===""||r==null){const f=typeof e[n];f==="boolean"?r=includeBooleanAttr(r):r==null&&f==="string"?(r="",d=!0):f==="number"&&(r=0,d=!0)}try{e[n]=r}catch{}d&&e.removeAttribute(s||n)}function addEventListener(e,n,r,o){e.addEventListener(n,r,o)}function removeEventListener(e,n,r,o){e.removeEventListener(n,r,o)}const veiKey=Symbol("_vei");function patchEvent(e,n,r,o,s=null){const u=e[veiKey]||(e[veiKey]={}),d=u[n];if(o&&d)d.value=o;else{const[f,g]=parseName(n);if(o){const m=u[n]=createInvoker(o,s);addEventListener(e,f,m,g)}else d&&(removeEventListener(e,f,d,g),u[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let n;if(optionsModifierRE.test(e)){n={};let o;for(;o=e.match(optionsModifierRE);)e=e.slice(0,e.length-o[0].length),n[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),n]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,n){const r=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(o,r.value),n,5,[o])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,n){if(isArray$4(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(o=>s=>!s._stopped&&o&&o(s))}else return n}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,n,r,o,s,u)=>{const d=s==="svg";n==="class"?patchClass(e,o,d):n==="style"?patchStyle(e,r,o):isOn(n)?isModelListener(n)||patchEvent(e,n,r,o,u):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(e,n,o,d))?(patchDOMProp(e,n,o),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&patchAttr(e,n,o,d,u,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!isString$4(o))?patchDOMProp(e,camelize(n),o,u,n):(n==="true-value"?e._trueValue=o:n==="false-value"&&(e._falseValue=o),patchAttr(e,n,o,d))};function shouldSetAsProp(e,n,r,o){if(o)return!!(n==="innerHTML"||n==="textContent"||n in e&&isNativeOn(n)&&isFunction$3(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(n)&&isString$4(r)?!1:n in e}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=e=>(delete e.props.mode,e),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$2({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=getCurrentInstance(),o=useTransitionState();let s,u;return onUpdated(()=>{if(!s.length)return;const d=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(s[0].el,r.vnode.el,d))return;s.forEach(callPendingCbs),s.forEach(recordPosition);const f=s.filter(applyTranslation);forceReflow(),f.forEach(g=>{const m=g.el,y=m.style;addTransitionClass(m,d),y.transform=y.webkitTransform=y.transitionDuration="";const v=m[moveCbKey]=_=>{_&&_.target!==m||(!_||/transform$/.test(_.propertyName))&&(m.removeEventListener("transitionend",v),m[moveCbKey]=null,removeTransitionClass(m,d))};m.addEventListener("transitionend",v)})}),()=>{const d=toRaw(e),f=resolveTransitionProps(d);let g=d.tag||Fragment;if(s=[],u)for(let m=0;m<u.length;m++){const y=u[m];y.el&&y.el instanceof Element&&(s.push(y),setTransitionHooks(y,resolveTransitionHooks(y,f,o,r)),positionMap.set(y,y.el.getBoundingClientRect()))}u=n.default?getTransitionRawChildren(n.default()):[];for(let m=0;m<u.length;m++){const y=u[m];y.key!=null&&setTransitionHooks(y,resolveTransitionHooks(y,f,o,r))}return createVNode(g,null,u)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const n=e.el;n[moveCbKey]&&n[moveCbKey](),n[enterCbKey]&&n[enterCbKey]()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const n=positionMap.get(e),r=newPositionMap.get(e),o=n.left-r.left,s=n.top-r.top;if(o||s){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${o}px,${s}px)`,u.transitionDuration="0s",e}}function hasCSSTransform(e,n,r){const o=e.cloneNode(),s=e[vtcKey];s&&s.forEach(f=>{f.split(/\s+/).forEach(g=>g&&o.classList.remove(g))}),r.split(/\s+/).forEach(f=>f&&o.classList.add(f)),o.style.display="none";const u=n.nodeType===1?n:n.parentNode;u.appendChild(o);const{hasTransform:d}=getTransitionInfo(o);return u.removeChild(o),d}const getModelAssigner=e=>{const n=e.props["onUpdate:modelValue"]||!1;return isArray$4(n)?r=>invokeArrayFns(n,r):n};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:n,trim:r,number:o}},s){e[assignKey]=getModelAssigner(s);const u=o||s.props&&s.props.type==="number";addEventListener(e,n?"change":"input",d=>{if(d.target.composing)return;let f=e.value;r&&(f=f.trim()),u&&(f=looseToNumber(f)),e[assignKey](f)}),r&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),n||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:n}){e.value=n==null?"":n},beforeUpdate(e,{value:n,oldValue:r,modifiers:{lazy:o,trim:s,number:u}},d){if(e[assignKey]=getModelAssigner(d),e.composing)return;const f=(u||e.type==="number")&&!/^0\d/.test(e.value)?looseToNumber(e.value):e.value,g=n==null?"":n;f!==g&&(document.activeElement===e&&e.type!=="range"&&(o&&n===r||s&&e.value.trim()===g)||(e.value=g))}},vModelCheckbox={deep:!0,created(e,n,r){e[assignKey]=getModelAssigner(r),addEventListener(e,"change",()=>{const o=e._modelValue,s=getValue$1(e),u=e.checked,d=e[assignKey];if(isArray$4(o)){const f=looseIndexOf(o,s),g=f!==-1;if(u&&!g)d(o.concat(s));else if(!u&&g){const m=[...o];m.splice(f,1),d(m)}}else if(isSet(o)){const f=new Set(o);u?f.add(s):f.delete(s),d(f)}else d(getCheckboxValue(e,u))})},mounted:setChecked,beforeUpdate(e,n,r){e[assignKey]=getModelAssigner(r),setChecked(e,n,r)}};function setChecked(e,{value:n,oldValue:r},o){e._modelValue=n;let s;if(isArray$4(n))s=looseIndexOf(n,o.props.value)>-1;else if(isSet(n))s=n.has(o.props.value);else{if(n===r)return;s=looseEqual(n,getCheckboxValue(e,!0))}e.checked!==s&&(e.checked=s)}const vModelRadio={created(e,{value:n},r){e.checked=looseEqual(n,r.props.value),e[assignKey]=getModelAssigner(r),addEventListener(e,"change",()=>{e[assignKey](getValue$1(e))})},beforeUpdate(e,{value:n,oldValue:r},o){e[assignKey]=getModelAssigner(o),n!==r&&(e.checked=looseEqual(n,o.props.value))}},vModelSelect={deep:!0,created(e,{value:n,modifiers:{number:r}},o){const s=isSet(n);addEventListener(e,"change",()=>{const u=Array.prototype.filter.call(e.options,d=>d.selected).map(d=>r?looseToNumber(getValue$1(d)):getValue$1(d));e[assignKey](e.multiple?s?new Set(u):u:u[0]),e._assigning=!0,nextTick(()=>{e._assigning=!1})}),e[assignKey]=getModelAssigner(o)},mounted(e,{value:n}){setSelected(e,n)},beforeUpdate(e,n,r){e[assignKey]=getModelAssigner(r)},updated(e,{value:n}){e._assigning||setSelected(e,n)}};function setSelected(e,n){const r=e.multiple,o=isArray$4(n);if(!(r&&!o&&!isSet(n))){for(let s=0,u=e.options.length;s<u;s++){const d=e.options[s],f=getValue$1(d);if(r)if(o){const g=typeof f;g==="string"||g==="number"?d.selected=n.some(m=>String(m)===String(f)):d.selected=looseIndexOf(n,f)>-1}else d.selected=n.has(f);else if(looseEqual(getValue$1(d),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function getValue$1(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,n){const r=n?"_trueValue":"_falseValue";return r in e?e[r]:n}const vModelDynamic={created(e,n,r){callModelHook(e,n,r,null,"created")},mounted(e,n,r){callModelHook(e,n,r,null,"mounted")},beforeUpdate(e,n,r,o){callModelHook(e,n,r,o,"beforeUpdate")},updated(e,n,r,o){callModelHook(e,n,r,o,"updated")}};function resolveDynamicModel(e,n){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(n){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,n,r,o,s){const d=resolveDynamicModel(e.tagName,r.props&&r.props.type)[s];d&&d(e,n,r,o)}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>systemModifiers.some(r=>e[`${r}Key`]&&!n.includes(r))},withModifiers=(e,n)=>{const r=e._withMods||(e._withMods={}),o=n.join(".");return r[o]||(r[o]=(s,...u)=>{for(let d=0;d<n.length;d++){const f=modifierGuards[n[d]];if(f&&f(s,n))return}return e(s,...u)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,n)=>{const r=e._withKeys||(e._withKeys={}),o=n.join(".");return r[o]||(r[o]=s=>{if(!("key"in s))return;const u=hyphenate(s.key);if(n.some(d=>d===u||keyNames[d]===u))return e(s)})},rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const n=ensureRenderer().createApp(...e),{mount:r}=n;return n.mount=o=>{const s=normalizeContainer(o);if(!s)return;const u=n._component;!isFunction$3(u)&&!u.render&&!u.template&&(u.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const d=r(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),d},n};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString$4(e)?document.querySelector(e):e}/*!
  * shared v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser$1=typeof window<"u",makeSymbol=(e,n=!1)=>n?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,n,r)=>friendlyJSONstringify({l:e,k:n,s:r}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$1=e=>typeof e=="number"&&isFinite(e),isDate$1=e=>toTypeString(e)==="[object Date]",isRegExp=e=>toTypeString(e)==="[object RegExp]",isEmptyObject=e=>isPlainObject$3(e)&&Object.keys(e).length===0,assign$2=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$c=Object.prototype.hasOwnProperty;function hasOwn(e,n){return hasOwnProperty$c.call(e,n)}const isArray$3=Array.isArray,isFunction$2=e=>typeof e=="function",isString$3=e=>typeof e=="string",isBoolean=e=>typeof e=="boolean",isObject$4=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$4(e)&&isFunction$2(e.then)&&isFunction$2(e.catch),objectToString$2=Object.prototype.toString,toTypeString=e=>objectToString$2.call(e),isPlainObject$3=e=>{if(!isObject$4(e))return!1;const n=Object.getPrototypeOf(e);return n===null||n.constructor===Object},toDisplayString=e=>e==null?"":isArray$3(e)||isPlainObject$3(e)&&e.toString===objectToString$2?JSON.stringify(e,null,2):String(e);function join$1(e,n=""){return e.reduce((r,o,s)=>s===0?r+o:r+n+o,"")}function incrementer(e){let n=e;return()=>++n}function warn$3(e,n){typeof console<"u"&&(console.warn("[intlify] "+e),n&&console.warn(n.stack))}const isNotObjectOrIsArray=e=>!isObject$4(e)||isArray$3(e);function deepCopy(e,n){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(n))throw new Error("Invalid value");const r=[{src:e,des:n}];for(;r.length;){const{src:o,des:s}=r.pop();Object.keys(o).forEach(u=>{isObject$4(o[u])&&!isObject$4(s[u])&&(s[u]=Array.isArray(o[u])?[]:{}),isNotObjectOrIsArray(s[u])||isNotObjectOrIsArray(o[u])?s[u]=o[u]:r.push({src:o[u],des:s[u]})})}}/*!
  * message-compiler v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(e,n,r){return{line:e,column:n,offset:r}}function createLocation(e,n,r){const o={start:e,end:n};return r!=null&&(o.source=r),o}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$4(e,...n){return n.length===1&&isObject$3(n[0])&&(n=n[0]),(!n||!n.hasOwnProperty)&&(n={}),e.replace(RE_ARGS,(r,o)=>n.hasOwnProperty(o)?n[o]:"")}const assign$1=Object.assign,isString$2=e=>typeof e=="string",isObject$3=e=>e!==null&&typeof e=="object";function join(e,n=""){return e.reduce((r,o,s)=>s===0?r+o:r+n+o,"")}const CompileWarnCodes={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},warnMessages={[CompileWarnCodes.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function createCompileWarn(e,n,...r){const o=format$4(warnMessages[e]||"",...r||[]),s={message:String(o),code:e};return n&&(s.location=n),s}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(e,n,r={}){const{domain:o,messages:s,args:u}=r,d=format$4((s||errorMessages)[e]||"",...u||[]),f=new SyntaxError(String(d));return f.code=e,n&&(f.location=n),f.domain=o,f}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(e){const n=e;let r=0,o=1,s=1,u=0;const d=I=>n[I]===CHAR_CR&&n[I+1]===CHAR_LF,f=I=>n[I]===CHAR_LF,g=I=>n[I]===CHAR_PS,m=I=>n[I]===CHAR_LS,y=I=>d(I)||f(I)||g(I)||m(I),v=()=>r,_=()=>o,w=()=>s,x=()=>u,k=I=>d(I)||g(I)||m(I)?CHAR_LF:n[I],S=()=>k(r),M=()=>k(r+u);function E(){return u=0,y(r)&&(o++,s=0),d(r)&&r++,r++,s++,n[r]}function P(){return d(r+u)&&u++,u++,n[r+u]}function T(){r=0,o=1,s=1,u=0}function D(I=0){u=I}function F(){const I=r+u;for(;I!==r;)E();u=0}return{index:v,line:_,column:w,peekOffset:x,charAt:k,currentChar:S,currentPeek:M,next:E,peek:P,reset:T,resetPeek:D,skipToPeek:F}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,n={}){const r=n.location!==!1,o=createScanner(e),s=()=>o.index(),u=()=>createPosition(o.line(),o.column(),o.index()),d=u(),f=s(),g={currentType:14,offset:f,startLoc:d,endLoc:d,lastType:14,lastOffset:f,lastStartLoc:d,lastEndLoc:d,braceNest:0,inLinked:!1,text:""},m=()=>g,{onError:y}=n;function v(te,oe,_e,...Ce){const Ee=m();if(oe.column+=_e,oe.offset+=_e,y){const Te=r?createLocation(Ee.startLoc,oe):null,Re=createCompileError(te,Te,{domain:ERROR_DOMAIN$3,args:Ce});y(Re)}}function _(te,oe,_e){te.endLoc=u(),te.currentType=oe;const Ce={type:oe};return r&&(Ce.loc=createLocation(te.startLoc,te.endLoc)),_e!=null&&(Ce.value=_e),Ce}const w=te=>_(te,14);function x(te,oe){return te.currentChar()===oe?(te.next(),oe):(v(CompileErrorCodes.EXPECTED_TOKEN,u(),0,oe),"")}function k(te){let oe="";for(;te.currentPeek()===CHAR_SP||te.currentPeek()===CHAR_LF;)oe+=te.currentPeek(),te.peek();return oe}function S(te){const oe=k(te);return te.skipToPeek(),oe}function M(te){if(te===EOF)return!1;const oe=te.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe===95}function E(te){if(te===EOF)return!1;const oe=te.charCodeAt(0);return oe>=48&&oe<=57}function P(te,oe){const{currentType:_e}=oe;if(_e!==2)return!1;k(te);const Ce=M(te.currentPeek());return te.resetPeek(),Ce}function T(te,oe){const{currentType:_e}=oe;if(_e!==2)return!1;k(te);const Ce=te.currentPeek()==="-"?te.peek():te.currentPeek(),Ee=E(Ce);return te.resetPeek(),Ee}function D(te,oe){const{currentType:_e}=oe;if(_e!==2)return!1;k(te);const Ce=te.currentPeek()===LITERAL_DELIMITER;return te.resetPeek(),Ce}function F(te,oe){const{currentType:_e}=oe;if(_e!==8)return!1;k(te);const Ce=te.currentPeek()===".";return te.resetPeek(),Ce}function I(te,oe){const{currentType:_e}=oe;if(_e!==9)return!1;k(te);const Ce=M(te.currentPeek());return te.resetPeek(),Ce}function N(te,oe){const{currentType:_e}=oe;if(!(_e===8||_e===12))return!1;k(te);const Ce=te.currentPeek()===":";return te.resetPeek(),Ce}function q(te,oe){const{currentType:_e}=oe;if(_e!==10)return!1;const Ce=()=>{const Te=te.currentPeek();return Te==="{"?M(te.peek()):Te==="@"||Te==="%"||Te==="|"||Te===":"||Te==="."||Te===CHAR_SP||!Te?!1:Te===CHAR_LF?(te.peek(),Ce()):j(te,!1)},Ee=Ce();return te.resetPeek(),Ee}function Y(te){k(te);const oe=te.currentPeek()==="|";return te.resetPeek(),oe}function Z(te){const oe=k(te),_e=te.currentPeek()==="%"&&te.peek()==="{";return te.resetPeek(),{isModulo:_e,hasSpace:oe.length>0}}function j(te,oe=!0){const _e=(Ee=!1,Te="",Re=!1)=>{const Oe=te.currentPeek();return Oe==="{"?Te==="%"?!1:Ee:Oe==="@"||!Oe?Te==="%"?!0:Ee:Oe==="%"?(te.peek(),_e(Ee,"%",!0)):Oe==="|"?Te==="%"||Re?!0:!(Te===CHAR_SP||Te===CHAR_LF):Oe===CHAR_SP?(te.peek(),_e(!0,CHAR_SP,Re)):Oe===CHAR_LF?(te.peek(),_e(!0,CHAR_LF,Re)):!0},Ce=_e();return oe&&te.resetPeek(),Ce}function ne(te,oe){const _e=te.currentChar();return _e===EOF?EOF:oe(_e)?(te.next(),_e):null}function le(te){const oe=te.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe>=48&&oe<=57||oe===95||oe===36}function J(te){return ne(te,le)}function O(te){const oe=te.charCodeAt(0);return oe>=97&&oe<=122||oe>=65&&oe<=90||oe>=48&&oe<=57||oe===95||oe===36||oe===45}function U(te){return ne(te,O)}function W(te){const oe=te.charCodeAt(0);return oe>=48&&oe<=57}function H(te){return ne(te,W)}function X(te){const oe=te.charCodeAt(0);return oe>=48&&oe<=57||oe>=65&&oe<=70||oe>=97&&oe<=102}function Q(te){return ne(te,X)}function fe(te){let oe="",_e="";for(;oe=H(te);)_e+=oe;return _e}function Se(te){S(te);const oe=te.currentChar();return oe!=="%"&&v(CompileErrorCodes.EXPECTED_TOKEN,u(),0,oe),te.next(),"%"}function Pe(te){let oe="";for(;;){const _e=te.currentChar();if(_e==="{"||_e==="}"||_e==="@"||_e==="|"||!_e)break;if(_e==="%")if(j(te))oe+=_e,te.next();else break;else if(_e===CHAR_SP||_e===CHAR_LF)if(j(te))oe+=_e,te.next();else{if(Y(te))break;oe+=_e,te.next()}else oe+=_e,te.next()}return oe}function $e(te){S(te);let oe="",_e="";for(;oe=U(te);)_e+=oe;return te.currentChar()===EOF&&v(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),_e}function Ie(te){S(te);let oe="";return te.currentChar()==="-"?(te.next(),oe+=`-${fe(te)}`):oe+=fe(te),te.currentChar()===EOF&&v(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),oe}function Ne(te){return te!==LITERAL_DELIMITER&&te!==CHAR_LF}function Be(te){S(te),x(te,"'");let oe="",_e="";for(;oe=ne(te,Ne);)oe==="\\"?_e+=be(te):_e+=oe;const Ce=te.currentChar();return Ce===CHAR_LF||Ce===EOF?(v(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,u(),0),Ce===CHAR_LF&&(te.next(),x(te,"'")),_e):(x(te,"'"),_e)}function be(te){const oe=te.currentChar();switch(oe){case"\\":case"'":return te.next(),`\\${oe}`;case"u":return Ve(te,oe,4);case"U":return Ve(te,oe,6);default:return v(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,u(),0,oe),""}}function Ve(te,oe,_e){x(te,oe);let Ce="";for(let Ee=0;Ee<_e;Ee++){const Te=Q(te);if(!Te){v(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,u(),0,`\\${oe}${Ce}${te.currentChar()}`);break}Ce+=Te}return`\\${oe}${Ce}`}function De(te){return te!=="{"&&te!=="}"&&te!==CHAR_SP&&te!==CHAR_LF}function ve(te){S(te);let oe="",_e="";for(;oe=ne(te,De);)_e+=oe;return _e}function ye(te){let oe="",_e="";for(;oe=J(te);)_e+=oe;return _e}function we(te){const oe=_e=>{const Ce=te.currentChar();return Ce==="{"||Ce==="%"||Ce==="@"||Ce==="|"||Ce==="("||Ce===")"||!Ce||Ce===CHAR_SP?_e:(_e+=Ce,te.next(),oe(_e))};return oe("")}function ke(te){S(te);const oe=x(te,"|");return S(te),oe}function Me(te,oe){let _e=null;switch(te.currentChar()){case"{":return oe.braceNest>=1&&v(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,u(),0),te.next(),_e=_(oe,2,"{"),S(te),oe.braceNest++,_e;case"}":return oe.braceNest>0&&oe.currentType===2&&v(CompileErrorCodes.EMPTY_PLACEHOLDER,u(),0),te.next(),_e=_(oe,3,"}"),oe.braceNest--,oe.braceNest>0&&S(te),oe.inLinked&&oe.braceNest===0&&(oe.inLinked=!1),_e;case"@":return oe.braceNest>0&&v(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),_e=Le(te,oe)||w(oe),oe.braceNest=0,_e;default:{let Ee=!0,Te=!0,Re=!0;if(Y(te))return oe.braceNest>0&&v(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),_e=_(oe,1,ke(te)),oe.braceNest=0,oe.inLinked=!1,_e;if(oe.braceNest>0&&(oe.currentType===5||oe.currentType===6||oe.currentType===7))return v(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,u(),0),oe.braceNest=0,Fe(te,oe);if(Ee=P(te,oe))return _e=_(oe,5,$e(te)),S(te),_e;if(Te=T(te,oe))return _e=_(oe,6,Ie(te)),S(te),_e;if(Re=D(te,oe))return _e=_(oe,7,Be(te)),S(te),_e;if(!Ee&&!Te&&!Re)return _e=_(oe,13,ve(te)),v(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,u(),0,_e.value),S(te),_e;break}}return _e}function Le(te,oe){const{currentType:_e}=oe;let Ce=null;const Ee=te.currentChar();switch((_e===8||_e===9||_e===12||_e===10)&&(Ee===CHAR_LF||Ee===CHAR_SP)&&v(CompileErrorCodes.INVALID_LINKED_FORMAT,u(),0),Ee){case"@":return te.next(),Ce=_(oe,8,"@"),oe.inLinked=!0,Ce;case".":return S(te),te.next(),_(oe,9,".");case":":return S(te),te.next(),_(oe,10,":");default:return Y(te)?(Ce=_(oe,1,ke(te)),oe.braceNest=0,oe.inLinked=!1,Ce):F(te,oe)||N(te,oe)?(S(te),Le(te,oe)):I(te,oe)?(S(te),_(oe,12,ye(te))):q(te,oe)?(S(te),Ee==="{"?Me(te,oe)||Ce:_(oe,11,we(te))):(_e===8&&v(CompileErrorCodes.INVALID_LINKED_FORMAT,u(),0),oe.braceNest=0,oe.inLinked=!1,Fe(te,oe))}}function Fe(te,oe){let _e={type:14};if(oe.braceNest>0)return Me(te,oe)||w(oe);if(oe.inLinked)return Le(te,oe)||w(oe);switch(te.currentChar()){case"{":return Me(te,oe)||w(oe);case"}":return v(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,u(),0),te.next(),_(oe,3,"}");case"@":return Le(te,oe)||w(oe);default:{if(Y(te))return _e=_(oe,1,ke(te)),oe.braceNest=0,oe.inLinked=!1,_e;const{isModulo:Ee,hasSpace:Te}=Z(te);if(Ee)return Te?_(oe,0,Pe(te)):_(oe,4,Se(te));if(j(te))return _(oe,0,Pe(te));break}}return _e}function ze(){const{currentType:te,offset:oe,startLoc:_e,endLoc:Ce}=g;return g.lastType=te,g.lastOffset=oe,g.lastStartLoc=_e,g.lastEndLoc=Ce,g.offset=s(),g.startLoc=u(),o.currentChar()===EOF?_(g,14):Fe(o,g)}return{nextToken:ze,currentOffset:s,currentPosition:u,context:m}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,n,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(n||r,16);return o<=55295||o>=57344?String.fromCodePoint(o):"\uFFFD"}}}function createParser(e={}){const n=e.location!==!1,{onError:r,onWarn:o}=e;function s(P,T,D,F,...I){const N=P.currentPosition();if(N.offset+=F,N.column+=F,r){const q=n?createLocation(D,N):null,Y=createCompileError(T,q,{domain:ERROR_DOMAIN$2,args:I});r(Y)}}function u(P,T,D,F,...I){const N=P.currentPosition();if(N.offset+=F,N.column+=F,o){const q=n?createLocation(D,N):null;o(createCompileWarn(T,q,I))}}function d(P,T,D){const F={type:P};return n&&(F.start=T,F.end=T,F.loc={start:D,end:D}),F}function f(P,T,D,F){F&&(P.type=F),n&&(P.end=T,P.loc&&(P.loc.end=D))}function g(P,T){const D=P.context(),F=d(3,D.offset,D.startLoc);return F.value=T,f(F,P.currentOffset(),P.currentPosition()),F}function m(P,T){const D=P.context(),{lastOffset:F,lastStartLoc:I}=D,N=d(5,F,I);return N.index=parseInt(T,10),P.nextToken(),f(N,P.currentOffset(),P.currentPosition()),N}function y(P,T,D){const F=P.context(),{lastOffset:I,lastStartLoc:N}=F,q=d(4,I,N);return q.key=T,D===!0&&(q.modulo=!0),P.nextToken(),f(q,P.currentOffset(),P.currentPosition()),q}function v(P,T){const D=P.context(),{lastOffset:F,lastStartLoc:I}=D,N=d(9,F,I);return N.value=T.replace(KNOWN_ESCAPES,fromEscapeSequence),P.nextToken(),f(N,P.currentOffset(),P.currentPosition()),N}function _(P){const T=P.nextToken(),D=P.context(),{lastOffset:F,lastStartLoc:I}=D,N=d(8,F,I);return T.type!==12?(s(P,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,D.lastStartLoc,0),N.value="",f(N,F,I),{nextConsumeToken:T,node:N}):(T.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(T)),N.value=T.value||"",f(N,P.currentOffset(),P.currentPosition()),{node:N})}function w(P,T){const D=P.context(),F=d(7,D.offset,D.startLoc);return F.value=T,f(F,P.currentOffset(),P.currentPosition()),F}function x(P){const T=P.context(),D=d(6,T.offset,T.startLoc);let F=P.nextToken();if(F.type===9){const I=_(P);D.modifier=I.node,F=I.nextConsumeToken||P.nextToken()}switch(F.type!==10&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(F)),F=P.nextToken(),F.type===2&&(F=P.nextToken()),F.type){case 11:F.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(F)),D.key=w(P,F.value||"");break;case 5:F.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(F)),D.key=y(P,F.value||"");break;case 6:F.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(F)),D.key=m(P,F.value||"");break;case 7:F.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(F)),D.key=v(P,F.value||"");break;default:{s(P,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,T.lastStartLoc,0);const I=P.context(),N=d(7,I.offset,I.startLoc);return N.value="",f(N,I.offset,I.startLoc),D.key=N,f(D,I.offset,I.startLoc),{nextConsumeToken:F,node:D}}}return f(D,P.currentOffset(),P.currentPosition()),{node:D}}function k(P){const T=P.context(),D=T.currentType===1?P.currentOffset():T.offset,F=T.currentType===1?T.endLoc:T.startLoc,I=d(2,D,F);I.items=[];let N=null,q=null;do{const j=N||P.nextToken();switch(N=null,j.type){case 0:j.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(j)),I.items.push(g(P,j.value||""));break;case 6:j.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(j)),I.items.push(m(P,j.value||""));break;case 4:q=!0;break;case 5:j.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(j)),I.items.push(y(P,j.value||"",!!q)),q&&(u(P,CompileWarnCodes.USE_MODULO_SYNTAX,T.lastStartLoc,0,getTokenCaption(j)),q=null);break;case 7:j.value==null&&s(P,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,getTokenCaption(j)),I.items.push(v(P,j.value||""));break;case 8:{const ne=x(P);I.items.push(ne.node),N=ne.nextConsumeToken||null;break}}}while(T.currentType!==14&&T.currentType!==1);const Y=T.currentType===1?T.lastOffset:P.currentOffset(),Z=T.currentType===1?T.lastEndLoc:P.currentPosition();return f(I,Y,Z),I}function S(P,T,D,F){const I=P.context();let N=F.items.length===0;const q=d(1,T,D);q.cases=[],q.cases.push(F);do{const Y=k(P);N||(N=Y.items.length===0),q.cases.push(Y)}while(I.currentType!==14);return N&&s(P,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,D,0),f(q,P.currentOffset(),P.currentPosition()),q}function M(P){const T=P.context(),{offset:D,startLoc:F}=T,I=k(P);return T.currentType===14?I:S(P,D,F,I)}function E(P){const T=createTokenizer(P,assign$1({},e)),D=T.context(),F=d(0,D.offset,D.startLoc);return n&&F.loc&&(F.loc.source=P),F.body=M(T),e.onCacheKey&&(F.cacheKey=e.onCacheKey(P)),D.currentType!==14&&s(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,P[D.offset]||""),f(F,T.currentOffset(),T.currentPosition()),F}return{parse:E}}function getTokenCaption(e){if(e.type===14)return"EOF";const n=(e.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"\u2026":n}function createTransformer(e,n={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:u=>(r.helpers.add(u),u)}}function traverseNodes(e,n){for(let r=0;r<e.length;r++)traverseNode(e[r],n)}function traverseNode(e,n){switch(e.type){case 1:traverseNodes(e.cases,n),n.helper("plural");break;case 2:traverseNodes(e.items,n);break;case 6:{traverseNode(e.key,n),n.helper("linked"),n.helper("type");break}case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function transform(e,n={}){const r=createTransformer(e);r.helper("normalize"),e.body&&traverseNode(e.body,r);const o=r.context();e.helpers=Array.from(o.helpers)}function optimize(e){const n=e.body;return n.type===2?optimizeMessageNode(n):n.cases.forEach(r=>optimizeMessageNode(r)),e}function optimizeMessageNode(e){if(e.items.length===1){const n=e.items[0];(n.type===3||n.type===9)&&(e.static=n.value,delete n.value)}else{const n=[];for(let r=0;r<e.items.length;r++){const o=e.items[r];if(!(o.type===3||o.type===9)||o.value==null)break;n.push(o.value)}if(n.length===e.items.length){e.static=join(n);for(let r=0;r<e.items.length;r++){const o=e.items[r];(o.type===3||o.type===9)&&delete o.value}}}}const ERROR_DOMAIN$1="minifier";function minify(e){switch(e.t=e.type,e.type){case 0:{const n=e;minify(n.body),n.b=n.body,delete n.body;break}case 1:{const n=e,r=n.cases;for(let o=0;o<r.length;o++)minify(r[o]);n.c=r,delete n.cases;break}case 2:{const n=e,r=n.items;for(let o=0;o<r.length;o++)minify(r[o]);n.i=r,delete n.items,n.static&&(n.s=n.static,delete n.static);break}case 3:case 9:case 8:case 7:{const n=e;n.value&&(n.v=n.value,delete n.value);break}case 6:{const n=e;minify(n.key),n.k=n.key,delete n.key,n.modifier&&(minify(n.modifier),n.m=n.modifier,delete n.modifier);break}case 5:{const n=e;n.i=n.index,delete n.index;break}case 4:{const n=e;n.k=n.key,delete n.key;break}default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[e.type]})}delete e.type}const ERROR_DOMAIN="parser";function createCodeGenerator(e,n){const{sourceMap:r,filename:o,breakLineCode:s,needIndent:u}=n,d=n.location!==!1,f={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:u,indentLevel:0};d&&e.loc&&(f.source=e.loc.source);const g=()=>f;function m(S,M){f.code+=S}function y(S,M=!0){const E=M?s:"";m(u?E+"  ".repeat(S):E)}function v(S=!0){const M=++f.indentLevel;S&&y(M)}function _(S=!0){const M=--f.indentLevel;S&&y(M)}function w(){y(f.indentLevel)}return{context:g,push:m,indent:v,deindent:_,newline:w,helper:S=>`_${S}`,needIndent:()=>f.needIndent}}function generateLinkedNode(e,n){const{helper:r}=e;e.push(`${r("linked")}(`),generateNode(e,n.key),n.modifier?(e.push(", "),generateNode(e,n.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,n){const{helper:r,needIndent:o}=e;e.push(`${r("normalize")}([`),e.indent(o());const s=n.items.length;for(let u=0;u<s&&(generateNode(e,n.items[u]),u!==s-1);u++)e.push(", ");e.deindent(o()),e.push("])")}function generatePluralNode(e,n){const{helper:r,needIndent:o}=e;if(n.cases.length>1){e.push(`${r("plural")}([`),e.indent(o());const s=n.cases.length;for(let u=0;u<s&&(generateNode(e,n.cases[u]),u!==s-1);u++)e.push(", ");e.deindent(o()),e.push("])")}}function generateResource(e,n){n.body?generateNode(e,n.body):e.push("null")}function generateNode(e,n){const{helper:r}=e;switch(n.type){case 0:generateResource(e,n);break;case 1:generatePluralNode(e,n);break;case 2:generateMessageNode(e,n);break;case 6:generateLinkedNode(e,n);break;case 8:e.push(JSON.stringify(n.value),n);break;case 7:e.push(JSON.stringify(n.value),n);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${n.index}))`,n);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:e.push(JSON.stringify(n.value),n);break;case 3:e.push(JSON.stringify(n.value),n);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[n.type]})}}const generate=(e,n={})=>{const r=isString$2(n.mode)?n.mode:"normal",o=isString$2(n.filename)?n.filename:"message.intl",s=!!n.sourceMap,u=n.breakLineCode!=null?n.breakLineCode:r==="arrow"?";":`
`,d=n.needIndent?n.needIndent:r!=="arrow",f=e.helpers||[],g=createCodeGenerator(e,{mode:r,filename:o,sourceMap:s,breakLineCode:u,needIndent:d});g.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),g.indent(d),f.length>0&&(g.push(`const { ${join(f.map(v=>`${v}: _${v}`),", ")} } = ctx`),g.newline()),g.push("return "),generateNode(g,e),g.deindent(d),g.push("}"),delete e.helpers;const{code:m,map:y}=g.context();return{ast:e,code:m,map:y?y.toJSON():void 0}};function baseCompile$1(e,n={}){const r=assign$1({},n),o=!!r.jit,s=!!r.minify,u=r.optimize==null?!0:r.optimize,f=createParser(r).parse(e);return o?(u&&optimize(f),s&&minify(f),{ast:f,code:""}):(transform(f,r),generate(f,r))}/*!
  * core-base v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],["["]:[4],o:[7]};pathStateMachine[1]={w:[1],["."]:[2],["["]:[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],[0]:[3,0]};pathStateMachine[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};pathStateMachine[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};pathStateMachine[5]={["'"]:[4,0],o:8,l:[5,0]};pathStateMachine[6]={['"']:[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const n=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return n===r&&(n===34||n===39)?e.slice(1,-1):e}function getPathCharType(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const n=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:isLiteral(n)?stripQuotes(n):"*"+n}function parse$1(e){const n=[];let r=-1,o=0,s=0,u,d,f,g,m,y,v;const _=[];_[0]=()=>{d===void 0?d=f:d+=f},_[1]=()=>{d!==void 0&&(n.push(d),d=void 0)},_[2]=()=>{_[0](),s++},_[3]=()=>{if(s>0)s--,o=4,_[0]();else{if(s=0,d===void 0||(d=formatSubPath(d),d===!1))return!1;_[1]()}};function w(){const x=e[r+1];if(o===5&&x==="'"||o===6&&x==='"')return r++,f="\\"+x,_[0](),!0}for(;o!==null;)if(r++,u=e[r],!(u==="\\"&&w())){if(g=getPathCharType(u),v=pathStateMachine[o],m=v[g]||v.l||8,m===8||(o=m[0],m[1]!==void 0&&(y=_[m[1]],y&&(f=u,y()===!1))))return;if(o===7)return n}}const cache$1=new Map;function resolveWithKeyValue(e,n){return isObject$4(e)?e[n]:null}function resolveValue(e,n){if(!isObject$4(e))return null;let r=cache$1.get(n);if(r||(r=parse$1(n),r&&cache$1.set(n,r)),!r)return null;const o=r.length;let s=e,u=0;for(;u<o;){const d=s[r[u]];if(d===void 0||isFunction$2(s))return null;s=d,u++}return s}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>e.length===0?"":join$1(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,n){return e=Math.abs(e),n===2?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const n=isNumber$1(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber$1(e.named.count)||isNumber$1(e.named.n))?isNumber$1(e.named.count)?e.named.count:isNumber$1(e.named.n)?e.named.n:n:n}function normalizeNamed(e,n){n.count||(n.count=e),n.n||(n.n=e)}function createMessageContext(e={}){const n=e.locale,r=getPluralIndex(e),o=isObject$4(e.pluralRules)&&isString$3(n)&&isFunction$2(e.pluralRules[n])?e.pluralRules[n]:pluralDefault,s=isObject$4(e.pluralRules)&&isString$3(n)&&isFunction$2(e.pluralRules[n])?pluralDefault:void 0,u=M=>M[o(r,M.length,s)],d=e.list||[],f=M=>d[M],g=e.named||{};isNumber$1(e.pluralIndex)&&normalizeNamed(r,g);const m=M=>g[M];function y(M){const E=isFunction$2(e.messages)?e.messages(M):isObject$4(e.messages)?e.messages[M]:!1;return E||(e.parent?e.parent.message(M):DEFAULT_MESSAGE)}const v=M=>e.modifiers?e.modifiers[M]:DEFAULT_MODIFIER,_=isPlainObject$3(e.processor)&&isFunction$2(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,w=isPlainObject$3(e.processor)&&isFunction$2(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,x=isPlainObject$3(e.processor)&&isString$3(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,S={list:f,named:m,plural:u,linked:(M,...E)=>{const[P,T]=E;let D="text",F="";E.length===1?isObject$4(P)?(F=P.modifier||F,D=P.type||D):isString$3(P)&&(F=P||F):E.length===2&&(isString$3(P)&&(F=P||F),isString$3(T)&&(D=T||D));const I=y(M)(S),N=D==="vnode"&&isArray$3(I)&&F?I[0]:I;return F?v(F)(N,D):N},message:y,type:x,interpolate:w,normalize:_,values:assign$2({},d,g)};return S}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,n,r){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:n,meta:r})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(e){return n=>devtools&&devtools.emit(e,n)}const code$1$1=CompileWarnCodes.__EXTEND_POINT__,inc$1$1=incrementer(code$1$1),CoreWarnCodes={NOT_FOUND_KEY:code$1$1,FALLBACK_TO_TRANSLATE:inc$1$1(),CANNOT_FORMAT_NUMBER:inc$1$1(),FALLBACK_TO_NUMBER_FORMAT:inc$1$1(),CANNOT_FORMAT_DATE:inc$1$1(),FALLBACK_TO_DATE_FORMAT:inc$1$1(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:inc$1$1(),__EXTEND_POINT__:inc$1$1()},code$2=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$2),CoreErrorCodes={INVALID_ARGUMENT:code$2,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:inc$2(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:inc$2(),NOT_SUPPORT_LOCALE_TYPE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(e){return createCompileError(e,null,void 0)}function getLocale(e,n){return n.locale!=null?resolveLocale(n.locale):resolveLocale(e.locale)}let _resolveLocale;function resolveLocale(e){if(isString$3(e))return e;if(isFunction$2(e)){if(e.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(e.constructor.name==="Function"){const n=e();if(isPromise(n))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=n}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(e,n,r){return[...new Set([r,...isArray$3(n)?n:isObject$4(n)?Object.keys(n):isString$3(n)?[n]:[r]])]}function fallbackWithLocaleChain(e,n,r){const o=isString$3(r)?r:DEFAULT_LOCALE,s=e;s.__localeChainCache||(s.__localeChainCache=new Map);let u=s.__localeChainCache.get(o);if(!u){u=[];let d=[r];for(;isArray$3(d);)d=appendBlockToChain(u,d,n);const f=isArray$3(n)||!isPlainObject$3(n)?n:n.default?n.default:null;d=isString$3(f)?[f]:f,isArray$3(d)&&appendBlockToChain(u,d,!1),s.__localeChainCache.set(o,u)}return u}function appendBlockToChain(e,n,r){let o=!0;for(let s=0;s<n.length&&isBoolean(o);s++){const u=n[s];isString$3(u)&&(o=appendLocaleToChain(e,n[s],r))}return o}function appendLocaleToChain(e,n,r){let o;const s=n.split("-");do{const u=s.join("-");o=appendItemToChain(e,u,r),s.splice(-1,1)}while(s.length&&o===!0);return o}function appendItemToChain(e,n,r){let o=!1;if(!e.includes(n)&&(o=!0,n)){o=n[n.length-1]!=="!";const s=n.replace(/!/g,"");e.push(s),(isArray$3(r)||isPlainObject$3(r))&&r[s]&&(o=r[s])}return o}const VERSION$2="9.14.1",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,n)=>n==="text"&&isString$3(e)?e.toUpperCase():n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,n)=>n==="text"&&isString$3(e)?e.toLowerCase():n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,n)=>n==="text"&&isString$3(e)?capitalize(e):n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;function registerMessageCompiler(e){_compiler=e}let _resolver;function registerMessageResolver(e){_resolver=e}let _fallbacker;function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const n=isFunction$2(e.onWarn)?e.onWarn:warn$3,r=isString$3(e.version)?e.version:VERSION$2,o=isString$3(e.locale)||isFunction$2(e.locale)?e.locale:DEFAULT_LOCALE,s=isFunction$2(o)?DEFAULT_LOCALE:o,u=isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||isString$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:s,d=isPlainObject$3(e.messages)?e.messages:{[s]:{}},f=isPlainObject$3(e.datetimeFormats)?e.datetimeFormats:{[s]:{}},g=isPlainObject$3(e.numberFormats)?e.numberFormats:{[s]:{}},m=assign$2({},e.modifiers||{},getDefaultLinkedModifiers()),y=e.pluralRules||{},v=isFunction$2(e.missing)?e.missing:null,_=isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,w=isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,x=!!e.fallbackFormat,k=!!e.unresolving,S=isFunction$2(e.postTranslation)?e.postTranslation:null,M=isPlainObject$3(e.processor)?e.processor:null,E=isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,P=!!e.escapeParameter,T=isFunction$2(e.messageCompiler)?e.messageCompiler:_compiler,D=isFunction$2(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,F=isFunction$2(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,I=isObject$4(e.fallbackContext)?e.fallbackContext:void 0,N=e,q=isObject$4(N.__datetimeFormatters)?N.__datetimeFormatters:new Map,Y=isObject$4(N.__numberFormatters)?N.__numberFormatters:new Map,Z=isObject$4(N.__meta)?N.__meta:{};_cid++;const j={version:r,cid:_cid,locale:o,fallbackLocale:u,messages:d,modifiers:m,pluralRules:y,missing:v,missingWarn:_,fallbackWarn:w,fallbackFormat:x,unresolving:k,postTranslation:S,processor:M,warnHtmlMessage:E,escapeParameter:P,messageCompiler:T,messageResolver:D,localeFallbacker:F,fallbackContext:I,onWarn:n,__meta:Z};return j.datetimeFormats=f,j.numberFormats=g,j.__datetimeFormatters=q,j.__numberFormatters=Y,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(j,r,Z),j}function handleMissing(e,n,r,o,s){const{missing:u,onWarn:d}=e;if(u!==null){const f=u(e,r,n,s);return isString$3(f)?f:n}else return n}function updateFallbackLocale(e,n,r){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,r,n)}function isAlmostSameLocale(e,n){return e===n?!1:e.split("-")[0]===n.split("-")[0]}function isImplicitFallback(e,n){const r=n.indexOf(e);if(r===-1)return!1;for(let o=r+1;o<n.length;o++)if(isAlmostSameLocale(e,n[o]))return!0;return!1}function format$3(e){return r=>formatParts(r,e)}function formatParts(e,n){const r=n.b||n.body;if((r.t||r.type)===1){const o=r,s=o.c||o.cases;return e.plural(s.reduce((u,d)=>[...u,formatMessageParts(e,d)],[]))}else return formatMessageParts(e,r)}function formatMessageParts(e,n){const r=n.s||n.static;if(r)return e.type==="text"?r:e.normalize([r]);{const o=(n.i||n.items).reduce((s,u)=>[...s,formatMessagePart(e,u)],[]);return e.normalize(o)}}function formatMessagePart(e,n){const r=n.t||n.type;switch(r){case 3:{const o=n;return o.v||o.value}case 9:{const o=n;return o.v||o.value}case 4:{const o=n;return e.interpolate(e.named(o.k||o.key))}case 5:{const o=n;return e.interpolate(e.list(o.i!=null?o.i:o.index))}case 6:{const o=n,s=o.m||o.modifier;return e.linked(formatMessagePart(e,o.k||o.key),s?formatMessagePart(e,s):void 0,e.type)}case 7:{const o=n;return o.v||o.value}case 8:{const o=n;return o.v||o.value}default:throw new Error(`unhandled node type on format message part: ${r}`)}}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);const isMessageAST=e=>isObject$4(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function baseCompile(e,n={}){let r=!1;const o=n.onError||defaultOnError;return n.onError=s=>{r=!0,o(s)},{...baseCompile$1(e,n),detectError:r}}const compileToFunction=(e,n)=>{if(!isString$3(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE);{isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const o=(n.onCacheKey||defaultOnCacheKey)(e),s=compileCache[o];if(s)return s;const{code:u,detectError:d}=baseCompile(e,n),f=new Function(`return ${u}`)();return d?f:compileCache[o]=f}};function compile(e,n){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$3(e)){isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const o=(n.onCacheKey||defaultOnCacheKey)(e),s=compileCache[o];if(s)return s;const{ast:u,detectError:d}=baseCompile(e,{...n,location:!1,jit:!0}),f=format$3(u);return d?f:compileCache[o]=f}else{const r=e.cacheKey;if(r){const o=compileCache[r];return o||(compileCache[r]=format$3(e))}else return format$3(e)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction$2(e);function translate(e,...n){const{fallbackFormat:r,postTranslation:o,unresolving:s,messageCompiler:u,fallbackLocale:d,messages:f}=e,[g,m]=parseTranslateArgs(...n),y=isBoolean(m.missingWarn)?m.missingWarn:e.missingWarn,v=isBoolean(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn,_=isBoolean(m.escapeParameter)?m.escapeParameter:e.escapeParameter,w=!!m.resolvedMessage,x=isString$3(m.default)||isBoolean(m.default)?isBoolean(m.default)?u?g:()=>g:m.default:r?u?g:()=>g:"",k=r||x!=="",S=getLocale(e,m);_&&escapeParams(m);let[M,E,P]=w?[g,S,f[S]||{}]:resolveMessageFormat(e,g,S,d,v,y),T=M,D=g;if(!w&&!(isString$3(T)||isMessageAST(T)||isMessageFunction(T))&&k&&(T=x,D=T),!w&&(!(isString$3(T)||isMessageAST(T)||isMessageFunction(T))||!isString$3(E)))return s?NOT_REOSLVED:g;let F=!1;const I=()=>{F=!0},N=isMessageFunction(T)?T:compileMessageFormat(e,g,E,T,D,I);if(F)return T;const q=getMessageContextOptions(e,E,P,m),Y=createMessageContext(q),Z=evaluateMessage(e,N,Y),j=o?o(Z,g):Z;if(__INTLIFY_PROD_DEVTOOLS__){const ne={timestamp:Date.now(),key:isString$3(g)?g:isMessageFunction(T)?T.key:"",locale:E||(isMessageFunction(T)?T.locale:""),format:isString$3(T)?T:isMessageFunction(T)?T.source:"",message:j};ne.meta=assign$2({},e.__meta,getAdditionalMeta()||{}),translateDevTools(ne)}return j}function escapeParams(e){isArray$3(e.list)?e.list=e.list.map(n=>isString$3(n)?escapeHtml(n):n):isObject$4(e.named)&&Object.keys(e.named).forEach(n=>{isString$3(e.named[n])&&(e.named[n]=escapeHtml(e.named[n]))})}function resolveMessageFormat(e,n,r,o,s,u){const{messages:d,onWarn:f,messageResolver:g,localeFallbacker:m}=e,y=m(e,o,r);let v={},_,w=null;const x="translate";for(let k=0;k<y.length&&(_=y[k],v=d[_]||{},(w=g(v,n))===null&&(w=v[n]),!(isString$3(w)||isMessageAST(w)||isMessageFunction(w)));k++)if(!isImplicitFallback(_,y)){const S=handleMissing(e,n,_,u,x);S!==n&&(w=S)}return[w,_,v]}function compileMessageFormat(e,n,r,o,s,u){const{messageCompiler:d,warnHtmlMessage:f}=e;if(isMessageFunction(o)){const m=o;return m.locale=m.locale||r,m.key=m.key||n,m}if(d==null){const m=()=>o;return m.locale=r,m.key=n,m}const g=d(o,getCompileContext(e,r,s,o,f,u));return g.locale=r,g.key=n,g.source=o,g}function evaluateMessage(e,n,r){return n(r)}function parseTranslateArgs(...e){const[n,r,o]=e,s={};if(!isString$3(n)&&!isNumber$1(n)&&!isMessageFunction(n)&&!isMessageAST(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const u=isNumber$1(n)?String(n):(isMessageFunction(n),n);return isNumber$1(r)?s.plural=r:isString$3(r)?s.default=r:isPlainObject$3(r)&&!isEmptyObject(r)?s.named=r:isArray$3(r)&&(s.list=r),isNumber$1(o)?s.plural=o:isString$3(o)?s.default=o:isPlainObject$3(o)&&assign$2(s,o),[u,s]}function getCompileContext(e,n,r,o,s,u){return{locale:n,key:r,warnHtmlMessage:s,onError:d=>{throw u&&u(d),d},onCacheKey:d=>generateFormatCacheKey(n,r,d)}}function getMessageContextOptions(e,n,r,o){const{modifiers:s,pluralRules:u,messageResolver:d,fallbackLocale:f,fallbackWarn:g,missingWarn:m,fallbackContext:y}=e,_={locale:n,modifiers:s,pluralRules:u,messages:w=>{let x=d(r,w);if(x==null&&y){const[,,k]=resolveMessageFormat(y,w,n,f,g,m);x=d(k,w)}if(isString$3(x)||isMessageAST(x)){let k=!1;const M=compileMessageFormat(e,w,n,x,w,()=>{k=!0});return k?NOOP_MESSAGE_FUNCTION:M}else return isMessageFunction(x)?x:NOOP_MESSAGE_FUNCTION}};return e.processor&&(_.processor=e.processor),o.list&&(_.list=o.list),o.named&&(_.named=o.named),isNumber$1(o.plural)&&(_.pluralIndex=o.plural),_}function datetime(e,...n){const{datetimeFormats:r,unresolving:o,fallbackLocale:s,onWarn:u,localeFallbacker:d}=e,{__datetimeFormatters:f}=e,[g,m,y,v]=parseDateTimeArgs(...n),_=isBoolean(y.missingWarn)?y.missingWarn:e.missingWarn;isBoolean(y.fallbackWarn)?y.fallbackWarn:e.fallbackWarn;const w=!!y.part,x=getLocale(e,y),k=d(e,s,x);if(!isString$3(g)||g==="")return new Intl.DateTimeFormat(x,v).format(m);let S={},M,E=null;const P="datetime format";for(let F=0;F<k.length&&(M=k[F],S=r[M]||{},E=S[g],!isPlainObject$3(E));F++)handleMissing(e,g,M,_,P);if(!isPlainObject$3(E)||!isString$3(M))return o?NOT_REOSLVED:g;let T=`${M}__${g}`;isEmptyObject(v)||(T=`${T}__${JSON.stringify(v)}`);let D=f.get(T);return D||(D=new Intl.DateTimeFormat(M,assign$2({},E,v)),f.set(T,D)),w?D.formatToParts(m):D.format(m)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[n,r,o,s]=e,u={};let d={},f;if(isString$3(n)){const g=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!g)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const m=g[3]?g[3].trim().startsWith("T")?`${g[1].trim()}${g[3].trim()}`:`${g[1].trim()}T${g[3].trim()}`:g[1].trim();f=new Date(m);try{f.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(n)){if(isNaN(n.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);f=n}else if(isNumber$1(n))f=n;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$3(r)?u.key=r:isPlainObject$3(r)&&Object.keys(r).forEach(g=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(g)?d[g]=r[g]:u[g]=r[g]}),isString$3(o)?u.locale=o:isPlainObject$3(o)&&(d=o),isPlainObject$3(s)&&(d=s),[u.key||"",f,u,d]}function clearDateTimeFormat(e,n,r){const o=e;for(const s in r){const u=`${n}__${s}`;!o.__datetimeFormatters.has(u)||o.__datetimeFormatters.delete(u)}}function number(e,...n){const{numberFormats:r,unresolving:o,fallbackLocale:s,onWarn:u,localeFallbacker:d}=e,{__numberFormatters:f}=e,[g,m,y,v]=parseNumberArgs(...n),_=isBoolean(y.missingWarn)?y.missingWarn:e.missingWarn;isBoolean(y.fallbackWarn)?y.fallbackWarn:e.fallbackWarn;const w=!!y.part,x=getLocale(e,y),k=d(e,s,x);if(!isString$3(g)||g==="")return new Intl.NumberFormat(x,v).format(m);let S={},M,E=null;const P="number format";for(let F=0;F<k.length&&(M=k[F],S=r[M]||{},E=S[g],!isPlainObject$3(E));F++)handleMissing(e,g,M,_,P);if(!isPlainObject$3(E)||!isString$3(M))return o?NOT_REOSLVED:g;let T=`${M}__${g}`;isEmptyObject(v)||(T=`${T}__${JSON.stringify(v)}`);let D=f.get(T);return D||(D=new Intl.NumberFormat(M,assign$2({},E,v)),f.set(T,D)),w?D.formatToParts(m):D.format(m)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[n,r,o,s]=e,u={};let d={};if(!isNumber$1(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const f=n;return isString$3(r)?u.key=r:isPlainObject$3(r)&&Object.keys(r).forEach(g=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(g)?d[g]=r[g]:u[g]=r[g]}),isString$3(o)?u.locale=o:isPlainObject$3(o)&&(d=o),isPlainObject$3(s)&&(d=s),[u.key||"",f,u,d]}function clearNumberFormat(e,n,r){const o=e;for(const s in r){const u=`${n}__${s}`;!o.__numberFormatters.has(u)||o.__numberFormatters.delete(u)}}initFeatureFlags$1();/*!
  * vue-i18n v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION$1="9.14.1";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e,...n){return createCompileError(e,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules");makeSymbol("__intlifyMeta");const InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject$4(e))return e;for(const n in e)if(!!hasOwn(e,n))if(!n.includes("."))isObject$4(e[n])&&handleFlatJson(e[n]);else{const r=n.split("."),o=r.length-1;let s=e,u=!1;for(let d=0;d<o;d++){if(r[d]in s||(s[r[d]]={}),!isObject$4(s[r[d]])){u=!0;break}s=s[r[d]]}u||(s[r[o]]=e[n],delete e[n]),isObject$4(s[r[o]])&&handleFlatJson(s[r[o]])}return e}function getLocaleMessages(e,n){const{messages:r,__i18n:o,messageResolver:s,flatJson:u}=n,d=isPlainObject$3(r)?r:isArray$3(o)?{}:{[e]:{}};if(isArray$3(o)&&o.forEach(f=>{if("locale"in f&&"resource"in f){const{locale:g,resource:m}=f;g?(d[g]=d[g]||{},deepCopy(m,d[g])):deepCopy(m,d)}else isString$3(f)&&deepCopy(JSON.parse(f),d)}),s==null&&u)for(const f in d)hasOwn(d,f)&&handleFlatJson(d[f]);return d}function getComponentOptions(e){return e.type}function adjustI18nResources(e,n,r){let o=isObject$4(n.messages)?n.messages:{};"__i18nGlobal"in r&&(o=getLocaleMessages(e.locale.value,{messages:o,__i18n:r.__i18nGlobal}));const s=Object.keys(o);s.length&&s.forEach(u=>{e.mergeLocaleMessage(u,o[u])});{if(isObject$4(n.datetimeFormats)){const u=Object.keys(n.datetimeFormats);u.length&&u.forEach(d=>{e.mergeDateTimeFormat(d,n.datetimeFormats[d])})}if(isObject$4(n.numberFormats)){const u=Object.keys(n.numberFormats);u.length&&u.forEach(d=>{e.mergeNumberFormat(d,n.numberFormats[d])})}}}function createTextNode(e){return createVNode(Text$2,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(e){return(n,r,o,s)=>e(r,o,getCurrentInstance()||void 0,s)}const getMetaInfo=()=>{const e=getCurrentInstance();let n=null;return e&&(n=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(e={},n){const{__root:r,__injectWithOption:o}=e,s=r===void 0,u=e.flatJson,d=inBrowser$1?ref:shallowRef,f=!!e.translateExistCompatible;let g=isBoolean(e.inheritLocale)?e.inheritLocale:!0;const m=d(r&&g?r.locale.value:isString$3(e.locale)?e.locale:DEFAULT_LOCALE),y=d(r&&g?r.fallbackLocale.value:isString$3(e.fallbackLocale)||isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:m.value),v=d(getLocaleMessages(m.value,e)),_=d(isPlainObject$3(e.datetimeFormats)?e.datetimeFormats:{[m.value]:{}}),w=d(isPlainObject$3(e.numberFormats)?e.numberFormats:{[m.value]:{}});let x=r?r.missingWarn:isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,k=r?r.fallbackWarn:isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,S=r?r.fallbackRoot:isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,M=!!e.fallbackFormat,E=isFunction$2(e.missing)?e.missing:null,P=isFunction$2(e.missing)?defineCoreMissingHandler(e.missing):null,T=isFunction$2(e.postTranslation)?e.postTranslation:null,D=r?r.warnHtmlMessage:isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,F=!!e.escapeParameter;const I=r?r.modifiers:isPlainObject$3(e.modifiers)?e.modifiers:{};let N=e.pluralRules||r&&r.pluralRules,q;q=(()=>{s&&setFallbackContext(null);const Re={version:VERSION$1,locale:m.value,fallbackLocale:y.value,messages:v.value,modifiers:I,pluralRules:N,missing:P===null?void 0:P,missingWarn:x,fallbackWarn:k,fallbackFormat:M,unresolving:!0,postTranslation:T===null?void 0:T,warnHtmlMessage:D,escapeParameter:F,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};Re.datetimeFormats=_.value,Re.numberFormats=w.value,Re.__datetimeFormatters=isPlainObject$3(q)?q.__datetimeFormatters:void 0,Re.__numberFormatters=isPlainObject$3(q)?q.__numberFormatters:void 0;const Oe=createCoreContext(Re);return s&&setFallbackContext(Oe),Oe})(),updateFallbackLocale(q,m.value,y.value);function Z(){return[m.value,y.value,v.value,_.value,w.value]}const j=computed({get:()=>m.value,set:Re=>{m.value=Re,q.locale=m.value}}),ne=computed({get:()=>y.value,set:Re=>{y.value=Re,q.fallbackLocale=y.value,updateFallbackLocale(q,m.value,Re)}}),le=computed(()=>v.value),J=computed(()=>_.value),O=computed(()=>w.value);function U(){return isFunction$2(T)?T:null}function W(Re){T=Re,q.postTranslation=Re}function H(){return E}function X(Re){Re!==null&&(P=defineCoreMissingHandler(Re)),E=Re,q.missing=P}const Q=(Re,Oe,je,We,Ze,Xe)=>{Z();let Ge;try{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(getMetaInfo()),s||(q.fallbackContext=r?getFallbackContext():void 0),Ge=Re(q)}finally{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(null),s||(q.fallbackContext=void 0)}if(je!=="translate exists"&&isNumber$1(Ge)&&Ge===NOT_REOSLVED||je==="translate exists"&&!Ge){const[Qe,rt]=Oe();return r&&S?We(r):Ze(Qe)}else{if(Xe(Ge))return Ge;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function fe(...Re){return Q(Oe=>Reflect.apply(translate,null,[Oe,...Re]),()=>parseTranslateArgs(...Re),"translate",Oe=>Reflect.apply(Oe.t,Oe,[...Re]),Oe=>Oe,Oe=>isString$3(Oe))}function Se(...Re){const[Oe,je,We]=Re;if(We&&!isObject$4(We))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return fe(Oe,je,assign$2({resolvedMessage:!0},We||{}))}function Pe(...Re){return Q(Oe=>Reflect.apply(datetime,null,[Oe,...Re]),()=>parseDateTimeArgs(...Re),"datetime format",Oe=>Reflect.apply(Oe.d,Oe,[...Re]),()=>MISSING_RESOLVE_VALUE,Oe=>isString$3(Oe))}function $e(...Re){return Q(Oe=>Reflect.apply(number,null,[Oe,...Re]),()=>parseNumberArgs(...Re),"number format",Oe=>Reflect.apply(Oe.n,Oe,[...Re]),()=>MISSING_RESOLVE_VALUE,Oe=>isString$3(Oe))}function Ie(Re){return Re.map(Oe=>isString$3(Oe)||isNumber$1(Oe)||isBoolean(Oe)?createTextNode(String(Oe)):Oe)}const Be={normalize:Ie,interpolate:Re=>Re,type:"vnode"};function be(...Re){return Q(Oe=>{let je;const We=Oe;try{We.processor=Be,je=Reflect.apply(translate,null,[We,...Re])}finally{We.processor=null}return je},()=>parseTranslateArgs(...Re),"translate",Oe=>Oe[TranslateVNodeSymbol](...Re),Oe=>[createTextNode(Oe)],Oe=>isArray$3(Oe))}function Ve(...Re){return Q(Oe=>Reflect.apply(number,null,[Oe,...Re]),()=>parseNumberArgs(...Re),"number format",Oe=>Oe[NumberPartsSymbol](...Re),NOOP_RETURN_ARRAY,Oe=>isString$3(Oe)||isArray$3(Oe))}function De(...Re){return Q(Oe=>Reflect.apply(datetime,null,[Oe,...Re]),()=>parseDateTimeArgs(...Re),"datetime format",Oe=>Oe[DatetimePartsSymbol](...Re),NOOP_RETURN_ARRAY,Oe=>isString$3(Oe)||isArray$3(Oe))}function ve(Re){N=Re,q.pluralRules=N}function ye(Re,Oe){return Q(()=>{if(!Re)return!1;const je=isString$3(Oe)?Oe:m.value,We=Me(je),Ze=q.messageResolver(We,Re);return f?Ze!=null:isMessageAST(Ze)||isMessageFunction(Ze)||isString$3(Ze)},()=>[Re],"translate exists",je=>Reflect.apply(je.te,je,[Re,Oe]),NOOP_RETURN_FALSE,je=>isBoolean(je))}function we(Re){let Oe=null;const je=fallbackWithLocaleChain(q,y.value,m.value);for(let We=0;We<je.length;We++){const Ze=v.value[je[We]]||{},Xe=q.messageResolver(Ze,Re);if(Xe!=null){Oe=Xe;break}}return Oe}function ke(Re){const Oe=we(Re);return Oe!=null?Oe:r?r.tm(Re)||{}:{}}function Me(Re){return v.value[Re]||{}}function Le(Re,Oe){if(u){const je={[Re]:Oe};for(const We in je)hasOwn(je,We)&&handleFlatJson(je[We]);Oe=je[Re]}v.value[Re]=Oe,q.messages=v.value}function Fe(Re,Oe){v.value[Re]=v.value[Re]||{};const je={[Re]:Oe};if(u)for(const We in je)hasOwn(je,We)&&handleFlatJson(je[We]);Oe=je[Re],deepCopy(Oe,v.value[Re]),q.messages=v.value}function ze(Re){return _.value[Re]||{}}function te(Re,Oe){_.value[Re]=Oe,q.datetimeFormats=_.value,clearDateTimeFormat(q,Re,Oe)}function oe(Re,Oe){_.value[Re]=assign$2(_.value[Re]||{},Oe),q.datetimeFormats=_.value,clearDateTimeFormat(q,Re,Oe)}function _e(Re){return w.value[Re]||{}}function Ce(Re,Oe){w.value[Re]=Oe,q.numberFormats=w.value,clearNumberFormat(q,Re,Oe)}function Ee(Re,Oe){w.value[Re]=assign$2(w.value[Re]||{},Oe),q.numberFormats=w.value,clearNumberFormat(q,Re,Oe)}composerID++,r&&inBrowser$1&&(watch(r.locale,Re=>{g&&(m.value=Re,q.locale=Re,updateFallbackLocale(q,m.value,y.value))}),watch(r.fallbackLocale,Re=>{g&&(y.value=Re,q.fallbackLocale=Re,updateFallbackLocale(q,m.value,y.value))}));const Te={id:composerID,locale:j,fallbackLocale:ne,get inheritLocale(){return g},set inheritLocale(Re){g=Re,Re&&r&&(m.value=r.locale.value,y.value=r.fallbackLocale.value,updateFallbackLocale(q,m.value,y.value))},get availableLocales(){return Object.keys(v.value).sort()},messages:le,get modifiers(){return I},get pluralRules(){return N||{}},get isGlobal(){return s},get missingWarn(){return x},set missingWarn(Re){x=Re,q.missingWarn=x},get fallbackWarn(){return k},set fallbackWarn(Re){k=Re,q.fallbackWarn=k},get fallbackRoot(){return S},set fallbackRoot(Re){S=Re},get fallbackFormat(){return M},set fallbackFormat(Re){M=Re,q.fallbackFormat=M},get warnHtmlMessage(){return D},set warnHtmlMessage(Re){D=Re,q.warnHtmlMessage=Re},get escapeParameter(){return F},set escapeParameter(Re){F=Re,q.escapeParameter=Re},t:fe,getLocaleMessage:Me,setLocaleMessage:Le,mergeLocaleMessage:Fe,getPostTranslationHandler:U,setPostTranslationHandler:W,getMissingHandler:H,setMissingHandler:X,[SetPluralRulesSymbol]:ve};return Te.datetimeFormats=J,Te.numberFormats=O,Te.rt=Se,Te.te=ye,Te.tm=ke,Te.d=Pe,Te.n=$e,Te.getDateTimeFormat=ze,Te.setDateTimeFormat=te,Te.mergeDateTimeFormat=oe,Te.getNumberFormat=_e,Te.setNumberFormat=Ce,Te.mergeNumberFormat=Ee,Te[InejctWithOptionSymbol]=o,Te[TranslateVNodeSymbol]=be,Te[DatetimePartsSymbol]=De,Te[NumberPartsSymbol]=Ve,Te}function convertComposerOptions(e){const n=isString$3(e.locale)?e.locale:DEFAULT_LOCALE,r=isString$3(e.fallbackLocale)||isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n,o=isFunction$2(e.missing)?e.missing:void 0,s=isBoolean(e.silentTranslationWarn)||isRegExp(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,u=isBoolean(e.silentFallbackWarn)||isRegExp(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,d=isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,f=!!e.formatFallbackMessages,g=isPlainObject$3(e.modifiers)?e.modifiers:{},m=e.pluralizationRules,y=isFunction$2(e.postTranslation)?e.postTranslation:void 0,v=isString$3(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,_=!!e.escapeParameterHtml,w=isBoolean(e.sync)?e.sync:!0;let x=e.messages;if(isPlainObject$3(e.sharedMessages)){const F=e.sharedMessages;x=Object.keys(F).reduce((N,q)=>{const Y=N[q]||(N[q]={});return assign$2(Y,F[q]),N},x||{})}const{__i18n:k,__root:S,__injectWithOption:M}=e,E=e.datetimeFormats,P=e.numberFormats,T=e.flatJson,D=e.translateExistCompatible;return{locale:n,fallbackLocale:r,messages:x,flatJson:T,datetimeFormats:E,numberFormats:P,missing:o,missingWarn:s,fallbackWarn:u,fallbackRoot:d,fallbackFormat:f,modifiers:g,pluralRules:m,postTranslation:y,warnHtmlMessage:v,escapeParameter:_,messageResolver:e.messageResolver,inheritLocale:w,translateExistCompatible:D,__i18n:k,__root:S,__injectWithOption:M}}function createVueI18n(e={},n){{const r=createComposer(convertComposerOptions(e)),{__extender:o}=e,s={id:r.id,get locale(){return r.locale.value},set locale(u){r.locale.value=u},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(u){r.fallbackLocale.value=u},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(u){},get missing(){return r.getMissingHandler()},set missing(u){r.setMissingHandler(u)},get silentTranslationWarn(){return isBoolean(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(u){r.missingWarn=isBoolean(u)?!u:u},get silentFallbackWarn(){return isBoolean(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(u){r.fallbackWarn=isBoolean(u)?!u:u},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(u){r.fallbackFormat=u},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(u){r.setPostTranslationHandler(u)},get sync(){return r.inheritLocale},set sync(u){r.inheritLocale=u},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(u){r.warnHtmlMessage=u!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(u){r.escapeParameter=u},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(u){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...u){const[d,f,g]=u,m={};let y=null,v=null;if(!isString$3(d))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const _=d;return isString$3(f)?m.locale=f:isArray$3(f)?y=f:isPlainObject$3(f)&&(v=f),isArray$3(g)?y=g:isPlainObject$3(g)&&(v=g),Reflect.apply(r.t,r,[_,y||v||{},m])},rt(...u){return Reflect.apply(r.rt,r,[...u])},tc(...u){const[d,f,g]=u,m={plural:1};let y=null,v=null;if(!isString$3(d))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const _=d;return isString$3(f)?m.locale=f:isNumber$1(f)?m.plural=f:isArray$3(f)?y=f:isPlainObject$3(f)&&(v=f),isString$3(g)?m.locale=g:isArray$3(g)?y=g:isPlainObject$3(g)&&(v=g),Reflect.apply(r.t,r,[_,y||v||{},m])},te(u,d){return r.te(u,d)},tm(u){return r.tm(u)},getLocaleMessage(u){return r.getLocaleMessage(u)},setLocaleMessage(u,d){r.setLocaleMessage(u,d)},mergeLocaleMessage(u,d){r.mergeLocaleMessage(u,d)},d(...u){return Reflect.apply(r.d,r,[...u])},getDateTimeFormat(u){return r.getDateTimeFormat(u)},setDateTimeFormat(u,d){r.setDateTimeFormat(u,d)},mergeDateTimeFormat(u,d){r.mergeDateTimeFormat(u,d)},n(...u){return Reflect.apply(r.n,r,[...u])},getNumberFormat(u){return r.getNumberFormat(u)},setNumberFormat(u,d){r.setNumberFormat(u,d)},mergeNumberFormat(u,d){r.mergeNumberFormat(u,d)},getChoiceIndex(u,d){return-1}};return s.__extender=o,s}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},n){return n.length===1&&n[0]==="default"?(e.default?e.default():[]).reduce((o,s)=>[...o,...s.type===Fragment?s.children:[s]],[]):n.reduce((r,o)=>{const s=e[o];return s&&(r[o]=s()),r},{})}function getFragmentableTag(e){return Fragment}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$2({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber$1(e)||!isNaN(e)}},baseFormatProps),setup(e,n){const{slots:r,attrs:o}=n,s=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const u=Object.keys(r).filter(v=>v!=="_"),d={};e.locale&&(d.locale=e.locale),e.plural!==void 0&&(d.plural=isString$3(e.plural)?+e.plural:e.plural);const f=getInterpolateArg(n,u),g=s[TranslateVNodeSymbol](e.keypath,f,d),m=assign$2({},o),y=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return h$1(y,m,g)}}}),Translation=TranslationImpl;function isVNode(e){return isArray$3(e)&&!isString$3(e[0])}function renderFormatter(e,n,r,o){const{slots:s,attrs:u}=n;return()=>{const d={part:!0};let f={};e.locale&&(d.locale=e.locale),isString$3(e.format)?d.key=e.format:isObject$4(e.format)&&(isString$3(e.format.key)&&(d.key=e.format.key),f=Object.keys(e.format).reduce((_,w)=>r.includes(w)?assign$2({},_,{[w]:e.format[w]}):_,{}));const g=o(e.value,d,f);let m=[d.key];isArray$3(g)?m=g.map((_,w)=>{const x=s[_.type],k=x?x({[_.type]:_.value,index:w,parts:g}):[_.value];return isVNode(k)&&(k[0].key=`${_.type}-${w}`),k}):isString$3(g)&&(m=[g]);const y=assign$2({},u),v=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return h$1(v,y,m)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$2({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,n,NUMBER_FORMAT_OPTIONS_KEYS,(...o)=>r[NumberPartsSymbol](...o))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$2({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,n,DATETIME_FORMAT_OPTIONS_KEYS,(...o)=>r[DatetimePartsSymbol](...o))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(e,n){const r=e;if(e.mode==="composition")return r.__getInstance(n)||e.global;{const o=r.__getInstance(n);return o!=null?o.__composer:e.global.__composer}}function vTDirective(e){const n=d=>{const{instance:f,modifiers:g,value:m}=d;if(!f||!f.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const y=getComposer$2(e,f.$),v=parseValue(m);return[Reflect.apply(y.t,y,[...makeParams(v)]),y]};return{created:(d,f)=>{const[g,m]=n(f);inBrowser$1&&e.global===m&&(d.__i18nWatcher=watch(m.locale,()=>{f.instance&&f.instance.$forceUpdate()})),d.__composer=m,d.textContent=g},unmounted:d=>{inBrowser$1&&d.__i18nWatcher&&(d.__i18nWatcher(),d.__i18nWatcher=void 0,delete d.__i18nWatcher),d.__composer&&(d.__composer=void 0,delete d.__composer)},beforeUpdate:(d,{value:f})=>{if(d.__composer){const g=d.__composer,m=parseValue(f);d.textContent=Reflect.apply(g.t,g,[...makeParams(m)])}},getSSRProps:d=>{const[f]=n(d);return{textContent:f}}}}function parseValue(e){if(isString$3(e))return{path:e};if(isPlainObject$3(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:n,locale:r,args:o,choice:s,plural:u}=e,d={},f=o||{};return isString$3(r)&&(d.locale=r),isNumber$1(s)&&(d.plural=s),isNumber$1(u)&&(d.plural=u),[n,f,d]}function apply$1(e,n,...r){const o=isPlainObject$3(r[0])?r[0]:{},s=!!o.useI18nComponentName;(isBoolean(o.globalInstall)?o.globalInstall:!0)&&([s?"i18n":Translation.name,"I18nT"].forEach(d=>e.component(d,Translation)),[NumberFormat.name,"I18nN"].forEach(d=>e.component(d,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(d=>e.component(d,DatetimeFormat))),e.directive("t",vTDirective(n))}function defineMixin(e,n,r){return{beforeCreate(){const o=getCurrentInstance();if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const u=s.i18n;if(s.__i18n&&(u.__i18n=s.__i18n),u.__root=n,this===this.$root)this.$i18n=mergeToGlobal(e,u);else{u.__injectWithOption=!0,u.__extender=r.__vueI18nExtend,this.$i18n=createVueI18n(u);const d=this.$i18n;d.__extender&&(d.__disposer=d.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(e,s);else{this.$i18n=createVueI18n({__i18n:s.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:n});const u=this.$i18n;u.__extender&&(u.__disposer=u.__extender(this.$i18n))}else this.$i18n=e;s.__i18nGlobal&&adjustI18nResources(n,s,s),this.$t=(...u)=>this.$i18n.t(...u),this.$rt=(...u)=>this.$i18n.rt(...u),this.$tc=(...u)=>this.$i18n.tc(...u),this.$te=(u,d)=>this.$i18n.te(u,d),this.$d=(...u)=>this.$i18n.d(...u),this.$n=(...u)=>this.$i18n.n(...u),this.$tm=u=>this.$i18n.tm(u),r.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=getCurrentInstance();if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),r.__deleteInstance(o),delete this.$i18n}}}function mergeToGlobal(e,n){e.locale=n.locale||e.locale,e.fallbackLocale=n.fallbackLocale||e.fallbackLocale,e.missing=n.missing||e.missing,e.silentTranslationWarn=n.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=n.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=n.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=n.postTranslation||e.postTranslation,e.warnHtmlInMessage=n.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=n.escapeParameterHtml||e.escapeParameterHtml,e.sync=n.sync||e.sync,e.__composer[SetPluralRulesSymbol](n.pluralizationRules||e.pluralizationRules);const r=getLocaleMessages(e.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(r).forEach(o=>e.mergeLocaleMessage(o,r[o])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,n.datetimeFormats[o])),n.numberFormats&&Object.keys(n.numberFormats).forEach(o=>e.mergeNumberFormat(o,n.numberFormats[o])),e}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={},n){const r=__VUE_I18N_LEGACY_API__&&isBoolean(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,o=isBoolean(e.globalInjection)?e.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&r?!!e.allowComposition:!0,u=new Map,[d,f]=createGlobal(e,r),g=makeSymbol("");function m(_){return u.get(_)||null}function y(_,w){u.set(_,w)}function v(_){u.delete(_)}{const _={get mode(){return __VUE_I18N_LEGACY_API__&&r?"legacy":"composition"},get allowComposition(){return s},async install(w,...x){if(w.__VUE_I18N_SYMBOL__=g,w.provide(w.__VUE_I18N_SYMBOL__,_),isPlainObject$3(x[0])){const M=x[0];_.__composerExtend=M.__composerExtend,_.__vueI18nExtend=M.__vueI18nExtend}let k=null;!r&&o&&(k=injectGlobalFields(w,_.global)),__VUE_I18N_FULL_INSTALL__&&apply$1(w,_,...x),__VUE_I18N_LEGACY_API__&&r&&w.mixin(defineMixin(f,f.__composer,_));const S=w.unmount;w.unmount=()=>{k&&k(),_.dispose(),S()}},get global(){return f},dispose(){d.stop()},__instances:u,__getInstance:m,__setInstance:y,__deleteInstance:v};return _}}function useI18n(e={}){const n=getCurrentInstance();if(n==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const r=getI18nInstance(n),o=getGlobalComposer(r),s=getComponentOptions(n),u=getScope(e,s);if(__VUE_I18N_LEGACY_API__&&r.mode==="legacy"&&!e.__useComponent){if(!r.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(n,u,o,e)}if(u==="global")return adjustI18nResources(o,e,s),o;if(u==="parent"){let g=getComposer(r,n,e.__useComponent);return g==null&&(g=o),g}const d=r;let f=d.__getInstance(n);if(f==null){const g=assign$2({},e);"__i18n"in s&&(g.__i18n=s.__i18n),o&&(g.__root=o),f=createComposer(g),d.__composerExtend&&(f[DisposeSymbol]=d.__composerExtend(f)),setupLifeCycle(d,n,f),d.__setInstance(n,f)}return f}function createGlobal(e,n,r){const o=effectScope();{const s=__VUE_I18N_LEGACY_API__&&n?o.run(()=>createVueI18n(e)):o.run(()=>createComposer(e));if(s==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[o,s]}}function getI18nInstance(e){{const n=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}}function getScope(e,n){return isEmptyObject(e)?"__i18n"in n?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return e.mode==="composition"?e.global:e.global.__composer}function getComposer(e,n,r=!1){let o=null;const s=n.root;let u=getParentComponentInstance(n,r);for(;u!=null;){const d=e;if(e.mode==="composition")o=d.__getInstance(u);else if(__VUE_I18N_LEGACY_API__){const f=d.__getInstance(u);f!=null&&(o=f.__composer,r&&o&&!o[InejctWithOptionSymbol]&&(o=null))}if(o!=null||s===u)break;u=u.parent}return o}function getParentComponentInstance(e,n=!1){return e==null?null:n&&e.vnode.ctx||e.parent}function setupLifeCycle(e,n,r){onMounted(()=>{},n),onUnmounted(()=>{const o=r;e.__deleteInstance(n);const s=o[DisposeSymbol];s&&(s(),delete o[DisposeSymbol])},n)}function useI18nForLegacy(e,n,r,o={}){const s=n==="local",u=shallowRef(null);if(s&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const d=isBoolean(o.inheritLocale)?o.inheritLocale:!isString$3(o.locale),f=ref(!s||d?r.locale.value:isString$3(o.locale)?o.locale:DEFAULT_LOCALE),g=ref(!s||d?r.fallbackLocale.value:isString$3(o.fallbackLocale)||isArray$3(o.fallbackLocale)||isPlainObject$3(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:f.value),m=ref(getLocaleMessages(f.value,o)),y=ref(isPlainObject$3(o.datetimeFormats)?o.datetimeFormats:{[f.value]:{}}),v=ref(isPlainObject$3(o.numberFormats)?o.numberFormats:{[f.value]:{}}),_=s?r.missingWarn:isBoolean(o.missingWarn)||isRegExp(o.missingWarn)?o.missingWarn:!0,w=s?r.fallbackWarn:isBoolean(o.fallbackWarn)||isRegExp(o.fallbackWarn)?o.fallbackWarn:!0,x=s?r.fallbackRoot:isBoolean(o.fallbackRoot)?o.fallbackRoot:!0,k=!!o.fallbackFormat,S=isFunction$2(o.missing)?o.missing:null,M=isFunction$2(o.postTranslation)?o.postTranslation:null,E=s?r.warnHtmlMessage:isBoolean(o.warnHtmlMessage)?o.warnHtmlMessage:!0,P=!!o.escapeParameter,T=s?r.modifiers:isPlainObject$3(o.modifiers)?o.modifiers:{},D=o.pluralRules||s&&r.pluralRules;function F(){return[f.value,g.value,m.value,y.value,v.value]}const I=computed({get:()=>u.value?u.value.locale.value:f.value,set:we=>{u.value&&(u.value.locale.value=we),f.value=we}}),N=computed({get:()=>u.value?u.value.fallbackLocale.value:g.value,set:we=>{u.value&&(u.value.fallbackLocale.value=we),g.value=we}}),q=computed(()=>u.value?u.value.messages.value:m.value),Y=computed(()=>y.value),Z=computed(()=>v.value);function j(){return u.value?u.value.getPostTranslationHandler():M}function ne(we){u.value&&u.value.setPostTranslationHandler(we)}function le(){return u.value?u.value.getMissingHandler():S}function J(we){u.value&&u.value.setMissingHandler(we)}function O(we){return F(),we()}function U(...we){return u.value?O(()=>Reflect.apply(u.value.t,null,[...we])):O(()=>"")}function W(...we){return u.value?Reflect.apply(u.value.rt,null,[...we]):""}function H(...we){return u.value?O(()=>Reflect.apply(u.value.d,null,[...we])):O(()=>"")}function X(...we){return u.value?O(()=>Reflect.apply(u.value.n,null,[...we])):O(()=>"")}function Q(we){return u.value?u.value.tm(we):{}}function fe(we,ke){return u.value?u.value.te(we,ke):!1}function Se(we){return u.value?u.value.getLocaleMessage(we):{}}function Pe(we,ke){u.value&&(u.value.setLocaleMessage(we,ke),m.value[we]=ke)}function $e(we,ke){u.value&&u.value.mergeLocaleMessage(we,ke)}function Ie(we){return u.value?u.value.getDateTimeFormat(we):{}}function Ne(we,ke){u.value&&(u.value.setDateTimeFormat(we,ke),y.value[we]=ke)}function Be(we,ke){u.value&&u.value.mergeDateTimeFormat(we,ke)}function be(we){return u.value?u.value.getNumberFormat(we):{}}function Ve(we,ke){u.value&&(u.value.setNumberFormat(we,ke),v.value[we]=ke)}function De(we,ke){u.value&&u.value.mergeNumberFormat(we,ke)}const ve={get id(){return u.value?u.value.id:-1},locale:I,fallbackLocale:N,messages:q,datetimeFormats:Y,numberFormats:Z,get inheritLocale(){return u.value?u.value.inheritLocale:d},set inheritLocale(we){u.value&&(u.value.inheritLocale=we)},get availableLocales(){return u.value?u.value.availableLocales:Object.keys(m.value)},get modifiers(){return u.value?u.value.modifiers:T},get pluralRules(){return u.value?u.value.pluralRules:D},get isGlobal(){return u.value?u.value.isGlobal:!1},get missingWarn(){return u.value?u.value.missingWarn:_},set missingWarn(we){u.value&&(u.value.missingWarn=we)},get fallbackWarn(){return u.value?u.value.fallbackWarn:w},set fallbackWarn(we){u.value&&(u.value.missingWarn=we)},get fallbackRoot(){return u.value?u.value.fallbackRoot:x},set fallbackRoot(we){u.value&&(u.value.fallbackRoot=we)},get fallbackFormat(){return u.value?u.value.fallbackFormat:k},set fallbackFormat(we){u.value&&(u.value.fallbackFormat=we)},get warnHtmlMessage(){return u.value?u.value.warnHtmlMessage:E},set warnHtmlMessage(we){u.value&&(u.value.warnHtmlMessage=we)},get escapeParameter(){return u.value?u.value.escapeParameter:P},set escapeParameter(we){u.value&&(u.value.escapeParameter=we)},t:U,getPostTranslationHandler:j,setPostTranslationHandler:ne,getMissingHandler:le,setMissingHandler:J,rt:W,d:H,n:X,tm:Q,te:fe,getLocaleMessage:Se,setLocaleMessage:Pe,mergeLocaleMessage:$e,getDateTimeFormat:Ie,setDateTimeFormat:Ne,mergeDateTimeFormat:Be,getNumberFormat:be,setNumberFormat:Ve,mergeNumberFormat:De};function ye(we){we.locale.value=f.value,we.fallbackLocale.value=g.value,Object.keys(m.value).forEach(ke=>{we.mergeLocaleMessage(ke,m.value[ke])}),Object.keys(y.value).forEach(ke=>{we.mergeDateTimeFormat(ke,y.value[ke])}),Object.keys(v.value).forEach(ke=>{we.mergeNumberFormat(ke,v.value[ke])}),we.escapeParameter=P,we.fallbackFormat=k,we.fallbackRoot=x,we.fallbackWarn=w,we.missingWarn=_,we.warnHtmlMessage=E}return onBeforeMount(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const we=u.value=e.proxy.$i18n.__composer;n==="global"?(f.value=we.locale.value,g.value=we.fallbackLocale.value,m.value=we.messages.value,y.value=we.datetimeFormats.value,v.value=we.numberFormats.value):s&&ye(we)}),ve}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(e,n){const r=Object.create(null);return globalExportProps.forEach(s=>{const u=Object.getOwnPropertyDescriptor(n,s);if(!u)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const d=isRef(u.value)?{get(){return u.value.value},set(f){u.value.value=f}}:{get(){return u.get&&u.get()}};Object.defineProperty(r,s,d)}),e.config.globalProperties.$i18n=r,globalExportMethods.forEach(s=>{const u=Object.getOwnPropertyDescriptor(n,s);if(!u||!u.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${s}`,u)}),()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach(s=>{delete e.config.globalProperties[`$${s}`]})}}initFeatureFlags();__INTLIFY_JIT_COMPILATION__?registerMessageCompiler(compile):registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);if(__INTLIFY_PROD_DEVTOOLS__){const e=getGlobalThis();e.__INTLIFY__=!0,setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const header$5={leftPanel:"Left Panel",fullScreen:"Full Screen",pan:"Pan",cropPage:"Snip",zoomIn:"Zoom In",zoomOut:"Zoom Out",light:"Light",dark:"Dark",lightMode:"Light Mode",darkMode:"Dark Mode",viewer:"Viewer",annotations:"Annotations",forms:"Forms",signatures:"Signatures",security:"Security",compare:"Compare Documents",editor:"Content Editor",document:"Document Editor",separation:"Color Separation",measurement:"Measurement",note:"Note",highlight:"Highlight",underline:"Underline",strikeout:"Strikeout",squiggly:"Squiggly",ink:"Ink",circle:"Circle",square:"Square",arrow:"Arrow",line:"Line",freetext:"Free Text",stamp:"Stamp",image:"Image",link:"Link",textField:"Text Field",checkbox:"Check Box",radioButton:"Radio Button",listBox:"List Box",comboButton:"Combo Button",button:"Push Button",openFile:"Open File",search:"Search",rightPanel:"Right Panel",viewSetting:"View Setting",download:"Download",flatten:"Save as Flattened PDF",print:"Print",settings:{settings:"Settings",author:"Author",annotator:"Annotator",language:"Language",highlightLink:"Highlight Link",highlightForm:"Highlight Form",fillConsecutively:"Fill in consecutively",creationInfo:"Creation Information",version:"Version"},addText:"Add Text",addImage:"Add Image",undo:"Undo",redo:"Redo",createSignField:"Create Signature Field",addDigitalSign:"Add Digital Signature",addElectronicSign:"Add Electronic Signature",verifyDigitalSign:"Verify Digital Signature",measureLine:"Line",measureMultiline:"Multiline",measurePolygon:"Polygon",measureRectangle:"Rectangle",measureCircle:"Circle"},nextPage$6="Next",previousPage$6="Previous",loading$5="Loading",upload$5="Upload",exit$5="Exit",leftPanel$5={thumbnails:"Thumbnails",outlines:"Outlines",noOutlines:"No Outlines",layers:"Layers",noLayers:"No Layers",menu:"Menu",showAll:"Show All",hideAll:"Hide All",restoreSettings:"Restore Default Settings",exportLayers:"Export File Layers",layerProperty:"Layer Property",exportLayer:"Export This Layer",annotations:"Annotations",noAnnotations:"No Annotations",importAnnotations:"Import Annotations",exportAnnotations:"Export Annotations",search:"Search",searchPdf:"Search PDF",page:"Page",whichPage:["Page",""],previousPhrase:"Find the previous occurrence of the phrase",nextPhrase:"Find the next occurrence of the phrase",results:"Results",noResults:"No results",signature:"Signature",signatureList:"Signature List",signatureDetails:"Signature Details",certificationDetails:"Certification Details",noSignatures:"No Signatures",marked:"Marked",unmarked:"Unmarked",accepted:"Accepted",rejected:"Rejected",cancelled:"Cancelled",completed:"Completed",none:"None",edit:"Edit",delete:"Delete",replyPlaceholder:"Reply or add thoughts",reply:"Reply",confirm:"Confirm"},pageModePanel$5={displayMode:"Display Mode",singlePage:"Single Page",twoPages:"Two Pages",coverMode:"Cover Mode",splitView:"Scroll",vertical:"Vertical Scrolling",horizontal:"Horizontal Scrolling",themes:"Themes"},stampPanel$5={standard:"Standard",dynamic:"Dynamic"},linkPanel$5={linkTo:"Link to",url:"URL",goToPages:"Go To Pages",email:"Email",go:"Go"},rightPanel$5={general:"General",name:"Name",formField:"Form Field",visible:"Visible",hidden:"Hidden",properties:"Properties",requried:"Requried",differentNameError:"Please choose a different name.",buttonText:"Button Text",appearance:"Appearance",backgroundColor:"Background Color",preferences:"Preferences",alignment:"Alignment",left:"Left",center:"Center",right:"Right",defaultValue:"Default Value",multiLine:"Multi-line",buttonStyle:"Button Style",check:"Check",circle:"Circle",cross:"Cross",diamond:"Diamond",square:"Square",star:"Star",defaultChecked:"Button is checked by default",item:"Item",itemList:"Item List",option:"Item",selectAction:"Select Action",none:"None",goPage:"Go To Pages",openLink:"Open a Web Link",addUrl:"Add URL",addPage:"Add Page",radioBtnTip1:"1 button in group. At lease 2 buttons needed.",radioBtnTip2:"To create a set of mutualy exclusive radio buttons (i.e., where only one can be selected at a time), please give the fields the same name.",listBoxTip:"Select an item in the item list to make it the default option."},prevent$5={title:"Not Available in Server-Backed",standalone:"Standalone",description:"Content Editor is only available on Standalone. Change to Standalone to edit PDF content.",description1:"Document Editor is only available on Standalone. Change to Standalone to edit PDF pages."},passwordDialog$5={enterPwd:"Enter the Password to View the Document",enterPwdPlaceholder:"Please Enter the Password",wrongPwd:"Wrong Password",encryptPdf:"Encrypt Your PDF",encrypt:"Encrypt",supportTip:"Support: Numbers, letters, {'@'}, $, !, %, ?, & ",removePwdSuccess:"Password Removed Successfully!",removePwdFailure:"Failed to Remove the Password.",setPwdSuccess:"Set the Password for the File Successfully!",setPwdFailure:"Failed to Set Passwords for this Document.",note:["Note\uFF1A","- All changes will take effect after downloading.","- You can reset your password anytime before downloading."]},ok$5="OK",cancel$5="Cancel",signatures$5={tip:"Please create a signature field first, then select the type of signature.",trackpad:"Trackpad",lineWidth:"Line Width",keyboard:"Keyboard",signHere:"Sign Here",image:"Image",selectFile:"Select a File",none:"None",clear:"Clear",save:"Save and Apply",uploadError:"Please upload images less than 1MB",selectTypeDialog:{selectType:"Select Signature Type",signWithElectronic:"Sign with Electronic Signatures",signWithElectronicDesc:"Draw, type, or upload image signatures to sign files.",signWithDigital:"Sign with Digital Signatures",signWithDigitalDesc:"Create or upload a digital certificate with a unique digital ID to sign files.",startSigning:"Start Signing"},detailsDialog:{title:"Digital Signature Details",signBy:"Valid signature, signed by ",signingTime:"Signing Time",validitySummary:"Validity Summary",validIdentity:"The signer's identity is valid.",invalidIdentity:"The signer's identity is invalid.",unknownIdentity:"Signature validity is unknown because it has not been included in your list of trusted certificates and none of its parent certificates are trusted certificates.",expiredCertificate:"The file was signed with a certificate that has expired. If you acquired this file recently, it may not be authentic.",validSignature:"The signature is valid.",invalidSignature:"The signature is invalid.",notModifiedDoc:"The document has not been modified since this signature was applied.",alteredDoc:"The document has been altered or corrupted since it was signed by the current user.",viewCertificateDetails:"View Certificate Details",unknownSignature:"Signature validity is unknown.",atLeastOneInvalid:"At least one signature is invalid.",viewAllSignatures:"View All Signatures"},certificateViewerDialog:{title:"Certificate Viewer",abstracts:"Abstracts",summary:"Summary",issuedTo:"Issued to:",issuer:"Issuer:",validFrom:"Valid from:",validTo:"Valid to:",intendedUsage:"Intended Usage:",details:"Details",version:"Version",algorithm:"Algorithm",subject:"Subject",serialNumber:"Serial Number",certificatePolicy:"Certificate Policy:",crlDistributionPoints:"CRL Distribution Points:",issuerInfoAccess:"Issuer Information Access:",issuerKeyIdentifier:"Issuer\u2018s Key Identifier:",subjectKeyIdentifier:"Subject\u2018s Key Identifier:",basicConstraints:"Basic Constraints:",keyUsage:"Key Usage:",publicKey:"Public Key:",X509:"X.509 Data:",SHA1Digest:"SHA1 Digest:",MD5Digest:"MD5 Digest:",trust:"Trust",trustedTo:"This Certificate Is Trusted to:",sign:"Sign document or data",certify:"Certify document",addToTrust:"Add to Trusted Certificates",done:"Done"},deleteConfirm:"Are you sure to delete it?",addDigitalFileDialog:{title:"Add a Digital ID",desc:"Browse a digital ID file. Digital IDs are password-protected. If you do not know the password, you cannot obtain a digital ID.",certificateFile:"Certificate File",uploadFile:"Upload certificate file",upload:"Upload",password:"Password",enterPassword:"Enter the password of the certificate file",invalidPassword:"Invalid Password"},appearanceDialog:{title:"Customize the Signature Appearance",signHere:"Sign Here!",includeText:"Include Text",name:"Name",dName:"Distinguishable name",date:"Date",ComPDFKitVersion:"ComPDFKit Version",logo:"Logo",location:"Location",reason:"Reason",signReason:"Reason",docOwner:"I am the owner of the document",approvingDoc:"I am approving the document",reviewedDoc:"I have reviewed this document",labels:"Labels",text:"Text",type:"Type",textAlignment:"Text Alignment"}},color$5="Color",opacity$5="Opacity",font$5="Font",regular$5="Regular",oblique$5="Oblique",bold$5="Bold",boldOblique$5="Bold Oblique",warning$4="Warning",colon$4=": ",compare$6={startCompare:"Start to Compare",exit:"Exit",oldFile:"Old File",newFile:"New File",dropFile:["Drop a PDF file here","or"],chooseOldFile:"Choose Your Old File",chooseNewFile:"Choose Your New File",comingSoon:"The Comparison Results Are Coming Soon!",contentComparison:"Content Comparison",compareItems:"Compare Items",text:"Text",images:"Images",colorMark:"Color to Mark differences",replacedContent:"Replaced Content",insertedContent:"Inserted Content",deletedContent:"Deleted Content",overlayComparison:"Overlay Comparison",blendMode:"Blend Mode",normal:"Normal",multiply:"Multiply",screen:"Screen",overlay:"Overlay",darken:"Darken",lighten:"Lighten",colorDodge:"ColorDodge",colorBurn:"ColorBurn",hardLight:"HardLight",softLight:"SoftLight",difference:"Difference",exclusion:"Exclusion",hue:"Hue",saturation:"Saturation",colour:"Colour",luminosity:"Luminosity",return:"Return",compare:"Compare",downloadOptions:"Select an Output Option",downloadTwoFiles:"Save and Download Separately",downloadOneFile:"Merge into One File",printSetting:"Print Setting",printOldFile:"Print the comparison result of the old file",printNewFile:"Print the comparison result of the new file",byComPDFKit:"Comparison Results by ComPDFKit"},editorPanel$5={textProp:"Text Properties",fontColor:"Font Color",textStyle:"Text Style",spacing:"Spacing",characterSpacing:"Character Spacing",lineSpacing:"Line Spacing",paragraphSpacing:"Paragraph Spacing",imageProp:"Image Properties",rotate:"Rotate",rotateLeft:"Rotate Left",rotateRight:"Rotate Right",flip:"Flip",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",tools:"Tools",replace:"Replace",export:"Export",crop:"Crop",maximum:"Maximum upload image size: 2MB."},documentEditor$5={save:"Save",saveAs:"Save As...",insert:"Insert",delete:"Delete",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",copy:"Copy",extract:"Extract",replace:"Replace",move:"Move",selectAll:"Select All",dialog:{insertPages:"Insert Pages",blankPage:"Blank Page",customPage:"Custom Blank Page",fromPdf:"From PDF",selectFile:"Select a File",pageRange:"Page Range",allPages:"All Pages",oddPage:"Odd Pages Only",evenPage:"Even Pages Only",customRange:"Custom Range",insertTo:"Insert to",firstPage:"First Page",lastPage:"Last Page",page:"Page",pageTip:"e.g. 3, 5-10",before:"Before",after:"After"},deleteConfirmText:"Do you want to delete page",eachPage:"Each page in a separate file",deleteAfter:"Delete page after extraction",moveTo:"Move after page:",inputPageTip:"Input 0 to maximum page number"},paste$5="Paste",properties$5="Properties",security$5={pwdProtection:"Password Protection",encryption:"Encryption",decryption:"Decryption",redaction:"Redaction",fillBlack:"Fill Black",fillWhite:"Fill White",caution:"Caution",enterTip:"The redacted content will be permanently removed from this document. Please confirm your action.",understand:"Understand and Start",applyTip:"After applying redactions, the redacted content will be permanently removed.",exit:"Exit",apply:"Apply",note:"Note",exitTip:"Your redactions have not been applied. Are you sure to exit?",exitConfirm:"Exit",saveTip:["All redacted content in this document will be permanently deleted and cannot be recovered.","Are you sure you want to redact them and save the file?"],save:"Save"},layer$5={show:"Show",hide:"Hide",lock:"Lock",unlock:"Unlock",lockedTip:"The current layer is locked. To change its visibility, please unlock it in the layer properties first.",ok:"OK",setProperty:"Set Layer Property",layerProperty:"Layer Property",layerName:"Layer Name",enterLayerName:"Please enter the layer name",defaultSettings:"Default Settings",defaultShow:"Default show when opening files",defaultHide:"Default hide when opening files",lockLayer:"Lock Layer",printProperty:"Print Property",always:"Always",never:"Never",printVisible:"Print when visible",exportProperty:"Export Property",exportVisible:"Export when visible",copyLink:"Copy Link",technicalDoc:"Technical Document"},colorSeparation$5={toggleColor:"Toggle colors",notShowTip:"The color will be not show in document",accessOnPc:"This feature is not available for Mobile, please access on PC for the best experience"},measurement$5={scale:"Scale",length:"Length",precision:"Precision",angle:"Angle",radius:"Radius",perimeter:"Perimeter",area:"Area",reply:"Reply",drawingToActual:"Drawing dimensions: Actual size",settingScale:"Scale",pt:"pt",in:"in",mm:"mm",cm:"cm",m:"m",km:"km",ft:"ft",yd:"yd",mi:"mi",measurementSettings:"Measurement Settings",scaleError:"Scale should be greater than 0.",showCaption:"Show Caption",done:"Done"},measurementPanel$5={appearance:"Appearance",lineWidth:"Line Width",lineColor:"Line Color",fillColor:"Fill Color",lineStyle:"Line and Border Style",start:"Start",end:"End",fontColor:"Font Color",fontStyle:"Font Style",note:"Note"},en={header:header$5,nextPage:nextPage$6,previousPage:previousPage$6,loading:loading$5,upload:upload$5,exit:exit$5,leftPanel:leftPanel$5,pageModePanel:pageModePanel$5,stampPanel:stampPanel$5,linkPanel:linkPanel$5,rightPanel:rightPanel$5,prevent:prevent$5,passwordDialog:passwordDialog$5,ok:ok$5,cancel:cancel$5,continue:"Continue",signatures:signatures$5,color:color$5,opacity:opacity$5,font:font$5,regular:regular$5,oblique:oblique$5,bold:bold$5,boldOblique:boldOblique$5,delete:"Delete",warning:warning$4,colon:colon$4,compare:compare$6,editorPanel:editorPanel$5,documentEditor:documentEditor$5,paste:paste$5,properties:properties$5,security:security$5,layer:layer$5,colorSeparation:colorSeparation$5,measurement:measurement$5,measurementPanel:measurementPanel$5},header$4={leftPanel:"\u5DE6\u4FA7\u9762\u677F",fullScreen:"\u5168\u5C4F",pan:"\u6EDA\u52A8\u5DE5\u5177",cropPage:"\u622A\u53D6",zoomIn:"\u653E\u5927",zoomOut:"\u7F29\u5C0F",light:"\u65E5\u95F4",dark:"\u591C\u95F4",lightMode:"\u65E5\u95F4\u6A21\u5F0F",darkMode:"\u591C\u95F4\u6A21\u5F0F",viewer:"\u67E5\u770B",annotations:"\u6CE8\u91CA",forms:"\u8868\u5355",signatures:"\u7B7E\u540D",security:"\u5B89\u5168",compare:"\u6587\u6863\u5BF9\u6BD4",editor:"\u5185\u5BB9\u7F16\u8F91\u5668",document:"\u9875\u9762\u7F16\u8F91",separation:"\u5206\u8272",measurement:"\u6D4B\u91CF",note:"\u4FBF\u7B7E",highlight:"\u9AD8\u4EAE",underline:"\u4E0B\u5212\u7EBF",strikeout:"\u5220\u9664\u7EBF",squiggly:"\u6CE2\u6D6A\u7EBF",ink:"\u624B\u7ED8",circle:"\u5706",square:"\u77E9\u5F62",arrow:"\u7BAD\u5934",line:"\u7EBF",freetext:"\u6587\u672C",stamp:"\u56FE\u7AE0",image:"\u56FE\u7247",link:"\u94FE\u63A5",textField:"\u6587\u672C\u57DF",checkbox:"\u590D\u9009\u6846",radioButton:"\u5355\u9009\u6309\u94AE",listBox:"\u5217\u8868\u6846",comboButton:"\u4E0B\u62C9\u83DC\u5355",button:"\u6309\u94AE",openFile:"\u4E0A\u4F20\u6587\u6863",search:"\u641C\u7D22",rightPanel:"\u53F3\u4FA7\u9762\u677F",viewSetting:"\u9875\u9762\u663E\u793A",download:"\u4E0B\u8F7D",flatten:"\u5C55\u5E73\u540E\u4E0B\u8F7D",print:"\u6253\u5370",settings:{settings:"\u8BBE\u7F6E",author:"\u6587\u6863\u4F5C\u8005",annotator:"\u6CE8\u91CA\u4F5C\u8005",language:"\u8BED\u8A00\u8BBE\u7F6E",highlightLink:"\u9AD8\u4EAE\u94FE\u63A5",highlightForm:"\u9AD8\u4EAE\u8868\u5355",fillConsecutively:"\u8FDE\u7EED\u586B\u5199",creationInfo:"\u521B\u5EFA\u4FE1\u606F",version:"\u7248\u672C"},addText:"\u6DFB\u52A0\u6587\u5B57",addImage:"\u6DFB\u52A0\u56FE\u7247",undo:"\u64A4\u9500",redo:"\u91CD\u505A",createSignField:"\u6DFB\u52A0\u7B7E\u540D\u57DF",addDigitalSign:"\u6DFB\u52A0\u6570\u5B57\u7B7E\u540D",addElectronicSign:"\u6DFB\u52A0\u7535\u5B50\u7B7E\u540D",verifyDigitalSign:"\u9A8C\u8BC1\u6570\u5B57\u7B7E\u540D",measureLine:"\u7EBF",measureMultiline:"\u6298\u7EBF",measurePolygon:"\u591A\u8FB9\u5F62",measureRectangle:"\u77E9\u5F62",measureCircle:"\u5706\u5F62"},nextPage$5="\u4E0B\u4E00\u9875",previousPage$5="\u4E0A\u4E00\u9875",loading$4="\u52A0\u8F7D\u4E2D",upload$4="\u4E0A\u4F20",exit$4="\u9000\u51FA",leftPanel$4={thumbnails:"\u7F29\u7565\u56FE",outlines:"\u5927\u7EB2",noOutlines:"\u65E0\u5927\u7EB2",layers:"\u56FE\u5C42",noLayers:"\u65E0\u56FE\u5C42",menu:"\u83DC\u5355",showAll:"\u5168\u90E8\u663E\u793A",hideAll:"\u5168\u90E8\u9690\u85CF",restoreSettings:"\u6062\u590D\u9ED8\u8BA4\u72B6\u6001",exportLayers:"\u5BFC\u51FA\u6587\u4EF6\u56FE\u5C42",layerProperty:"\u56FE\u5C42\u5C5E\u6027",exportLayer:"\u5BFC\u51FA\u6B64\u56FE\u5C42",annotations:"\u6CE8\u91CA\u5217\u8868",noAnnotations:"\u6CA1\u6709\u6CE8\u91CA",importAnnotations:"\u5BFC\u5165\u6CE8\u91CA",exportAnnotations:"\u5BFC\u51FA\u6CE8\u91CA",search:"\u641C\u7D22",searchPdf:"\u641C\u7D22PDF",page:"\u9875\u7801",whichPage:["\u7B2C","\u9875"],previousPhrase:"\u67E5\u770B\u4E0A\u4E00\u4E2A\u7ED3\u679C",nextPhrase:"\u67E5\u770B\u4E0B\u4E00\u4E2A\u7ED3\u679C",results:"\u7ED3\u679C",noResults:"\u65E0\u641C\u7D22\u7ED3\u679C",signature:"\u7B7E\u540D",signatureList:"\u7B7E\u540D\u5217\u8868",signatureDetails:"\u67E5\u770B\u7B7E\u540D\u8BE6\u60C5",certificationDetails:"\u67E5\u770B\u8BC1\u4E66\u8BE6\u60C5",noSignatures:"\u6CA1\u6709\u7B7E\u540D",marked:"\u5DF2\u6807\u8BB0",unmarked:"\u672A\u6807\u8BB0",accepted:"\u5DF2\u63A5\u53D7",rejected:"\u5DF2\u62D2\u7EDD",cancelled:"\u5DF2\u53D6\u6D88",completed:"\u5DF2\u5B8C\u6210",none:"\u65E0",edit:"\u7F16\u8F91",delete:"\u5220\u9664",replyPlaceholder:"\u56DE\u590D",reply:"\u4FDD\u5B58",confirm:"\u4FDD\u5B58"},pageModePanel$4={displayMode:"\u9605\u8BFB\u6A21\u5F0F",vertical:"\u5782\u76F4\u6EDA\u52A8",horizontal:"\u6C34\u5E73\u6EDA\u52A8",splitView:"\u5206\u5C4F\u89C6\u56FE",singlePage:"\u5355\u9875",twoPages:"\u53CC\u9875",coverMode:"\u5C01\u9762\u6A21\u5F0F",themes:"\u4E3B\u9898"},stampPanel$4={standard:"\u6807\u51C6\u56FE\u7AE0",dynamic:"\u52A8\u6001\u56FE\u7AE0"},linkPanel$4={linkTo:"\u94FE\u63A5\u5230",url:"\u8D85\u94FE\u63A5",goToPages:"\u8DF3\u8F6C\u5230\u9875\u9762",email:"\u7535\u5B50\u90AE\u7BB1",go:"\u524D\u5F80"},rightPanel$4={general:"\u901A\u7528",name:"\u540D\u79F0",formField:"\u8868\u683C\u680F\u4F4D",visible:"\u53EF\u89C1",hidden:"\u9690\u85CF",properties:"\u5C5E\u6027",requried:"\u5FC5\u586B",differentNameError:"\u8BE5\u540D\u79F0\u5DF2\u5B58\u5728",buttonText:"\u6309\u94AE\u6587\u5B57",appearance:"\u5916\u89C2",backgroundColor:"\u80CC\u666F\u8272",preferences:"\u9009\u9879",alignment:"\u6587\u672C\u5BF9\u9F50",left:"\u5DE6\u5BF9\u9F50",center:"\u5C45\u4E2D",right:"\u53F3\u5BF9\u9F50",defaultValue:"\u9884\u8BBE\u503C",multiLine:"\u591A\u884C",buttonStyle:"\u6309\u94AE\u6837\u5F0F",check:"\u52FE\u9009",circle:"\u5706\u5F62",cross:"\u5206\u53C9",diamond:"\u83F1\u5F62",square:"\u65B9\u5F62",star:"\u661F\u5F62",defaultChecked:"\u9884\u8BBE\u4E3A\u5DF2\u9009\u53D6",item:"\u9879\u76EE",option:"\u9009\u9879",itemList:"\u9879\u76EE\u6E05\u5355",selectAction:"\u9009\u62E9\u52A8\u4F5C",none:"\u65E0",goPage:"\u8DF3\u8F6C\u5230\u9875\u9762",openLink:"\u6253\u5F00\u7F51\u9875\u94FE\u63A5",addUrl:"\u6DFB\u52A0\u94FE\u63A5",addPage:"\u52A0\u5165\u9875\u9762",radioBtnTip1:"\u8B66\u544A\uFF1A\u7EC4\u4E2D\u53EA\u6709\u4E00\u4E2A\u6309\u94AE\u3002\u81F3\u5C11\u9700\u89812\u4E2A\u6309\u94AE\u3002",radioBtnTip2:"\u63D0\u793A\uFF1A\u8981\u521B\u5EFA\u4E00\u7EC4\u4E92\u65A5\u7684\u5355\u9009\u6309\u94AE\uFF08\u5373\u4E00\u6B21\u53EA\u80FD\u9009\u62E9\u4E00\u4E2A\uFF09\uFF0C\u8BF7\u786E\u4FDD\u5404\u57DF\u540D\u76F8\u540C\u3002",listBoxTip:"\u4ECE\u9879\u76EE\u6E05\u5355\u4E2D\u9009\u62E9\u4E00\u4E2A\u9009\u9879\uFF0C\u4F5C\u4E3A\u9ED8\u8BA4\u9009\u9879\u3002"},prevent$4={title:"\u4E0D\u53EF\u7528",standalone:"\u79BB\u7EBF\u7248",description:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u5185\u5BB9\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u5185\u5BB9\u7F16\u8F91\u3002",description1:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u6587\u6863\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u6587\u6863\u7F16\u8F91\u3002"},passwordDialog$4={enterPwd:"\u8F93\u5165\u5BC6\u7801\u67E5\u770B\u6587\u6863",enterPwdPlaceholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",wrongPwd:"\u5BC6\u7801\u9519\u8BEF",encryptPdf:"\u52A0\u5BC6",encrypt:"\u52A0\u5BC6",supportTip:"\u652F\u6301\u5B57\u7B26\uFF1A\u6570\u5B57\u3001\u5B57\u6BCD\u3001{'@'}\u3001$\u3001!\u3001%\u3001?\u3001& ",removePwdSuccess:"\u5BC6\u7801\u5DF2\u79FB\u9664\uFF01",removePwdFailure:"\u5BC6\u7801\u79FB\u9664\u5931\u8D25\uFF01",setPwdSuccess:"\u5BC6\u7801\u8BBE\u7F6E\u6210\u529F\uFF01",setPwdFailure:"\u5BC6\u7801\u8BBE\u7F6E\u5931\u8D25\uFF01",note:["\u6CE8\u610F\uFF1A","- \u6240\u6709\u66F4\u6539\u5C06\u5728\u4E0B\u8F7D\u540E\u751F\u6548\u3002","- \u5728\u4E0B\u8F7D\u6587\u6863\u524D\uFF0C\u60A8\u53EF\u4EE5\u968F\u65F6\u91CD\u7F6E\u5BC6\u7801\u3002"]},ok$4="\u786E\u5B9A",cancel$4="\u53D6\u6D88",signatures$4={tip:"\u8BF7\u5148\u521B\u5EFA\u4E00\u4E2A\u7B7E\u540D\u57DF\uFF0C\u7136\u540E\u518D\u9009\u62E9\u7B7E\u540D\u7C7B\u578B",trackpad:"\u89E6\u6478\u677F",lineWidth:"\u5BBD\u5EA6",keyboard:"\u952E\u76D8",signHere:"\u8BF7\u5728\u6B64\u5904\u8F93\u5165\u7B7E\u540D",image:"\u56FE\u7247",selectFile:"\u9009\u62E9\u6587\u4EF6",none:"\u65E0",clear:"\u6E05\u9664",save:"\u4FDD\u5B58",uploadError:"\u8BF7\u4E0A\u4F201M\u4EE5\u5185\u7684\u56FE\u7247",selectTypeDialog:{selectType:"\u8BF7\u9009\u62E9\u7B7E\u540D\u7C7B\u578B",signWithElectronic:"\u7535\u5B50\u7B7E\u540D",signWithElectronicDesc:"\u901A\u8FC7\u7ED8\u5236\u3001\u56FE\u7247\u3001\u6216\u8F93\u5165\u6587\u5B57\u8FDB\u884C\u6587\u4EF6\u7B7E\u7F72\u3002",signWithDigital:"\u6570\u5B57\u7B7E\u540D\uFF08\u6570\u5B57\u8BC1\u4E66\u7B7E\u7F72\uFF09",signWithDigitalDesc:"\u901A\u8FC7\u521B\u5EFA\u6216\u4E0A\u4F20\u5E26\u6709\u552F\u4E00\u6570\u5B57ID\u7684\u6570\u5B57\u8BC1\u4E66\u7B7E\u7F72\u6587\u4EF6\u3002",startSigning:"\u5F00\u59CB\u7B7E\u540D"},detailsDialog:{title:"\u6570\u5B57\u7B7E\u540D\u8BE6\u7EC6\u4FE1\u606F",signBy:"\u7B7E\u540D\u6709\u6548\uFF0C\u7B7E\u7F72\u8005\u4E3A",signingTime:"\u7B7E\u7F72\u65F6\u95F4",validitySummary:"\u6709\u6548\u6027\u5C0F\u7ED3",validIdentity:"\u7B7E\u540D\u8005\u7684\u8EAB\u4EFD\u6709\u6548\u3002",invalidIdentity:"\u7B7E\u540D\u8005\u7684\u8EAB\u4EFD\u65E0\u6548\u3002",unknownIdentity:"\u7B7E\u540D\u6709\u6548\u6027\u672A\u77E5\uFF0C\u56E0\u4E3A\u5B83\u672A\u5305\u542B\u5728\u60A8\u7684\u53D7\u4FE1\u4EFB\u8BC1\u4E66\u5217\u8868\u4E2D\uFF0C\u5E76\u4E14\u5B83\u7684\u7236\u8BC1\u4E66\u90FD\u4E0D\u662F\u53D7\u4FE1\u4EFB\u8BC1\u4E66\u3002",expiredCertificate:"\u8BE5\u6587\u4EF6\u662F\u7528\u5DF2\u8FC7\u671F\u7684\u8BC1\u4E66\u7B7E\u540D\u7684\u3002\u5982\u679C\u60A8\u6700\u8FD1\u83B7\u53D6\u4E86\u6B64\u6587\u4EF6\uFF0C\u5219\u8BE5\u6587\u4EF6\u53EF\u80FD\u4E0D\u771F\u5B9E\u3002",invalidSignature:"\u7B7E\u540D\u65E0\u6548\u3002",validSignature:"\u7B7E\u540D\u6709\u6548\u3002",notModifiedDoc:"\u81EA\u5E94\u7528\u6B64\u7B7E\u540D\u4EE5\u6765\uFF0C\u6587\u6863\u672A\u88AB\u4FEE\u6539\u3002",alteredDoc:"\u81EA\u5F53\u524D\u7528\u6237\u7B7E\u7F72\u6587\u6863\u4EE5\u6765\uFF0C\u8BE5\u6587\u6863\u5DF2\u88AB\u66F4\u6539\u6216\u635F\u574F\u3002",viewCertificateDetails:"\u67E5\u770B\u8BC1\u4E66\u7EC6\u8282",unknownSignature:"\u7B7E\u540D\u6709\u6548\u6027\u672A\u77E5\u3002",atLeastOneInvalid:"\u81F3\u5C11\u4E00\u4E2A\u7B7E\u540D\u65E0\u6548\uFF0C\u6587\u6863\u53EF\u80FD\u88AB\u7BE1\u6539\u3002",viewAllSignatures:"\u67E5\u770B\u6240\u6709\u7B7E\u540D"},certificateViewerDialog:{title:"\u8BC1\u4E66\u67E5\u770B\u7A0B\u5E8F",abstracts:"\u6458\u8981",summary:"\u5C0F\u7ED3",issuedTo:"\u9881\u53D1\u7ED9",issuer:"\u9881\u53D1\u8005",validFrom:"\u6709\u6548\u8D77\u59CB\u65E5\u671F",validTo:"\u6709\u6548\u622A\u6B62\u65E5\u671F",intendedUsage:"\u9884\u671F\u7528\u9014",details:"\u8BE6\u7EC6\u4FE1\u606F",version:"\u7248\u672C",algorithm:"\u7B7E\u540D\u7B97\u6CD5",subject:"\u4E3B\u9898",serialNumber:"\u5E8F\u5217\u53F7",certificatePolicy:"\u8BC1\u4E66\u7B56\u7565",crlDistributionPoints:"CRL\u5206\u53D1\u70B9",issuerInfoAccess:"\u9881\u53D1\u673A\u6784\u4FE1\u606F\u8BBF\u95EE",issuerKeyIdentifier:"\u9881\u53D1\u673A\u6784\u5BC6\u94A5\u6807\u8BC6\u7B26",subjectKeyIdentifier:"\u4E3B\u4F53\u5BC6\u94A5\u6807\u8BC6\u7B26",basicConstraints:"\u57FA\u672C\u7EA6\u675F",keyUsage:"\u5BC6\u94A5\u7528\u6CD5",publicKey:"\u516C\u94A5",X509:"X.509",SHA1Digest:"SHA1",MD5Digest:"MD5",trust:"\u4FE1\u4EFB",trustedTo:"\u672C\u8BC1\u4E66\u4FE1\u4EFB\u4E8E\uFF1A",sign:"\u7B7E\u540D\u6587\u6863\u6216\u6570\u636E",certify:"\u9A8C\u8BC1\u6587\u6863",addToTrust:"\u6DFB\u52A0\u5230\u53EF\u4FE1\u4EFB\u8BC1\u4E66",done:"\u5173\u95ED"},deleteConfirm:"\u786E\u5B9A\u5220\u9664\u8BE5\u5185\u5BB9\uFF1F",addDigitalFileDialog:{title:"\u6DFB\u52A0\u6570\u5B57\u8EAB\u4EFD\u8BC1",desc:"\u6D4F\u89C8\u6570\u5B57\u8EAB\u4EFD\u8BC1\u6587\u4EF6\u3002\u6570\u5B57\u8EAB\u4EFD\u8BC1\u53D7\u5BC6\u7801\u4FDD\u62A4\u3002\u5982\u679C\u4F60\u4E0D\u77E5\u9053\u5BC6\u7801\uFF0C\u4F60\u5C31\u65E0\u6CD5\u83B7\u53D6\u6570\u5B57\u8EAB\u4EFD\u8BC1\u3002",certificateFile:"\u8BC1\u4E66\u6587\u4EF6",uploadFile:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6",upload:"\u6D4F\u89C8",password:"\u8BC1\u4E66\u5BC6\u7801",enterPassword:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u5BC6\u7801",invalidPassword:"\u5BC6\u7801\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5"},appearanceDialog:{title:"\u81EA\u5B9A\u4E49\u7B7E\u540D\u5916\u89C2",signHere:"\u8BF7\u5728\u6B64\u5904\u8F93\u5165\u7B7E\u540D\uFF01",includeText:"\u5305\u542B\u6587\u672C",name:"\u540D\u79F0",dName:"\u8FA8\u522B\u540D",date:"\u65E5\u671F",ComPDFKitVersion:"ComPDFKit \u7248\u672C",logo:"\u5FBD\u6807",location:"\u4F4D\u7F6E",reason:"\u539F\u56E0",signReason:"\u7B7E\u7F72\u539F\u56E0",docOwner:"\u6211\u662F\u8BE5\u6587\u6863\u7684\u4F5C\u8005",approvingDoc:"\u6211\u6B63\u5728\u6279\u51C6\u8BE5\u6587\u6863",reviewedDoc:"\u6211\u5DF2\u5BA1\u9605\u8BE5\u6587\u6863",labels:"\u6807\u7B7E",text:"\u5B57\u4F53",type:"\u5B57\u5F62",textAlignment:"\u5BF9\u9F50\u65B9\u5F0F"}},color$4="\u989C\u8272",opacity$4="\u4E0D\u900F\u660E\u5EA6",font$4="\u5B57\u4F53",regular$4="\u5E38\u89C4",oblique$4="\u659C\u4F53",bold$4="\u7C97\u4F53",boldOblique$4="\u7C97\u659C\u4F53",warning$3="\u6CE8\u610F",colon$3="\uFF1A",compare$5={startCompare:"\u5F00\u59CB\u5BF9\u6BD4",exit:"\u9000\u51FA\u5BF9\u6BD4",oldFile:"\u65E7\u6587\u4EF6",newFile:"\u65B0\u6587\u4EF6",dropFile:["\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C","\u6216"],chooseOldFile:"\u6DFB\u52A0\u65E7\u6587\u4EF6",chooseNewFile:"\u6DFB\u52A0\u65B0\u6587\u4EF6",comingSoon:"\u5BF9\u6BD4\u5373\u5C06\u5B8C\u6210\uFF01",contentComparison:"\u5E76\u6392\u5BF9\u6BD4",compareItems:"\u5BF9\u6BD4\u5185\u5BB9\u9009\u62E9",text:"\u6587\u5B57",images:"\u56FE\u7247",colorMark:"\u6807\u8BB0\u989C\u8272",replacedContent:"\u88AB\u66FF\u6362\u7684\u5185\u5BB9",insertedContent:"\u88AB\u63D2\u5165\u7684\u5185\u5BB9",deletedContent:"\u5DF2\u5220\u9664\u7684\u5185\u5BB9",overlayComparison:"\u53E0\u52A0\u5BF9\u6BD4",blendMode:"\u6DF7\u5408\u6A21\u5F0F",normal:"\u666E\u901A",multiply:"\u6B63\u7247\u53E0\u5E95",screen:"\u6EE4\u8272",overlay:"\u53E0\u52A0",darken:"\u53D8\u6697",lighten:"\u53D8\u4EAE",colorDodge:"\u989C\u8272\u51CF\u6DE1",colorBurn:"\u989C\u8272\u52A0\u6DF1",hardLight:"\u5F3A\u5149",softLight:"\u67D4\u5149",difference:"\u5DEE\u503C",exclusion:"\u6392\u9664",hue:"\u8272\u76F8",saturation:"\u9971\u548C\u5EA6",colour:"\u989C\u8272",luminosity:"\u660E\u5EA6",return:"\u8FD4\u56DE",compare:"\u5F00\u59CB\u5BF9\u6BD4",downloadOptions:"\u7ED3\u679C\u6587\u4EF6\u6837\u5F0F",downloadTwoFiles:"\u5BF9\u6BD4\u7ED3\u679C\u5206\u5F00\u4FDD\u5B58\uFF0C\u7ED3\u679C\u6587\u4EF6\u4E3A2\u4EFD",downloadOneFile:"\u5408\u5E76\u5BF9\u6BD4\u7ED3\u679C\uFF0C\u7ED3\u679C\u6587\u4EF6\u4E3A1\u4EFD\u6587\u4EF6",printSetting:"\u6253\u5370\u6587\u4EF6\u9009\u62E9",printOldFile:"\u6253\u5370\u65E7\u6587\u6863\u7684\u5BF9\u6BD4\u7ED3\u679C\u6587\u4EF6",printNewFile:"\u6253\u5370\u65B0\u6587\u6863\u7684\u5BF9\u6BD4\u7ED3\u679C\u6587\u4EF6",byComPDFKit:"\u7531ComPDFKit\u63D0\u4F9B\u5BF9\u6BD4"},editorPanel$4={textProp:"\u6587\u5B57\u5C5E\u6027",fontColor:"\u6587\u5B57\u989C\u8272",textStyle:"\u6587\u5B57\u6837\u5F0F",spacing:"\u95F4\u8DDD",characterSpacing:"\u5B57\u95F4\u8DDD",lineSpacing:"\u884C\u95F4\u8DDD",paragraphSpacing:"\u6BB5\u95F4\u8DDD",imageProp:"\u56FE\u7247\u5C5E\u6027",rotate:"\u65CB\u8F6C",rotateLeft:"\u5DE6\u65CB\u8F6C",rotateRight:"\u53F3\u65CB\u8F6C",flip:"\u7FFB\u8F6C",flipHorizontal:"\u6C34\u5E73\u7FFB\u8F6C",flipVertical:"\u5782\u76F4\u7FFB\u8F6C",tools:"\u5DE5\u5177",replace:"\u66FF\u6362",export:"\u5BFC\u51FA",crop:"\u88C1\u526A",maximum:"\u56FE\u7247\u5927\u5C0F\u4E0A\u9650\uFF1A2MB\u3002"},documentEditor$4={save:"\u4FDD\u5B58",saveAs:"\u53E6\u5B58\u4E3A",insert:"\u63D2\u5165",delete:"\u5220\u9664",rotateRight:"\u53F3\u65CB\u8F6C",rotateLeft:"\u5DE6\u65CB\u8F6C",copy:"\u590D\u5236",extract:"\u63D0\u53D6",replace:"\u66FF\u6362",move:"\u79FB\u52A8",selectAll:"\u5168\u9009",dialog:{insertPages:"\u9875\u9762\u8303\u56F4",blankPage:"\u7A7A\u767D\u9875",customPage:"\u81EA\u5B9A\u4E49\u7A7A\u767D\u9875",fromPdf:"\u4ECE\u5176\u4ED6PDF",selectFile:"\u9009\u62E9\u6587\u4EF6",pageRange:"\u9875\u9762\u8303\u56F4",allPages:"\u6240\u6709\u9875\u9762",oddPage:"\u5947\u6570\u9875",evenPage:"\u5076\u6570\u9875",customRange:"\u81EA\u5B9A\u4E49\u8303\u56F4",insertTo:"\u9875\u9762\u63D2\u5165\u4F4D\u7F6E",firstPage:"\u9996\u9875",lastPage:"\u672B\u9875",page:"\u9875\u9762",pageTip:"\u4F8B\uFF1A3, 5-10",before:"\u524D",after:"\u540E"},deleteConfirmText:"\u786E\u8BA4\u8981\u5220\u9664\u6240\u9009\u9875\u9762\u5417\uFF1F",eachPage:"\u6BCF\u9875\u4F5C\u4E3A\u5355\u4E2A\u6587\u4EF6",deleteAfter:"\u63D0\u53D6\u540E\u5220\u9664\u9875\u9762",moveTo:"\u79FB\u52A8\u5230",inputPageTip:"\u8F93\u51650~\u6587\u6863\u6700\u5927\u9875\u7801\u6570"},paste$4="\u7C98\u8D34",properties$4="\u5C5E\u6027",security$4={pwdProtection:"\u5BC6\u7801\u4FDD\u62A4",encryption:"\u6587\u6863\u52A0\u5BC6",decryption:"\u6587\u6863\u89E3\u5BC6",redaction:"\u6807\u8BB0\u5BC6\u6587",fillBlack:"\u586B\u5145\u9ED1\u8272",fillWhite:"\u586B\u5145\u767D\u8272",caution:"\u63D0\u793A",enterTip:"\u672C\u6587\u6863\u4E2D\u5DF2\u88AB\u6807\u8BB0\u7684\u5185\u5BB9\u5C06\u88AB\u6C38\u4E45\u5220\u9664\u3002\u8BF7\u786E\u8BA4\u60A8\u7684\u64CD\u4F5C\u3002",understand:"\u6211\u5DF2\u77E5\u6653\uFF0C\u5F00\u59CB\u4F7F\u7528",applyTip:"\u5E94\u7528\u6807\u8BB0\u5BC6\u6587\u540E\uFF0C\u88AB\u6807\u8BB0\u7684\u5185\u5BB9\u5C06\u88AB\u6C38\u4E45\u5220\u9664\u3002",exit:"\u9000\u51FA",apply:"\u5E94\u7528",note:"\u63D0\u793A",exitTip:"\u60A8\u7684\u6807\u8BB0\u5185\u5BB9\u5C1A\u672A\u751F\u6548\u3002\u786E\u5B9A\u8981\u9000\u51FA\u5417\uFF1F",exitConfirm:"\u786E\u8BA4",saveTip:["\u63D0\u793A\uFF1A\u6587\u6863\u4E2D\u88AB\u6807\u8BB0\u7684\u5185\u5BB9\u5C06\u88AB\u6C38\u4E45\u5220\u9664\u4E14\u4E0D\u53EF\u6062\u590D\u3002","\u786E\u5B9A\u5220\u9664\u6240\u6709\u6807\u8BB0\u5185\u5BB9\u5E76\u4FDD\u5B58\u6587\u6863\uFF1F"],save:"\u786E\u8BA4"},layer$4={show:"\u663E\u793A",hide:"\u9690\u85CF",lock:"\u9501\u5B9A",unlock:"\u89E3\u9501",lockedTip:"\u5F53\u524D\u56FE\u5C42\u5DF2\u9501\u5B9A\u3002\u8981\u66F4\u6539\u5176\u53EF\u89C1\u6027\uFF0C\u8BF7\u5148\u5728\u56FE\u5C42\u5C5E\u6027\u4E2D\u5C06\u5176\u89E3\u9501\u3002",ok:"\u597D\u7684",setProperty:"\u8BBE\u7F6E\u56FE\u5C42\u5C5E\u6027",layerProperty:"\u56FE\u5C42\u5C5E\u6027",layerName:"\u56FE\u5C42\u540D\u79F0",enterLayerName:"\u8BF7\u8F93\u5165\u56FE\u5C42\u540D\u79F0",defaultSettings:"\u9ED8\u8BA4\u72B6\u6001",defaultShow:"\u6253\u5F00\u6587\u4EF6\u65F6\u9ED8\u8BA4\u663E\u793A",defaultHide:"\u6253\u5F00\u6587\u4EF6\u65F6\u9ED8\u8BA4\u9690\u85CF",lockLayer:"\u9501\u5B9A\u56FE\u5C42",printProperty:"\u6253\u5370\u5C5E\u6027",always:"\u603B\u662F",never:"\u4ECE\u4E0D",printVisible:"\u53EF\u89C1\u65F6\u6253\u5370",exportProperty:"\u5BFC\u51FA\u5C5E\u6027",exportVisible:"\u53EF\u89C1\u65F6\u5BFC\u51FA",copyLink:"\u590D\u5236\u94FE\u63A5",technicalDoc:"\u6280\u672F\u6587\u6863"},colorSeparation$4={toggleColor:"\u5207\u6362\u989C\u8272",notShowTip:"\u8BE5\u989C\u8272\u5C06\u4E0D\u4F1A\u5728\u6587\u6863\u4E2D\u663E\u793A",accessOnPc:"\u8BE5\u529F\u80FD\u4E0D\u9002\u7528\u4E8E\u79FB\u52A8\u8BBE\u5907\uFF0C\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C"},measurement$4={scale:"\u6BD4\u4F8B",length:"\u957F\u5EA6",precision:"\u7CBE\u5EA6",angle:"\u89D2\u5EA6",radius:"\u534A\u5F84",perimeter:"\u5468\u957F",area:"\u9762\u79EF",reply:"\u56DE\u590D",drawingToActual:"\u56FE\u7EB8\u5C3A\u5BF8: \u771F\u5B9E\u5C3A\u5BF8",settingScale:"\u6D4B\u91CF\u6BD4\u4F8B",pt:"\u70B9",in:"\u82F1\u5BF8",mm:"\u6BEB\u7C73",cm:"\u5398\u7C73",m:"\u7C73",km:"\u5343\u7C73",ft:"\u82F1\u5C3A",yd:"\u7801",mi:"\u82F1\u91CC",measurementSettings:"\u6D4B\u91CF\u8BBE\u7F6E",scaleError:"\u6BD4\u4F8B\u5C3A\u9700\u5927\u4E8E0\u3002",showCaption:"\u6587\u5B57\u5C55\u793A",done:"\u786E\u8BA4"},measurementPanel$4={appearance:"\u6807\u6CE8\u5916\u89C2\u8BBE\u7F6E",lineColor:"\u7EBF\u6761\u989C\u8272",fillColor:"\u586B\u5145\u989C\u8272",lineWidth:"\u7EBF\u5BBD",lineStyle:"\u7EBF\u578B",start:"\u7EBF\u5934",end:"\u7EBF\u5C3E",fontColor:"\u5B57\u4F53\u989C\u8272",fontStyle:"\u5B57\u4F53\u6837\u5F0F",note:"\u6279\u6CE8"},zhCN={header:header$4,nextPage:nextPage$5,previousPage:previousPage$5,loading:loading$4,upload:upload$4,exit:exit$4,leftPanel:leftPanel$4,pageModePanel:pageModePanel$4,stampPanel:stampPanel$4,linkPanel:linkPanel$4,rightPanel:rightPanel$4,prevent:prevent$4,passwordDialog:passwordDialog$4,ok:ok$4,cancel:cancel$4,continue:"\u7EE7\u7EED",signatures:signatures$4,color:color$4,opacity:opacity$4,font:font$4,regular:regular$4,oblique:oblique$4,bold:bold$4,boldOblique:boldOblique$4,delete:"\u5220\u9664",warning:warning$3,colon:colon$3,compare:compare$5,editorPanel:editorPanel$4,documentEditor:documentEditor$4,paste:paste$4,properties:properties$4,security:security$4,layer:layer$4,colorSeparation:colorSeparation$4,measurement:measurement$4,measurementPanel:measurementPanel$4},header$3={leftPanel:"\u5DE6\u30D1\u30CD\u30EB",fullScreen:"\u5168\u753B\u9762\u8868\u793A",pan:"\u30D1\u30F3",cropPage:"\u5207\u308A\u53D6\u308A",zoomIn:"\u30BA\u30FC\u30E0\u30A4\u30F3",zoomOut:"\u30BA\u30FC\u30E0\u30A2\u30A6\u30C8",light:"\u660E\u308B\u3044",dark:"\u6697\u3044",lightMode:"\u30E9\u30A4\u30C8\u30E2\u30FC\u30C9",darkMode:"\u30C0\u30FC\u30AF\u30E2\u30FC\u30C9",viewer:"\u30D3\u30E5\u30FC\u30A2",annotations:"\u6CE8\u91C8",forms:"\u30D5\u30A9\u30FC\u30E0",signatures:"\u7F72\u540D",security:"\u5B89\u5168",compare:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306E\u6BD4\u8F03",editor:"\u30B3\u30F3\u30C6\u30F3\u30C4\u7DE8\u96C6",document:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u7DE8\u96C6",separation:"\u8272\u5206\u89E3",measurement:"\u6E2C\u5B9A",note:"\u6CE8\u8A18",highlight:"\u30CF\u30A4\u30E9\u30A4\u30C8",underline:"\u4E0B\u7DDA",strikeout:"\u53D6\u6D88\u7DDA",squiggly:"\u6CE2\u7DDA",ink:"\u30A4\u30F3\u30AF",circle:"\u4E38",square:"\u56DB\u89D2",arrow:"\u77E2\u5370",line:"\u30E9\u30A4\u30F3",freetext:"\u30D5\u30EA\u30FC\u30C6\u30AD\u30B9\u30C8",stamp:"\u30B9\u30BF\u30F3\u30D7",image:"\u753B\u50CF",link:"\u30EA\u30F3\u30AF",textField:"\u30C6\u30AD\u30B9\u30C8\u30D5\u30A3\u30FC\u30EB\u30C9",checkbox:"\u30C1\u30A7\u30C3\u30AF\u30DC\u30C3\u30AF\u30B9",radioButton:"\u30E9\u30B8\u30AA\u30DC\u30BF\u30F3",listBox:"\u30EA\u30B9\u30C8\u30DC\u30C3\u30AF\u30B9",comboButton:"\u30B3\u30F3\u30DC\u30DC\u30BF\u30F3",button:"\u62BC\u3057\u30DC\u30BF\u30F3",openFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",search:"\u691C\u7D22",rightPanel:"\u53F3\u30D1\u30CD\u30EB",viewSetting:"\u8868\u793A\u8A2D\u5B9A",download:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",flatten:"\u30D5\u30E9\u30C3\u30C8\u5316\u3055\u308C\u305F PDF \u3068\u3057\u3066\u4FDD\u5B58",print:"\u5370\u5237",settings:{settings:"\u8A2D\u5B9A",author:"\u8457\u8005",annotator:"\u6CE8\u91C8\u8005",language:"\u8A00\u8A9E",highlightLink:"\u30CF\u30A4\u30E9\u30A4\u30C8\u30EA\u30F3\u30AF",highlightForm:"\u30CF\u30A4\u30E9\u30A4\u30C8\u30D5\u30A9\u30FC\u30E0",fillConsecutively:"\u9023\u7D9A\u3057\u3066\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",creationInfo:"\u5275\u4F5C\u60C5\u5831",version:"\u30D0\u30FC\u30B8\u30E7\u30F3"},addText:"\u30C6\u30AD\u30B9\u30C8\u306E\u8FFD\u52A0",addImage:"\u753B\u50CF\u306E\u8FFD\u52A0",undo:"\u5143\u306B\u623B\u3059",redo:"\u3084\u308A\u76F4\u3057",createSignField:"\u7F72\u540D\u30D5\u30A3\u30FC\u30EB\u30C9\u306E\u4F5C\u6210",addDigitalSign:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306E\u8FFD\u52A0",addElectronicSign:"\u96FB\u5B50\u7F72\u540D\u306E\u8FFD\u52A0",verifyDigitalSign:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306E\u691C\u8A3C",measureLine:"\u30E9\u30A4\u30F3",measureMultiline:"\u8907\u6570\u884C",measurePolygon:"\u30DD\u30EA\u30B4\u30F3",measureRectangle:"\u77E9\u5F62",measureCircle:"\u4E38"},nextPage$4="\u6B21",previousPage$4="\u524D",loading$3="\u8AAD\u307F\u8FBC\u307F\u4E2D",upload$3="\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",exit$3="\u9000\u51FA",leftPanel$3={thumbnails:"\u30B5\u30E0\u30CD\u30A4\u30EB",outlines:"\u6982\u8981",noOutlines:"\u30A2\u30A6\u30C8\u30E9\u30A4\u30F3\u306A\u3057",layers:"\u30EC\u30A4\u30E4\u30FC",noLayers:"\u30EC\u30A4\u30E4\u30FC\u306A\u3057",menu:"\u30E1\u30CB\u30E5\u30FC",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u96A0\u3059",restoreSettings:"\u30C7\u30D5\u30A9\u30EB\u30C8\u8A2D\u5B9A\u306E\u5FA9\u5143",exportLayers:"\u30D5\u30A1\u30A4\u30EB\u30EC\u30A4\u30E4\u30FC\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",layerProperty:"\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3",exportLayer:"\u3053\u306E\u30EC\u30A4\u30E4\u30FC\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",annotations:"\u6CE8\u91C8",noAnnotations:"\u6CE8\u91C8\u306A\u3057",importAnnotations:"\u6CE8\u91C8\u306E\u30A4\u30F3\u30DD\u30FC\u30C8",exportAnnotations:"\u6CE8\u91C8\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",search:"\u691C\u7D22",searchPdf:"PDF\u3092\u691C\u7D22",page:"\u30DA\u30FC\u30B8",whichPage:["","\u30DA\u30FC\u30B8\u76EE"],previousPhrase:"\u524D\u306B\u51FA\u73FE\u3057\u305F\u30D5\u30EC\u30FC\u30BA\u3092\u691C\u7D22",nextPhrase:"\u6B21\u306B\u51FA\u73FE\u3059\u308B\u30D5\u30EC\u30FC\u30BA\u3092\u691C\u7D22",results:"\u7D50\u679C",noResults:"\u7D50\u679C\u306A\u3057",signature:"\u7F72\u540D",signatureList:"\u7F72\u540D\u30EA\u30B9\u30C8",signatureDetails:"\u7F72\u540D\u306E\u8A73\u7D30",certificationDetails:"\u8A8D\u8A3C\u306E\u8A73\u7D30",noSignatures:"\u7F72\u540D\u306A\u3057",marked:"\u30DE\u30FC\u30AF\u3042\u308A",unmarked:"\u30DE\u30FC\u30AF\u306A\u3057",accepted:"\u627F\u8A8D\u3055\u308C\u307E\u3057\u305F",rejected:"\u62D2\u5426\u3055\u308C\u307E\u3057\u305F",cancelled:"\u30AD\u30E3\u30F3\u30BB\u30EB",completed:"\u5B8C\u4E86\u3057\u307E\u3057\u305F",none:"\u306A\u3057",edit:"\u7DE8\u96C6",delete:"\u6D88\u53BB",replyPlaceholder:"\u8FD4\u4FE1\u307E\u305F\u306F\u610F\u898B\u3092\u8FFD\u52A0",reply:"\u8FD4\u4FE1",confirm:"\u78BA\u8A8D"},pageModePanel$3={displayMode:"\u8868\u793A\u30E2\u30FC\u30C9",singlePage:"\u5358\u4E00\u30DA\u30FC\u30B8",twoPages:"2 \u30DA\u30FC\u30B8",coverMode:"\u30AB\u30D0\u30FC\u30E2\u30FC\u30C9",splitView:"\u30B9\u30AF\u30ED\u30FC\u30EB",vertical:"\u7E26\u30B9\u30AF\u30ED\u30FC\u30EB",horizontal:"\u6A2A\u30B9\u30AF\u30ED\u30FC\u30EB",themes:"\u30C6\u30FC\u30DE"},stampPanel$3={standard:"\u6A19\u6E96",dynamic:"\u52D5\u7684"},linkPanel$3={linkTo:"\u3078\u306E\u30EA\u30F3\u30AF",url:"URL",goToPages:"\u30DA\u30FC\u30B8\u306B\u79FB\u52D5",email:"\u96FB\u5B50\u30E1\u30FC\u30EB",go:"\u79FB\u52D5"},rightPanel$3={general:"\u4E00\u822C",name:"\u540D\u524D",formField:"\u30D5\u30A9\u30FC\u30E0\u30D5\u30A3\u30FC\u30EB\u30C9",visible:"\u898B\u3048\u308B",hidden:"\u96A0\u3059",properties:"\u30D7\u30ED\u30D1\u30C6\u30A3",requried:"\u5FC5\u9808",differentNameError:"\u5225\u306E\u540D\u524D\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",buttonText:"\u30DC\u30BF\u30F3\u306E\u30C6\u30AD\u30B9\u30C8",appearance:"\u5916\u89B3",backgroundColor:"\u80CC\u666F\u8272",preferences:"\u8A2D\u5B9A",alignment:"\u4F4D\u7F6E\u5408\u308F\u305B",left:"\u5DE6",center:"\u4E2D\u5FC3",right:"\u53F3",defaultValue:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5024",multiLine:"\u8907\u6570\u884C",buttonStyle:"\u30DC\u30BF\u30F3\u306E\u30B9\u30BF\u30A4\u30EB",check:"\u30C1\u30A7\u30C3\u30AF",circle:"\u4E38",cross:"\u30AF\u30ED\u30B9",diamond:"\u30C0\u30A4\u30E4\u30E2\u30F3\u30C9",square:"\u56DB\u89D2",star:"\u661F",defaultChecked:"\u30DC\u30BF\u30F3\u306F\u30C7\u30D5\u30A9\u30EB\u30C8\u3067\u30C1\u30A7\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059",item:"\u30A2\u30A4\u30C6\u30E0",itemList:"\u30A2\u30A4\u30C6\u30E0\u4E00\u89A7",option:"\u30A2\u30A4\u30C6\u30E0",selectAction:"\u30A2\u30AF\u30B7\u30E7\u30F3\u306E\u9078\u629E",none:"\u306A\u3057",goPage:"\u30DA\u30FC\u30B8\u306B\u79FB\u52D5",openLink:"Web \u30EA\u30F3\u30AF\u3092\u958B\u304F",addUrl:"URL\u3092\u8FFD\u52A0",addPage:"\u30DA\u30FC\u30B8\u3092\u8FFD\u52A0",radioBtnTip1:"\u30B0\u30EB\u30FC\u30D7\u306B 1 \u3064\u306E\u30DC\u30BF\u30F3\u3001\u5C11\u306A\u304F\u3068\u30822\u3064\u306E\u30DC\u30BF\u30F3\u304C\u5FC5\u8981\u3067\u3059",radioBtnTip2:"\u76F8\u4E92\u306B\u6392\u4ED6\u7684\u306A\u30E9\u30B8\u30AA\u30DC\u30BF\u30F3\u306E\u30BB\u30C3\u30C8\u3092\u4F5C\u6210\u3059\u308B\u306B\u306F\u3001\u30D5\u30A3\u30FC\u30EB\u30C9\u306B\u540C\u3058\u540D\u524D\u3092\u4ED8\u3051\u3066\u304F\u3060\u3055\u3044",listBoxTip:"\u9805\u76EE\u30EA\u30B9\u30C8\u5185\u306E\u9805\u76EE\u3092\u9078\u629E\u3057\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u306B\u3057\u307E\u3059"},prevent$3={title:"Not Available in Server-Backed",standalone:"Standalone",description:"Content Editor is only available on Standalone. Change to Standalone to edit PDF content.",description1:"Document Editor is only available on Standalone. Change to Standalone to edit PDF pages."},passwordDialog$3={enterPwd:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u8868\u793A\u3057\u3066\u304F\u3060\u3055\u3044",enterPwdPlaceholder:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",wrongPwd:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u9593\u9055\u3063\u3066\u3044\u307E\u3059",encryptPdf:"PDF\u3092\u6697\u53F7\u5316\u3059\u308B",encrypt:"\u6697\u53F7\u5316\u3059\u308B",supportTip:"\u30B5\u30DD\u30FC\u30C8: \u6570\u5B57\u3001\u6587\u5B57\u3001{'@'}\u3001$\u3001!\u3001%\u3001?\u3001&",removePwdSuccess:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u5E38\u306B\u524A\u9664\u3055\u308C\u307E\u3057\u305F",removePwdFailure:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",setPwdSuccess:"\u30D5\u30A1\u30A4\u30EB\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u5E38\u306B\u8A2D\u5B9A\u3055\u308C\u307E\u3057\u305F",setPwdFailure:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u8A2D\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",note:["\u6CE8\u8A18\uFF1A","\u3059\u3079\u3066\u306E\u5909\u66F4\u306F\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u5F8C\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059","\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u524D\u3067\u3044\u3064\u3067\u3082\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8\u3067\u304D\u307E\u3059"]},ok$3="OK",cancel$3="\u30AD\u30E3\u30F3\u30BB\u30EB",signatures$3={tip:"\u7F72\u540D\u30D5\u30A3\u30FC\u30EB\u30C9\u3092\u4F5C\u6210\u3057\u3066\u304B\u3089\u3001\u7F72\u540D\u306E\u7A2E\u985E\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",trackpad:"\u30C8\u30E9\u30C3\u30AF\u30D1\u30C3\u30C9",lineWidth:"\u7DDA\u5E45",keyboard:"\u30AD\u30FC\u30DC\u30FC\u30C9",signHere:"\u3053\u3053\u306B\u7F72\u540D\u3057\u3066\u304F\u3060\u3055\u3044",image:"\u753B\u50CF",selectFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",none:"\u306A\u3057",clear:"\u30AF\u30EA\u30A2",save:"\u4FDD\u5B58\u3057\u3066\u9069\u7528",uploadError:"1MB\u672A\u6E80\u306E\u753B\u50CF\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u304F\u3060\u3055\u3044",selectTypeDialog:{selectType:"\u7F72\u540D\u30BF\u30A4\u30D7\u306E\u9078\u629E",signWithElectronic:"\u96FB\u5B50\u7F72\u540D\u306B\u3088\u308B\u7F72\u540D",signWithElectronicDesc:"\u753B\u50CF\u7F72\u540D\u3092\u63CF\u753B\u3001\u5165\u529B\u3001\u307E\u305F\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u30D5\u30A1\u30A4\u30EB\u306B\u7F72\u540D\u3057\u307E\u3059",signWithDigital:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306B\u3088\u308B\u7F72\u540D",signWithDigitalDesc:"\u30D5\u30A1\u30A4\u30EB\u306B\u7F72\u540D\u3059\u308B\u305F\u3081\u306E\u56FA\u6709\u306E\u30C7\u30B8\u30BF\u30EBID\u3092\u6301\u3064\u30C7\u30B8\u30BF\u30EB\u8A3C\u660E\u66F8\u3092\u4F5C\u6210\u307E\u305F\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u307E\u3059",startSigning:"\u7F72\u540D\u3092\u958B\u59CB\u3059\u308B"},detailsDialog:{title:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306E\u8A73\u7D30",signBy:"\u6709\u52B9\u306A\u7F72\u540D\u3001\u7F72\u540D\u8005",signingTime:"\u7F72\u540D\u6642\u9593",validitySummary:"\u6709\u52B9\u6027\u306E\u6982\u8981",validIdentity:"\u7F72\u540D\u8005\u306E\u8EAB\u5143\u306F\u6709\u52B9\u3067\u3059",invalidIdentity:"\u7F72\u540D\u8005\u306E\u8EAB\u5143\u304C\u7121\u52B9\u3067\u3059",unknownIdentity:"\u7F72\u540D\u306F\u4FE1\u983C\u3067\u304D\u308B\u8A3C\u660E\u66F8\u306E\u30EA\u30B9\u30C8\u306B\u542B\u307E\u308C\u3066\u304A\u3089\u305A\u3001\u305D\u306E\u8A3C\u660E\u66F8\u3082\u4FE1\u983C\u3067\u304D\u308B\u8A3C\u660E\u66F8\u3067\u306F\u306A\u3044\u305F\u3081\u3001\u7F72\u540D\u306E\u6709\u52B9\u6027\u306F\u4E0D\u660E\u3067\u3059",expiredCertificate:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306F\u6709\u52B9\u671F\u9650\u304C\u5207\u308C\u305F\u8A3C\u660E\u66F8\u3067\u7F72\u540D\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u6700\u8FD1\u53D6\u5F97\u3057\u305F\u5834\u5408\u306F\u672C\u7269\u3067\u306F\u306A\u3044\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059",validSignature:"\u7F72\u540D\u306F\u6709\u52B9\u3067\u3059",invalidSignature:"\u7F72\u540D\u306F\u7121\u52B9\u3067\u3059",notModifiedDoc:"\u3053\u306E\u7F72\u540D\u304C\u9069\u7528\u3055\u308C\u3066\u304B\u3089\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306F\u5909\u66F4\u3055\u308C\u3066\u3044\u307E\u305B\u3093",alteredDoc:"\u73FE\u5728\u306E\u30E6\u30FC\u30B6\u30FC\u304C\u7F72\u540D\u3057\u3066\u304B\u3089\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u304C\u5909\u66F4\u307E\u305F\u306F\u7834\u640D\u3057\u3066\u3044\u307E\u3059",viewCertificateDetails:"\u8A3C\u660E\u66F8\u306E\u8A73\u7D30\u3092\u8868\u793A\u3059\u308B",unknownSignature:"\u7F72\u540D\u306E\u6709\u52B9\u6027\u306F\u4E0D\u660E\u3067\u3059",atLeastOneInvalid:"\u5C11\u306A\u304F\u3068\u30821\u3064\u306E\u7F72\u540D\u304C\u7121\u52B9\u3067\u3059",viewAllSignatures:"\u3059\u3079\u3066\u306E\u7F72\u540D\u3092\u8868\u793A"},certificateViewerDialog:{title:"\u8A3C\u660E\u66F8\u30D3\u30E5\u30FC\u30A2",abstracts:"\u6284\u9332",summary:"\u307E\u3068\u3081",issuedTo:"\u767A\u884C\u5BFE\u8C61\u8005:",issuer:"\u767A\u884C\u8005:",validFrom:"\u6709\u52B9\u671F\u9650:",validTo:"\u6709\u52B9\u671F\u9650:",intendedUsage:"\u4F7F\u7528\u76EE\u7684:",details:"\u8A73\u7D30",version:"\u30D0\u30FC\u30B8\u30E7\u30F3",algorithm:"\u30A2\u30EB\u30B4\u30EA\u30BA\u30E0",subject:"\u4E3B\u984C",serialNumber:"\u30B7\u30EA\u30A2\u30EB\u30CA\u30F3\u30D0\u30FC",certificatePolicy:"\u8A3C\u660E\u66F8\u30DD\u30EA\u30B7\u30FC:",crlDistributionPoints:"CRL \u914D\u5E03\u30DD\u30A4\u30F3\u30C8:",issuerInfoAccess:"\u767A\u884C\u8005\u60C5\u5831\u3078\u306E\u30A2\u30AF\u30BB\u30B9:",issuerKeyIdentifier:"\u767A\u884C\u8005\u306E\u30AD\u30FC\u8B58\u5225\u5B50:",subjectKeyIdentifier:"\u30B5\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u30AD\u30FC\u8B58\u5225\u5B50:",basicConstraints:"\u57FA\u672C\u7684\u306A\u5236\u7D04:",keyUsage:"\u30AD\u30FC\u306E\u4F7F\u7528\u6CD5:",publicKey:"\u516C\u958B\u9375:",X509:"X.509 \u30C7\u30FC\u30BF:",SHA1Digest:"SHA1 \u30C0\u30A4\u30B8\u30A7\u30B9\u30C8:",MD5Digest:"MD5 \u30C0\u30A4\u30B8\u30A7\u30B9\u30C8:",trust:"\u4FE1\u983C",trustedTo:"\u3053\u306E\u8A3C\u660E\u66F8\u306F\u4EE5\u4E0B\u306B\u5BFE\u3057\u3066\u4FE1\u983C\u3055\u308C\u307E\u3059:",sign:"\u6587\u66F8\u307E\u305F\u306F\u30C7\u30FC\u30BF\u306B\u7F72\u540D\u3059\u308B",certify:"\u8A3C\u660E\u66F8\u985E",addToTrust:"\u4FE1\u983C\u3067\u304D\u308B\u8A3C\u660E\u66F8\u306B\u8FFD\u52A0",done:"\u7D42\u4E86"},deleteConfirm:"\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B?",addDigitalFileDialog:{title:"\u30C7\u30B8\u30BF\u30EBID\u3092\u8FFD\u52A0\u3059\u308B",desc:"\u30C7\u30B8\u30BF\u30EBID\u30D5\u30A1\u30A4\u30EB\u3092\u53C2\u7167\u3057\u307E\u3059\u3002\u30C7\u30B8\u30BF\u30EBID\u306F\u30D1\u30B9\u30EF\u30FC\u30C9\u3067\u4FDD\u8B77\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u5206\u304B\u3089\u306A\u3044\u5834\u5408\u3001\u30C7\u30B8\u30BF\u30EBID\u3092\u53D6\u5F97\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093\u3002",certificateFile:"\u8A3C\u660E\u66F8\u30D5\u30A1\u30A4\u30EB",uploadFile:"\u8A3C\u660E\u66F8\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3059\u308B",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",password:"\u30D1\u30B9\u30EF\u30FC\u30C9",enterPassword:"\u8A3C\u660E\u66F8\u306E\u30D1\u30B9\u30EF\u30FC\u30C9",invalidPassword:"\u7121\u52B9\u306A\u30D1\u30B9\u30EF\u30FC\u30C9"},appearanceDialog:{title:"\u7F72\u540D\u306E\u5916\u89B3\u3092\u30AB\u30B9\u30BF\u30DE\u30A4\u30BA\u3059\u308B",signHere:"\u3053\u3053\u306B\u7F72\u540D\u3057\u3066\u304F\u3060\u3055\u3044",includeText:"\u30C6\u30AD\u30B9\u30C8\u3092\u542B\u3081\u308B",name:"\u540D\u524D",dName:"\u8B58\u5225\u53EF\u80FD\u306A\u540D\u524D",date:"\u65E5\u4ED8",ComPDFKitVersion:"ComPDFKit \u30D0\u30FC\u30B8\u30E7\u30F3",logo:"\u30ED\u30B4",location:"\u4F4D\u7F6E",reason:"\u7406\u7531",signReason:"\u7406\u7531",docOwner:"\u79C1\u306F\u6587\u66F8\u306E\u6240\u6709\u8005\u3067\u3059",approvingDoc:"\u6587\u66F8\u3092\u627F\u8A8D\u3057\u3066\u3044\u307E\u3059",reviewedDoc:"\u6587\u66F8\u3092\u78BA\u8A8D\u3057\u307E\u3057\u305F",labels:"\u30E9\u30D9\u30EB",text:"\u6587\u7AE0",type:"\u30BF\u30A4\u30D7",textAlignment:"\u30C6\u30AD\u30B9\u30C8\u306E\u914D\u7F6E"}},color$3="\u8272",opacity$3="\u4E0D\u900F\u660E\u5EA6",font$3="\u30D5\u30A9\u30F3\u30C8",regular$3="\u901A\u5E38",oblique$3="\u659C\u3081",bold$3="\u592A\u5B57",boldOblique$3="\u592A\u5B57\u659C\u7DDA",warning$2="Warning",colon$2=": ",compare$4={startCompare:"\u6BD4\u8F03\u3092\u958B\u59CB\u3059\u308B",exit:"\u9000\u51FA",oldFile:"\u53E4\u3044\u30D5\u30A1\u30A4\u30EB",newFile:"\u65B0\u3057\u3044\u30D5\u30A1\u30A4\u30EB",dropFile:["\u3053\u3053\u306B PDF \u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7\u3057\u307E\u3059","\u307E\u305F\u306F"],chooseOldFile:"\u53E4\u3044\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",chooseNewFile:"\u65B0\u3057\u3044\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",comingSoon:"\u6BD4\u8F03\u7D50\u679C\u306F\u8FD1\u65E5\u516C\u958B\u4E88\u5B9A\u3067\u3059",contentComparison:"\u5185\u5BB9\u306E\u6BD4\u8F03",compareItems:"\u9805\u76EE\u306E\u6BD4\u8F03",text:"\u6587\u7AE0",images:"\u753B\u50CF",colorMark:"\u8272\u3068\u30DE\u30FC\u30AF\u306E\u9055\u3044",replacedContent:"\u7F6E\u304D\u63DB\u3048\u3089\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4",insertedContent:"\u633F\u5165\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4",deletedContent:"\u524A\u9664\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4",overlayComparison:"\u30AA\u30FC\u30D0\u30FC\u30EC\u30A4\u306E\u6BD4\u8F03",blendMode:"\u30D6\u30EC\u30F3\u30C9\u30E2\u30FC\u30C9",normal:"\u666E\u901A",multiply:"\u4E57\u7B97",screen:"\u753B\u9762",overlay:"\u304B\u3076\u305B\u308B",darken:"\u6697\u304F\u3059\u308B",lighten:"\u660E\u308B\u304F\u3059\u308B",colorDodge:"\u30AB\u30E9\u30FC\u30C0\u30C3\u30B8",colorBurn:"\u30AB\u30E9\u30FC\u30D0\u30FC\u30F3",hardLight:"\u30CF\u30FC\u30C9\u30E9\u30A4\u30C8",softLight:"\u30BD\u30D5\u30C8\u30E9\u30A4\u30C8",difference:"\u9055\u3044",exclusion:"\u9664\u5916",hue:"\u8272\u76F8",saturation:"\u98FD\u548C",colour:"\u8272",luminosity:"\u660E\u308B\u3055",return:"\u623B\u308B",compare:"\u6BD4\u8F03",downloadOptions:"\u51FA\u529B\u30AA\u30D7\u30B7\u30E7\u30F3\u306E\u9078\u629E",downloadTwoFiles:"\u500B\u5225\u306B\u4FDD\u5B58\u3057\u3066\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",downloadOneFile:"1\u3064\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u7D50\u5408",printSetting:"\u5370\u5237\u8A2D\u5B9A",printOldFile:"\u53E4\u3044\u30D5\u30A1\u30A4\u30EB\u306E\u6BD4\u8F03\u7D50\u679C\u3092\u51FA\u529B\u3059\u308B",printNewFile:"\u65B0\u3057\u3044\u30D5\u30A1\u30A4\u30EB\u306E\u6BD4\u8F03\u7D50\u679C\u3092\u51FA\u529B\u3059\u308B",byComPDFKit:"ComPDFKit\u306B\u3088\u308B\u6BD4\u8F03\u7D50\u679C"},editorPanel$3={textProp:"\u30C6\u30AD\u30B9\u30C8\u306E\u30D7\u30ED\u30D1\u30C6\u30A3",fontColor:"\u30D5\u30A9\u30F3\u30C8\u306E\u8272",textStyle:"\u30C6\u30AD\u30B9\u30C8\u30B9\u30BF\u30A4\u30EB",spacing:"\u9593\u9694",characterSpacing:"\u6587\u5B57\u9593\u9694",lineSpacing:"\u884C\u9593",paragraphSpacing:"\u6BB5\u843D\u306E\u9593\u9694",imageProp:"\u753B\u50CF\u306E\u30D7\u30ED\u30D1\u30C6\u30A3",rotate:"\u56DE\u8EE2",rotateLeft:"\u5DE6\u306B\u56DE\u8EE2",rotateRight:"\u53F3\u306B\u56DE\u8EE2",flip:"\u53CD\u8EE2",flipHorizontal:"\u6C34\u5E73\u65B9\u5411\u306B\u53CD\u8EE2",flipVertical:"\u5782\u76F4\u65B9\u5411\u306B\u53CD\u8EE2",tools:"\u30C4\u30FC\u30EB",replace:"\u7F6E\u63DB",export:"\u51FA\u529B",crop:"\u5207\u308A\u53D6\u308A",maximum:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u753B\u50CF\u306E\u6700\u5927\u30B5\u30A4\u30BA: 2MB\u3002"},documentEditor$3={save:"\u4FDD\u5B58",saveAs:"\u540D\u524D\u3092\u4ED8\u3051\u3066\u4FDD\u5B58...",insert:"\u633F\u5165",delete:"\u6D88\u53BB",rotateRight:"\u53F3\u306B\u56DE\u8EE2",rotateLeft:"\u5DE6\u306B\u56DE\u8EE2",copy:"\u30B3\u30D4\u30FC",extract:"\u62BD\u51FA",replace:"\u4EA4\u63DB",move:"\u79FB\u52D5",selectAll:"\u3059\u3079\u3066\u9078\u629E",dialog:{insertPages:"\u30DA\u30FC\u30B8\u306E\u633F\u5165",blankPage:"\u7A7A\u767D\u306E\u30DA\u30FC\u30B8",customPage:"\u30AB\u30B9\u30BF\u30E0\u306E\u7A7A\u767D\u30DA\u30FC\u30B8",fromPdf:"PDF\u304B\u3089",selectFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",pageRange:"\u30DA\u30FC\u30B8\u7BC4\u56F2",allPages:"\u3059\u3079\u3066\u306E\u30DA\u30FC\u30B8",oddPage:"\u5947\u6570\u30DA\u30FC\u30B8\u306E\u307F",evenPage:"\u5076\u6570\u30DA\u30FC\u30B8\u306E\u307F",customRange:"\u30AB\u30B9\u30BF\u30E0\u7BC4\u56F2",insertTo:"\u633F\u5165\u5148",firstPage:"\u6700\u521D\u306E\u30DA\u30FC\u30B8",lastPage:"\u6700\u5F8C\u306E\u30DA\u30FC\u30B8",page:"\u30DA\u30FC\u30B8",pageTip:"\u4F8B\u3048\u30703\u30015\uFF5E10",before:"\u524D\u306B",after:"\u5F8C"},deleteConfirmText:"\u30DA\u30FC\u30B8\u3092\u524A\u9664\u3057\u307E\u3059\u304B?",eachPage:"\u500B\u5225\u306E\u30D5\u30A1\u30A4\u30EB\u5185\u306E\u5404\u30DA\u30FC\u30B8",deleteAfter:"\u62BD\u51FA\u5F8C\u306B\u30DA\u30FC\u30B8\u3092\u524A\u9664\u3059\u308B",moveTo:"\u30DA\u30FC\u30B8\u306E\u5F8C\u306B\u79FB\u52D5:",inputPageTip:"0\u304B\u3089\u6700\u5927\u30DA\u30FC\u30B8\u756A\u53F7\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},paste$3="\u8CBC\u308A\u4ED8\u3051",properties$3="\u30D7\u30ED\u30D1\u30C6\u30A3",security$3={pwdProtection:"\u30D1\u30B9\u30EF\u30FC\u30C9\u4FDD\u8B77",encryption:"\u6697\u53F7\u5316",decryption:"\u5FA9\u53F7\u5316",redaction:"\u58A8\u6D88\u3057",fillBlack:"\u9ED2\u3067\u5857\u308A\u3064\u3076\u3059",fillWhite:"\u767D\u3067\u5857\u308A\u3064\u3076\u3059",caution:"\u6CE8\u610F",enterTip:"\u7DE8\u96C6\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u3053\u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u304B\u3089\u6C38\u4E45\u306B\u524A\u9664\u3055\u308C\u307E\u3059\u3002\u30A2\u30AF\u30B7\u30E7\u30F3\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",understand:"\u7406\u89E3\u3057\u3066\u59CB\u3081\u308B",applyTip:"\u7DE8\u96C6\u3092\u9069\u7528\u3059\u308B\u3068\u3001\u7DE8\u96C6\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u5B8C\u5168\u306B\u524A\u9664\u3055\u308C\u307E\u3059\u3002",exit:"\u9000\u51FA",apply:"\u9069\u7528",note:"\u6CE8\u8A18",exitTip:"\u7DE8\u96C6\u306F\u9069\u7528\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u672C\u5F53\u306B\u9000\u51FA\u3057\u307E\u3059\u304B?",exitConfirm:"\u9000\u51FA",saveTip:["\u3053\u306E\u6587\u66F8\u5185\u306E\u3059\u3079\u3066\u306E\u7DE8\u96C6\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u5B8C\u5168\u306B\u524A\u9664\u3055\u308C\u3001\u5FA9\u5143\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093\u3002","\u305D\u308C\u3089\u3092\u7DE8\u96C6\u3057\u3066\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B?"],save:"\u4FDD\u5B58"},layer$3={show:"\u8868\u793A",hide:"\u96A0\u3059",lock:"\u30ED\u30C3\u30AF",unlock:"\u30ED\u30C3\u30AF\u3092\u89E3\u9664",lockedTip:"\u73FE\u5728\u306E\u30EC\u30A4\u30E4\u30FC\u306F\u30ED\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u8868\u793A/\u975E\u8868\u793A\u3092\u5909\u66F4\u3059\u308B\u306B\u306F\u3001\u307E\u305A\u30EC\u30A4\u30E4\u30FC\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3067\u30ED\u30C3\u30AF\u3092\u89E3\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002",ok:"OK",setProperty:"\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306E\u8A2D\u5B9A",layerProperty:"\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3",layerName:"\u30EC\u30A4\u30E4\u30FC\u540D",enterLayerName:"\u30EC\u30A4\u30E4\u30FC\u540D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",defaultSettings:"\u30C7\u30D5\u30A9\u30EB\u30C8\u8A2D\u5B9A",defaultShow:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F\u3068\u304D\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u8868\u793A",defaultHide:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F\u3068\u304D\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u975E\u8868\u793A",lockLayer:"\u30ED\u30C3\u30AF\u30EC\u30A4\u30E4\u30FC",printProperty:"\u5370\u5237\u30D7\u30ED\u30D1\u30C6\u30A3",always:"\u3044\u3064\u3082",never:"\u4E00\u5EA6\u3082\u306A\u3044",printVisible:"\u8868\u793A\u3055\u308C\u3066\u3044\u308B\u3068\u304D\u306B\u5370\u5237\u3059\u308B",exportProperty:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30D7\u30ED\u30D1\u30C6\u30A3",exportVisible:"\u8868\u793A\u3055\u308C\u305F\u3089\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",copyLink:"\u30EA\u30F3\u30AF\u3092\u30B3\u30D4\u30FC"},colorSeparation$3={toggleColor:"\u8272\u306E\u5207\u308A\u66FF\u3048",notShowTip:"\u8272\u306F\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306B\u8868\u793A\u3055\u308C\u307E\u305B\u3093",accessOnPc:"\u3053\u306E\u6A5F\u80FD\u306F\u30E2\u30D0\u30A4\u30EB\u3067\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002\u6700\u9AD8\u306E\u30A8\u30AF\u30B9\u30DA\u30EA\u30A8\u30F3\u30B9\u3092\u5F97\u308B\u306B\u306F PC \u3067\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u304F\u3060\u3055\u3044\u3002"},measurement$3={scale:"\u898F\u6A21",length:"\u9577\u3055",precision:"\u7CBE\u5EA6",angle:"\u89D2\u5EA6",radius:"\u534A\u5F84",perimeter:"\u5468\u56F2",area:"\u30A8\u30EA\u30A2",reply:"\u8FD4\u4E8B",drawingToActual:"\u56F3\u9762\u5BF8\u6CD5\uFF1A\u5B9F\u5BF8",settingScale:"\u898F\u6A21",pt:"\u30DD\u30A4\u30F3\u30C8",in:"\u3067",mm:"mm",cm:"cm",m:"\u30E1\u30FC\u30C8\u30EB",km:"km",ft:"\u30D5\u30A3\u30FC\u30C8",yd:"\u30E4\u30FC\u30C9",mi:"\u79C1",measurementSettings:"\u6E2C\u5B9A\u8A2D\u5B9A",scaleError:"\u30B9\u30B1\u30FC\u30EB\u306F 0 \u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093",showCaption:"\u30AD\u30E3\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A",done:"\u7D42\u308F\u308A"},measurementPanel$3={appearance:"\u5916\u89B3",lineColor:"\u7DDA\u306E\u8272",fillColor:"\u5857\u308A\u3064\u3076\u3057\u306E\u8272",lineWidth:"\u7DDA\u306E\u5E45",lineStyle:"\u7DDA\u3068\u67A0\u7DDA\u306E\u30B9\u30BF\u30A4\u30EB",start:"\u59CB\u3081\u308B",end:"\u7D42\u308F\u308A",fontColor:"\u30D5\u30A9\u30F3\u30C8\u306E\u8272",fontStyle:"\u30D5\u30A9\u30F3\u30C8\u30B9\u30BF\u30A4\u30EB",note:"\u6CE8\u8A18"},ja={header:header$3,nextPage:nextPage$4,previousPage:previousPage$4,loading:loading$3,upload:upload$3,exit:exit$3,leftPanel:leftPanel$3,pageModePanel:pageModePanel$3,stampPanel:stampPanel$3,linkPanel:linkPanel$3,rightPanel:rightPanel$3,prevent:prevent$3,passwordDialog:passwordDialog$3,ok:ok$3,cancel:cancel$3,continue:"\u7D9A\u3051\u308B",signatures:signatures$3,color:color$3,opacity:opacity$3,font:font$3,regular:regular$3,oblique:oblique$3,bold:bold$3,boldOblique:boldOblique$3,delete:"\u6D88\u53BB",warning:warning$2,colon:colon$2,compare:compare$4,editorPanel:editorPanel$3,documentEditor:documentEditor$3,paste:paste$3,properties:properties$3,security:security$3,layer:layer$3,colorSeparation:colorSeparation$3,measurement:measurement$3,measurementPanel:measurementPanel$3},header$2={leftPanel:"\u0E41\u0E1C\u0E07\u0E14\u0E49\u0E32\u0E19\u0E0B\u0E49\u0E32\u0E22",fullScreen:"\u0E40\u0E15\u0E47\u0E21\u0E08\u0E2D",pan:"\u0E01\u0E23\u0E30\u0E17\u0E30",cropPage:"\u0E2A\u0E19\u0E34\u0E1B",zoomIn:"\u0E0B\u0E39\u0E21\u0E40\u0E02\u0E49\u0E32",zoomOut:"\u0E0B\u0E39\u0E21\u0E2D\u0E2D\u0E01",light:"\u0E41\u0E2A\u0E07\u0E2A\u0E27\u0E48\u0E32\u0E07",dark:"\u0E21\u0E37\u0E14",lightMode:"\u0E42\u0E2B\u0E21\u0E14\u0E41\u0E2A\u0E07",darkMode:"\u0E42\u0E2B\u0E21\u0E14\u0E21\u0E37\u0E14",openFile:"\u0E40\u0E1B\u0E34\u0E14\u0E44\u0E1F\u0E25\u0E4C",search:"\u0E04\u0E49\u0E19\u0E2B\u0E32",rightPanel:"\u0E41\u0E1C\u0E07\u0E14\u0E49\u0E32\u0E19\u0E02\u0E27\u0E32",viewSetting:"\u0E14\u0E39\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32",download:"\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14",flatten:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E40\u0E1B\u0E47\u0E19 PDF \u0E41\u0E1A\u0E1A\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E46",print:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C",viewer:"\u0E1C\u0E39\u0E49\u0E14\u0E39",annotations:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",forms:"\u0E41\u0E1A\u0E1A\u0E1F\u0E2D\u0E23\u0E4C\u0E21",signatures:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",security:"\u0E04\u0E27\u0E32\u0E21\u0E1B\u0E25\u0E2D\u0E14\u0E20\u0E31\u0E22",compare:"\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",editor:"\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D\u0E41\u0E01\u0E49\u0E44\u0E02\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32",document:"\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D\u0E41\u0E01\u0E49\u0E44\u0E02\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",separation:"\u0E01\u0E32\u0E23\u0E41\u0E22\u0E01\u0E2A\u0E35",measurement:"\u0E01\u0E32\u0E23\u0E27\u0E31\u0E14",note:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38",highlight:"\u0E44\u0E2E\u0E44\u0E25\u0E17\u0E4C",underline:"\u0E02\u0E35\u0E14\u0E40\u0E2A\u0E49\u0E19\u0E43\u0E15\u0E49",strikeout:"\u0E02\u0E35\u0E14\u0E06\u0E48\u0E32",squiggly:"\u0E44\u0E01\u0E48\u0E40\u0E02\u0E35\u0E48\u0E22",ink:"\u0E2B\u0E21\u0E36\u0E01",circle:"\u0E27\u0E07\u0E01\u0E25\u0E21",square:"\u0E2A\u0E35\u0E48\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21",arrow:"\u0E25\u0E39\u0E01\u0E28\u0E23",line:"\u0E40\u0E2A\u0E49\u0E19",freetext:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E1F\u0E23\u0E35",stamp:"\u0E41\u0E2A\u0E15\u0E21\u0E1B\u0E4C",image:"\u0E20\u0E32\u0E1E",link:"\u0E25\u0E34\u0E07\u0E04\u0E4C",textField:"\u0E0A\u0E48\u0E2D\u0E07\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",checkbox:"\u0E01\u0E25\u0E48\u0E2D\u0E07\u0E01\u0E32\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22",radioButton:"\u0E1B\u0E38\u0E48\u0E21\u0E27\u0E34\u0E17\u0E22\u0E38",listBox:"\u0E01\u0E25\u0E48\u0E2D\u0E07\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",comboButton:"\u0E1B\u0E38\u0E48\u0E21\u0E04\u0E2D\u0E21\u0E42\u0E1A",button:"\u0E1B\u0E38\u0E48\u0E21\u0E01\u0E14",settings:{settings:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32",author:"\u0E1C\u0E39\u0E49\u0E40\u0E02\u0E35\u0E22\u0E19",annotator:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",language:"\u0E20\u0E32\u0E29\u0E32",highlightLink:"\u0E44\u0E2E\u0E44\u0E25\u0E17\u0E4C\u0E25\u0E34\u0E07\u0E04\u0E4C",highlightForm:"\u0E44\u0E2E\u0E44\u0E25\u0E17\u0E4C\u0E1F\u0E2D\u0E23\u0E4C\u0E21",fillConsecutively:"\u0E01\u0E23\u0E2D\u0E01\u0E44\u0E1B\u0E40\u0E23\u0E37\u0E48\u0E2D\u0E22\u0E46",creationInfo:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E01\u0E32\u0E23\u0E2A\u0E23\u0E49\u0E32\u0E07",version:"\u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E19"},addText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",addImage:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E",undo:"\u0E40\u0E25\u0E34\u0E01\u0E17\u0E33",redo:"\u0E17\u0E33\u0E0B\u0E49\u0E33",createSignField:"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",addDigitalSign:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",addElectronicSign:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E2D\u0E34\u0E40\u0E25\u0E47\u0E01\u0E17\u0E23\u0E2D\u0E19\u0E34\u0E01\u0E2A\u0E4C",verifyDigitalSign:"\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",measureLine:"\u0E40\u0E2A\u0E49\u0E19",measureMultiline:"\u0E2B\u0E25\u0E32\u0E22\u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14",measurePolygon:"\u0E23\u0E39\u0E1B\u0E2B\u0E25\u0E32\u0E22\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21",measureRectangle:"\u0E2A\u0E35\u0E48\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21\u0E1C\u0E37\u0E19\u0E1C\u0E49\u0E32",measureCircle:"\u0E27\u0E07\u0E01\u0E25\u0E21"},nextPage$3="\u0E15\u0E48\u0E2D\u0E44\u0E1B",previousPage$3="\u0E01\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32",loading$2="\u0E01\u0E33\u0E25\u0E31\u0E07\u0E42\u0E2B\u0E25\u0E14",upload$2="\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14",exit$2="\u0E2D\u0E2D\u0E01",leftPanel$2={thumbnails:"\u0E20\u0E32\u0E1E\u0E02\u0E19\u0E32\u0E14\u0E22\u0E48\u0E2D",outlines:"\u0E42\u0E04\u0E23\u0E07\u0E23\u0E48\u0E32\u0E07",noOutlines:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E42\u0E04\u0E23\u0E07\u0E23\u0E48\u0E32\u0E07",layers:"\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",noLayers:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",menu:"\u0E40\u0E21\u0E19\u0E39",showAll:"\u0E41\u0E2A\u0E14\u0E07\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",hideAll:"\u0E0B\u0E48\u0E2D\u0E19\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",restoreSettings:"\u0E04\u0E37\u0E19\u0E04\u0E48\u0E32\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",exportLayers:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",layerProperty:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",exportLayer:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C\u0E19\u0E35\u0E49",annotations:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",noAnnotations:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",importAnnotations:"\u0E19\u0E33\u0E40\u0E02\u0E49\u0E32\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",exportAnnotations:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",search:"\u0E04\u0E49\u0E19\u0E2B\u0E32",searchPdf:"\u0E04\u0E49\u0E19\u0E2B\u0E32 PDF",page:"\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",whichPage:["\u0E2B\u0E19\u0E49\u0E32",""],previousPhrase:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E27\u0E25\u0E35\u0E17\u0E35\u0E48\u0E40\u0E01\u0E34\u0E14\u0E02\u0E36\u0E49\u0E19\u0E01\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32",nextPhrase:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E27\u0E25\u0E35\u0E16\u0E31\u0E14\u0E44\u0E1B",results:"\u0E1C\u0E25\u0E25\u0E31\u0E1E\u0E18\u0E4C",noResults:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E1C\u0E25\u0E25\u0E31\u0E1E\u0E18\u0E4C",signature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",signatureList:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",signatureDetails:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",certificationDetails:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E01\u0E32\u0E23\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",noSignatures:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",marked:"\u0E17\u0E33\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22",unmarked:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22",accepted:"\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E22\u0E2D\u0E21\u0E23\u0E31\u0E1A",rejected:"\u0E1B\u0E0F\u0E34\u0E40\u0E2A\u0E18",cancelled:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",completed:"\u0E2A\u0E21\u0E1A\u0E39\u0E23\u0E13\u0E4C",none:"\u0E44\u0E21\u0E48\u0E21\u0E35",edit:"\u0E41\u0E01\u0E49\u0E44\u0E02",delete:"\u0E25\u0E1A",replyPlaceholder:"\u0E15\u0E2D\u0E1A\u0E01\u0E25\u0E31\u0E1A\u0E2B\u0E23\u0E37\u0E2D\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E27\u0E32\u0E21\u0E04\u0E34\u0E14",reply:"\u0E15\u0E2D\u0E1A",confirm:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19"},pageModePanel$2={displayMode:"\u0E42\u0E2B\u0E21\u0E14\u0E01\u0E32\u0E23\u0E41\u0E2A\u0E14\u0E07\u0E1C\u0E25",singlePage:"\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E14\u0E35\u0E22\u0E27",twoPages:"\u0E2A\u0E2D\u0E07\u0E2B\u0E19\u0E49\u0E32",coverMode:"\u0E42\u0E2B\u0E21\u0E14\u0E1B\u0E01",splitView:"\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19",vertical:"\u0E01\u0E32\u0E23\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",horizontal:"\u0E01\u0E32\u0E23\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",themes:"\u0E18\u0E35\u0E21\u0E2A\u0E4C"},stampPanel$2={standard:"\u0E21\u0E32\u0E15\u0E23\u0E10\u0E32\u0E19",dynamic:"\u0E1E\u0E25\u0E27\u0E31\u0E15"},linkPanel$2={linkTo:"\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E21\u0E42\u0E22\u0E07\u0E44\u0E1B\u0E22\u0E31\u0E07",url:"URL",goToPages:"\u0E44\u0E1B\u0E17\u0E35\u0E48\u0E2B\u0E19\u0E49\u0E32",email:"\u0E2D\u0E35\u0E40\u0E21\u0E25",go:"\u0E44\u0E1B"},rightPanel$2={general:"\u0E17\u0E31\u0E48\u0E27\u0E44\u0E1B",name:"\u0E0A\u0E37\u0E48\u0E2D",formField:"\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E41\u0E1A\u0E1A\u0E1F\u0E2D\u0E23\u0E4C\u0E21",visible:"\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19\u0E44\u0E14\u0E49",hidden:"\u0E17\u0E35\u0E48\u0E0B\u0E48\u0E2D\u0E19\u0E2D\u0E22\u0E39\u0E48",properties:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34",requried:"\u0E08\u0E33\u0E40\u0E1B\u0E47\u0E19",differentNameError:"\u0E42\u0E1B\u0E23\u0E14\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E2D\u0E37\u0E48\u0E19",buttonText:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E02\u0E2D\u0E07\u0E1B\u0E38\u0E48\u0E21",appearance:"\u0E23\u0E39\u0E1B\u0E23\u0E48\u0E32\u0E07",backgroundColor:"\u0E2A\u0E35\u0E1E\u0E37\u0E49\u0E19\u0E2B\u0E25\u0E31\u0E07",preferences:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32",alignment:"\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07",left:"\u0E0B\u0E49\u0E32\u0E22",center:"\u0E28\u0E39\u0E19\u0E22\u0E4C",right:"\u0E02\u0E27\u0E32",defaultValue:"\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",multiLine:"\u0E2B\u0E25\u0E32\u0E22\u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14",buttonStyle:"\u0E2A\u0E44\u0E15\u0E25\u0E4C\u0E1B\u0E38\u0E48\u0E21",check:"\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A",circle:"\u0E27\u0E07\u0E01\u0E25\u0E21",cross:"\u0E02\u0E49\u0E32\u0E21",diamond:"\u0E40\u0E1E\u0E0A\u0E23",square:"\u0E2A\u0E35\u0E48\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21",star:"\u0E14\u0E32\u0E27",defaultChecked:"\u0E1B\u0E38\u0E48\u0E21\u0E08\u0E30\u0E16\u0E39\u0E01\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E42\u0E14\u0E22\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",item:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",itemList:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",option:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",selectAction:"\u0E40\u0E25\u0E37\u0E2D\u0E01 \u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23",none:"\u0E44\u0E21\u0E48\u0E21\u0E35",goPage:"\u0E44\u0E1B\u0E17\u0E35\u0E48\u0E2B\u0E19\u0E49\u0E32",openLink:"\u0E40\u0E1B\u0E34\u0E14\u0E40\u0E27\u0E47\u0E1A\u0E25\u0E34\u0E07\u0E04\u0E4C",addUrl:"\u0E40\u0E1E\u0E34\u0E48\u0E21 URL",addPage:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2B\u0E19\u0E49\u0E32",radioBtnTip1:"1 \u0E1B\u0E38\u0E48\u0E21\u0E43\u0E19\u0E01\u0E25\u0E38\u0E48\u0E21 \u0E08\u0E33\u0E40\u0E1B\u0E47\u0E19\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35\u0E1B\u0E38\u0E48\u0E21\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22 2 \u0E1B\u0E38\u0E48\u0E21",radioBtnTip2:"\u0E2B\u0E32\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E0A\u0E38\u0E14\u0E1B\u0E38\u0E48\u0E21\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E23\u0E48\u0E27\u0E21\u0E01\u0E31\u0E19\u0E42\u0E14\u0E22\u0E40\u0E09\u0E1E\u0E32\u0E30 (\u0E40\u0E0A\u0E48\u0E19 \u0E42\u0E14\u0E22\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E14\u0E49\u0E40\u0E1E\u0E35\u0E22\u0E07\u0E1B\u0E38\u0E48\u0E21\u0E40\u0E14\u0E35\u0E22\u0E27\u0E43\u0E19\u0E41\u0E15\u0E48\u0E25\u0E30\u0E04\u0E23\u0E31\u0E49\u0E07) \u0E42\u0E1B\u0E23\u0E14\u0E15\u0E31\u0E49\u0E07\u0E0A\u0E37\u0E48\u0E2D\u0E0A\u0E48\u0E2D\u0E07\u0E43\u0E2B\u0E49\u0E40\u0E2B\u0E21\u0E37\u0E2D\u0E19\u0E01\u0E31\u0E19",listBoxTip:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E43\u0E19\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E43\u0E2B\u0E49\u0E40\u0E1B\u0E47\u0E19\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19"},prevent$2={title:"Not Available in Server-Backed",standalone:"Standalone",description:"Content Editor is only available on Standalone. Change to Standalone to edit PDF content.",description1:"Document Editor is only available on Standalone. Change to Standalone to edit PDF pages."},passwordDialog$2={enterPwd:"\u0E1B\u0E49\u0E2D\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E14\u0E39\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",enterPwdPlaceholder:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",wrongPwd:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E1C\u0E34\u0E14",encryptPdf:"\u0E40\u0E02\u0E49\u0E32\u0E23\u0E2B\u0E31\u0E2A PDF \u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",encrypt:"\u0E40\u0E02\u0E49\u0E32\u0E23\u0E2B\u0E31\u0E2A",supportTip:"\u0E2A\u0E19\u0E31\u0E1A\u0E2A\u0E19\u0E38\u0E19: \u0E15\u0E31\u0E27\u0E40\u0E25\u0E02, \u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23, {'@'}, $, !, %, ?, &",removePwdSuccess:"\u0E25\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27!",removePwdFailure:"\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E14\u0E49",setPwdSuccess:"\u0E15\u0E31\u0E49\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A\u0E44\u0E1F\u0E25\u0E4C\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!",setPwdFailure:"\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E15\u0E31\u0E49\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E44\u0E14\u0E49",note:["\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38:","- \u0E01\u0E32\u0E23\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E41\u0E1B\u0E25\u0E07\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14\u0E08\u0E30\u0E21\u0E35\u0E1C\u0E25\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14","- \u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E14\u0E49\u0E15\u0E25\u0E2D\u0E14\u0E40\u0E27\u0E25\u0E32\u0E01\u0E48\u0E2D\u0E19\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14"]},ok$2="\u0E15\u0E01\u0E25\u0E07",cancel$2="\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",signatures$2={tip:"\u0E42\u0E1B\u0E23\u0E14\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E01\u0E48\u0E2D\u0E19 \u0E08\u0E32\u0E01\u0E19\u0E31\u0E49\u0E19\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E2D\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",trackpad:"\u0E41\u0E17\u0E23\u0E47\u0E04\u0E41\u0E1E\u0E14",lineWidth:"\u0E04\u0E27\u0E32\u0E21\u0E01\u0E27\u0E49\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19",keyboard:"\u0E04\u0E35\u0E22\u0E4C\u0E1A\u0E2D\u0E23\u0E4C\u0E14",signHere:"\u0E25\u0E07\u0E0A\u0E37\u0E48\u0E2D\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48",image:"\u0E20\u0E32\u0E1E",selectFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",none:"\u0E44\u0E21\u0E48\u0E21\u0E35",clear:"\u0E0A\u0E31\u0E14\u0E40\u0E08\u0E19",save:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E41\u0E25\u0E30\u0E19\u0E33\u0E44\u0E1B\u0E43\u0E0A\u0E49",uploadError:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E\u0E17\u0E35\u0E48\u0E21\u0E35\u0E02\u0E19\u0E32\u0E14\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19 1MB",selectTypeDialog:{selectType:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",signWithElectronic:"\u0E25\u0E07\u0E19\u0E32\u0E21\u0E14\u0E49\u0E27\u0E22\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E2D\u0E34\u0E40\u0E25\u0E47\u0E01\u0E17\u0E23\u0E2D\u0E19\u0E34\u0E01\u0E2A\u0E4C",signWithElectronicDesc:"\u0E27\u0E32\u0E14 \u0E1E\u0E34\u0E21\u0E1E\u0E4C \u0E2B\u0E23\u0E37\u0E2D\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E0B\u0E47\u0E19\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C",signWithDigital:"\u0E25\u0E07\u0E19\u0E32\u0E21\u0E14\u0E49\u0E27\u0E22\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",signWithDigitalDesc:"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E2B\u0E23\u0E37\u0E2D\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E14\u0E49\u0E27\u0E22\u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E0B\u0E49\u0E33\u0E01\u0E31\u0E19\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E0B\u0E47\u0E19\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C",startSigning:"\u0E40\u0E23\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E25\u0E07\u0E19\u0E32\u0E21"},detailsDialog:{title:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",signBy:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E41\u0E25\u0E30\u0E25\u0E07\u0E19\u0E32\u0E21\u0E42\u0E14\u0E22",signingTime:"\u0E40\u0E27\u0E25\u0E32\u0E25\u0E07\u0E19\u0E32\u0E21",validitySummary:"\u0E2A\u0E23\u0E38\u0E1B\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E2D\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",validIdentity:"Or \u0E15\u0E31\u0E27\u0E15\u0E19\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E25\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",invalidIdentity:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E23\u0E30\u0E1A\u0E38\u0E15\u0E31\u0E27\u0E15\u0E19\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E25\u0E07\u0E19\u0E32\u0E21\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",unknownIdentity:"\u0E44\u0E21\u0E48\u0E17\u0E23\u0E32\u0E1A\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E2D\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E40\u0E19\u0E37\u0E48\u0E2D\u0E07\u0E08\u0E32\u0E01\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E23\u0E27\u0E21\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13 \u0E41\u0E25\u0E30\u0E44\u0E21\u0E48\u0E21\u0E35\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E2B\u0E25\u0E31\u0E01\u0E43\u0E14\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49",expiredCertificate:"\u0E44\u0E1F\u0E25\u0E4C\u0E16\u0E39\u0E01\u0E40\u0E0B\u0E47\u0E19\u0E0A\u0E37\u0E48\u0E2D\u0E14\u0E49\u0E27\u0E22\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38\u0E41\u0E25\u0E49\u0E27 \u0E2B\u0E32\u0E01\u0E04\u0E38\u0E13\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E44\u0E1F\u0E25\u0E4C\u0E19\u0E35\u0E49\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E23\u0E47\u0E27\u0E46 \u0E19\u0E35\u0E49 \u0E44\u0E1F\u0E25\u0E4C\u0E19\u0E31\u0E49\u0E19\u0E2D\u0E32\u0E08\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E02\u0E2D\u0E07\u0E41\u0E17\u0E49",validSignature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",invalidSignature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",notModifiedDoc:"\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02\u0E19\u0E31\u0E1A\u0E15\u0E31\u0E49\u0E07\u0E41\u0E15\u0E48\u0E21\u0E35\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E19\u0E35\u0E49",alteredDoc:"\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E17\u0E35\u0E48\u0E25\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E44\u0E27\u0E49\u0E21\u0E35\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E41\u0E1B\u0E25\u0E07\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E40\u0E0B\u0E47\u0E19 \u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E1F\u0E25\u0E4C\u0E2D\u0E32\u0E08\u0E40\u0E2A\u0E35\u0E22\u0E2B\u0E32\u0E22 \u0E17\u0E33\u0E43\u0E2B\u0E49\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E44\u0E14\u0E49\u0E2D\u0E35\u0E01\u0E15\u0E48\u0E2D\u0E44\u0E1B",viewCertificateDetails:"\u0E14\u0E39\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",unknownSignature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E23\u0E32\u0E01\u0E0F\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E44\u0E14\u0E49\u0E43\u0E19\u0E02\u0E13\u0E30\u0E19\u0E35\u0E49",atLeastOneInvalid:"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E44\u0E14\u0E49\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38\u0E41\u0E25\u0E49\u0E27",viewAllSignatures:"\u0E41\u0E2A\u0E14\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},certificateViewerDialog:{title:"\u0E1C\u0E39\u0E49\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",abstracts:"\u0E1A\u0E17\u0E04\u0E31\u0E14\u0E22\u0E48\u0E2D",summary:"\u0E2A\u0E23\u0E38\u0E1B",issuedTo:"\u0E2D\u0E2D\u0E01\u0E43\u0E2B\u0E49\u0E01\u0E31\u0E1A:",issuer:"\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",validFrom:"\u0E27\u0E31\u0E19\u0E41\u0E25\u0E30\u0E40\u0E27\u0E25\u0E32\u0E17\u0E35\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E44\u0E14\u0E49:",validTo:"\u0E27\u0E31\u0E19\u0E41\u0E25\u0E30\u0E40\u0E27\u0E25\u0E32\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38:",intendedUsage:"\u0E27\u0E31\u0E15\u0E16\u0E38\u0E1B\u0E23\u0E30\u0E2A\u0E07\u0E04\u0E4C\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19:",details:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14",version:"\u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E19",algorithm:"\u0E2D\u0E31\u0E25\u0E01\u0E2D\u0E23\u0E34\u0E17\u0E36\u0E21",subject:"\u0E40\u0E23\u0E37\u0E48\u0E2D\u0E07",serialNumber:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",certificatePolicy:"\u0E41\u0E19\u0E27\u0E19\u0E42\u0E22\u0E1A\u0E32\u0E22\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",crlDistributionPoints:"\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E16\u0E36\u0E07\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E01\u0E16\u0E2D\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07 (CRL)\u0E42\u0E14\u0E22\u0E41\u0E2A\u0E14\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E25\u0E33\u0E14\u0E31\u0E1A\u0E02\u0E2D\u0E07\u0E41\u0E2B\u0E25\u0E48\u0E07\u0E40\u0E1C\u0E22\u0E41\u0E1E\u0E23\u0E48\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E01\u0E16\u0E2D\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",issuerInfoAccess:"\u0E42\u0E14\u0E22\u0E41\u0E2A\u0E14\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E25\u0E33\u0E14\u0E31\u0E1A\u0E02\u0E2D\u0E07\u0E41\u0E2B\u0E25\u0E48\u0E07\u0E40\u0E1C\u0E22\u0E41\u0E1E\u0E23\u0E48\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E01\u0E16\u0E2D\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",issuerKeyIdentifier:"\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E19\u0E35\u0E49:",subjectKeyIdentifier:"\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E31\u0E27\u0E0B\u0E36\u0E48\u0E07\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E43\u0E0A\u0E49\u0E25\u0E07\u0E25\u0E32\u0E22\u0E21\u0E37\u0E2D\u0E0A\u0E37\u0E48\u0E2D\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E19\u0E35\u0E49:",basicConstraints:"\u0E02\u0E49\u0E2D\u0E08\u0E33\u0E01\u0E31\u0E14\u0E1E\u0E37\u0E49\u0E19\u0E10\u0E32\u0E19:",keyUsage:"\u0E27\u0E31\u0E15\u0E16\u0E38\u0E1B\u0E23\u0E30\u0E2A\u0E07\u0E04\u0E4C\u0E02\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49 public key \u0E0B\u0E36\u0E48\u0E07\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",publicKey:"\u0E01\u0E38\u0E0D\u0E41\u0E08\u0E2A\u0E32\u0E18\u0E32\u0E23\u0E13\u0E30:",X509:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 X.509:",SHA1Digest:"\u0E02\u0E19\u0E32\u0E14 Messenger Digest \u0E02\u0E2D\u0E07 SHA1:",MD5Digest:"\u0E02\u0E19\u0E32\u0E14 Messenger Digest \u0E02\u0E2D\u0E07 MD5:",trust:"\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49",trustedTo:"\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E19\u0E35\u0E49\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49\u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A:",sign:"\u0E25\u0E07\u0E19\u0E32\u0E21\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E2B\u0E23\u0E37\u0E2D\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25",certify:"\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",addToTrust:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49",done:"\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27"},deleteConfirm:"\u0E04\u0E38\u0E13\u0E41\u0E19\u0E48\u0E43\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E27\u0E48\u0E32\u0E08\u0E30\u0E25\u0E1A\u0E21\u0E31\u0E19?",addDigitalFileDialog:{title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",desc:"\u0E40\u0E23\u0E35\u0E22\u0E01\u0E14\u0E39\u0E44\u0E1F\u0E25\u0E4C ID \u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25 \u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E21\u0E35\u0E01\u0E32\u0E23\u0E1B\u0E49\u0E2D\u0E07\u0E01\u0E31\u0E19\u0E14\u0E49\u0E27\u0E22\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 \u0E2B\u0E32\u0E01\u0E04\u0E38\u0E13\u0E44\u0E21\u0E48\u0E17\u0E23\u0E32\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 \u0E04\u0E38\u0E13\u0E08\u0E30\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E23\u0E31\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E44\u0E14\u0E49",certificateFile:"\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",uploadFile:"\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",upload:"\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14",password:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",enterPassword:"\u0E1B\u0E49\u0E2D\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",invalidPassword:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"},appearanceDialog:{title:"\u0E1B\u0E23\u0E31\u0E1A\u0E41\u0E15\u0E48\u0E07\u0E25\u0E31\u0E01\u0E29\u0E13\u0E30\u0E01\u0E32\u0E23\u0E1B\u0E23\u0E32\u0E01\u0E0F\u0E02\u0E2D\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",signHere:"\u0E25\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E02\u0E2D\u0E07\u0E17\u0E48\u0E32\u0E19\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48",includeText:"\u0E23\u0E27\u0E21\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",name:"\u0E0A\u0E37\u0E48\u0E2D",dName:"\u0E0A\u0E37\u0E48\u0E2D\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E17\u0E35\u0E48\u0E21\u0E35\u0E2A\u0E34\u0E17\u0E18\u0E34",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48",ComPDFKitVersion:"\u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E19 ComPDFKit",logo:"\u0E42\u0E25\u0E42\u0E01\u0E49",location:"\u0E17\u0E35\u0E48\u0E15\u0E31\u0E49\u0E07",reason:"\u0E40\u0E2B\u0E15\u0E38\u0E1C\u0E25",signReason:"\u0E40\u0E2B\u0E15\u0E38\u0E1C\u0E25",docOwner:"\u0E09\u0E31\u0E19\u0E40\u0E1B\u0E47\u0E19\u0E40\u0E08\u0E49\u0E32\u0E02\u0E2D\u0E07\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",approvingDoc:"\u0E09\u0E31\u0E19\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2D\u0E19\u0E38\u0E21\u0E31\u0E15\u0E34\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",reviewedDoc:"\u0E09\u0E31\u0E19\u0E44\u0E14\u0E49\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E41\u0E25\u0E49\u0E27",labels:"\u0E1B\u0E49\u0E32\u0E22\u0E01\u0E33\u0E01\u0E31\u0E1A",text:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",type:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C",textAlignment:"\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21"}},color$2="\u0E2A\u0E35",opacity$2="\u0E04\u0E27\u0E32\u0E21\u0E17\u0E36\u0E1A",font$2="\u0E41\u0E1A\u0E1A\u0E2D\u0E31\u0E01\u0E29\u0E23",regular$2="\u0E1B\u0E01\u0E15\u0E34",oblique$2="\u0E40\u0E09\u0E35\u0E22\u0E07",bold$2="\u0E15\u0E31\u0E27\u0E2B\u0E19\u0E32",boldOblique$2="\u0E15\u0E31\u0E27\u0E2B\u0E19\u0E32\u0E40\u0E2D\u0E35\u0E22\u0E07",compare$3={startCompare:"\u0E40\u0E23\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A",exit:"\u0E2D\u0E2D\u0E01",oldFile:"\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E01\u0E48\u0E32",newFile:"\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E2B\u0E21\u0E48",dropFile:["\u0E27\u0E32\u0E07\u0E44\u0E1F\u0E25\u0E4C PDF \u0E17\u0E35\u0E48\u0E19\u0E35\u0E48","\u0E2B\u0E23\u0E37\u0E2D"],chooseOldFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E01\u0E48\u0E32\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",chooseNewFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E2B\u0E21\u0E48\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",comingSoon:"\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E01\u0E33\u0E25\u0E31\u0E07\u0E08\u0E30\u0E21\u0E32\u0E40\u0E23\u0E47\u0E27\u0E46 \u0E19\u0E35\u0E49!",contentComparison:"\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32",compareItems:"\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",text:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",images:"\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E",colorMark:"\u0E2A\u0E35\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E17\u0E33\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22\u0E04\u0E27\u0E32\u0E21\u0E41\u0E15\u0E01\u0E15\u0E48\u0E32\u0E07",replacedContent:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E41\u0E17\u0E19\u0E17\u0E35\u0E48",insertedContent:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E41\u0E17\u0E23\u0E01",deletedContent:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E25\u0E1A",overlayComparison:"\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E01\u0E32\u0E23\u0E0B\u0E49\u0E2D\u0E19\u0E17\u0E31\u0E1A",blendMode:"\u0E42\u0E2B\u0E21\u0E14\u0E1C\u0E2A\u0E21\u0E1C\u0E2A\u0E32\u0E19",normal:"\u0E1B\u0E01\u0E15\u0E34",multiply:"\u0E04\u0E39\u0E13",screen:"\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D",overlay:"\u0E0B\u0E49\u0E2D\u0E19\u0E17\u0E31\u0E1A",darken:"\u0E40\u0E02\u0E49\u0E21\u0E02\u0E36\u0E49\u0E19",lighten:"\u0E2D\u0E48\u0E2D\u0E19\u0E25\u0E07",colorDodge:"\u0E2A\u0E35\u0E14\u0E2D\u0E14\u0E08\u0E4C",colorBurn:"\u0E2A\u0E35\u0E40\u0E1A\u0E34\u0E23\u0E4C\u0E19",hardLight:"\u0E41\u0E2A\u0E07\u0E40\u0E02\u0E49\u0E21",softLight:"\u0E41\u0E2A\u0E07\u0E2D\u0E48\u0E2D\u0E19",difference:"\u0E04\u0E27\u0E32\u0E21\u0E41\u0E15\u0E01\u0E15\u0E48\u0E32\u0E07",exclusion:"\u0E01\u0E32\u0E23\u0E22\u0E01\u0E40\u0E27\u0E49\u0E19",hue:"\u0E04\u0E48\u0E32\u0E2A\u0E35\u0E2A\u0E31\u0E19",saturation:"\u0E04\u0E27\u0E32\u0E21\u0E2D\u0E34\u0E48\u0E21\u0E15\u0E31\u0E27",colour:"\u0E2A\u0E35",luminosity:"\u0E04\u0E27\u0E32\u0E21\u0E2A\u0E48\u0E2D\u0E07\u0E2A\u0E27\u0E48\u0E32\u0E07",return:"\u0E01\u0E25\u0E31\u0E1A",compare:"\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A",downloadOptions:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E41\u0E1A\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E2A\u0E14\u0E07\u0E1C\u0E25",downloadTwoFiles:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E41\u0E25\u0E30\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14\u0E41\u0E22\u0E01\u0E01\u0E31\u0E19",downloadOneFile:"\u0E23\u0E27\u0E21\u0E40\u0E1B\u0E47\u0E19\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E14\u0E35\u0E22\u0E27",printSetting:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E01\u0E32\u0E23\u0E1E\u0E34\u0E21\u0E1E\u0E4C",printOldFile:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E01\u0E48\u0E32",printNewFile:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E02\u0E2D\u0E07\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E2B\u0E21\u0E48",byComPDFKit:"\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E42\u0E14\u0E22 ComPDFKit"},editorPanel$2={textProp:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",fontColor:"\u0E2A\u0E35\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",textStyle:"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",spacing:"\u0E23\u0E30\u0E22\u0E30\u0E2B\u0E48\u0E32\u0E07",characterSpacing:"\u0E01\u0E32\u0E23\u0E40\u0E27\u0E49\u0E19\u0E27\u0E23\u0E23\u0E04\u0E2D\u0E31\u0E01\u0E02\u0E23\u0E30",lineSpacing:"\u0E23\u0E30\u0E22\u0E30\u0E2B\u0E48\u0E32\u0E07\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14",paragraphSpacing:"\u0E23\u0E30\u0E22\u0E30\u0E2B\u0E48\u0E32\u0E07\u0E22\u0E48\u0E2D\u0E2B\u0E19\u0E49\u0E32",imageProp:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E20\u0E32\u0E1E",rotate:"\u0E2B\u0E21\u0E38\u0E19",rotateLeft:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E0B\u0E49\u0E32\u0E22",rotateRight:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E02\u0E27\u0E32",flip:"\u0E1E\u0E25\u0E34\u0E01",flipHorizontal:"\u0E1E\u0E25\u0E34\u0E01\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",flipVertical:"\u0E1E\u0E25\u0E34\u0E01\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",tools:"\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D",replace:"\u0E41\u0E17\u0E19\u0E17\u0E35\u0E48",export:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01",crop:"\u0E04\u0E23\u0E2D\u0E1A\u0E15\u0E31\u0E14",maximum:"\u0E02\u0E19\u0E32\u0E14\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E20\u0E32\u0E1E\u0E2A\u0E39\u0E07\u0E2A\u0E38\u0E14: 2MB"},documentEditor$2={save:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38",saveAs:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E40\u0E1B\u0E47\u0E19...",insert:"\u0E41\u0E17\u0E23\u0E01",delete:"\u0E25\u0E1A",rotateRight:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E02\u0E27\u0E32",rotateLeft:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E0B\u0E49\u0E32\u0E22",copy:"\u0E2A\u0E33\u0E40\u0E19\u0E32",extract:"\u0E01\u0E32\u0E23\u0E41\u0E22\u0E01\u0E2B\u0E23\u0E37\u0E2D\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25",replace:"\u0E41\u0E17\u0E19\u0E17\u0E35\u0E48",move:"\u0E40\u0E04\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E44\u0E2B\u0E27",selectAll:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",dialog:{insertPages:"\u0E41\u0E17\u0E23\u0E01\u0E2B\u0E19\u0E49\u0E32",blankPage:"\u0E2B\u0E19\u0E49\u0E32\u0E27\u0E48\u0E32\u0E07",customPage:"\u0E2B\u0E19\u0E49\u0E32\u0E27\u0E48\u0E32\u0E07\u0E41\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E40\u0E2D\u0E07",fromPdf:"\u0E08\u0E32\u0E01 PDF",selectFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",pageRange:"\u0E0A\u0E48\u0E27\u0E07\u0E2B\u0E19\u0E49\u0E32",allPages:"\u0E17\u0E38\u0E01\u0E2B\u0E19\u0E49\u0E32",oddPage:"\u0E2B\u0E19\u0E49\u0E32\u0E04\u0E35\u0E48\u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19",evenPage:"\u0E2B\u0E19\u0E49\u0E32\u0E04\u0E39\u0E48\u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19",customRange:"\u0E0A\u0E48\u0E27\u0E07\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E40\u0E2D\u0E07",insertTo:"\u0E40\u0E41\u0E17\u0E23\u0E01\u0E40\u0E02\u0E49\u0E32\u0E44\u0E1B",firstPage:"\u0E2B\u0E19\u0E49\u0E32\u0E41\u0E23\u0E01",lastPage:"\u0E2B\u0E19\u0E49\u0E32\u0E2A\u0E38\u0E14\u0E17\u0E49\u0E32\u0E22",page:"\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",pageTip:"\u0E40\u0E0A\u0E48\u0E19 3, 5-10",before:"\u0E01\u0E48\u0E2D\u0E19",after:"\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01"},deleteConfirmText:"\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E2B\u0E19\u0E49\u0E32\u0E19\u0E35\u0E49\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48 ?",eachPage:"\u0E41\u0E22\u0E01\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E41\u0E15\u0E48\u0E25\u0E30\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E1B\u0E47\u0E19\u0E44\u0E1F\u0E25\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E22\u0E01\u0E01\u0E31\u0E19",deleteAfter:"\u0E25\u0E1A\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E14\u0E31\u0E07\u0E19\u0E35\u0E49\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E32\u0E23\u0E41\u0E15\u0E01\u0E44\u0E1F\u0E25\u0E4C",moveTo:"\u0E22\u0E49\u0E32\u0E22\u0E44\u0E1B\u0E2D\u0E22\u0E39\u0E48\u0E2B\u0E25\u0E31\u0E07\u0E2B\u0E19\u0E49\u0E32\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48 ",inputPageTip:"\u0E1B\u0E49\u0E2D\u0E19 0 \u0E16\u0E36\u0E07\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E2B\u0E19\u0E49\u0E32\u0E2A\u0E39\u0E07\u0E2A\u0E38\u0E14"},paste$2="\u0E41\u0E1B\u0E30",properties$2="\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34",security$2={pwdProtection:"\u0E01\u0E32\u0E23\u0E1B\u0E49\u0E2D\u0E07\u0E01\u0E31\u0E19\u0E14\u0E49\u0E27\u0E22\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",encryption:"\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E23\u0E2B\u0E31\u0E2A",decryption:"\u0E01\u0E32\u0E23\u0E16\u0E2D\u0E14\u0E23\u0E2B\u0E31\u0E2A",redaction:"\u0E01\u0E32\u0E23\u0E1B\u0E01\u0E1B\u0E34\u0E14\u0E41\u0E01\u0E49\u0E44\u0E02\u0E2B\u0E23\u0E37\u0E2D\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23",fillBlack:"\u0E40\u0E15\u0E34\u0E21\u0E2A\u0E35\u0E14\u0E33",fillWhite:"\u0E40\u0E15\u0E34\u0E21\u0E04\u0E27\u0E32\u0E21\u0E02\u0E32\u0E27",caution:"\u0E04\u0E33\u0E40\u0E15\u0E37\u0E2D\u0E19",enterTip:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E41\u0E01\u0E49\u0E44\u0E02\u0E08\u0E30\u0E16\u0E39\u0E01\u0E25\u0E1A\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E01\u0E23\u0E30\u0E17\u0E33\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",understand:"\u0E40\u0E02\u0E49\u0E32\u0E43\u0E08\u0E41\u0E25\u0E30\u0E40\u0E23\u0E34\u0E48\u0E21",applyTip:"\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E43\u0E0A\u0E49\u0E1F\u0E31\u0E07\u0E01\u0E4C\u0E0A\u0E31\u0E19\u0E1B\u0E01\u0E1B\u0E34\u0E14\u0E19\u0E35\u0E49 \u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E1B\u0E01\u0E1B\u0E34\u0E14\u0E08\u0E30\u0E16\u0E39\u0E01\u0E25\u0E1A\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23",exit:"\u0E2D\u0E2D\u0E01",apply:"\u0E19\u0E33\u0E21\u0E32\u0E43\u0E0A\u0E49",note:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38",exitTip:"\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E22\u0E31\u0E07\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02 \u0E04\u0E38\u0E13\u0E41\u0E19\u0E48\u0E43\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E27\u0E48\u0E32\u0E08\u0E30\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",exitConfirm:"\u0E2D\u0E2D\u0E01",saveTip:["\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E41\u0E01\u0E49\u0E44\u0E02\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E08\u0E30\u0E16\u0E39\u0E01\u0E25\u0E1A\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23\u0E41\u0E25\u0E30\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E01\u0E39\u0E49\u0E04\u0E37\u0E19\u0E44\u0E14\u0E49","\u0E04\u0E38\u0E13\u0E41\u0E19\u0E48\u0E43\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48\u0E27\u0E48\u0E32\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02\u0E41\u0E25\u0E30\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E44\u0E1F\u0E25\u0E4C"],save:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01"},layer$2={show:"\u0E41\u0E2A\u0E14\u0E07",hide:"\u0E0B\u0E48\u0E2D\u0E19",lock:"\u0E25\u0E47\u0E2D\u0E04",unlock:"\u0E1B\u0E25\u0E14\u0E25\u0E47\u0E2D\u0E04",lockedTip:"\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C\u0E1B\u0E31\u0E08\u0E08\u0E38\u0E1A\u0E31\u0E19\u0E16\u0E39\u0E01\u0E25\u0E47\u0E2D\u0E04 \u0E2B\u0E32\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E01\u0E32\u0E23\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19 \u0E42\u0E1B\u0E23\u0E14\u0E1B\u0E25\u0E14\u0E25\u0E47\u0E2D\u0E04\u0E43\u0E19\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C\u0E01\u0E48\u0E2D\u0E19",ok:"\u0E15\u0E01\u0E25\u0E07",setProperty:"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",layerProperty:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",layerName:"\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",enterLayerName:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",defaultSettings:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",defaultShow:"\u0E41\u0E2A\u0E14\u0E07\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E1B\u0E34\u0E14\u0E44\u0E1F\u0E25\u0E4C",defaultHide:"\u0E0B\u0E48\u0E2D\u0E19\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E1B\u0E34\u0E14\u0E44\u0E1F\u0E25\u0E4C",lockLayer:"\u0E25\u0E47\u0E2D\u0E04\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",printProperty:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E01\u0E32\u0E23\u0E1E\u0E34\u0E21\u0E1E\u0E4C",always:"\u0E40\u0E2A\u0E21\u0E2D",never:"\u0E44\u0E21\u0E48\u0E40\u0E04\u0E22",printVisible:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E01\u0E23\u0E13\u0E35\u0E17\u0E35\u0E48\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19\u0E44\u0E14\u0E49",exportProperty:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34",exportVisible:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19\u0E44\u0E14\u0E49",copyLink:"\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01\u0E25\u0E34\u0E07\u0E04\u0E4C"},colorSeparation$2={toggleColor:"\u0E2A\u0E25\u0E31\u0E1A\u0E2A\u0E35",notShowTip:"\u0E2A\u0E35\u0E08\u0E30\u0E44\u0E21\u0E48\u0E41\u0E2A\u0E14\u0E07\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",accessOnPc:"\u0E1F\u0E35\u0E40\u0E08\u0E2D\u0E23\u0E4C\u0E19\u0E35\u0E49\u0E43\u0E0A\u0E49\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E01\u0E31\u0E1A\u0E21\u0E37\u0E2D\u0E16\u0E37\u0E2D \u0E42\u0E1B\u0E23\u0E14\u0E40\u0E02\u0E49\u0E32\u0E43\u0E0A\u0E49\u0E1A\u0E19\u0E1E\u0E35\u0E0B\u0E35\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E1B\u0E23\u0E30\u0E2A\u0E1A\u0E01\u0E32\u0E23\u0E13\u0E4C\u0E17\u0E35\u0E48\u0E14\u0E35\u0E17\u0E35\u0E48\u0E2A\u0E38\u0E14"},measurement$2={scale:"\u0E21\u0E32\u0E15\u0E23\u0E32\u0E2A\u0E48\u0E27\u0E19",length:"\u0E04\u0E27\u0E32\u0E21\u0E22\u0E32\u0E27",precision:"\u0E04\u0E27\u0E32\u0E21\u0E41\u0E21\u0E48\u0E19\u0E22\u0E33",angle:"\u0E21\u0E38\u0E21",radius:"\u0E23\u0E31\u0E28\u0E21\u0E35",perimeter:"\u0E1B\u0E23\u0E34\u0E21\u0E13\u0E11\u0E25",area:"\u0E1E\u0E37\u0E49\u0E19\u0E17\u0E35\u0E48",reply:"\u0E15\u0E2D\u0E1A",drawingToActual:"\u0E02\u0E19\u0E32\u0E14\u0E01\u0E32\u0E23\u0E27\u0E32\u0E14: \u0E02\u0E19\u0E32\u0E14\u0E08\u0E23\u0E34\u0E07",settingScale:"\u0E21\u0E32\u0E15\u0E23\u0E32\u0E2A\u0E48\u0E27\u0E19",pt:"\u0E08\u0E38\u0E14",in:"\u0E43\u0E19",mm:"\u0E21\u0E21",cm:"\u0E0B\u0E21",m:"\u0E21",km:"\u0E01\u0E21",ft:"\u0E1F\u0E38\u0E15",yd:"\u0E1B\u0E35",mi:"\u0E44\u0E21\u0E25\u0E4C",measurementSettings:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E01\u0E32\u0E23\u0E27\u0E31\u0E14",scaleError:"\u0E2A\u0E40\u0E01\u0E25\u0E04\u0E27\u0E23\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32 0",showCaption:"\u0E41\u0E2A\u0E14\u0E07\u0E04\u0E33\u0E1A\u0E23\u0E23\u0E22\u0E32\u0E22\u0E20\u0E32\u0E1E",done:"\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27"},measurementPanel$2={appearance:"\u0E23\u0E39\u0E1B\u0E23\u0E48\u0E32\u0E07",lineColor:"\u0E2A\u0E35\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19",fillColor:"\u0E40\u0E15\u0E34\u0E21\u0E2A\u0E35",lineWidth:"\u0E04\u0E27\u0E32\u0E21\u0E01\u0E27\u0E49\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19",lineStyle:"\u0E25\u0E31\u0E01\u0E29\u0E13\u0E30\u0E40\u0E2A\u0E49\u0E19\u0E41\u0E25\u0E30\u0E40\u0E2A\u0E49\u0E19\u0E02\u0E2D\u0E1A",start:"\u0E40\u0E23\u0E34\u0E48\u0E21",end:"\u0E08\u0E1A",fontColor:"\u0E2A\u0E35\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",fontStyle:"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",note:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01"},th={header:header$2,nextPage:nextPage$3,previousPage:previousPage$3,loading:loading$2,upload:upload$2,exit:exit$2,leftPanel:leftPanel$2,pageModePanel:pageModePanel$2,stampPanel:stampPanel$2,linkPanel:linkPanel$2,rightPanel:rightPanel$2,prevent:prevent$2,passwordDialog:passwordDialog$2,ok:ok$2,cancel:cancel$2,continue:"\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23\u0E15\u0E48\u0E2D",signatures:signatures$2,color:color$2,opacity:opacity$2,font:font$2,regular:regular$2,oblique:oblique$2,bold:bold$2,boldOblique:boldOblique$2,delete:"\u0E25\u0E1A",compare:compare$3,editorPanel:editorPanel$2,documentEditor:documentEditor$2,paste:paste$2,properties:properties$2,security:security$2,layer:layer$2,colorSeparation:colorSeparation$2,measurement:measurement$2,measurementPanel:measurementPanel$2},header$1={leftPanel:"\u5DE6\u5074\u9762\u677F",fullScreen:"\u5168\u87A2\u5E55",pan:"\u6EFE\u52D5\u5DE5\u5177",cropPage:"\u622A\u53D6",zoomIn:"\u653E\u5927",zoomOut:"\u7E2E\u5C0F",light:"\u65E5\u9593",dark:"\u591C\u9593",lightMode:"\u65E5\u9593\u6A21\u5F0F",darkMode:"\u591C\u9593\u6A21\u5F0F",viewer:"\u67E5\u770B",annotations:"\u8A3B\u89E3",forms:"\u8868\u55AE",signatures:"\u7C3D\u540D",security:"\u5B89\u5168",compare:"\u6587\u4EF6\u5C0D\u6BD4",editor:"\u5167\u5BB9\u7DE8\u8F2F\u5668",document:"\u9801\u9762\u7DE8\u8F2F",separation:"\u5206\u8272",measurement:"\u6E2C\u91CF",note:"\u4FBF\u7C64",highlight:"\u9AD8\u4EAE",underline:"\u5E95\u7DDA",strikeout:"\u522A\u9664\u7DDA",squiggly:"\u6CE2\u6D6A\u7DDA",ink:"\u624B\u7E6A",circle:"\u5713",square:"\u9577\u65B9\u5F62",arrow:"\u7BAD\u982D",line:"\u7DDA",freetext:"\u6587\u5B57",stamp:"\u5716\u7AE0",image:"\u5716\u7247",link:"\u9023\u7D50",textField:"\u6587\u5B57\u57DF",checkbox:"\u8907\u9078\u6846",radioButton:"\u55AE\u9078\u6309\u9215",listBox:"\u5217\u9336\u6846",comboButton:"\u4E0B\u62C9\u5F0F\u9078\u55AE",button:"\u6309\u94AE",openFile:"\u4E0A\u50B3\u6587\u6A94",search:"\u641C\u5C0B",rightPanel:"\u53F3\u5074\u9762\u677F",viewSetting:"\u9801\u9762\u986F\u793A",download:"\u4E0B\u8F09",flatten:"\u5C55\u5E73\u5F8C\u4E0B\u8F09",print:"\u5217\u5370",settings:{settings:"\u8A2D\u5B9A",author:"\u6587\u4EF6\u4F5C\u8005",annotator:"\u8A3B\u91CB\u4F5C\u8005",language:"\u8A9E\u8A00\u8A2D\u5B9A",highlightLink:"\u9AD8\u4EAE\u9023\u7D50",highlightForm:"\u9AD8\u4EAE\u8868\u55AE",fillConsecutively:"\u9023\u7E8C\u586B\u5BEB",creationInfo:"\u5275\u5EFA\u8A0A\u606F",version:"\u7248\u672C"},addText:"\u65B0\u589E\u6587\u5B57",addImage:"\u65B0\u589E\u5716\u7247",undo:"\u64A4\u92B7",redo:"\u91CD\u505A",createSignField:"\u65B0\u589E\u7C3D\u7AE0\u57DF",addDigitalSign:"\u65B0\u589E\u6578\u4F4D\u7C3D\u540D",addElectronicSign:"\u65B0\u589E\u96FB\u5B50\u7C3D\u540D",verifyDigitalSign:"\u9A57\u8B49\u6578\u4F4D\u7C3D\u540D",measureLine:"\u7DDA",measureMultiline:"\u6298\u7DDA",measurePolygon:"\u6240\u505A",measureRectangle:"\u66F2\u7DDA",measureCircle:"\u5713\u5F62"},nextPage$2="\u4E0B\u4E00\u9801",previousPage$2="\u4E0A\u4E00\u9801",loading$1="\u8F09\u5165\u4E2D",upload$1="\u4E0A\u50B3",exit$1="\u9000\u51FA",leftPanel$1={thumbnails:"\u7E2E\u5716",outlines:"\u5927\u7DB1",noOutlines:"\u7121\u5927\u7DB1",layers:"\u5716\u5C64",noLayers:"\u7121\u5716\u5C64",menu:"\u9078\u55AE",showAll:"\u5168\u90E8\u986F\u793A",hideAll:"\u5168\u90E8\u96B1\u85CF",restoreSettings:"\u6062\u5FA9\u9810\u8A2D\u72C0\u614B",exportLayers:"\u532F\u51FA\u6587\u4EF6\u5716\u5C64",layerProperty:"\u5716\u5C64\u5C6C\u6027",exportLayer:"\u532F\u51FA\u6B64\u5716\u5C64",annotations:"\u8A3B\u91CB\u5217\u8868",noAnnotations:"\u6C92\u6709\u8A3B\u91CB",importAnnotations:"\u5C0E\u5165\u8A3B\u91CB",exportAnnotations:"\u5C0E\u51FA\u8A3B\u91CB",search:"\u641C\u5C0B",searchPdf:"\u641C\u5C0BPDF",page:"\u9801\u78BC",whichPage:["\u7B2C","\u9801"],previousPhrase:"\u770B\u4E0A\u4E00\u500B\u7D50\u679C",nextPhrase:"\u67E5\u770B\u4E0B\u4E00\u500B\u7D50\u679C",results:"\u7D50\u679C",noResults:"\u7121\u641C\u5C0B\u7D50\u679C",signature:"\u7C3D\u540D",signatureList:"\u7C3D\u540D\u5217\u8868",signatureDetails:"\u770B\u7C3D\u540D\u8A73\u60C5",certificationDetails:"\u67E5\u770B\u8B49\u66F8\u8A73\u60C5",noSignatures:"\u6C92\u6709\u7C3D\u540D",marked:"\u5DF2\u6A19\u8A18",unmarked:"\u672A\u6A19\u8A18",accepted:"\u5DF2\u63A5\u53D7",rejected:"\u5DF2\u62D2\u7D55",cancelled:"\u5DF2\u53D6\u6D88",completed:"\u5DF2\u5B8C\u6210",none:"\u7121",edit:"\u7DE8\u8F2F",delete:"\u522A\u9664",replyPlaceholder:"\u56DE\u8986",reply:"\u5132\u5B58",confirm:"\u5132\u5B58"},pageModePanel$1={displayMode:"\u95B1\u8B80\u6A21\u5F0F",vertical:"\u5782\u76F4\u6EFE\u52D5",horizontal:"\u6C34\u5E73\u6372\u52D5",splitView:"\u5206\u5272\u756B\u9762\u8996\u5716",singlePage:"\u55AE\u9801",twoPages:"\u96D9\u9801",coverMode:"\u5C01\u9762\u6A21\u5F0F",themes:"\u4E3B\u984C"},stampPanel$1={standard:"\u6A19\u6E96\u5716\u7AE0",dynamic:"\u52D5\u614B\u5716\u7AE0"},linkPanel$1={linkTo:"\u9023\u7D50\u5230",url:"\u8D85\u9023\u7D50",goToPages:"\u8DF3\u5230\u9801\u9762",email:"\u96FB\u5B50\u90F5\u4EF6\u4FE1\u7BB1",go:"\u524D\u5F80"},rightPanel$1={general:"\u4E00\u822C",name:"\u540D\u7A31",formField:"\u8868\u683C\u6B04\u4F4D",visible:"\u53EF\u898B",hidden:"\u96B1\u85CF",properties:"\u5C6C\u6027",requried:"\u5FC5\u586B",differentNameError:"\u8A72\u540D\u7A31\u5DF2\u5B58\u5728",buttonText:"\u6309\u9215\u6587\u5B57",appearance:"\u5916\u89C0",backgroundColor:"\u80CC\u666F\u8272",preferences:"\u9078\u9805",alignment:"\u6587\u5B57\u5C0D\u9F4A",left:"\u5DE6\u5C0D\u9F4A",center:"\u5C45\u4E2D",right:"\u53F3\u5C0D\u9F4A",defaultValue:"\u9810\u8A2D\u503C",multiLine:"\u591A\u884C",buttonStyle:"\u6309\u9215\u6A23\u5F0F",check:"\u52FE\u9078",circle:"\u5713\u5F62",cross:"\u5206\u5C94",diamond:"\u83F1\u5F62",square:"\u65B9\u5F62",star:"\u661F\u5F62",defaultChecked:"\u9810\u8A2D\u70BA\u5DF2\u9078\u53D6",item:"\u5C08\u6848",option:"\u9078\u9805",itemList:"\u9805\u76EE\u6E05\u55AE",selectAction:"\u9078\u64C7\u52D5\u4F5C",none:"\u7121",goPage:"\u8DF3\u5230\u9801\u9762",openLink:"\u6253\u958B\u7DB2\u9801\u9023\u7D50",addUrl:"\u6DFB\u52A0\u9023\u7D50",addPage:"\u52A0\u5165\u9801\u9762",radioBtnTip1:"\u8B66\u544A\uFF1A\u7D44\u4E2D\u53EA\u6709\u4E00\u500B\u6309\u9215\u3002\u81F3\u5C11\u9700\u89812\u500B\u6309\u9215\u3002",radioBtnTip2:"\u63D0\u793A\uFF1A\u82E5\u8981\u5EFA\u7ACB\u4E00\u7D44\u4E92\u65A5\u7684\u55AE\u9078\u6309\u9215\uFF08\u5373\u4E00\u6B21\u53EA\u80FD\u9078\u64C7\u4E00\u500B\uFF09\uFF0C\u8ACB\u78BA\u4FDD\u5404\u7DB2\u57DF\u76F8\u540C\u3002",listBoxTip:"\u5F9E\u9805\u76EE\u6E05\u55AE\u4E2D\u9078\u64C7\u4E00\u500B\u9078\u9805\uFF0C\u4F5C\u70BA\u9810\u8A2D\u9078\u9805\u3002"},prevent$1={title:"\u4E0D\u53EF\u7528",standalone:"\u79BB\u7EBF\u7248",description:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u5185\u5BB9\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u5185\u5BB9\u7F16\u8F91\u3002",description1:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u6587\u6863\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u6587\u6863\u7F16\u8F91\u3002"},passwordDialog$1={enterPwd:"\u8F38\u5165\u5BC6\u78BC\u67E5\u770B\u6587\u6A94",enterPwdPlaceholder:"\u8ACB\u8F38\u5165\u5BC6\u78BC",wrongPwd:"\u5BC6\u78BC\u932F\u8AA4",encryptPdf:"\u52A0\u5BC6",encrypt:"\u52A0\u5BC6",supportTip:"\u652F\u6301\u5B57\uFF1A\u6578\u5B57\u3001\u5B57\u6BCD\u3001{'@'}\u3001$\u3001!\u3001%\u3001?\u3001&",removePwdSuccess:"\u5BC6\u78BC\u5DF2\u79FB\u9664\uFF01",removePwdFailure:"\u5BC6\u78BC\u79FB\u9664\u5931\u6557\uFF01",setPwdSuccess:"\u5BC6\u78BC\u8A2D\u5B9A\u6210\u529F\uFF01",setPwdFailure:"\u5BC6\u78BC\u8A2D\u5B9A\u5931\u6557\uFF01",note:["\u6CE8\u610F\uFF1A","- \u6240\u6709\u8B8A\u66F4\u5C07\u5728\u4E0B\u8F09\u5F8C\u751F\u6548\u3002","- \u5728\u4E0B\u8F09\u6587\u4EF6\u4E4B\u524D\uFF0C\u60A8\u53EF\u4EE5\u96A8\u6642\u91CD\u8A2D\u5BC6\u78BC\u3002"]},ok$1="\u78BA\u5B9A",cancel$1="\u53D6\u6D88",signatures$1={tip:"\u8ACB\u5148\u5EFA\u7ACB\u4E00\u500B\u7C3D\u7AE0\u57DF\uFF0C\u7136\u5F8C\u518D\u9078\u64C7\u7C3D\u7AE0\u985E\u578B",trackpad:"\u89F8\u63A7\u677F",lineWidth:"\u5BEC\u5EA6",keyboard:"\u9375\u76E4",signHere:"\u8ACB\u5728\u6B64\u8F38\u5165\u7C3D\u540D",image:"\u5716\u7247",selectFile:"\u9078\u64C7\u6587\u4EF6",none:"\u7121",clear:"\u6E05\u9664",save:"\u5132\u5B58",uploadError:"\u8ACB\u4E0A\u50B31M\u4EE5\u5167\u7684\u5716\u7247",selectTypeDialog:{selectType:"\u8ACB\u9078\u64C7\u7C3D\u540D\u985E\u578B",signWithElectronic:"\u96FB\u5B50\u7C3D\u540D",signWithElectronicDesc:"\u900F\u904E\u7E6A\u88FD\u3001\u5716\u7247\u3001\u6216\u8F38\u5165\u6587\u5B57\u9032\u884C\u6587\u4EF6\u7C3D\u7F72\u3002",signWithDigital:"\u6578\u4F4D\u7C3D\u7AE0\uFF08\u6578\u4F4D\u6191\u8B49\u7C3D\u7F72\uFF09",signWithDigitalDesc:"\u900F\u904E\u5EFA\u7ACB\u6216\u4E0A\u50B3\u5E36\u6709\u552F\u4E00\u6578\u4F4DID\u7684\u6578\u4F4D\u6191\u8B49\u4F86\u7C3D\u7F72\u6587\u4EF6\u3002",startSigning:"\u958B\u59CB\u7C3D\u540D"},detailsDialog:{title:"\u6578\u4F4D\u7C3D\u540D\u8A73\u7D30\u4FE1\u606F",signBy:"\u7C3D\u540D\u6709\u6548\uFF0C\u7C3D\u7F72\u8005\u70BA",signingTime:"\u7C3D\u7D04\u6642\u9593",validitySummary:"\u6709\u6548\u6027\u5C0F\u7D50",validIdentity:"\u7C3D\u540D\u8005\u7684\u8EAB\u5206\u6709\u6548\u3002",invalidIdentity:"\u7C3D\u540D\u8005\u7684\u8EAB\u5206\u7121\u6548\u3002",unknownIdentity:"\u7C3D\u7AE0\u6709\u6548\u6027\u672A\u77E5\uFF0C\u56E0\u70BA\u5B83\u672A\u5305\u542B\u5728\u60A8\u7684\u53D7\u4FE1\u4EFB\u6191\u8B49\u6E05\u55AE\u4E2D\uFF0C\u800C\u4E14\u5B83\u7684\u7236\u6191\u8B49\u90FD\u4E0D\u662F\u53D7\u4FE1\u4EFB\u6191\u8B49\u3002",expiredCertificate:"\u8A72\u6587\u4EF6\u662F\u7528\u5DF2\u904E\u671F\u7684\u6191\u8B49\u7C3D\u7F72\u7684\u3002\u5982\u679C\u60A8\u6700\u8FD1\u53D6\u5F97\u4E86\u6B64\u6587\u4EF6\uFF0C\u5247\u8A72\u6587\u4EF6\u53EF\u80FD\u4E0D\u771F\u5BE6\u3002",invalidSignature:"\u7C3D\u540D\u7121\u6548\u3002",validSignature:"\u7C3D\u540D\u6709\u6548\u3002",notModifiedDoc:"\u81EA\u5957\u7528\u6B64\u7C3D\u540D\u4EE5\u4F86\uFF0C\u6587\u4EF6\u672A\u88AB\u4FEE\u6539\u3002",alteredDoc:"\u81EA\u5F9E\u76EE\u524D\u4F7F\u7528\u8005\u7C3D\u7F72\u6587\u4EF6\u4EE5\u4F86\uFF0C\u8A72\u6587\u4EF6\u5DF2\u88AB\u66F4\u6539\u6216\u640D\u58DE\u3002",viewCertificateDetails:"\u67E5\u770B\u8B49\u66F8\u7D30\u7BC0",unknownSignature:"\u7C3D\u540D\u6709\u6548\u6027\u672A\u77E5\u3002",atLeastOneInvalid:"\u81F3\u5C11\u4E00\u500B\u7C3D\u540D\u7121\u6548\uFF0C\u6587\u4EF6\u53EF\u80FD\u88AB\u7AC4\u6539\u3002",viewAllSignatures:"\u67E5\u770B\u6240\u6709\u7C3D\u540D"},certificateViewerDialog:{title:"\u8B49\u66F8\u67E5\u770B\u7A0B\u5F0F",abstracts:"\u6458\u8981",summary:"\u5C0F\u7D50",issuedTo:"\u9812\u767C\u7D66",issuer:"\u9812\u767C\u8005",validFrom:"\u6709\u6548\u8D77\u59CB\u65E5\u671F",validTo:"\u6709\u6548\u622A\u6B62\u65E5\u671F",intendedUsage:"\u9810\u671F\u7528\u9014",details:"\u8A73\u7D30\u8CC7\u8A0A",version:"\u7248\u672C",algorithm:"\u7C3D\u540D\u6F14\u7B97\u6CD5",subject:"\u4E3B\u984C",serialNumber:"\u5E8F\u865F",certificatePolicy:"\u8B49\u66F8\u7B56\u7565",crlDistributionPoints:"CRL\u5206\u767C\u9EDE",issuerInfoAccess:"\u9812\u767C\u6A5F\u69CB\u8CC7\u8A0A\u8A2A\u554F",issuerKeyIdentifier:"\u9812\u767C\u6A5F\u69CB\u5BC6\u9470\u6A19\u8B58\u7B26",subjectKeyIdentifier:"\u4E3B\u9AD4\u5BC6\u9470\u6A19\u8B58\u7B26",basicConstraints:"\u57FA\u672C\u7D04\u675F",keyUsage:"\u5BC6\u9470\u7528\u6CD5",publicKey:"\u516C\u9470",X509:"X.509",SHA1Digest:"SHA1",MD5Digest:"MD5",trust:"\u4FE1\u4EFB",trustedTo:"\u672C\u8B49\u66F8\u4FE1\u4EFB\u65BC\uFF1A",sign:"\u7C3D\u7F72\u6587\u6A94\u6216\u6578\u64DA",certify:"\u9A57\u8B49\u6587\u6A94",addToTrust:"\u65B0\u589E\u81F3\u53EF\u4FE1\u4EFB\u8B49\u66F8",done:"\u95DC\u9589"},deleteConfirm:"\u78BA\u5B9A\u522A\u9664\u8A72\u5167\u5BB9\uFF1F",addDigitalFileDialog:{title:"\u65B0\u589E\u6578\u4F4D\u8EAB\u5206\u8B49",desc:"\u700F\u89BD\u6578\u4F4D\u8EAB\u5206\u8B49\u6587\u4EF6\u3002\u6578\u4F4D\u8EAB\u5206\u8B49\u53D7\u5BC6\u78BC\u4FDD\u8B77\u3002\u5982\u679C\u4F60\u4E0D\u77E5\u9053\u5BC6\u78BC\uFF0C\u4F60\u5C31\u7121\u6CD5\u53D6\u5F97\u6578\u4F4D\u8EAB\u5206\u8B49\u3002",certificateFile:"\u8B49\u66F8\u6587\u4EF6",uploadFile:"\u4E0A\u50B3\u8B49\u66F8\u6587\u4EF6",upload:"\u700F\u89BD",password:"\u8B49\u66F8\u5BC6\u78BC",enterPassword:"\u8ACB\u8F38\u5165\u8B49\u66F8\u5BC6\u78BC",invalidPassword:"\u5BC6\u78BC\u932F\u8AA4\uFF0C\u8ACB\u91CD\u8A66"},appearanceDialog:{title:"\u81EA\u8A02\u7C3D\u540D\u5916\u89C0",signHere:"\u8ACB\u5728\u6B64\u8F38\u5165\u7C3D\u540D\uFF01",includeText:"\u5305\u542B\u6587\u5B57",name:"\u540D\u7A31",dName:"\u8FA8\u5225\u540D",date:"\u65E5\u671F",ComPDFKitVersion:"ComPDFKit \u7248\u672C",logo:"\u6A19\u8A8C",location:"\u4F4D\u7F6E",reason:"\u539F\u56E0",signReason:"\u7C3D\u7F72\u539F\u56E0",docOwner:"\u6211\u662F\u8A72\u6587\u4EF6\u7684\u4F5C\u8005",approvingDoc:"\u6211\u6B63\u5728\u6279\u51C6\u8A72\u6587\u6A94",reviewedDoc:"\u6211\u5DF2\u5BE9\u95B1\u8A72\u6587\u6A94",labels:"\u6A19\u7C64",text:"\u5B57\u9AD4",type:"\u5B57\u5F62",textAlignment:"\u5C0D\u9F4A\u65B9\u5F0F"}},color$1="\u984F\u8272",opacity$1="\u4E0D\u900F\u660E\u5EA6",font$1="\u5B57\u9AD4",regular$1="\u5E38\u898F",oblique$1="\u659C\u9AD4",bold$1="\u7C97\u9AD4",boldOblique$1="\u7C97\u659C\u9AD4",warning$1="\u6CE8\u610F",colon$1="\uFF1A",compare$2={startCompare:"\u958B\u59CB\u5C0D\u6BD4",exit:"\u9000\u51FA\u5C0D\u6BD4",oldFile:"\u820A\u6587\u4EF6",newFile:"\u65B0\u6587\u4EF6",dropFile:["\u5C07\u6587\u4EF6\u62D6\u5230\u6B64\u8655\uFF0C","\u6216"],chooseOldFile:"\u65B0\u589E\u820A\u6587\u4EF6",chooseNewFile:"\u65B0\u589E\u6587\u4EF6",comingSoon:"\u5C0D\u6BD4\u5373\u5C07\u5B8C\u6210\uFF01",contentComparison:"\u4E26\u6392\u5C0D\u6BD4",compareItems:"\u5C0D\u6BD4\u5167\u5BB9\u9078\u64C7",text:"\u6587\u5B57",images:"\u5716\u7247",colorMark:"\u6A19\u8A18\u984F\u8272",replacedContent:"\u88AB\u66FF\u63DB\u7684\u5167\u5BB9",insertedContent:"\u88AB\u63D2\u5165\u7684\u5167\u5BB9",deletedContent:"\u5DF2\u522A\u9664\u7684\u5167\u5BB9",overlayComparison:"\u758A\u52A0\u5C0D\u6BD4",blendMode:"\u6DF7\u5408\u6A21\u5F0F",normal:"\u666E\u901A",multiply:"\u6B63\u7247\u758A\u5E95",screen:"\u6FFE\u8272",overlay:"\u758A\u52A0",darken:"\u8B8A\u6697",lighten:"\u8B8A\u4EAE",colorDodge:"\u8272\u5F69\u6E1B\u6DE1",colorBurn:"\u984F\u8272\u52A0\u6DF1",hardLight:"\u5F37\u5149",softLight:"\u67D4\u5149",difference:"\u5DEE\u503C",exclusion:"\u6392\u9664",hue:"\u8272\u76F8",saturation:"\u98FD\u548C\u5EA6",colour:"\u984F\u8272",luminosity:"\u660E\u5EA6",return:"\u8FD4\u56DE",compare:"\u958B\u59CB\u5C0D\u6BD4",downloadOptions:"\u7D50\u679C\u6587\u4EF6\u6A23\u5F0F",downloadTwoFiles:"\u5C0D\u6BD4\u7D50\u679C\u5206\u958B\u4FDD\u5B58\uFF0C\u7D50\u679C\u6587\u4EF6\u70BA2\u4EFD",downloadOneFile:"\u5408\u4F75\u5C0D\u6BD4\u7D50\u679C\uFF0C\u7D50\u679C\u6587\u4EF6\u70BA1\u4EFD\u6587\u4EF6",printSetting:"\u5217\u5370\u6587\u4EF6\u9078\u64C7",printOldFile:"\u5217\u5370\u820A\u6587\u4EF6\u7684\u6BD4\u8F03\u7D50\u679C\u6587\u4EF6",printNewFile:"\u5217\u5370\u65B0\u6587\u4EF6\u7684\u6BD4\u8F03\u7D50\u679C\u6587\u4EF6",byComPDFKit:"\u7531ComPDFKit\u63D0\u4F9B\u5C0D\u6BD4"},editorPanel$1={textProp:"\u6587\u5B57\u5C6C\u6027",fontColor:"\u6587\u5B57\u984F\u8272",textStyle:"\u6587\u5B57\u6A23\u5F0F",spacing:"\u9593\u8DDD",characterSpacing:"\u5B57\u9593\u8DDD",lineSpacing:"\u884C\u9593\u8DDD",paragraphSpacing:"\u6BB5\u9593\u8DDD",imageProp:"\u5716\u7247\u5C6C\u6027",rotate:"\u65CB\u8F49",rotateLeft:"\u5DE6\u65CB\u8F49",rotateRight:"\u53F3\u65CB\u8F49",flip:"\u7FFB\u8F49",flipHorizontal:"\u6C34\u5E73\u7FFB\u8F49",flipVertical:"\u5782\u76F4\u7FFB\u8F49",tools:"\u5DE5\u5177",replace:"\u66FF\u63DB",export:"\u532F\u51FA",crop:"\u88C1\u5207",maximum:"\u5716\u7247\u5927\u5C0F\u4E0A\u9650\uFF1A2MB\u3002"},documentEditor$1={save:"\u5132\u5B58",saveAs:"\u53E6\u5B58\u70BA",insert:"\u63D2\u5165",delete:"\u522A\u9664",rotateRight:"\u53F3\u65CB\u8F49",rotateLeft:"\u5DE6\u65CB\u8F49",copy:"\u8907\u88FD",extract:"\u63D0\u53D6",replace:"\u66FF\u63DB",move:"\u79FB\u52D5",selectAll:"\u5168\u9078",dialog:{insertPages:"\u9801\u9762\u7BC4\u570D",blankPage:"\u7A7A\u767D\u9801",customPage:"\u81EA\u8A02\u7A7A\u767D\u9801",fromPdf:"\u5F9E\u5176\u4ED6PDF",selectFile:"\u9078\u64C7\u6587\u4EF6",pageRange:"\u9801\u9762\u7BC4\u570D",allPages:"\u6240\u6709\u9801\u9762",oddPage:"\u5947\u6578\u9801",evenPage:"\u5076\u6578\u9801",customRange:"\u81EA\u8A02\u7BC4\u570D",insertTo:"\u9801\u9762\u63D2\u5165\u4F4D\u7F6E",firstPage:"\u9996\u9801",lastPage:"\u672B\u9801",page:"\u9801\u9762",pageTip:"\u4F8B\uFF1A3, 5-10",before:"\u524D",after:"\u5F8C"},deleteConfirmText:"\u78BA\u8A8D\u8981\u522A\u9664\u6240\u9078\u9801\u9762\u55CE\uFF1F",eachPage:"\u6BCF\u9801\u4F5C\u70BA\u55AE\u4E00\u6587\u4EF6",deleteAfter:"\u64F7\u53D6\u5F8C\u522A\u9664\u9801\u9762",moveTo:"\u79FB\u52D5\u5230",inputPageTip:"\u8F38\u51650~\u6587\u6A94\u6700\u5927\u9801\u78BC\u6578"},paste$1="\u8CBC\u4E0A",properties$1="\u5C6C\u6027",security$1={pwdProtection:"\u5BC6\u78BC\u4FDD\u8B77",encryption:"\u6587\u4EF6\u52A0\u5BC6",decryption:"\u6587\u4EF6\u89E3\u5BC6",redaction:"\u6A19\u8A18\u5BC6\u6587",fillBlack:"\u586B\u5145\u9ED1\u8272",fillWhite:"\u586B\u5145\u767D\u8272",caution:"\u63D0\u793A",enterTip:"\u672C\u6587\u6A94\u4E2D\u5DF2\u88AB\u6A19\u8A18\u7684\u5167\u5BB9\u5C07\u6703\u6C38\u4E45\u522A\u9664\u3002\u8ACB\u78BA\u8A8D\u60A8\u7684\u64CD\u4F5C\u3002",understand:"\u6211\u5DF2\u77E5\u66C9\uFF0C\u958B\u59CB\u4F7F\u7528",applyTip:"\u61C9\u7528\u6A19\u8A18\u5BC6\u6587\u5F8C\uFF0C\u88AB\u6A19\u8A18\u7684\u5167\u5BB9\u5C07\u6703\u6C38\u4E45\u522A\u9664\u3002",exit:"\u9000\u51FA",apply:"\u61C9\u7528",note:"\u63D0\u793A",exitTip:"\u60A8\u7684\u6A19\u8A18\u5167\u5BB9\u5C1A\u672A\u751F\u6548\u3002\u78BA\u5B9A\u8981\u9000\u51FA\u55CE\uFF1F",exitConfirm:"\u78BA\u8A8D",saveTip:["\u63D0\u793A\uFF1A\u6587\u4EF6\u4E2D\u88AB\u6A19\u8A18\u7684\u5167\u5BB9\u5C07\u6C38\u4E45\u522A\u9664\u4E14\u4E0D\u53EF\u6062\u5FA9\u3002","\u78BA\u5B9A\u522A\u9664\u6240\u6709\u6A19\u8A18\u5167\u5BB9\u4E26\u5132\u5B58\u6587\u4EF6\uFF1F"],save:"\u78BA\u8A8D"},layer$1={show:"\u986F\u793A",hide:"\u96B1\u85CF",lock:"\u9396\u5B9A",unlock:"\u89E3\u9396",lockedTip:"\u76EE\u524D\u5716\u5C64\u5DF2\u9396\u5B9A\u3002\u82E5\u8981\u8B8A\u66F4\u5176\u53EF\u898B\u6027\uFF0C\u8ACB\u5148\u5728\u5716\u5C64\u5C6C\u6027\u4E2D\u5C07\u5176\u89E3\u9396\u3002",ok:"\u597D\u7684",setProperty:"\u8A2D\u5B9A\u5716\u5C64\u5C6C\u6027",layerProperty:"\u5716\u5C64\u5C6C\u6027",layerName:"\u5716\u5C64\u540D\u7A31",enterLayerName:"\u8ACB\u8F38\u5165\u5716\u5C64\u540D\u7A31",defaultSettings:"\u9810\u8A2D\u72C0\u614B",defaultShow:"\u958B\u555F\u6A94\u6848\u6642\u9810\u8A2D\u986F\u793A",defaultHide:"\u958B\u555F\u6A94\u6848\u6642\u9810\u8A2D\u96B1\u85CF",lockLayer:"\u9396\u5B9A\u5716\u5C64",printProperty:"\u5217\u5370\u5C6C\u6027",always:"\u7E3D\u662F",never:"\u5F9E\u4E0D",printVisible:"\u53EF\u898B\u6642\u5217\u5370",exportProperty:"\u5C0E\u51FA\u5C6C\u6027",exportVisible:"\u53EF\u898B\u6642\u532F\u51FA",copyLink:"\u8907\u88FD\u9023\u7D50",technicalDoc:"\u6280\u672F\u6587\u6863"},colorSeparation$1={toggleColor:"\u5207\u63DB\u984F\u8272",notShowTip:"\u8A72\u984F\u8272\u5C07\u4E0D\u6703\u5728\u6587\u4EF6\u4E2D\u986F\u793A",accessOnPc:"\u6B64\u529F\u80FD\u4E0D\u9069\u7528\u65BC\u884C\u52D5\u8A2D\u5099\uFF0C\u8ACB\u5728 PC \u7AEF\u5B58\u53D6\u4EE5\u7372\u5F97\u6700\u4F73\u9AD4\u9A57"},measurement$1={scale:"\u6BD4\u4F8B",length:"\u9577\u5EA6",precision:"\u7CBE\u78BA\u5EA6",angle:"\u89D2\u5EA6",radius:"\u534A\u5F91",perimeter:"\u9031\u9577",area:"\u9762\u7A4D",reply:"\u56DE\u8986",drawingToActual:"\u5716\u7D19\u5C3A\u5BF8: \u771F\u5BE6\u5C3A\u5BF8",settingScale:"\u6E2C\u91CF\u6BD4\u4F8B",pt:"\u9EDE",in:"\u82F1\u540B",mm:"\u6BEB\u7C73",cm:"\u516C\u5206",m:"\u7C73",km:"\u9577\u5EA6",ft:"\u82F1\u5C3A",yd:"\u78BC",mi:"\u82F1\u54E9",measurementSettings:"\u6E2C\u91CF\u8A2D\u5B9A",scaleError:"\u6BD4\u4F8B\u5C3A\u9700\u5927\u65BC0\u3002",showCaption:"\u6587\u5B57\u5C55\u793A",done:"\u78BA\u8A8D"},measurementPanel$1={appearance:"\u5916\u89C0\u8A2D\u5B9A",lineColor:"\u7DDA\u689D\u984F\u8272",fillColor:"\u586B\u5145\u984F\u8272",lineWidth:"\u7DDA\u5BEC",lineStyle:"\u7DDA\u578B",start:"\u7DDA\u982D",end:"\u7DDA\u5C3E",fontColor:"\u5B57\u9AD4\u984F\u8272",fontStyle:"\u5B57\u9AD4\u6A23\u5F0F",note:"\u6279\u8A3B"},zhTW={header:header$1,nextPage:nextPage$2,previousPage:previousPage$2,loading:loading$1,upload:upload$1,exit:exit$1,leftPanel:leftPanel$1,pageModePanel:pageModePanel$1,stampPanel:stampPanel$1,linkPanel:linkPanel$1,rightPanel:rightPanel$1,prevent:prevent$1,passwordDialog:passwordDialog$1,ok:ok$1,cancel:cancel$1,continue:"\u7E7C\u7E8C",signatures:signatures$1,color:color$1,opacity:opacity$1,font:font$1,regular:regular$1,oblique:oblique$1,bold:bold$1,boldOblique:boldOblique$1,delete:"\u5220\u9664",warning:warning$1,colon:colon$1,compare:compare$2,editorPanel:editorPanel$1,documentEditor:documentEditor$1,paste:paste$1,properties:properties$1,security:security$1,layer:layer$1,colorSeparation:colorSeparation$1,measurement:measurement$1,measurementPanel:measurementPanel$1},header={leftPanel:"Panneau gauche",fullScreen:"Plein \xE9cran",pan:"Po\xEAle",cropPage:"Couper",zoomIn:"Zoomer",zoomOut:"Zoom arri\xE8re",light:"Lumi\xE8re",dark:"Sombre",lightMode:"Mode lumi\xE8re",darkMode:"Mode sombre",viewer:"Visionneuse",annotations:"Annotations",forms:"Formulaires",signatures:"Signature",security:"S\xE9curit\xE9",compare:"Comparer des documents",editor:"\xC9diteur de contenu",document:"\xC9diteur de documents",separation:"S\xE9paration des couleurs",measurement:"Mesures",note:"Note",highlight:"Souligner",underline:"Souligner",strikeout:"Barr\xE9",squiggly:"Onduleux",ink:"Encre",circle:"Cercle",square:"Carr\xE9",arrow:"Fl\xE8che",line:"Doubler",freetext:"Texte libre",stamp:"Timbre",image:"Image",link:"Lien",textField:"Champ de texte",checkbox:"Case \xE0 cocher",radioButton:"Bouton radio",listBox:"Zone de liste",comboButton:"Bouton combin\xE9",button:"Bouton poussoir",openFile:"Ouvrir le fichier",search:"Recherche",rightPanel:"Panneau droit",viewSetting:"Afficher les param\xE8tres",download:"T\xE9l\xE9charger",flatten:"Enregistrer au format PDF aplati",print:"Imprimer",settings:{settings:"Param\xE8tres",author:"Auteur",annotator:"Annotateur",language:"Langue",highlightLink:"Mettre en surbrillance le lien",highlightForm:"Formulaire de surbrillance",fillConsecutively:"Remplir cons\xE9cutivement",creationInfo:"Informations sur la cr\xE9ation",version:"Version"},addText:"Ajouter du texte",addImage:"Ajouter une image",undo:"D\xE9faire",redo:"Refaire",createSignField:"Cr\xE9er un champ de signature",addDigitalSign:"Ajouter une signature num\xE9rique",addElectronicSign:"Ajouter une signature \xE9lectronique",verifyDigitalSign:"V\xE9rifier la signature num\xE9rique",measureLine:"Doubler",measureMultiline:"Multiligne",measurePolygon:"Polygone",measureRectangle:"Rectangle",measureCircle:"Cercle"},nextPage$1="Suivant",previousPage$1="Pr\xE9c\xE9dent",loading="Chargement",upload="T\xE9l\xE9charger",exit="Sortie",leftPanel={thumbnails:"Miniatures",outlines:"Grandes lignes",noOutlines:"Aucun contour",layers:"Annotations",noLayers:"Aucune annotation",menu:"Importer des annotations",showAll:"Exporter les annotations",hideAll:"Calques",restoreSettings:"Pas de calques",exportLayers:"Menu",layerProperty:"Afficher tout",exportLayer:"Masquer tout",annotations:"Restaurer les param\xE8tres par d\xE9faut",noAnnotations:"Exporter des calques de fichiers",importAnnotations:"Propri\xE9t\xE9 de calque",exportAnnotations:"Exporter ce calque",search:"Recherche",searchPdf:"Rechercher un PDF",page:"Page",whichPage:["Page",""],previousPhrase:"Trouver l'occurrence pr\xE9c\xE9dente de la phrase",nextPhrase:"Trouver l'occurrence suivante de la phrase",results:"R\xE9sultats",noResults:"Aucun r\xE9sultat",signature:"Signature",signatureList:"Liste des signatures",signatureDetails:"D\xE9tails de la signature",certificationDetails:"D\xE9tails des certifications",noSignatures:"Aucune signature",marked:"Marqu\xE9",unmarked:"Non marqu\xE9",accepted:"Accept\xE9",rejected:"Rejet\xE9",cancelled:"Annul\xE9",completed:"Compl\xE9t\xE9",none:"Aucun",edit:"Modifier",delete:"Supprimer",replyPlaceholder:"R\xE9pondez ou ajoutez des id\xE9es",reply:"R\xE9pondre",confirm:"Confirmer"},pageModePanel={displayMode:"Mode d'affichage",vertical:"D\xE9filement vertical",horizontal:"D\xE9filement horizontal",splitView:"Rouleau",singlePage:"Page unique",twoPages:"Deux pages",coverMode:"Mode couverture",themes:"Th\xE8mes"},stampPanel={standard:"Standard",dynamic:"Dynamique"},linkPanel={linkTo:"Lien vers",url:"URL",goToPages:"Aller aux pages",email:"E-mail",go:"Aller"},rightPanel={general:"G\xE9n\xE9ral",name:"Nom",formField:"Champ de formulaire",visible:"Visible",hidden:"Cach\xE9",properties:"Propri\xE9t\xE9s",requried:"Obligatoire",differentNameError:"Veuillez choisir un autre nom.",buttonText:"Texte du bouton",appearance:"Apparence",backgroundColor:"Couleur d'arri\xE8re-plan",preferences:"Pr\xE9f\xE9rences",alignment:"Alignement",left:"Gauche",center:"Centre",right:"Droite",defaultValue:"Valeur par d\xE9faut",multiLine:"Multiligne",buttonStyle:"Style de bouton",check:"V\xE9rifier",circle:"Cercle",cross:"Croix",diamond:"Diamant",square:"Carr\xE9",star:"\xC9toile",defaultChecked:"Le bouton est coch\xE9 par d\xE9faut",item:"Article",option:"Liste d'articles",itemList:"Article",selectAction:"S\xE9lectionnez une action",none:"Aucun",goPage:"Aller aux pages",openLink:"Ouvrir un lien Web",addUrl:"Ajouter une URL",addPage:"Ajouter une page",radioBtnTip1:"1 bouton en groupe. Au moins 2 boutons n\xE9cessaires.",radioBtnTip2:"Pour cr\xE9er un ensemble de boutons radio mutuellement exclusifs (c'est-\xE0-dire o\xF9 un seul peut \xEAtre s\xE9lectionn\xE9 \xE0 la fois), veuillez donner le m\xEAme nom aux champs.",listBoxTip:"S\xE9lectionnez un \xE9l\xE9ment dans la liste des \xE9l\xE9ments pour en faire l'option par d\xE9faut."},prevent={title:"\u4E0D\u53EF\u7528",standalone:"\u79BB\u7EBF\u7248",description:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u5185\u5BB9\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u5185\u5BB9\u7F16\u8F91\u3002",description1:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u6587\u6863\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u6587\u6863\u7F16\u8F91\u3002"},passwordDialog={enterPwd:"Entrez le mot de passe pour afficher le document",enterPwdPlaceholder:"Veuillez entrer le mot de passe",wrongPwd:"Mauvais mot de passe",encryptPdf:"Cryptez votre PDF",encrypt:"Chiffrer",supportTip:"Prise en charge: chiffres, lettres, {'@'}, $, !, %, ?, &",removePwdSuccess:"Mot de passe supprim\xE9 avec succ\xE8s!",removePwdFailure:"\xC9chec de la suppression du mot de passe.",setPwdSuccess:"D\xE9finissez le mot de passe du fichier avec succ\xE8s!",setPwdFailure:"\xC9chec de la d\xE9finition des mots de passe pour ce document.",note:["Note:","- Toutes les modifications prendront effet apr\xE8s le t\xE9l\xE9chargement.","- Vous pouvez r\xE9initialiser votre mot de passe \xE0 tout moment avant de t\xE9l\xE9charger."]},ok="D'ACCORD",cancel="Annuler",signatures={tip:"Veuillez d'abord cr\xE9er un champ de signature, puis s\xE9lectionner le type de signature.",trackpad:"Pav\xE9 tactile",lineWidth:"Largeur de ligne",keyboard:"Clavier",signHere:"Signez ici",image:"Image",selectFile:"S\xE9lectionnez un fichier",none:"Aucun",clear:"Clair",save:"Enregistrer et appliquer",uploadError:"Veuillez t\xE9l\xE9charger des images de moins de 1 Mo",selectTypeDialog:{selectType:"S\xE9lectionnez le type de signature",signWithElectronic:"Signer avec des signatures \xE9lectroniques",signWithElectronicDesc:"Dessinez, saisissez ou t\xE9l\xE9chargez des signatures d'image pour signer des fichiers.",signWithDigital:"Signer avec des signatures num\xE9riques",signWithDigitalDesc:"Cr\xE9ez ou t\xE9l\xE9chargez un certificat num\xE9rique avec un identifiant num\xE9rique unique pour signer des fichiers.",startSigning:"Commencez \xE0 signer"},detailsDialog:{title:"D\xE9tails de la signature num\xE9rique",signBy:"Signature valide, sign\xE9e par",signingTime:"Heure de signature",validitySummary:"R\xE9sum\xE9 de validit\xE9",validIdentity:"L'identit\xE9 du signataire est valide.",invalidIdentity:"L'identit\xE9 du signataire n'est pas valide.",unknownIdentity:"La validit\xE9 de la signature est inconnue car elle n'a pas \xE9t\xE9 incluse dans votre liste de certificats de confiance et aucun de ses certificats parents n'est des certificats de confiance.",expiredCertificate:"Le fichier a \xE9t\xE9 sign\xE9 avec un certificat qui a expir\xE9. Si vous avez acquis ce fichier r\xE9cemment, il se peut qu'il ne soit pas authentique.",invalidSignature:"La signature est valide.",validSignature:"La signature n'est pas valide.",notModifiedDoc:"Le document n'a pas \xE9t\xE9 modifi\xE9 depuis l'apposition de cette signature.",alteredDoc:"Le document a \xE9t\xE9 modifi\xE9 ou corrompu depuis sa signature par l'utilisateur actuel.",viewCertificateDetails:"Afficher les d\xE9tails du certificat",unknownSignature:"La validit\xE9 de la signature est inconnue.",atLeastOneInvalid:"Au moins une signature n'est pas valide.",viewAllSignatures:"Afficher toutes les signatures"},certificateViewerDialog:{title:"Visionneuse de certificats",abstracts:"R\xE9sum\xE9s",summary:"R\xE9sum\xE9",issuedTo:"D\xE9livr\xE9 \xE0:",issuer:"\xC9metteur:",validFrom:"Valable \xE0 partir de:",validTo:"Valable jusqu'\xE0:",intendedUsage:"Utilisation pr\xE9vue:",details:"D\xE9tails",version:"Version",algorithm:"Algorithme",subject:"Sujet",serialNumber:"Num\xE9ro de s\xE9rie",certificatePolicy:"Politique de certification:",crlDistributionPoints:"Points de distribution des listes de r\xE9vocation de certificats:",issuerInfoAccess:"Acc\xE8s aux informations sur l'\xE9metteur:",issuerKeyIdentifier:"Identifiant cl\xE9 de l'\xE9metteur:",subjectKeyIdentifier:"Identifiant cl\xE9 du sujet:",basicConstraints:"Contraintes de base:",keyUsage:"Utilisation cl\xE9:",publicKey:"Cl\xE9 publique:",X509:"Donn\xE9es X.509:",SHA1Digest:"R\xE9sum\xE9 SHA1:",MD5Digest:"R\xE9sum\xE9 MD5:",trust:"Confiance",trustedTo:"Ce certificat est fiable pour:",sign:"Signer un document ou des donn\xE9es",certify:"Certifier le document",addToTrust:"Ajouter aux certificats de confiance",done:"Fait"},deleteConfirm:"\xCAtes-vous s\xFBr de le supprimer?",addDigitalFileDialog:{title:"Ajouter une identification num\xE9rique",desc:"Parcourez un fichier d'identification num\xE9rique. Les identifiants num\xE9riques sont prot\xE9g\xE9s par mot de passe. Si vous ne connaissez pas le mot de passe, vous ne pouvez pas obtenir d'identification num\xE9rique.",certificateFile:"Fichier de certificat",uploadFile:"T\xE9l\xE9charger le fichier de certificat",upload:"T\xE9l\xE9charger",password:"Mot de passe",enterPassword:"Entrez le mot de passe du fichier de certificat",invalidPassword:"Mot de passe invalide"},appearanceDialog:{title:"Personnaliser l'apparence de la signature",signHere:"Signez ici !",includeText:"Inclure du texte",name:"Nom",dName:"Nom distinctif",date:"Date",ComPDFKitVersion:"Version ComPDFKit",logo:"Logo",location:"Emplacement",reason:"Raison",signReason:"Raison",docOwner:"Je suis le propri\xE9taire du document",approvingDoc:"J'approuve le document",reviewedDoc:"J'ai examin\xE9 ce document",labels:"\xC9tiquettes",text:"Texte",type:"Taper",textAlignment:"Alignement du texte"}},color="Couleur",opacity="Opacit\xE9",font="Fonte",regular="R\xE9gulier",oblique="Oblique",bold="Audacieux",boldOblique="Oblique gras",warning="\u6CE8\u610F",colon="\uFF1A",compare$1={startCompare:"Commencez \xE0 comparer",exit:"Sortie",oldFile:"Ancien fichier",newFile:"Nouveau fichier",dropFile:["D\xE9posez un fichier PDF ici","ou"],chooseOldFile:"Choisissez votre ancien fichier",chooseNewFile:"Choisissez votre nouveau fichier",comingSoon:"Les r\xE9sultats de la comparaison arrivent bient\xF4t\xA0!",contentComparison:"Comparaison de contenu",compareItems:"Comparer les articles",text:"Texte",images:"Images",colorMark:"Couleur pour marquer les diff\xE9rences",replacedContent:"Contenu remplac\xE9",insertedContent:"Contenu ins\xE9r\xE9",deletedContent:"Contenu supprim\xE9",overlayComparison:"Comparaison de superposition",blendMode:"Mode de fusion",normal:"Normale",multiply:"Multiplier",screen:"\xC9cran",overlay:"Recouvrir",darken:"Assombrir",lighten:"All\xE9ger",colorDodge:"CouleurDodge",colorBurn:"CouleurBurn",hardLight:"Lumi\xE8re dure",softLight:"Lumi\xE8re douce",difference:"Diff\xE9rence",exclusion:"Exclusion",hue:"Teinte",saturation:"Saturation",colour:"Couleur",luminosity:"Luminosit\xE9",return:"Retour",compare:"Comparer",downloadOptions:"S\xE9lectionnez une option de sortie",downloadTwoFiles:"Enregistrer et t\xE9l\xE9charger s\xE9par\xE9ment",downloadOneFile:"Fusionner en un seul fichier",printSetting:"Param\xE8tres d'impression",printOldFile:"Imprimer le r\xE9sultat de la comparaison de l'ancien fichier",printNewFile:"Imprimer le r\xE9sultat de la comparaison du nouveau fichier",byComPDFKit:"R\xE9sultats de comparaison par ComPDFKit"},editorPanel={textProp:"Propri\xE9t\xE9s du texte",fontColor:"Couleur de police",textStyle:"Style de texte",spacing:"Espacement",characterSpacing:"Espacement des caract\xE8res",lineSpacing:"Espacement des lignes",paragraphSpacing:"Espacement des paragraphes",imageProp:"Propri\xE9t\xE9s de l'image",rotate:"Tourner",rotateLeft:"Faire pivoter \xE0 gauche",rotateRight:"Faire pivoter \xE0 droite",flip:"Retourner",flipHorizontal:"Retourner horizontalement",flipVertical:"Retourner verticalement",tools:"Outils",replace:"Remplacer",export:"Exporter",crop:"Recadrer",maximum:"Taille maximale de l'image de t\xE9l\xE9chargement: 2 Mo."},documentEditor={save:"Sauvegarder",saveAs:"Enregistrer sous...",insert:"Ins\xE9rer",delete:"Supprimer",rotateRight:"Faire pivoter \xE0 droite",rotateLeft:"Faire pivoter \xE0 gauche",copy:"Copie",extract:"Extrait",replace:"Remplacer",move:"Se d\xE9placer",selectAll:"S\xE9lectionner tout",dialog:{insertPages:"Ins\xE9rer des pages",blankPage:"Page blanche",customPage:"Page vierge personnalis\xE9e",fromPdf:"\xC0 partir du PDF",selectFile:"S\xE9lectionnez un fichier",pageRange:"Plage de pages",allPages:"Toutes les pages",oddPage:"Pages impaires uniquement",evenPage:"Pages paires uniquement",customRange:"Gamme personnalis\xE9e",insertTo:"Ins\xE9rer dans",firstPage:"Premi\xE8re page",lastPage:"Derni\xE8re page",page:"Page",pageTip:"par ex. 3, 5-10",before:"Avant",after:"Apr\xE8s"},deleteConfirmText:"Voulez-vous supprimer la page",eachPage:"Chaque page dans un fichier s\xE9par\xE9",deleteAfter:"Supprimer la page apr\xE8s l'extraction",moveTo:"D\xE9placer apr\xE8s la page:",inputPageTip:"Entrez 0 au num\xE9ro de page maximum"},paste="Coller",properties="Propri\xE9t\xE9s",security={pwdProtection:"Protection par mot de passe",encryption:"Cryptage",decryption:"D\xE9cryptage",redaction:"R\xE9daction",fillBlack:"Remplir en noir",fillWhite:"Remplir en blanc",caution:"Prudence",enterTip:"Le contenu expurg\xE9 sera d\xE9finitivement supprim\xE9 de ce document. Veuillez confirmer votre action.",understand:"Comprendre et d\xE9marrer",applyTip:"Apr\xE8s avoir appliqu\xE9 les expurgations, le contenu expurg\xE9 sera d\xE9finitivement supprim\xE9.",exit:"Sortie",apply:"Appliquer",note:"Note",exitTip:"Vos suppressions n'ont pas \xE9t\xE9 appliqu\xE9es. Etes-vous s\xFBr de sortir ?",exitConfirm:"Sortie",saveTip:["Tout le contenu expurg\xE9 de ce document sera d\xE9finitivement supprim\xE9 et ne pourra pas \xEAtre r\xE9cup\xE9r\xE9.","\xCAtes-vous s\xFBr de vouloir les expurger et enregistrer le fichier?"],save:"Sauvegarder"},layer={show:"Montrer",hide:"Cacher",lock:"Verrouillage",unlock:"Ouvrir",lockedTip:"Le calque actuel est verrouill\xE9. Pour modifier sa visibilit\xE9, veuillez d'abord le d\xE9verrouiller dans les propri\xE9t\xE9s du calque.",ok:"D'ACCORD",setProperty:"D\xE9finir la propri\xE9t\xE9 du calque",layerProperty:"Propri\xE9t\xE9 de calque",layerName:"Nom du calque",enterLayerName:"Veuillez entrer le nom du calque",defaultSettings:"Param\xE8tres par d\xE9faut",defaultShow:"Affichage par d\xE9faut lors de l'ouverture de fichiers",defaultHide:"Masquer par d\xE9faut lors de l'ouverture de fichiers",lockLayer:"Calque de verrouillage",printProperty:"Imprimer la propri\xE9t\xE9",always:"Toujours",never:"Jamais",printVisible:"Imprimer lorsqu'il est visible",exportProperty:"Propri\xE9t\xE9 d'exportation",exportVisible:"Exporter lorsqu'il est visible",copyLink:"Copier le lien",technicalDoc:"\u6280\u672F\u6587\u6863"},colorSeparation={toggleColor:"Changer les couleurs",notShowTip:"La couleur ne sera pas affich\xE9e dans le document",accessOnPc:"Cette fonctionnalit\xE9 n'est pas disponible pour mobile, veuillez y acc\xE9der sur PC pour la meilleure exp\xE9rience"},measurement={scale:"\xC9chelle",length:"Longueur",precision:"Pr\xE9cision",angle:"Angle",radius:"Rayon",perimeter:"P\xE9rim\xE8tre",area:"Zone",reply:"R\xE9pondre",drawingToActual:"Dimensions du dessin : Taille r\xE9elle",settingScale:"\xC9chelle",pt:"pt",in:"dans",mm:"mm",cm:"cm",m:"m",km:"kilom\xE8tres",ft:"pi",yd:"yd",mi:"mi",measurementSettings:"Param\xE8tres de mesure",scaleError:"L'\xE9chelle doit \xEAtre sup\xE9rieure \xE0 0",showCaption:"Afficher la l\xE9gende",done:"Fait"},measurementPanel={appearance:"Apparence",lineColor:"Couleur de ligne",fillColor:"Couleur de remplissage",lineWidth:"Largeur de ligne",lineStyle:"Style de ligne et de bordure",start:"Commencer",end:"Fin",fontColor:"Couleur de police",fontStyle:"Style de police",note:"Note"},fr={header,nextPage:nextPage$1,previousPage:previousPage$1,loading,upload,exit,leftPanel,pageModePanel,stampPanel,linkPanel,rightPanel,prevent,passwordDialog,ok,cancel,continue:"Continuer",signatures,color,opacity,font,regular,oblique,bold,boldOblique,delete:"\u5220\u9664",warning,colon,compare:compare$1,editorPanel,documentEditor,paste,properties,security,layer,colorSeparation,measurement,measurementPanel};let language=window.localStorage.getItem("currentLanguage")||"en";const supportLanguages=["zh-CN","en","ja","th","zh-TW","fr"];language&&!supportLanguages.includes(language)&&(language="en");const i18n=createI18n({legacy:!1,locale:language,fallbackLocale:"en",messages:{en,"zh-CN":zhCN,"zh-TW":zhTW,fr,ja,th}});let onceCbs=[];const paramsMap=new WeakMap;function flushOnceCallbacks(){onceCbs.forEach(e=>e(...paramsMap.get(e))),onceCbs=[]}function beforeNextFrameOnce(e,...n){paramsMap.set(e,n),!onceCbs.includes(e)&&onceCbs.push(e)===1&&requestAnimationFrame(flushOnceCallbacks)}function happensIn(e,n){let{target:r}=e;for(;r;){if(r.dataset&&r.dataset[n]!==void 0)return!0;r=r.parentElement}return!1}function getPreciseEventTarget(e){return e.composedPath()[0]||null}function depx(e){return typeof e=="string"?e.endsWith("px")?Number(e.slice(0,e.length-2)):Number(e):e}function pxfy(e){if(e!=null)return typeof e=="number"?`${e}px`:e.endsWith("px")?e:`${e}px`}function getMargin(e,n){const r=e.trim().split(/\s+/g),o={top:r[0]};switch(r.length){case 1:o.right=r[0],o.bottom=r[0],o.left=r[0];break;case 2:o.right=r[1],o.left=r[1],o.bottom=r[0];break;case 3:o.right=r[1],o.bottom=r[2],o.left=r[1];break;case 4:o.right=r[1],o.bottom=r[2],o.left=r[3];break;default:throw new Error("[seemly/getMargin]:"+e+" is not a valid value.")}return n===void 0?o:o[n]}const colors={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"};function hsl2hsv(e,n,r){n/=100,r/=100;const o=n*Math.min(r,1-r)+r;return[e,o?(2-2*r/o)*100:0,o*100]}function hsv2hsl(e,n,r){n/=100,r/=100;const o=r-r*n/2,s=Math.min(o,1-o);return[e,s?(r-o)/s*100:0,o*100]}function hsv2rgb(e,n,r){n/=100,r/=100;let o=(s,u=(s+e/60)%6)=>r-r*n*Math.max(Math.min(u,4-u,1),0);return[o(5)*255,o(3)*255,o(1)*255]}function rgb2hsv(e,n,r){e/=255,n/=255,r/=255;let o=Math.max(e,n,r),s=o-Math.min(e,n,r),u=s&&(o==e?(n-r)/s:o==n?2+(r-e)/s:4+(e-n)/s);return[60*(u<0?u+6:u),o&&s/o*100,o*100]}function rgb2hsl(e,n,r){e/=255,n/=255,r/=255;let o=Math.max(e,n,r),s=o-Math.min(e,n,r),u=1-Math.abs(o+o-s-1),d=s&&(o==e?(n-r)/s:o==n?2+(r-e)/s:4+(e-n)/s);return[60*(d<0?d+6:d),u?s/u*100:0,(o+o-s)*50]}function hsl2rgb(e,n,r){n/=100,r/=100;let o=n*Math.min(r,1-r),s=(u,d=(u+e/30)%12)=>r-o*Math.max(Math.min(d-3,9-d,1),-1);return[s(0)*255,s(8)*255,s(4)*255]}const prefix$1="^\\s*",suffix="\\s*$",percent="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",float="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",hex="([0-9A-Fa-f])",dhex="([0-9A-Fa-f]{2})",hslRegex=new RegExp(`${prefix$1}hsl\\s*\\(${float},${percent},${percent}\\)${suffix}`),hsvRegex=new RegExp(`${prefix$1}hsv\\s*\\(${float},${percent},${percent}\\)${suffix}`),hslaRegex=new RegExp(`${prefix$1}hsla\\s*\\(${float},${percent},${percent},${float}\\)${suffix}`),hsvaRegex=new RegExp(`${prefix$1}hsva\\s*\\(${float},${percent},${percent},${float}\\)${suffix}`),rgbRegex=new RegExp(`${prefix$1}rgb\\s*\\(${float},${float},${float}\\)${suffix}`),rgbaRegex=new RegExp(`${prefix$1}rgba\\s*\\(${float},${float},${float},${float}\\)${suffix}`),sHexRegex=new RegExp(`${prefix$1}#${hex}${hex}${hex}${suffix}`),hexRegex=new RegExp(`${prefix$1}#${dhex}${dhex}${dhex}${suffix}`),sHexaRegex=new RegExp(`${prefix$1}#${hex}${hex}${hex}${hex}${suffix}`),hexaRegex=new RegExp(`${prefix$1}#${dhex}${dhex}${dhex}${dhex}${suffix}`);function parseHex(e){return parseInt(e,16)}function hsla(e){try{let n;if(n=hslaRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),roundAlpha(n[13])];if(n=hslRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${e}.`)}catch(n){throw n}}function hsva(e){try{let n;if(n=hsvaRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),roundAlpha(n[13])];if(n=hsvRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${e}.`)}catch(n){throw n}}function rgba(e){try{let n;if(n=hexRegex.exec(e))return[parseHex(n[1]),parseHex(n[2]),parseHex(n[3]),1];if(n=rgbRegex.exec(e))return[roundChannel(n[1]),roundChannel(n[5]),roundChannel(n[9]),1];if(n=rgbaRegex.exec(e))return[roundChannel(n[1]),roundChannel(n[5]),roundChannel(n[9]),roundAlpha(n[13])];if(n=sHexRegex.exec(e))return[parseHex(n[1]+n[1]),parseHex(n[2]+n[2]),parseHex(n[3]+n[3]),1];if(n=hexaRegex.exec(e))return[parseHex(n[1]),parseHex(n[2]),parseHex(n[3]),roundAlpha(parseHex(n[4])/255)];if(n=sHexaRegex.exec(e))return[parseHex(n[1]+n[1]),parseHex(n[2]+n[2]),parseHex(n[3]+n[3]),roundAlpha(parseHex(n[4]+n[4])/255)];if(e in colors)return rgba(colors[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(n){throw n}}function normalizeAlpha$1(e){return e>1?1:e<0?0:e}function stringifyRgb(e,n,r){return`rgb(${roundChannel(e)}, ${roundChannel(n)}, ${roundChannel(r)})`}function stringifyRgba(e,n,r,o){return`rgba(${roundChannel(e)}, ${roundChannel(n)}, ${roundChannel(r)}, ${normalizeAlpha$1(o)})`}function compositeChannel(e,n,r,o,s){return roundChannel((e*n*(1-o)+r*o)/s)}function composite(e,n){Array.isArray(e)||(e=rgba(e)),Array.isArray(n)||(n=rgba(n));const r=e[3],o=n[3],s=roundAlpha(r+o-r*o);return stringifyRgba(compositeChannel(e[0],r,n[0],o,s),compositeChannel(e[1],r,n[1],o,s),compositeChannel(e[2],r,n[2],o,s),s)}function changeColor(e,n){const[r,o,s,u=1]=Array.isArray(e)?e:rgba(e);return n.alpha?stringifyRgba(r,o,s,n.alpha):stringifyRgba(r,o,s,u)}function scaleColor(e,n){const[r,o,s,u=1]=Array.isArray(e)?e:rgba(e),{lightness:d=1,alpha:f=1}=n;return toRgbaString([r*d,o*d,s*d,u*f])}function roundAlpha(e){const n=Math.round(Number(e)*100)/100;return n>1?1:n<0?0:n}function roundDeg(e){const n=Math.round(Number(e));return n>=360||n<0?0:n}function roundChannel(e){const n=Math.round(Number(e));return n>255?255:n<0?0:n}function roundPercent(e){const n=Math.round(Number(e));return n>100?100:n<0?0:n}function toRgbString(e){const[n,r,o]=Array.isArray(e)?e:rgba(e);return stringifyRgb(n,r,o)}function toRgbaString(e){const[n,r,o]=e;return 3 in e?`rgba(${roundChannel(n)}, ${roundChannel(r)}, ${roundChannel(o)}, ${roundAlpha(e[3])})`:`rgba(${roundChannel(n)}, ${roundChannel(r)}, ${roundChannel(o)}, 1)`}function toHsvString(e){return`hsv(${roundDeg(e[0])}, ${roundPercent(e[1])}%, ${roundPercent(e[2])}%)`}function toHsvaString(e){const[n,r,o]=e;return 3 in e?`hsva(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, ${roundAlpha(e[3])})`:`hsva(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, 1)`}function toHslString(e){return`hsl(${roundDeg(e[0])}, ${roundPercent(e[1])}%, ${roundPercent(e[2])}%)`}function toHslaString(e){const[n,r,o]=e;return 3 in e?`hsla(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, ${roundAlpha(e[3])})`:`hsla(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, 1)`}function toHexaString(e){if(typeof e=="string"){let o;if(o=hexRegex.exec(e))return`${o[0]}FF`;if(o=hexaRegex.exec(e))return o[0];if(o=sHexRegex.exec(e))return`#${o[1]}${o[1]}${o[2]}${o[2]}${o[3]}${o[3]}FF`;if(o=sHexaRegex.exec(e))return`#${o[1]}${o[1]}${o[2]}${o[2]}${o[3]}${o[3]}${o[4]}${o[4]}`;throw new Error(`[seemly/toHexString]: Invalid hex value ${e}.`)}const n=`#${e.slice(0,3).map(o=>roundChannel(o).toString(16).toUpperCase().padStart(2,"0")).join("")}`,r=e.length===3?"FF":roundChannel(e[3]*255).toString(16).padStart(2,"0").toUpperCase();return n+r}function toHexString(e){if(typeof e=="string"){let n;if(n=hexRegex.exec(e))return n[0];if(n=hexaRegex.exec(e))return n[0].slice(0,7);if(n=sHexRegex.exec(e)||sHexaRegex.exec(e))return`#${n[1]}${n[1]}${n[2]}${n[2]}${n[3]}${n[3]}`;throw new Error(`[seemly/toHexString]: Invalid hex value ${e}.`)}return`#${e.slice(0,3).map(n=>roundChannel(n).toString(16).toUpperCase().padStart(2,"0")).join("")}`}function createId(e=8){return Math.random().toString(16).slice(2,2+e)}function keep(e,n=[],r){const o={};return n.forEach(s=>{o[s]=e[s]}),Object.assign(o,r)}function omit(e,n=[],r){const o={};return Object.getOwnPropertyNames(e).forEach(u=>{n.includes(u)||(o[u]=e[u])}),Object.assign(o,r)}function flatten$2(e,n=!0,r=[]){return e.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(createTextVNode(String(o)));return}if(Array.isArray(o)){flatten$2(o,n,r);return}if(o.type===Fragment){if(o.children===null)return;Array.isArray(o.children)&&flatten$2(o.children,n,r)}else{if(o.type===Comment&&n)return;r.push(o)}}}),r}function call(e,...n){if(Array.isArray(e))e.forEach(r=>call(r,...n));else return e(...n)}function keysOf(e){return Object.keys(e)}function render$1(e,...n){return typeof e=="function"?e(...n):typeof e=="string"?createTextVNode(e):typeof e=="number"?createTextVNode(String(e)):null}function warn$2(e,n){console.error(`[naive/${e}]: ${n}`)}function throwError(e,n){throw new Error(`[naive/${e}]: ${n}`)}function getTitleAttribute(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function getFirstSlotVNode(e,n="default",r=void 0){const o=e[n];if(!o)return warn$2("getFirstSlotVNode",`slot[${n}] is empty`),null;const s=flatten$2(o(r));return s.length===1?s[0]:(warn$2("getFirstSlotVNode",`slot[${n}] should have exactly one child`),null)}function createRefSetter(e){return n=>{n?e.value=n.$el:e.value=null}}function createInjectionKey(e){return e}function ensureValidVNode(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode(n.children)):!0)?e:null}function resolveSlot(e,n){return e&&ensureValidVNode(e())||n()}function resolveSlotWithProps(e,n,r){return e&&ensureValidVNode(e(n))||r(n)}function resolveWrappedSlot(e,n){const r=e&&ensureValidVNode(e());return n(r||null)}function isSlotEmpty(e){return!(e&&ensureValidVNode(e()))}function mergeEventHandlers(e){const n=e.filter(r=>r!==void 0);if(n.length!==0)return n.length===1?n[0]:r=>{e.forEach(o=>{o&&o(r)})}}const Wrapper=defineComponent({render(){var e,n;return(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)}}),pureNumberRegex=/^(\d|\.)+$/,numberRegex=/(\d|\.)+/;function formatLength(e,{c:n=1,offset:r=0,attachPx:o=!0}={}){if(typeof e=="number"){const s=(e+r)*n;return s===0?"0":`${s}px`}else if(typeof e=="string")if(pureNumberRegex.test(e)){const s=(Number(e)+r)*n;return o?s===0?"0":`${s}px`:`${s}`}else{const s=numberRegex.exec(e);return s?e.replace(numberRegex,String((Number(s[0])+r)*n)):e}return e}function color2Class(e){return e.replace(/#|\(|\)|,|\s|\./g,"_")}function rtlInset(e){const{left:n,right:r,top:o,bottom:s}=getMargin(e);return`${o} ${r} ${s} ${n}`}function ampCount(e){let n=0;for(let r=0;r<e.length;++r)e[r]==="&"&&++n;return n}const separatorRegex=/\s*,(?![^(]*\))\s*/g,extraSpaceRegex=/\s+/g;function resolveSelectorWithAmp(e,n){const r=[];return n.split(separatorRegex).forEach(o=>{let s=ampCount(o);if(s){if(s===1){e.forEach(d=>{r.push(o.replace("&",d))});return}}else{e.forEach(d=>{r.push((d&&d+" ")+o)});return}let u=[o];for(;s--;){const d=[];u.forEach(f=>{e.forEach(g=>{d.push(f.replace("&",g))})}),u=d}u.forEach(d=>r.push(d))}),r}function resolveSelector(e,n){const r=[];return n.split(separatorRegex).forEach(o=>{e.forEach(s=>{r.push((s&&s+" ")+o)})}),r}function parseSelectorPath(e){let n=[""];return e.forEach(r=>{r=r&&r.trim(),r&&(r.includes("&")?n=resolveSelectorWithAmp(n,r):n=resolveSelector(n,r))}),n.join(", ").replace(extraSpaceRegex," ")}function removeElement(e){if(!e)return;const n=e.parentElement;n&&n.removeChild(e)}function queryElement(e,n){return(n!=null?n:document.head).querySelector(`style[cssr-id="${e}"]`)}function createElement$1(e){const n=document.createElement("style");return n.setAttribute("cssr-id",e),n}function isMediaOrSupports(e){return e?/^\s*@(s|m)/.test(e):!1}const kebabRegex=/[A-Z]/g;function kebabCase(e){return e.replace(kebabRegex,n=>"-"+n.toLowerCase())}function unwrapProperty(e,n="  "){return typeof e=="object"&&e!==null?` {
`+Object.entries(e).map(r=>n+`  ${kebabCase(r[0])}: ${r[1]};`).join(`
`)+`
`+n+"}":`: ${e};`}function unwrapProperties(e,n,r){return typeof e=="function"?e({context:n.context,props:r}):e}function createStyle(e,n,r,o){if(!n)return"";const s=unwrapProperties(n,r,o);if(!s)return"";if(typeof s=="string")return`${e} {
${s}
}`;const u=Object.keys(s);if(u.length===0)return r.config.keepEmptyBlock?e+` {
}`:"";const d=e?[e+" {"]:[];return u.forEach(f=>{const g=s[f];if(f==="raw"){d.push(`
`+g+`
`);return}f=kebabCase(f),g!=null&&d.push(`  ${f}${unwrapProperty(g)}`)}),e&&d.push("}"),d.join(`
`)}function loopCNodeListWithCallback(e,n,r){!e||e.forEach(o=>{if(Array.isArray(o))loopCNodeListWithCallback(o,n,r);else if(typeof o=="function"){const s=o(n);Array.isArray(s)?loopCNodeListWithCallback(s,n,r):s&&r(s)}else o&&r(o)})}function traverseCNode(e,n,r,o,s){const u=e.$;let d="";if(!u||typeof u=="string")isMediaOrSupports(u)?d=u:n.push(u);else if(typeof u=="function"){const m=u({context:o.context,props:s});isMediaOrSupports(m)?d=m:n.push(m)}else if(u.before&&u.before(o.context),!u.$||typeof u.$=="string")isMediaOrSupports(u.$)?d=u.$:n.push(u.$);else if(u.$){const m=u.$({context:o.context,props:s});isMediaOrSupports(m)?d=m:n.push(m)}const f=parseSelectorPath(n),g=createStyle(f,e.props,o,s);d?r.push(`${d} {`):g.length&&r.push(g),e.children&&loopCNodeListWithCallback(e.children,{context:o.context,props:s},m=>{if(typeof m=="string"){const y=createStyle(f,{raw:m},o,s);r.push(y)}else traverseCNode(m,n,r,o,s)}),n.pop(),d&&r.push("}"),u&&u.after&&u.after(o.context)}function render(e,n,r){const o=[];return traverseCNode(e,[],o,n,r),o.join(`

`)}function murmur2(e){for(var n=0,r,o=0,s=e.length;s>=4;++o,s-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,n=(r&65535)*1540483477+((r>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(s){case 3:n^=(e.charCodeAt(o+2)&255)<<16;case 2:n^=(e.charCodeAt(o+1)&255)<<8;case 1:n^=e.charCodeAt(o)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function unmount(e,n,r,o){const{els:s}=n;if(r===void 0)s.forEach(removeElement),n.els=[];else{const u=queryElement(r,o);u&&s.includes(u)&&(removeElement(u),n.els=s.filter(d=>d!==u))}}function addElementToList(e,n){e.push(n)}function mount(e,n,r,o,s,u,d,f,g){let m;if(r===void 0&&(m=n.render(o),r=murmur2(m)),g){g.adapter(r,m!=null?m:n.render(o));return}f===void 0&&(f=document.head);const y=queryElement(r,f);if(y!==null&&!u)return y;const v=y!=null?y:createElement$1(r);if(m===void 0&&(m=n.render(o)),v.textContent=m,y!==null)return y;if(d){const _=f.querySelector(`meta[name="${d}"]`);if(_)return f.insertBefore(v,_),addElementToList(n.els,v),v}return s?f.insertBefore(v,f.querySelector("style, link")):f.appendChild(v),addElementToList(n.els,v),v}function wrappedRender(e){return render(this,this.instance,e)}function wrappedMount(e={}){const{id:n,ssr:r,props:o,head:s=!1,force:u=!1,anchorMetaName:d,parent:f}=e;return mount(this.instance,this,n,o,s,u,d,f,r)}function wrappedUnmount(e={}){const{id:n,parent:r}=e;unmount(this.instance,this,n,r)}const createCNode=function(e,n,r,o){return{instance:e,$:n,props:r,children:o,els:[],render:wrappedRender,mount:wrappedMount,unmount:wrappedUnmount}},c$2=function(e,n,r,o){return Array.isArray(n)?createCNode(e,{$:null},null,n):Array.isArray(r)?createCNode(e,n,null,r):Array.isArray(o)?createCNode(e,n,r,o):createCNode(e,n,r,null)};function CssRender(e={}){const n={c:(...r)=>c$2(n,...r),use:(r,...o)=>r.install(n,...o),find:queryElement,context:{},config:e};return n}function exists(e,n){if(e===void 0)return!1;if(n){const{context:{ids:r}}=n;return r.has(e)}return queryElement(e)!==null}function plugin$1(e){let n=".",r="__",o="--",s;if(e){let x=e.blockPrefix;x&&(n=x),x=e.elementPrefix,x&&(r=x),x=e.modifierPrefix,x&&(o=x)}const u={install(x){s=x.c;const k=x.context;k.bem={},k.bem.b=null,k.bem.els=null}};function d(x){let k,S;return{before(M){k=M.bem.b,S=M.bem.els,M.bem.els=null},after(M){M.bem.b=k,M.bem.els=S},$({context:M,props:E}){return x=typeof x=="string"?x:x({context:M,props:E}),M.bem.b=x,`${(E==null?void 0:E.bPrefix)||n}${M.bem.b}`}}}function f(x){let k;return{before(S){k=S.bem.els},after(S){S.bem.els=k},$({context:S,props:M}){return x=typeof x=="string"?x:x({context:S,props:M}),S.bem.els=x.split(",").map(E=>E.trim()),S.bem.els.map(E=>`${(M==null?void 0:M.bPrefix)||n}${S.bem.b}${r}${E}`).join(", ")}}}function g(x){return{$({context:k,props:S}){x=typeof x=="string"?x:x({context:k,props:S});const M=x.split(",").map(T=>T.trim());function E(T){return M.map(D=>`&${(S==null?void 0:S.bPrefix)||n}${k.bem.b}${T!==void 0?`${r}${T}`:""}${o}${D}`).join(", ")}const P=k.bem.els;return P!==null?E(P[0]):E()}}}function m(x){return{$({context:k,props:S}){x=typeof x=="string"?x:x({context:k,props:S});const M=k.bem.els;return`&:not(${(S==null?void 0:S.bPrefix)||n}${k.bem.b}${M!==null&&M.length>0?`${r}${M[0]}`:""}${o}${x})`}}}return Object.assign(u,{cB:(...x)=>s(d(x[0]),x[1],x[2]),cE:(...x)=>s(f(x[0]),x[1],x[2]),cM:(...x)=>s(g(x[0]),x[1],x[2]),cNotM:(...x)=>s(m(x[0]),x[1],x[2])}),u}const namespace="n",prefix=`.${namespace}-`,elementPrefix="__",modifierPrefix="--",cssr=CssRender(),plugin=plugin$1({blockPrefix:prefix,elementPrefix,modifierPrefix});cssr.use(plugin);const{c:c$1,find:find$1}=cssr,{cB,cE,cM,cNotM}=plugin;function insideModal(e){return c$1(({props:{bPrefix:n}})=>`${n||prefix}modal, ${n||prefix}drawer`,[e])}function insidePopover(e){return c$1(({props:{bPrefix:n}})=>`${n||prefix}popover`,[e])}function asModal(e){return c$1(({props:{bPrefix:n}})=>`&${n||prefix}modal`,e)}const cCB=(...e)=>c$1(">",[cB(...e)]);function createKey(e,n){return e+(n==="default"?"":n.replace(/^[a-z]/,r=>r.toUpperCase()))}let _isJsdom;function isJsdom(){return _isJsdom===void 0&&(_isJsdom=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),_isJsdom}const isBrowser$2=typeof document<"u"&&typeof window<"u",eventSet=new WeakSet;function markEventEffectPerformed(e){eventSet.add(e)}function eventEffectNotPerformed(e){return!eventSet.has(e)}function useFalseUntilTruthy(e){const n=ref(!!e.value);if(n.value)return readonly(n);const r=watch(e,o=>{o&&(n.value=!0,r())});return readonly(n)}function useMemo(e){const n=computed(e),r=ref(n.value);return watch(n,o=>{r.value=o}),typeof e=="function"?r:{__v_isRef:!0,get value(){return r.value},set value(o){e.set(o)}}}function hasInstance(){return getCurrentInstance()!==null}const isBrowser$1=typeof window<"u";let fontsReady,isFontReady;const init$1=()=>{var e,n;fontsReady=isBrowser$1?(n=(e=document)===null||e===void 0?void 0:e.fonts)===null||n===void 0?void 0:n.ready:void 0,isFontReady=!1,fontsReady!==void 0?fontsReady.then(()=>{isFontReady=!0}):isFontReady=!0};init$1();function onFontsReady(e){if(isFontReady)return;let n=!1;onMounted(()=>{isFontReady||fontsReady==null||fontsReady.then(()=>{n||e()})}),onBeforeUnmount(()=>{n=!0})}function getEventTarget(e){return e.composedPath()[0]}const traps={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function createTrapHandler(e,n,r){if(e==="mousemoveoutside"){const o=s=>{n.contains(getEventTarget(s))||r(s)};return{mousemove:o,touchstart:o}}else if(e==="clickoutside"){let o=!1;const s=d=>{o=!n.contains(getEventTarget(d))},u=d=>{!o||n.contains(getEventTarget(d))||r(d)};return{mousedown:s,mouseup:u,touchstart:s,touchend:u}}return console.error(`[evtd/create-trap-handler]: name \`${e}\` is invalid. This could be a bug of evtd.`),{}}function ensureTrapHandlers(e,n,r){const o=traps[e];let s=o.get(n);s===void 0&&o.set(n,s=new WeakMap);let u=s.get(r);return u===void 0&&s.set(r,u=createTrapHandler(e,n,r)),u}function trapOn(e,n,r,o){if(e==="mousemoveoutside"||e==="clickoutside"){const s=ensureTrapHandlers(e,n,r);return Object.keys(s).forEach(u=>{on$1(u,document,s[u],o)}),!0}return!1}function trapOff(e,n,r,o){if(e==="mousemoveoutside"||e==="clickoutside"){const s=ensureTrapHandlers(e,n,r);return Object.keys(s).forEach(u=>{off$1(u,document,s[u],o)}),!0}return!1}function createDelegate(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const e=new WeakMap,n=new WeakMap;function r(){e.set(this,!0)}function o(){e.set(this,!0),n.set(this,!0)}function s(I,N,q){const Y=I[N];return I[N]=function(){return q.apply(I,arguments),Y.apply(I,arguments)},I}function u(I,N){I[N]=Event.prototype[N]}const d=new WeakMap,f=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function g(){var I;return(I=d.get(this))!==null&&I!==void 0?I:null}function m(I,N){f!==void 0&&Object.defineProperty(I,"currentTarget",{configurable:!0,enumerable:!0,get:N!=null?N:f.get})}const y={bubble:{},capture:{}},v={};function _(){const I=function(N){const{type:q,eventPhase:Y,bubbles:Z}=N,j=getEventTarget(N);if(Y===2)return;const ne=Y===1?"capture":"bubble";let le=j;const J=[];for(;le===null&&(le=window),J.push(le),le!==window;)le=le.parentNode||null;const O=y.capture[q],U=y.bubble[q];if(s(N,"stopPropagation",r),s(N,"stopImmediatePropagation",o),m(N,g),ne==="capture"){if(O===void 0)return;for(let W=J.length-1;W>=0&&!e.has(N);--W){const H=J[W],X=O.get(H);if(X!==void 0){d.set(N,H);for(const Q of X){if(n.has(N))break;Q(N)}}if(W===0&&!Z&&U!==void 0){const Q=U.get(H);if(Q!==void 0)for(const fe of Q){if(n.has(N))break;fe(N)}}}}else if(ne==="bubble"){if(U===void 0)return;for(let W=0;W<J.length&&!e.has(N);++W){const H=J[W],X=U.get(H);if(X!==void 0){d.set(N,H);for(const Q of X){if(n.has(N))break;Q(N)}}}}u(N,"stopPropagation"),u(N,"stopImmediatePropagation"),m(N)};return I.displayName="evtdUnifiedHandler",I}function w(){const I=function(N){const{type:q,eventPhase:Y}=N;if(Y!==2)return;const Z=v[q];Z!==void 0&&Z.forEach(j=>j(N))};return I.displayName="evtdUnifiedWindowEventHandler",I}const x=_(),k=w();function S(I,N){const q=y[I];return q[N]===void 0&&(q[N]=new Map,window.addEventListener(N,x,I==="capture")),q[N]}function M(I){return v[I]===void 0&&(v[I]=new Set,window.addEventListener(I,k)),v[I]}function E(I,N){let q=I.get(N);return q===void 0&&I.set(N,q=new Set),q}function P(I,N,q,Y){const Z=y[N][q];if(Z!==void 0){const j=Z.get(I);if(j!==void 0&&j.has(Y))return!0}return!1}function T(I,N){const q=v[I];return!!(q!==void 0&&q.has(N))}function D(I,N,q,Y){let Z;if(typeof Y=="object"&&Y.once===!0?Z=O=>{F(I,N,Z,Y),q(O)}:Z=q,trapOn(I,N,Z,Y))return;const ne=Y===!0||typeof Y=="object"&&Y.capture===!0?"capture":"bubble",le=S(ne,I),J=E(le,N);if(J.has(Z)||J.add(Z),N===window){const O=M(I);O.has(Z)||O.add(Z)}}function F(I,N,q,Y){if(trapOff(I,N,q,Y))return;const j=Y===!0||typeof Y=="object"&&Y.capture===!0,ne=j?"capture":"bubble",le=S(ne,I),J=E(le,N);if(N===window&&!P(N,j?"bubble":"capture",I,q)&&T(I,q)){const U=v[I];U.delete(q),U.size===0&&(window.removeEventListener(I,k),v[I]=void 0)}J.has(q)&&J.delete(q),J.size===0&&le.delete(N),le.size===0&&(window.removeEventListener(I,x,ne==="capture"),y[ne][I]=void 0)}return{on:D,off:F}}const{on:on$1,off:off$1}=createDelegate(),mousePositionRef=ref(null);function clickHandler(e){if(e.clientX>0||e.clientY>0)mousePositionRef.value={x:e.clientX,y:e.clientY};else{const{target:n}=e;if(n instanceof Element){const{left:r,top:o,width:s,height:u}=n.getBoundingClientRect();r>0||o>0?mousePositionRef.value={x:r+s/2,y:o+u/2}:mousePositionRef.value={x:0,y:0}}else mousePositionRef.value=null}}let usedCount$1=0,managable$1=!0;function useClickPosition(){if(!isBrowser$1)return readonly(ref(null));usedCount$1===0&&on$1("click",document,clickHandler,!0);const e=()=>{usedCount$1+=1};return managable$1&&(managable$1=hasInstance())?(onBeforeMount(e),onBeforeUnmount(()=>{usedCount$1-=1,usedCount$1===0&&off$1("click",document,clickHandler,!0)})):e(),readonly(mousePositionRef)}const clickedTimeRef=ref(void 0);let usedCount=0;function handleClick(){clickedTimeRef.value=Date.now()}let managable=!0;function useClicked(e){if(!isBrowser$1)return readonly(ref(!1));const n=ref(!1);let r=null;function o(){r!==null&&window.clearTimeout(r)}function s(){o(),n.value=!0,r=window.setTimeout(()=>{n.value=!1},e)}usedCount===0&&on$1("click",window,handleClick,!0);const u=()=>{usedCount+=1,on$1("click",window,s,!0)};return managable&&(managable=hasInstance())?(onBeforeMount(u),onBeforeUnmount(()=>{usedCount-=1,usedCount===0&&off$1("click",window,handleClick,!0),off$1("click",window,s,!0),o()})):u(),readonly(n)}function useMergedState(e,n){return watch(e,r=>{r!==void 0&&(n.value=r)}),computed(()=>e.value===void 0?n.value:e.value)}function isMounted(){const e=ref(!1);return onMounted(()=>{e.value=!0}),readonly(e)}function useCompitable(e,n){return computed(()=>{for(const r of n)if(e[r]!==void 0)return e[r];return e[n[n.length-1]]})}const isIos=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function useIsIos(){return isIos}const internalSelectionMenuInjectionKey="n-internal-select-menu",internalSelectionMenuBodyInjectionKey="n-internal-select-menu-body",modalBodyInjectionKey="n-modal-body",modalProviderInjectionKey$1="n-modal-provider",modalInjectionKey="n-modal",drawerBodyInjectionKey="n-drawer-body",popoverBodyInjectionKey="n-popover-body",teleportDisabled="__disabled__";function useAdjustedTo(e){const n=inject(modalBodyInjectionKey,null),r=inject(drawerBodyInjectionKey,null),o=inject(popoverBodyInjectionKey,null),s=inject(internalSelectionMenuBodyInjectionKey,null),u=ref();if(typeof document<"u"){u.value=document.fullscreenElement;const d=()=>{u.value=document.fullscreenElement};onMounted(()=>{on$1("fullscreenchange",document,d)}),onBeforeUnmount(()=>{off$1("fullscreenchange",document,d)})}return useMemo(()=>{var d;const{to:f}=e;return f!==void 0?f===!1?teleportDisabled:f===!0?u.value||"body":f:n!=null&&n.value?(d=n.value.$el)!==null&&d!==void 0?d:n.value:r!=null&&r.value?r.value:o!=null&&o.value?o.value:s!=null&&s.value?s.value:f!=null?f:u.value||"body"})}useAdjustedTo.tdkey=teleportDisabled;useAdjustedTo.propTo={type:[String,Object,Boolean],default:void 0};function getSlot(e,n,r="default"){const o=n[r];if(o===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);return o()}function flatten$1(e,n=!0,r=[]){return e.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(createTextVNode(String(o)));return}if(Array.isArray(o)){flatten$1(o,n,r);return}if(o.type===Fragment){if(o.children===null)return;Array.isArray(o.children)&&flatten$1(o.children,n,r)}else o.type!==Comment&&r.push(o)}}),r}function getFirstVNode(e,n,r="default"){const o=n[r];if(o===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);const s=flatten$1(o());if(s.length===1)return s[0];throw new Error(`[vueuc/${e}]: slot[${r}] should have exactly one child.`)}let viewMeasurer=null;function ensureViewBoundingRect(){if(viewMeasurer===null&&(viewMeasurer=document.getElementById("v-binder-view-measurer"),viewMeasurer===null)){viewMeasurer=document.createElement("div"),viewMeasurer.id="v-binder-view-measurer";const{style:e}=viewMeasurer;e.position="fixed",e.left="0",e.right="0",e.top="0",e.bottom="0",e.pointerEvents="none",e.visibility="hidden",document.body.appendChild(viewMeasurer)}return viewMeasurer.getBoundingClientRect()}function getPointRect(e,n){const r=ensureViewBoundingRect();return{top:n,left:e,height:0,width:0,right:r.width-e,bottom:r.height-n}}function getRect$1(e){const n=e.getBoundingClientRect(),r=ensureViewBoundingRect();return{left:n.left-r.left,top:n.top-r.top,bottom:r.height+r.top-n.bottom,right:r.width+r.left-n.right,width:n.width,height:n.height}}function getParentNode(e){return e.nodeType===9?null:e.parentNode}function getScrollParent(e){if(e===null)return null;const n=getParentNode(e);if(n===null)return null;if(n.nodeType===9)return document;if(n.nodeType===1){const{overflow:r,overflowX:o,overflowY:s}=getComputedStyle(n);if(/(auto|scroll|overlay)/.test(r+s+o))return n}return getScrollParent(n)}const Binder=defineComponent({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(e){var n;provide("VBinder",(n=getCurrentInstance())===null||n===void 0?void 0:n.proxy);const r=inject("VBinder",null),o=ref(null),s=M=>{o.value=M,r&&e.syncTargetWithParent&&r.setTargetRef(M)};let u=[];const d=()=>{let M=o.value;for(;M=getScrollParent(M),M!==null;)u.push(M);for(const E of u)on$1("scroll",E,v,!0)},f=()=>{for(const M of u)off$1("scroll",M,v,!0);u=[]},g=new Set,m=M=>{g.size===0&&d(),g.has(M)||g.add(M)},y=M=>{g.has(M)&&g.delete(M),g.size===0&&f()},v=()=>{beforeNextFrameOnce(_)},_=()=>{g.forEach(M=>M())},w=new Set,x=M=>{w.size===0&&on$1("resize",window,S),w.has(M)||w.add(M)},k=M=>{w.has(M)&&w.delete(M),w.size===0&&off$1("resize",window,S)},S=()=>{w.forEach(M=>M())};return onBeforeUnmount(()=>{off$1("resize",window,S),f()}),{targetRef:o,setTargetRef:s,addScrollListener:m,removeScrollListener:y,addResizeListener:x,removeResizeListener:k}},render(){return getSlot("binder",this.$slots)}}),VBinder=Binder,VTarget=defineComponent({name:"Target",setup(){const{setTargetRef:e,syncTarget:n}=inject("VBinder");return{syncTarget:n,setTargetDirective:{mounted:e,updated:e}}},render(){const{syncTarget:e,setTargetDirective:n}=this;return e?withDirectives(getFirstVNode("follower",this.$slots),[[n]]):getFirstVNode("follower",this.$slots)}}),ctxKey$1="@@mmoContext",mousemoveoutside={mounted(e,{value:n}){e[ctxKey$1]={handler:void 0},typeof n=="function"&&(e[ctxKey$1].handler=n,on$1("mousemoveoutside",e,n))},updated(e,{value:n}){const r=e[ctxKey$1];typeof n=="function"?r.handler?r.handler!==n&&(off$1("mousemoveoutside",e,r.handler),r.handler=n,on$1("mousemoveoutside",e,n)):(e[ctxKey$1].handler=n,on$1("mousemoveoutside",e,n)):r.handler&&(off$1("mousemoveoutside",e,r.handler),r.handler=void 0)},unmounted(e){const{handler:n}=e[ctxKey$1];n&&off$1("mousemoveoutside",e,n),e[ctxKey$1].handler=void 0}},mousemoveoutside$1=mousemoveoutside,ctxKey="@@coContext",clickoutside={mounted(e,{value:n,modifiers:r}){e[ctxKey]={handler:void 0},typeof n=="function"&&(e[ctxKey].handler=n,on$1("clickoutside",e,n,{capture:r.capture}))},updated(e,{value:n,modifiers:r}){const o=e[ctxKey];typeof n=="function"?o.handler?o.handler!==n&&(off$1("clickoutside",e,o.handler,{capture:r.capture}),o.handler=n,on$1("clickoutside",e,n,{capture:r.capture})):(e[ctxKey].handler=n,on$1("clickoutside",e,n,{capture:r.capture})):o.handler&&(off$1("clickoutside",e,o.handler,{capture:r.capture}),o.handler=void 0)},unmounted(e,{modifiers:n}){const{handler:r}=e[ctxKey];r&&off$1("clickoutside",e,r,{capture:n.capture}),e[ctxKey].handler=void 0}},clickoutside$1=clickoutside;function warn$1(e,n){console.error(`[vdirs/${e}]: ${n}`)}class ZIndexManager{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(n,r){const{elementZIndex:o}=this;if(r!==void 0){n.style.zIndex=`${r}`,o.delete(n);return}const{nextZIndex:s}=this;o.has(n)&&o.get(n)+1===this.nextZIndex||(n.style.zIndex=`${s}`,o.set(n,s),this.nextZIndex=s+1,this.squashState())}unregister(n,r){const{elementZIndex:o}=this;o.has(n)?o.delete(n):r===void 0&&warn$1("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:n}=this;n||(this.nextZIndex=2e3),this.nextZIndex-n>2500&&this.rearrange()}rearrange(){const n=Array.from(this.elementZIndex.entries());n.sort((r,o)=>r[1]-o[1]),this.nextZIndex=2e3,n.forEach(r=>{const o=r[0],s=this.nextZIndex++;`${s}`!==o.style.zIndex&&(o.style.zIndex=`${s}`)})}}const zIndexManager=new ZIndexManager,ctx="@@ziContext",zindexable={mounted(e,n){const{value:r={}}=n,{zIndex:o,enabled:s}=r;e[ctx]={enabled:!!s,initialized:!1},s&&(zIndexManager.ensureZIndex(e,o),e[ctx].initialized=!0)},updated(e,n){const{value:r={}}=n,{zIndex:o,enabled:s}=r,u=e[ctx].enabled;s&&!u&&(zIndexManager.ensureZIndex(e,o),e[ctx].initialized=!0),e[ctx].enabled=!!s},unmounted(e,n){if(!e[ctx].initialized)return;const{value:r={}}=n,{zIndex:o}=r;zIndexManager.unregister(e,o)}},zindexable$1=zindexable,ssrContextKey="@css-render/vue3-ssr";function createStyleString(e,n){return`<style cssr-id="${e}">
${n}
</style>`}function ssrAdapter(e,n,r){const{styles:o,ids:s}=r;s.has(e)||o!==null&&(s.add(e),o.push(createStyleString(e,n)))}const isBrowser=typeof document<"u";function useSsrAdapter(){if(isBrowser)return;const e=inject(ssrContextKey,null);if(e!==null)return{adapter:(n,r)=>ssrAdapter(n,r,e),context:e}}function warn(e,n){console.error(`[vueuc/${e}]: ${n}`)}const{c}=CssRender(),cssrAnchorMetaName$1="vueuc-style";function lowBit(e){return e&-e}class FinweckTree{constructor(n,r){this.l=n,this.min=r;const o=new Array(n+1);for(let s=0;s<n+1;++s)o[s]=0;this.ft=o}add(n,r){if(r===0)return;const{l:o,ft:s}=this;for(n+=1;n<=o;)s[n]+=r,n+=lowBit(n)}get(n){return this.sum(n+1)-this.sum(n)}sum(n){if(n===void 0&&(n=this.l),n<=0)return 0;const{ft:r,min:o,l:s}=this;if(n>s)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let u=n*o;for(;n>0;)u+=r[n],n-=lowBit(n);return u}getBound(n){let r=0,o=this.l;for(;o>r;){const s=Math.floor((r+o)/2),u=this.sum(s);if(u>n){o=s;continue}else if(u<n){if(r===s)return this.sum(r+1)<=n?r+1:s;r=s}else return s}return r}}function resolveTo(e){return typeof e=="string"?document.querySelector(e):e()}const LazyTeleport=defineComponent({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:useFalseUntilTruthy(toRef(e,"show")),mergedTo:computed(()=>{const{to:n}=e;return n!=null?n:"body"})}},render(){return this.showTeleport?this.disabled?getSlot("lazy-teleport",this.$slots):h$1(Teleport,{disabled:this.disabled,to:this.mergedTo},getSlot("lazy-teleport",this.$slots)):null}}),oppositionPositions={top:"bottom",bottom:"top",left:"right",right:"left"},oppositeAligns={start:"end",center:"center",end:"start"},propToCompare={top:"height",bottom:"height",left:"width",right:"width"},transformOrigins={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},overlapTransformOrigin={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},oppositeAlignCssPositionProps={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},keepOffsetDirection={top:!0,bottom:!1,left:!0,right:!1},cssPositionToOppositeAlign={top:"end",bottom:"start",left:"end",right:"start"};function getPlacementAndOffsetOfFollower(e,n,r,o,s,u){if(!s||u)return{placement:e,top:0,left:0};const[d,f]=e.split("-");let g=f!=null?f:"center",m={top:0,left:0};const y=(w,x,k)=>{let S=0,M=0;const E=r[w]-n[x]-n[w];return E>0&&o&&(k?M=keepOffsetDirection[x]?E:-E:S=keepOffsetDirection[x]?E:-E),{left:S,top:M}},v=d==="left"||d==="right";if(g!=="center"){const w=oppositeAlignCssPositionProps[e],x=oppositionPositions[w],k=propToCompare[w];if(r[k]>n[k]){if(n[w]+n[k]<r[k]){const S=(r[k]-n[k])/2;n[w]<S||n[x]<S?n[w]<n[x]?(g=oppositeAligns[f],m=y(k,x,v)):m=y(k,w,v):g="center"}}else r[k]<n[k]&&n[x]<0&&n[w]>n[x]&&(g=oppositeAligns[f])}else{const w=d==="bottom"||d==="top"?"left":"top",x=oppositionPositions[w],k=propToCompare[w],S=(r[k]-n[k])/2;(n[w]<S||n[x]<S)&&(n[w]>n[x]?(g=cssPositionToOppositeAlign[w],m=y(k,w,v)):(g=cssPositionToOppositeAlign[x],m=y(k,x,v)))}let _=d;return n[d]<r[propToCompare[d]]&&n[d]<n[oppositionPositions[d]]&&(_=oppositionPositions[d]),{placement:g!=="center"?`${_}-${g}`:_,left:m.left,top:m.top}}function getProperTransformOrigin(e,n){return n?overlapTransformOrigin[e]:transformOrigins[e]}function getOffset(e,n,r,o,s,u){if(u)switch(e){case"bottom-start":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left)}px`,transform:""};case"top-end":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left)}px`,transform:""};case"left-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(r.top-n.top+r.height/2)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(r.top-n.top+r.height/2)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(e){case"bottom-start":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:""};case"bottom-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:""};case"right-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width/2+s)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(r.top-n.top+r.height/2+o)}px`,left:`${Math.round(r.left-n.left+r.width+s)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(r.top-n.top+r.height/2+o)}px`,left:`${Math.round(r.left-n.left+s)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width/2+s)}px`,transform:"translateX(-50%)"}}}const style$r=c([c(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),c(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[c("> *",{pointerEvents:"all"})])]),VFollower=defineComponent({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(e){const n=inject("VBinder"),r=useMemo(()=>e.enabled!==void 0?e.enabled:e.show),o=ref(null),s=ref(null),u=()=>{const{syncTrigger:_}=e;_.includes("scroll")&&n.addScrollListener(g),_.includes("resize")&&n.addResizeListener(g)},d=()=>{n.removeScrollListener(g),n.removeResizeListener(g)};onMounted(()=>{r.value&&(g(),u())});const f=useSsrAdapter();style$r.mount({id:"vueuc/binder",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:f}),onBeforeUnmount(()=>{d()}),onFontsReady(()=>{r.value&&g()});const g=()=>{if(!r.value)return;const _=o.value;if(_===null)return;const w=n.targetRef,{x,y:k,overlap:S}=e,M=x!==void 0&&k!==void 0?getPointRect(x,k):getRect$1(w);_.style.setProperty("--v-target-width",`${Math.round(M.width)}px`),_.style.setProperty("--v-target-height",`${Math.round(M.height)}px`);const{width:E,minWidth:P,placement:T,internalShift:D,flip:F}=e;_.setAttribute("v-placement",T),S?_.setAttribute("v-overlap",""):_.removeAttribute("v-overlap");const{style:I}=_;E==="target"?I.width=`${M.width}px`:E!==void 0?I.width=E:I.width="",P==="target"?I.minWidth=`${M.width}px`:P!==void 0?I.minWidth=P:I.minWidth="";const N=getRect$1(_),q=getRect$1(s.value),{left:Y,top:Z,placement:j}=getPlacementAndOffsetOfFollower(T,M,N,D,F,S),ne=getProperTransformOrigin(j,S),{left:le,top:J,transform:O}=getOffset(j,q,M,Z,Y,S);_.setAttribute("v-placement",j),_.style.setProperty("--v-offset-left",`${Math.round(Y)}px`),_.style.setProperty("--v-offset-top",`${Math.round(Z)}px`),_.style.transform=`translateX(${le}) translateY(${J}) ${O}`,_.style.setProperty("--v-transform-origin",ne),_.style.transformOrigin=ne};watch(r,_=>{_?(u(),m()):d()});const m=()=>{nextTick().then(g).catch(_=>console.error(_))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(_=>{watch(toRef(e,_),g)}),["teleportDisabled"].forEach(_=>{watch(toRef(e,_),m)}),watch(toRef(e,"syncTrigger"),_=>{_.includes("resize")?n.addResizeListener(g):n.removeResizeListener(g),_.includes("scroll")?n.addScrollListener(g):n.removeScrollListener(g)});const y=isMounted(),v=useMemo(()=>{const{to:_}=e;if(_!==void 0)return _;y.value});return{VBinder:n,mergedEnabled:r,offsetContainerRef:s,followerRef:o,mergedTo:v,syncPosition:g}},render(){return h$1(LazyTeleport,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var e,n;const r=h$1("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[h$1("div",{class:"v-binder-follower-content",ref:"followerRef"},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))]);return this.zindexable?withDirectives(r,[[zindexable$1,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):r}})}});var resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(e){return e.activeTargets.length>0})},hasSkippedObservations=function(){return resizeObservers.some(function(e){return e.skippedTargets.length>0})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:msg}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=msg),window.dispatchEvent(e)},ResizeObserverBoxOptions;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ResizeObserverBoxOptions||(ResizeObserverBoxOptions={}));var freeze=function(e){return Object.freeze(e)},ResizeObserverSize=function(){function e(n,r){this.inlineSize=n,this.blockSize=r,freeze(this)}return e}(),DOMRectReadOnly=function(){function e(n,r,o,s){return this.x=n,this.y=r,this.width=o,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze(this)}return e.prototype.toJSON=function(){var n=this,r=n.x,o=n.y,s=n.top,u=n.right,d=n.bottom,f=n.left,g=n.width,m=n.height;return{x:r,y:o,top:s,right:u,bottom:d,left:f,width:g,height:m}},e.fromRect=function(n){return new e(n.x,n.y,n.width,n.height)},e}(),isSVG=function(e){return e instanceof SVGElement&&"getBBox"in e},isHidden=function(e){if(isSVG(e)){var n=e.getBBox(),r=n.width,o=n.height;return!r&&!o}var s=e,u=s.offsetWidth,d=s.offsetHeight;return!(u||d||e.getClientRects().length)},isElement=function(e){var n;if(e instanceof Element)return!0;var r=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},isReplacedElement=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global$1=typeof window<"u"?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global$1.navigator&&global$1.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=!1),new ResizeObserverSize((r?n:e)||0,(r?e:n)||0)},zeroBoxes=freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(e,n){if(n===void 0&&(n=!1),cache.has(e)&&!n)return cache.get(e);if(isHidden(e))return cache.set(e,zeroBoxes),zeroBoxes;var r=getComputedStyle(e),o=isSVG(e)&&e.ownerSVGElement&&e.getBBox(),s=!IE&&r.boxSizing==="border-box",u=verticalRegexp.test(r.writingMode||""),d=!o&&scrollRegexp.test(r.overflowY||""),f=!o&&scrollRegexp.test(r.overflowX||""),g=o?0:parseDimension(r.paddingTop),m=o?0:parseDimension(r.paddingRight),y=o?0:parseDimension(r.paddingBottom),v=o?0:parseDimension(r.paddingLeft),_=o?0:parseDimension(r.borderTopWidth),w=o?0:parseDimension(r.borderRightWidth),x=o?0:parseDimension(r.borderBottomWidth),k=o?0:parseDimension(r.borderLeftWidth),S=v+m,M=g+y,E=k+w,P=_+x,T=f?e.offsetHeight-P-e.clientHeight:0,D=d?e.offsetWidth-E-e.clientWidth:0,F=s?S+E:0,I=s?M+P:0,N=o?o.width:parseDimension(r.width)-F-D,q=o?o.height:parseDimension(r.height)-I-T,Y=N+S+D+E,Z=q+M+T+P,j=freeze({devicePixelContentBoxSize:size(Math.round(N*devicePixelRatio),Math.round(q*devicePixelRatio),u),borderBoxSize:size(Y,Z,u),contentBoxSize:size(N,q,u),contentRect:new DOMRectReadOnly(v,g,N,q)});return cache.set(e,j),j},calculateBoxSize=function(e,n,r){var o=calculateBoxSizes(e,r),s=o.borderBoxSize,u=o.contentBoxSize,d=o.devicePixelContentBoxSize;switch(n){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return d;case ResizeObserverBoxOptions.BORDER_BOX:return s;default:return u}},ResizeObserverEntry=function(){function e(n){var r=calculateBoxSizes(n);this.target=n,this.contentRect=r.contentRect,this.borderBoxSize=freeze([r.borderBoxSize]),this.contentBoxSize=freeze([r.contentBoxSize]),this.devicePixelContentBoxSize=freeze([r.devicePixelContentBoxSize])}return e}(),calculateDepthForNode=function(e){if(isHidden(e))return 1/0;for(var n=0,r=e.parentNode;r;)n+=1,r=r.parentNode;return n},broadcastActiveObservations=function(){var e=1/0,n=[];resizeObservers.forEach(function(d){if(d.activeTargets.length!==0){var f=[];d.activeTargets.forEach(function(m){var y=new ResizeObserverEntry(m.target),v=calculateDepthForNode(m.target);f.push(y),m.lastReportedSize=calculateBoxSize(m.target,m.observedBox),v<e&&(e=v)}),n.push(function(){d.callback.call(d.observer,f,d.observer)}),d.activeTargets.splice(0,d.activeTargets.length)}});for(var r=0,o=n;r<o.length;r++){var s=o[r];s()}return e},gatherActiveObservationsAtDepth=function(e){resizeObservers.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(s){s.isActive()&&(calculateDepthForNode(s.target)>e?r.activeTargets.push(s):r.skippedTargets.push(s))})})},process$1=function(){var e=0;for(gatherActiveObservationsAtDepth(e);hasActiveObservations();)e=broadcastActiveObservations(),gatherActiveObservationsAtDepth(e);return hasSkippedObservations()&&deliverResizeLoopError(),e>0},trigger,callbacks=[],notify=function(){return callbacks.splice(0).forEach(function(e){return e()})},queueMicroTask=function(e){if(!trigger){var n=0,r=document.createTextNode(""),o={characterData:!0};new MutationObserver(function(){return notify()}).observe(r,o),trigger=function(){r.textContent="".concat(n?n--:n++)}}callbacks.push(e),trigger()},queueResizeObserver=function(e){queueMicroTask(function(){requestAnimationFrame(e)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(e){return e===void 0&&(e=0),Date.now()+e},scheduled=!1,Scheduler=function(){function e(){var n=this;this.stopped=!0,this.listener=function(){return n.schedule()}}return e.prototype.run=function(n){var r=this;if(n===void 0&&(n=CATCH_PERIOD),!scheduled){scheduled=!0;var o=time(n);queueResizeObserver(function(){var s=!1;try{s=process$1()}finally{if(scheduled=!1,n=o-time(),!isWatching())return;s?r.run(1e3):n>0?r.run(n):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var n=this,r=function(){return n.observer&&n.observer.observe(document.body,observerConfig)};document.body?r():global$1.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var n=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(r){return global$1.addEventListener(r,n.listener,!0)}))},e.prototype.stop=function(){var n=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(r){return global$1.removeEventListener(r,n.listener,!0)}),this.stopped=!0)},e}(),scheduler=new Scheduler,updateCount=function(e){!watching&&e>0&&scheduler.start(),watching+=e,!watching&&scheduler.stop()},skipNotifyOnElement=function(e){return!isSVG(e)&&!isReplacedElement(e)&&getComputedStyle(e).display==="inline"},ResizeObservation=function(){function e(n,r){this.target=n,this.observedBox=r||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var n=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=n),this.lastReportedSize.inlineSize!==n.inlineSize||this.lastReportedSize.blockSize!==n.blockSize},e}(),ResizeObserverDetail=function(){function e(n,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=n,this.callback=r}return e}(),observerMap=new WeakMap,getObservationIndex=function(e,n){for(var r=0;r<e.length;r+=1)if(e[r].target===n)return r;return-1},ResizeObserverController=function(){function e(){}return e.connect=function(n,r){var o=new ResizeObserverDetail(n,r);observerMap.set(n,o)},e.observe=function(n,r,o){var s=observerMap.get(n),u=s.observationTargets.length===0;getObservationIndex(s.observationTargets,r)<0&&(u&&resizeObservers.push(s),s.observationTargets.push(new ResizeObservation(r,o&&o.box)),updateCount(1),scheduler.schedule())},e.unobserve=function(n,r){var o=observerMap.get(n),s=getObservationIndex(o.observationTargets,r),u=o.observationTargets.length===1;s>=0&&(u&&resizeObservers.splice(resizeObservers.indexOf(o),1),o.observationTargets.splice(s,1),updateCount(-1))},e.disconnect=function(n){var r=this,o=observerMap.get(n);o.observationTargets.slice().forEach(function(s){return r.unobserve(n,s.target)}),o.activeTargets.splice(0,o.activeTargets.length)},e}(),ResizeObserver$1=function(){function e(n){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof n!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,n)}return e.prototype.observe=function(n,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(n))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,n,r)},e.prototype.unobserve=function(n){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(n))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,n)},e.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();class ResizeObserverDelegate{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||ResizeObserver$1)(this.handleResize),this.elHandlersMap=new Map}handleResize(n){for(const r of n){const o=this.elHandlersMap.get(r.target);o!==void 0&&o(r)}}registerHandler(n,r){this.elHandlersMap.set(n,r),this.observer.observe(n)}unregisterHandler(n){!this.elHandlersMap.has(n)||(this.elHandlersMap.delete(n),this.observer.unobserve(n))}}const resizeObserverManager=new ResizeObserverDelegate,VResizeObserver=defineComponent({name:"ResizeObserver",props:{onResize:Function},setup(e){let n=!1;const r=getCurrentInstance().proxy;function o(s){const{onResize:u}=e;u!==void 0&&u(s)}onMounted(()=>{const s=r.$el;if(s===void 0){warn("resize-observer","$el does not exist.");return}if(s.nextElementSibling!==s.nextSibling&&s.nodeType===3&&s.nodeValue!==""){warn("resize-observer","$el can not be observed (it may be a text node).");return}s.nextElementSibling!==null&&(resizeObserverManager.registerHandler(s.nextElementSibling,o),n=!0)}),onBeforeUnmount(()=>{n&&resizeObserverManager.unregisterHandler(r.$el.nextElementSibling)})},render(){return renderSlot(this.$slots,"default")}});let maybeTouch;function ensureMaybeTouch(){return typeof document>"u"?!1:(maybeTouch===void 0&&("matchMedia"in window?maybeTouch=window.matchMedia("(pointer:coarse)").matches:maybeTouch=!1),maybeTouch)}let wheelScale;function ensureWheelScale(){return typeof document>"u"?1:(wheelScale===void 0&&(wheelScale="chrome"in window?window.devicePixelRatio:1),wheelScale)}const xScrollInjextionKey="VVirtualListXScroll";function setupXScroll({columnsRef:e,renderColRef:n,renderItemWithColsRef:r}){const o=ref(0),s=ref(0),u=computed(()=>{const m=e.value;if(m.length===0)return null;const y=new FinweckTree(m.length,0);return m.forEach((v,_)=>{y.add(_,v.width)}),y}),d=useMemo(()=>{const m=u.value;return m!==null?Math.max(m.getBound(s.value)-1,0):0}),f=m=>{const y=u.value;return y!==null?y.sum(m):0},g=useMemo(()=>{const m=u.value;return m!==null?Math.min(m.getBound(s.value+o.value)+1,e.value.length-1):0});return provide(xScrollInjextionKey,{startIndexRef:d,endIndexRef:g,columnsRef:e,renderColRef:n,renderItemWithColsRef:r,getLeft:f}),{listWidthRef:o,scrollLeftRef:s}}const VirtualListRow=defineComponent({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:e,endIndexRef:n,columnsRef:r,getLeft:o,renderColRef:s,renderItemWithColsRef:u}=inject(xScrollInjextionKey);return{startIndex:e,endIndex:n,columns:r,renderCol:s,renderItemWithCols:u,getLeft:o}},render(){const{startIndex:e,endIndex:n,columns:r,renderCol:o,renderItemWithCols:s,getLeft:u,item:d}=this;if(s!=null)return s({itemIndex:this.index,startColIndex:e,endColIndex:n,allColumns:r,item:d,getLeft:u});if(o!=null){const f=[];for(let g=e;g<=n;++g){const m=r[g];f.push(o({column:m,left:u(g),item:d}))}return f}return null}}),styles=c(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[c("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[c("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),VVirtualList=defineComponent({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const n=useSsrAdapter();styles.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:n}),onMounted(()=>{const{defaultScrollIndex:ne,defaultScrollKey:le}=e;ne!=null?S({index:ne}):le!=null&&S({key:le})});let r=!1,o=!1;onActivated(()=>{if(r=!1,!o){o=!0;return}S({top:w.value,left:d.value})}),onDeactivated(()=>{r=!0,o||(o=!0)});const s=useMemo(()=>{if(e.renderCol==null&&e.renderItemWithCols==null||e.columns.length===0)return;let ne=0;return e.columns.forEach(le=>{ne+=le.width}),ne}),u=computed(()=>{const ne=new Map,{keyField:le}=e;return e.items.forEach((J,O)=>{ne.set(J[le],O)}),ne}),{scrollLeftRef:d,listWidthRef:f}=setupXScroll({columnsRef:toRef(e,"columns"),renderColRef:toRef(e,"renderCol"),renderItemWithColsRef:toRef(e,"renderItemWithCols")}),g=ref(null),m=ref(void 0),y=new Map,v=computed(()=>{const{items:ne,itemSize:le,keyField:J}=e,O=new FinweckTree(ne.length,le);return ne.forEach((U,W)=>{const H=U[J],X=y.get(H);X!==void 0&&O.add(W,X)}),O}),_=ref(0),w=ref(0),x=useMemo(()=>Math.max(v.value.getBound(w.value-depx(e.paddingTop))-1,0)),k=computed(()=>{const{value:ne}=m;if(ne===void 0)return[];const{items:le,itemSize:J}=e,O=x.value,U=Math.min(O+Math.ceil(ne/J+1),le.length-1),W=[];for(let H=O;H<=U;++H)W.push(le[H]);return W}),S=(ne,le)=>{if(typeof ne=="number"){T(ne,le,"auto");return}const{left:J,top:O,index:U,key:W,position:H,behavior:X,debounce:Q=!0}=ne;if(J!==void 0||O!==void 0)T(J,O,X);else if(U!==void 0)P(U,X,Q);else if(W!==void 0){const fe=u.value.get(W);fe!==void 0&&P(fe,X,Q)}else H==="bottom"?T(0,Number.MAX_SAFE_INTEGER,X):H==="top"&&T(0,0,X)};let M,E=null;function P(ne,le,J){const{value:O}=v,U=O.sum(ne)+depx(e.paddingTop);if(!J)g.value.scrollTo({left:0,top:U,behavior:le});else{M=ne,E!==null&&window.clearTimeout(E),E=window.setTimeout(()=>{M=void 0,E=null},16);const{scrollTop:W,offsetHeight:H}=g.value;if(U>W){const X=O.get(ne);U+X<=W+H||g.value.scrollTo({left:0,top:U+X-H,behavior:le})}else g.value.scrollTo({left:0,top:U,behavior:le})}}function T(ne,le,J){g.value.scrollTo({left:ne,top:le,behavior:J})}function D(ne,le){var J,O,U;if(r||e.ignoreItemResize||j(le.target))return;const{value:W}=v,H=u.value.get(ne),X=W.get(H),Q=(U=(O=(J=le.borderBoxSize)===null||J===void 0?void 0:J[0])===null||O===void 0?void 0:O.blockSize)!==null&&U!==void 0?U:le.contentRect.height;if(Q===X)return;Q-e.itemSize===0?y.delete(ne):y.set(ne,Q-e.itemSize);const Se=Q-X;if(Se===0)return;W.add(H,Se);const Pe=g.value;if(Pe!=null){if(M===void 0){const $e=W.sum(H);Pe.scrollTop>$e&&Pe.scrollBy(0,Se)}else if(H<M)Pe.scrollBy(0,Se);else if(H===M){const $e=W.sum(H);Q+$e>Pe.scrollTop+Pe.offsetHeight&&Pe.scrollBy(0,Se)}Z()}_.value++}const F=!ensureMaybeTouch();let I=!1;function N(ne){var le;(le=e.onScroll)===null||le===void 0||le.call(e,ne),(!F||!I)&&Z()}function q(ne){var le;if((le=e.onWheel)===null||le===void 0||le.call(e,ne),F){const J=g.value;if(J!=null){if(ne.deltaX===0&&(J.scrollTop===0&&ne.deltaY<=0||J.scrollTop+J.offsetHeight>=J.scrollHeight&&ne.deltaY>=0))return;ne.preventDefault(),J.scrollTop+=ne.deltaY/ensureWheelScale(),J.scrollLeft+=ne.deltaX/ensureWheelScale(),Z(),I=!0,beforeNextFrameOnce(()=>{I=!1})}}}function Y(ne){if(r||j(ne.target))return;if(e.renderCol==null&&e.renderItemWithCols==null){if(ne.contentRect.height===m.value)return}else if(ne.contentRect.height===m.value&&ne.contentRect.width===f.value)return;m.value=ne.contentRect.height,f.value=ne.contentRect.width;const{onResize:le}=e;le!==void 0&&le(ne)}function Z(){const{value:ne}=g;ne!=null&&(w.value=ne.scrollTop,d.value=ne.scrollLeft)}function j(ne){let le=ne;for(;le!==null;){if(le.style.display==="none")return!0;le=le.parentElement}return!1}return{listHeight:m,listStyle:{overflow:"auto"},keyToIndex:u,itemsStyle:computed(()=>{const{itemResizable:ne}=e,le=pxfy(v.value.sum());return _.value,[e.itemsStyle,{boxSizing:"content-box",width:pxfy(s.value),height:ne?"":le,minHeight:ne?le:"",paddingTop:pxfy(e.paddingTop),paddingBottom:pxfy(e.paddingBottom)}]}),visibleItemsStyle:computed(()=>(_.value,{transform:`translateY(${pxfy(v.value.sum(x.value))})`})),viewportItems:k,listElRef:g,itemsElRef:ref(null),scrollTo:S,handleListResize:Y,handleListScroll:N,handleListWheel:q,handleItemResize:D}},render(){const{itemResizable:e,keyField:n,keyToIndex:r,visibleItemsTag:o}=this;return h$1(VResizeObserver,{onResize:this.handleListResize},{default:()=>{var s,u;return h$1("div",mergeProps(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?h$1("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[h$1(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:d,renderItemWithCols:f}=this;return this.viewportItems.map(g=>{const m=g[n],y=r.get(m),v=d!=null?h$1(VirtualListRow,{index:y,item:g}):void 0,_=f!=null?h$1(VirtualListRow,{index:y,item:g}):void 0,w=this.$slots.default({item:g,renderedCols:v,renderedItemWithCols:_,index:y})[0];return e?h$1(VResizeObserver,{key:m,onResize:x=>this.handleItemResize(m,x)},{default:()=>w}):(w.key=m,w)})}})]):(u=(s=this.$slots).empty)===null||u===void 0?void 0:u.call(s)])}})}}),hiddenAttr="v-hidden",style$q=c("[v-hidden]",{display:"none!important"}),VOverflow=defineComponent({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:n}){const r=ref(null),o=ref(null);function s(d){const{value:f}=r,{getCounter:g,getTail:m}=e;let y;if(g!==void 0?y=g():y=o.value,!f||!y)return;y.hasAttribute(hiddenAttr)&&y.removeAttribute(hiddenAttr);const{children:v}=f;if(d.showAllItemsBeforeCalculate)for(const P of v)P.hasAttribute(hiddenAttr)&&P.removeAttribute(hiddenAttr);const _=f.offsetWidth,w=[],x=n.tail?m==null?void 0:m():null;let k=x?x.offsetWidth:0,S=!1;const M=f.children.length-(n.tail?1:0);for(let P=0;P<M-1;++P){if(P<0)continue;const T=v[P];if(S){T.hasAttribute(hiddenAttr)||T.setAttribute(hiddenAttr,"");continue}else T.hasAttribute(hiddenAttr)&&T.removeAttribute(hiddenAttr);const D=T.offsetWidth;if(k+=D,w[P]=D,k>_){const{updateCounter:F}=e;for(let I=P;I>=0;--I){const N=M-1-I;F!==void 0?F(N):y.textContent=`${N}`;const q=y.offsetWidth;if(k-=w[I],k+q<=_||I===0){S=!0,P=I-1,x&&(P===-1?(x.style.maxWidth=`${_-q}px`,x.style.boxSizing="border-box"):x.style.maxWidth="");const{onUpdateCount:Y}=e;Y&&Y(N);break}}}}const{onUpdateOverflow:E}=e;S?E!==void 0&&E(!0):(E!==void 0&&E(!1),y.setAttribute(hiddenAttr,""))}const u=useSsrAdapter();return style$q.mount({id:"vueuc/overflow",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:u}),onMounted(()=>s({showAllItemsBeforeCalculate:!1})),{selfRef:r,counterRef:o,sync:s}},render(){const{$slots:e}=this;return nextTick(()=>this.sync({showAllItemsBeforeCalculate:!1})),h$1("div",{class:"v-overflow",ref:"selfRef"},[renderSlot(e,"default"),e.counter?e.counter():h$1("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function isHTMLElement(e){return e instanceof HTMLElement}function focusFirstDescendant(e){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(isHTMLElement(r)&&(attemptFocus(r)||focusFirstDescendant(r)))return!0}return!1}function focusLastDescendant(e){for(let n=e.childNodes.length-1;n>=0;n--){const r=e.childNodes[n];if(isHTMLElement(r)&&(attemptFocus(r)||focusLastDescendant(r)))return!0}return!1}function attemptFocus(e){if(!isFocusable(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function isFocusable(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let stack=[];const FocusTrap=defineComponent({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const n=createId(),r=ref(null),o=ref(null);let s=!1,u=!1;const d=typeof document>"u"?null:document.activeElement;function f(){return stack[stack.length-1]===n}function g(S){var M;S.code==="Escape"&&f()&&((M=e.onEsc)===null||M===void 0||M.call(e,S))}onMounted(()=>{watch(()=>e.active,S=>{S?(v(),on$1("keydown",document,g)):(off$1("keydown",document,g),s&&_())},{immediate:!0})}),onBeforeUnmount(()=>{off$1("keydown",document,g),s&&_()});function m(S){if(!u&&f()){const M=y();if(M===null||M.contains(getPreciseEventTarget(S)))return;w("first")}}function y(){const S=r.value;if(S===null)return null;let M=S;for(;M=M.nextSibling,!(M===null||M instanceof Element&&M.tagName==="DIV"););return M}function v(){var S;if(!e.disabled){if(stack.push(n),e.autoFocus){const{initialFocusTo:M}=e;M===void 0?w("first"):(S=resolveTo(M))===null||S===void 0||S.focus({preventScroll:!0})}s=!0,document.addEventListener("focus",m,!0)}}function _(){var S;if(e.disabled||(document.removeEventListener("focus",m,!0),stack=stack.filter(E=>E!==n),f()))return;const{finalFocusTo:M}=e;M!==void 0?(S=resolveTo(M))===null||S===void 0||S.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&d instanceof HTMLElement&&(u=!0,d.focus({preventScroll:!0}),u=!1)}function w(S){if(!!f()&&e.active){const M=r.value,E=o.value;if(M!==null&&E!==null){const P=y();if(P==null||P===E){u=!0,M.focus({preventScroll:!0}),u=!1;return}u=!0;const T=S==="first"?focusFirstDescendant(P):focusLastDescendant(P);u=!1,T||(u=!0,M.focus({preventScroll:!0}),u=!1)}}}function x(S){if(u)return;const M=y();M!==null&&(S.relatedTarget!==null&&M.contains(S.relatedTarget)?w("last"):w("first"))}function k(S){u||(S.relatedTarget!==null&&S.relatedTarget===r.value?w("last"):w("first"))}return{focusableStartRef:r,focusableEndRef:o,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:x,handleEndFocus:k}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:n,focusableStyle:r}=this;return h$1(Fragment,null,[h$1("div",{"aria-hidden":"true",tabindex:n?"0":"-1",ref:"focusableStartRef",style:r,onFocus:this.handleStartFocus}),e(),h$1("div",{"aria-hidden":"true",style:r,ref:"focusableEndRef",tabindex:n?"0":"-1",onFocus:this.handleEndFocus})])}});function useOnResize(e,n){n&&(onMounted(()=>{const{value:r}=e;r&&resizeObserverManager.registerHandler(r,n)}),onBeforeUnmount(()=>{const{value:r}=e;r&&resizeObserverManager.unregisterHandler(r)}))}let lockCount=0,originalMarginRight="",originalOverflow="",originalOverflowX="",originalOverflowY="";const lockHtmlScrollRightCompensationRef=ref("0px");function useLockHtmlScroll(e){if(typeof document>"u")return;const n=document.documentElement;let r,o=!1;const s=()=>{n.style.marginRight=originalMarginRight,n.style.overflow=originalOverflow,n.style.overflowX=originalOverflowX,n.style.overflowY=originalOverflowY,lockHtmlScrollRightCompensationRef.value="0px"};onMounted(()=>{r=watch(e,u=>{if(u){if(!lockCount){const d=window.innerWidth-n.offsetWidth;d>0&&(originalMarginRight=n.style.marginRight,n.style.marginRight=`${d}px`,lockHtmlScrollRightCompensationRef.value=`${d}px`),originalOverflow=n.style.overflow,originalOverflowX=n.style.overflowX,originalOverflowY=n.style.overflowY,n.style.overflow="hidden",n.style.overflowX="hidden",n.style.overflowY="hidden"}o=!0,lockCount++}else lockCount--,lockCount||s(),o=!1},{immediate:!0})}),onBeforeUnmount(()=>{r==null||r(),o&&(lockCount--,lockCount||s(),o=!1)})}const isComposingRef=ref(!1);function compositionStartHandler(){isComposingRef.value=!0}function compositionEndHandler(){isComposingRef.value=!1}let mountedCount=0;function useIsComposing(){return isBrowser$2&&(onBeforeMount(()=>{mountedCount||(window.addEventListener("compositionstart",compositionStartHandler),window.addEventListener("compositionend",compositionEndHandler)),mountedCount++}),onBeforeUnmount(()=>{mountedCount<=1?(window.removeEventListener("compositionstart",compositionStartHandler),window.removeEventListener("compositionend",compositionEndHandler),mountedCount=0):mountedCount--})),isComposingRef}function useReactivated(e){const n={isDeactivated:!1};let r=!1;return onActivated(()=>{if(n.isDeactivated=!1,!r){r=!0;return}e()}),onDeactivated(()=>{n.isDeactivated=!0,r||(r=!0)}),n}const formItemInjectionKey="n-form-item";function useFormItem(e,{defaultSize:n="medium",mergedSize:r,mergedDisabled:o}={}){const s=inject(formItemInjectionKey,null);provide(formItemInjectionKey,null);const u=computed(r?()=>r(s):()=>{const{size:g}=e;if(g)return g;if(s){const{mergedSize:m}=s;if(m.value!==void 0)return m.value}return n}),d=computed(o?()=>o(s):()=>{const{disabled:g}=e;return g!==void 0?g:s?s.disabled.value:!1}),f=computed(()=>{const{status:g}=e;return g||(s==null?void 0:s.mergedValidationStatus.value)});return onBeforeUnmount(()=>{s&&s.restoreValidation()}),{mergedSizeRef:u,mergedDisabledRef:d,mergedStatusRef:f,nTriggerFormBlur(){s&&s.handleContentBlur()},nTriggerFormChange(){s&&s.handleContentChange()},nTriggerFormFocus(){s&&s.handleContentFocus()},nTriggerFormInput(){s&&s.handleContentInput()}}}var freeGlobal$1=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$2=freeGlobal$1;var freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$2||freeSelf$1||Function("return this")();const root$2=root$1;var Symbol$1=root$2.Symbol;const Symbol$2=Symbol$1;var objectProto$f=Object.prototype,hasOwnProperty$b=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(e){var n=hasOwnProperty$b.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var o=!0}catch{}var s=nativeObjectToString$1.call(e);return o&&(n?e[symToStringTag$1]=r:delete e[symToStringTag$1]),s}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}function isObjectLike$1(e){return e!=null&&typeof e=="object"}var symbolTag$2="[object Symbol]";function isSymbol$1(e){return typeof e=="symbol"||isObjectLike$1(e)&&baseGetTag(e)==symbolTag$2}function arrayMap(e,n){for(var r=-1,o=e==null?0:e.length,s=Array(o);++r<o;)s[r]=n(e[r],r,e);return s}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$1=1/0,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if(typeof e=="string")return e;if(isArray$2(e))return arrayMap(e,baseToString)+"";if(isSymbol$1(e))return symbolToString?symbolToString.call(e):"";var n=e+"";return n=="0"&&1/e==-INFINITY$1?"-0":n}function isObject$2(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject$2(e))return!1;var n=baseGetTag(e);return n==funcTag$1||n==genTag||n==asyncTag||n==proxyTag}var coreJsData=root$2["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(e){if(e!=null){try{return funcToString$2.call(e)}catch{}try{return e+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$a=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject$2(e)||isMasked(e))return!1;var n=isFunction$1(e)?reIsNative:reIsHostCtor;return n.test(toSource(e))}function getValue(e,n){return e==null?void 0:e[n]}function getNative(e,n){var r=getValue(e,n);return baseIsNative(r)?r:void 0}var WeakMap$1=getNative(root$2,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function e(){}return function(n){if(!isObject$2(n))return{};if(objectCreate)return objectCreate(n);e.prototype=n;var r=new e;return e.prototype=void 0,r}}();const baseCreate$1=baseCreate;function apply(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function copyArray(e,n){var r=-1,o=e.length;for(n||(n=Array(o));++r<o;)n[r]=e[r];return n}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var n=0,r=0;return function(){var o=nativeNow(),s=HOT_SPAN-(o-r);if(r=o,s>0){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(e,n){return defineProperty$1(e,"toString",{configurable:!0,enumerable:!1,value:constant(n),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,n){var r=typeof e;return n=n==null?MAX_SAFE_INTEGER$1:n,!!n&&(r=="number"||r!="symbol"&&reIsUint.test(e))&&e>-1&&e%1==0&&e<n}function baseAssignValue(e,n,r){n=="__proto__"&&defineProperty$1?defineProperty$1(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function eq(e,n){return e===n||e!==e&&n!==n}var objectProto$c=Object.prototype,hasOwnProperty$9=objectProto$c.hasOwnProperty;function assignValue(e,n,r){var o=e[n];(!(hasOwnProperty$9.call(e,n)&&eq(o,r))||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function copyObject(e,n,r,o){var s=!r;r||(r={});for(var u=-1,d=n.length;++u<d;){var f=n[u],g=o?o(r[f],e[f],f,r,e):void 0;g===void 0&&(g=e[f]),s?baseAssignValue(r,f,g):assignValue(r,f,g)}return r}var nativeMax$1=Math.max;function overRest(e,n,r){return n=nativeMax$1(n===void 0?e.length-1:n,0),function(){for(var o=arguments,s=-1,u=nativeMax$1(o.length-n,0),d=Array(u);++s<u;)d[s]=o[n+s];s=-1;for(var f=Array(n+1);++s<n;)f[s]=o[s];return f[n]=r(d),apply(e,this,f)}}function baseRest(e,n){return setToString$1(overRest(e,n,identity),e+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction$1(e)}function isIterateeCall(e,n,r){if(!isObject$2(r))return!1;var o=typeof n;return(o=="number"?isArrayLike(r)&&isIndex(n,r.length):o=="string"&&n in r)?eq(r[n],e):!1}function createAssigner(e){return baseRest(function(n,r){var o=-1,s=r.length,u=s>1?r[s-1]:void 0,d=s>2?r[2]:void 0;for(u=e.length>3&&typeof u=="function"?(s--,u):void 0,d&&isIterateeCall(r[0],r[1],d)&&(u=s<3?void 0:u,s=1),n=Object(n);++o<s;){var f=r[o];f&&e(n,f,o,u)}return n})}var objectProto$b=Object.prototype;function isPrototype(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||objectProto$b;return e===r}function baseTimes(e,n){for(var r=-1,o=Array(e);++r<e;)o[r]=n(r);return o}var argsTag$2="[object Arguments]";function baseIsArguments(e){return isObjectLike$1(e)&&baseGetTag(e)==argsTag$2}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$1(e)&&hasOwnProperty$8.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$2.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$3="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(e){return isObjectLike$1(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(n){return e(n)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$2.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function arrayLikeKeys(e,n){var r=isArray$2(e),o=!r&&isArguments$1(e),s=!r&&!o&&isBuffer$2(e),u=!r&&!o&&!s&&isTypedArray$2(e),d=r||o||s||u,f=d?baseTimes(e.length,String):[],g=f.length;for(var m in e)(n||hasOwnProperty$7.call(e,m))&&!(d&&(m=="length"||s&&(m=="offset"||m=="parent")||u&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||isIndex(m,g)))&&f.push(m);return f}function overArg(e,n){return function(r){return e(n(r))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys$1(e);var n=[];for(var r in Object(e))hasOwnProperty$6.call(e,r)&&r!="constructor"&&n.push(r);return n}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function nativeKeysIn(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeysIn(e){if(!isObject$2(e))return nativeKeysIn(e);var n=isPrototype(e),r=[];for(var o in e)o=="constructor"&&(n||!hasOwnProperty$5.call(e,o))||r.push(o);return r}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,n){if(isArray$2(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||isSymbol$1(e)?!0:reIsPlainProp.test(e)||!reIsDeepProp.test(e)||n!=null&&e in Object(n)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function hashGet(e){var n=this.__data__;if(nativeCreate$1){var r=n[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$4.call(n,e)?n[e]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function hashHas(e){var n=this.__data__;return nativeCreate$1?n[e]!==void 0:hasOwnProperty$3.call(n,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate$1&&n===void 0?HASH_UNDEFINED$1:n,this}function Hash(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,n){for(var r=e.length;r--;)if(eq(e[r][0],n))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var n=this.__data__,r=assocIndexOf(n,e);if(r<0)return!1;var o=n.length-1;return r==o?n.pop():splice.call(n,r,1),--this.size,!0}function listCacheGet(e){var n=this.__data__,r=assocIndexOf(n,e);return r<0?void 0:n[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,n){var r=this.__data__,o=assocIndexOf(r,e);return o<0?(++this.size,r.push([e,n])):r[o][1]=n,this}function ListCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$2,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function getMapData(e,n){var r=e.__data__;return isKeyable(n)?r[typeof n=="string"?"string":"hash"]:r.map}function mapCacheDelete(e){var n=getMapData(this,e).delete(e);return this.size-=n?1:0,n}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,n){var r=getMapData(this,e),o=r.size;return r.set(e,n),this.size+=r.size==o?0:1,this}function MapCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var r=function(){var o=arguments,s=n?n.apply(this,o):o[0],u=r.cache;if(u.has(s))return u.get(s);var d=e.apply(this,o);return r.cache=u.set(s,d)||u,d};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var n=memoize(e,function(o){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),o}),r=n.cache;return n}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(rePropName,function(r,o,s,u){n.push(s?u.replace(reEscapeChar,"$1"):o||r)}),n});const stringToPath$1=stringToPath;function toString$1(e){return e==null?"":baseToString(e)}function castPath(e,n){return isArray$2(e)?e:isKey(e,n)?[e]:stringToPath$1(toString$1(e))}var INFINITY=1/0;function toKey(e){if(typeof e=="string"||isSymbol$1(e))return e;var n=e+"";return n=="0"&&1/e==-INFINITY?"-0":n}function baseGet(e,n){n=castPath(n,e);for(var r=0,o=n.length;e!=null&&r<o;)e=e[toKey(n[r++])];return r&&r==o?e:void 0}function get(e,n,r){var o=e==null?void 0:baseGet(e,n);return o===void 0?r:o}function arrayPush(e,n){for(var r=-1,o=n.length,s=e.length;++r<o;)e[s+r]=n[r];return e}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$2="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$2=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$2(e){if(!isObjectLike$1(e)||baseGetTag(e)!=objectTag$2)return!1;var n=getPrototype$1(e);if(n===null)return!0;var r=hasOwnProperty$2.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&funcToString.call(r)==objectCtorString}function baseSlice(e,n,r){var o=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var u=Array(s);++o<s;)u[o]=e[o+n];return u}function castSlice(e,n,r){var o=e.length;return r=r===void 0?o:r,!n&&r>=o?e:baseSlice(e,n,r)}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode(e){return reHasUnicode.test(e)}function asciiToArray(e){return e.split("")}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(e){return e.match(reUnicode)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function createCaseFirst(e){return function(n){n=toString$1(n);var r=hasUnicode(n)?stringToArray(n):void 0,o=r?r[0]:n.charAt(0),s=r?castSlice(r,1).join(""):n.slice(1);return o[e]()+s}}var upperFirst=createCaseFirst("toUpperCase");const upperFirst$1=upperFirst;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE=200;function stackSet(e,n){var r=this.__data__;if(r instanceof ListCache){var o=r.__data__;if(!Map$2||o.length<LARGE_ARRAY_SIZE-1)return o.push([e,n]),this.size=++r.size,this;r=this.__data__=new MapCache(o)}return r.set(e,n),this.size=r.size,this}function Stack(e){var n=this.__data__=new ListCache(e);this.size=n.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$2.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(e,n){if(n)return e.slice();var r=e.length,o=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(o),o}function arrayFilter(e,n){for(var r=-1,o=e==null?0:e.length,s=0,u=[];++r<o;){var d=e[r];n(d,r,e)&&(u[s++]=d)}return u}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return e==null?[]:(e=Object(e),arrayFilter(nativeGetSymbols(e),function(n){return propertyIsEnumerable.call(e,n)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(e,n,r){var o=n(e);return isArray$2(e)?o:arrayPush(o,r(e))}function getAllKeys(e){return baseGetAllKeys(e,keys,getSymbols$1)}var DataView$1=getNative(root$2,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$2,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$2,"Set");const Set$2=Set$1;var mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$1||Map$2&&getTag(new Map$2)!=mapTag$1||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$1||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag)&&(getTag=function(e){var n=baseGetTag(e),r=n==objectTag$1?e.constructor:void 0,o=r?toSource(r):"";if(o)switch(o){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return n});const getTag$1=getTag;var Uint8Array$1=root$2.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(e){var n=new e.constructor(e.byteLength);return new Uint8Array$2(n).set(new Uint8Array$2(e)),n}function cloneTypedArray(e,n){var r=n?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function initCloneObject(e){return typeof e.constructor=="function"&&!isPrototype(e)?baseCreate$1(getPrototype$1(e)):{}}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new MapCache;++n<r;)this.add(e[n])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(e,n){for(var r=-1,o=e==null?0:e.length;++r<o;)if(n(e[r],r,e))return!0;return!1}function cacheHas(e,n){return e.has(n)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,n,r,o,s,u){var d=r&COMPARE_PARTIAL_FLAG$5,f=e.length,g=n.length;if(f!=g&&!(d&&g>f))return!1;var m=u.get(e),y=u.get(n);if(m&&y)return m==n&&y==e;var v=-1,_=!0,w=r&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(u.set(e,n),u.set(n,e);++v<f;){var x=e[v],k=n[v];if(o)var S=d?o(k,x,v,n,e,u):o(x,k,v,e,n,u);if(S!==void 0){if(S)continue;_=!1;break}if(w){if(!arraySome(n,function(M,E){if(!cacheHas(w,E)&&(x===M||s(x,M,r,o,u)))return w.push(E)})){_=!1;break}}else if(!(x===k||s(x,k,r,o,u))){_=!1;break}}return u.delete(e),u.delete(n),_}function mapToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(o,s){r[++n]=[s,o]}),r}function setToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(o){r[++n]=o}),r}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,n,r,o,s,u,d){switch(r){case dataViewTag:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case arrayBufferTag:return!(e.byteLength!=n.byteLength||!u(new Uint8Array$2(e),new Uint8Array$2(n)));case boolTag:case dateTag:case numberTag:return eq(+e,+n);case errorTag:return e.name==n.name&&e.message==n.message;case regexpTag:case stringTag:return e==n+"";case mapTag:var f=mapToArray;case setTag:var g=o&COMPARE_PARTIAL_FLAG$4;if(f||(f=setToArray),e.size!=n.size&&!g)return!1;var m=d.get(e);if(m)return m==n;o|=COMPARE_UNORDERED_FLAG$2,d.set(e,n);var y=equalArrays(f(e),f(n),o,s,u,d);return d.delete(e),y;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(n)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function equalObjects(e,n,r,o,s,u){var d=r&COMPARE_PARTIAL_FLAG$3,f=getAllKeys(e),g=f.length,m=getAllKeys(n),y=m.length;if(g!=y&&!d)return!1;for(var v=g;v--;){var _=f[v];if(!(d?_ in n:hasOwnProperty$1.call(n,_)))return!1}var w=u.get(e),x=u.get(n);if(w&&x)return w==n&&x==e;var k=!0;u.set(e,n),u.set(n,e);for(var S=d;++v<g;){_=f[v];var M=e[_],E=n[_];if(o)var P=d?o(E,M,_,n,e,u):o(M,E,_,e,n,u);if(!(P===void 0?M===E||s(M,E,r,o,u):P)){k=!1;break}S||(S=_=="constructor")}if(k&&!S){var T=e.constructor,D=n.constructor;T!=D&&"constructor"in e&&"constructor"in n&&!(typeof T=="function"&&T instanceof T&&typeof D=="function"&&D instanceof D)&&(k=!1)}return u.delete(e),u.delete(n),k}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty;function baseIsEqualDeep(e,n,r,o,s,u){var d=isArray$2(e),f=isArray$2(n),g=d?arrayTag:getTag$1(e),m=f?arrayTag:getTag$1(n);g=g==argsTag?objectTag:g,m=m==argsTag?objectTag:m;var y=g==objectTag,v=m==objectTag,_=g==m;if(_&&isBuffer$2(e)){if(!isBuffer$2(n))return!1;d=!0,y=!1}if(_&&!y)return u||(u=new Stack),d||isTypedArray$2(e)?equalArrays(e,n,r,o,s,u):equalByTag(e,n,g,r,o,s,u);if(!(r&COMPARE_PARTIAL_FLAG$2)){var w=y&&hasOwnProperty.call(e,"__wrapped__"),x=v&&hasOwnProperty.call(n,"__wrapped__");if(w||x){var k=w?e.value():e,S=x?n.value():n;return u||(u=new Stack),s(k,S,r,o,u)}}return _?(u||(u=new Stack),equalObjects(e,n,r,o,s,u)):!1}function baseIsEqual(e,n,r,o,s){return e===n?!0:e==null||n==null||!isObjectLike$1(e)&&!isObjectLike$1(n)?e!==e&&n!==n:baseIsEqualDeep(e,n,r,o,baseIsEqual,s)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,n,r,o){var s=r.length,u=s,d=!o;if(e==null)return!u;for(e=Object(e);s--;){var f=r[s];if(d&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++s<u;){f=r[s];var g=f[0],m=e[g],y=f[1];if(d&&f[2]){if(m===void 0&&!(g in e))return!1}else{var v=new Stack;if(o)var _=o(m,y,g,e,n,v);if(!(_===void 0?baseIsEqual(y,m,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,o,v):_))return!1}}return!0}function isStrictComparable(e){return e===e&&!isObject$2(e)}function getMatchData(e){for(var n=keys(e),r=n.length;r--;){var o=n[r],s=e[o];n[r]=[o,s,isStrictComparable(s)]}return n}function matchesStrictComparable(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}function baseMatches(e){var n=getMatchData(e);return n.length==1&&n[0][2]?matchesStrictComparable(n[0][0],n[0][1]):function(r){return r===e||baseIsMatch(r,e,n)}}function baseHasIn(e,n){return e!=null&&n in Object(e)}function hasPath(e,n,r){n=castPath(n,e);for(var o=-1,s=n.length,u=!1;++o<s;){var d=toKey(n[o]);if(!(u=e!=null&&r(e,d)))break;e=e[d]}return u||++o!=s?u:(s=e==null?0:e.length,!!s&&isLength(s)&&isIndex(d,s)&&(isArray$2(e)||isArguments$1(e)))}function hasIn(e,n){return e!=null&&hasPath(e,n,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,n){return isKey(e)&&isStrictComparable(n)?matchesStrictComparable(toKey(e),n):function(r){var o=get(r,e);return o===void 0&&o===n?hasIn(r,e):baseIsEqual(n,o,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(e){return function(n){return n==null?void 0:n[e]}}function basePropertyDeep(e){return function(n){return baseGet(n,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return typeof e=="function"?e:e==null?identity:typeof e=="object"?isArray$2(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function createBaseFor(e){return function(n,r,o){for(var s=-1,u=Object(n),d=o(n),f=d.length;f--;){var g=d[e?f:++s];if(r(u[g],g,u)===!1)break}return n}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(e,n){return e&&baseFor$1(e,n,keys)}function createBaseEach(e,n){return function(r,o){if(r==null)return r;if(!isArrayLike(r))return e(r,o);for(var s=r.length,u=n?s:-1,d=Object(r);(n?u--:++u<s)&&o(d[u],u,d)!==!1;);return r}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;function assignMergeValue(e,n,r){(r!==void 0&&!eq(e[n],r)||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function isArrayLikeObject(e){return isObjectLike$1(e)&&isArrayLike(e)}function safeGet(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,n,r,o,s,u,d){var f=safeGet(e,r),g=safeGet(n,r),m=d.get(g);if(m){assignMergeValue(e,r,m);return}var y=u?u(f,g,r+"",e,n,d):void 0,v=y===void 0;if(v){var _=isArray$2(g),w=!_&&isBuffer$2(g),x=!_&&!w&&isTypedArray$2(g);y=g,_||w||x?isArray$2(f)?y=f:isArrayLikeObject(f)?y=copyArray(f):w?(v=!1,y=cloneBuffer(g,!0)):x?(v=!1,y=cloneTypedArray(g,!0)):y=[]:isPlainObject$2(g)||isArguments$1(g)?(y=f,isArguments$1(f)?y=toPlainObject(f):(!isObject$2(f)||isFunction$1(f))&&(y=initCloneObject(g))):v=!1}v&&(d.set(g,y),s(y,g,o,u,d),d.delete(g)),assignMergeValue(e,r,y)}function baseMerge(e,n,r,o,s){e!==n&&baseFor$1(n,function(u,d){if(s||(s=new Stack),isObject$2(u))baseMergeDeep(e,n,d,r,baseMerge,o,s);else{var f=o?o(safeGet(e,d),u,d+"",e,n,s):void 0;f===void 0&&(f=u),assignMergeValue(e,d,f)}},keysIn)}function baseMap(e,n){var r=-1,o=isArrayLike(e)?Array(e.length):[];return baseEach$1(e,function(s,u,d){o[++r]=n(s,u,d)}),o}function map(e,n){var r=isArray$2(e)?arrayMap:baseMap;return r(e,baseIteratee(n))}var merge$2=createAssigner(function(e,n,r){baseMerge(e,n,r)});const merge$3=merge$2,commonVariables$7={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize,fontFamily,lineHeight}=commonVariables$7,globalStyle=c$1("body",`
 margin: 0;
 font-size: ${fontSize};
 font-family: ${fontFamily};
 line-height: ${lineHeight};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[c$1("input",`
 font-family: inherit;
 font-size: inherit;
 `)]),configProviderInjectionKey="n-config-provider",cssrAnchorMetaName="naive-ui-style";function createTheme(e){return e}function useTheme(e,n,r,o,s,u){const d=useSsrAdapter(),f=inject(configProviderInjectionKey,null);if(r){const m=()=>{const y=u==null?void 0:u.value;r.mount({id:y===void 0?n:y+n,head:!0,props:{bPrefix:y?`.${y}-`:void 0},anchorMetaName:cssrAnchorMetaName,ssr:d,parent:f==null?void 0:f.styleMountTarget}),f!=null&&f.preflightStyleDisabled||globalStyle.mount({id:"n-global",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:d,parent:f==null?void 0:f.styleMountTarget})};d?m():onBeforeMount(m)}return computed(()=>{var m;const{theme:{common:y,self:v,peers:_={}}={},themeOverrides:w={},builtinThemeOverrides:x={}}=s,{common:k,peers:S}=w,{common:M=void 0,[e]:{common:E=void 0,self:P=void 0,peers:T={}}={}}=(f==null?void 0:f.mergedThemeRef.value)||{},{common:D=void 0,[e]:F={}}=(f==null?void 0:f.mergedThemeOverridesRef.value)||{},{common:I,peers:N={}}=F,q=merge$3({},y||E||M||o.common,D,I,k),Y=merge$3((m=v||P||o.self)===null||m===void 0?void 0:m(q),x,F,w);return{common:q,self:Y,peers:merge$3({},o.peers,T,_),peerOverrides:merge$3({},x.peers,N,S)}})}useTheme.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const defaultClsPrefix="n";function useConfig(e={},n={defaultBordered:!0}){const r=inject(configProviderInjectionKey,null);return{inlineThemeDisabled:r==null?void 0:r.inlineThemeDisabled,mergedRtlRef:r==null?void 0:r.mergedRtlRef,mergedComponentPropsRef:r==null?void 0:r.mergedComponentPropsRef,mergedBreakpointsRef:r==null?void 0:r.mergedBreakpointsRef,mergedBorderedRef:computed(()=>{var o,s;const{bordered:u}=e;return u!==void 0?u:(s=(o=r==null?void 0:r.mergedBorderedRef.value)!==null&&o!==void 0?o:n.defaultBordered)!==null&&s!==void 0?s:!0}),mergedClsPrefixRef:r?r.mergedClsPrefixRef:shallowRef(defaultClsPrefix),namespaceRef:computed(()=>r==null?void 0:r.mergedNamespaceRef.value)}}const enUS$1={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm",clear:"Clear"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:e=>`Please load all ${e}'s descendants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",weekFormat:"YYYY-w",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",quarterPlaceholder:"Select Quarter",weekPlaceholder:"Select Week",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",startMonthPlaceholder:"Start Month",endMonthPlaceholder:"End Month",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},LegacyTransfer:{sourceTitle:"Source",targetTitle:"Target"},Transfer:{selectAll:"Select all",unselectAll:"Unselect all",clearAll:"Clear",total:e=>`Total ${e} items`,selected:e=>`${e} items selected`},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now",clear:"Clear"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"},Image:{tipPrevious:"Previous picture (\u2190)",tipNext:"Next picture (\u2192)",tipCounterclockwise:"Counterclockwise",tipClockwise:"Clockwise",tipZoomOut:"Zoom out",tipZoomIn:"Zoom in",tipDownload:"Download",tipClose:"Close (Esc)",tipOriginalSize:"Zoom to original size"}},enUS$2=enUS$1;function buildFormatLongFn(e){return(n={})=>{const r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}function buildLocalizeFn(e){return(n,r)=>{const o=r!=null&&r.context?String(r.context):"standalone";let s;if(o==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,f=r!=null&&r.width?String(r.width):d;s=e.formattingValues[f]||e.formattingValues[d]}else{const d=e.defaultWidth,f=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[f]||e.values[d]}const u=e.argumentCallback?e.argumentCallback(n):n;return s[u]}}function buildMatchFn(e){return(n,r={})=>{const o=r.width,s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],u=n.match(s);if(!u)return null;const d=u[0],f=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],g=Array.isArray(f)?findIndex$1(f,v=>v.test(d)):findKey(f,v=>v.test(d));let m;m=e.valueCallback?e.valueCallback(g):g,m=r.valueCallback?r.valueCallback(m):m;const y=n.slice(d.length);return{value:m,rest:y}}}function findKey(e,n){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n(e[r]))return r}function findIndex$1(e,n){for(let r=0;r<e.length;r++)if(n(e[r]))return r}function buildMatchPatternFn(e){return(n,r={})=>{const o=n.match(e.matchPattern);if(!o)return null;const s=o[0],u=n.match(e.parsePattern);if(!u)return null;let d=e.valueCallback?e.valueCallback(u[0]):u[0];d=r.valueCallback?r.valueCallback(d):d;const f=n.slice(s.length);return{value:d,rest:f}}}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(e,n,r)=>{let o;const s=formatDistanceLocale[e];return typeof s=="string"?o=s:n===1?o=s.one:o=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+o:o+" ago":o},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(e,n,r,o)=>formatRelativeLocale[e],eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(e,n)=>{const r=Number(e),o=r%100;if(o>20||o<10)switch(o%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:e=>e-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})},matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:e=>parseInt(e,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:e=>e+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}},dateEnUs={name:"en-US",locale:enUS},dateEnUS=dateEnUs;function useLocale(e){const{mergedLocaleRef:n,mergedDateLocaleRef:r}=inject(configProviderInjectionKey,null)||{},o=computed(()=>{var u,d;return(d=(u=n==null?void 0:n.value)===null||u===void 0?void 0:u[e])!==null&&d!==void 0?d:enUS$2[e]});return{dateLocaleRef:computed(()=>{var u;return(u=r==null?void 0:r.value)!==null&&u!==void 0?u:dateEnUS}),localeRef:o}}function useStyle(e,n,r){if(!n)return;const o=useSsrAdapter(),s=inject(configProviderInjectionKey,null),u=()=>{const d=r.value;n.mount({id:d===void 0?e:d+e,head:!0,anchorMetaName:cssrAnchorMetaName,props:{bPrefix:d?`.${d}-`:void 0},ssr:o,parent:s==null?void 0:s.styleMountTarget}),s!=null&&s.preflightStyleDisabled||globalStyle.mount({id:"n-global",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:o,parent:s==null?void 0:s.styleMountTarget})};o?u():onBeforeMount(u)}function useThemeClass(e,n,r,o){r||throwError("useThemeClass","cssVarsRef is not passed");const s=inject(configProviderInjectionKey,null),u=s==null?void 0:s.mergedThemeHashRef,d=s==null?void 0:s.styleMountTarget,f=ref(""),g=useSsrAdapter();let m;const y=`__${e}`,v=()=>{let _=y;const w=n?n.value:void 0,x=u==null?void 0:u.value;x&&(_+=`-${x}`),w&&(_+=`-${w}`);const{themeOverrides:k,builtinThemeOverrides:S}=o;k&&(_+=`-${murmur2(JSON.stringify(k))}`),S&&(_+=`-${murmur2(JSON.stringify(S))}`),f.value=_,m=()=>{const M=r.value;let E="";for(const P in M)E+=`${P}: ${M[P]};`;c$1(`.${_}`,E).mount({id:_,ssr:g,parent:d}),m=void 0}};return watchEffect(()=>{v()}),{themeClass:f,onRender:()=>{m==null||m()}}}function useRtl(e,n,r){if(!n)return;const o=useSsrAdapter(),s=computed(()=>{const{value:f}=n;if(!f)return;const g=f[e];if(!!g)return g}),u=inject(configProviderInjectionKey,null),d=()=>{watchEffect(()=>{const{value:f}=r,g=`${f}${e}Rtl`;if(exists(g,o))return;const{value:m}=s;!m||m.style.mount({id:g,head:!0,anchorMetaName:cssrAnchorMetaName,props:{bPrefix:f?`.${f}-`:void 0},ssr:o,parent:u==null?void 0:u.styleMountTarget})})};return o?d():onBeforeMount(d),s}const AddIcon=defineComponent({name:"Add",render(){return h$1("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h$1("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}});function replaceable(e,n){return defineComponent({name:upperFirst$1(e),setup(){var r;const o=(r=inject(configProviderInjectionKey,null))===null||r===void 0?void 0:r.mergedIconsRef;return()=>{var s;const u=(s=o==null?void 0:o.value)===null||s===void 0?void 0:s[e];return u?u():n}}})}const FinishedIcon=defineComponent({name:"Checkmark",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},h$1("g",{fill:"none"},h$1("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),ErrorIcon$1=replaceable("close",h$1("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},h$1("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h$1("g",{fill:"currentColor","fill-rule":"nonzero"},h$1("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),EyeIcon=defineComponent({name:"Eye",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h$1("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),h$1("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),EyeOffIcon=defineComponent({name:"EyeOff",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h$1("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),h$1("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),h$1("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),h$1("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),h$1("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),EmptyIcon=defineComponent({name:"Empty",render(){return h$1("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h$1("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),h$1("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),ErrorIcon=replaceable("error",h$1("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),InfoIcon=replaceable("info",h$1("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),RemoveIcon=defineComponent({name:"Remove",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h$1("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),SuccessIcon=replaceable("success",h$1("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),WarningIcon=replaceable("warning",h$1("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),ChevronDownIcon=defineComponent({name:"ChevronDown",render(){return h$1("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h$1("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),ClearIcon=replaceable("clear",h$1("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h$1("g",{fill:"currentColor","fill-rule":"nonzero"},h$1("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),NIconSwitchTransition=defineComponent({name:"BaseIconSwitchTransition",setup(e,{slots:n}){const r=isMounted();return()=>h$1(Transition,{name:"icon-switch-transition",appear:r.value},n)}}),NFadeInExpandTransition=defineComponent({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(e,{slots:n}){function r(f){e.width?f.style.maxWidth=`${f.offsetWidth}px`:f.style.maxHeight=`${f.offsetHeight}px`,f.offsetWidth}function o(f){e.width?f.style.maxWidth="0":f.style.maxHeight="0",f.offsetWidth;const{onLeave:g}=e;g&&g()}function s(f){e.width?f.style.maxWidth="":f.style.maxHeight="";const{onAfterLeave:g}=e;g&&g()}function u(f){if(f.style.transition="none",e.width){const g=f.offsetWidth;f.style.maxWidth="0",f.offsetWidth,f.style.transition="",f.style.maxWidth=`${g}px`}else if(e.reverse)f.style.maxHeight=`${f.offsetHeight}px`,f.offsetHeight,f.style.transition="",f.style.maxHeight="0";else{const g=f.offsetHeight;f.style.maxHeight="0",f.offsetWidth,f.style.transition="",f.style.maxHeight=`${g}px`}f.offsetWidth}function d(f){var g;e.width?f.style.maxWidth="":e.reverse||(f.style.maxHeight=""),(g=e.onAfterEnter)===null||g===void 0||g.call(e)}return()=>{const{group:f,width:g,appear:m,mode:y}=e,v=f?TransitionGroup:Transition,_={name:g?"fade-in-width-expand-transition":"fade-in-height-expand-transition",appear:m,onEnter:u,onAfterEnter:d,onBeforeLeave:r,onLeave:o,onAfterLeave:s};return f||(_.mode=y),h$1(v,_,n)}}}),style$p=cB("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[c$1("svg",`
 height: 1em;
 width: 1em;
 `)]),NBaseIcon=defineComponent({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(e){useStyle("-base-icon",style$p,toRef(e,"clsPrefix"))},render(){return h$1("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),style$o=cB("base-close",`
 display: flex;
 align-items: center;
 justify-content: center;
 cursor: pointer;
 background-color: transparent;
 color: var(--n-close-icon-color);
 border-radius: var(--n-close-border-radius);
 height: var(--n-close-size);
 width: var(--n-close-size);
 font-size: var(--n-close-icon-size);
 outline: none;
 border: none;
 position: relative;
 padding: 0;
`,[cM("absolute",`
 height: var(--n-close-icon-size);
 width: var(--n-close-icon-size);
 `),c$1("&::before",`
 content: "";
 position: absolute;
 width: var(--n-close-size);
 height: var(--n-close-size);
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 transition: inherit;
 border-radius: inherit;
 `),cNotM("disabled",[c$1("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),c$1("&:hover::before",`
 background-color: var(--n-close-color-hover);
 `),c$1("&:focus::before",`
 background-color: var(--n-close-color-hover);
 `),c$1("&:active",`
 color: var(--n-close-icon-color-pressed);
 `),c$1("&:active::before",`
 background-color: var(--n-close-color-pressed);
 `)]),cM("disabled",`
 cursor: not-allowed;
 color: var(--n-close-icon-color-disabled);
 background-color: transparent;
 `),cM("round",[c$1("&::before",`
 border-radius: 50%;
 `)])]),NBaseClose=defineComponent({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup(e){return useStyle("-base-close",style$o,toRef(e,"clsPrefix")),()=>{const{clsPrefix:n,disabled:r,absolute:o,round:s,isButtonTag:u}=e;return h$1(u?"button":"div",{type:u?"button":void 0,tabindex:r||!e.focusable?-1:0,"aria-disabled":r,"aria-label":"close",role:u?void 0:"button",disabled:r,class:[`${n}-base-close`,o&&`${n}-base-close--absolute`,r&&`${n}-base-close--disabled`,s&&`${n}-base-close--round`],onMousedown:f=>{e.focusable||f.preventDefault()},onClick:e.onClick},h$1(NBaseIcon,{clsPrefix:n},{default:()=>h$1(ErrorIcon$1,null)}))}}}),FocusDetector=defineComponent({props:{onFocus:Function,onBlur:Function},setup(e){return()=>h$1("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}}),{cubicBezierEaseInOut:cubicBezierEaseInOut$3}=commonVariables$7;function iconSwitchTransition({originalTransform:e="",left:n=0,top:r=0,transition:o=`all .3s ${cubicBezierEaseInOut$3} !important`}={}){return[c$1("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:`${e} scale(0.75)`,left:n,top:r,opacity:0}),c$1("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${e}`,left:n,top:r,opacity:1}),c$1("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:n,top:r,transition:o})]}const style$n=c$1([c$1("@keyframes rotator",`
 0% {
 -webkit-transform: rotate(0deg);
 transform: rotate(0deg);
 }
 100% {
 -webkit-transform: rotate(360deg);
 transform: rotate(360deg);
 }`),cB("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
 `,[cE("transition-wrapper",`
 position: absolute;
 width: 100%;
 height: 100%;
 `,[iconSwitchTransition()]),cE("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iconSwitchTransition({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),cE("container",`
 animation: rotator 3s linear infinite both;
 `,[cE("icon",`
 height: 1em;
 width: 1em;
 `)])])]),duration="1.6s",exposedLoadingProps={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},NBaseLoading=defineComponent({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},exposedLoadingProps),setup(e){useStyle("-base-loading",style$n,toRef(e,"clsPrefix"))},render(){const{clsPrefix:e,radius:n,strokeWidth:r,stroke:o,scale:s}=this,u=n/s;return h$1("div",{class:`${e}-base-loading`,role:"img","aria-label":"loading"},h$1(NIconSwitchTransition,null,{default:()=>this.show?h$1("div",{key:"icon",class:`${e}-base-loading__transition-wrapper`},h$1("div",{class:`${e}-base-loading__container`},h$1("svg",{class:`${e}-base-loading__icon`,viewBox:`0 0 ${2*u} ${2*u}`,xmlns:"http://www.w3.org/2000/svg",style:{color:o}},h$1("g",null,h$1("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${u} ${u};270 ${u} ${u}`,begin:"0s",dur:duration,fill:"freeze",repeatCount:"indefinite"}),h$1("circle",{class:`${e}-base-loading__icon`,fill:"none",stroke:"currentColor","stroke-width":r,"stroke-linecap":"round",cx:u,cy:u,r:n-r/2,"stroke-dasharray":5.67*n,"stroke-dashoffset":18.48*n},h$1("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${u} ${u};135 ${u} ${u};450 ${u} ${u}`,begin:"0s",dur:duration,fill:"freeze",repeatCount:"indefinite"}),h$1("animate",{attributeName:"stroke-dashoffset",values:`${5.67*n};${1.42*n};${5.67*n}`,begin:"0s",dur:duration,fill:"freeze",repeatCount:"indefinite"})))))):h$1("div",{key:"placeholder",class:`${e}-base-loading__placeholder`},this.$slots)}))}});function toArray$1(e){return Array.isArray(e)?e:[e]}const TRAVERSE_COMMAND={STOP:"STOP"};function traverseWithCb(e,n){const r=n(e);e.children!==void 0&&r!==TRAVERSE_COMMAND.STOP&&e.children.forEach(o=>traverseWithCb(o,n))}function getNonLeafKeys(e,n={}){const{preserveGroup:r=!1}=n,o=[],s=r?d=>{d.isLeaf||(o.push(d.key),u(d.children))}:d=>{d.isLeaf||(d.isGroup||o.push(d.key),u(d.children))};function u(d){d.forEach(s)}return u(e),o}function isLeaf(e,n){const{isLeaf:r}=e;return r!==void 0?r:!n(e)}function defaultGetChildren(e){return e.children}function defaultGetKey(e){return e.key}function isIgnored(){return!1}function isShallowLoaded(e,n){const{isLeaf:r}=e;return!(r===!1&&!Array.isArray(n(e)))}function isDisabled(e){return e.disabled===!0}function isExpilicitlyNotLoaded(e,n){return e.isLeaf===!1&&!Array.isArray(n(e))}function unwrapCheckedKeys(e){var n;return e==null?[]:Array.isArray(e)?e:(n=e.checkedKeys)!==null&&n!==void 0?n:[]}function unwrapIndeterminateKeys(e){var n;return e==null||Array.isArray(e)?[]:(n=e.indeterminateKeys)!==null&&n!==void 0?n:[]}function merge$1(e,n){const r=new Set(e);return n.forEach(o=>{r.has(o)||r.add(o)}),Array.from(r)}function minus(e,n){const r=new Set(e);return n.forEach(o=>{r.has(o)&&r.delete(o)}),Array.from(r)}function isGroup(e){return(e==null?void 0:e.type)==="group"}function createIndexGetter(e){const n=new Map;return e.forEach((r,o)=>{n.set(r.key,o)}),r=>{var o;return(o=n.get(r))!==null&&o!==void 0?o:null}}class SubtreeNotLoadedError extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function getExtendedCheckedKeySetAfterCheck(e,n,r,o){return getExtendedCheckedKeySet(n.concat(e),r,o,!1)}function getAvailableAscendantNodeSet(e,n){const r=new Set;return e.forEach(o=>{const s=n.treeNodeMap.get(o);if(s!==void 0){let u=s.parent;for(;u!==null&&!(u.disabled||r.has(u.key));)r.add(u.key),u=u.parent}}),r}function getExtendedCheckedKeySetAfterUncheck(e,n,r,o){const s=getExtendedCheckedKeySet(n,r,o,!1),u=getExtendedCheckedKeySet(e,r,o,!0),d=getAvailableAscendantNodeSet(e,r),f=[];return s.forEach(g=>{(u.has(g)||d.has(g))&&f.push(g)}),f.forEach(g=>s.delete(g)),s}function getCheckedKeys(e,n){const{checkedKeys:r,keysToCheck:o,keysToUncheck:s,indeterminateKeys:u,cascade:d,leafOnly:f,checkStrategy:g,allowNotLoaded:m}=e;if(!d)return o!==void 0?{checkedKeys:merge$1(r,o),indeterminateKeys:Array.from(u)}:s!==void 0?{checkedKeys:minus(r,s),indeterminateKeys:Array.from(u)}:{checkedKeys:Array.from(r),indeterminateKeys:Array.from(u)};const{levelTreeNodeMap:y}=n;let v;s!==void 0?v=getExtendedCheckedKeySetAfterUncheck(s,r,n,m):o!==void 0?v=getExtendedCheckedKeySetAfterCheck(o,r,n,m):v=getExtendedCheckedKeySet(r,n,m,!1);const _=g==="parent",w=g==="child"||f,x=v,k=new Set,S=Math.max.apply(null,Array.from(y.keys()));for(let M=S;M>=0;M-=1){const E=M===0,P=y.get(M);for(const T of P){if(T.isLeaf)continue;const{key:D,shallowLoaded:F}=T;if(w&&F&&T.children.forEach(Y=>{!Y.disabled&&!Y.isLeaf&&Y.shallowLoaded&&x.has(Y.key)&&x.delete(Y.key)}),T.disabled||!F)continue;let I=!0,N=!1,q=!0;for(const Y of T.children){const Z=Y.key;if(!Y.disabled){if(q&&(q=!1),x.has(Z))N=!0;else if(k.has(Z)){N=!0,I=!1;break}else if(I=!1,N)break}}I&&!q?(_&&T.children.forEach(Y=>{!Y.disabled&&x.has(Y.key)&&x.delete(Y.key)}),x.add(D)):N&&k.add(D),E&&w&&x.has(D)&&x.delete(D)}}return{checkedKeys:Array.from(x),indeterminateKeys:Array.from(k)}}function getExtendedCheckedKeySet(e,n,r,o){const{treeNodeMap:s,getChildren:u}=n,d=new Set,f=new Set(e);return e.forEach(g=>{const m=s.get(g);m!==void 0&&traverseWithCb(m,y=>{if(y.disabled)return TRAVERSE_COMMAND.STOP;const{key:v}=y;if(!d.has(v)&&(d.add(v),f.add(v),isExpilicitlyNotLoaded(y.rawNode,u))){if(o)return TRAVERSE_COMMAND.STOP;if(!r)throw new SubtreeNotLoadedError}})}),f}function getPath(e,{includeGroup:n=!1,includeSelf:r=!0},o){var s;const u=o.treeNodeMap;let d=e==null?null:(s=u.get(e))!==null&&s!==void 0?s:null;const f={keyPath:[],treeNodePath:[],treeNode:d};if(d!=null&&d.ignored)return f.treeNode=null,f;for(;d;)!d.ignored&&(n||!d.isGroup)&&f.treeNodePath.push(d),d=d.parent;return f.treeNodePath.reverse(),r||f.treeNodePath.pop(),f.keyPath=f.treeNodePath.map(g=>g.key),f}function getFirstAvailableNode(e){if(e.length===0)return null;const n=e[0];return n.isGroup||n.ignored||n.disabled?n.getNext():n}function rawGetNext(e,n){const r=e.siblings,o=r.length,{index:s}=e;return n?r[(s+1)%o]:s===r.length-1?null:r[s+1]}function move(e,n,{loop:r=!1,includeDisabled:o=!1}={}){const s=n==="prev"?rawGetPrev:rawGetNext,u={reverse:n==="prev"};let d=!1,f=null;function g(m){if(m!==null){if(m===e){if(!d)d=!0;else if(!e.disabled&&!e.isGroup){f=e;return}}else if((!m.disabled||o)&&!m.ignored&&!m.isGroup){f=m;return}if(m.isGroup){const y=getChild$1(m,u);y!==null?f=y:g(s(m,r))}else{const y=s(m,!1);if(y!==null)g(y);else{const v=rawGetParent(m);v!=null&&v.isGroup?g(s(v,r)):r&&g(s(m,!0))}}}}return g(e),f}function rawGetPrev(e,n){const r=e.siblings,o=r.length,{index:s}=e;return n?r[(s-1+o)%o]:s===0?null:r[s-1]}function rawGetParent(e){return e.parent}function getChild$1(e,n={}){const{reverse:r=!1}=n,{children:o}=e;if(o){const{length:s}=o,u=r?s-1:0,d=r?-1:s,f=r?-1:1;for(let g=u;g!==d;g+=f){const m=o[g];if(!m.disabled&&!m.ignored)if(m.isGroup){const y=getChild$1(m,n);if(y!==null)return y}else return m}}return null}const moveMethods={getChild(){return this.ignored?null:getChild$1(this)},getParent(){const{parent:e}=this;return e!=null&&e.isGroup?e.getParent():e},getNext(e={}){return move(this,"next",e)},getPrev(e={}){return move(this,"prev",e)}};function flatten(e,n){const r=n?new Set(n):void 0,o=[];function s(u){u.forEach(d=>{o.push(d),!(d.isLeaf||!d.children||d.ignored)&&(d.isGroup||r===void 0||r.has(d.key))&&s(d.children)})}return s(e),o}function contains(e,n){const r=e.key;for(;n;){if(n.key===r)return!0;n=n.parent}return!1}function createTreeNodes(e,n,r,o,s,u=null,d=0){const f=[];return e.forEach((g,m)=>{var y;const v=Object.create(o);if(v.rawNode=g,v.siblings=f,v.level=d,v.index=m,v.isFirstChild=m===0,v.isLastChild=m+1===e.length,v.parent=u,!v.ignored){const _=s(g);Array.isArray(_)&&(v.children=createTreeNodes(_,n,r,o,s,v,d+1))}f.push(v),n.set(v.key,v),r.has(d)||r.set(d,[]),(y=r.get(d))===null||y===void 0||y.push(v)}),f}function createTreeMate(e,n={}){var r;const o=new Map,s=new Map,{getDisabled:u=isDisabled,getIgnored:d=isIgnored,getIsGroup:f=isGroup,getKey:g=defaultGetKey}=n,m=(r=n.getChildren)!==null&&r!==void 0?r:defaultGetChildren,y=n.ignoreEmptyChildren?T=>{const D=m(T);return Array.isArray(D)?D.length?D:null:D}:m,v=Object.assign({get key(){return g(this.rawNode)},get disabled(){return u(this.rawNode)},get isGroup(){return f(this.rawNode)},get isLeaf(){return isLeaf(this.rawNode,y)},get shallowLoaded(){return isShallowLoaded(this.rawNode,y)},get ignored(){return d(this.rawNode)},contains(T){return contains(this,T)}},moveMethods),_=createTreeNodes(e,o,s,v,y);function w(T){if(T==null)return null;const D=o.get(T);return D&&!D.isGroup&&!D.ignored?D:null}function x(T){if(T==null)return null;const D=o.get(T);return D&&!D.ignored?D:null}function k(T,D){const F=x(T);return F?F.getPrev(D):null}function S(T,D){const F=x(T);return F?F.getNext(D):null}function M(T){const D=x(T);return D?D.getParent():null}function E(T){const D=x(T);return D?D.getChild():null}const P={treeNodes:_,treeNodeMap:o,levelTreeNodeMap:s,maxLevel:Math.max(...s.keys()),getChildren:y,getFlattenedNodes(T){return flatten(_,T)},getNode:w,getPrev:k,getNext:S,getParent:M,getChild:E,getFirstAvailableNode(){return getFirstAvailableNode(_)},getPath(T,D={}){return getPath(T,D,P)},getCheckedKeys(T,D={}){const{cascade:F=!0,leafOnly:I=!1,checkStrategy:N="all",allowNotLoaded:q=!1}=D;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(T),indeterminateKeys:unwrapIndeterminateKeys(T),cascade:F,leafOnly:I,checkStrategy:N,allowNotLoaded:q},P)},check(T,D,F={}){const{cascade:I=!0,leafOnly:N=!1,checkStrategy:q="all",allowNotLoaded:Y=!1}=F;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(D),indeterminateKeys:unwrapIndeterminateKeys(D),keysToCheck:T==null?[]:toArray$1(T),cascade:I,leafOnly:N,checkStrategy:q,allowNotLoaded:Y},P)},uncheck(T,D,F={}){const{cascade:I=!0,leafOnly:N=!1,checkStrategy:q="all",allowNotLoaded:Y=!1}=F;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(D),indeterminateKeys:unwrapIndeterminateKeys(D),keysToUncheck:T==null?[]:toArray$1(T),cascade:I,leafOnly:N,checkStrategy:q,allowNotLoaded:Y},P)},getNonLeafKeys(T={}){return getNonLeafKeys(_,T)}};return P}const base={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.6",alphaDisabled:"0.5",alphaDisabledInput:"0.02",alphaPending:"0.05",alphaTablePending:"0.02",alphaPressed:"0.07",alphaAvatar:"0.2",alphaRail:"0.14",alphaProgressRail:".08",alphaBorder:"0.12",alphaDivider:"0.06",alphaInput:"0",alphaAction:"0.02",alphaTab:"0.04",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",alphaCode:"0.05",alphaTag:"0.02",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},baseBackgroundRgb=rgba(base.neutralBase),baseInvertBackgroundRgb=rgba(base.neutralInvertBase),overlayPrefix=`rgba(${baseInvertBackgroundRgb.slice(0,3).join(", ")}, `;function overlay(e){return`${overlayPrefix+String(e)})`}function neutral(e){const n=Array.from(baseInvertBackgroundRgb);return n[3]=Number(e),composite(baseBackgroundRgb,n)}const derived=Object.assign(Object.assign({name:"common"},commonVariables$7),{baseColor:base.neutralBase,primaryColor:base.primaryDefault,primaryColorHover:base.primaryHover,primaryColorPressed:base.primaryActive,primaryColorSuppl:base.primarySuppl,infoColor:base.infoDefault,infoColorHover:base.infoHover,infoColorPressed:base.infoActive,infoColorSuppl:base.infoSuppl,successColor:base.successDefault,successColorHover:base.successHover,successColorPressed:base.successActive,successColorSuppl:base.successSuppl,warningColor:base.warningDefault,warningColorHover:base.warningHover,warningColorPressed:base.warningActive,warningColorSuppl:base.warningSuppl,errorColor:base.errorDefault,errorColorHover:base.errorHover,errorColorPressed:base.errorActive,errorColorSuppl:base.errorSuppl,textColorBase:base.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:neutral(base.alpha4),placeholderColor:neutral(base.alpha4),placeholderColorDisabled:neutral(base.alpha5),iconColor:neutral(base.alpha4),iconColorHover:scaleColor(neutral(base.alpha4),{lightness:.75}),iconColorPressed:scaleColor(neutral(base.alpha4),{lightness:.9}),iconColorDisabled:neutral(base.alpha5),opacity1:base.alpha1,opacity2:base.alpha2,opacity3:base.alpha3,opacity4:base.alpha4,opacity5:base.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:neutral(Number(base.alphaClose)),closeIconColorHover:neutral(Number(base.alphaClose)),closeIconColorPressed:neutral(Number(base.alphaClose)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:neutral(base.alpha4),clearColorHover:scaleColor(neutral(base.alpha4),{lightness:.75}),clearColorPressed:scaleColor(neutral(base.alpha4),{lightness:.9}),scrollbarColor:overlay(base.alphaScrollbar),scrollbarColorHover:overlay(base.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:neutral(base.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:base.neutralPopover,tableColor:base.neutralCard,cardColor:base.neutralCard,modalColor:base.neutralModal,bodyColor:base.neutralBody,tagColor:"#eee",avatarColor:neutral(base.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:neutral(base.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:base.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),commonLight=derived,commonVars$5={iconSizeTiny:"28px",iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};function self$k(e){const{textColorDisabled:n,iconColor:r,textColor2:o,fontSizeTiny:s,fontSizeSmall:u,fontSizeMedium:d,fontSizeLarge:f,fontSizeHuge:g}=e;return Object.assign(Object.assign({},commonVars$5),{fontSizeTiny:s,fontSizeSmall:u,fontSizeMedium:d,fontSizeLarge:f,fontSizeHuge:g,textColor:n,iconColor:r,extraTextColor:o})}const emptyLight={name:"Empty",common:commonLight,self:self$k},emptyLight$1=emptyLight,style$m=cB("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[cE("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[c$1("+",[cE("description",`
 margin-top: 8px;
 `)])]),cE("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),cE("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),emptyProps=Object.assign(Object.assign({},useTheme.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),NEmpty=defineComponent({name:"Empty",props:emptyProps,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedComponentPropsRef:o}=useConfig(e),s=useTheme("Empty","-empty",style$m,emptyLight$1,e,n),{localeRef:u}=useLocale("Empty"),d=computed(()=>{var y,v,_;return(y=e.description)!==null&&y!==void 0?y:(_=(v=o==null?void 0:o.value)===null||v===void 0?void 0:v.Empty)===null||_===void 0?void 0:_.description}),f=computed(()=>{var y,v;return((v=(y=o==null?void 0:o.value)===null||y===void 0?void 0:y.Empty)===null||v===void 0?void 0:v.renderIcon)||(()=>h$1(EmptyIcon,null))}),g=computed(()=>{const{size:y}=e,{common:{cubicBezierEaseInOut:v},self:{[createKey("iconSize",y)]:_,[createKey("fontSize",y)]:w,textColor:x,iconColor:k,extraTextColor:S}}=s.value;return{"--n-icon-size":_,"--n-font-size":w,"--n-bezier":v,"--n-text-color":x,"--n-icon-color":k,"--n-extra-text-color":S}}),m=r?useThemeClass("empty",computed(()=>{let y="";const{size:v}=e;return y+=v[0],y}),g,e):void 0;return{mergedClsPrefix:n,mergedRenderIcon:f,localizedDescription:computed(()=>d.value||u.value.description),cssVars:r?void 0:g,themeClass:m==null?void 0:m.themeClass,onRender:m==null?void 0:m.onRender}},render(){const{$slots:e,mergedClsPrefix:n,onRender:r}=this;return r==null||r(),h$1("div",{class:[`${n}-empty`,this.themeClass],style:this.cssVars},this.showIcon?h$1("div",{class:`${n}-empty__icon`},e.icon?e.icon():h$1(NBaseIcon,{clsPrefix:n},{default:this.mergedRenderIcon})):null,this.showDescription?h$1("div",{class:`${n}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?h$1("div",{class:`${n}-empty__extra`},e.extra()):null)}}),commonVars$4={railInsetHorizontalBottom:"auto 2px 4px 2px",railInsetHorizontalTop:"4px 2px auto 2px",railInsetVerticalRight:"2px 4px 2px auto",railInsetVerticalLeft:"2px auto 2px 4px",railColor:"transparent"};function self$j(e){const{scrollbarColor:n,scrollbarColorHover:r,scrollbarHeight:o,scrollbarWidth:s,scrollbarBorderRadius:u}=e;return Object.assign(Object.assign({},commonVars$4),{height:o,width:s,borderRadius:u,color:n,colorHover:r})}const scrollbarLight={name:"Scrollbar",common:commonLight,self:self$j},scrollbarLight$1=scrollbarLight,{cubicBezierEaseInOut:cubicBezierEaseInOut$2}=commonVariables$7;function fadeInTransition({name:e="fade-in",enterDuration:n="0.2s",leaveDuration:r="0.2s",enterCubicBezier:o=cubicBezierEaseInOut$2,leaveCubicBezier:s=cubicBezierEaseInOut$2}={}){return[c$1(`&.${e}-transition-enter-active`,{transition:`all ${n} ${o}!important`}),c$1(`&.${e}-transition-leave-active`,{transition:`all ${r} ${s}!important`}),c$1(`&.${e}-transition-enter-from, &.${e}-transition-leave-to`,{opacity:0}),c$1(`&.${e}-transition-leave-from, &.${e}-transition-enter-to`,{opacity:1})]}const style$l=cB("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[c$1(">",[cB("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 min-height: inherit;
 max-height: inherit;
 scrollbar-width: none;
 `,[c$1("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),c$1(">",[cB("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),c$1(">, +",[cB("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 background: var(--n-scrollbar-rail-color);
 -webkit-user-select: none;
 `,[cM("horizontal",`
 height: var(--n-scrollbar-height);
 `,[c$1(">",[cE("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),cM("horizontal--top",`
 inset: var(--n-scrollbar-rail-inset-horizontal-top); 
 `),cM("horizontal--bottom",`
 inset: var(--n-scrollbar-rail-inset-horizontal-bottom); 
 `),cM("vertical",`
 width: var(--n-scrollbar-width);
 `,[c$1(">",[cE("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),cM("vertical--left",`
 inset: var(--n-scrollbar-rail-inset-vertical-left); 
 `),cM("vertical--right",`
 inset: var(--n-scrollbar-rail-inset-vertical-right); 
 `),cM("disabled",[c$1(">",[cE("scrollbar","pointer-events: none;")])]),c$1(">",[cE("scrollbar",`
 z-index: 1;
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[fadeInTransition(),c$1("&:hover","background-color: var(--n-scrollbar-color-hover);")])])])])]),scrollbarProps=Object.assign(Object.assign({},useTheme.props),{duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean,yPlacement:{type:String,default:"right"},xPlacement:{type:String,default:"bottom"}}),Scrollbar=defineComponent({name:"Scrollbar",props:scrollbarProps,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedRtlRef:o}=useConfig(e),s=useRtl("Scrollbar",o,n),u=ref(null),d=ref(null),f=ref(null),g=ref(null),m=ref(null),y=ref(null),v=ref(null),_=ref(null),w=ref(null),x=ref(null),k=ref(null),S=ref(0),M=ref(0),E=ref(!1),P=ref(!1);let T=!1,D=!1,F,I,N=0,q=0,Y=0,Z=0;const j=useIsIos(),ne=useTheme("Scrollbar","-scrollbar",style$l,scrollbarLight$1,e,n),le=computed(()=>{const{value:qe}=_,{value:He}=y,{value:Ke}=x;return qe===null||He===null||Ke===null?0:Math.min(qe,Ke*qe/He+depx(ne.value.self.width)*1.5)}),J=computed(()=>`${le.value}px`),O=computed(()=>{const{value:qe}=w,{value:He}=v,{value:Ke}=k;return qe===null||He===null||Ke===null?0:Ke*qe/He+depx(ne.value.self.height)*1.5}),U=computed(()=>`${O.value}px`),W=computed(()=>{const{value:qe}=_,{value:He}=S,{value:Ke}=y,{value:ot}=x;if(qe===null||Ke===null||ot===null)return 0;{const at=Ke-qe;return at?He/at*(ot-le.value):0}}),H=computed(()=>`${W.value}px`),X=computed(()=>{const{value:qe}=w,{value:He}=M,{value:Ke}=v,{value:ot}=k;if(qe===null||Ke===null||ot===null)return 0;{const at=Ke-qe;return at?He/at*(ot-O.value):0}}),Q=computed(()=>`${X.value}px`),fe=computed(()=>{const{value:qe}=_,{value:He}=y;return qe!==null&&He!==null&&He>qe}),Se=computed(()=>{const{value:qe}=w,{value:He}=v;return qe!==null&&He!==null&&He>qe}),Pe=computed(()=>{const{trigger:qe}=e;return qe==="none"||E.value}),$e=computed(()=>{const{trigger:qe}=e;return qe==="none"||P.value}),Ie=computed(()=>{const{container:qe}=e;return qe?qe():d.value}),Ne=computed(()=>{const{content:qe}=e;return qe?qe():f.value}),Be=(qe,He)=>{if(!e.scrollable)return;if(typeof qe=="number"){ye(qe,He!=null?He:0,0,!1,"auto");return}const{left:Ke,top:ot,index:at,elSize:et,position:Je,behavior:nt,el:it,debounce:ht=!0}=qe;(Ke!==void 0||ot!==void 0)&&ye(Ke!=null?Ke:0,ot!=null?ot:0,0,!1,nt),it!==void 0?ye(0,it.offsetTop,it.offsetHeight,ht,nt):at!==void 0&&et!==void 0?ye(0,at*et,et,ht,nt):Je==="bottom"?ye(0,Number.MAX_SAFE_INTEGER,0,!1,nt):Je==="top"&&ye(0,0,0,!1,nt)},be=useReactivated(()=>{e.container||Be({top:S.value,left:M.value})}),Ve=()=>{be.isDeactivated||Te()},De=qe=>{if(be.isDeactivated)return;const{onResize:He}=e;He&&He(qe),Te()},ve=(qe,He)=>{if(!e.scrollable)return;const{value:Ke}=Ie;!Ke||(typeof qe=="object"?Ke.scrollBy(qe):Ke.scrollBy(qe,He||0))};function ye(qe,He,Ke,ot,at){const{value:et}=Ie;if(!!et){if(ot){const{scrollTop:Je,offsetHeight:nt}=et;if(He>Je){He+Ke<=Je+nt||et.scrollTo({left:qe,top:He+Ke-nt,behavior:at});return}}et.scrollTo({left:qe,top:He,behavior:at})}}function we(){ze(),te(),Te()}function ke(){Me()}function Me(){Le(),Fe()}function Le(){I!==void 0&&window.clearTimeout(I),I=window.setTimeout(()=>{P.value=!1},e.duration)}function Fe(){F!==void 0&&window.clearTimeout(F),F=window.setTimeout(()=>{E.value=!1},e.duration)}function ze(){F!==void 0&&window.clearTimeout(F),E.value=!0}function te(){I!==void 0&&window.clearTimeout(I),P.value=!0}function oe(qe){const{onScroll:He}=e;He&&He(qe),_e()}function _e(){const{value:qe}=Ie;qe&&(S.value=qe.scrollTop,M.value=qe.scrollLeft*(s!=null&&s.value?-1:1))}function Ce(){const{value:qe}=Ne;qe&&(y.value=qe.offsetHeight,v.value=qe.offsetWidth);const{value:He}=Ie;He&&(_.value=He.offsetHeight,w.value=He.offsetWidth);const{value:Ke}=m,{value:ot}=g;Ke&&(k.value=Ke.offsetWidth),ot&&(x.value=ot.offsetHeight)}function Ee(){const{value:qe}=Ie;qe&&(S.value=qe.scrollTop,M.value=qe.scrollLeft*(s!=null&&s.value?-1:1),_.value=qe.offsetHeight,w.value=qe.offsetWidth,y.value=qe.scrollHeight,v.value=qe.scrollWidth);const{value:He}=m,{value:Ke}=g;He&&(k.value=He.offsetWidth),Ke&&(x.value=Ke.offsetHeight)}function Te(){!e.scrollable||(e.useUnifiedContainer?Ee():(Ce(),_e()))}function Re(qe){var He;return!(!((He=u.value)===null||He===void 0)&&He.contains(getPreciseEventTarget(qe)))}function Oe(qe){qe.preventDefault(),qe.stopPropagation(),D=!0,on$1("mousemove",window,je,!0),on$1("mouseup",window,We,!0),q=M.value,Y=s!=null&&s.value?window.innerWidth-qe.clientX:qe.clientX}function je(qe){if(!D)return;F!==void 0&&window.clearTimeout(F),I!==void 0&&window.clearTimeout(I);const{value:He}=w,{value:Ke}=v,{value:ot}=O;if(He===null||Ke===null)return;const et=(s!=null&&s.value?window.innerWidth-qe.clientX-Y:qe.clientX-Y)*(Ke-He)/(He-ot),Je=Ke-He;let nt=q+et;nt=Math.min(Je,nt),nt=Math.max(nt,0);const{value:it}=Ie;if(it){it.scrollLeft=nt*(s!=null&&s.value?-1:1);const{internalOnUpdateScrollLeft:ht}=e;ht&&ht(nt)}}function We(qe){qe.preventDefault(),qe.stopPropagation(),off$1("mousemove",window,je,!0),off$1("mouseup",window,We,!0),D=!1,Te(),Re(qe)&&Me()}function Ze(qe){qe.preventDefault(),qe.stopPropagation(),T=!0,on$1("mousemove",window,Xe,!0),on$1("mouseup",window,Ge,!0),N=S.value,Z=qe.clientY}function Xe(qe){if(!T)return;F!==void 0&&window.clearTimeout(F),I!==void 0&&window.clearTimeout(I);const{value:He}=_,{value:Ke}=y,{value:ot}=le;if(He===null||Ke===null)return;const et=(qe.clientY-Z)*(Ke-He)/(He-ot),Je=Ke-He;let nt=N+et;nt=Math.min(Je,nt),nt=Math.max(nt,0);const{value:it}=Ie;it&&(it.scrollTop=nt)}function Ge(qe){qe.preventDefault(),qe.stopPropagation(),off$1("mousemove",window,Xe,!0),off$1("mouseup",window,Ge,!0),T=!1,Te(),Re(qe)&&Me()}watchEffect(()=>{const{value:qe}=Se,{value:He}=fe,{value:Ke}=n,{value:ot}=m,{value:at}=g;ot&&(qe?ot.classList.remove(`${Ke}-scrollbar-rail--disabled`):ot.classList.add(`${Ke}-scrollbar-rail--disabled`)),at&&(He?at.classList.remove(`${Ke}-scrollbar-rail--disabled`):at.classList.add(`${Ke}-scrollbar-rail--disabled`))}),onMounted(()=>{e.container||Te()}),onBeforeUnmount(()=>{F!==void 0&&window.clearTimeout(F),I!==void 0&&window.clearTimeout(I),off$1("mousemove",window,Xe,!0),off$1("mouseup",window,Ge,!0)});const Qe=computed(()=>{const{common:{cubicBezierEaseInOut:qe},self:{color:He,colorHover:Ke,height:ot,width:at,borderRadius:et,railInsetHorizontalTop:Je,railInsetHorizontalBottom:nt,railInsetVerticalRight:it,railInsetVerticalLeft:ht,railColor:lt}}=ne.value;return{"--n-scrollbar-bezier":qe,"--n-scrollbar-color":He,"--n-scrollbar-color-hover":Ke,"--n-scrollbar-border-radius":et,"--n-scrollbar-width":at,"--n-scrollbar-height":ot,"--n-scrollbar-rail-inset-horizontal-top":Je,"--n-scrollbar-rail-inset-horizontal-bottom":nt,"--n-scrollbar-rail-inset-vertical-right":s!=null&&s.value?rtlInset(it):it,"--n-scrollbar-rail-inset-vertical-left":s!=null&&s.value?rtlInset(ht):ht,"--n-scrollbar-rail-color":lt}}),rt=r?useThemeClass("scrollbar",void 0,Qe,e):void 0;return Object.assign(Object.assign({},{scrollTo:Be,scrollBy:ve,sync:Te,syncUnifiedContainer:Ee,handleMouseEnterWrapper:we,handleMouseLeaveWrapper:ke}),{mergedClsPrefix:n,rtlEnabled:s,containerScrollTop:S,wrapperRef:u,containerRef:d,contentRef:f,yRailRef:g,xRailRef:m,needYBar:fe,needXBar:Se,yBarSizePx:J,xBarSizePx:U,yBarTopPx:H,xBarLeftPx:Q,isShowXBar:Pe,isShowYBar:$e,isIos:j,handleScroll:oe,handleContentResize:Ve,handleContainerResize:De,handleYScrollMouseDown:Ze,handleXScrollMouseDown:Oe,cssVars:r?void 0:Qe,themeClass:rt==null?void 0:rt.themeClass,onRender:rt==null?void 0:rt.onRender})},render(){var e;const{$slots:n,mergedClsPrefix:r,triggerDisplayManually:o,rtlEnabled:s,internalHoistYRail:u,yPlacement:d,xPlacement:f,xScrollable:g}=this;if(!this.scrollable)return(e=n.default)===null||e===void 0?void 0:e.call(n);const m=this.trigger==="none",y=(w,x)=>h$1("div",{ref:"yRailRef",class:[`${r}-scrollbar-rail`,`${r}-scrollbar-rail--vertical`,`${r}-scrollbar-rail--vertical--${d}`,w],"data-scrollbar-rail":!0,style:[x||"",this.verticalRailStyle],"aria-hidden":!0},h$1(m?Wrapper:Transition,m?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?h$1("div",{class:`${r}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),v=()=>{var w,x;return(w=this.onRender)===null||w===void 0||w.call(this),h$1("div",mergeProps(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${r}-scrollbar`,this.themeClass,s&&`${r}-scrollbar--rtl`],style:this.cssVars,onMouseenter:o?void 0:this.handleMouseEnterWrapper,onMouseleave:o?void 0:this.handleMouseLeaveWrapper}),[this.container?(x=n.default)===null||x===void 0?void 0:x.call(n):h$1("div",{role:"none",ref:"containerRef",class:[`${r}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},h$1(VResizeObserver,{onResize:this.handleContentResize},{default:()=>h$1("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${r}-scrollbar-content`,this.contentClass]},n)})),u?null:y(void 0,void 0),g&&h$1("div",{ref:"xRailRef",class:[`${r}-scrollbar-rail`,`${r}-scrollbar-rail--horizontal`,`${r}-scrollbar-rail--horizontal--${f}`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},h$1(m?Wrapper:Transition,m?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?h$1("div",{class:`${r}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:s?this.xBarLeftPx:void 0,left:s?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},_=this.container?v():h$1(VResizeObserver,{onResize:this.handleContainerResize},{default:v});return u?h$1(Fragment,null,_,y(this.themeClass,this.cssVars)):_}}),NScrollbar=Scrollbar,XScrollbar=Scrollbar,commonVariables$6={height:"calc(var(--n-option-height) * 7.6)",paddingTiny:"4px 0",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingTiny:"0 12px",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};function self$i(e){const{borderRadius:n,popoverColor:r,textColor3:o,dividerColor:s,textColor2:u,primaryColorPressed:d,textColorDisabled:f,primaryColor:g,opacityDisabled:m,hoverColor:y,fontSizeTiny:v,fontSizeSmall:_,fontSizeMedium:w,fontSizeLarge:x,fontSizeHuge:k,heightTiny:S,heightSmall:M,heightMedium:E,heightLarge:P,heightHuge:T}=e;return Object.assign(Object.assign({},commonVariables$6),{optionFontSizeTiny:v,optionFontSizeSmall:_,optionFontSizeMedium:w,optionFontSizeLarge:x,optionFontSizeHuge:k,optionHeightTiny:S,optionHeightSmall:M,optionHeightMedium:E,optionHeightLarge:P,optionHeightHuge:T,borderRadius:n,color:r,groupHeaderTextColor:o,actionDividerColor:s,optionTextColor:u,optionTextColorPressed:d,optionTextColorDisabled:f,optionTextColorActive:g,optionOpacityDisabled:m,optionCheckColor:g,optionColorPending:y,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:y,actionTextColor:u,loadingColor:g})}const internalSelectMenuLight={name:"InternalSelectMenu",common:commonLight,peers:{Scrollbar:scrollbarLight$1,Empty:emptyLight$1},self:self$i},internalSelectMenuLight$1=internalSelectMenuLight;function renderCheckMark(e,n){return h$1(Transition,{name:"fade-in-scale-up-transition"},{default:()=>e?h$1(NBaseIcon,{clsPrefix:n,class:`${n}-base-select-option__check`},{default:()=>h$1(FinishedIcon)}):null})}const NSelectOption=defineComponent({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:n,pendingTmNodeRef:r,multipleRef:o,valueSetRef:s,renderLabelRef:u,renderOptionRef:d,labelFieldRef:f,valueFieldRef:g,showCheckmarkRef:m,nodePropsRef:y,handleOptionClick:v,handleOptionMouseEnter:_}=inject(internalSelectionMenuInjectionKey),w=useMemo(()=>{const{value:M}=r;return M?e.tmNode.key===M.key:!1});function x(M){const{tmNode:E}=e;E.disabled||v(M,E)}function k(M){const{tmNode:E}=e;E.disabled||_(M,E)}function S(M){const{tmNode:E}=e,{value:P}=w;E.disabled||P||_(M,E)}return{multiple:o,isGrouped:useMemo(()=>{const{tmNode:M}=e,{parent:E}=M;return E&&E.rawNode.type==="group"}),showCheckmark:m,nodeProps:y,isPending:w,isSelected:useMemo(()=>{const{value:M}=n,{value:E}=o;if(M===null)return!1;const P=e.tmNode.rawNode[g.value];if(E){const{value:T}=s;return T.has(P)}else return M===P}),labelField:f,renderLabel:u,renderOption:d,handleMouseMove:S,handleMouseEnter:k,handleClick:x}},render(){const{clsPrefix:e,tmNode:{rawNode:n},isSelected:r,isPending:o,isGrouped:s,showCheckmark:u,nodeProps:d,renderOption:f,renderLabel:g,handleClick:m,handleMouseEnter:y,handleMouseMove:v}=this,_=renderCheckMark(r,e),w=g?[g(n,r),u&&_]:[render$1(n[this.labelField],n,r),u&&_],x=d==null?void 0:d(n),k=h$1("div",Object.assign({},x,{class:[`${e}-base-select-option`,n.class,x==null?void 0:x.class,{[`${e}-base-select-option--disabled`]:n.disabled,[`${e}-base-select-option--selected`]:r,[`${e}-base-select-option--grouped`]:s,[`${e}-base-select-option--pending`]:o,[`${e}-base-select-option--show-checkmark`]:u}],style:[(x==null?void 0:x.style)||"",n.style||""],onClick:mergeEventHandlers([m,x==null?void 0:x.onClick]),onMouseenter:mergeEventHandlers([y,x==null?void 0:x.onMouseenter]),onMousemove:mergeEventHandlers([v,x==null?void 0:x.onMousemove])}),h$1("div",{class:`${e}-base-select-option__content`},w));return n.render?n.render({node:k,option:n,selected:r}):f?f({node:k,option:n,selected:r}):k}}),NSelectGroupHeader=defineComponent({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:n,labelFieldRef:r,nodePropsRef:o}=inject(internalSelectionMenuInjectionKey);return{labelField:r,nodeProps:o,renderLabel:e,renderOption:n}},render(){const{clsPrefix:e,renderLabel:n,renderOption:r,nodeProps:o,tmNode:{rawNode:s}}=this,u=o==null?void 0:o(s),d=n?n(s,!1):render$1(s[this.labelField],s,!1),f=h$1("div",Object.assign({},u,{class:[`${e}-base-select-group-header`,u==null?void 0:u.class]}),d);return s.render?s.render({node:f,option:s}):r?r({node:f,option:s,selected:!1}):f}}),{cubicBezierEaseIn:cubicBezierEaseIn$1,cubicBezierEaseOut:cubicBezierEaseOut$1}=commonVariables$7;function fadeInScaleUpTransition({transformOrigin:e="inherit",duration:n=".2s",enterScale:r=".9",originalTransform:o="",originalTransition:s=""}={}){return[c$1("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${n} ${cubicBezierEaseIn$1}, transform ${n} ${cubicBezierEaseIn$1} ${s&&`,${s}`}`}),c$1("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${n} ${cubicBezierEaseOut$1}, transform ${n} ${cubicBezierEaseOut$1} ${s&&`,${s}`}`}),c$1("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${o} scale(${r})`}),c$1("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${o} scale(1)`})]}const style$k=cB("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[cB("scrollbar",`
 max-height: var(--n-height);
 `),cB("virtual-list",`
 max-height: var(--n-height);
 `),cB("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[cE("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),cB("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),cB("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),cE("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),cE("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),cE("header",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),cE("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),cB("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),cB("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[cM("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),c$1("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),c$1("&:active",`
 color: var(--n-option-text-color-pressed);
 `),cM("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),cM("pending",[c$1("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),cM("selected",`
 color: var(--n-option-text-color-active);
 `,[c$1("&::before",`
 background-color: var(--n-option-color-active);
 `),cM("pending",[c$1("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 `,[cNotM("selected",`
 color: var(--n-option-text-color-disabled);
 `),cM("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),cE("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[fadeInScaleUpTransition({enterScale:"0.5"})])])]),NInternalSelectMenu=defineComponent({name:"InternalSelectMenu",props:Object.assign(Object.assign({},useTheme.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:n,mergedRtlRef:r}=useConfig(e),o=useRtl("InternalSelectMenu",r,n),s=useTheme("InternalSelectMenu","-internal-select-menu",style$k,internalSelectMenuLight$1,e,toRef(e,"clsPrefix")),u=ref(null),d=ref(null),f=ref(null),g=computed(()=>e.treeMate.getFlattenedNodes()),m=computed(()=>createIndexGetter(g.value)),y=ref(null);function v(){const{treeMate:fe}=e;let Se=null;const{value:Pe}=e;Pe===null?Se=fe.getFirstAvailableNode():(e.multiple?Se=fe.getNode((Pe||[])[(Pe||[]).length-1]):Se=fe.getNode(Pe),(!Se||Se.disabled)&&(Se=fe.getFirstAvailableNode())),le(Se||null)}function _(){const{value:fe}=y;fe&&!e.treeMate.getNode(fe.key)&&(y.value=null)}let w;watch(()=>e.show,fe=>{fe?w=watch(()=>e.treeMate,()=>{e.resetMenuOnOptionsChange?(e.autoPending?v():_(),nextTick(J)):_()},{immediate:!0}):w==null||w()},{immediate:!0}),onBeforeUnmount(()=>{w==null||w()});const x=computed(()=>depx(s.value.self[createKey("optionHeight",e.size)])),k=computed(()=>getMargin(s.value.self[createKey("padding",e.size)])),S=computed(()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set),M=computed(()=>{const fe=g.value;return fe&&fe.length===0});function E(fe){const{onToggle:Se}=e;Se&&Se(fe)}function P(fe){const{onScroll:Se}=e;Se&&Se(fe)}function T(fe){var Se;(Se=f.value)===null||Se===void 0||Se.sync(),P(fe)}function D(){var fe;(fe=f.value)===null||fe===void 0||fe.sync()}function F(){const{value:fe}=y;return fe||null}function I(fe,Se){Se.disabled||le(Se,!1)}function N(fe,Se){Se.disabled||E(Se)}function q(fe){var Se;happensIn(fe,"action")||(Se=e.onKeyup)===null||Se===void 0||Se.call(e,fe)}function Y(fe){var Se;happensIn(fe,"action")||(Se=e.onKeydown)===null||Se===void 0||Se.call(e,fe)}function Z(fe){var Se;(Se=e.onMousedown)===null||Se===void 0||Se.call(e,fe),!e.focusable&&fe.preventDefault()}function j(){const{value:fe}=y;fe&&le(fe.getNext({loop:!0}),!0)}function ne(){const{value:fe}=y;fe&&le(fe.getPrev({loop:!0}),!0)}function le(fe,Se=!1){y.value=fe,Se&&J()}function J(){var fe,Se;const Pe=y.value;if(!Pe)return;const $e=m.value(Pe.key);$e!==null&&(e.virtualScroll?(fe=d.value)===null||fe===void 0||fe.scrollTo({index:$e}):(Se=f.value)===null||Se===void 0||Se.scrollTo({index:$e,elSize:x.value}))}function O(fe){var Se,Pe;!((Se=u.value)===null||Se===void 0)&&Se.contains(fe.target)&&((Pe=e.onFocus)===null||Pe===void 0||Pe.call(e,fe))}function U(fe){var Se,Pe;!((Se=u.value)===null||Se===void 0)&&Se.contains(fe.relatedTarget)||(Pe=e.onBlur)===null||Pe===void 0||Pe.call(e,fe)}provide(internalSelectionMenuInjectionKey,{handleOptionMouseEnter:I,handleOptionClick:N,valueSetRef:S,pendingTmNodeRef:y,nodePropsRef:toRef(e,"nodeProps"),showCheckmarkRef:toRef(e,"showCheckmark"),multipleRef:toRef(e,"multiple"),valueRef:toRef(e,"value"),renderLabelRef:toRef(e,"renderLabel"),renderOptionRef:toRef(e,"renderOption"),labelFieldRef:toRef(e,"labelField"),valueFieldRef:toRef(e,"valueField")}),provide(internalSelectionMenuBodyInjectionKey,u),onMounted(()=>{const{value:fe}=f;fe&&fe.sync()});const W=computed(()=>{const{size:fe}=e,{common:{cubicBezierEaseInOut:Se},self:{height:Pe,borderRadius:$e,color:Ie,groupHeaderTextColor:Ne,actionDividerColor:Be,optionTextColorPressed:be,optionTextColor:Ve,optionTextColorDisabled:De,optionTextColorActive:ve,optionOpacityDisabled:ye,optionCheckColor:we,actionTextColor:ke,optionColorPending:Me,optionColorActive:Le,loadingColor:Fe,loadingSize:ze,optionColorActivePending:te,[createKey("optionFontSize",fe)]:oe,[createKey("optionHeight",fe)]:_e,[createKey("optionPadding",fe)]:Ce}}=s.value;return{"--n-height":Pe,"--n-action-divider-color":Be,"--n-action-text-color":ke,"--n-bezier":Se,"--n-border-radius":$e,"--n-color":Ie,"--n-option-font-size":oe,"--n-group-header-text-color":Ne,"--n-option-check-color":we,"--n-option-color-pending":Me,"--n-option-color-active":Le,"--n-option-color-active-pending":te,"--n-option-height":_e,"--n-option-opacity-disabled":ye,"--n-option-text-color":Ve,"--n-option-text-color-active":ve,"--n-option-text-color-disabled":De,"--n-option-text-color-pressed":be,"--n-option-padding":Ce,"--n-option-padding-left":getMargin(Ce,"left"),"--n-option-padding-right":getMargin(Ce,"right"),"--n-loading-color":Fe,"--n-loading-size":ze}}),{inlineThemeDisabled:H}=e,X=H?useThemeClass("internal-select-menu",computed(()=>e.size[0]),W,e):void 0,Q={selfRef:u,next:j,prev:ne,getPendingTmNode:F};return useOnResize(u,e.onResize),Object.assign({mergedTheme:s,mergedClsPrefix:n,rtlEnabled:o,virtualListRef:d,scrollbarRef:f,itemSize:x,padding:k,flattenedNodes:g,empty:M,virtualListContainer(){const{value:fe}=d;return fe==null?void 0:fe.listElRef},virtualListContent(){const{value:fe}=d;return fe==null?void 0:fe.itemsElRef},doScroll:P,handleFocusin:O,handleFocusout:U,handleKeyUp:q,handleKeyDown:Y,handleMouseDown:Z,handleVirtualListResize:D,handleVirtualListScroll:T,cssVars:H?void 0:W,themeClass:X==null?void 0:X.themeClass,onRender:X==null?void 0:X.onRender},Q)},render(){const{$slots:e,virtualScroll:n,clsPrefix:r,mergedTheme:o,themeClass:s,onRender:u}=this;return u==null||u(),h$1("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${r}-base-select-menu`,this.rtlEnabled&&`${r}-base-select-menu--rtl`,s,this.multiple&&`${r}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},resolveWrappedSlot(e.header,d=>d&&h$1("div",{class:`${r}-base-select-menu__header`,"data-header":!0,key:"header"},d)),this.loading?h$1("div",{class:`${r}-base-select-menu__loading`},h$1(NBaseLoading,{clsPrefix:r,strokeWidth:20})):this.empty?h$1("div",{class:`${r}-base-select-menu__empty`,"data-empty":!0},resolveSlot(e.empty,()=>[h$1(NEmpty,{theme:o.peers.Empty,themeOverrides:o.peerOverrides.Empty,size:this.size})])):h$1(NScrollbar,{ref:"scrollbarRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,scrollable:this.scrollable,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,onScroll:n?void 0:this.doScroll},{default:()=>n?h$1(VVirtualList,{ref:"virtualListRef",class:`${r}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:d})=>d.isGroup?h$1(NSelectGroupHeader,{key:d.key,clsPrefix:r,tmNode:d}):d.ignored?null:h$1(NSelectOption,{clsPrefix:r,key:d.key,tmNode:d})}):h$1("div",{class:`${r}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(d=>d.isGroup?h$1(NSelectGroupHeader,{key:d.key,clsPrefix:r,tmNode:d}):h$1(NSelectOption,{clsPrefix:r,key:d.key,tmNode:d})))}),resolveWrappedSlot(e.action,d=>d&&[h$1("div",{class:`${r}-base-select-menu__action`,"data-action":!0,key:"action"},d),h$1(FocusDetector,{onFocus:this.onTabOut,key:"focus-detector"})]))}}),style$j=cB("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),NBaseWave=defineComponent({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(e){useStyle("-base-wave",style$j,toRef(e,"clsPrefix"));const n=ref(null),r=ref(!1);let o=null;return onBeforeUnmount(()=>{o!==null&&window.clearTimeout(o)}),{active:r,selfRef:n,play(){o!==null&&(window.clearTimeout(o),r.value=!1,o=null),nextTick(()=>{var s;(s=n.value)===null||s===void 0||s.offsetHeight,r.value=!0,o=window.setTimeout(()=>{r.value=!1,o=null},1e3)})}}},render(){const{clsPrefix:e}=this;return h$1("div",{ref:"selfRef","aria-hidden":!0,class:[`${e}-base-wave`,this.active&&`${e}-base-wave--active`]})}}),commonVariables$5={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};function self$h(e){const{boxShadow2:n,popoverColor:r,textColor2:o,borderRadius:s,fontSize:u,dividerColor:d}=e;return Object.assign(Object.assign({},commonVariables$5),{fontSize:u,borderRadius:s,color:r,dividerColor:d,textColor:o,boxShadow:n})}const popoverLight={name:"Popover",common:commonLight,self:self$h},popoverLight$1=popoverLight,oppositePlacement={top:"bottom",bottom:"top",left:"right",right:"left"},arrowSize="var(--n-arrow-height) * 1.414",style$i=c$1([cB("popover",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 position: relative;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 box-shadow: var(--n-box-shadow);
 word-break: break-word;
 `,[c$1(">",[cB("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),cNotM("raw",`
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 `,[cNotM("scrollable",[cNotM("show-header-or-footer","padding: var(--n-padding);")])]),cE("header",`
 padding: var(--n-padding);
 border-bottom: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),cE("footer",`
 padding: var(--n-padding);
 border-top: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),cM("scrollable, show-header-or-footer",[cE("content",`
 padding: var(--n-padding);
 `)])]),cB("popover-shared",`
 transform-origin: inherit;
 `,[cB("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[cB("popover-arrow",`
 transition: background-color .3s var(--n-bezier);
 position: absolute;
 display: block;
 width: calc(${arrowSize});
 height: calc(${arrowSize});
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--n-color);
 pointer-events: all;
 `)]),c$1("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),c$1("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),c$1("&.popover-transition-enter-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-out),
 transform .15s var(--n-bezier-ease-out);
 `),c$1("&.popover-transition-leave-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-in),
 transform .15s var(--n-bezier-ease-in);
 `)]),placementStyle("top-start",`
 top: calc(${arrowSize} / -2);
 left: calc(${getArrowOffset("top-start")} - var(--v-offset-left));
 `),placementStyle("top",`
 top: calc(${arrowSize} / -2);
 transform: translateX(calc(${arrowSize} / -2)) rotate(45deg);
 left: 50%;
 `),placementStyle("top-end",`
 top: calc(${arrowSize} / -2);
 right: calc(${getArrowOffset("top-end")} + var(--v-offset-left));
 `),placementStyle("bottom-start",`
 bottom: calc(${arrowSize} / -2);
 left: calc(${getArrowOffset("bottom-start")} - var(--v-offset-left));
 `),placementStyle("bottom",`
 bottom: calc(${arrowSize} / -2);
 transform: translateX(calc(${arrowSize} / -2)) rotate(45deg);
 left: 50%;
 `),placementStyle("bottom-end",`
 bottom: calc(${arrowSize} / -2);
 right: calc(${getArrowOffset("bottom-end")} + var(--v-offset-left));
 `),placementStyle("left-start",`
 left: calc(${arrowSize} / -2);
 top: calc(${getArrowOffset("left-start")} - var(--v-offset-top));
 `),placementStyle("left",`
 left: calc(${arrowSize} / -2);
 transform: translateY(calc(${arrowSize} / -2)) rotate(45deg);
 top: 50%;
 `),placementStyle("left-end",`
 left: calc(${arrowSize} / -2);
 bottom: calc(${getArrowOffset("left-end")} + var(--v-offset-top));
 `),placementStyle("right-start",`
 right: calc(${arrowSize} / -2);
 top: calc(${getArrowOffset("right-start")} - var(--v-offset-top));
 `),placementStyle("right",`
 right: calc(${arrowSize} / -2);
 transform: translateY(calc(${arrowSize} / -2)) rotate(45deg);
 top: 50%;
 `),placementStyle("right-end",`
 right: calc(${arrowSize} / -2);
 bottom: calc(${getArrowOffset("right-end")} + var(--v-offset-top));
 `),...map({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},(e,n)=>{const r=["right","left"].includes(n),o=r?"width":"height";return e.map(s=>{const u=s.split("-")[1]==="end",f=`calc((${`var(--v-target-${o}, 0px)`} - ${arrowSize}) / 2)`,g=getArrowOffset(s);return c$1(`[v-placement="${s}"] >`,[cB("popover-shared",[cM("center-arrow",[cB("popover-arrow",`${n}: calc(max(${f}, ${g}) ${u?"+":"-"} var(--v-offset-${r?"left":"top"}));`)])])])})})]);function getArrowOffset(e){return["top","bottom"].includes(e.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function placementStyle(e,n){const r=e.split("-")[0],o=["top","bottom"].includes(r)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return c$1(`[v-placement="${e}"] >`,[cB("popover-shared",`
 margin-${oppositePlacement[r]}: var(--n-space);
 `,[cM("show-arrow",`
 margin-${oppositePlacement[r]}: var(--n-space-arrow);
 `),cM("overlap",`
 margin: 0;
 `),cCB("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${r}: 100%;
 ${oppositePlacement[r]}: auto;
 ${o}
 `,[cB("popover-arrow",n)])])])}const popoverBodyProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number});function renderArrow({arrowClass:e,arrowStyle:n,arrowWrapperClass:r,arrowWrapperStyle:o,clsPrefix:s}){return h$1("div",{key:"__popover-arrow__",style:o,class:[`${s}-popover-arrow-wrapper`,r]},h$1("div",{class:[`${s}-popover-arrow`,e],style:n}))}const NPopoverBody=defineComponent({name:"PopoverBody",inheritAttrs:!1,props:popoverBodyProps,setup(e,{slots:n,attrs:r}){const{namespaceRef:o,mergedClsPrefixRef:s,inlineThemeDisabled:u}=useConfig(e),d=useTheme("Popover","-popover",style$i,popoverLight$1,e,s),f=ref(null),g=inject("NPopover"),m=ref(null),y=ref(e.show),v=ref(!1);watchEffect(()=>{const{show:I}=e;I&&!isJsdom()&&!e.internalDeactivateImmediately&&(v.value=!0)});const _=computed(()=>{const{trigger:I,onClickoutside:N}=e,q=[],{positionManuallyRef:{value:Y}}=g;return Y||(I==="click"&&!N&&q.push([clickoutside$1,T,void 0,{capture:!0}]),I==="hover"&&q.push([mousemoveoutside$1,P])),N&&q.push([clickoutside$1,T,void 0,{capture:!0}]),(e.displayDirective==="show"||e.animated&&v.value)&&q.push([vShow,e.show]),q}),w=computed(()=>{const{common:{cubicBezierEaseInOut:I,cubicBezierEaseIn:N,cubicBezierEaseOut:q},self:{space:Y,spaceArrow:Z,padding:j,fontSize:ne,textColor:le,dividerColor:J,color:O,boxShadow:U,borderRadius:W,arrowHeight:H,arrowOffset:X,arrowOffsetVertical:Q}}=d.value;return{"--n-box-shadow":U,"--n-bezier":I,"--n-bezier-ease-in":N,"--n-bezier-ease-out":q,"--n-font-size":ne,"--n-text-color":le,"--n-color":O,"--n-divider-color":J,"--n-border-radius":W,"--n-arrow-height":H,"--n-arrow-offset":X,"--n-arrow-offset-vertical":Q,"--n-padding":j,"--n-space":Y,"--n-space-arrow":Z}}),x=computed(()=>{const I=e.width==="trigger"?void 0:formatLength(e.width),N=[];I&&N.push({width:I});const{maxWidth:q,minWidth:Y}=e;return q&&N.push({maxWidth:formatLength(q)}),Y&&N.push({maxWidth:formatLength(Y)}),u||N.push(w.value),N}),k=u?useThemeClass("popover",void 0,w,e):void 0;g.setBodyInstance({syncPosition:S}),onBeforeUnmount(()=>{g.setBodyInstance(null)}),watch(toRef(e,"show"),I=>{e.animated||(I?y.value=!0:y.value=!1)});function S(){var I;(I=f.value)===null||I===void 0||I.syncPosition()}function M(I){e.trigger==="hover"&&e.keepAliveOnHover&&e.show&&g.handleMouseEnter(I)}function E(I){e.trigger==="hover"&&e.keepAliveOnHover&&g.handleMouseLeave(I)}function P(I){e.trigger==="hover"&&!D().contains(getPreciseEventTarget(I))&&g.handleMouseMoveOutside(I)}function T(I){(e.trigger==="click"&&!D().contains(getPreciseEventTarget(I))||e.onClickoutside)&&g.handleClickOutside(I)}function D(){return g.getTriggerElement()}provide(popoverBodyInjectionKey,m),provide(drawerBodyInjectionKey,null),provide(modalBodyInjectionKey,null);function F(){if(k==null||k.onRender(),!(e.displayDirective==="show"||e.show||e.animated&&v.value))return null;let N;const q=g.internalRenderBodyRef.value,{value:Y}=s;if(q)N=q([`${Y}-popover-shared`,k==null?void 0:k.themeClass.value,e.overlap&&`${Y}-popover-shared--overlap`,e.showArrow&&`${Y}-popover-shared--show-arrow`,e.arrowPointToCenter&&`${Y}-popover-shared--center-arrow`],m,x.value,M,E);else{const{value:Z}=g.extraClassRef,{internalTrapFocus:j}=e,ne=!isSlotEmpty(n.header)||!isSlotEmpty(n.footer),le=()=>{var J,O;const U=ne?h$1(Fragment,null,resolveWrappedSlot(n.header,X=>X?h$1("div",{class:[`${Y}-popover__header`,e.headerClass],style:e.headerStyle},X):null),resolveWrappedSlot(n.default,X=>X?h$1("div",{class:[`${Y}-popover__content`,e.contentClass],style:e.contentStyle},n):null),resolveWrappedSlot(n.footer,X=>X?h$1("div",{class:[`${Y}-popover__footer`,e.footerClass],style:e.footerStyle},X):null)):e.scrollable?(J=n.default)===null||J===void 0?void 0:J.call(n):h$1("div",{class:[`${Y}-popover__content`,e.contentClass],style:e.contentStyle},n),W=e.scrollable?h$1(XScrollbar,{contentClass:ne?void 0:`${Y}-popover__content ${(O=e.contentClass)!==null&&O!==void 0?O:""}`,contentStyle:ne?void 0:e.contentStyle},{default:()=>U}):U,H=e.showArrow?renderArrow({arrowClass:e.arrowClass,arrowStyle:e.arrowStyle,arrowWrapperClass:e.arrowWrapperClass,arrowWrapperStyle:e.arrowWrapperStyle,clsPrefix:Y}):null;return[W,H]};N=h$1("div",mergeProps({class:[`${Y}-popover`,`${Y}-popover-shared`,k==null?void 0:k.themeClass.value,Z.map(J=>`${Y}-${J}`),{[`${Y}-popover--scrollable`]:e.scrollable,[`${Y}-popover--show-header-or-footer`]:ne,[`${Y}-popover--raw`]:e.raw,[`${Y}-popover-shared--overlap`]:e.overlap,[`${Y}-popover-shared--show-arrow`]:e.showArrow,[`${Y}-popover-shared--center-arrow`]:e.arrowPointToCenter}],ref:m,style:x.value,onKeydown:g.handleKeydown,onMouseenter:M,onMouseleave:E},r),j?h$1(FocusTrap,{active:e.show,autoFocus:!0},{default:le}):le())}return withDirectives(N,_.value)}return{displayed:v,namespace:o,isMounted:g.isMountedRef,zIndex:g.zIndexRef,followerRef:f,adjustedTo:useAdjustedTo(e),followerEnabled:y,renderContentNode:F}},render(){return h$1(VFollower,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey},{default:()=>this.animated?h$1(Transition,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var e;(e=this.internalOnAfterLeave)===null||e===void 0||e.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),bodyPropKeys=Object.keys(popoverBodyProps),triggerEventMap={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function appendEvents(e,n,r){triggerEventMap[n].forEach(o=>{e.props?e.props=Object.assign({},e.props):e.props={};const s=e.props[o],u=r[o];s?e.props[o]=(...d)=>{s(...d),u(...d)}:e.props[o]=u})}const popoverBaseProps={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:useAdjustedTo.propTo,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},popoverProps=Object.assign(Object.assign(Object.assign({},useTheme.props),popoverBaseProps),{internalOnAfterLeave:Function,internalRenderBody:Function}),NPopover=defineComponent({name:"Popover",inheritAttrs:!1,props:popoverProps,__popover__:!0,setup(e){const n=isMounted(),r=ref(null),o=computed(()=>e.show),s=ref(e.defaultShow),u=useMergedState(o,s),d=useMemo(()=>e.disabled?!1:u.value),f=()=>{if(e.disabled)return!0;const{getDisabled:J}=e;return!!(J!=null&&J())},g=()=>f()?!1:u.value,m=useCompitable(e,["arrow","showArrow"]),y=computed(()=>e.overlap?!1:m.value);let v=null;const _=ref(null),w=ref(null),x=useMemo(()=>e.x!==void 0&&e.y!==void 0);function k(J){const{"onUpdate:show":O,onUpdateShow:U,onShow:W,onHide:H}=e;s.value=J,O&&call(O,J),U&&call(U,J),J&&W&&call(W,!0),J&&H&&call(H,!1)}function S(){v&&v.syncPosition()}function M(){const{value:J}=_;J&&(window.clearTimeout(J),_.value=null)}function E(){const{value:J}=w;J&&(window.clearTimeout(J),w.value=null)}function P(){const J=f();if(e.trigger==="focus"&&!J){if(g())return;k(!0)}}function T(){const J=f();if(e.trigger==="focus"&&!J){if(!g())return;k(!1)}}function D(){const J=f();if(e.trigger==="hover"&&!J){if(E(),_.value!==null||g())return;const O=()=>{k(!0),_.value=null},{delay:U}=e;U===0?O():_.value=window.setTimeout(O,U)}}function F(){const J=f();if(e.trigger==="hover"&&!J){if(M(),w.value!==null||!g())return;const O=()=>{k(!1),w.value=null},{duration:U}=e;U===0?O():w.value=window.setTimeout(O,U)}}function I(){F()}function N(J){var O;!g()||(e.trigger==="click"&&(M(),E(),k(!1)),(O=e.onClickoutside)===null||O===void 0||O.call(e,J))}function q(){if(e.trigger==="click"&&!f()){M(),E();const J=!g();k(J)}}function Y(J){!e.internalTrapFocus||J.key==="Escape"&&(M(),E(),k(!1))}function Z(J){s.value=J}function j(){var J;return(J=r.value)===null||J===void 0?void 0:J.targetRef}function ne(J){v=J}return provide("NPopover",{getTriggerElement:j,handleKeydown:Y,handleMouseEnter:D,handleMouseLeave:F,handleClickOutside:N,handleMouseMoveOutside:I,setBodyInstance:ne,positionManuallyRef:x,isMountedRef:n,zIndexRef:toRef(e,"zIndex"),extraClassRef:toRef(e,"internalExtraClass"),internalRenderBodyRef:toRef(e,"internalRenderBody")}),watchEffect(()=>{u.value&&f()&&k(!1)}),{binderInstRef:r,positionManually:x,mergedShowConsideringDisabledProp:d,uncontrolledShow:s,mergedShowArrow:y,getMergedShow:g,setShow:Z,handleClick:q,handleMouseEnter:D,handleMouseLeave:F,handleFocus:P,handleBlur:T,syncPosition:S}},render(){var e;const{positionManually:n,$slots:r}=this;let o,s=!1;if(!n&&(r.activator?o=getFirstSlotVNode(r,"activator"):o=getFirstSlotVNode(r,"trigger"),o)){o=cloneVNode(o),o=o.type===Text$2?h$1("span",[o]):o;const u={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(!((e=o.type)===null||e===void 0)&&e.__popover__)s=!0,o.props||(o.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),o.props.internalSyncTargetWithParent=!0,o.props.internalInheritedEventHandlers?o.props.internalInheritedEventHandlers=[u,...o.props.internalInheritedEventHandlers]:o.props.internalInheritedEventHandlers=[u];else{const{internalInheritedEventHandlers:d}=this,f=[u,...d],g={onBlur:m=>{f.forEach(y=>{y.onBlur(m)})},onFocus:m=>{f.forEach(y=>{y.onFocus(m)})},onClick:m=>{f.forEach(y=>{y.onClick(m)})},onMouseenter:m=>{f.forEach(y=>{y.onMouseenter(m)})},onMouseleave:m=>{f.forEach(y=>{y.onMouseleave(m)})}};appendEvents(o,d?"nested":n?"manual":this.trigger,g)}}return h$1(VBinder,{ref:"binderInstRef",syncTarget:!s,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const u=this.getMergedShow();return[this.internalTrapFocus&&u?withDirectives(h$1("div",{style:{position:"fixed",inset:0}}),[[zindexable$1,{enabled:u,zIndex:this.zIndex}]]):null,n?null:h$1(VTarget,null,{default:()=>o}),h$1(NPopoverBody,keep(this.$props,bodyPropKeys,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:u})),{default:()=>{var d,f;return(f=(d=this.$slots).default)===null||f===void 0?void 0:f.call(d)},header:()=>{var d,f;return(f=(d=this.$slots).header)===null||f===void 0?void 0:f.call(d)},footer:()=>{var d,f;return(f=(d=this.$slots).footer)===null||f===void 0?void 0:f.call(d)}})]}})}}),commonVariables$4={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"};function self$g(e){const{textColor2:n,primaryColorHover:r,primaryColorPressed:o,primaryColor:s,infoColor:u,successColor:d,warningColor:f,errorColor:g,baseColor:m,borderColor:y,opacityDisabled:v,tagColor:_,closeIconColor:w,closeIconColorHover:x,closeIconColorPressed:k,borderRadiusSmall:S,fontSizeMini:M,fontSizeTiny:E,fontSizeSmall:P,fontSizeMedium:T,heightMini:D,heightTiny:F,heightSmall:I,heightMedium:N,closeColorHover:q,closeColorPressed:Y,buttonColor2Hover:Z,buttonColor2Pressed:j,fontWeightStrong:ne}=e;return Object.assign(Object.assign({},commonVariables$4),{closeBorderRadius:S,heightTiny:D,heightSmall:F,heightMedium:I,heightLarge:N,borderRadius:S,opacityDisabled:v,fontSizeTiny:M,fontSizeSmall:E,fontSizeMedium:P,fontSizeLarge:T,fontWeightStrong:ne,textColorCheckable:n,textColorHoverCheckable:n,textColorPressedCheckable:n,textColorChecked:m,colorCheckable:"#0000",colorHoverCheckable:Z,colorPressedCheckable:j,colorChecked:s,colorCheckedHover:r,colorCheckedPressed:o,border:`1px solid ${y}`,textColor:n,color:_,colorBordered:"rgb(250, 250, 252)",closeIconColor:w,closeIconColorHover:x,closeIconColorPressed:k,closeColorHover:q,closeColorPressed:Y,borderPrimary:`1px solid ${changeColor(s,{alpha:.3})}`,textColorPrimary:s,colorPrimary:changeColor(s,{alpha:.12}),colorBorderedPrimary:changeColor(s,{alpha:.1}),closeIconColorPrimary:s,closeIconColorHoverPrimary:s,closeIconColorPressedPrimary:s,closeColorHoverPrimary:changeColor(s,{alpha:.12}),closeColorPressedPrimary:changeColor(s,{alpha:.18}),borderInfo:`1px solid ${changeColor(u,{alpha:.3})}`,textColorInfo:u,colorInfo:changeColor(u,{alpha:.12}),colorBorderedInfo:changeColor(u,{alpha:.1}),closeIconColorInfo:u,closeIconColorHoverInfo:u,closeIconColorPressedInfo:u,closeColorHoverInfo:changeColor(u,{alpha:.12}),closeColorPressedInfo:changeColor(u,{alpha:.18}),borderSuccess:`1px solid ${changeColor(d,{alpha:.3})}`,textColorSuccess:d,colorSuccess:changeColor(d,{alpha:.12}),colorBorderedSuccess:changeColor(d,{alpha:.1}),closeIconColorSuccess:d,closeIconColorHoverSuccess:d,closeIconColorPressedSuccess:d,closeColorHoverSuccess:changeColor(d,{alpha:.12}),closeColorPressedSuccess:changeColor(d,{alpha:.18}),borderWarning:`1px solid ${changeColor(f,{alpha:.35})}`,textColorWarning:f,colorWarning:changeColor(f,{alpha:.15}),colorBorderedWarning:changeColor(f,{alpha:.12}),closeIconColorWarning:f,closeIconColorHoverWarning:f,closeIconColorPressedWarning:f,closeColorHoverWarning:changeColor(f,{alpha:.12}),closeColorPressedWarning:changeColor(f,{alpha:.18}),borderError:`1px solid ${changeColor(g,{alpha:.23})}`,textColorError:g,colorError:changeColor(g,{alpha:.1}),colorBorderedError:changeColor(g,{alpha:.08}),closeIconColorError:g,closeIconColorHoverError:g,closeIconColorPressedError:g,closeColorHoverError:changeColor(g,{alpha:.12}),closeColorPressedError:changeColor(g,{alpha:.18})})}const tagLight={name:"Tag",common:commonLight,self:self$g},tagLight$1=tagLight,commonProps={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},style$h=cB("tag",`
 --n-close-margin: var(--n-close-margin-top) var(--n-close-margin-right) var(--n-close-margin-bottom) var(--n-close-margin-left);
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`,[cM("strong",`
 font-weight: var(--n-font-weight-strong);
 `),cE("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `),cE("icon",`
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `),cE("avatar",`
 display: flex;
 margin: 0 6px 0 0;
 `),cE("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),cM("round",`
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `,[cE("icon",`
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `),cE("avatar",`
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `),cM("closable",`
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]),cM("icon, avatar",[cM("round",`
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]),cM("disabled",`
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `),cM("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `,[cNotM("disabled",[c$1("&:hover","background-color: var(--n-color-hover-checkable);",[cNotM("checked","color: var(--n-text-color-hover-checkable);")]),c$1("&:active","background-color: var(--n-color-pressed-checkable);",[cNotM("checked","color: var(--n-text-color-pressed-checkable);")])]),cM("checked",`
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `,[cNotM("disabled",[c$1("&:hover","background-color: var(--n-color-checked-hover);"),c$1("&:active","background-color: var(--n-color-checked-pressed);")])])])]),tagProps=Object.assign(Object.assign(Object.assign({},useTheme.props),commonProps),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),tagInjectionKey="n-tag",NTag=defineComponent({name:"Tag",props:tagProps,setup(e){const n=ref(null),{mergedBorderedRef:r,mergedClsPrefixRef:o,inlineThemeDisabled:s,mergedRtlRef:u}=useConfig(e),d=useTheme("Tag","-tag",style$h,tagLight$1,e,o);provide(tagInjectionKey,{roundRef:toRef(e,"round")});function f(){if(!e.disabled&&e.checkable){const{checked:w,onCheckedChange:x,onUpdateChecked:k,"onUpdate:checked":S}=e;k&&k(!w),S&&S(!w),x&&x(!w)}}function g(w){if(e.triggerClickOnClose||w.stopPropagation(),!e.disabled){const{onClose:x}=e;x&&call(x,w)}}const m={setTextContent(w){const{value:x}=n;x&&(x.textContent=w)}},y=useRtl("Tag",u,o),v=computed(()=>{const{type:w,size:x,color:{color:k,textColor:S}={}}=e,{common:{cubicBezierEaseInOut:M},self:{padding:E,closeMargin:P,borderRadius:T,opacityDisabled:D,textColorCheckable:F,textColorHoverCheckable:I,textColorPressedCheckable:N,textColorChecked:q,colorCheckable:Y,colorHoverCheckable:Z,colorPressedCheckable:j,colorChecked:ne,colorCheckedHover:le,colorCheckedPressed:J,closeBorderRadius:O,fontWeightStrong:U,[createKey("colorBordered",w)]:W,[createKey("closeSize",x)]:H,[createKey("closeIconSize",x)]:X,[createKey("fontSize",x)]:Q,[createKey("height",x)]:fe,[createKey("color",w)]:Se,[createKey("textColor",w)]:Pe,[createKey("border",w)]:$e,[createKey("closeIconColor",w)]:Ie,[createKey("closeIconColorHover",w)]:Ne,[createKey("closeIconColorPressed",w)]:Be,[createKey("closeColorHover",w)]:be,[createKey("closeColorPressed",w)]:Ve}}=d.value,De=getMargin(P);return{"--n-font-weight-strong":U,"--n-avatar-size-override":`calc(${fe} - 8px)`,"--n-bezier":M,"--n-border-radius":T,"--n-border":$e,"--n-close-icon-size":X,"--n-close-color-pressed":Ve,"--n-close-color-hover":be,"--n-close-border-radius":O,"--n-close-icon-color":Ie,"--n-close-icon-color-hover":Ne,"--n-close-icon-color-pressed":Be,"--n-close-icon-color-disabled":Ie,"--n-close-margin-top":De.top,"--n-close-margin-right":De.right,"--n-close-margin-bottom":De.bottom,"--n-close-margin-left":De.left,"--n-close-size":H,"--n-color":k||(r.value?W:Se),"--n-color-checkable":Y,"--n-color-checked":ne,"--n-color-checked-hover":le,"--n-color-checked-pressed":J,"--n-color-hover-checkable":Z,"--n-color-pressed-checkable":j,"--n-font-size":Q,"--n-height":fe,"--n-opacity-disabled":D,"--n-padding":E,"--n-text-color":S||Pe,"--n-text-color-checkable":F,"--n-text-color-checked":q,"--n-text-color-hover-checkable":I,"--n-text-color-pressed-checkable":N}}),_=s?useThemeClass("tag",computed(()=>{let w="";const{type:x,size:k,color:{color:S,textColor:M}={}}=e;return w+=x[0],w+=k[0],S&&(w+=`a${color2Class(S)}`),M&&(w+=`b${color2Class(M)}`),r.value&&(w+="c"),w}),v,e):void 0;return Object.assign(Object.assign({},m),{rtlEnabled:y,mergedClsPrefix:o,contentRef:n,mergedBordered:r,handleClick:f,handleCloseClick:g,cssVars:s?void 0:v,themeClass:_==null?void 0:_.themeClass,onRender:_==null?void 0:_.onRender})},render(){var e,n;const{mergedClsPrefix:r,rtlEnabled:o,closable:s,color:{borderColor:u}={},round:d,onRender:f,$slots:g}=this;f==null||f();const m=resolveWrappedSlot(g.avatar,v=>v&&h$1("div",{class:`${r}-tag__avatar`},v)),y=resolveWrappedSlot(g.icon,v=>v&&h$1("div",{class:`${r}-tag__icon`},v));return h$1("div",{class:[`${r}-tag`,this.themeClass,{[`${r}-tag--rtl`]:o,[`${r}-tag--strong`]:this.strong,[`${r}-tag--disabled`]:this.disabled,[`${r}-tag--checkable`]:this.checkable,[`${r}-tag--checked`]:this.checkable&&this.checked,[`${r}-tag--round`]:d,[`${r}-tag--avatar`]:m,[`${r}-tag--icon`]:y,[`${r}-tag--closable`]:s}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},y||m,h$1("span",{class:`${r}-tag__content`,ref:"contentRef"},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)),!this.checkable&&s?h$1(NBaseClose,{clsPrefix:r,class:`${r}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:d,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?h$1("div",{class:`${r}-tag__border`,style:{borderColor:u}}):null)}}),style$g=cB("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[c$1(">",[cE("clear",`
 font-size: var(--n-clear-size);
 height: 1em;
 width: 1em;
 cursor: pointer;
 color: var(--n-clear-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 `,[c$1("&:hover",`
 color: var(--n-clear-color-hover)!important;
 `),c$1("&:active",`
 color: var(--n-clear-color-pressed)!important;
 `)]),cE("placeholder",`
 display: flex;
 `),cE("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iconSwitchTransition({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),NBaseClear=defineComponent({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(e){return useStyle("-base-clear",style$g,toRef(e,"clsPrefix")),{handleMouseDown(n){n.preventDefault()}}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-base-clear`},h$1(NIconSwitchTransition,null,{default:()=>{var n,r;return this.show?h$1("div",{key:"dismiss",class:`${e}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},resolveSlot(this.$slots.icon,()=>[h$1(NBaseIcon,{clsPrefix:e},{default:()=>h$1(ClearIcon,null)})])):h$1("div",{key:"icon",class:`${e}-base-clear__placeholder`},(r=(n=this.$slots).placeholder)===null||r===void 0?void 0:r.call(n))}}))}}),NBaseSuffix=defineComponent({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(e,{slots:n}){return()=>{const{clsPrefix:r}=e;return h$1(NBaseLoading,{clsPrefix:r,class:`${r}-base-suffix`,strokeWidth:24,scale:.85,show:e.loading},{default:()=>e.showArrow?h$1(NBaseClear,{clsPrefix:r,show:e.showClear,onClear:e.onClear},{placeholder:()=>h$1(NBaseIcon,{clsPrefix:r,class:`${r}-base-suffix__arrow`},{default:()=>resolveSlot(n.default,()=>[h$1(ChevronDownIcon,null)])})}):null})}}}),commonVars$3={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"};function self$f(e){const{borderRadius:n,textColor2:r,textColorDisabled:o,inputColor:s,inputColorDisabled:u,primaryColor:d,primaryColorHover:f,warningColor:g,warningColorHover:m,errorColor:y,errorColorHover:v,borderColor:_,iconColor:w,iconColorDisabled:x,clearColor:k,clearColorHover:S,clearColorPressed:M,placeholderColor:E,placeholderColorDisabled:P,fontSizeTiny:T,fontSizeSmall:D,fontSizeMedium:F,fontSizeLarge:I,heightTiny:N,heightSmall:q,heightMedium:Y,heightLarge:Z}=e;return Object.assign(Object.assign({},commonVars$3),{fontSizeTiny:T,fontSizeSmall:D,fontSizeMedium:F,fontSizeLarge:I,heightTiny:N,heightSmall:q,heightMedium:Y,heightLarge:Z,borderRadius:n,textColor:r,textColorDisabled:o,placeholderColor:E,placeholderColorDisabled:P,color:s,colorDisabled:u,colorActive:s,border:`1px solid ${_}`,borderHover:`1px solid ${f}`,borderActive:`1px solid ${d}`,borderFocus:`1px solid ${f}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${changeColor(d,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${changeColor(d,{alpha:.2})}`,caretColor:d,arrowColor:w,arrowColorDisabled:x,loadingColor:d,borderWarning:`1px solid ${g}`,borderHoverWarning:`1px solid ${m}`,borderActiveWarning:`1px solid ${g}`,borderFocusWarning:`1px solid ${m}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${changeColor(g,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${changeColor(g,{alpha:.2})}`,colorActiveWarning:s,caretColorWarning:g,borderError:`1px solid ${y}`,borderHoverError:`1px solid ${v}`,borderActiveError:`1px solid ${y}`,borderFocusError:`1px solid ${v}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${changeColor(y,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${changeColor(y,{alpha:.2})}`,colorActiveError:s,caretColorError:y,clearColor:k,clearColorHover:S,clearColorPressed:M})}const internalSelectionLight={name:"InternalSelection",common:commonLight,peers:{Popover:popoverLight$1},self:self$f},internalSelectionLight$1=internalSelectionLight,style$f=c$1([cB("base-selection",`
 --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);
 --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[cB("base-loading",`
 color: var(--n-loading-color);
 `),cB("base-selection-tags","min-height: var(--n-height);"),cE("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),cE("state-border",`
 z-index: 1;
 border-color: #0000;
 `),cB("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[cE("arrow",`
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]),cB("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `,[cE("wrapper",`
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]),cB("base-selection-placeholder",`
 color: var(--n-placeholder-color);
 `,[cE("inner",`
 max-width: 100%;
 overflow: hidden;
 `)]),cB("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),cB("base-selection-label",`
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `,[cB("base-selection-input",`
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `,[cE("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),cE("render-label",`
 color: var(--n-text-color);
 `)]),cNotM("disabled",[c$1("&:hover",[cE("state-border",`
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]),cM("focus",[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]),cM("active",[cE("state-border",`
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `),cB("base-selection-label","background-color: var(--n-color-active);"),cB("base-selection-tags","background-color: var(--n-color-active);")])]),cM("disabled","cursor: not-allowed;",[cE("arrow",`
 color: var(--n-arrow-color-disabled);
 `),cB("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[cB("base-selection-input",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `),cE("render-label",`
 color: var(--n-text-color-disabled);
 `)]),cB("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `),cB("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]),cB("base-selection-input-tag",`
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[cE("input",`
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `),cE("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]),["warning","error"].map(e=>cM(`${e}-status`,[cE("state-border",`border: var(--n-border-${e});`),cNotM("disabled",[c$1("&:hover",[cE("state-border",`
 box-shadow: var(--n-box-shadow-hover-${e});
 border: var(--n-border-hover-${e});
 `)]),cM("active",[cE("state-border",`
 box-shadow: var(--n-box-shadow-active-${e});
 border: var(--n-border-active-${e});
 `),cB("base-selection-label",`background-color: var(--n-color-active-${e});`),cB("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),cM("focus",[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),cB("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `),cB("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[c$1("&:last-child","padding-right: 0;"),cB("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[cE("content",`
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]),NInternalSelection=defineComponent({name:"InternalSelection",props:Object.assign(Object.assign({},useTheme.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:n,mergedRtlRef:r}=useConfig(e),o=useRtl("InternalSelection",r,n),s=ref(null),u=ref(null),d=ref(null),f=ref(null),g=ref(null),m=ref(null),y=ref(null),v=ref(null),_=ref(null),w=ref(null),x=ref(!1),k=ref(!1),S=ref(!1),M=useTheme("InternalSelection","-internal-selection",style$f,internalSelectionLight$1,e,toRef(e,"clsPrefix")),E=computed(()=>e.clearable&&!e.disabled&&(S.value||e.active)),P=computed(()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):render$1(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder),T=computed(()=>{const Ee=e.selectedOption;if(!!Ee)return Ee[e.labelField]}),D=computed(()=>e.multiple?!!(Array.isArray(e.selectedOptions)&&e.selectedOptions.length):e.selectedOption!==null);function F(){var Ee;const{value:Te}=s;if(Te){const{value:Re}=u;Re&&(Re.style.width=`${Te.offsetWidth}px`,e.maxTagCount!=="responsive"&&((Ee=_.value)===null||Ee===void 0||Ee.sync({showAllItemsBeforeCalculate:!1})))}}function I(){const{value:Ee}=w;Ee&&(Ee.style.display="none")}function N(){const{value:Ee}=w;Ee&&(Ee.style.display="inline-block")}watch(toRef(e,"active"),Ee=>{Ee||I()}),watch(toRef(e,"pattern"),()=>{e.multiple&&nextTick(F)});function q(Ee){const{onFocus:Te}=e;Te&&Te(Ee)}function Y(Ee){const{onBlur:Te}=e;Te&&Te(Ee)}function Z(Ee){const{onDeleteOption:Te}=e;Te&&Te(Ee)}function j(Ee){const{onClear:Te}=e;Te&&Te(Ee)}function ne(Ee){const{onPatternInput:Te}=e;Te&&Te(Ee)}function le(Ee){var Te;(!Ee.relatedTarget||!(!((Te=d.value)===null||Te===void 0)&&Te.contains(Ee.relatedTarget)))&&q(Ee)}function J(Ee){var Te;!((Te=d.value)===null||Te===void 0)&&Te.contains(Ee.relatedTarget)||Y(Ee)}function O(Ee){j(Ee)}function U(){S.value=!0}function W(){S.value=!1}function H(Ee){!e.active||!e.filterable||Ee.target!==u.value&&Ee.preventDefault()}function X(Ee){Z(Ee)}const Q=ref(!1);function fe(Ee){if(Ee.key==="Backspace"&&!Q.value&&!e.pattern.length){const{selectedOptions:Te}=e;Te!=null&&Te.length&&X(Te[Te.length-1])}}let Se=null;function Pe(Ee){const{value:Te}=s;if(Te){const Re=Ee.target.value;Te.textContent=Re,F()}e.ignoreComposition&&Q.value?Se=Ee:ne(Ee)}function $e(){Q.value=!0}function Ie(){Q.value=!1,e.ignoreComposition&&ne(Se),Se=null}function Ne(Ee){var Te;k.value=!0,(Te=e.onPatternFocus)===null||Te===void 0||Te.call(e,Ee)}function Be(Ee){var Te;k.value=!1,(Te=e.onPatternBlur)===null||Te===void 0||Te.call(e,Ee)}function be(){var Ee,Te;if(e.filterable)k.value=!1,(Ee=m.value)===null||Ee===void 0||Ee.blur(),(Te=u.value)===null||Te===void 0||Te.blur();else if(e.multiple){const{value:Re}=f;Re==null||Re.blur()}else{const{value:Re}=g;Re==null||Re.blur()}}function Ve(){var Ee,Te,Re;e.filterable?(k.value=!1,(Ee=m.value)===null||Ee===void 0||Ee.focus()):e.multiple?(Te=f.value)===null||Te===void 0||Te.focus():(Re=g.value)===null||Re===void 0||Re.focus()}function De(){const{value:Ee}=u;Ee&&(N(),Ee.focus())}function ve(){const{value:Ee}=u;Ee&&Ee.blur()}function ye(Ee){const{value:Te}=y;Te&&Te.setTextContent(`+${Ee}`)}function we(){const{value:Ee}=v;return Ee}function ke(){return u.value}let Me=null;function Le(){Me!==null&&window.clearTimeout(Me)}function Fe(){e.active||(Le(),Me=window.setTimeout(()=>{D.value&&(x.value=!0)},100))}function ze(){Le()}function te(Ee){Ee||(Le(),x.value=!1)}watch(D,Ee=>{Ee||(x.value=!1)}),onMounted(()=>{watchEffect(()=>{const Ee=m.value;!Ee||(e.disabled?Ee.removeAttribute("tabindex"):Ee.tabIndex=k.value?-1:0)})}),useOnResize(d,e.onResize);const{inlineThemeDisabled:oe}=e,_e=computed(()=>{const{size:Ee}=e,{common:{cubicBezierEaseInOut:Te},self:{borderRadius:Re,color:Oe,placeholderColor:je,textColor:We,paddingSingle:Ze,paddingMultiple:Xe,caretColor:Ge,colorDisabled:Qe,textColorDisabled:rt,placeholderColorDisabled:dt,colorActive:qe,boxShadowFocus:He,boxShadowActive:Ke,boxShadowHover:ot,border:at,borderFocus:et,borderHover:Je,borderActive:nt,arrowColor:it,arrowColorDisabled:ht,loadingColor:lt,colorActiveWarning:ft,boxShadowFocusWarning:mt,boxShadowActiveWarning:Ct,boxShadowHoverWarning:_t,borderWarning:wt,borderFocusWarning:kt,borderHoverWarning:Pt,borderActiveWarning:ct,colorActiveError:gt,boxShadowFocusError:bt,boxShadowActiveError:St,boxShadowHoverError:Mt,borderError:At,borderFocusError:Vt,borderHoverError:Rt,borderActiveError:zt,clearColor:Wt,clearColorHover:qt,clearColorPressed:Ft,clearSize:Ot,arrowSize:jt,[createKey("height",Ee)]:an,[createKey("fontSize",Ee)]:Yt}}=M.value,Gt=getMargin(Ze),Zt=getMargin(Xe);return{"--n-bezier":Te,"--n-border":at,"--n-border-active":nt,"--n-border-focus":et,"--n-border-hover":Je,"--n-border-radius":Re,"--n-box-shadow-active":Ke,"--n-box-shadow-focus":He,"--n-box-shadow-hover":ot,"--n-caret-color":Ge,"--n-color":Oe,"--n-color-active":qe,"--n-color-disabled":Qe,"--n-font-size":Yt,"--n-height":an,"--n-padding-single-top":Gt.top,"--n-padding-multiple-top":Zt.top,"--n-padding-single-right":Gt.right,"--n-padding-multiple-right":Zt.right,"--n-padding-single-left":Gt.left,"--n-padding-multiple-left":Zt.left,"--n-padding-single-bottom":Gt.bottom,"--n-padding-multiple-bottom":Zt.bottom,"--n-placeholder-color":je,"--n-placeholder-color-disabled":dt,"--n-text-color":We,"--n-text-color-disabled":rt,"--n-arrow-color":it,"--n-arrow-color-disabled":ht,"--n-loading-color":lt,"--n-color-active-warning":ft,"--n-box-shadow-focus-warning":mt,"--n-box-shadow-active-warning":Ct,"--n-box-shadow-hover-warning":_t,"--n-border-warning":wt,"--n-border-focus-warning":kt,"--n-border-hover-warning":Pt,"--n-border-active-warning":ct,"--n-color-active-error":gt,"--n-box-shadow-focus-error":bt,"--n-box-shadow-active-error":St,"--n-box-shadow-hover-error":Mt,"--n-border-error":At,"--n-border-focus-error":Vt,"--n-border-hover-error":Rt,"--n-border-active-error":zt,"--n-clear-size":Ot,"--n-clear-color":Wt,"--n-clear-color-hover":qt,"--n-clear-color-pressed":Ft,"--n-arrow-size":jt}}),Ce=oe?useThemeClass("internal-selection",computed(()=>e.size[0]),_e,e):void 0;return{mergedTheme:M,mergedClearable:E,mergedClsPrefix:n,rtlEnabled:o,patternInputFocused:k,filterablePlaceholder:P,label:T,selected:D,showTagsPanel:x,isComposing:Q,counterRef:y,counterWrapperRef:v,patternInputMirrorRef:s,patternInputRef:u,selfRef:d,multipleElRef:f,singleElRef:g,patternInputWrapperRef:m,overflowRef:_,inputTagElRef:w,handleMouseDown:H,handleFocusin:le,handleClear:O,handleMouseEnter:U,handleMouseLeave:W,handleDeleteOption:X,handlePatternKeyDown:fe,handlePatternInputInput:Pe,handlePatternInputBlur:Be,handlePatternInputFocus:Ne,handleMouseEnterCounter:Fe,handleMouseLeaveCounter:ze,handleFocusout:J,handleCompositionEnd:Ie,handleCompositionStart:$e,onPopoverUpdateShow:te,focus:Ve,focusInput:De,blur:be,blurInput:ve,updateCounter:ye,getCounter:we,getTail:ke,renderLabel:e.renderLabel,cssVars:oe?void 0:_e,themeClass:Ce==null?void 0:Ce.themeClass,onRender:Ce==null?void 0:Ce.onRender}},render(){const{status:e,multiple:n,size:r,disabled:o,filterable:s,maxTagCount:u,bordered:d,clsPrefix:f,ellipsisTagPopoverProps:g,onRender:m,renderTag:y,renderLabel:v}=this;m==null||m();const _=u==="responsive",w=typeof u=="number",x=_||w,k=h$1(Wrapper,null,{default:()=>h$1(NBaseSuffix,{clsPrefix:f,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var M,E;return(E=(M=this.$slots).arrow)===null||E===void 0?void 0:E.call(M)}})});let S;if(n){const{labelField:M}=this,E=ne=>h$1("div",{class:`${f}-base-selection-tag-wrapper`,key:ne.value},y?y({option:ne,handleClose:()=>{this.handleDeleteOption(ne)}}):h$1(NTag,{size:r,closable:!ne.disabled,disabled:o,onClose:()=>{this.handleDeleteOption(ne)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>v?v(ne,!0):render$1(ne[M],ne,!0)})),P=()=>(w?this.selectedOptions.slice(0,u):this.selectedOptions).map(E),T=s?h$1("div",{class:`${f}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},h$1("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:o,value:this.pattern,autofocus:this.autofocus,class:`${f}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),h$1("span",{ref:"patternInputMirrorRef",class:`${f}-base-selection-input-tag__mirror`},this.pattern)):null,D=_?()=>h$1("div",{class:`${f}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},h$1(NTag,{size:r,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:o})):void 0;let F;if(w){const ne=this.selectedOptions.length-u;ne>0&&(F=h$1("div",{class:`${f}-base-selection-tag-wrapper`,key:"__counter__"},h$1(NTag,{size:r,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:o},{default:()=>`+${ne}`})))}const I=_?s?h$1(VOverflow,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:P,counter:D,tail:()=>T}):h$1(VOverflow,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:P,counter:D}):w&&F?P().concat(F):P(),N=x?()=>h$1("div",{class:`${f}-base-selection-popover`},_?P():this.selectedOptions.map(E)):void 0,q=x?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},g):null,Z=(this.selected?!1:this.active?!this.pattern&&!this.isComposing:!0)?h$1("div",{class:`${f}-base-selection-placeholder ${f}-base-selection-overlay`},h$1("div",{class:`${f}-base-selection-placeholder__inner`},this.placeholder)):null,j=s?h$1("div",{ref:"patternInputWrapperRef",class:`${f}-base-selection-tags`},I,_?null:T,k):h$1("div",{ref:"multipleElRef",class:`${f}-base-selection-tags`,tabindex:o?void 0:0},I,k);S=h$1(Fragment,null,x?h$1(NPopover,Object.assign({},q,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>j,default:N}):j,Z)}else if(s){const M=this.pattern||this.isComposing,E=this.active?!M:!this.selected,P=this.active?!1:this.selected;S=h$1("div",{ref:"patternInputWrapperRef",class:`${f}-base-selection-label`,title:this.patternInputFocused?void 0:getTitleAttribute(this.label)},h$1("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${f}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:o,disabled:o,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),P?h$1("div",{class:`${f}-base-selection-label__render-label ${f}-base-selection-overlay`,key:"input"},h$1("div",{class:`${f}-base-selection-overlay__wrapper`},y?y({option:this.selectedOption,handleClose:()=>{}}):v?v(this.selectedOption,!0):render$1(this.label,this.selectedOption,!0))):null,E?h$1("div",{class:`${f}-base-selection-placeholder ${f}-base-selection-overlay`,key:"placeholder"},h$1("div",{class:`${f}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,k)}else S=h$1("div",{ref:"singleElRef",class:`${f}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?h$1("div",{class:`${f}-base-selection-input`,title:getTitleAttribute(this.label),key:"input"},h$1("div",{class:`${f}-base-selection-input__content`},y?y({option:this.selectedOption,handleClose:()=>{}}):v?v(this.selectedOption,!0):render$1(this.label,this.selectedOption,!0))):h$1("div",{class:`${f}-base-selection-placeholder ${f}-base-selection-overlay`,key:"placeholder"},h$1("div",{class:`${f}-base-selection-placeholder__inner`},this.placeholder)),k);return h$1("div",{ref:"selfRef",class:[`${f}-base-selection`,this.rtlEnabled&&`${f}-base-selection--rtl`,this.themeClass,e&&`${f}-base-selection--${e}-status`,{[`${f}-base-selection--active`]:this.active,[`${f}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${f}-base-selection--disabled`]:this.disabled,[`${f}-base-selection--multiple`]:this.multiple,[`${f}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},S,d?h$1("div",{class:`${f}-base-selection__border`}):null,d?h$1("div",{class:`${f}-base-selection__state-border`}):null)}}),{cubicBezierEaseInOut:cubicBezierEaseInOut$1}=commonVariables$7;function fadeInWidthExpandTransition({duration:e=".2s",delay:n=".1s"}={}){return[c$1("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),c$1("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),c$1("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${cubicBezierEaseInOut$1},
 max-width ${e} ${cubicBezierEaseInOut$1} ${n},
 margin-left ${e} ${cubicBezierEaseInOut$1} ${n},
 margin-right ${e} ${cubicBezierEaseInOut$1} ${n};
 `),c$1("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${cubicBezierEaseInOut$1} ${n},
 max-width ${e} ${cubicBezierEaseInOut$1},
 margin-left ${e} ${cubicBezierEaseInOut$1},
 margin-right ${e} ${cubicBezierEaseInOut$1};
 `)]}const{cubicBezierEaseInOut,cubicBezierEaseOut,cubicBezierEaseIn}=commonVariables$7;function fadeInHeightExpandTransition({overflow:e="hidden",duration:n=".3s",originalTransition:r="",leavingDelay:o="0s",foldPadding:s=!1,enterToProps:u=void 0,leaveToProps:d=void 0,reverse:f=!1}={}){const g=f?"leave":"enter",m=f?"enter":"leave";return[c$1(`&.fade-in-height-expand-transition-${m}-from,
 &.fade-in-height-expand-transition-${g}-to`,Object.assign(Object.assign({},u),{opacity:1})),c$1(`&.fade-in-height-expand-transition-${m}-to,
 &.fade-in-height-expand-transition-${g}-from`,Object.assign(Object.assign({},d),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:s?"0 !important":void 0,paddingBottom:s?"0 !important":void 0})),c$1(`&.fade-in-height-expand-transition-${m}-active`,`
 overflow: ${e};
 transition:
 max-height ${n} ${cubicBezierEaseInOut} ${o},
 opacity ${n} ${cubicBezierEaseOut} ${o},
 margin-top ${n} ${cubicBezierEaseInOut} ${o},
 margin-bottom ${n} ${cubicBezierEaseInOut} ${o},
 padding-top ${n} ${cubicBezierEaseInOut} ${o},
 padding-bottom ${n} ${cubicBezierEaseInOut} ${o}
 ${r?`,${r}`:""}
 `),c$1(`&.fade-in-height-expand-transition-${g}-active`,`
 overflow: ${e};
 transition:
 max-height ${n} ${cubicBezierEaseInOut},
 opacity ${n} ${cubicBezierEaseIn},
 margin-top ${n} ${cubicBezierEaseInOut},
 margin-bottom ${n} ${cubicBezierEaseInOut},
 padding-top ${n} ${cubicBezierEaseInOut},
 padding-bottom ${n} ${cubicBezierEaseInOut}
 ${r?`,${r}`:""}
 `)]}function getIsGroup(e){return e.type==="group"}function getIgnored(e){return e.type==="ignored"}function patternMatched(e,n){try{return!!(1+n.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch{return!1}}function createTmOptions(e,n){return{getIsGroup,getIgnored,getKey(o){return getIsGroup(o)?o.name||o.key||"key-required":o[e]},getChildren(o){return o[n]}}}function filterOptions(e,n,r,o){if(!n)return e;function s(u){if(!Array.isArray(u))return[];const d=[];for(const f of u)if(getIsGroup(f)){const g=s(f[o]);g.length&&d.push(Object.assign({},f,{[o]:g}))}else{if(getIgnored(f))continue;n(r,f)&&d.push(f)}return d}return s(e)}function createValOptMap(e,n,r){const o=new Map;return e.forEach(s=>{getIsGroup(s)?s[r].forEach(u=>{o.set(u[n],u)}):o.set(s[n],s)}),o}const isChrome=isBrowser$2&&"chrome"in window;isBrowser$2&&navigator.userAgent.includes("Firefox");const isSafari=isBrowser$2&&navigator.userAgent.includes("Safari")&&!isChrome,commonVariables$3={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"};function self$e(e){const{textColor2:n,textColor3:r,textColorDisabled:o,primaryColor:s,primaryColorHover:u,inputColor:d,inputColorDisabled:f,borderColor:g,warningColor:m,warningColorHover:y,errorColor:v,errorColorHover:_,borderRadius:w,lineHeight:x,fontSizeTiny:k,fontSizeSmall:S,fontSizeMedium:M,fontSizeLarge:E,heightTiny:P,heightSmall:T,heightMedium:D,heightLarge:F,actionColor:I,clearColor:N,clearColorHover:q,clearColorPressed:Y,placeholderColor:Z,placeholderColorDisabled:j,iconColor:ne,iconColorDisabled:le,iconColorHover:J,iconColorPressed:O}=e;return Object.assign(Object.assign({},commonVariables$3),{countTextColorDisabled:o,countTextColor:r,heightTiny:P,heightSmall:T,heightMedium:D,heightLarge:F,fontSizeTiny:k,fontSizeSmall:S,fontSizeMedium:M,fontSizeLarge:E,lineHeight:x,lineHeightTextarea:x,borderRadius:w,iconSize:"16px",groupLabelColor:I,groupLabelTextColor:n,textColor:n,textColorDisabled:o,textDecorationColor:n,caretColor:s,placeholderColor:Z,placeholderColorDisabled:j,color:d,colorDisabled:f,colorFocus:d,groupLabelBorder:`1px solid ${g}`,border:`1px solid ${g}`,borderHover:`1px solid ${u}`,borderDisabled:`1px solid ${g}`,borderFocus:`1px solid ${u}`,boxShadowFocus:`0 0 0 2px ${changeColor(s,{alpha:.2})}`,loadingColor:s,loadingColorWarning:m,borderWarning:`1px solid ${m}`,borderHoverWarning:`1px solid ${y}`,colorFocusWarning:d,borderFocusWarning:`1px solid ${y}`,boxShadowFocusWarning:`0 0 0 2px ${changeColor(m,{alpha:.2})}`,caretColorWarning:m,loadingColorError:v,borderError:`1px solid ${v}`,borderHoverError:`1px solid ${_}`,colorFocusError:d,borderFocusError:`1px solid ${_}`,boxShadowFocusError:`0 0 0 2px ${changeColor(v,{alpha:.2})}`,caretColorError:v,clearColor:N,clearColorHover:q,clearColorPressed:Y,iconColor:ne,iconColorDisabled:le,iconColorHover:J,iconColorPressed:O,suffixTextColor:n})}const inputLight={name:"Input",common:commonLight,self:self$e},inputLight$1=inputLight,inputInjectionKey="n-input";function len(e){let n=0;for(const r of e)n++;return n}function isEmptyInputValue(e){return e===""||e==null}function useCursor(e){const n=ref(null);function r(){const{value:u}=e;if(!(u!=null&&u.focus)){s();return}const{selectionStart:d,selectionEnd:f,value:g}=u;if(d==null||f==null){s();return}n.value={start:d,end:f,beforeText:g.slice(0,d),afterText:g.slice(f)}}function o(){var u;const{value:d}=n,{value:f}=e;if(!d||!f)return;const{value:g}=f,{start:m,beforeText:y,afterText:v}=d;let _=g.length;if(g.endsWith(v))_=g.length-v.length;else if(g.startsWith(y))_=y.length;else{const w=y[m-1],x=g.indexOf(w,m-1);x!==-1&&(_=x+1)}(u=f.setSelectionRange)===null||u===void 0||u.call(f,_,_)}function s(){n.value=null}return watch(e,s),{recordCursor:r,restoreCursor:o}}const WordCount=defineComponent({name:"InputWordCount",setup(e,{slots:n}){const{mergedValueRef:r,maxlengthRef:o,mergedClsPrefixRef:s,countGraphemesRef:u}=inject(inputInjectionKey),d=computed(()=>{const{value:f}=r;return f===null||Array.isArray(f)?0:(u.value||len)(f)});return()=>{const{value:f}=o,{value:g}=r;return h$1("span",{class:`${s.value}-input-word-count`},resolveSlotWithProps(n.default,{value:g===null||Array.isArray(g)?"":g},()=>[f===void 0?d.value:`${d.value} / ${f}`]))}}}),style$e=cB("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color .3s var(--n-bezier);
 font-size: var(--n-font-size);
 --n-padding-vertical: calc((var(--n-height) - 1.5 * var(--n-font-size)) / 2);
`,[cE("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),cE("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 -webkit-text-fill-color .3s var(--n-bezier),
 caret-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier);
 `),cE("input-el, textarea-el",`
 -webkit-appearance: none;
 scrollbar-width: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--n-text-decoration-color);
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 background-color: transparent;
 `,[c$1("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),c$1("&::placeholder",`
 color: #0000;
 -webkit-text-fill-color: transparent !important;
 `),c$1("&:-webkit-autofill ~",[cE("placeholder","display: none;")])]),cM("round",[cNotM("textarea","border-radius: calc(var(--n-height) / 2);")]),cE("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--n-placeholder-color);
 `,[c$1("span",`
 width: 100%;
 display: inline-block;
 `)]),cM("textarea",[cE("placeholder","overflow: visible;")]),cNotM("autosize","width: 100%;"),cM("autosize",[cE("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),cB("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 `),cE("input-mirror",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre;
 pointer-events: none;
 `),cE("input-el",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[c$1("&[type=password]::-ms-reveal","display: none;"),c$1("+",[cE("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),cNotM("textarea",[cE("placeholder","white-space: nowrap;")]),cE("eye",`
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `),cM("textarea","width: 100%;",[cB("input-word-count",`
 position: absolute;
 right: var(--n-padding-right);
 bottom: var(--n-padding-vertical);
 `),cM("resizable",[cB("input-wrapper",`
 resize: vertical;
 min-height: var(--n-height);
 `)]),cE("textarea-el, textarea-mirror, placeholder",`
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--n-padding-vertical);
 padding-bottom: var(--n-padding-vertical);
 word-break: break-word;
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--n-line-height-textarea);
 margin: 0;
 resize: none;
 white-space: pre-wrap;
 scroll-padding-block-end: var(--n-padding-vertical);
 `),cE("textarea-mirror",`
 width: 100%;
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),cM("pair",[cE("input-el, placeholder","text-align: center;"),cE("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 white-space: nowrap;
 `,[cB("icon",`
 color: var(--n-icon-color);
 `),cB("base-icon",`
 color: var(--n-icon-color);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[cE("border","border: var(--n-border-disabled);"),cE("input-el, textarea-el",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 text-decoration-color: var(--n-text-color-disabled);
 `),cE("placeholder","color: var(--n-placeholder-color-disabled);"),cE("separator","color: var(--n-text-color-disabled);",[cB("icon",`
 color: var(--n-icon-color-disabled);
 `),cB("base-icon",`
 color: var(--n-icon-color-disabled);
 `)]),cB("input-word-count",`
 color: var(--n-count-text-color-disabled);
 `),cE("suffix, prefix","color: var(--n-text-color-disabled);",[cB("icon",`
 color: var(--n-icon-color-disabled);
 `),cB("internal-icon",`
 color: var(--n-icon-color-disabled);
 `)])]),cNotM("disabled",[cE("eye",`
 color: var(--n-icon-color);
 cursor: pointer;
 `,[c$1("&:hover",`
 color: var(--n-icon-color-hover);
 `),c$1("&:active",`
 color: var(--n-icon-color-pressed);
 `)]),c$1("&:hover",[cE("state-border","border: var(--n-border-hover);")]),cM("focus","background-color: var(--n-color-focus);",[cE("state-border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),cE("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--n-border);
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),cE("state-border",`
 border-color: #0000;
 z-index: 1;
 `),cE("prefix","margin-right: 4px;"),cE("suffix",`
 margin-left: 4px;
 `),cE("suffix, prefix",`
 transition: color .3s var(--n-bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--n-height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--n-suffix-text-color);
 `,[cB("base-loading",`
 font-size: var(--n-icon-size);
 margin: 0 2px;
 color: var(--n-loading-color);
 `),cB("base-clear",`
 font-size: var(--n-icon-size);
 `,[cE("placeholder",[cB("base-icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)])]),c$1(">",[cB("icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)]),cB("base-icon",`
 font-size: var(--n-icon-size);
 `)]),cB("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--n-count-text-color);
 transition: color .3s var(--n-bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `),["warning","error"].map(e=>cM(`${e}-status`,[cNotM("disabled",[cB("base-loading",`
 color: var(--n-loading-color-${e})
 `),cE("input-el, textarea-el",`
 caret-color: var(--n-caret-color-${e});
 `),cE("state-border",`
 border: var(--n-border-${e});
 `),c$1("&:hover",[cE("state-border",`
 border: var(--n-border-hover-${e});
 `)]),c$1("&:focus",`
 background-color: var(--n-color-focus-${e});
 `,[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)]),cM("focus",`
 background-color: var(--n-color-focus-${e});
 `,[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),safariStyle=cB("input",[cM("disabled",[cE("input-el, textarea-el",`
 -webkit-text-fill-color: var(--n-text-color-disabled);
 `)])]),inputProps=Object.assign(Object.assign({},useTheme.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},allowInput:Function,renderCount:Function,onMousedown:Function,onKeydown:Function,onKeyup:[Function,Array],onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],countGraphemes:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,internalLoadingBeforeSuffix:{type:Boolean,default:!0},showPasswordToggle:Boolean}),NInput=defineComponent({name:"Input",props:inputProps,setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:r,inlineThemeDisabled:o,mergedRtlRef:s}=useConfig(e),u=useTheme("Input","-input",style$e,inputLight$1,e,n);isSafari&&useStyle("-input-safari",safariStyle,n);const d=ref(null),f=ref(null),g=ref(null),m=ref(null),y=ref(null),v=ref(null),_=ref(null),w=useCursor(_),x=ref(null),{localeRef:k}=useLocale("Input"),S=ref(e.defaultValue),M=toRef(e,"value"),E=useMergedState(M,S),P=useFormItem(e),{mergedSizeRef:T,mergedDisabledRef:D,mergedStatusRef:F}=P,I=ref(!1),N=ref(!1),q=ref(!1),Y=ref(!1);let Z=null;const j=computed(()=>{const{placeholder:ct,pair:gt}=e;return gt?Array.isArray(ct)?ct:ct===void 0?["",""]:[ct,ct]:ct===void 0?[k.value.placeholder]:[ct]}),ne=computed(()=>{const{value:ct}=q,{value:gt}=E,{value:bt}=j;return!ct&&(isEmptyInputValue(gt)||Array.isArray(gt)&&isEmptyInputValue(gt[0]))&&bt[0]}),le=computed(()=>{const{value:ct}=q,{value:gt}=E,{value:bt}=j;return!ct&&bt[1]&&(isEmptyInputValue(gt)||Array.isArray(gt)&&isEmptyInputValue(gt[1]))}),J=useMemo(()=>e.internalForceFocus||I.value),O=useMemo(()=>{if(D.value||e.readonly||!e.clearable||!J.value&&!N.value)return!1;const{value:ct}=E,{value:gt}=J;return e.pair?!!(Array.isArray(ct)&&(ct[0]||ct[1]))&&(N.value||gt):!!ct&&(N.value||gt)}),U=computed(()=>{const{showPasswordOn:ct}=e;if(ct)return ct;if(e.showPasswordToggle)return"click"}),W=ref(!1),H=computed(()=>{const{textDecoration:ct}=e;return ct?Array.isArray(ct)?ct.map(gt=>({textDecoration:gt})):[{textDecoration:ct}]:["",""]}),X=ref(void 0),Q=()=>{var ct,gt;if(e.type==="textarea"){const{autosize:bt}=e;if(bt&&(X.value=(gt=(ct=x.value)===null||ct===void 0?void 0:ct.$el)===null||gt===void 0?void 0:gt.offsetWidth),!f.value||typeof bt=="boolean")return;const{paddingTop:St,paddingBottom:Mt,lineHeight:At}=window.getComputedStyle(f.value),Vt=Number(St.slice(0,-2)),Rt=Number(Mt.slice(0,-2)),zt=Number(At.slice(0,-2)),{value:Wt}=g;if(!Wt)return;if(bt.minRows){const qt=Math.max(bt.minRows,1),Ft=`${Vt+Rt+zt*qt}px`;Wt.style.minHeight=Ft}if(bt.maxRows){const qt=`${Vt+Rt+zt*bt.maxRows}px`;Wt.style.maxHeight=qt}}},fe=computed(()=>{const{maxlength:ct}=e;return ct===void 0?void 0:Number(ct)});onMounted(()=>{const{value:ct}=E;Array.isArray(ct)||it(ct)});const Se=getCurrentInstance().proxy;function Pe(ct,gt){const{onUpdateValue:bt,"onUpdate:value":St,onInput:Mt}=e,{nTriggerFormInput:At}=P;bt&&call(bt,ct,gt),St&&call(St,ct,gt),Mt&&call(Mt,ct,gt),S.value=ct,At()}function $e(ct,gt){const{onChange:bt}=e,{nTriggerFormChange:St}=P;bt&&call(bt,ct,gt),S.value=ct,St()}function Ie(ct){const{onBlur:gt}=e,{nTriggerFormBlur:bt}=P;gt&&call(gt,ct),bt()}function Ne(ct){const{onFocus:gt}=e,{nTriggerFormFocus:bt}=P;gt&&call(gt,ct),bt()}function Be(ct){const{onClear:gt}=e;gt&&call(gt,ct)}function be(ct){const{onInputBlur:gt}=e;gt&&call(gt,ct)}function Ve(ct){const{onInputFocus:gt}=e;gt&&call(gt,ct)}function De(){const{onDeactivate:ct}=e;ct&&call(ct)}function ve(){const{onActivate:ct}=e;ct&&call(ct)}function ye(ct){const{onClick:gt}=e;gt&&call(gt,ct)}function we(ct){const{onWrapperFocus:gt}=e;gt&&call(gt,ct)}function ke(ct){const{onWrapperBlur:gt}=e;gt&&call(gt,ct)}function Me(){q.value=!0}function Le(ct){q.value=!1,ct.target===v.value?Fe(ct,1):Fe(ct,0)}function Fe(ct,gt=0,bt="input"){const St=ct.target.value;if(it(St),ct instanceof InputEvent&&!ct.isComposing&&(q.value=!1),e.type==="textarea"){const{value:At}=x;At&&At.syncUnifiedContainer()}if(Z=St,q.value)return;w.recordCursor();const Mt=ze(St);if(Mt)if(!e.pair)bt==="input"?Pe(St,{source:gt}):$e(St,{source:gt});else{let{value:At}=E;Array.isArray(At)?At=[At[0],At[1]]:At=["",""],At[gt]=St,bt==="input"?Pe(At,{source:gt}):$e(At,{source:gt})}Se.$forceUpdate(),Mt||nextTick(w.restoreCursor)}function ze(ct){const{countGraphemes:gt,maxlength:bt,minlength:St}=e;if(gt){let At;if(bt!==void 0&&(At===void 0&&(At=gt(ct)),At>Number(bt))||St!==void 0&&(At===void 0&&(At=gt(ct)),At<Number(bt)))return!1}const{allowInput:Mt}=e;return typeof Mt=="function"?Mt(ct):!0}function te(ct){be(ct),ct.relatedTarget===d.value&&De(),ct.relatedTarget!==null&&(ct.relatedTarget===y.value||ct.relatedTarget===v.value||ct.relatedTarget===f.value)||(Y.value=!1),Ee(ct,"blur"),_.value=null}function oe(ct,gt){Ve(ct),I.value=!0,Y.value=!0,ve(),Ee(ct,"focus"),gt===0?_.value=y.value:gt===1?_.value=v.value:gt===2&&(_.value=f.value)}function _e(ct){e.passivelyActivated&&(ke(ct),Ee(ct,"blur"))}function Ce(ct){e.passivelyActivated&&(I.value=!0,we(ct),Ee(ct,"focus"))}function Ee(ct,gt){ct.relatedTarget!==null&&(ct.relatedTarget===y.value||ct.relatedTarget===v.value||ct.relatedTarget===f.value||ct.relatedTarget===d.value)||(gt==="focus"?(Ne(ct),I.value=!0):gt==="blur"&&(Ie(ct),I.value=!1))}function Te(ct,gt){Fe(ct,gt,"change")}function Re(ct){ye(ct)}function Oe(ct){Be(ct),je()}function je(){e.pair?(Pe(["",""],{source:"clear"}),$e(["",""],{source:"clear"})):(Pe("",{source:"clear"}),$e("",{source:"clear"}))}function We(ct){const{onMousedown:gt}=e;gt&&gt(ct);const{tagName:bt}=ct.target;if(bt!=="INPUT"&&bt!=="TEXTAREA"){if(e.resizable){const{value:St}=d;if(St){const{left:Mt,top:At,width:Vt,height:Rt}=St.getBoundingClientRect(),zt=14;if(Mt+Vt-zt<ct.clientX&&ct.clientX<Mt+Vt&&At+Rt-zt<ct.clientY&&ct.clientY<At+Rt)return}}ct.preventDefault(),I.value||Ke()}}function Ze(){var ct;N.value=!0,e.type==="textarea"&&((ct=x.value)===null||ct===void 0||ct.handleMouseEnterWrapper())}function Xe(){var ct;N.value=!1,e.type==="textarea"&&((ct=x.value)===null||ct===void 0||ct.handleMouseLeaveWrapper())}function Ge(){D.value||U.value==="click"&&(W.value=!W.value)}function Qe(ct){if(D.value)return;ct.preventDefault();const gt=St=>{St.preventDefault(),off$1("mouseup",document,gt)};if(on$1("mouseup",document,gt),U.value!=="mousedown")return;W.value=!0;const bt=()=>{W.value=!1,off$1("mouseup",document,bt)};on$1("mouseup",document,bt)}function rt(ct){e.onKeyup&&call(e.onKeyup,ct)}function dt(ct){switch(e.onKeydown&&call(e.onKeydown,ct),ct.key){case"Escape":He();break;case"Enter":qe(ct);break}}function qe(ct){var gt,bt;if(e.passivelyActivated){const{value:St}=Y;if(St){e.internalDeactivateOnEnter&&He();return}ct.preventDefault(),e.type==="textarea"?(gt=f.value)===null||gt===void 0||gt.focus():(bt=y.value)===null||bt===void 0||bt.focus()}}function He(){e.passivelyActivated&&(Y.value=!1,nextTick(()=>{var ct;(ct=d.value)===null||ct===void 0||ct.focus()}))}function Ke(){var ct,gt,bt;D.value||(e.passivelyActivated?(ct=d.value)===null||ct===void 0||ct.focus():((gt=f.value)===null||gt===void 0||gt.focus(),(bt=y.value)===null||bt===void 0||bt.focus()))}function ot(){var ct;!((ct=d.value)===null||ct===void 0)&&ct.contains(document.activeElement)&&document.activeElement.blur()}function at(){var ct,gt;(ct=f.value)===null||ct===void 0||ct.select(),(gt=y.value)===null||gt===void 0||gt.select()}function et(){D.value||(f.value?f.value.focus():y.value&&y.value.focus())}function Je(){const{value:ct}=d;(ct==null?void 0:ct.contains(document.activeElement))&&ct!==document.activeElement&&He()}function nt(ct){if(e.type==="textarea"){const{value:gt}=f;gt==null||gt.scrollTo(ct)}else{const{value:gt}=y;gt==null||gt.scrollTo(ct)}}function it(ct){const{type:gt,pair:bt,autosize:St}=e;if(!bt&&St)if(gt==="textarea"){const{value:Mt}=g;Mt&&(Mt.textContent=`${ct!=null?ct:""}\r
`)}else{const{value:Mt}=m;Mt&&(ct?Mt.textContent=ct:Mt.innerHTML="&nbsp;")}}function ht(){Q()}const lt=ref({top:"0"});function ft(ct){var gt;const{scrollTop:bt}=ct.target;lt.value.top=`${-bt}px`,(gt=x.value)===null||gt===void 0||gt.syncUnifiedContainer()}let mt=null;watchEffect(()=>{const{autosize:ct,type:gt}=e;ct&&gt==="textarea"?mt=watch(E,bt=>{!Array.isArray(bt)&&bt!==Z&&it(bt)}):mt==null||mt()});let Ct=null;watchEffect(()=>{e.type==="textarea"?Ct=watch(E,ct=>{var gt;!Array.isArray(ct)&&ct!==Z&&((gt=x.value)===null||gt===void 0||gt.syncUnifiedContainer())}):Ct==null||Ct()}),provide(inputInjectionKey,{mergedValueRef:E,maxlengthRef:fe,mergedClsPrefixRef:n,countGraphemesRef:toRef(e,"countGraphemes")});const _t={wrapperElRef:d,inputElRef:y,textareaElRef:f,isCompositing:q,clear:je,focus:Ke,blur:ot,select:at,deactivate:Je,activate:et,scrollTo:nt},wt=useRtl("Input",s,n),kt=computed(()=>{const{value:ct}=T,{common:{cubicBezierEaseInOut:gt},self:{color:bt,borderRadius:St,textColor:Mt,caretColor:At,caretColorError:Vt,caretColorWarning:Rt,textDecorationColor:zt,border:Wt,borderDisabled:qt,borderHover:Ft,borderFocus:Ot,placeholderColor:jt,placeholderColorDisabled:an,lineHeightTextarea:Yt,colorDisabled:Gt,colorFocus:Zt,textColorDisabled:Yn,boxShadowFocus:Pn,iconSize:Xn,colorFocusWarning:Zn,boxShadowFocusWarning:Jn,borderWarning:Qn,borderFocusWarning:er,borderHoverWarning:Fn,colorFocusError:On,boxShadowFocusError:Pr,borderError:Ar,borderFocusError:$r,borderHoverError:Mr,clearSize:tr,clearColor:hn,clearColorHover:Br,clearColorPressed:An,iconColor:_n,iconColorDisabled:$n,suffixTextColor:Kt,countTextColor:nr,countTextColorDisabled:Hn,iconColorHover:ir,iconColorPressed:Mn,loadingColor:Bn,loadingColorError:or,loadingColorWarning:Tr,[createKey("padding",ct)]:Lr,[createKey("fontSize",ct)]:zn,[createKey("height",ct)]:bn}}=u.value,{left:Rr,right:Dr}=getMargin(Lr);return{"--n-bezier":gt,"--n-count-text-color":nr,"--n-count-text-color-disabled":Hn,"--n-color":bt,"--n-font-size":zn,"--n-border-radius":St,"--n-height":bn,"--n-padding-left":Rr,"--n-padding-right":Dr,"--n-text-color":Mt,"--n-caret-color":At,"--n-text-decoration-color":zt,"--n-border":Wt,"--n-border-disabled":qt,"--n-border-hover":Ft,"--n-border-focus":Ot,"--n-placeholder-color":jt,"--n-placeholder-color-disabled":an,"--n-icon-size":Xn,"--n-line-height-textarea":Yt,"--n-color-disabled":Gt,"--n-color-focus":Zt,"--n-text-color-disabled":Yn,"--n-box-shadow-focus":Pn,"--n-loading-color":Bn,"--n-caret-color-warning":Rt,"--n-color-focus-warning":Zn,"--n-box-shadow-focus-warning":Jn,"--n-border-warning":Qn,"--n-border-focus-warning":er,"--n-border-hover-warning":Fn,"--n-loading-color-warning":Tr,"--n-caret-color-error":Vt,"--n-color-focus-error":On,"--n-box-shadow-focus-error":Pr,"--n-border-error":Ar,"--n-border-focus-error":$r,"--n-border-hover-error":Mr,"--n-loading-color-error":or,"--n-clear-color":hn,"--n-clear-size":tr,"--n-clear-color-hover":Br,"--n-clear-color-pressed":An,"--n-icon-color":_n,"--n-icon-color-hover":ir,"--n-icon-color-pressed":Mn,"--n-icon-color-disabled":$n,"--n-suffix-text-color":Kt}}),Pt=o?useThemeClass("input",computed(()=>{const{value:ct}=T;return ct[0]}),kt,e):void 0;return Object.assign(Object.assign({},_t),{wrapperElRef:d,inputElRef:y,inputMirrorElRef:m,inputEl2Ref:v,textareaElRef:f,textareaMirrorElRef:g,textareaScrollbarInstRef:x,rtlEnabled:wt,uncontrolledValue:S,mergedValue:E,passwordVisible:W,mergedPlaceholder:j,showPlaceholder1:ne,showPlaceholder2:le,mergedFocus:J,isComposing:q,activated:Y,showClearButton:O,mergedSize:T,mergedDisabled:D,textDecorationStyle:H,mergedClsPrefix:n,mergedBordered:r,mergedShowPasswordOn:U,placeholderStyle:lt,mergedStatus:F,textAreaScrollContainerWidth:X,handleTextAreaScroll:ft,handleCompositionStart:Me,handleCompositionEnd:Le,handleInput:Fe,handleInputBlur:te,handleInputFocus:oe,handleWrapperBlur:_e,handleWrapperFocus:Ce,handleMouseEnter:Ze,handleMouseLeave:Xe,handleMouseDown:We,handleChange:Te,handleClick:Re,handleClear:Oe,handlePasswordToggleClick:Ge,handlePasswordToggleMousedown:Qe,handleWrapperKeydown:dt,handleWrapperKeyup:rt,handleTextAreaMirrorResize:ht,getTextareaScrollContainer:()=>f.value,mergedTheme:u,cssVars:o?void 0:kt,themeClass:Pt==null?void 0:Pt.themeClass,onRender:Pt==null?void 0:Pt.onRender})},render(){var e,n;const{mergedClsPrefix:r,mergedStatus:o,themeClass:s,type:u,countGraphemes:d,onRender:f}=this,g=this.$slots;return f==null||f(),h$1("div",{ref:"wrapperElRef",class:[`${r}-input`,s,o&&`${r}-input--${o}-status`,{[`${r}-input--rtl`]:this.rtlEnabled,[`${r}-input--disabled`]:this.mergedDisabled,[`${r}-input--textarea`]:u==="textarea",[`${r}-input--resizable`]:this.resizable&&!this.autosize,[`${r}-input--autosize`]:this.autosize,[`${r}-input--round`]:this.round&&u!=="textarea",[`${r}-input--pair`]:this.pair,[`${r}-input--focus`]:this.mergedFocus,[`${r}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.handleWrapperKeyup,onKeydown:this.handleWrapperKeydown},h$1("div",{class:`${r}-input-wrapper`},resolveWrappedSlot(g.prefix,m=>m&&h$1("div",{class:`${r}-input__prefix`},m)),u==="textarea"?h$1(NScrollbar,{ref:"textareaScrollbarInstRef",class:`${r}-input__textarea`,container:this.getTextareaScrollContainer,triggerDisplayManually:!0,useUnifiedContainer:!0,internalHoistYRail:!0},{default:()=>{var m,y;const{textAreaScrollContainerWidth:v}=this,_={width:this.autosize&&v&&`${v}px`};return h$1(Fragment,null,h$1("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:[`${r}-input__textarea-el`,(m=this.inputProps)===null||m===void 0?void 0:m.class],autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:d?void 0:this.maxlength,minlength:d?void 0:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:[this.textDecorationStyle[0],(y=this.inputProps)===null||y===void 0?void 0:y.style,_],onBlur:this.handleInputBlur,onFocus:w=>{this.handleInputFocus(w,2)},onInput:this.handleInput,onChange:this.handleChange,onScroll:this.handleTextAreaScroll})),this.showPlaceholder1?h$1("div",{class:`${r}-input__placeholder`,style:[this.placeholderStyle,_],key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?h$1(VResizeObserver,{onResize:this.handleTextAreaMirrorResize},{default:()=>h$1("div",{ref:"textareaMirrorElRef",class:`${r}-input__textarea-mirror`,key:"mirror"})}):null)}}):h$1("div",{class:`${r}-input__input`},h$1("input",Object.assign({type:u==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":u},this.inputProps,{ref:"inputElRef",class:[`${r}-input__input-el`,(e=this.inputProps)===null||e===void 0?void 0:e.class],style:[this.textDecorationStyle[0],(n=this.inputProps)===null||n===void 0?void 0:n.style],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:d?void 0:this.maxlength,minlength:d?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:m=>{this.handleInputFocus(m,0)},onInput:m=>{this.handleInput(m,0)},onChange:m=>{this.handleChange(m,0)}})),this.showPlaceholder1?h$1("div",{class:`${r}-input__placeholder`},h$1("span",null,this.mergedPlaceholder[0])):null,this.autosize?h$1("div",{class:`${r}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"},"\xA0"):null),!this.pair&&resolveWrappedSlot(g.suffix,m=>m||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0?h$1("div",{class:`${r}-input__suffix`},[resolveWrappedSlot(g["clear-icon-placeholder"],y=>(this.clearable||y)&&h$1(NBaseClear,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{placeholder:()=>y,icon:()=>{var v,_;return(_=(v=this.$slots)["clear-icon"])===null||_===void 0?void 0:_.call(v)}})),this.internalLoadingBeforeSuffix?null:m,this.loading!==void 0?h$1(NBaseSuffix,{clsPrefix:r,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.internalLoadingBeforeSuffix?m:null,this.showCount&&this.type!=="textarea"?h$1(WordCount,null,{default:y=>{var v;return(v=g.count)===null||v===void 0?void 0:v.call(g,y)}}):null,this.mergedShowPasswordOn&&this.type==="password"?h$1("div",{class:`${r}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},this.passwordVisible?resolveSlot(g["password-visible-icon"],()=>[h$1(NBaseIcon,{clsPrefix:r},{default:()=>h$1(EyeIcon,null)})]):resolveSlot(g["password-invisible-icon"],()=>[h$1(NBaseIcon,{clsPrefix:r},{default:()=>h$1(EyeOffIcon,null)})])):null]):null)),this.pair?h$1("span",{class:`${r}-input__separator`},resolveSlot(g.separator,()=>[this.separator])):null,this.pair?h$1("div",{class:`${r}-input-wrapper`},h$1("div",{class:`${r}-input__input`},h$1("input",{ref:"inputEl2Ref",type:this.type,class:`${r}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:d?void 0:this.maxlength,minlength:d?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:m=>{this.handleInputFocus(m,1)},onInput:m=>{this.handleInput(m,1)},onChange:m=>{this.handleChange(m,1)}}),this.showPlaceholder2?h$1("div",{class:`${r}-input__placeholder`},h$1("span",null,this.mergedPlaceholder[1])):null),resolveWrappedSlot(g.suffix,m=>(this.clearable||m)&&h$1("div",{class:`${r}-input__suffix`},[this.clearable&&h$1(NBaseClear,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{icon:()=>{var y;return(y=g["clear-icon"])===null||y===void 0?void 0:y.call(g)},placeholder:()=>{var y;return(y=g["clear-icon-placeholder"])===null||y===void 0?void 0:y.call(g)}}),m]))):null,this.mergedBordered?h$1("div",{class:`${r}-input__border`}):null,this.mergedBordered?h$1("div",{class:`${r}-input__state-border`}):null,this.showCount&&u==="textarea"?h$1(WordCount,null,{default:m=>{var y;const{renderCount:v}=this;return v?v(m):(y=g.count)===null||y===void 0?void 0:y.call(g,m)}}):null)}}),style$d=cB("input-group",`
 display: inline-flex;
 width: 100%;
 flex-wrap: nowrap;
 vertical-align: bottom;
`,[c$1(">",[cB("input",[c$1("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),c$1("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 margin-left: -1px!important;
 `)]),cB("button",[c$1("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[cE("state-border, border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)]),c$1("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[cE("state-border, border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])]),c$1("*",[c$1("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[c$1(">",[cB("input",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),cB("base-selection",[cB("base-selection-label",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),cB("base-selection-tags",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),cE("box-shadow, border, state-border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)])])]),c$1("&:not(:first-child)",`
 margin-left: -1px!important;
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[c$1(">",[cB("input",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),cB("base-selection",[cB("base-selection-label",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),cB("base-selection-tags",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),cE("box-shadow, border, state-border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])])])])])]),inputGroupProps={},NInputGroup=defineComponent({name:"InputGroup",props:inputGroupProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e);return useStyle("-input-group",style$d,n),{mergedClsPrefix:n}},render(){const{mergedClsPrefix:e}=this;return h$1("div",{class:`${e}-input-group`},this.$slots)}});function createHoverColor(e){return composite(e,[255,255,255,.16])}function createPressedColor(e){return composite(e,[0,0,0,.12])}const buttonGroupInjectionKey="n-button-group",commonVariables$2={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};function self$d(e){const{heightTiny:n,heightSmall:r,heightMedium:o,heightLarge:s,borderRadius:u,fontSizeTiny:d,fontSizeSmall:f,fontSizeMedium:g,fontSizeLarge:m,opacityDisabled:y,textColor2:v,textColor3:_,primaryColorHover:w,primaryColorPressed:x,borderColor:k,primaryColor:S,baseColor:M,infoColor:E,infoColorHover:P,infoColorPressed:T,successColor:D,successColorHover:F,successColorPressed:I,warningColor:N,warningColorHover:q,warningColorPressed:Y,errorColor:Z,errorColorHover:j,errorColorPressed:ne,fontWeight:le,buttonColor2:J,buttonColor2Hover:O,buttonColor2Pressed:U,fontWeightStrong:W}=e;return Object.assign(Object.assign({},commonVariables$2),{heightTiny:n,heightSmall:r,heightMedium:o,heightLarge:s,borderRadiusTiny:u,borderRadiusSmall:u,borderRadiusMedium:u,borderRadiusLarge:u,fontSizeTiny:d,fontSizeSmall:f,fontSizeMedium:g,fontSizeLarge:m,opacityDisabled:y,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:J,colorSecondaryHover:O,colorSecondaryPressed:U,colorTertiary:J,colorTertiaryHover:O,colorTertiaryPressed:U,colorQuaternary:"#0000",colorQuaternaryHover:O,colorQuaternaryPressed:U,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:v,textColorTertiary:_,textColorHover:w,textColorPressed:x,textColorFocus:w,textColorDisabled:v,textColorText:v,textColorTextHover:w,textColorTextPressed:x,textColorTextFocus:w,textColorTextDisabled:v,textColorGhost:v,textColorGhostHover:w,textColorGhostPressed:x,textColorGhostFocus:w,textColorGhostDisabled:v,border:`1px solid ${k}`,borderHover:`1px solid ${w}`,borderPressed:`1px solid ${x}`,borderFocus:`1px solid ${w}`,borderDisabled:`1px solid ${k}`,rippleColor:S,colorPrimary:S,colorHoverPrimary:w,colorPressedPrimary:x,colorFocusPrimary:w,colorDisabledPrimary:S,textColorPrimary:M,textColorHoverPrimary:M,textColorPressedPrimary:M,textColorFocusPrimary:M,textColorDisabledPrimary:M,textColorTextPrimary:S,textColorTextHoverPrimary:w,textColorTextPressedPrimary:x,textColorTextFocusPrimary:w,textColorTextDisabledPrimary:v,textColorGhostPrimary:S,textColorGhostHoverPrimary:w,textColorGhostPressedPrimary:x,textColorGhostFocusPrimary:w,textColorGhostDisabledPrimary:S,borderPrimary:`1px solid ${S}`,borderHoverPrimary:`1px solid ${w}`,borderPressedPrimary:`1px solid ${x}`,borderFocusPrimary:`1px solid ${w}`,borderDisabledPrimary:`1px solid ${S}`,rippleColorPrimary:S,colorInfo:E,colorHoverInfo:P,colorPressedInfo:T,colorFocusInfo:P,colorDisabledInfo:E,textColorInfo:M,textColorHoverInfo:M,textColorPressedInfo:M,textColorFocusInfo:M,textColorDisabledInfo:M,textColorTextInfo:E,textColorTextHoverInfo:P,textColorTextPressedInfo:T,textColorTextFocusInfo:P,textColorTextDisabledInfo:v,textColorGhostInfo:E,textColorGhostHoverInfo:P,textColorGhostPressedInfo:T,textColorGhostFocusInfo:P,textColorGhostDisabledInfo:E,borderInfo:`1px solid ${E}`,borderHoverInfo:`1px solid ${P}`,borderPressedInfo:`1px solid ${T}`,borderFocusInfo:`1px solid ${P}`,borderDisabledInfo:`1px solid ${E}`,rippleColorInfo:E,colorSuccess:D,colorHoverSuccess:F,colorPressedSuccess:I,colorFocusSuccess:F,colorDisabledSuccess:D,textColorSuccess:M,textColorHoverSuccess:M,textColorPressedSuccess:M,textColorFocusSuccess:M,textColorDisabledSuccess:M,textColorTextSuccess:D,textColorTextHoverSuccess:F,textColorTextPressedSuccess:I,textColorTextFocusSuccess:F,textColorTextDisabledSuccess:v,textColorGhostSuccess:D,textColorGhostHoverSuccess:F,textColorGhostPressedSuccess:I,textColorGhostFocusSuccess:F,textColorGhostDisabledSuccess:D,borderSuccess:`1px solid ${D}`,borderHoverSuccess:`1px solid ${F}`,borderPressedSuccess:`1px solid ${I}`,borderFocusSuccess:`1px solid ${F}`,borderDisabledSuccess:`1px solid ${D}`,rippleColorSuccess:D,colorWarning:N,colorHoverWarning:q,colorPressedWarning:Y,colorFocusWarning:q,colorDisabledWarning:N,textColorWarning:M,textColorHoverWarning:M,textColorPressedWarning:M,textColorFocusWarning:M,textColorDisabledWarning:M,textColorTextWarning:N,textColorTextHoverWarning:q,textColorTextPressedWarning:Y,textColorTextFocusWarning:q,textColorTextDisabledWarning:v,textColorGhostWarning:N,textColorGhostHoverWarning:q,textColorGhostPressedWarning:Y,textColorGhostFocusWarning:q,textColorGhostDisabledWarning:N,borderWarning:`1px solid ${N}`,borderHoverWarning:`1px solid ${q}`,borderPressedWarning:`1px solid ${Y}`,borderFocusWarning:`1px solid ${q}`,borderDisabledWarning:`1px solid ${N}`,rippleColorWarning:N,colorError:Z,colorHoverError:j,colorPressedError:ne,colorFocusError:j,colorDisabledError:Z,textColorError:M,textColorHoverError:M,textColorPressedError:M,textColorFocusError:M,textColorDisabledError:M,textColorTextError:Z,textColorTextHoverError:j,textColorTextPressedError:ne,textColorTextFocusError:j,textColorTextDisabledError:v,textColorGhostError:Z,textColorGhostHoverError:j,textColorGhostPressedError:ne,textColorGhostFocusError:j,textColorGhostDisabledError:Z,borderError:`1px solid ${Z}`,borderHoverError:`1px solid ${j}`,borderPressedError:`1px solid ${ne}`,borderFocusError:`1px solid ${j}`,borderDisabledError:`1px solid ${Z}`,rippleColorError:Z,waveOpacity:"0.6",fontWeight:le,fontWeightStrong:W})}const buttonLight={name:"Button",common:commonLight,self:self$d},buttonLight$1=buttonLight,style$c=c$1([cB("button",`
 margin: 0;
 font-weight: var(--n-font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--n-padding);
 height: var(--n-height);
 font-size: var(--n-font-size);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 width: var(--n-width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 -webkit-user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[cM("color",[cE("border",{borderColor:"var(--n-border-color)"}),cM("disabled",[cE("border",{borderColor:"var(--n-border-color-disabled)"})]),cNotM("disabled",[c$1("&:focus",[cE("state-border",{borderColor:"var(--n-border-color-focus)"})]),c$1("&:hover",[cE("state-border",{borderColor:"var(--n-border-color-hover)"})]),c$1("&:active",[cE("state-border",{borderColor:"var(--n-border-color-pressed)"})]),cM("pressed",[cE("state-border",{borderColor:"var(--n-border-color-pressed)"})])])]),cM("disabled",{backgroundColor:"var(--n-color-disabled)",color:"var(--n-text-color-disabled)"},[cE("border",{border:"var(--n-border-disabled)"})]),cNotM("disabled",[c$1("&:focus",{backgroundColor:"var(--n-color-focus)",color:"var(--n-text-color-focus)"},[cE("state-border",{border:"var(--n-border-focus)"})]),c$1("&:hover",{backgroundColor:"var(--n-color-hover)",color:"var(--n-text-color-hover)"},[cE("state-border",{border:"var(--n-border-hover)"})]),c$1("&:active",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[cE("state-border",{border:"var(--n-border-pressed)"})]),cM("pressed",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[cE("state-border",{border:"var(--n-border-pressed)"})])]),cM("loading","cursor: wait;"),cB("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--n-ripple-duration);
 animation-timing-function: var(--n-bezier-ease-out), var(--n-bezier-ease-out);
 `,[cM("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),isBrowser$2&&"MozBoxSizing"in document.createElement("div").style?c$1("&::moz-focus-inner",{border:0}):null,cE("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--n-bezier);
 pointer-events: none;
 `),cE("border",{border:"var(--n-border)"}),cE("state-border",{border:"var(--n-border)",borderColor:"#0000",zIndex:1}),cE("icon",`
 margin: var(--n-icon-margin);
 margin-left: 0;
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 max-width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 position: relative;
 flex-shrink: 0;
 `,[cB("icon-slot",`
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `,[iconSwitchTransition({top:"50%",originalTransform:"translateY(-50%)"})]),fadeInWidthExpandTransition()]),cE("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 min-width: 0;
 `,[c$1("~",[cE("icon",{margin:"var(--n-icon-margin)",marginRight:0})])]),cM("block",`
 display: flex;
 width: 100%;
 `),cM("dashed",[cE("border, state-border",{borderStyle:"dashed !important"})]),cM("disabled",{cursor:"not-allowed",opacity:"var(--n-opacity-disabled)"})]),c$1("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--n-ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)"}}),c$1("@keyframes button-wave-opacity",{from:{opacity:"var(--n-wave-opacity)"},to:{opacity:0}})]),buttonProps=Object.assign(Object.assign({},useTheme.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,renderIcon:Function,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},bordered:{type:Boolean,default:!0},onClick:[Function,Array],nativeFocusBehavior:{type:Boolean,default:!isSafari}}),Button=defineComponent({name:"Button",props:buttonProps,setup(e){const n=ref(null),r=ref(null),o=ref(!1),s=useMemo(()=>!e.quaternary&&!e.tertiary&&!e.secondary&&!e.text&&(!e.color||e.ghost||e.dashed)&&e.bordered),u=inject(buttonGroupInjectionKey,{}),{mergedSizeRef:d}=useFormItem({},{defaultSize:"medium",mergedSize:T=>{const{size:D}=e;if(D)return D;const{size:F}=u;if(F)return F;const{mergedSize:I}=T||{};return I?I.value:"medium"}}),f=computed(()=>e.focusable&&!e.disabled),g=T=>{var D;f.value||T.preventDefault(),!e.nativeFocusBehavior&&(T.preventDefault(),!e.disabled&&f.value&&((D=n.value)===null||D===void 0||D.focus({preventScroll:!0})))},m=T=>{var D;if(!e.disabled&&!e.loading){const{onClick:F}=e;F&&call(F,T),e.text||(D=r.value)===null||D===void 0||D.play()}},y=T=>{switch(T.key){case"Enter":if(!e.keyboard)return;o.value=!1}},v=T=>{switch(T.key){case"Enter":if(!e.keyboard||e.loading){T.preventDefault();return}o.value=!0}},_=()=>{o.value=!1},{inlineThemeDisabled:w,mergedClsPrefixRef:x,mergedRtlRef:k}=useConfig(e),S=useTheme("Button","-button",style$c,buttonLight$1,e,x),M=useRtl("Button",k,x),E=computed(()=>{const T=S.value,{common:{cubicBezierEaseInOut:D,cubicBezierEaseOut:F},self:I}=T,{rippleDuration:N,opacityDisabled:q,fontWeight:Y,fontWeightStrong:Z}=I,j=d.value,{dashed:ne,type:le,ghost:J,text:O,color:U,round:W,circle:H,textColor:X,secondary:Q,tertiary:fe,quaternary:Se,strong:Pe}=e,$e={"--n-font-weight":Pe?Z:Y};let Ie={"--n-color":"initial","--n-color-hover":"initial","--n-color-pressed":"initial","--n-color-focus":"initial","--n-color-disabled":"initial","--n-ripple-color":"initial","--n-text-color":"initial","--n-text-color-hover":"initial","--n-text-color-pressed":"initial","--n-text-color-focus":"initial","--n-text-color-disabled":"initial"};const Ne=le==="tertiary",Be=le==="default",be=Ne?"default":le;if(O){const te=X||U;Ie={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":"#0000","--n-text-color":te||I[createKey("textColorText",be)],"--n-text-color-hover":te?createHoverColor(te):I[createKey("textColorTextHover",be)],"--n-text-color-pressed":te?createPressedColor(te):I[createKey("textColorTextPressed",be)],"--n-text-color-focus":te?createHoverColor(te):I[createKey("textColorTextHover",be)],"--n-text-color-disabled":te||I[createKey("textColorTextDisabled",be)]}}else if(J||ne){const te=X||U;Ie={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":U||I[createKey("rippleColor",be)],"--n-text-color":te||I[createKey("textColorGhost",be)],"--n-text-color-hover":te?createHoverColor(te):I[createKey("textColorGhostHover",be)],"--n-text-color-pressed":te?createPressedColor(te):I[createKey("textColorGhostPressed",be)],"--n-text-color-focus":te?createHoverColor(te):I[createKey("textColorGhostHover",be)],"--n-text-color-disabled":te||I[createKey("textColorGhostDisabled",be)]}}else if(Q){const te=Be?I.textColor:Ne?I.textColorTertiary:I[createKey("color",be)],oe=U||te,_e=le!=="default"&&le!=="tertiary";Ie={"--n-color":_e?changeColor(oe,{alpha:Number(I.colorOpacitySecondary)}):I.colorSecondary,"--n-color-hover":_e?changeColor(oe,{alpha:Number(I.colorOpacitySecondaryHover)}):I.colorSecondaryHover,"--n-color-pressed":_e?changeColor(oe,{alpha:Number(I.colorOpacitySecondaryPressed)}):I.colorSecondaryPressed,"--n-color-focus":_e?changeColor(oe,{alpha:Number(I.colorOpacitySecondaryHover)}):I.colorSecondaryHover,"--n-color-disabled":I.colorSecondary,"--n-ripple-color":"#0000","--n-text-color":oe,"--n-text-color-hover":oe,"--n-text-color-pressed":oe,"--n-text-color-focus":oe,"--n-text-color-disabled":oe}}else if(fe||Se){const te=Be?I.textColor:Ne?I.textColorTertiary:I[createKey("color",be)],oe=U||te;fe?(Ie["--n-color"]=I.colorTertiary,Ie["--n-color-hover"]=I.colorTertiaryHover,Ie["--n-color-pressed"]=I.colorTertiaryPressed,Ie["--n-color-focus"]=I.colorSecondaryHover,Ie["--n-color-disabled"]=I.colorTertiary):(Ie["--n-color"]=I.colorQuaternary,Ie["--n-color-hover"]=I.colorQuaternaryHover,Ie["--n-color-pressed"]=I.colorQuaternaryPressed,Ie["--n-color-focus"]=I.colorQuaternaryHover,Ie["--n-color-disabled"]=I.colorQuaternary),Ie["--n-ripple-color"]="#0000",Ie["--n-text-color"]=oe,Ie["--n-text-color-hover"]=oe,Ie["--n-text-color-pressed"]=oe,Ie["--n-text-color-focus"]=oe,Ie["--n-text-color-disabled"]=oe}else Ie={"--n-color":U||I[createKey("color",be)],"--n-color-hover":U?createHoverColor(U):I[createKey("colorHover",be)],"--n-color-pressed":U?createPressedColor(U):I[createKey("colorPressed",be)],"--n-color-focus":U?createHoverColor(U):I[createKey("colorFocus",be)],"--n-color-disabled":U||I[createKey("colorDisabled",be)],"--n-ripple-color":U||I[createKey("rippleColor",be)],"--n-text-color":X||(U?I.textColorPrimary:Ne?I.textColorTertiary:I[createKey("textColor",be)]),"--n-text-color-hover":X||(U?I.textColorHoverPrimary:I[createKey("textColorHover",be)]),"--n-text-color-pressed":X||(U?I.textColorPressedPrimary:I[createKey("textColorPressed",be)]),"--n-text-color-focus":X||(U?I.textColorFocusPrimary:I[createKey("textColorFocus",be)]),"--n-text-color-disabled":X||(U?I.textColorDisabledPrimary:I[createKey("textColorDisabled",be)])};let Ve={"--n-border":"initial","--n-border-hover":"initial","--n-border-pressed":"initial","--n-border-focus":"initial","--n-border-disabled":"initial"};O?Ve={"--n-border":"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border-disabled":"none"}:Ve={"--n-border":I[createKey("border",be)],"--n-border-hover":I[createKey("borderHover",be)],"--n-border-pressed":I[createKey("borderPressed",be)],"--n-border-focus":I[createKey("borderFocus",be)],"--n-border-disabled":I[createKey("borderDisabled",be)]};const{[createKey("height",j)]:De,[createKey("fontSize",j)]:ve,[createKey("padding",j)]:ye,[createKey("paddingRound",j)]:we,[createKey("iconSize",j)]:ke,[createKey("borderRadius",j)]:Me,[createKey("iconMargin",j)]:Le,waveOpacity:Fe}=I,ze={"--n-width":H&&!O?De:"initial","--n-height":O?"initial":De,"--n-font-size":ve,"--n-padding":H||O?"initial":W?we:ye,"--n-icon-size":ke,"--n-icon-margin":Le,"--n-border-radius":O?"initial":H||W?De:Me};return Object.assign(Object.assign(Object.assign(Object.assign({"--n-bezier":D,"--n-bezier-ease-out":F,"--n-ripple-duration":N,"--n-opacity-disabled":q,"--n-wave-opacity":Fe},$e),Ie),Ve),ze)}),P=w?useThemeClass("button",computed(()=>{let T="";const{dashed:D,type:F,ghost:I,text:N,color:q,round:Y,circle:Z,textColor:j,secondary:ne,tertiary:le,quaternary:J,strong:O}=e;D&&(T+="a"),I&&(T+="b"),N&&(T+="c"),Y&&(T+="d"),Z&&(T+="e"),ne&&(T+="f"),le&&(T+="g"),J&&(T+="h"),O&&(T+="i"),q&&(T+=`j${color2Class(q)}`),j&&(T+=`k${color2Class(j)}`);const{value:U}=d;return T+=`l${U[0]}`,T+=`m${F[0]}`,T}),E,e):void 0;return{selfElRef:n,waveElRef:r,mergedClsPrefix:x,mergedFocusable:f,mergedSize:d,showBorder:s,enterPressed:o,rtlEnabled:M,handleMousedown:g,handleKeydown:v,handleBlur:_,handleKeyup:y,handleClick:m,customColorCssVars:computed(()=>{const{color:T}=e;if(!T)return null;const D=createHoverColor(T);return{"--n-border-color":T,"--n-border-color-hover":D,"--n-border-color-pressed":createPressedColor(T),"--n-border-color-focus":D,"--n-border-color-disabled":T}}),cssVars:w?void 0:E,themeClass:P==null?void 0:P.themeClass,onRender:P==null?void 0:P.onRender}},render(){const{mergedClsPrefix:e,tag:n,onRender:r}=this;r==null||r();const o=resolveWrappedSlot(this.$slots.default,s=>s&&h$1("span",{class:`${e}-button__content`},s));return h$1(n,{ref:"selfElRef",class:[this.themeClass,`${e}-button`,`${e}-button--${this.type}-type`,`${e}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${e}-button--rtl`,this.disabled&&`${e}-button--disabled`,this.block&&`${e}-button--block`,this.enterPressed&&`${e}-button--pressed`,!this.text&&this.dashed&&`${e}-button--dashed`,this.color&&`${e}-button--color`,this.secondary&&`${e}-button--secondary`,this.loading&&`${e}-button--loading`,this.ghost&&`${e}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},this.iconPlacement==="right"&&o,h$1(NFadeInExpandTransition,{width:!0},{default:()=>resolveWrappedSlot(this.$slots.icon,s=>(this.loading||this.renderIcon||s)&&h$1("span",{class:`${e}-button__icon`,style:{margin:isSlotEmpty(this.$slots.default)?"0":""}},h$1(NIconSwitchTransition,null,{default:()=>this.loading?h$1(NBaseLoading,{clsPrefix:e,key:"loading",class:`${e}-icon-slot`,strokeWidth:20}):h$1("div",{key:"icon",class:`${e}-icon-slot`,role:"none"},this.renderIcon?this.renderIcon():s)})))}),this.iconPlacement==="left"&&o,this.text?null:h$1(NBaseWave,{ref:"waveElRef",clsPrefix:e}),this.showBorder?h$1("div",{"aria-hidden":!0,class:`${e}-button__border`,style:this.customColorCssVars}):null,this.showBorder?h$1("div",{"aria-hidden":!0,class:`${e}-button__state-border`,style:this.customColorCssVars}):null)}}),NButton=Button,XButton=Button;function self$c(e){const{fontSize:n,boxShadow2:r,popoverColor:o,textColor2:s,borderRadius:u,borderColor:d,heightSmall:f,heightMedium:g,heightLarge:m,fontSizeSmall:y,fontSizeMedium:v,fontSizeLarge:_,dividerColor:w}=e;return{panelFontSize:n,boxShadow:r,color:o,textColor:s,borderRadius:u,border:`1px solid ${d}`,heightSmall:f,heightMedium:g,heightLarge:m,fontSizeSmall:y,fontSizeMedium:v,fontSizeLarge:_,dividerColor:w}}const colorPickerLight={name:"ColorPicker",common:commonLight,peers:{Input:inputLight$1,Button:buttonLight$1},self:self$c},colorPickerLight$1=colorPickerLight;function deriveDefaultValue(e,n){switch(e[0]){case"hex":return n?"#000000FF":"#000000";case"rgb":return n?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return n?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return n?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function getModeFromValue(e){return e===null?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function normalizeHue(e){return e=Math.round(e),e>=360?359:e<0?0:e}function normalizeAlpha(e){return e=Math.round(e*100)/100,e>1?1:e<0?0:e}const convert={rgb:{hex(e){return toHexaString(rgba(e))},hsl(e){const[n,r,o,s]=rgba(e);return toHslaString([...rgb2hsl(n,r,o),s])},hsv(e){const[n,r,o,s]=rgba(e);return toHsvaString([...rgb2hsv(n,r,o),s])}},hex:{rgb(e){return toRgbaString(rgba(e))},hsl(e){const[n,r,o,s]=rgba(e);return toHslaString([...rgb2hsl(n,r,o),s])},hsv(e){const[n,r,o,s]=rgba(e);return toHsvaString([...rgb2hsv(n,r,o),s])}},hsl:{hex(e){const[n,r,o,s]=hsla(e);return toHexaString([...hsl2rgb(n,r,o),s])},rgb(e){const[n,r,o,s]=hsla(e);return toRgbaString([...hsl2rgb(n,r,o),s])},hsv(e){const[n,r,o,s]=hsla(e);return toHsvaString([...hsl2hsv(n,r,o),s])}},hsv:{hex(e){const[n,r,o,s]=hsva(e);return toHexaString([...hsv2rgb(n,r,o),s])},rgb(e){const[n,r,o,s]=hsva(e);return toRgbaString([...hsv2rgb(n,r,o),s])},hsl(e){const[n,r,o,s]=hsva(e);return toHslaString([...hsv2hsl(n,r,o),s])}}};function convertColor$1(e,n,r){return r=r||getModeFromValue(e),r?r===n?e:convert[r][n](e):null}const HANDLE_SIZE$2="12px",HANDLE_SIZE_NUM$1=12,RADIUS$2="6px",RADIUS_NUM=6,GRADIENT="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",HueSlider=defineComponent({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const n=ref(null);function r(u){!n.value||(on$1("mousemove",document,o),on$1("mouseup",document,s),o(u))}function o(u){const{value:d}=n;if(!d)return;const{width:f,left:g}=d.getBoundingClientRect(),m=normalizeHue((u.clientX-g-RADIUS_NUM)/(f-HANDLE_SIZE_NUM$1)*360);e.onUpdateHue(m)}function s(){var u;off$1("mousemove",document,o),off$1("mouseup",document,s),(u=e.onComplete)===null||u===void 0||u.call(e)}return{railRef:n,handleMouseDown:r}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-slider`,style:{height:HANDLE_SIZE$2,borderRadius:RADIUS$2}},h$1("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:GRADIENT,height:HANDLE_SIZE$2,borderRadius:RADIUS$2,position:"relative"},onMousedown:this.handleMouseDown},h$1("div",{style:{position:"absolute",left:RADIUS$2,right:RADIUS$2,top:0,bottom:0}},h$1("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${RADIUS$2})`,borderRadius:RADIUS$2,width:HANDLE_SIZE$2,height:HANDLE_SIZE$2}},h$1("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:RADIUS$2,width:HANDLE_SIZE$2,height:HANDLE_SIZE$2}})))))}}),HANDLE_SIZE$1="12px",HANDLE_SIZE_NUM=12,RADIUS$1="6px",AlphaSlider=defineComponent({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const n=ref(null);function r(u){!n.value||!e.rgba||(on$1("mousemove",document,o),on$1("mouseup",document,s),o(u))}function o(u){const{value:d}=n;if(!d)return;const{width:f,left:g}=d.getBoundingClientRect(),m=(u.clientX-g)/(f-HANDLE_SIZE_NUM);e.onUpdateAlpha(normalizeAlpha(m))}function s(){var u;off$1("mousemove",document,o),off$1("mouseup",document,s),(u=e.onComplete)===null||u===void 0||u.call(e)}return{railRef:n,railBackgroundImage:computed(()=>{const{rgba:u}=e;return u?`linear-gradient(to right, rgba(${u[0]}, ${u[1]}, ${u[2]}, 0) 0%, rgba(${u[0]}, ${u[1]}, ${u[2]}, 1) 100%)`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:HANDLE_SIZE$1,borderRadius:RADIUS$1},onMousedown:this.handleMouseDown},h$1("div",{style:{borderRadius:RADIUS$1,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},h$1("div",{class:`${e}-color-picker-checkboard`}),h$1("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&h$1("div",{style:{position:"absolute",left:RADIUS$1,right:RADIUS$1,top:0,bottom:0}},h$1("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${this.alpha*100}% - ${RADIUS$1})`,borderRadius:RADIUS$1,width:HANDLE_SIZE$1,height:HANDLE_SIZE$1}},h$1("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:toRgbaString(this.rgba),borderRadius:RADIUS$1,width:HANDLE_SIZE$1,height:HANDLE_SIZE$1}}))))}}),HANDLE_SIZE="12px",RADIUS="6px",Pallete=defineComponent({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const n=ref(null);function r(u){!n.value||(on$1("mousemove",document,o),on$1("mouseup",document,s),o(u))}function o(u){const{value:d}=n;if(!d)return;const{width:f,height:g,left:m,bottom:y}=d.getBoundingClientRect(),v=(y-u.clientY)/g,_=(u.clientX-m)/f,w=100*(_>1?1:_<0?0:_),x=100*(v>1?1:v<0?0:v);e.onUpdateSV(w,x)}function s(){var u;off$1("mousemove",document,o),off$1("mouseup",document,s),(u=e.onComplete)===null||u===void 0||u.call(e)}return{palleteRef:n,handleColor:computed(()=>{const{rgba:u}=e;return u?`rgb(${u[0]}, ${u[1]}, ${u[2]})`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},h$1("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),h$1("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&h$1("div",{class:`${e}-color-picker-handle`,style:{width:HANDLE_SIZE,height:HANDLE_SIZE,borderRadius:RADIUS,left:`calc(${this.displayedSv[0]}% - ${RADIUS})`,bottom:`calc(${this.displayedSv[1]}% - ${RADIUS})`}},h$1("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:RADIUS,width:HANDLE_SIZE,height:HANDLE_SIZE}})))}}),colorPickerInjectionKey="n-color-picker";function normalizeRgbUnit(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),255)):!1}function normalizeHueUnit(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),360)):!1}function normalizeSlvUnit(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),100)):!1}function normalizeHexaUnit(e){const n=e.trim();return/^#[0-9a-fA-F]+$/.test(n)?[4,5,7,9].includes(n.length):!1}function normalizeAlphaUnit(e){return/^\d{1,3}\.?\d*%$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e)/100,100)):!1}const inputThemeOverrides={paddingSmall:"0 4px"},ColorInputUnit=defineComponent({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const n=ref(""),{themeRef:r}=inject(colorPickerInjectionKey,null);watchEffect(()=>{n.value=o()});function o(){const{value:d}=e;if(d===null)return"";const{label:f}=e;return f==="HEX"?d:f==="A"?`${Math.floor(d*100)}%`:String(Math.floor(d))}function s(d){n.value=d}function u(d){let f,g;switch(e.label){case"HEX":g=normalizeHexaUnit(d),g&&e.onUpdateValue(d),n.value=o();break;case"H":f=normalizeHueUnit(d),f===!1?n.value=o():e.onUpdateValue(f);break;case"S":case"L":case"V":f=normalizeSlvUnit(d),f===!1?n.value=o():e.onUpdateValue(f);break;case"A":f=normalizeAlphaUnit(d),f===!1?n.value=o():e.onUpdateValue(f);break;case"R":case"G":case"B":f=normalizeRgbUnit(d),f===!1?n.value=o():e.onUpdateValue(f);break}}return{mergedTheme:r,inputValue:n,handleInputChange:u,handleInputUpdateValue:s}},render(){const{mergedTheme:e}=this;return h$1(NInput,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:inputThemeOverrides,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),ColorInput=defineComponent({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(e){return{handleUnitUpdateValue(n,r){const{showAlpha:o}=e;if(e.mode==="hex"){e.onUpdateValue((o?toHexaString:toHexString)(r));return}let s;switch(e.valueArr===null?s=[0,0,0,0]:s=Array.from(e.valueArr),e.mode){case"hsv":s[n]=r,e.onUpdateValue((o?toHsvaString:toHsvString)(s));break;case"rgb":s[n]=r,e.onUpdateValue((o?toRgbaString:toRgbString)(s));break;case"hsl":s[n]=r,e.onUpdateValue((o?toHslaString:toHslString)(s));break}}}},render(){const{clsPrefix:e,modes:n}=this;return h$1("div",{class:`${e}-color-picker-input`},h$1("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:n.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),h$1(NInputGroup,null,{default:()=>{const{mode:r,valueArr:o,showAlpha:s}=this;if(r==="hex"){let u=null;try{u=o===null?null:(s?toHexaString:toHexString)(o)}catch{}return h$1(ColorInputUnit,{label:"HEX",showAlpha:s,value:u,onUpdateValue:d=>{this.handleUnitUpdateValue(0,d)}})}return(r+(s?"a":"")).split("").map((u,d)=>h$1(ColorInputUnit,{label:u.toUpperCase(),value:o===null?null:o[d],onUpdateValue:f=>{this.handleUnitUpdateValue(d,f)}}))}}))}}),ColorPickerTrigger=defineComponent({name:"ColorPickerTrigger",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:n,renderLabelRef:r}=inject(colorPickerInjectionKey,null);return()=>{const{hsla:o,value:s,clsPrefix:u,onClick:d,disabled:f}=e,g=n.label||r.value;return h$1("div",{class:[`${u}-color-picker-trigger`,f&&`${u}-color-picker-trigger--disabled`],onClick:f?void 0:d},h$1("div",{class:`${u}-color-picker-trigger__fill`},h$1("div",{class:`${u}-color-picker-checkboard`}),h$1("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:o?toHslaString(o):""}}),s&&o?h$1("div",{class:`${u}-color-picker-trigger__value`,style:{color:o[2]>50||o[3]<.5?"black":"white"}},g?g(s):s):null))}}});function normalizeColor(e,n){if(n==="hsv"){const[r,o,s,u]=hsva(e);return toRgbaString([...hsv2rgb(r,o,s),u])}return e}function getHexFromName(e){const n=document.createElement("canvas").getContext("2d");return n?(n.fillStyle=e,n.fillStyle):"#000000"}const ColorPickerSwatches=defineComponent({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){const n=computed(()=>e.swatches.map(u=>{const d=getModeFromValue(u);return{value:u,mode:d,legalValue:normalizeColor(u,d)}}));function r(u){const{mode:d}=e;let{value:f,mode:g}=u;return g||(g="hex",/^[a-zA-Z]+$/.test(f)?f=getHexFromName(f):(warn$2("color-picker",`color ${f} in swatches is invalid.`),f="#000000")),g===d?f:convertColor$1(f,d,g)}function o(u){e.onUpdateColor(r(u))}function s(u,d){u.key==="Enter"&&o(d)}return{parsedSwatchesRef:n,handleSwatchSelect:o,handleSwatchKeyDown:s}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map(n=>h$1("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(n)},onKeydown:r=>{this.handleSwatchKeyDown(r,n)}},h$1("div",{class:`${e}-color-picker-swatch__fill`,style:{background:n.legalValue}}))))}}),ColorPreview=defineComponent({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const n=getModeFromValue(e);return Boolean(!e||n&&n!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(e){function n(r){var o;const s=r.target.value;(o=e.onUpdateColor)===null||o===void 0||o.call(e,convertColor$1(s.toUpperCase(),e.mode,"hex")),r.stopPropagation()}return{handleChange:n}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-preview__preview`},h$1("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),h$1("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),style$b=c$1([cB("color-picker",`
 display: inline-block;
 box-sizing: border-box;
 height: var(--n-height);
 font-size: var(--n-font-size);
 width: 100%;
 position: relative;
 `),cB("color-picker-panel",`
 margin: 4px 0;
 width: 240px;
 font-size: var(--n-panel-font-size);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 `,[fadeInScaleUpTransition(),cB("input",`
 text-align: center;
 `)]),cB("color-picker-checkboard",`
 background: white; 
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[c$1("&::after",`
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 12px 12px;
 background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
 background-repeat: repeat;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),cB("color-picker-slider",`
 margin-bottom: 8px;
 position: relative;
 box-sizing: border-box;
 `,[cE("image",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),c$1("&::after",`
 content: "";
 position: absolute;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 pointer-events: none;
 `)]),cB("color-picker-handle",`
 z-index: 1;
 box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);
 position: absolute;
 background-color: white;
 overflow: hidden;
 `,[cE("fill",`
 box-sizing: border-box;
 border: 2px solid white;
 `)]),cB("color-picker-pallete",`
 height: 180px;
 position: relative;
 margin-bottom: 8px;
 cursor: crosshair;
 `,[cE("layer",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[cM("shadowed",`
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 `)])]),cB("color-picker-preview",`
 display: flex;
 `,[cE("sliders",`
 flex: 1 0 auto;
 `),cE("preview",`
 position: relative;
 height: 30px;
 width: 30px;
 margin: 0 0 8px 6px;
 border-radius: 50%;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 overflow: hidden;
 `),cE("fill",`
 display: block;
 width: 30px;
 height: 30px;
 `),cE("input",`
 position: absolute;
 top: 0;
 left: 0;
 width: 30px;
 height: 30px;
 opacity: 0;
 z-index: 1;
 `)]),cB("color-picker-input",`
 display: flex;
 align-items: center;
 `,[cB("input",`
 flex-grow: 1;
 flex-basis: 0;
 `),cE("mode",`
 width: 72px;
 text-align: center;
 `)]),cB("color-picker-control",`
 padding: 12px;
 `),cB("color-picker-action",`
 display: flex;
 margin-top: -4px;
 border-top: 1px solid var(--n-divider-color);
 padding: 8px 12px;
 justify-content: flex-end;
 `,[cB("button","margin-left: 8px;")]),cB("color-picker-trigger",`
 border: var(--n-border);
 height: 100%;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 cursor: pointer;
 `,[cE("value",`
 white-space: nowrap;
 position: relative;
 `),cE("fill",`
 border-radius: var(--n-border-radius);
 position: absolute;
 display: flex;
 align-items: center;
 justify-content: center;
 left: 4px;
 right: 4px;
 top: 4px;
 bottom: 4px;
 `),cM("disabled","cursor: not-allowed"),cB("color-picker-checkboard",`
 border-radius: var(--n-border-radius);
 `,[c$1("&::after",`
 --n-block-size: calc((var(--n-height) - 8px) / 3);
 background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);
 background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; 
 `)])]),cB("color-picker-swatches",`
 display: grid;
 grid-gap: 8px;
 flex-wrap: wrap;
 position: relative;
 grid-template-columns: repeat(auto-fill, 18px);
 margin-top: 10px;
 `,[cB("color-picker-swatch",`
 width: 18px;
 height: 18px;
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 8px 8px;
 background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;
 background-repeat: repeat;
 `,[cE("fill",`
 position: relative;
 width: 100%;
 height: 100%;
 border-radius: 3px;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 cursor: pointer;
 `),c$1("&:focus",`
 outline: none;
 `,[cE("fill",[c$1("&::after",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 background: inherit;
 filter: blur(2px);
 content: "";
 `)])])])])]),colorPickerProps=Object.assign(Object.assign({},useTheme.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:useAdjustedTo.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),NColorPicker=defineComponent({name:"ColorPicker",props:colorPickerProps,setup(e,{slots:n}){const r=ref(null);let o=null;const s=useFormItem(e),{mergedSizeRef:u,mergedDisabledRef:d}=s,{localeRef:f}=useLocale("global"),{mergedClsPrefixRef:g,namespaceRef:m,inlineThemeDisabled:y}=useConfig(e),v=useTheme("ColorPicker","-color-picker",style$b,colorPickerLight$1,e,g);provide(colorPickerInjectionKey,{themeRef:v,renderLabelRef:toRef(e,"renderLabel"),colorPickerSlots:n});const _=ref(e.defaultShow),w=useMergedState(toRef(e,"show"),_);function x(Fe){const{onUpdateShow:ze,"onUpdate:show":te}=e;ze&&call(ze,Fe),te&&call(te,Fe),_.value=Fe}const{defaultValue:k}=e,S=ref(k===void 0?deriveDefaultValue(e.modes,e.showAlpha):k),M=useMergedState(toRef(e,"value"),S),E=ref([M.value]),P=ref(0),T=computed(()=>getModeFromValue(M.value)),{modes:D}=e,F=ref(getModeFromValue(M.value)||D[0]||"rgb");function I(){const{modes:Fe}=e,{value:ze}=F,te=Fe.findIndex(oe=>oe===ze);~te?F.value=Fe[(te+1)%Fe.length]:F.value="rgb"}let N,q,Y,Z,j,ne,le,J;const O=computed(()=>{const{value:Fe}=M;if(!Fe)return null;switch(T.value){case"hsv":return hsva(Fe);case"hsl":return[N,q,Y,J]=hsla(Fe),[...hsl2hsv(N,q,Y),J];case"rgb":case"hex":return[j,ne,le,J]=rgba(Fe),[...rgb2hsv(j,ne,le),J]}}),U=computed(()=>{const{value:Fe}=M;if(!Fe)return null;switch(T.value){case"rgb":case"hex":return rgba(Fe);case"hsv":return[N,q,Z,J]=hsva(Fe),[...hsv2rgb(N,q,Z),J];case"hsl":return[N,q,Y,J]=hsla(Fe),[...hsl2rgb(N,q,Y),J]}}),W=computed(()=>{const{value:Fe}=M;if(!Fe)return null;switch(T.value){case"hsl":return hsla(Fe);case"hsv":return[N,q,Z,J]=hsva(Fe),[...hsv2hsl(N,q,Z),J];case"rgb":case"hex":return[j,ne,le,J]=rgba(Fe),[...rgb2hsl(j,ne,le),J]}}),H=computed(()=>{switch(F.value){case"rgb":case"hex":return U.value;case"hsv":return O.value;case"hsl":return W.value}}),X=ref(0),Q=ref(1),fe=ref([0,0]);function Se(Fe,ze){const{value:te}=O,oe=X.value,_e=te?te[3]:1;fe.value=[Fe,ze];const{showAlpha:Ce}=e;switch(F.value){case"hsv":Ie((Ce?toHsvaString:toHsvString)([oe,Fe,ze,_e]),"cursor");break;case"hsl":Ie((Ce?toHslaString:toHslString)([...hsv2hsl(oe,Fe,ze),_e]),"cursor");break;case"rgb":Ie((Ce?toRgbaString:toRgbString)([...hsv2rgb(oe,Fe,ze),_e]),"cursor");break;case"hex":Ie((Ce?toHexaString:toHexString)([...hsv2rgb(oe,Fe,ze),_e]),"cursor");break}}function Pe(Fe){X.value=Fe;const{value:ze}=O;if(!ze)return;const[,te,oe,_e]=ze,{showAlpha:Ce}=e;switch(F.value){case"hsv":Ie((Ce?toHsvaString:toHsvString)([Fe,te,oe,_e]),"cursor");break;case"rgb":Ie((Ce?toRgbaString:toRgbString)([...hsv2rgb(Fe,te,oe),_e]),"cursor");break;case"hex":Ie((Ce?toHexaString:toHexString)([...hsv2rgb(Fe,te,oe),_e]),"cursor");break;case"hsl":Ie((Ce?toHslaString:toHslString)([...hsv2hsl(Fe,te,oe),_e]),"cursor");break}}function $e(Fe){switch(F.value){case"hsv":[N,q,Z]=O.value,Ie(toHsvaString([N,q,Z,Fe]),"cursor");break;case"rgb":[j,ne,le]=U.value,Ie(toRgbaString([j,ne,le,Fe]),"cursor");break;case"hex":[j,ne,le]=U.value,Ie(toHexaString([j,ne,le,Fe]),"cursor");break;case"hsl":[N,q,Y]=W.value,Ie(toHslaString([N,q,Y,Fe]),"cursor");break}Q.value=Fe}function Ie(Fe,ze){ze==="cursor"?o=Fe:o=null;const{nTriggerFormChange:te,nTriggerFormInput:oe}=s,{onUpdateValue:_e,"onUpdate:value":Ce}=e;_e&&call(_e,Fe),Ce&&call(Ce,Fe),te(),oe(),S.value=Fe}function Ne(Fe){Ie(Fe,"input"),nextTick(Be)}function Be(Fe=!0){const{value:ze}=M;if(ze){const{nTriggerFormChange:te,nTriggerFormInput:oe}=s,{onComplete:_e}=e;_e&&_e(ze);const{value:Ce}=E,{value:Ee}=P;Fe&&(Ce.splice(Ee+1,Ce.length,ze),P.value=Ee+1),te(),oe()}}function be(){const{value:Fe}=P;Fe-1<0||(Ie(E.value[Fe-1],"input"),Be(!1),P.value=Fe-1)}function Ve(){const{value:Fe}=P;Fe<0||Fe+1>=E.value.length||(Ie(E.value[Fe+1],"input"),Be(!1),P.value=Fe+1)}function De(){Ie(null,"input");const{onClear:Fe}=e;Fe&&Fe(),x(!1)}function ve(){const{value:Fe}=M,{onConfirm:ze}=e;ze&&ze(Fe),x(!1)}const ye=computed(()=>P.value>=1),we=computed(()=>{const{value:Fe}=E;return Fe.length>1&&P.value<Fe.length-1});watch(w,Fe=>{Fe||(E.value=[M.value],P.value=0)}),watchEffect(()=>{if(!(o&&o===M.value)){const{value:Fe}=O;Fe&&(X.value=Fe[0],Q.value=Fe[3],fe.value=[Fe[1],Fe[2]])}o=null});const ke=computed(()=>{const{value:Fe}=u,{common:{cubicBezierEaseInOut:ze},self:{textColor:te,color:oe,panelFontSize:_e,boxShadow:Ce,border:Ee,borderRadius:Te,dividerColor:Re,[createKey("height",Fe)]:Oe,[createKey("fontSize",Fe)]:je}}=v.value;return{"--n-bezier":ze,"--n-text-color":te,"--n-color":oe,"--n-panel-font-size":_e,"--n-font-size":je,"--n-box-shadow":Ce,"--n-border":Ee,"--n-border-radius":Te,"--n-height":Oe,"--n-divider-color":Re}}),Me=y?useThemeClass("color-picker",computed(()=>u.value[0]),ke,e):void 0;function Le(){var Fe;const{value:ze}=U,{value:te}=X,{internalActions:oe,modes:_e,actions:Ce}=e,{value:Ee}=v,{value:Te}=g;return h$1("div",{class:[`${Te}-color-picker-panel`,Me==null?void 0:Me.themeClass.value],onDragstart:Re=>{Re.preventDefault()},style:y?void 0:ke.value},h$1("div",{class:`${Te}-color-picker-control`},h$1(Pallete,{clsPrefix:Te,rgba:ze,displayedHue:te,displayedSv:fe.value,onUpdateSV:Se,onComplete:Be}),h$1("div",{class:`${Te}-color-picker-preview`},h$1("div",{class:`${Te}-color-picker-preview__sliders`},h$1(HueSlider,{clsPrefix:Te,hue:te,onUpdateHue:Pe,onComplete:Be}),e.showAlpha?h$1(AlphaSlider,{clsPrefix:Te,rgba:ze,alpha:Q.value,onUpdateAlpha:$e,onComplete:Be}):null),e.showPreview?h$1(ColorPreview,{clsPrefix:Te,mode:F.value,color:U.value&&toHexString(U.value),onUpdateColor:Re=>{Ie(Re,"input")}}):null),h$1(ColorInput,{clsPrefix:Te,showAlpha:e.showAlpha,mode:F.value,modes:_e,onUpdateMode:I,value:M.value,valueArr:H.value,onUpdateValue:Ne}),((Fe=e.swatches)===null||Fe===void 0?void 0:Fe.length)&&h$1(ColorPickerSwatches,{clsPrefix:Te,mode:F.value,swatches:e.swatches,onUpdateColor:Re=>{Ie(Re,"input")}})),Ce!=null&&Ce.length?h$1("div",{class:`${Te}-color-picker-action`},Ce.includes("confirm")&&h$1(NButton,{size:"small",onClick:ve,theme:Ee.peers.Button,themeOverrides:Ee.peerOverrides.Button},{default:()=>f.value.confirm}),Ce.includes("clear")&&h$1(NButton,{size:"small",onClick:De,disabled:!M.value,theme:Ee.peers.Button,themeOverrides:Ee.peerOverrides.Button},{default:()=>f.value.clear})):null,n.action?h$1("div",{class:`${Te}-color-picker-action`},{default:n.action}):oe?h$1("div",{class:`${Te}-color-picker-action`},oe.includes("undo")&&h$1(NButton,{size:"small",onClick:be,disabled:!ye.value,theme:Ee.peers.Button,themeOverrides:Ee.peerOverrides.Button},{default:()=>f.value.undo}),oe.includes("redo")&&h$1(NButton,{size:"small",onClick:Ve,disabled:!we.value,theme:Ee.peers.Button,themeOverrides:Ee.peerOverrides.Button},{default:()=>f.value.redo})):null)}return{mergedClsPrefix:g,namespace:m,selfRef:r,hsla:W,rgba:U,mergedShow:w,mergedDisabled:d,isMounted:isMounted(),adjustedTo:useAdjustedTo(e),mergedValue:M,handleTriggerClick(){x(!0)},handleClickOutside(Fe){var ze;!((ze=r.value)===null||ze===void 0)&&ze.contains(getPreciseEventTarget(Fe))||x(!1)},renderPanel:Le,cssVars:y?void 0:ke,themeClass:Me==null?void 0:Me.themeClass,onRender:Me==null?void 0:Me.onRender}},render(){const{$slots:e,mergedClsPrefix:n,onRender:r}=this;return r==null||r(),h$1("div",{class:[this.themeClass,`${n}-color-picker`],ref:"selfRef",style:this.cssVars},h$1(VBinder,null,{default:()=>[h$1(VTarget,null,{default:()=>h$1(ColorPickerTrigger,{clsPrefix:n,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick},{label:e.label})}),h$1(VFollower,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,to:this.adjustedTo},{default:()=>h$1(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?withDirectives(this.renderPanel(),[[clickoutside$1,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),commonVariables$1={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeIconSize:"18px",closeSize:"22px"};function self$b(e){const{primaryColor:n,borderRadius:r,lineHeight:o,fontSize:s,cardColor:u,textColor2:d,textColor1:f,dividerColor:g,fontWeightStrong:m,closeIconColor:y,closeIconColorHover:v,closeIconColorPressed:_,closeColorHover:w,closeColorPressed:x,modalColor:k,boxShadow1:S,popoverColor:M,actionColor:E}=e;return Object.assign(Object.assign({},commonVariables$1),{lineHeight:o,color:u,colorModal:k,colorPopover:M,colorTarget:n,colorEmbedded:E,colorEmbeddedModal:E,colorEmbeddedPopover:E,textColor:d,titleTextColor:f,borderColor:g,actionColor:E,titleFontWeight:m,closeColorHover:w,closeColorPressed:x,closeBorderRadius:r,closeIconColor:y,closeIconColorHover:v,closeIconColorPressed:_,fontSizeSmall:s,fontSizeMedium:s,fontSizeLarge:s,fontSizeHuge:s,boxShadow:S,borderRadius:r})}const cardLight={name:"Card",common:commonLight,self:self$b},cardLight$1=cardLight,style$a=c$1([cB("card",`
 font-size: var(--n-font-size);
 line-height: var(--n-line-height);
 display: flex;
 flex-direction: column;
 width: 100%;
 box-sizing: border-box;
 position: relative;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 color: var(--n-text-color);
 word-break: break-word;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[asModal({background:"var(--n-color-modal)"}),cM("hoverable",[c$1("&:hover","box-shadow: var(--n-box-shadow);")]),cM("content-segmented",[c$1(">",[cE("content",{paddingTop:"var(--n-padding-bottom)"})])]),cM("content-soft-segmented",[c$1(">",[cE("content",`
 margin: 0 var(--n-padding-left);
 padding: var(--n-padding-bottom) 0;
 `)])]),cM("footer-segmented",[c$1(">",[cE("footer",{paddingTop:"var(--n-padding-bottom)"})])]),cM("footer-soft-segmented",[c$1(">",[cE("footer",`
 padding: var(--n-padding-bottom) 0;
 margin: 0 var(--n-padding-left);
 `)])]),c$1(">",[cB("card-header",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 padding:
 var(--n-padding-top)
 var(--n-padding-left)
 var(--n-padding-bottom)
 var(--n-padding-left);
 `,[cE("main",`
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 min-width: 0;
 color: var(--n-title-text-color);
 `),cE("extra",`
 display: flex;
 align-items: center;
 font-size: var(--n-font-size);
 font-weight: 400;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),cE("close",`
 margin: 0 0 0 8px;
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),cE("action",`
 box-sizing: border-box;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 background-clip: padding-box;
 background-color: var(--n-action-color);
 `),cE("content","flex: 1; min-width: 0;"),cE("content, footer",`
 box-sizing: border-box;
 padding: 0 var(--n-padding-left) var(--n-padding-bottom) var(--n-padding-left);
 font-size: var(--n-font-size);
 `,[c$1("&:first-child",{paddingTop:"var(--n-padding-bottom)"})]),cE("action",`
 background-color: var(--n-action-color);
 padding: var(--n-padding-bottom) var(--n-padding-left);
 border-bottom-left-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 `)]),cB("card-cover",`
 overflow: hidden;
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 `,[c$1("img",`
 display: block;
 width: 100%;
 `)]),cM("bordered",`
 border: 1px solid var(--n-border-color);
 `,[c$1("&:target","border-color: var(--n-color-target);")]),cM("action-segmented",[c$1(">",[cE("action",[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("content-segmented, content-soft-segmented",[c$1(">",[cE("content",{transition:"border-color 0.3s var(--n-bezier)"},[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("footer-segmented, footer-soft-segmented",[c$1(">",[cE("footer",{transition:"border-color 0.3s var(--n-bezier)"},[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("embedded",`
 background-color: var(--n-color-embedded);
 `)]),insideModal(cB("card",`
 background: var(--n-color-modal);
 `,[cM("embedded",`
 background-color: var(--n-color-embedded-modal);
 `)])),insidePopover(cB("card",`
 background: var(--n-color-popover);
 `,[cM("embedded",`
 background-color: var(--n-color-embedded-popover);
 `)]))]),cardBaseProps={title:[String,Function],contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],headerExtraClass:String,headerExtraStyle:[Object,String],footerClass:String,footerStyle:[Object,String],embedded:Boolean,segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:Boolean,hoverable:Boolean,role:String,onClose:[Function,Array],tag:{type:String,default:"div"},cover:Function,content:[String,Function],footer:Function,action:Function,headerExtra:Function},cardBasePropKeys=keysOf(cardBaseProps),cardProps=Object.assign(Object.assign({},useTheme.props),cardBaseProps),NCard=defineComponent({name:"Card",props:cardProps,setup(e){const n=()=>{const{onClose:m}=e;m&&call(m)},{inlineThemeDisabled:r,mergedClsPrefixRef:o,mergedRtlRef:s}=useConfig(e),u=useTheme("Card","-card",style$a,cardLight$1,e,o),d=useRtl("Card",s,o),f=computed(()=>{const{size:m}=e,{self:{color:y,colorModal:v,colorTarget:_,textColor:w,titleTextColor:x,titleFontWeight:k,borderColor:S,actionColor:M,borderRadius:E,lineHeight:P,closeIconColor:T,closeIconColorHover:D,closeIconColorPressed:F,closeColorHover:I,closeColorPressed:N,closeBorderRadius:q,closeIconSize:Y,closeSize:Z,boxShadow:j,colorPopover:ne,colorEmbedded:le,colorEmbeddedModal:J,colorEmbeddedPopover:O,[createKey("padding",m)]:U,[createKey("fontSize",m)]:W,[createKey("titleFontSize",m)]:H},common:{cubicBezierEaseInOut:X}}=u.value,{top:Q,left:fe,bottom:Se}=getMargin(U);return{"--n-bezier":X,"--n-border-radius":E,"--n-color":y,"--n-color-modal":v,"--n-color-popover":ne,"--n-color-embedded":le,"--n-color-embedded-modal":J,"--n-color-embedded-popover":O,"--n-color-target":_,"--n-text-color":w,"--n-line-height":P,"--n-action-color":M,"--n-title-text-color":x,"--n-title-font-weight":k,"--n-close-icon-color":T,"--n-close-icon-color-hover":D,"--n-close-icon-color-pressed":F,"--n-close-color-hover":I,"--n-close-color-pressed":N,"--n-border-color":S,"--n-box-shadow":j,"--n-padding-top":Q,"--n-padding-bottom":Se,"--n-padding-left":fe,"--n-font-size":W,"--n-title-font-size":H,"--n-close-size":Z,"--n-close-icon-size":Y,"--n-close-border-radius":q}}),g=r?useThemeClass("card",computed(()=>e.size[0]),f,e):void 0;return{rtlEnabled:d,mergedClsPrefix:o,mergedTheme:u,handleCloseClick:n,cssVars:r?void 0:f,themeClass:g==null?void 0:g.themeClass,onRender:g==null?void 0:g.onRender}},render(){const{segmented:e,bordered:n,hoverable:r,mergedClsPrefix:o,rtlEnabled:s,onRender:u,embedded:d,tag:f,$slots:g}=this;return u==null||u(),h$1(f,{class:[`${o}-card`,this.themeClass,d&&`${o}-card--embedded`,{[`${o}-card--rtl`]:s,[`${o}-card--content${typeof e!="boolean"&&e.content==="soft"?"-soft":""}-segmented`]:e===!0||e!==!1&&e.content,[`${o}-card--footer${typeof e!="boolean"&&e.footer==="soft"?"-soft":""}-segmented`]:e===!0||e!==!1&&e.footer,[`${o}-card--action-segmented`]:e===!0||e!==!1&&e.action,[`${o}-card--bordered`]:n,[`${o}-card--hoverable`]:r}],style:this.cssVars,role:this.role},resolveWrappedSlot(g.cover,m=>{const y=this.cover?ensureValidVNode([this.cover()]):m;return y&&h$1("div",{class:`${o}-card-cover`,role:"none"},y)}),resolveWrappedSlot(g.header,m=>{const{title:y}=this,v=y?ensureValidVNode(typeof y=="function"?[y()]:[y]):m;return v||this.closable?h$1("div",{class:[`${o}-card-header`,this.headerClass],style:this.headerStyle,role:"heading"},h$1("div",{class:`${o}-card-header__main`,role:"heading"},v),resolveWrappedSlot(g["header-extra"],_=>{const w=this.headerExtra?ensureValidVNode([this.headerExtra()]):_;return w&&h$1("div",{class:[`${o}-card-header__extra`,this.headerExtraClass],style:this.headerExtraStyle},w)}),this.closable&&h$1(NBaseClose,{clsPrefix:o,class:`${o}-card-header__close`,onClick:this.handleCloseClick,absolute:!0})):null}),resolveWrappedSlot(g.default,m=>{const{content:y}=this,v=y?ensureValidVNode(typeof y=="function"?[y()]:[y]):m;return v&&h$1("div",{class:[`${o}-card__content`,this.contentClass],style:this.contentStyle,role:"none"},v)}),resolveWrappedSlot(g.footer,m=>{const y=this.footer?ensureValidVNode([this.footer()]):m;return y&&h$1("div",{class:[`${o}-card__footer`,this.footerClass],style:this.footerStyle,role:"none"},y)}),resolveWrappedSlot(g.action,m=>{const y=this.action?ensureValidVNode([this.action()]):m;return y&&h$1("div",{class:`${o}-card__action`,role:"none"},y)}))}}),configProviderProps={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,katex:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,preflightStyleDisabled:Boolean,styleMountTarget:Object,inlineThemeDisabled:{type:Boolean,default:void 0},as:{type:String,validator:()=>(warn$2("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}},NConfigProvider=defineComponent({name:"ConfigProvider",alias:["App"],props:configProviderProps,setup(e){const n=inject(configProviderInjectionKey,null),r=computed(()=>{const{theme:k}=e;if(k===null)return;const S=n==null?void 0:n.mergedThemeRef.value;return k===void 0?S:S===void 0?k:Object.assign({},S,k)}),o=computed(()=>{const{themeOverrides:k}=e;if(k!==null){if(k===void 0)return n==null?void 0:n.mergedThemeOverridesRef.value;{const S=n==null?void 0:n.mergedThemeOverridesRef.value;return S===void 0?k:merge$3({},S,k)}}}),s=useMemo(()=>{const{namespace:k}=e;return k===void 0?n==null?void 0:n.mergedNamespaceRef.value:k}),u=useMemo(()=>{const{bordered:k}=e;return k===void 0?n==null?void 0:n.mergedBorderedRef.value:k}),d=computed(()=>{const{icons:k}=e;return k===void 0?n==null?void 0:n.mergedIconsRef.value:k}),f=computed(()=>{const{componentOptions:k}=e;return k!==void 0?k:n==null?void 0:n.mergedComponentPropsRef.value}),g=computed(()=>{const{clsPrefix:k}=e;return k!==void 0?k:n?n.mergedClsPrefixRef.value:defaultClsPrefix}),m=computed(()=>{var k;const{rtl:S}=e;if(S===void 0)return n==null?void 0:n.mergedRtlRef.value;const M={};for(const E of S)M[E.name]=markRaw(E),(k=E.peers)===null||k===void 0||k.forEach(P=>{P.name in M||(M[P.name]=markRaw(P))});return M}),y=computed(()=>e.breakpoints||(n==null?void 0:n.mergedBreakpointsRef.value)),v=e.inlineThemeDisabled||(n==null?void 0:n.inlineThemeDisabled),_=e.preflightStyleDisabled||(n==null?void 0:n.preflightStyleDisabled),w=e.styleMountTarget||(n==null?void 0:n.styleMountTarget),x=computed(()=>{const{value:k}=r,{value:S}=o,M=S&&Object.keys(S).length!==0,E=k==null?void 0:k.name;return E?M?`${E}-${murmur2(JSON.stringify(o.value))}`:E:M?murmur2(JSON.stringify(o.value)):""});return provide(configProviderInjectionKey,{mergedThemeHashRef:x,mergedBreakpointsRef:y,mergedRtlRef:m,mergedIconsRef:d,mergedComponentPropsRef:f,mergedBorderedRef:u,mergedNamespaceRef:s,mergedClsPrefixRef:g,mergedLocaleRef:computed(()=>{const{locale:k}=e;if(k!==null)return k===void 0?n==null?void 0:n.mergedLocaleRef.value:k}),mergedDateLocaleRef:computed(()=>{const{dateLocale:k}=e;if(k!==null)return k===void 0?n==null?void 0:n.mergedDateLocaleRef.value:k}),mergedHljsRef:computed(()=>{const{hljs:k}=e;return k===void 0?n==null?void 0:n.mergedHljsRef.value:k}),mergedKatexRef:computed(()=>{const{katex:k}=e;return k===void 0?n==null?void 0:n.mergedKatexRef.value:k}),mergedThemeRef:r,mergedThemeOverridesRef:o,inlineThemeDisabled:v||!1,preflightStyleDisabled:_||!1,styleMountTarget:w}),{mergedClsPrefix:g,mergedBordered:u,mergedNamespace:s,mergedTheme:r,mergedThemeOverrides:o}},render(){var e,n,r,o;return this.abstract?(o=(r=this.$slots).default)===null||o===void 0?void 0:o.call(r):h$1(this.as||this.tag,{class:`${this.mergedClsPrefix||defaultClsPrefix}-config-provider`},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}});function self$a(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}const popselectLight={name:"Popselect",common:commonLight,peers:{Popover:popoverLight$1,InternalSelectMenu:internalSelectMenuLight$1},self:self$a},popselectLight$1=popselectLight,popselectInjectionKey="n-popselect",style$9=cB("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),panelProps={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},panelPropKeys=keysOf(panelProps),NPopselectPanel=defineComponent({name:"PopselectPanel",props:panelProps,setup(e){const n=inject(popselectInjectionKey),{mergedClsPrefixRef:r,inlineThemeDisabled:o}=useConfig(e),s=useTheme("Popselect","-pop-select",style$9,popselectLight$1,n.props,r),u=computed(()=>createTreeMate(e.options,createTmOptions("value","children")));function d(_,w){const{onUpdateValue:x,"onUpdate:value":k,onChange:S}=e;x&&call(x,_,w),k&&call(k,_,w),S&&call(S,_,w)}function f(_){m(_.key)}function g(_){!happensIn(_,"action")&&!happensIn(_,"empty")&&!happensIn(_,"header")&&_.preventDefault()}function m(_){const{value:{getNode:w}}=u;if(e.multiple)if(Array.isArray(e.value)){const x=[],k=[];let S=!0;e.value.forEach(M=>{if(M===_){S=!1;return}const E=w(M);E&&(x.push(E.key),k.push(E.rawNode))}),S&&(x.push(_),k.push(w(_).rawNode)),d(x,k)}else{const x=w(_);x&&d([_],[x.rawNode])}else if(e.value===_&&e.cancelable)d(null,null);else{const x=w(_);x&&d(_,x.rawNode);const{"onUpdate:show":k,onUpdateShow:S}=n.props;k&&call(k,!1),S&&call(S,!1),n.setShow(!1)}nextTick(()=>{n.syncPosition()})}watch(toRef(e,"options"),()=>{nextTick(()=>{n.syncPosition()})});const y=computed(()=>{const{self:{menuBoxShadow:_}}=s.value;return{"--n-menu-box-shadow":_}}),v=o?useThemeClass("select",void 0,y,n.props):void 0;return{mergedTheme:n.mergedThemeRef,mergedClsPrefix:r,treeMate:u,handleToggle:f,handleMenuMousedown:g,cssVars:o?void 0:y,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),h$1(NInternalSelectMenu,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var n,r;return((r=(n=this.$slots).header)===null||r===void 0?void 0:r.call(n))||[]},action:()=>{var n,r;return((r=(n=this.$slots).action)===null||r===void 0?void 0:r.call(n))||[]},empty:()=>{var n,r;return((r=(n=this.$slots).empty)===null||r===void 0?void 0:r.call(n))||[]}})}}),popselectProps=Object.assign(Object.assign(Object.assign(Object.assign({},useTheme.props),omit(popoverBaseProps,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},popoverBaseProps.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),panelProps),NPopselect=defineComponent({name:"Popselect",props:popselectProps,inheritAttrs:!1,__popover__:!0,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=useTheme("Popselect","-popselect",void 0,popselectLight$1,e,n),o=ref(null);function s(){var f;(f=o.value)===null||f===void 0||f.syncPosition()}function u(f){var g;(g=o.value)===null||g===void 0||g.setShow(f)}return provide(popselectInjectionKey,{props:e,mergedThemeRef:r,syncPosition:s,setShow:u}),Object.assign(Object.assign({},{syncPosition:s,setShow:u}),{popoverInstRef:o,mergedTheme:r})},render(){const{mergedTheme:e}=this,n={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(r,o,s,u,d)=>{const{$attrs:f}=this;return h$1(NPopselectPanel,Object.assign({},f,{class:[f.class,r],style:[f.style,...s]},keep(this.$props,panelPropKeys),{ref:createRefSetter(o),onMouseenter:mergeEventHandlers([u,f.onMouseenter]),onMouseleave:mergeEventHandlers([d,f.onMouseleave])}),{header:()=>{var g,m;return(m=(g=this.$slots).header)===null||m===void 0?void 0:m.call(g)},action:()=>{var g,m;return(m=(g=this.$slots).action)===null||m===void 0?void 0:m.call(g)},empty:()=>{var g,m;return(m=(g=this.$slots).empty)===null||m===void 0?void 0:m.call(g)}})}};return h$1(NPopover,Object.assign({},omit(this.$props,panelPropKeys),n,{internalDeactivateImmediately:!0}),{trigger:()=>{var r,o;return(o=(r=this.$slots).default)===null||o===void 0?void 0:o.call(r)}})}});function self$9(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}const selectLight={name:"Select",common:commonLight,peers:{InternalSelection:internalSelectionLight$1,InternalSelectMenu:internalSelectMenuLight$1},self:self$9},selectLight$1=selectLight,style$8=c$1([cB("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),cB("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[fadeInScaleUpTransition({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),selectProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,menuSize:{type:String},filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),NSelect=defineComponent({name:"Select",props:selectProps,setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:r,namespaceRef:o,inlineThemeDisabled:s}=useConfig(e),u=useTheme("Select","-select",style$8,selectLight$1,e,n),d=ref(e.defaultValue),f=toRef(e,"value"),g=useMergedState(f,d),m=ref(!1),y=ref(""),v=useCompitable(e,["items","options"]),_=ref([]),w=ref([]),x=computed(()=>w.value.concat(_.value).concat(v.value)),k=computed(()=>{const{filter:qe}=e;if(qe)return qe;const{labelField:He,valueField:Ke}=e;return(ot,at)=>{if(!at)return!1;const et=at[He];if(typeof et=="string")return patternMatched(ot,et);const Je=at[Ke];return typeof Je=="string"?patternMatched(ot,Je):typeof Je=="number"?patternMatched(ot,String(Je)):!1}}),S=computed(()=>{if(e.remote)return v.value;{const{value:qe}=x,{value:He}=y;return!He.length||!e.filterable?qe:filterOptions(qe,k.value,He,e.childrenField)}}),M=computed(()=>{const{valueField:qe,childrenField:He}=e,Ke=createTmOptions(qe,He);return createTreeMate(S.value,Ke)}),E=computed(()=>createValOptMap(x.value,e.valueField,e.childrenField)),P=ref(!1),T=useMergedState(toRef(e,"show"),P),D=ref(null),F=ref(null),I=ref(null),{localeRef:N}=useLocale("Select"),q=computed(()=>{var qe;return(qe=e.placeholder)!==null&&qe!==void 0?qe:N.value.placeholder}),Y=[],Z=ref(new Map),j=computed(()=>{const{fallbackOption:qe}=e;if(qe===void 0){const{labelField:He,valueField:Ke}=e;return ot=>({[He]:String(ot),[Ke]:ot})}return qe===!1?!1:He=>Object.assign(qe(He),{value:He})});function ne(qe){const He=e.remote,{value:Ke}=Z,{value:ot}=E,{value:at}=j,et=[];return qe.forEach(Je=>{if(ot.has(Je))et.push(ot.get(Je));else if(He&&Ke.has(Je))et.push(Ke.get(Je));else if(at){const nt=at(Je);nt&&et.push(nt)}}),et}const le=computed(()=>{if(e.multiple){const{value:qe}=g;return Array.isArray(qe)?ne(qe):[]}return null}),J=computed(()=>{const{value:qe}=g;return!e.multiple&&!Array.isArray(qe)?qe===null?null:ne([qe])[0]||null:null}),O=useFormItem(e),{mergedSizeRef:U,mergedDisabledRef:W,mergedStatusRef:H}=O;function X(qe,He){const{onChange:Ke,"onUpdate:value":ot,onUpdateValue:at}=e,{nTriggerFormChange:et,nTriggerFormInput:Je}=O;Ke&&call(Ke,qe,He),at&&call(at,qe,He),ot&&call(ot,qe,He),d.value=qe,et(),Je()}function Q(qe){const{onBlur:He}=e,{nTriggerFormBlur:Ke}=O;He&&call(He,qe),Ke()}function fe(){const{onClear:qe}=e;qe&&call(qe)}function Se(qe){const{onFocus:He,showOnFocus:Ke}=e,{nTriggerFormFocus:ot}=O;He&&call(He,qe),ot(),Ke&&Be()}function Pe(qe){const{onSearch:He}=e;He&&call(He,qe)}function $e(qe){const{onScroll:He}=e;He&&call(He,qe)}function Ie(){var qe;const{remote:He,multiple:Ke}=e;if(He){const{value:ot}=Z;if(Ke){const{valueField:at}=e;(qe=le.value)===null||qe===void 0||qe.forEach(et=>{ot.set(et[at],et)})}else{const at=J.value;at&&ot.set(at[e.valueField],at)}}}function Ne(qe){const{onUpdateShow:He,"onUpdate:show":Ke}=e;He&&call(He,qe),Ke&&call(Ke,qe),P.value=qe}function Be(){W.value||(Ne(!0),P.value=!0,e.filterable&&Xe())}function be(){Ne(!1)}function Ve(){y.value="",w.value=Y}const De=ref(!1);function ve(){e.filterable&&(De.value=!0)}function ye(){e.filterable&&(De.value=!1,T.value||Ve())}function we(){W.value||(T.value?e.filterable?Xe():be():Be())}function ke(qe){var He,Ke;!((Ke=(He=I.value)===null||He===void 0?void 0:He.selfRef)===null||Ke===void 0)&&Ke.contains(qe.relatedTarget)||(m.value=!1,Q(qe),be())}function Me(qe){Se(qe),m.value=!0}function Le(){m.value=!0}function Fe(qe){var He;!((He=D.value)===null||He===void 0)&&He.$el.contains(qe.relatedTarget)||(m.value=!1,Q(qe),be())}function ze(){var qe;(qe=D.value)===null||qe===void 0||qe.focus(),be()}function te(qe){var He;T.value&&(!((He=D.value)===null||He===void 0)&&He.$el.contains(getPreciseEventTarget(qe))||be())}function oe(qe){if(!Array.isArray(qe))return[];if(j.value)return Array.from(qe);{const{remote:He}=e,{value:Ke}=E;if(He){const{value:ot}=Z;return qe.filter(at=>Ke.has(at)||ot.has(at))}else return qe.filter(ot=>Ke.has(ot))}}function _e(qe){Ce(qe.rawNode)}function Ce(qe){if(W.value)return;const{tag:He,remote:Ke,clearFilterAfterSelect:ot,valueField:at}=e;if(He&&!Ke){const{value:et}=w,Je=et[0]||null;if(Je){const nt=_.value;nt.length?nt.push(Je):_.value=[Je],w.value=Y}}if(Ke&&Z.value.set(qe[at],qe),e.multiple){const et=oe(g.value),Je=et.findIndex(nt=>nt===qe[at]);if(~Je){if(et.splice(Je,1),He&&!Ke){const nt=Ee(qe[at]);~nt&&(_.value.splice(nt,1),ot&&(y.value=""))}}else et.push(qe[at]),ot&&(y.value="");X(et,ne(et))}else{if(He&&!Ke){const et=Ee(qe[at]);~et?_.value=[_.value[et]]:_.value=Y}Ze(),be(),X(qe[at],qe)}}function Ee(qe){return _.value.findIndex(Ke=>Ke[e.valueField]===qe)}function Te(qe){T.value||Be();const{value:He}=qe.target;y.value=He;const{tag:Ke,remote:ot}=e;if(Pe(He),Ke&&!ot){if(!He){w.value=Y;return}const{onCreate:at}=e,et=at?at(He):{[e.labelField]:He,[e.valueField]:He},{valueField:Je,labelField:nt}=e;v.value.some(it=>it[Je]===et[Je]||it[nt]===et[nt])||_.value.some(it=>it[Je]===et[Je]||it[nt]===et[nt])?w.value=Y:w.value=[et]}}function Re(qe){qe.stopPropagation();const{multiple:He}=e;!He&&e.filterable&&be(),fe(),He?X([],[]):X(null,null)}function Oe(qe){!happensIn(qe,"action")&&!happensIn(qe,"empty")&&!happensIn(qe,"header")&&qe.preventDefault()}function je(qe){$e(qe)}function We(qe){var He,Ke,ot,at,et;if(!e.keyboard){qe.preventDefault();return}switch(qe.key){case" ":if(e.filterable)break;qe.preventDefault();case"Enter":if(!(!((He=D.value)===null||He===void 0)&&He.isComposing)){if(T.value){const Je=(Ke=I.value)===null||Ke===void 0?void 0:Ke.getPendingTmNode();Je?_e(Je):e.filterable||(be(),Ze())}else if(Be(),e.tag&&De.value){const Je=w.value[0];if(Je){const nt=Je[e.valueField],{value:it}=g;e.multiple&&Array.isArray(it)&&it.includes(nt)||Ce(Je)}}}qe.preventDefault();break;case"ArrowUp":if(qe.preventDefault(),e.loading)return;T.value&&((ot=I.value)===null||ot===void 0||ot.prev());break;case"ArrowDown":if(qe.preventDefault(),e.loading)return;T.value?(at=I.value)===null||at===void 0||at.next():Be();break;case"Escape":T.value&&(markEventEffectPerformed(qe),be()),(et=D.value)===null||et===void 0||et.focus();break}}function Ze(){var qe;(qe=D.value)===null||qe===void 0||qe.focus()}function Xe(){var qe;(qe=D.value)===null||qe===void 0||qe.focusInput()}function Ge(){var qe;!T.value||(qe=F.value)===null||qe===void 0||qe.syncPosition()}Ie(),watch(toRef(e,"options"),Ie);const Qe={focus:()=>{var qe;(qe=D.value)===null||qe===void 0||qe.focus()},focusInput:()=>{var qe;(qe=D.value)===null||qe===void 0||qe.focusInput()},blur:()=>{var qe;(qe=D.value)===null||qe===void 0||qe.blur()},blurInput:()=>{var qe;(qe=D.value)===null||qe===void 0||qe.blurInput()}},rt=computed(()=>{const{self:{menuBoxShadow:qe}}=u.value;return{"--n-menu-box-shadow":qe}}),dt=s?useThemeClass("select",void 0,rt,e):void 0;return Object.assign(Object.assign({},Qe),{mergedStatus:H,mergedClsPrefix:n,mergedBordered:r,namespace:o,treeMate:M,isMounted:isMounted(),triggerRef:D,menuRef:I,pattern:y,uncontrolledShow:P,mergedShow:T,adjustedTo:useAdjustedTo(e),uncontrolledValue:d,mergedValue:g,followerRef:F,localizedPlaceholder:q,selectedOption:J,selectedOptions:le,mergedSize:U,mergedDisabled:W,focused:m,activeWithoutMenuOpen:De,inlineThemeDisabled:s,onTriggerInputFocus:ve,onTriggerInputBlur:ye,handleTriggerOrMenuResize:Ge,handleMenuFocus:Le,handleMenuBlur:Fe,handleMenuTabOut:ze,handleTriggerClick:we,handleToggle:_e,handleDeleteOption:Ce,handlePatternInput:Te,handleClear:Re,handleTriggerBlur:ke,handleTriggerFocus:Me,handleKeydown:We,handleMenuAfterLeave:Ve,handleMenuClickOutside:te,handleMenuScroll:je,handleMenuKeydown:We,handleMenuMousedown:Oe,mergedTheme:u,cssVars:s?void 0:rt,themeClass:dt==null?void 0:dt.themeClass,onRender:dt==null?void 0:dt.onRender})},render(){return h$1("div",{class:`${this.mergedClsPrefix}-select`},h$1(VBinder,null,{default:()=>[h$1(VTarget,null,{default:()=>h$1(NInternalSelection,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[(n=(e=this.$slots).arrow)===null||n===void 0?void 0:n.call(e)]}})}),h$1(VFollower,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>h$1(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,r;return this.mergedShow||this.displayDirective==="show"?((e=this.onRender)===null||e===void 0||e.call(this),withDirectives(h$1(NInternalSelectMenu,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(n=this.menuProps)===null||n===void 0?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:this.menuSize,renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(r=this.menuProps)===null||r===void 0?void 0:r.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var o,s;return[(s=(o=this.$slots).empty)===null||s===void 0?void 0:s.call(o)]},header:()=>{var o,s;return[(s=(o=this.$slots).header)===null||s===void 0?void 0:s.call(o)]},action:()=>{var o,s;return[(s=(o=this.$slots).action)===null||s===void 0?void 0:s.call(o)]}}),this.displayDirective==="show"?[[vShow,this.mergedShow],[clickoutside$1,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[clickoutside$1,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}}),commonVars$2={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"22px",closeIconSize:"18px",closeMargin:"20px 26px 0 0",closeMarginIconTop:"10px 16px 0 0"};function self$8(e){const{textColor1:n,textColor2:r,modalColor:o,closeIconColor:s,closeIconColorHover:u,closeIconColorPressed:d,closeColorHover:f,closeColorPressed:g,infoColor:m,successColor:y,warningColor:v,errorColor:_,primaryColor:w,dividerColor:x,borderRadius:k,fontWeightStrong:S,lineHeight:M,fontSize:E}=e;return Object.assign(Object.assign({},commonVars$2),{fontSize:E,lineHeight:M,border:`1px solid ${x}`,titleTextColor:n,textColor:r,color:o,closeColorHover:f,closeColorPressed:g,closeIconColor:s,closeIconColorHover:u,closeIconColorPressed:d,closeBorderRadius:k,iconColor:w,iconColorInfo:m,iconColorSuccess:y,iconColorWarning:v,iconColorError:_,borderRadius:k,titleFontWeight:S})}const dialogLight={name:"Dialog",common:commonLight,peers:{Button:buttonLight$1},self:self$8},dialogLight$1=dialogLight,dialogProps={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,positiveButtonProps:Object,negativeButtonProps:Object,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,titleClass:[String,Array],titleStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],actionClass:[String,Array],actionStyle:[String,Object],onPositiveClick:Function,onNegativeClick:Function,onClose:Function},dialogPropKeys=keysOf(dialogProps),style$7=c$1([cB("dialog",`
 --n-icon-margin: var(--n-icon-margin-top) var(--n-icon-margin-right) var(--n-icon-margin-bottom) var(--n-icon-margin-left);
 word-break: break-word;
 line-height: var(--n-line-height);
 position: relative;
 background: var(--n-color);
 color: var(--n-text-color);
 box-sizing: border-box;
 margin: auto;
 border-radius: var(--n-border-radius);
 padding: var(--n-padding);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `,[cE("icon",{color:"var(--n-icon-color)"}),cM("bordered",{border:"var(--n-border)"}),cM("icon-top",[cE("close",{margin:"var(--n-close-margin)"}),cE("icon",{margin:"var(--n-icon-margin)"}),cE("content",{textAlign:"center"}),cE("title",{justifyContent:"center"}),cE("action",{justifyContent:"center"})]),cM("icon-left",[cE("icon",{margin:"var(--n-icon-margin)"}),cM("closable",[cE("title",`
 padding-right: calc(var(--n-close-size) + 6px);
 `)])]),cE("close",`
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 z-index: 1;
 `),cE("content",`
 font-size: var(--n-font-size);
 margin: var(--n-content-margin);
 position: relative;
 word-break: break-word;
 `,[cM("last","margin-bottom: 0;")]),cE("action",`
 display: flex;
 justify-content: flex-end;
 `,[c$1("> *:not(:last-child)",`
 margin-right: var(--n-action-space);
 `)]),cE("icon",`
 font-size: var(--n-icon-size);
 transition: color .3s var(--n-bezier);
 `),cE("title",`
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 font-weight: var(--n-title-font-weight);
 color: var(--n-title-text-color);
 `),cB("dialog-icon-container",`
 display: flex;
 justify-content: center;
 `)]),insideModal(cB("dialog",`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)),cB("dialog",[asModal(`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)])]),iconRenderMap$2={default:()=>h$1(InfoIcon,null),info:()=>h$1(InfoIcon,null),success:()=>h$1(SuccessIcon,null),warning:()=>h$1(WarningIcon,null),error:()=>h$1(ErrorIcon,null)},NDialog=defineComponent({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},useTheme.props),dialogProps),setup(e){const{mergedComponentPropsRef:n,mergedClsPrefixRef:r,inlineThemeDisabled:o,mergedRtlRef:s}=useConfig(e),u=useRtl("Dialog",s,r),d=computed(()=>{var w,x;const{iconPlacement:k}=e;return k||((x=(w=n==null?void 0:n.value)===null||w===void 0?void 0:w.Dialog)===null||x===void 0?void 0:x.iconPlacement)||"left"});function f(w){const{onPositiveClick:x}=e;x&&x(w)}function g(w){const{onNegativeClick:x}=e;x&&x(w)}function m(){const{onClose:w}=e;w&&w()}const y=useTheme("Dialog","-dialog",style$7,dialogLight$1,e,r),v=computed(()=>{const{type:w}=e,x=d.value,{common:{cubicBezierEaseInOut:k},self:{fontSize:S,lineHeight:M,border:E,titleTextColor:P,textColor:T,color:D,closeBorderRadius:F,closeColorHover:I,closeColorPressed:N,closeIconColor:q,closeIconColorHover:Y,closeIconColorPressed:Z,closeIconSize:j,borderRadius:ne,titleFontWeight:le,titleFontSize:J,padding:O,iconSize:U,actionSpace:W,contentMargin:H,closeSize:X,[x==="top"?"iconMarginIconTop":"iconMargin"]:Q,[x==="top"?"closeMarginIconTop":"closeMargin"]:fe,[createKey("iconColor",w)]:Se}}=y.value,Pe=getMargin(Q);return{"--n-font-size":S,"--n-icon-color":Se,"--n-bezier":k,"--n-close-margin":fe,"--n-icon-margin-top":Pe.top,"--n-icon-margin-right":Pe.right,"--n-icon-margin-bottom":Pe.bottom,"--n-icon-margin-left":Pe.left,"--n-icon-size":U,"--n-close-size":X,"--n-close-icon-size":j,"--n-close-border-radius":F,"--n-close-color-hover":I,"--n-close-color-pressed":N,"--n-close-icon-color":q,"--n-close-icon-color-hover":Y,"--n-close-icon-color-pressed":Z,"--n-color":D,"--n-text-color":T,"--n-border-radius":ne,"--n-padding":O,"--n-line-height":M,"--n-border":E,"--n-content-margin":H,"--n-title-font-size":J,"--n-title-font-weight":le,"--n-title-text-color":P,"--n-action-space":W}}),_=o?useThemeClass("dialog",computed(()=>`${e.type[0]}${d.value[0]}`),v,e):void 0;return{mergedClsPrefix:r,rtlEnabled:u,mergedIconPlacement:d,mergedTheme:y,handlePositiveClick:f,handleNegativeClick:g,handleCloseClick:m,cssVars:o?void 0:v,themeClass:_==null?void 0:_.themeClass,onRender:_==null?void 0:_.onRender}},render(){var e;const{bordered:n,mergedIconPlacement:r,cssVars:o,closable:s,showIcon:u,title:d,content:f,action:g,negativeText:m,positiveText:y,positiveButtonProps:v,negativeButtonProps:_,handlePositiveClick:w,handleNegativeClick:x,mergedTheme:k,loading:S,type:M,mergedClsPrefix:E}=this;(e=this.onRender)===null||e===void 0||e.call(this);const P=u?h$1(NBaseIcon,{clsPrefix:E,class:`${E}-dialog__icon`},{default:()=>resolveWrappedSlot(this.$slots.icon,D=>D||(this.icon?render$1(this.icon):iconRenderMap$2[this.type]()))}):null,T=resolveWrappedSlot(this.$slots.action,D=>D||y||m||g?h$1("div",{class:[`${E}-dialog__action`,this.actionClass],style:this.actionStyle},D||(g?[render$1(g)]:[this.negativeText&&h$1(NButton,Object.assign({theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,ghost:!0,size:"small",onClick:x},_),{default:()=>render$1(this.negativeText)}),this.positiveText&&h$1(NButton,Object.assign({theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,size:"small",type:M==="default"?"primary":M,disabled:S,loading:S,onClick:w},v),{default:()=>render$1(this.positiveText)})])):null);return h$1("div",{class:[`${E}-dialog`,this.themeClass,this.closable&&`${E}-dialog--closable`,`${E}-dialog--icon-${r}`,n&&`${E}-dialog--bordered`,this.rtlEnabled&&`${E}-dialog--rtl`],style:o,role:"dialog"},s?resolveWrappedSlot(this.$slots.close,D=>{const F=[`${E}-dialog__close`,this.rtlEnabled&&`${E}-dialog--rtl`];return D?h$1("div",{class:F},D):h$1(NBaseClose,{clsPrefix:E,class:F,onClick:this.handleCloseClick})}):null,u&&r==="top"?h$1("div",{class:`${E}-dialog-icon-container`},P):null,h$1("div",{class:[`${E}-dialog__title`,this.titleClass],style:this.titleStyle},u&&r==="left"?P:null,resolveSlot(this.$slots.header,()=>[render$1(d)])),h$1("div",{class:[`${E}-dialog__content`,T?"":`${E}-dialog__content--last`,this.contentClass],style:this.contentStyle},resolveSlot(this.$slots.default,()=>[render$1(f)])),T)}}),dialogProviderInjectionKey="n-dialog-provider",dialogApiInjectionKey="n-dialog-api",dialogReactiveListInjectionKey="n-dialog-reactive-list";function self$7(e){const{modalColor:n,textColor2:r,boxShadow3:o}=e;return{color:n,textColor:r,boxShadow:o}}const modalLight={name:"Modal",common:commonLight,peers:{Scrollbar:scrollbarLight$1,Dialog:dialogLight$1,Card:cardLight$1},self:self$7},modalLight$1=modalLight,presetProps=Object.assign(Object.assign({},cardBaseProps),dialogProps),presetPropsKeys=keysOf(presetProps),NModalBodyWrapper=defineComponent({name:"ModalBody",inheritAttrs:!1,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0},trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},blockScroll:Boolean},presetProps),{renderMask:Function,onClickoutside:Function,onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function,onEsc:Function}),setup(e){const n=ref(null),r=ref(null),o=ref(e.show),s=ref(null),u=ref(null);watch(toRef(e,"show"),S=>{S&&(o.value=!0)}),useLockHtmlScroll(computed(()=>e.blockScroll&&o.value));const d=inject(modalInjectionKey);function f(){if(d.transformOriginRef.value==="center")return"";const{value:S}=s,{value:M}=u;if(S===null||M===null)return"";if(r.value){const E=r.value.containerScrollTop;return`${S}px ${M+E}px`}return""}function g(S){if(d.transformOriginRef.value==="center")return;const M=d.getMousePosition();if(!M||!r.value)return;const E=r.value.containerScrollTop,{offsetLeft:P,offsetTop:T}=S;if(M){const D=M.y,F=M.x;s.value=-(P-F),u.value=-(T-D-E)}S.style.transformOrigin=f()}function m(S){nextTick(()=>{g(S)})}function y(S){S.style.transformOrigin=f(),e.onBeforeLeave()}function v(){o.value=!1,s.value=null,u.value=null,e.onAfterLeave()}function _(){const{onClose:S}=e;S&&S()}function w(){e.onNegativeClick()}function x(){e.onPositiveClick()}const k=ref(null);return watch(k,S=>{S&&nextTick(()=>{const M=S.el;M&&n.value!==M&&(n.value=M)})}),provide(modalBodyInjectionKey,n),provide(drawerBodyInjectionKey,null),provide(popoverBodyInjectionKey,null),{mergedTheme:d.mergedThemeRef,appear:d.appearRef,isMounted:d.isMountedRef,mergedClsPrefix:d.mergedClsPrefixRef,bodyRef:n,scrollbarRef:r,displayed:o,childNodeRef:k,handlePositiveClick:x,handleNegativeClick:w,handleCloseClick:_,handleAfterLeave:v,handleBeforeLeave:y,handleEnter:m}},render(){const{$slots:e,$attrs:n,handleEnter:r,handleAfterLeave:o,handleBeforeLeave:s,preset:u,mergedClsPrefix:d}=this;let f=null;if(!u){if(f=getFirstSlotVNode(e),!f){warn$2("modal","default slot is empty");return}f=cloneVNode(f),f.props=mergeProps({class:`${d}-modal`},n,f.props||{})}return this.displayDirective==="show"||this.displayed||this.show?withDirectives(h$1("div",{role:"none",class:`${d}-modal-body-wrapper`},h$1(NScrollbar,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${d}-modal-scroll-content`},{default:()=>{var g;return[(g=this.renderMask)===null||g===void 0?void 0:g.call(this),h$1(FocusTrap,{disabled:!this.trapFocus,active:this.show,onEsc:this.onEsc,autoFocus:this.autoFocus},{default:()=>{var m;return h$1(Transition,{name:"fade-in-scale-up-transition",appear:(m=this.appear)!==null&&m!==void 0?m:this.isMounted,onEnter:r,onAfterEnter:this.onAfterEnter,onAfterLeave:o,onBeforeLeave:s},{default:()=>{const y=[[vShow,this.show]],{onClickoutside:v}=this;return v&&y.push([clickoutside$1,this.onClickoutside,void 0,{capture:!0}]),withDirectives(this.preset==="confirm"||this.preset==="dialog"?h$1(NDialog,Object.assign({},this.$attrs,{class:[`${d}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},keep(this.$props,dialogPropKeys),{"aria-modal":"true"}),e):this.preset==="card"?h$1(NCard,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${d}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},keep(this.$props,cardBasePropKeys),{"aria-modal":"true",role:"dialog"}),e):this.childNodeRef=f,y)}})}})]}})),[[vShow,this.displayDirective==="if"||this.displayed||this.show]]):null}}),style$6=c$1([cB("modal-container",`
 position: fixed;
 left: 0;
 top: 0;
 height: 0;
 width: 0;
 display: flex;
 `),cB("modal-mask",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background-color: rgba(0, 0, 0, .4);
 `,[fadeInTransition({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--n-bezier-ease-out)",leaveCubicBezier:"var(--n-bezier-ease-out)"})]),cB("modal-body-wrapper",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: visible;
 `,[cB("modal-scroll-content",`
 min-height: 100%;
 display: flex;
 position: relative;
 `)]),cB("modal",`
 position: relative;
 align-self: center;
 color: var(--n-text-color);
 margin: auto;
 box-shadow: var(--n-box-shadow);
 `,[fadeInScaleUpTransition({duration:".25s",enterScale:".5"})])]),modalProps=Object.assign(Object.assign(Object.assign(Object.assign({},useTheme.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"},zIndex:Number,autoFocus:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0}}),presetProps),{onEsc:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,internalDialog:Boolean,internalModal:Boolean,internalAppear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function}),NModal=defineComponent({name:"Modal",inheritAttrs:!1,props:modalProps,setup(e){const n=ref(null),{mergedClsPrefixRef:r,namespaceRef:o,inlineThemeDisabled:s}=useConfig(e),u=useTheme("Modal","-modal",style$6,modalLight$1,e,r),d=useClicked(64),f=useClickPosition(),g=isMounted(),m=e.internalDialog?inject(dialogProviderInjectionKey,null):null,y=e.internalModal?inject(modalProviderInjectionKey$1,null):null,v=useIsComposing();function _(F){const{onUpdateShow:I,"onUpdate:show":N,onHide:q}=e;I&&call(I,F),N&&call(N,F),q&&!F&&q(F)}function w(){const{onClose:F}=e;F?Promise.resolve(F()).then(I=>{I!==!1&&_(!1)}):_(!1)}function x(){const{onPositiveClick:F}=e;F?Promise.resolve(F()).then(I=>{I!==!1&&_(!1)}):_(!1)}function k(){const{onNegativeClick:F}=e;F?Promise.resolve(F()).then(I=>{I!==!1&&_(!1)}):_(!1)}function S(){const{onBeforeLeave:F,onBeforeHide:I}=e;F&&call(F),I&&I()}function M(){const{onAfterLeave:F,onAfterHide:I}=e;F&&call(F),I&&I()}function E(F){var I;const{onMaskClick:N}=e;N&&N(F),e.maskClosable&&!((I=n.value)===null||I===void 0)&&I.contains(getPreciseEventTarget(F))&&_(!1)}function P(F){var I;(I=e.onEsc)===null||I===void 0||I.call(e),e.show&&e.closeOnEsc&&eventEffectNotPerformed(F)&&(v.value||_(!1))}provide(modalInjectionKey,{getMousePosition:()=>{const F=m||y;if(F){const{clickedRef:I,clickedPositionRef:N}=F;if(I.value&&N.value)return N.value}return d.value?f.value:null},mergedClsPrefixRef:r,mergedThemeRef:u,isMountedRef:g,appearRef:toRef(e,"internalAppear"),transformOriginRef:toRef(e,"transformOrigin")});const T=computed(()=>{const{common:{cubicBezierEaseOut:F},self:{boxShadow:I,color:N,textColor:q}}=u.value;return{"--n-bezier-ease-out":F,"--n-box-shadow":I,"--n-color":N,"--n-text-color":q}}),D=s?useThemeClass("theme-class",void 0,T,e):void 0;return{mergedClsPrefix:r,namespace:o,isMounted:g,containerRef:n,presetProps:computed(()=>keep(e,presetPropsKeys)),handleEsc:P,handleAfterLeave:M,handleClickoutside:E,handleBeforeLeave:S,doUpdateShow:_,handleNegativeClick:k,handlePositiveClick:x,handleCloseClick:w,cssVars:s?void 0:T,themeClass:D==null?void 0:D.themeClass,onRender:D==null?void 0:D.onRender}},render(){const{mergedClsPrefix:e}=this;return h$1(LazyTeleport,{to:this.to,show:this.show},{default:()=>{var n;(n=this.onRender)===null||n===void 0||n.call(this);const{unstableShowMask:r}=this;return withDirectives(h$1("div",{role:"none",ref:"containerRef",class:[`${e}-modal-container`,this.themeClass,this.namespace],style:this.cssVars},h$1(NModalBodyWrapper,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset,autoFocus:this.autoFocus,trapFocus:this.trapFocus,blockScroll:this.blockScroll},this.presetProps,{onEsc:this.handleEsc,onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:r?void 0:this.handleClickoutside,renderMask:r?()=>{var o;return h$1(Transition,{name:"fade-in-transition",key:"mask",appear:(o=this.internalAppear)!==null&&o!==void 0?o:this.isMounted},{default:()=>this.show?h$1("div",{"aria-hidden":!0,ref:"containerRef",class:`${e}-modal-mask`,onClick:this.handleClickoutside}):null})}:void 0}),this.$slots)),[[zindexable$1,{zIndex:this.zIndex,enabled:this.show}]])}})}}),exposedDialogEnvProps=Object.assign(Object.assign({},dialogProps),{onAfterEnter:Function,onAfterLeave:Function,transformOrigin:String,blockScroll:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function}),NDialogEnvironment=defineComponent({name:"DialogEnvironment",props:Object.assign(Object.assign({},exposedDialogEnvProps),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const n=ref(!0);function r(){const{onInternalAfterLeave:y,internalKey:v,onAfterLeave:_}=e;y&&y(v),_&&_()}function o(y){const{onPositiveClick:v}=e;v?Promise.resolve(v(y)).then(_=>{_!==!1&&g()}):g()}function s(y){const{onNegativeClick:v}=e;v?Promise.resolve(v(y)).then(_=>{_!==!1&&g()}):g()}function u(){const{onClose:y}=e;y?Promise.resolve(y()).then(v=>{v!==!1&&g()}):g()}function d(y){const{onMaskClick:v,maskClosable:_}=e;v&&(v(y),_&&g())}function f(){const{onEsc:y}=e;y&&y()}function g(){n.value=!1}function m(y){n.value=y}return{show:n,hide:g,handleUpdateShow:m,handleAfterLeave:r,handleCloseClick:u,handleNegativeClick:s,handlePositiveClick:o,handleMaskClick:d,handleEsc:f}},render(){const{handlePositiveClick:e,handleUpdateShow:n,handleNegativeClick:r,handleCloseClick:o,handleAfterLeave:s,handleMaskClick:u,handleEsc:d,to:f,maskClosable:g,show:m}=this;return h$1(NModal,{show:m,onUpdateShow:n,onMaskClick:u,onEsc:d,to:f,maskClosable:g,onAfterEnter:this.onAfterEnter,onAfterLeave:s,closeOnEsc:this.closeOnEsc,blockScroll:this.blockScroll,autoFocus:this.autoFocus,transformOrigin:this.transformOrigin,internalAppear:!0,internalDialog:!0},{default:()=>h$1(NDialog,Object.assign({},keep(this.$props,dialogPropKeys),{style:this.internalStyle,onClose:o,onNegativeClick:r,onPositiveClick:e}))})}}),dialogProviderProps={injectionKey:String,to:[String,Object]},NDialogProvider=defineComponent({name:"DialogProvider",props:dialogProviderProps,setup(){const e=ref([]),n={};function r(f={}){const g=createId(),m=reactive(Object.assign(Object.assign({},f),{key:g,destroy:()=>{var y;(y=n[`n-dialog-${g}`])===null||y===void 0||y.hide()}}));return e.value.push(m),m}const o=["info","success","warning","error"].map(f=>g=>r(Object.assign(Object.assign({},g),{type:f})));function s(f){const{value:g}=e;g.splice(g.findIndex(m=>m.key===f),1)}function u(){Object.values(n).forEach(f=>{f==null||f.hide()})}const d={create:r,destroyAll:u,info:o[0],success:o[1],warning:o[2],error:o[3]};return provide(dialogApiInjectionKey,d),provide(dialogProviderInjectionKey,{clickedRef:useClicked(64),clickedPositionRef:useClickPosition()}),provide(dialogReactiveListInjectionKey,e),Object.assign(Object.assign({},d),{dialogList:e,dialogInstRefs:n,handleAfterLeave:s})},render(){var e,n;return h$1(Fragment,null,[this.dialogList.map(r=>h$1(NDialogEnvironment,omit(r,["destroy","style"],{internalStyle:r.style,to:this.to,ref:o=>{o===null?delete this.dialogInstRefs[`n-dialog-${r.key}`]:this.dialogInstRefs[`n-dialog-${r.key}`]=o},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave}))),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)])}});function useDialog(){const e=inject(dialogApiInjectionKey,null);return e===null&&throwError("use-dialog","No outer <n-dialog-provider /> founded."),e}const commonVars$1={closeMargin:"16px 12px",closeSize:"20px",closeIconSize:"16px",width:"365px",padding:"16px",titleFontSize:"16px",metaFontSize:"12px",descriptionFontSize:"12px"};function self$6(e){const{textColor2:n,successColor:r,infoColor:o,warningColor:s,errorColor:u,popoverColor:d,closeIconColor:f,closeIconColorHover:g,closeIconColorPressed:m,closeColorHover:y,closeColorPressed:v,textColor1:_,textColor3:w,borderRadius:x,fontWeightStrong:k,boxShadow2:S,lineHeight:M,fontSize:E}=e;return Object.assign(Object.assign({},commonVars$1),{borderRadius:x,lineHeight:M,fontSize:E,headerFontWeight:k,iconColor:n,iconColorSuccess:r,iconColorInfo:o,iconColorWarning:s,iconColorError:u,color:d,textColor:n,closeIconColor:f,closeIconColorHover:g,closeIconColorPressed:m,closeBorderRadius:x,closeColorHover:y,closeColorPressed:v,headerTextColor:_,descriptionTextColor:w,actionTextColor:n,boxShadow:S})}const notificationLight={name:"Notification",common:commonLight,peers:{Scrollbar:scrollbarLight$1},self:self$6},notificationLight$1=notificationLight,commonVariables={margin:"0 0 8px 0",padding:"10px 20px",maxWidth:"720px",minWidth:"420px",iconMargin:"0 10px 0 0",closeMargin:"0 0 0 10px",closeSize:"20px",closeIconSize:"16px",iconSize:"20px",fontSize:"14px"};function self$5(e){const{textColor2:n,closeIconColor:r,closeIconColorHover:o,closeIconColorPressed:s,infoColor:u,successColor:d,errorColor:f,warningColor:g,popoverColor:m,boxShadow2:y,primaryColor:v,lineHeight:_,borderRadius:w,closeColorHover:x,closeColorPressed:k}=e;return Object.assign(Object.assign({},commonVariables),{closeBorderRadius:w,textColor:n,textColorInfo:n,textColorSuccess:n,textColorError:n,textColorWarning:n,textColorLoading:n,color:m,colorInfo:m,colorSuccess:m,colorError:m,colorWarning:m,colorLoading:m,boxShadow:y,boxShadowInfo:y,boxShadowSuccess:y,boxShadowError:y,boxShadowWarning:y,boxShadowLoading:y,iconColor:n,iconColorInfo:u,iconColorSuccess:d,iconColorWarning:g,iconColorError:f,iconColorLoading:v,closeColorHover:x,closeColorPressed:k,closeIconColor:r,closeIconColorHover:o,closeIconColorPressed:s,closeColorHoverInfo:x,closeColorPressedInfo:k,closeIconColorInfo:r,closeIconColorHoverInfo:o,closeIconColorPressedInfo:s,closeColorHoverSuccess:x,closeColorPressedSuccess:k,closeIconColorSuccess:r,closeIconColorHoverSuccess:o,closeIconColorPressedSuccess:s,closeColorHoverError:x,closeColorPressedError:k,closeIconColorError:r,closeIconColorHoverError:o,closeIconColorPressedError:s,closeColorHoverWarning:x,closeColorPressedWarning:k,closeIconColorWarning:r,closeIconColorHoverWarning:o,closeIconColorPressedWarning:s,closeColorHoverLoading:x,closeColorPressedLoading:k,closeIconColorLoading:r,closeIconColorHoverLoading:o,closeIconColorPressedLoading:s,loadingColor:v,lineHeight:_,borderRadius:w})}const messageLight={name:"Message",common:commonLight,self:self$5},messageLight$1=messageLight;function self$4(e){const{textColorDisabled:n}=e;return{iconColorDisabled:n}}const inputNumberLight={name:"InputNumber",common:commonLight,peers:{Button:buttonLight$1,Input:inputLight$1},self:self$4},inputNumberLight$1=inputNumberLight;function self$3(e){const{primaryColor:n,errorColor:r}=e;return{colorError:r,colorLoading:n,height:"2px"}}const loadingBarLight={name:"LoadingBar",common:commonLight,self:self$3},loadingBarLight$1=loadingBarLight,sizeVariables={railHeight:"4px",railWidthVertical:"4px",handleSize:"18px",dotHeight:"8px",dotWidth:"8px",dotBorderRadius:"4px"};function self$2(e){const n="rgba(0, 0, 0, .85)",r="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:o,primaryColor:s,baseColor:u,cardColor:d,modalColor:f,popoverColor:g,borderRadius:m,fontSize:y,opacityDisabled:v}=e;return Object.assign(Object.assign({},sizeVariables),{fontSize:y,markFontSize:y,railColor:o,railColorHover:o,fillColor:s,fillColorHover:s,opacityDisabled:v,handleColor:"#FFF",dotColor:d,dotColorModal:f,dotColorPopover:g,handleBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowHover:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowActive:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowFocus:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",indicatorColor:n,indicatorBoxShadow:r,indicatorTextColor:u,indicatorBorderRadius:m,dotBorder:`2px solid ${o}`,dotBorderActive:`2px solid ${s}`,dotBoxShadow:""})}const sliderLight={name:"Slider",common:commonLight,self:self$2},sliderLight$1=sliderLight,commonVars={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"};function self$1(e){const{primaryColor:n,opacityDisabled:r,borderRadius:o,textColor3:s}=e,u="rgba(0, 0, 0, .14)";return Object.assign(Object.assign({},commonVars),{iconColor:s,textColor:"white",loadingColor:n,opacityDisabled:r,railColor:u,railColorActive:n,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:o,railBorderRadiusMedium:o,railBorderRadiusLarge:o,buttonBorderRadiusSmall:o,buttonBorderRadiusMedium:o,buttonBorderRadiusLarge:o,boxShadowFocus:`0 0 0 2px ${changeColor(n,{alpha:.2})}`})}const switchLight={name:"Switch",common:commonLight,self:self$1},switchLight$1=switchLight;function parse(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function isWipValue(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function validator$2(e){return e==null?!0:!Number.isNaN(e)}function format$2(e,n){return typeof e!="number"?"":n===void 0?String(e):e.toFixed(n)}function parseNumber(e){if(e===null)return null;if(typeof e=="number")return e;{const n=Number(e);return Number.isNaN(n)?null:n}}const style$5=c$1([cB("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),cB("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),HOLDING_CHANGE_THRESHOLD=800,HOLDING_CHANGE_INTERVAL=100,inputNumberProps=Object.assign(Object.assign({},useTheme.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),NInputNumber=defineComponent({name:"InputNumber",props:inputNumberProps,setup(e){const{mergedBorderedRef:n,mergedClsPrefixRef:r,mergedRtlRef:o}=useConfig(e),s=useTheme("InputNumber","-input-number",style$5,inputNumberLight$1,e,r),{localeRef:u}=useLocale("InputNumber"),d=useFormItem(e),{mergedSizeRef:f,mergedDisabledRef:g,mergedStatusRef:m}=d,y=ref(null),v=ref(null),_=ref(null),w=ref(e.defaultValue),x=toRef(e,"value"),k=useMergedState(x,w),S=ref(""),M=Le=>{const Fe=String(Le).split(".")[1];return Fe?Fe.length:0},E=Le=>{const Fe=[e.min,e.max,e.step,Le].map(ze=>ze===void 0?0:M(ze));return Math.max(...Fe)},P=useMemo(()=>{const{placeholder:Le}=e;return Le!==void 0?Le:u.value.placeholder}),T=useMemo(()=>{const Le=parseNumber(e.step);return Le!==null?Le===0?1:Math.abs(Le):1}),D=useMemo(()=>{const Le=parseNumber(e.min);return Le!==null?Le:null}),F=useMemo(()=>{const Le=parseNumber(e.max);return Le!==null?Le:null}),I=()=>{const{value:Le}=k;if(validator$2(Le)){const{format:Fe,precision:ze}=e;Fe?S.value=Fe(Le):Le===null||ze===void 0||M(Le)>ze?S.value=format$2(Le,void 0):S.value=format$2(Le,ze)}else S.value=String(Le)};I();const N=Le=>{const{value:Fe}=k;if(Le===Fe){I();return}const{"onUpdate:value":ze,onUpdateValue:te,onChange:oe}=e,{nTriggerFormInput:_e,nTriggerFormChange:Ce}=d;oe&&call(oe,Le),te&&call(te,Le),ze&&call(ze,Le),w.value=Le,_e(),Ce()},q=({offset:Le,doUpdateIfValid:Fe,fixPrecision:ze,isInputing:te})=>{const{value:oe}=S;if(te&&isWipValue(oe))return!1;const _e=(e.parse||parse)(oe);if(_e===null)return Fe&&N(null),null;if(validator$2(_e)){const Ce=M(_e),{precision:Ee}=e;if(Ee!==void 0&&Ee<Ce&&!ze)return!1;let Te=Number.parseFloat((_e+Le).toFixed(Ee!=null?Ee:E(_e)));if(validator$2(Te)){const{value:Re}=F,{value:Oe}=D;if(Re!==null&&Te>Re){if(!Fe||te)return!1;Te=Re}if(Oe!==null&&Te<Oe){if(!Fe||te)return!1;Te=Oe}return e.validator&&!e.validator(Te)?!1:(Fe&&N(Te),Te)}}return!1},Y=useMemo(()=>q({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),Z=useMemo(()=>{const{value:Le}=k;if(e.validator&&Le===null)return!1;const{value:Fe}=T;return q({offset:-Fe,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),j=useMemo(()=>{const{value:Le}=k;if(e.validator&&Le===null)return!1;const{value:Fe}=T;return q({offset:+Fe,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function ne(Le){const{onFocus:Fe}=e,{nTriggerFormFocus:ze}=d;Fe&&call(Fe,Le),ze()}function le(Le){var Fe,ze;if(Le.target===((Fe=y.value)===null||Fe===void 0?void 0:Fe.wrapperElRef))return;const te=q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(te!==!1){const Ce=(ze=y.value)===null||ze===void 0?void 0:ze.inputElRef;Ce&&(Ce.value=String(te||"")),k.value===te&&I()}else I();const{onBlur:oe}=e,{nTriggerFormBlur:_e}=d;oe&&call(oe,Le),_e(),nextTick(()=>{I()})}function J(Le){const{onClear:Fe}=e;Fe&&call(Fe,Le)}function O(){const{value:Le}=j;if(!Le){Be();return}const{value:Fe}=k;if(Fe===null)e.validator||N(X());else{const{value:ze}=T;q({offset:ze,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function U(){const{value:Le}=Z;if(!Le){Ie();return}const{value:Fe}=k;if(Fe===null)e.validator||N(X());else{const{value:ze}=T;q({offset:-ze,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const W=ne,H=le;function X(){if(e.validator)return null;const{value:Le}=D,{value:Fe}=F;return Le!==null?Math.max(0,Le):Fe!==null?Math.min(0,Fe):0}function Q(Le){J(Le),N(null)}function fe(Le){var Fe,ze,te;!((Fe=_.value)===null||Fe===void 0)&&Fe.$el.contains(Le.target)&&Le.preventDefault(),!((ze=v.value)===null||ze===void 0)&&ze.$el.contains(Le.target)&&Le.preventDefault(),(te=y.value)===null||te===void 0||te.activate()}let Se=null,Pe=null,$e=null;function Ie(){$e&&(window.clearTimeout($e),$e=null),Se&&(window.clearInterval(Se),Se=null)}let Ne=null;function Be(){Ne&&(window.clearTimeout(Ne),Ne=null),Pe&&(window.clearInterval(Pe),Pe=null)}function be(){Ie(),$e=window.setTimeout(()=>{Se=window.setInterval(()=>{U()},HOLDING_CHANGE_INTERVAL)},HOLDING_CHANGE_THRESHOLD),on$1("mouseup",document,Ie,{once:!0})}function Ve(){Be(),Ne=window.setTimeout(()=>{Pe=window.setInterval(()=>{O()},HOLDING_CHANGE_INTERVAL)},HOLDING_CHANGE_THRESHOLD),on$1("mouseup",document,Be,{once:!0})}const De=()=>{Pe||O()},ve=()=>{Se||U()};function ye(Le){var Fe,ze;if(Le.key==="Enter"){if(Le.target===((Fe=y.value)===null||Fe===void 0?void 0:Fe.wrapperElRef))return;q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((ze=y.value)===null||ze===void 0||ze.deactivate())}else if(Le.key==="ArrowUp"){if(!j.value||e.keyboard.ArrowUp===!1)return;Le.preventDefault(),q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&O()}else if(Le.key==="ArrowDown"){if(!Z.value||e.keyboard.ArrowDown===!1)return;Le.preventDefault(),q({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&U()}}function we(Le){S.value=Le,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&q({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}watch(k,()=>{I()});const ke={focus:()=>{var Le;return(Le=y.value)===null||Le===void 0?void 0:Le.focus()},blur:()=>{var Le;return(Le=y.value)===null||Le===void 0?void 0:Le.blur()},select:()=>{var Le;return(Le=y.value)===null||Le===void 0?void 0:Le.select()}},Me=useRtl("InputNumber",o,r);return Object.assign(Object.assign({},ke),{rtlEnabled:Me,inputInstRef:y,minusButtonInstRef:v,addButtonInstRef:_,mergedClsPrefix:r,mergedBordered:n,uncontrolledValue:w,mergedValue:k,mergedPlaceholder:P,displayedValueInvalid:Y,mergedSize:f,mergedDisabled:g,displayedValue:S,addable:j,minusable:Z,mergedStatus:m,handleFocus:W,handleBlur:H,handleClear:Q,handleMouseDown:fe,handleAddClick:De,handleMinusClick:ve,handleAddMousedown:Ve,handleMinusMousedown:be,handleKeyDown:ye,handleUpdateDisplayedValue:we,mergedTheme:s,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:computed(()=>{const{self:{iconColorDisabled:Le}}=s.value,[Fe,ze,te,oe]=rgba(Le);return{textColorTextDisabled:`rgb(${Fe}, ${ze}, ${te})`,opacityDisabled:`${oe}`}})})},render(){const{mergedClsPrefix:e,$slots:n}=this,r=()=>h$1(XButton,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>resolveSlot(n["minus-icon"],()=>[h$1(NBaseIcon,{clsPrefix:e},{default:()=>h$1(RemoveIcon,null)})])}),o=()=>h$1(XButton,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>resolveSlot(n["add-icon"],()=>[h$1(NBaseIcon,{clsPrefix:e},{default:()=>h$1(AddIcon,null)})])});return h$1("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},h$1(NInput,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var s;return this.showButton&&this.buttonPlacement==="both"?[r(),resolveWrappedSlot(n.prefix,u=>u?h$1("span",{class:`${e}-input-number-prefix`},u):null)]:(s=n.prefix)===null||s===void 0?void 0:s.call(n)},suffix:()=>{var s;return this.showButton?[resolveWrappedSlot(n.suffix,u=>u?h$1("span",{class:`${e}-input-number-suffix`},u):null),this.buttonPlacement==="right"?r():null,o()]:(s=n.suffix)===null||s===void 0?void 0:s.call(n)}}))}}),loadingBarProviderInjectionKey="n-loading-bar",loadingBarApiInjectionKey="n-loading-bar-api",style$4=cB("loading-bar-container",`
 z-index: 5999;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 height: 2px;
`,[fadeInTransition({enterDuration:"0.3s",leaveDuration:"0.8s"}),cB("loading-bar",`
 width: 100%;
 transition:
 max-width 4s linear,
 background .2s linear;
 height: var(--n-height);
 `,[cM("starting",`
 background: var(--n-color-loading);
 `),cM("finishing",`
 background: var(--n-color-loading);
 transition:
 max-width .2s linear,
 background .2s linear;
 `),cM("error",`
 background: var(--n-color-error);
 transition:
 max-width .2s linear,
 background .2s linear;
 `)])]);var __awaiter$1=globalThis&&globalThis.__awaiter||function(e,n,r,o){function s(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function f(y){try{m(o.next(y))}catch(v){d(v)}}function g(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?u(y.value):s(y.value).then(f,g)}m((o=o.apply(e,n||[])).next())})};function createClassName(e,n){return`${n}-loading-bar ${n}-loading-bar--${e}`}const NLoadingBar=defineComponent({name:"LoadingBar",props:{containerClass:String,containerStyle:[String,Object]},setup(){const{inlineThemeDisabled:e}=useConfig(),{props:n,mergedClsPrefixRef:r}=inject(loadingBarProviderInjectionKey),o=ref(null),s=ref(!1),u=ref(!1),d=ref(!1),f=ref(!1);let g=!1;const m=ref(!1),y=computed(()=>{const{loadingBarStyle:D}=n;return D?D[m.value?"error":"loading"]:""});function v(){return __awaiter$1(this,void 0,void 0,function*(){s.value=!1,d.value=!1,g=!1,m.value=!1,f.value=!0,yield nextTick(),f.value=!1})}function _(){return __awaiter$1(this,arguments,void 0,function*(D=0,F=80,I="starting"){if(u.value=!0,yield v(),g)return;d.value=!0,yield nextTick();const N=o.value;!N||(N.style.maxWidth=`${D}%`,N.style.transition="none",N.offsetWidth,N.className=createClassName(I,r.value),N.style.transition="",N.style.maxWidth=`${F}%`)})}function w(){return __awaiter$1(this,void 0,void 0,function*(){if(g||m.value)return;u.value&&(yield nextTick()),g=!0;const D=o.value;!D||(D.className=createClassName("finishing",r.value),D.style.maxWidth="100%",D.offsetWidth,d.value=!1)})}function x(){if(!(g||m.value))if(!d.value)_(100,100,"error").then(()=>{m.value=!0;const D=o.value;!D||(D.className=createClassName("error",r.value),D.offsetWidth,d.value=!1)});else{m.value=!0;const D=o.value;if(!D)return;D.className=createClassName("error",r.value),D.style.maxWidth="100%",D.offsetWidth,d.value=!1}}function k(){s.value=!0}function S(){s.value=!1}function M(){return __awaiter$1(this,void 0,void 0,function*(){yield v()})}const E=useTheme("LoadingBar","-loading-bar",style$4,loadingBarLight$1,n,r),P=computed(()=>{const{self:{height:D,colorError:F,colorLoading:I}}=E.value;return{"--n-height":D,"--n-color-loading":I,"--n-color-error":F}}),T=e?useThemeClass("loading-bar",void 0,P,n):void 0;return{mergedClsPrefix:r,loadingBarRef:o,started:u,loading:d,entering:s,transitionDisabled:f,start:_,error:x,finish:w,handleEnter:k,handleAfterEnter:S,handleAfterLeave:M,mergedLoadingBarStyle:y,cssVars:e?void 0:P,themeClass:T==null?void 0:T.themeClass,onRender:T==null?void 0:T.onRender}},render(){if(!this.started)return null;const{mergedClsPrefix:e}=this;return h$1(Transition,{name:"fade-in-transition",appear:!0,onEnter:this.handleEnter,onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave,css:!this.transitionDisabled},{default:()=>{var n;return(n=this.onRender)===null||n===void 0||n.call(this),withDirectives(h$1("div",{class:[`${e}-loading-bar-container`,this.themeClass,this.containerClass],style:this.containerStyle},h$1("div",{ref:"loadingBarRef",class:[`${e}-loading-bar`],style:[this.cssVars,this.mergedLoadingBarStyle]})),[[vShow,this.loading||!this.loading&&this.entering]])}})}}),loadingBarProviderProps=Object.assign(Object.assign({},useTheme.props),{to:{type:[String,Object,Boolean],default:void 0},containerClass:String,containerStyle:[String,Object],loadingBarStyle:{type:Object}}),NLoadingBarProvider=defineComponent({name:"LoadingBarProvider",props:loadingBarProviderProps,setup(e){const n=isMounted(),r=ref(null),o={start(){var u;n.value?(u=r.value)===null||u===void 0||u.start():nextTick(()=>{var d;(d=r.value)===null||d===void 0||d.start()})},error(){var u;n.value?(u=r.value)===null||u===void 0||u.error():nextTick(()=>{var d;(d=r.value)===null||d===void 0||d.error()})},finish(){var u;n.value?(u=r.value)===null||u===void 0||u.finish():nextTick(()=>{var d;(d=r.value)===null||d===void 0||d.finish()})}},{mergedClsPrefixRef:s}=useConfig(e);return provide(loadingBarApiInjectionKey,o),provide(loadingBarProviderInjectionKey,{props:e,mergedClsPrefixRef:s}),Object.assign(o,{loadingBarRef:r})},render(){var e,n;return h$1(Fragment,null,h$1(Teleport,{disabled:this.to===!1,to:this.to||"body"},h$1(NLoadingBar,{ref:"loadingBarRef",containerStyle:this.containerStyle,containerClass:this.containerClass})),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}});function useLoadingBar(){const e=inject(loadingBarApiInjectionKey,null);return e===null&&throwError("use-loading-bar","No outer <n-loading-bar-provider /> founded."),e}const messageProps={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},messageApiInjectionKey="n-message-api",messageProviderInjectionKey="n-message-provider",style$3=c$1([cB("message-wrapper",`
 margin: var(--n-margin);
 z-index: 0;
 transform-origin: top center;
 display: flex;
 `,[fadeInHeightExpandTransition({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),cB("message",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 margin-bottom .3s var(--n-bezier);
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 flex-wrap: nowrap;
 overflow: hidden;
 max-width: var(--n-max-width);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-shadow: var(--n-box-shadow);
 `,[cE("content",`
 display: inline-block;
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 `),cE("icon",`
 position: relative;
 margin: var(--n-icon-margin);
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 flex-shrink: 0;
 `,[["default","info","success","warning","error","loading"].map(e=>cM(`${e}-type`,[c$1("> *",`
 color: var(--n-icon-color-${e});
 transition: color .3s var(--n-bezier);
 `)])),c$1("> *",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[iconSwitchTransition()])]),cE("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 flex-shrink: 0;
 `,[c$1("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),c$1("&:active",`
 color: var(--n-close-icon-color-pressed);
 `)])]),cB("message-container",`
 z-index: 6000;
 position: fixed;
 height: 0;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: center;
 `,[cM("top",`
 top: 12px;
 left: 0;
 right: 0;
 `),cM("top-left",`
 top: 12px;
 left: 12px;
 right: 0;
 align-items: flex-start;
 `),cM("top-right",`
 top: 12px;
 left: 0;
 right: 12px;
 align-items: flex-end;
 `),cM("bottom",`
 bottom: 4px;
 left: 0;
 right: 0;
 justify-content: flex-end;
 `),cM("bottom-left",`
 bottom: 4px;
 left: 12px;
 right: 0;
 justify-content: flex-end;
 align-items: flex-start;
 `),cM("bottom-right",`
 bottom: 4px;
 left: 0;
 right: 12px;
 justify-content: flex-end;
 align-items: flex-end;
 `)])]),iconRenderMap$1={info:()=>h$1(InfoIcon,null),success:()=>h$1(SuccessIcon,null),warning:()=>h$1(WarningIcon,null),error:()=>h$1(ErrorIcon,null),default:()=>null},NMessage=defineComponent({name:"Message",props:Object.assign(Object.assign({},messageProps),{render:Function}),setup(e){const{inlineThemeDisabled:n,mergedRtlRef:r}=useConfig(e),{props:o,mergedClsPrefixRef:s}=inject(messageProviderInjectionKey),u=useRtl("Message",r,s),d=useTheme("Message","-message",style$3,messageLight$1,o,s),f=computed(()=>{const{type:m}=e,{common:{cubicBezierEaseInOut:y},self:{padding:v,margin:_,maxWidth:w,iconMargin:x,closeMargin:k,closeSize:S,iconSize:M,fontSize:E,lineHeight:P,borderRadius:T,iconColorInfo:D,iconColorSuccess:F,iconColorWarning:I,iconColorError:N,iconColorLoading:q,closeIconSize:Y,closeBorderRadius:Z,[createKey("textColor",m)]:j,[createKey("boxShadow",m)]:ne,[createKey("color",m)]:le,[createKey("closeColorHover",m)]:J,[createKey("closeColorPressed",m)]:O,[createKey("closeIconColor",m)]:U,[createKey("closeIconColorPressed",m)]:W,[createKey("closeIconColorHover",m)]:H}}=d.value;return{"--n-bezier":y,"--n-margin":_,"--n-padding":v,"--n-max-width":w,"--n-font-size":E,"--n-icon-margin":x,"--n-icon-size":M,"--n-close-icon-size":Y,"--n-close-border-radius":Z,"--n-close-size":S,"--n-close-margin":k,"--n-text-color":j,"--n-color":le,"--n-box-shadow":ne,"--n-icon-color-info":D,"--n-icon-color-success":F,"--n-icon-color-warning":I,"--n-icon-color-error":N,"--n-icon-color-loading":q,"--n-close-color-hover":J,"--n-close-color-pressed":O,"--n-close-icon-color":U,"--n-close-icon-color-pressed":W,"--n-close-icon-color-hover":H,"--n-line-height":P,"--n-border-radius":T}}),g=n?useThemeClass("message",computed(()=>e.type[0]),f,{}):void 0;return{mergedClsPrefix:s,rtlEnabled:u,messageProviderProps:o,handleClose(){var m;(m=e.onClose)===null||m===void 0||m.call(e)},cssVars:n?void 0:f,themeClass:g==null?void 0:g.themeClass,onRender:g==null?void 0:g.onRender,placement:o.placement}},render(){const{render:e,type:n,closable:r,content:o,mergedClsPrefix:s,cssVars:u,themeClass:d,onRender:f,icon:g,handleClose:m,showIcon:y}=this;f==null||f();let v;return h$1("div",{class:[`${s}-message-wrapper`,d],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},u]},e?e(this.$props):h$1("div",{class:[`${s}-message ${s}-message--${n}-type`,this.rtlEnabled&&`${s}-message--rtl`]},(v=createIconVNode(g,n,s))&&y?h$1("div",{class:`${s}-message__icon ${s}-message__icon--${n}-type`},h$1(NIconSwitchTransition,null,{default:()=>v})):null,h$1("div",{class:`${s}-message__content`},render$1(o)),r?h$1(NBaseClose,{clsPrefix:s,class:`${s}-message__close`,onClick:m,absolute:!0}):null))}});function createIconVNode(e,n,r){if(typeof e=="function")return e();{const o=n==="loading"?h$1(NBaseLoading,{clsPrefix:r,strokeWidth:24,scale:.85}):iconRenderMap$1[n]();return o?h$1(NBaseIcon,{clsPrefix:r,key:n},{default:()=>o}):null}}const MessageEnvironment=defineComponent({name:"MessageEnvironment",props:Object.assign(Object.assign({},messageProps),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(e){let n=null;const r=ref(!0);onMounted(()=>{o()});function o(){const{duration:y}=e;y&&(n=window.setTimeout(d,y))}function s(y){y.currentTarget===y.target&&n!==null&&(window.clearTimeout(n),n=null)}function u(y){y.currentTarget===y.target&&o()}function d(){const{onHide:y}=e;r.value=!1,n&&(window.clearTimeout(n),n=null),y&&y()}function f(){const{onClose:y}=e;y&&y(),d()}function g(){const{onAfterLeave:y,onInternalAfterLeave:v,onAfterHide:_,internalKey:w}=e;y&&y(),v&&v(w),_&&_()}function m(){d()}return{show:r,hide:d,handleClose:f,handleAfterLeave:g,handleMouseleave:u,handleMouseenter:s,deactivate:m}},render(){return h$1(NFadeInExpandTransition,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?h$1(NMessage,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),messageProviderProps=Object.assign(Object.assign({},useTheme.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerClass:String,containerStyle:[String,Object]}),NMessageProvider=defineComponent({name:"MessageProvider",props:messageProviderProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=ref([]),o=ref({}),s={create(g,m){return u(g,Object.assign({type:"default"},m))},info(g,m){return u(g,Object.assign(Object.assign({},m),{type:"info"}))},success(g,m){return u(g,Object.assign(Object.assign({},m),{type:"success"}))},warning(g,m){return u(g,Object.assign(Object.assign({},m),{type:"warning"}))},error(g,m){return u(g,Object.assign(Object.assign({},m),{type:"error"}))},loading(g,m){return u(g,Object.assign(Object.assign({},m),{type:"loading"}))},destroyAll:f};provide(messageProviderInjectionKey,{props:e,mergedClsPrefixRef:n}),provide(messageApiInjectionKey,s);function u(g,m){const y=createId(),v=reactive(Object.assign(Object.assign({},m),{content:g,key:y,destroy:()=>{var w;(w=o.value[y])===null||w===void 0||w.hide()}})),{max:_}=e;return _&&r.value.length>=_&&r.value.shift(),r.value.push(v),v}function d(g){r.value.splice(r.value.findIndex(m=>m.key===g),1),delete o.value[g]}function f(){Object.values(o.value).forEach(g=>{g.hide()})}return Object.assign({mergedClsPrefix:n,messageRefs:o,messageList:r,handleAfterLeave:d},s)},render(){var e,n,r;return h$1(Fragment,null,(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e),this.messageList.length?h$1(Teleport,{to:(r=this.to)!==null&&r!==void 0?r:"body"},h$1("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`,this.containerClass],key:"message-container",style:this.containerStyle},this.messageList.map(o=>h$1(MessageEnvironment,Object.assign({ref:s=>{s&&(this.messageRefs[o.key]=s)},internalKey:o.key,onInternalAfterLeave:this.handleAfterLeave},omit(o,["destroy"],void 0),{duration:o.duration===void 0?this.duration:o.duration,keepAliveOnHover:o.keepAliveOnHover===void 0?this.keepAliveOnHover:o.keepAliveOnHover,closable:o.closable===void 0?this.closable:o.closable}))))):null)}});function useMessage(){const e=inject(messageApiInjectionKey,null);return e===null&&throwError("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),e}const NModalEnvironment=defineComponent({name:"ModalEnvironment",props:Object.assign(Object.assign({},modalProps),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const n=ref(!0);function r(){const{onInternalAfterLeave:y,internalKey:v,onAfterLeave:_}=e;y&&y(v),_&&_()}function o(){const{onPositiveClick:y}=e;y?Promise.resolve(y()).then(v=>{v!==!1&&g()}):g()}function s(){const{onNegativeClick:y}=e;y?Promise.resolve(y()).then(v=>{v!==!1&&g()}):g()}function u(){const{onClose:y}=e;y?Promise.resolve(y()).then(v=>{v!==!1&&g()}):g()}function d(y){const{onMaskClick:v,maskClosable:_}=e;v&&(v(y),_&&g())}function f(){const{onEsc:y}=e;y&&y()}function g(){n.value=!1}function m(y){n.value=y}return{show:n,hide:g,handleUpdateShow:m,handleAfterLeave:r,handleCloseClick:u,handleNegativeClick:s,handlePositiveClick:o,handleMaskClick:d,handleEsc:f}},render(){const{handleUpdateShow:e,handleAfterLeave:n,handleMaskClick:r,handleEsc:o,show:s}=this;return h$1(NModal,Object.assign({},this.$props,{show:s,onUpdateShow:e,onMaskClick:r,onEsc:o,onAfterLeave:n,internalAppear:!0,internalModal:!0}))}}),modalProviderInjectionKey="n-modal-provider",modalApiInjectionKey="n-modal-api",modalReactiveListInjectionKey="n-modal-reactive-list",modalProviderProps={to:[String,Object]},NModalProvider=defineComponent({name:"ModalProvider",props:modalProviderProps,setup(){const e=useClicked(64),n=useClickPosition(),r=ref([]),o={};function s(g={}){const m=createId(),y=reactive(Object.assign(Object.assign({},g),{key:m,destroy:()=>{var v;(v=o[`n-modal-${m}`])===null||v===void 0||v.hide()}}));return r.value.push(y),y}function u(g){const{value:m}=r;m.splice(m.findIndex(y=>y.key===g),1)}function d(){Object.values(o).forEach(g=>{g==null||g.hide()})}const f={create:s,destroyAll:d};return provide(modalApiInjectionKey,f),provide(modalProviderInjectionKey,{clickedRef:useClicked(64),clickedPositionRef:useClickPosition()}),provide(modalReactiveListInjectionKey,r),provide(modalProviderInjectionKey,{clickedRef:e,clickedPositionRef:n}),Object.assign(Object.assign({},f),{modalList:r,modalInstRefs:o,handleAfterLeave:u})},render(){var e,n;return h$1(Fragment,null,[this.modalList.map(r=>{var o;return h$1(NModalEnvironment,omit(r,["destroy"],{to:(o=r.to)!==null&&o!==void 0?o:this.to,ref:s=>{s===null?delete this.modalInstRefs[`n-modal-${r.key}`]:this.modalInstRefs[`n-modal-${r.key}`]=s},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave}))}),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)])}});function useModal(){const e=inject(modalApiInjectionKey,null);return e===null&&throwError("use-modal","No outer <n-modal-provider /> founded."),e}const notificationProviderInjectionKey="n-notification-provider",NotificationContainer=defineComponent({name:"NotificationContainer",props:{scrollable:{type:Boolean,required:!0},placement:{type:String,required:!0}},setup(){const{mergedThemeRef:e,mergedClsPrefixRef:n,wipTransitionCountRef:r}=inject(notificationProviderInjectionKey),o=ref(null);return watchEffect(()=>{var s,u;r.value>0?(s=o==null?void 0:o.value)===null||s===void 0||s.classList.add("transitioning"):(u=o==null?void 0:o.value)===null||u===void 0||u.classList.remove("transitioning")}),{selfRef:o,mergedTheme:e,mergedClsPrefix:n,transitioning:r}},render(){const{$slots:e,scrollable:n,mergedClsPrefix:r,mergedTheme:o,placement:s}=this;return h$1("div",{ref:"selfRef",class:[`${r}-notification-container`,n&&`${r}-notification-container--scrollable`,`${r}-notification-container--${s}`]},n?h$1(NScrollbar,{theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,contentStyle:{overflow:"hidden"}},e):e)}}),iconRenderMap={info:()=>h$1(InfoIcon,null),success:()=>h$1(SuccessIcon,null),warning:()=>h$1(WarningIcon,null),error:()=>h$1(ErrorIcon,null),default:()=>null},notificationProps={closable:{type:Boolean,default:!0},type:{type:String,default:"default"},avatar:Function,title:[String,Function],description:[String,Function],content:[String,Function],meta:[String,Function],action:[String,Function],onClose:{type:Function,required:!0},keepAliveOnHover:Boolean,onMouseenter:Function,onMouseleave:Function},notificationPropKeys=keysOf(notificationProps),Notification=defineComponent({name:"Notification",props:notificationProps,setup(e){const{mergedClsPrefixRef:n,mergedThemeRef:r,props:o}=inject(notificationProviderInjectionKey),{inlineThemeDisabled:s,mergedRtlRef:u}=useConfig(),d=useRtl("Notification",u,n),f=computed(()=>{const{type:m}=e,{self:{color:y,textColor:v,closeIconColor:_,closeIconColorHover:w,closeIconColorPressed:x,headerTextColor:k,descriptionTextColor:S,actionTextColor:M,borderRadius:E,headerFontWeight:P,boxShadow:T,lineHeight:D,fontSize:F,closeMargin:I,closeSize:N,width:q,padding:Y,closeIconSize:Z,closeBorderRadius:j,closeColorHover:ne,closeColorPressed:le,titleFontSize:J,metaFontSize:O,descriptionFontSize:U,[createKey("iconColor",m)]:W},common:{cubicBezierEaseOut:H,cubicBezierEaseIn:X,cubicBezierEaseInOut:Q}}=r.value,{left:fe,right:Se,top:Pe,bottom:$e}=getMargin(Y);return{"--n-color":y,"--n-font-size":F,"--n-text-color":v,"--n-description-text-color":S,"--n-action-text-color":M,"--n-title-text-color":k,"--n-title-font-weight":P,"--n-bezier":Q,"--n-bezier-ease-out":H,"--n-bezier-ease-in":X,"--n-border-radius":E,"--n-box-shadow":T,"--n-close-border-radius":j,"--n-close-color-hover":ne,"--n-close-color-pressed":le,"--n-close-icon-color":_,"--n-close-icon-color-hover":w,"--n-close-icon-color-pressed":x,"--n-line-height":D,"--n-icon-color":W,"--n-close-margin":I,"--n-close-size":N,"--n-close-icon-size":Z,"--n-width":q,"--n-padding-left":fe,"--n-padding-right":Se,"--n-padding-top":Pe,"--n-padding-bottom":$e,"--n-title-font-size":J,"--n-meta-font-size":O,"--n-description-font-size":U}}),g=s?useThemeClass("notification",computed(()=>e.type[0]),f,o):void 0;return{mergedClsPrefix:n,showAvatar:computed(()=>e.avatar||e.type!=="default"),handleCloseClick(){e.onClose()},rtlEnabled:d,cssVars:s?void 0:f,themeClass:g==null?void 0:g.themeClass,onRender:g==null?void 0:g.onRender}},render(){var e;const{mergedClsPrefix:n}=this;return(e=this.onRender)===null||e===void 0||e.call(this),h$1("div",{class:[`${n}-notification-wrapper`,this.themeClass],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:this.cssVars},h$1("div",{class:[`${n}-notification`,this.rtlEnabled&&`${n}-notification--rtl`,this.themeClass,{[`${n}-notification--closable`]:this.closable,[`${n}-notification--show-avatar`]:this.showAvatar}],style:this.cssVars},this.showAvatar?h$1("div",{class:`${n}-notification__avatar`},this.avatar?render$1(this.avatar):this.type!=="default"?h$1(NBaseIcon,{clsPrefix:n},{default:()=>iconRenderMap[this.type]()}):null):null,this.closable?h$1(NBaseClose,{clsPrefix:n,class:`${n}-notification__close`,onClick:this.handleCloseClick}):null,h$1("div",{ref:"bodyRef",class:`${n}-notification-main`},this.title?h$1("div",{class:`${n}-notification-main__header`},render$1(this.title)):null,this.description?h$1("div",{class:`${n}-notification-main__description`},render$1(this.description)):null,this.content?h$1("pre",{class:`${n}-notification-main__content`},render$1(this.content)):null,this.meta||this.action?h$1("div",{class:`${n}-notification-main-footer`},this.meta?h$1("div",{class:`${n}-notification-main-footer__meta`},render$1(this.meta)):null,this.action?h$1("div",{class:`${n}-notification-main-footer__action`},render$1(this.action)):null):null)))}}),notificationEnvOptions=Object.assign(Object.assign({},notificationProps),{duration:Number,onClose:Function,onLeave:Function,onAfterEnter:Function,onAfterLeave:Function,onHide:Function,onAfterShow:Function,onAfterHide:Function}),NotificationEnvironment=defineComponent({name:"NotificationEnvironment",props:Object.assign(Object.assign({},notificationEnvOptions),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const{wipTransitionCountRef:n}=inject(notificationProviderInjectionKey),r=ref(!0);let o=null;function s(){r.value=!1,o&&window.clearTimeout(o)}function u(x){n.value++,nextTick(()=>{x.style.height=`${x.offsetHeight}px`,x.style.maxHeight="0",x.style.transition="none",x.offsetHeight,x.style.transition="",x.style.maxHeight=x.style.height})}function d(x){n.value--,x.style.height="",x.style.maxHeight="";const{onAfterEnter:k,onAfterShow:S}=e;k&&k(),S&&S()}function f(x){n.value++,x.style.maxHeight=`${x.offsetHeight}px`,x.style.height=`${x.offsetHeight}px`,x.offsetHeight}function g(x){const{onHide:k}=e;k&&k(),x.style.maxHeight="0",x.offsetHeight}function m(){n.value--;const{onAfterLeave:x,onInternalAfterLeave:k,onAfterHide:S,internalKey:M}=e;x&&x(),k(M),S&&S()}function y(){const{duration:x}=e;x&&(o=window.setTimeout(s,x))}function v(x){x.currentTarget===x.target&&o!==null&&(window.clearTimeout(o),o=null)}function _(x){x.currentTarget===x.target&&y()}function w(){const{onClose:x}=e;x?Promise.resolve(x()).then(k=>{k!==!1&&s()}):s()}return onMounted(()=>{e.duration&&(o=window.setTimeout(s,e.duration))}),{show:r,hide:s,handleClose:w,handleAfterLeave:m,handleLeave:g,handleBeforeLeave:f,handleAfterEnter:d,handleBeforeEnter:u,handleMouseenter:v,handleMouseleave:_}},render(){return h$1(Transition,{name:"notification-transition",appear:!0,onBeforeEnter:this.handleBeforeEnter,onAfterEnter:this.handleAfterEnter,onBeforeLeave:this.handleBeforeLeave,onLeave:this.handleLeave,onAfterLeave:this.handleAfterLeave},{default:()=>this.show?h$1(Notification,Object.assign({},keep(this.$props,notificationPropKeys),{onClose:this.handleClose,onMouseenter:this.duration&&this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.duration&&this.keepAliveOnHover?this.handleMouseleave:void 0})):null})}}),style$2=c$1([cB("notification-container",`
 z-index: 4000;
 position: fixed;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: flex-end;
 `,[c$1(">",[cB("scrollbar",`
 width: initial;
 overflow: visible;
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[c$1(">",[cB("scrollbar-container",`
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[cB("scrollbar-content",`
 padding-top: 12px;
 padding-bottom: 33px;
 `)])])])]),cM("top, top-right, top-left",`
 top: 12px;
 `,[c$1("&.transitioning >",[cB("scrollbar",[c$1(">",[cB("scrollbar-container",`
 min-height: 100vh !important;
 `)])])])]),cM("bottom, bottom-right, bottom-left",`
 bottom: 12px;
 `,[c$1(">",[cB("scrollbar",[c$1(">",[cB("scrollbar-container",[cB("scrollbar-content",`
 padding-bottom: 12px;
 `)])])])]),cB("notification-wrapper",`
 display: flex;
 align-items: flex-end;
 margin-bottom: 0;
 margin-top: 12px;
 `)]),cM("top, bottom",`
 left: 50%;
 transform: translateX(-50%);
 `,[cB("notification-wrapper",[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: scale(0.85);
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: scale(1);
 `)])]),cM("top",[cB("notification-wrapper",`
 transform-origin: top center;
 `)]),cM("bottom",[cB("notification-wrapper",`
 transform-origin: bottom center;
 `)]),cM("top-right, bottom-right",[cB("notification",`
 margin-left: 28px;
 margin-right: 16px;
 `)]),cM("top-left, bottom-left",[cB("notification",`
 margin-left: 16px;
 margin-right: 28px;
 `)]),cM("top-right",`
 right: 0;
 `,[placementTransformStyle("top-right")]),cM("top-left",`
 left: 0;
 `,[placementTransformStyle("top-left")]),cM("bottom-right",`
 right: 0;
 `,[placementTransformStyle("bottom-right")]),cM("bottom-left",`
 left: 0;
 `,[placementTransformStyle("bottom-left")]),cM("scrollable",[cM("top-right",`
 top: 0;
 `),cM("top-left",`
 top: 0;
 `),cM("bottom-right",`
 bottom: 0;
 `),cM("bottom-left",`
 bottom: 0;
 `)]),cB("notification-wrapper",`
 margin-bottom: 12px;
 `,[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 opacity: 0;
 margin-top: 0 !important;
 margin-bottom: 0 !important;
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 opacity: 1;
 `),c$1("&.notification-transition-leave-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-in),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `),c$1("&.notification-transition-enter-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-out),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `)]),cB("notification",`
 background-color: var(--n-color);
 color: var(--n-text-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 font-family: inherit;
 font-size: var(--n-font-size);
 font-weight: 400;
 position: relative;
 display: flex;
 overflow: hidden;
 flex-shrink: 0;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 width: var(--n-width);
 max-width: calc(100vw - 16px - 16px);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 box-sizing: border-box;
 opacity: 1;
 `,[cE("avatar",[cB("icon",`
 color: var(--n-icon-color);
 `),cB("base-icon",`
 color: var(--n-icon-color);
 `)]),cM("show-avatar",[cB("notification-main",`
 margin-left: 40px;
 width: calc(100% - 40px); 
 `)]),cM("closable",[cB("notification-main",[c$1("> *:first-child",`
 padding-right: 20px;
 `)]),cE("close",`
 position: absolute;
 top: 0;
 right: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),cE("avatar",`
 position: absolute;
 top: var(--n-padding-top);
 left: var(--n-padding-left);
 width: 28px;
 height: 28px;
 font-size: 28px;
 display: flex;
 align-items: center;
 justify-content: center;
 `,[cB("icon","transition: color .3s var(--n-bezier);")]),cB("notification-main",`
 padding-top: var(--n-padding-top);
 padding-bottom: var(--n-padding-bottom);
 box-sizing: border-box;
 display: flex;
 flex-direction: column;
 margin-left: 8px;
 width: calc(100% - 8px);
 `,[cB("notification-main-footer",`
 display: flex;
 align-items: center;
 justify-content: space-between;
 margin-top: 12px;
 `,[cE("meta",`
 font-size: var(--n-meta-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),cE("action",`
 cursor: pointer;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-action-text-color);
 `)]),cE("header",`
 font-weight: var(--n-title-font-weight);
 font-size: var(--n-title-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-title-text-color);
 `),cE("description",`
 margin-top: 8px;
 font-size: var(--n-description-font-size);
 white-space: pre-wrap;
 word-wrap: break-word;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),cE("content",`
 line-height: var(--n-line-height);
 margin: 12px 0 0 0;
 font-family: inherit;
 white-space: pre-wrap;
 word-wrap: break-word;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-text-color);
 `,[c$1("&:first-child","margin: 0;")])])])])]);function placementTransformStyle(e){const r=e.split("-")[1]==="left"?"calc(-100%)":"calc(100%)",o="0";return cB("notification-wrapper",[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: translate(${r}, 0);
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: translate(${o}, 0);
 `)])}const notificationApiInjectionKey="n-notification-api",notificationProviderProps=Object.assign(Object.assign({},useTheme.props),{containerClass:String,containerStyle:[String,Object],to:[String,Object],scrollable:{type:Boolean,default:!0},max:Number,placement:{type:String,default:"top-right"},keepAliveOnHover:Boolean}),NNotificationProvider=defineComponent({name:"NotificationProvider",props:notificationProviderProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=ref([]),o={},s=new Set;function u(w){const x=createId(),k=()=>{s.add(x),o[x]&&o[x].hide()},S=reactive(Object.assign(Object.assign({},w),{key:x,destroy:k,hide:k,deactivate:k})),{max:M}=e;if(M&&r.value.length-s.size>=M){let E=!1,P=0;for(const T of r.value){if(!s.has(T.key)){o[T.key]&&(T.destroy(),E=!0);break}P++}E||r.value.splice(P,1)}return r.value.push(S),S}const d=["info","success","warning","error"].map(w=>x=>u(Object.assign(Object.assign({},x),{type:w})));function f(w){s.delete(w),r.value.splice(r.value.findIndex(x=>x.key===w),1)}const g=useTheme("Notification","-notification",style$2,notificationLight$1,e,n),m={create:u,info:d[0],success:d[1],warning:d[2],error:d[3],open:v,destroyAll:_},y=ref(0);provide(notificationApiInjectionKey,m),provide(notificationProviderInjectionKey,{props:e,mergedClsPrefixRef:n,mergedThemeRef:g,wipTransitionCountRef:y});function v(w){return u(w)}function _(){Object.values(r.value).forEach(w=>{w.hide()})}return Object.assign({mergedClsPrefix:n,notificationList:r,notificationRefs:o,handleAfterLeave:f},m)},render(){var e,n,r;const{placement:o}=this;return h$1(Fragment,null,(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e),this.notificationList.length?h$1(Teleport,{to:(r=this.to)!==null&&r!==void 0?r:"body"},h$1(NotificationContainer,{class:this.containerClass,style:this.containerStyle,scrollable:this.scrollable&&o!=="top"&&o!=="bottom",placement:o},{default:()=>this.notificationList.map(s=>h$1(NotificationEnvironment,Object.assign({ref:u=>{const d=s.key;u===null?delete this.notificationRefs[d]:this.notificationRefs[d]=u}},omit(s,["destroy","hide","deactivate"]),{internalKey:s.key,onInternalAfterLeave:this.handleAfterLeave,keepAliveOnHover:s.keepAliveOnHover===void 0?this.keepAliveOnHover:s.keepAliveOnHover})))})):null)}});function useNotification(){const e=inject(notificationApiInjectionKey,null);return e===null&&throwError("use-notification","No outer `n-notification-provider` found."),e}function isTouchEvent(e){return window.TouchEvent&&e instanceof window.TouchEvent}function useRefs(){const e=new Map,n=r=>o=>{e.set(r,o)};return onBeforeUpdate(()=>{e.clear()}),[e,n]}const style$1=c$1([cB("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[cM("reverse",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),cM("vertical",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),cB("slider-marks",[cB("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),cM("vertical",`
 box-sizing: content-box;
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[cB("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[cB("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),cB("slider-rail",`
 height: 100%;
 `,[cE("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),cM("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),cB("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[cB("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),cB("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[cB("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[cB("slider-handle",`
 cursor: not-allowed;
 `)]),cM("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),c$1("&:hover",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cM("active",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cB("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cB("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),cB("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[cE("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),cB("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[cB("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[cB("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[c$1("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),c$1("&:focus",[cB("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[c$1("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),cB("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cM("transition-disabled",[cB("slider-dot","transition: none;")]),cB("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[cM("active","border: var(--n-dot-border-active);")])])]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[fadeInScaleUpTransition()]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[cM("top",`
 margin-bottom: 12px;
 `),cM("right",`
 margin-left: 12px;
 `),cM("bottom",`
 margin-top: 12px;
 `),cM("left",`
 margin-right: 12px;
 `),fadeInScaleUpTransition()]),insideModal(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-modal);")])),insidePopover(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-popover);")]))]),eventButtonLeft=0,sliderProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onDragstart:[Function],onDragend:[Function]}),NSlider=defineComponent({name:"Slider",props:sliderProps,setup(e){const{mergedClsPrefixRef:n,namespaceRef:r,inlineThemeDisabled:o}=useConfig(e),s=useTheme("Slider","-slider",style$1,sliderLight$1,e,n),u=ref(null),[d,f]=useRefs(),[g,m]=useRefs(),y=ref(new Set),v=useFormItem(e),{mergedDisabledRef:_}=v,w=computed(()=>{const{step:Ce}=e;if(Number(Ce)<=0||Ce==="mark")return 0;const Ee=Ce.toString();let Te=0;return Ee.includes(".")&&(Te=Ee.length-Ee.indexOf(".")-1),Te}),x=ref(e.defaultValue),k=toRef(e,"value"),S=useMergedState(k,x),M=computed(()=>{const{value:Ce}=S;return(e.range?Ce:[Ce]).map(fe)}),E=computed(()=>M.value.length>2),P=computed(()=>e.placement===void 0?e.vertical?"right":"top":e.placement),T=computed(()=>{const{marks:Ce}=e;return Ce?Object.keys(Ce).map(Number.parseFloat):null}),D=ref(-1),F=ref(-1),I=ref(-1),N=ref(!1),q=ref(!1),Y=computed(()=>{const{vertical:Ce,reverse:Ee}=e;return Ce?Ee?"top":"bottom":Ee?"right":"left"}),Z=computed(()=>{if(E.value)return;const Ce=M.value,Ee=Se(e.range?Math.min(...Ce):e.min),Te=Se(e.range?Math.max(...Ce):Ce[0]),{value:Re}=Y;return e.vertical?{[Re]:`${Ee}%`,height:`${Te-Ee}%`}:{[Re]:`${Ee}%`,width:`${Te-Ee}%`}}),j=computed(()=>{const Ce=[],{marks:Ee}=e;if(Ee){const Te=M.value.slice();Te.sort((Ze,Xe)=>Ze-Xe);const{value:Re}=Y,{value:Oe}=E,{range:je}=e,We=Oe?()=>!1:Ze=>je?Ze>=Te[0]&&Ze<=Te[Te.length-1]:Ze<=Te[0];for(const Ze of Object.keys(Ee)){const Xe=Number(Ze);Ce.push({active:We(Xe),key:Xe,label:Ee[Ze],style:{[Re]:`${Se(Xe)}%`}})}}return Ce});function ne(Ce,Ee){const Te=Se(Ce),{value:Re}=Y;return{[Re]:`${Te}%`,zIndex:Ee===D.value?1:0}}function le(Ce){return e.showTooltip||I.value===Ce||D.value===Ce&&N.value}function J(Ce){return N.value?!(D.value===Ce&&F.value===Ce):!0}function O(Ce){var Ee;~Ce&&(D.value=Ce,(Ee=d.get(Ce))===null||Ee===void 0||Ee.focus())}function U(){g.forEach((Ce,Ee)=>{le(Ee)&&Ce.syncPosition()})}function W(Ce){const{"onUpdate:value":Ee,onUpdateValue:Te}=e,{nTriggerFormInput:Re,nTriggerFormChange:Oe}=v;Te&&call(Te,Ce),Ee&&call(Ee,Ce),x.value=Ce,Re(),Oe()}function H(Ce){const{range:Ee}=e;if(Ee){if(Array.isArray(Ce)){const{value:Te}=M;Ce.join()!==Te.join()&&W(Ce)}}else Array.isArray(Ce)||M.value[0]!==Ce&&W(Ce)}function X(Ce,Ee){if(e.range){const Te=M.value.slice();Te.splice(Ee,1,Ce),H(Te)}else H(Ce)}function Q(Ce,Ee,Te){const Re=Te!==void 0;Te||(Te=Ce-Ee>0?1:-1);const Oe=T.value||[],{step:je}=e;if(je==="mark"){const Xe=Ie(Ce,Oe.concat(Ee),Re?Te:void 0);return Xe?Xe.value:Ee}if(je<=0)return Ee;const{value:We}=w;let Ze;if(Re){const Xe=Number((Ee/je).toFixed(We)),Ge=Math.floor(Xe),Qe=Xe>Ge?Ge:Ge-1,rt=Xe<Ge?Ge:Ge+1;Ze=Ie(Ee,[Number((Qe*je).toFixed(We)),Number((rt*je).toFixed(We)),...Oe],Te)}else{const Xe=$e(Ce);Ze=Ie(Ce,[...Oe,Xe])}return Ze?fe(Ze.value):Ee}function fe(Ce){return Math.min(e.max,Math.max(e.min,Ce))}function Se(Ce){const{max:Ee,min:Te}=e;return(Ce-Te)/(Ee-Te)*100}function Pe(Ce){const{max:Ee,min:Te}=e;return Te+(Ee-Te)*Ce}function $e(Ce){const{step:Ee,min:Te}=e;if(Number(Ee)<=0||Ee==="mark")return Ce;const Re=Math.round((Ce-Te)/Ee)*Ee+Te;return Number(Re.toFixed(w.value))}function Ie(Ce,Ee=T.value,Te){if(!(Ee!=null&&Ee.length))return null;let Re=null,Oe=-1;for(;++Oe<Ee.length;){const je=Ee[Oe]-Ce,We=Math.abs(je);(Te===void 0||je*Te>0)&&(Re===null||We<Re.distance)&&(Re={index:Oe,distance:We,value:Ee[Oe]})}return Re}function Ne(Ce){const Ee=u.value;if(!Ee)return;const Te=isTouchEvent(Ce)?Ce.touches[0]:Ce,Re=Ee.getBoundingClientRect();let Oe;return e.vertical?Oe=(Re.bottom-Te.clientY)/Re.height:Oe=(Te.clientX-Re.left)/Re.width,e.reverse&&(Oe=1-Oe),Pe(Oe)}function Be(Ce){if(_.value||!e.keyboard)return;const{vertical:Ee,reverse:Te}=e;switch(Ce.key){case"ArrowUp":Ce.preventDefault(),be(Ee&&Te?-1:1);break;case"ArrowRight":Ce.preventDefault(),be(!Ee&&Te?-1:1);break;case"ArrowDown":Ce.preventDefault(),be(Ee&&Te?1:-1);break;case"ArrowLeft":Ce.preventDefault(),be(!Ee&&Te?1:-1);break}}function be(Ce){const Ee=D.value;if(Ee===-1)return;const{step:Te}=e,Re=M.value[Ee],Oe=Number(Te)<=0||Te==="mark"?Re:Re+Te*Ce;X(Q(Oe,Re,Ce>0?1:-1),Ee)}function Ve(Ce){var Ee,Te;if(_.value||!isTouchEvent(Ce)&&Ce.button!==eventButtonLeft)return;const Re=Ne(Ce);if(Re===void 0)return;const Oe=M.value.slice(),je=e.range?(Te=(Ee=Ie(Re,Oe))===null||Ee===void 0?void 0:Ee.index)!==null&&Te!==void 0?Te:-1:0;je!==-1&&(Ce.preventDefault(),O(je),De(),X(Q(Re,M.value[je]),je))}function De(){N.value||(N.value=!0,e.onDragstart&&call(e.onDragstart),on$1("touchend",document,we),on$1("mouseup",document,we),on$1("touchmove",document,ye),on$1("mousemove",document,ye))}function ve(){N.value&&(N.value=!1,e.onDragend&&call(e.onDragend),off$1("touchend",document,we),off$1("mouseup",document,we),off$1("touchmove",document,ye),off$1("mousemove",document,ye))}function ye(Ce){const{value:Ee}=D;if(!N.value||Ee===-1){ve();return}const Te=Ne(Ce);Te!==void 0&&X(Q(Te,M.value[Ee]),Ee)}function we(){ve()}function ke(Ce){D.value=Ce,_.value||(I.value=Ce)}function Me(Ce){D.value===Ce&&(D.value=-1,ve()),I.value===Ce&&(I.value=-1)}function Le(Ce){I.value=Ce}function Fe(Ce){I.value===Ce&&(I.value=-1)}watch(D,(Ce,Ee)=>void nextTick(()=>F.value=Ee)),watch(S,()=>{if(e.marks){if(q.value)return;q.value=!0,nextTick(()=>{q.value=!1})}nextTick(U)}),onBeforeUnmount(()=>{ve()});const ze=computed(()=>{const{self:{markFontSize:Ce,railColor:Ee,railColorHover:Te,fillColor:Re,fillColorHover:Oe,handleColor:je,opacityDisabled:We,dotColor:Ze,dotColorModal:Xe,handleBoxShadow:Ge,handleBoxShadowHover:Qe,handleBoxShadowActive:rt,handleBoxShadowFocus:dt,dotBorder:qe,dotBoxShadow:He,railHeight:Ke,railWidthVertical:ot,handleSize:at,dotHeight:et,dotWidth:Je,dotBorderRadius:nt,fontSize:it,dotBorderActive:ht,dotColorPopover:lt},common:{cubicBezierEaseInOut:ft}}=s.value;return{"--n-bezier":ft,"--n-dot-border":qe,"--n-dot-border-active":ht,"--n-dot-border-radius":nt,"--n-dot-box-shadow":He,"--n-dot-color":Ze,"--n-dot-color-modal":Xe,"--n-dot-color-popover":lt,"--n-dot-height":et,"--n-dot-width":Je,"--n-fill-color":Re,"--n-fill-color-hover":Oe,"--n-font-size":it,"--n-handle-box-shadow":Ge,"--n-handle-box-shadow-active":rt,"--n-handle-box-shadow-focus":dt,"--n-handle-box-shadow-hover":Qe,"--n-handle-color":je,"--n-handle-size":at,"--n-opacity-disabled":We,"--n-rail-color":Ee,"--n-rail-color-hover":Te,"--n-rail-height":Ke,"--n-rail-width-vertical":ot,"--n-mark-font-size":Ce}}),te=o?useThemeClass("slider",void 0,ze,e):void 0,oe=computed(()=>{const{self:{fontSize:Ce,indicatorColor:Ee,indicatorBoxShadow:Te,indicatorTextColor:Re,indicatorBorderRadius:Oe}}=s.value;return{"--n-font-size":Ce,"--n-indicator-border-radius":Oe,"--n-indicator-box-shadow":Te,"--n-indicator-color":Ee,"--n-indicator-text-color":Re}}),_e=o?useThemeClass("slider-indicator",void 0,oe,e):void 0;return{mergedClsPrefix:n,namespace:r,uncontrolledValue:x,mergedValue:S,mergedDisabled:_,mergedPlacement:P,isMounted:isMounted(),adjustedTo:useAdjustedTo(e),dotTransitionDisabled:q,markInfos:j,isShowTooltip:le,shouldKeepTooltipTransition:J,handleRailRef:u,setHandleRefs:f,setFollowerRefs:m,fillStyle:Z,getHandleStyle:ne,activeIndex:D,arrifiedValues:M,followerEnabledIndexSet:y,handleRailMouseDown:Ve,handleHandleFocus:ke,handleHandleBlur:Me,handleHandleMouseEnter:Le,handleHandleMouseLeave:Fe,handleRailKeyDown:Be,indicatorCssVars:o?void 0:oe,indicatorThemeClass:_e==null?void 0:_e.themeClass,indicatorOnRender:_e==null?void 0:_e.onRender,cssVars:o?void 0:ze,themeClass:te==null?void 0:te.themeClass,onRender:te==null?void 0:te.onRender}},render(){var e;const{mergedClsPrefix:n,themeClass:r,formatTooltip:o}=this;return(e=this.onRender)===null||e===void 0||e.call(this),h$1("div",{class:[`${n}-slider`,r,{[`${n}-slider--disabled`]:this.mergedDisabled,[`${n}-slider--active`]:this.activeIndex!==-1,[`${n}-slider--with-mark`]:this.marks,[`${n}-slider--vertical`]:this.vertical,[`${n}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},h$1("div",{class:`${n}-slider-rail`},h$1("div",{class:`${n}-slider-rail__fill`,style:this.fillStyle}),this.marks?h$1("div",{class:[`${n}-slider-dots`,this.dotTransitionDisabled&&`${n}-slider-dots--transition-disabled`]},this.markInfos.map(s=>h$1("div",{key:s.key,class:[`${n}-slider-dot`,{[`${n}-slider-dot--active`]:s.active}],style:s.style}))):null,h$1("div",{ref:"handleRailRef",class:`${n}-slider-handles`},this.arrifiedValues.map((s,u)=>{const d=this.isShowTooltip(u);return h$1(VBinder,null,{default:()=>[h$1(VTarget,null,{default:()=>h$1("div",{ref:this.setHandleRefs(u),class:`${n}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,role:"slider","aria-valuenow":s,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-orientation":this.vertical?"vertical":"horizontal","aria-disabled":this.disabled,style:this.getHandleStyle(s,u),onFocus:()=>{this.handleHandleFocus(u)},onBlur:()=>{this.handleHandleBlur(u)},onMouseenter:()=>{this.handleHandleMouseEnter(u)},onMouseleave:()=>{this.handleHandleMouseLeave(u)}},resolveSlot(this.$slots.thumb,()=>[h$1("div",{class:`${n}-slider-handle`})]))}),this.tooltip&&h$1(VFollower,{ref:this.setFollowerRefs(u),show:d,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(u),teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>h$1(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(u),onEnter:()=>{this.followerEnabledIndexSet.add(u)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(u)}},{default:()=>{var f;return d?((f=this.indicatorOnRender)===null||f===void 0||f.call(this),h$1("div",{class:[`${n}-slider-handle-indicator`,this.indicatorThemeClass,`${n}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof o=="function"?o(s):s)):null}})})]})})),this.marks?h$1("div",{class:`${n}-slider-marks`},this.markInfos.map(s=>h$1("div",{key:s.key,class:`${n}-slider-mark`,style:s.style},typeof s.label=="function"?s.label():s.label))):null))}}),style=cB("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[cE("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),cE("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),cE("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),cB("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[iconSwitchTransition({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),cE("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),cE("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),cE("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),c$1("&:focus",[cE("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),cM("round",[cE("rail","border-radius: calc(var(--n-rail-height) / 2);",[cE("button","border-radius: calc(var(--n-button-height) / 2);")])]),cNotM("disabled",[cNotM("icon",[cM("rubber-band",[cM("pressed",[cE("rail",[cE("button","max-width: var(--n-button-width-pressed);")])]),cE("rail",[c$1("&:active",[cE("button","max-width: var(--n-button-width-pressed);")])]),cM("active",[cM("pressed",[cE("rail",[cE("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),cE("rail",[c$1("&:active",[cE("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),cM("active",[cE("rail",[cE("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),cE("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[cE("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[iconSwitchTransition()]),cE("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-height);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),cM("active",[cE("rail","background-color: var(--n-rail-color-active);")]),cM("loading",[cE("rail",`
 cursor: wait;
 `)]),cM("disabled",[cE("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]),switchProps=Object.assign(Object.assign({},useTheme.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let supportCssMax;const NSwitch=defineComponent({name:"Switch",props:switchProps,setup(e){supportCssMax===void 0&&(typeof CSS<"u"?typeof CSS.supports<"u"?supportCssMax=CSS.supports("width","max(1px)"):supportCssMax=!1:supportCssMax=!0);const{mergedClsPrefixRef:n,inlineThemeDisabled:r}=useConfig(e),o=useTheme("Switch","-switch",style,switchLight$1,e,n),s=useFormItem(e),{mergedSizeRef:u,mergedDisabledRef:d}=s,f=ref(e.defaultValue),g=toRef(e,"value"),m=useMergedState(g,f),y=computed(()=>m.value===e.checkedValue),v=ref(!1),_=ref(!1),w=computed(()=>{const{railStyle:N}=e;if(!!N)return N({focused:_.value,checked:y.value})});function x(N){const{"onUpdate:value":q,onChange:Y,onUpdateValue:Z}=e,{nTriggerFormInput:j,nTriggerFormChange:ne}=s;q&&call(q,N),Z&&call(Z,N),Y&&call(Y,N),f.value=N,j(),ne()}function k(){const{nTriggerFormFocus:N}=s;N()}function S(){const{nTriggerFormBlur:N}=s;N()}function M(){e.loading||d.value||(m.value!==e.checkedValue?x(e.checkedValue):x(e.uncheckedValue))}function E(){_.value=!0,k()}function P(){_.value=!1,S(),v.value=!1}function T(N){e.loading||d.value||N.key===" "&&(m.value!==e.checkedValue?x(e.checkedValue):x(e.uncheckedValue),v.value=!1)}function D(N){e.loading||d.value||N.key===" "&&(N.preventDefault(),v.value=!0)}const F=computed(()=>{const{value:N}=u,{self:{opacityDisabled:q,railColor:Y,railColorActive:Z,buttonBoxShadow:j,buttonColor:ne,boxShadowFocus:le,loadingColor:J,textColor:O,iconColor:U,[createKey("buttonHeight",N)]:W,[createKey("buttonWidth",N)]:H,[createKey("buttonWidthPressed",N)]:X,[createKey("railHeight",N)]:Q,[createKey("railWidth",N)]:fe,[createKey("railBorderRadius",N)]:Se,[createKey("buttonBorderRadius",N)]:Pe},common:{cubicBezierEaseInOut:$e}}=o.value;let Ie,Ne,Be;return supportCssMax?(Ie=`calc((${Q} - ${W}) / 2)`,Ne=`max(${Q}, ${W})`,Be=`max(${fe}, calc(${fe} + ${W} - ${Q}))`):(Ie=pxfy((depx(Q)-depx(W))/2),Ne=pxfy(Math.max(depx(Q),depx(W))),Be=depx(Q)>depx(W)?fe:pxfy(depx(fe)+depx(W)-depx(Q))),{"--n-bezier":$e,"--n-button-border-radius":Pe,"--n-button-box-shadow":j,"--n-button-color":ne,"--n-button-width":H,"--n-button-width-pressed":X,"--n-button-height":W,"--n-height":Ne,"--n-offset":Ie,"--n-opacity-disabled":q,"--n-rail-border-radius":Se,"--n-rail-color":Y,"--n-rail-color-active":Z,"--n-rail-height":Q,"--n-rail-width":fe,"--n-width":Be,"--n-box-shadow-focus":le,"--n-loading-color":J,"--n-text-color":O,"--n-icon-color":U}}),I=r?useThemeClass("switch",computed(()=>u.value[0]),F,e):void 0;return{handleClick:M,handleBlur:P,handleFocus:E,handleKeyup:T,handleKeydown:D,mergedRailStyle:w,pressed:v,mergedClsPrefix:n,mergedValue:m,checked:y,mergedDisabled:d,cssVars:r?void 0:F,themeClass:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:n,checked:r,mergedRailStyle:o,onRender:s,$slots:u}=this;s==null||s();const{checked:d,unchecked:f,icon:g,"checked-icon":m,"unchecked-icon":y}=u,v=!(isSlotEmpty(g)&&isSlotEmpty(m)&&isSlotEmpty(y));return h$1("div",{role:"switch","aria-checked":r,class:[`${e}-switch`,this.themeClass,v&&`${e}-switch--icon`,r&&`${e}-switch--active`,n&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},h$1("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:o},resolveWrappedSlot(d,_=>resolveWrappedSlot(f,w=>_||w?h$1("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},h$1("div",{class:`${e}-switch__rail-placeholder`},h$1("div",{class:`${e}-switch__button-placeholder`}),_),h$1("div",{class:`${e}-switch__rail-placeholder`},h$1("div",{class:`${e}-switch__button-placeholder`}),w)):null)),h$1("div",{class:`${e}-switch__button`},resolveWrappedSlot(g,_=>resolveWrappedSlot(m,w=>resolveWrappedSlot(y,x=>h$1(NIconSwitchTransition,null,{default:()=>this.loading?h$1(NBaseLoading,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(w||_)?h$1("div",{class:`${e}-switch__button-icon`,key:w?"checked-icon":"icon"},w||_):!this.checked&&(x||_)?h$1("div",{class:`${e}-switch__button-icon`,key:x?"unchecked-icon":"icon"},x||_):null})))),resolveWrappedSlot(d,_=>_&&h$1("div",{key:"checked",class:`${e}-switch__checked`},_)),resolveWrappedSlot(f,_=>_&&h$1("div",{key:"unchecked",class:`${e}-switch__unchecked`},_)))))}}),NInjectionExtractor=defineComponent({name:"InjectionExtractor",props:{onSetup:Function},setup(e,{slots:n}){var r;return(r=e.onSetup)===null||r===void 0||r.call(e),()=>{var o;return(o=n.default)===null||o===void 0?void 0:o.call(n)}}}),injectionFactoryMap={message:useMessage,notification:useNotification,loadingBar:useLoadingBar,dialog:useDialog,modal:useModal};function createDiscreteApp({providersAndProps:e,configProviderProps:n}){let r=createApp(s);const o={app:r};function s(){return h$1(NConfigProvider,unref(n),{default:()=>e.map(({type:f,Provider:g,props:m})=>h$1(g,unref(m),{default:()=>h$1(NInjectionExtractor,{onSetup:()=>o[f]=injectionFactoryMap[f]()})}))})}let u;return isBrowser$2&&(u=document.createElement("div"),document.body.appendChild(u),r.mount(u)),Object.assign({unmount:()=>{var f;if(r===null||u===null){warn$2("discrete","unmount call no need because discrete app has been unmounted");return}r.unmount(),(f=u.parentNode)===null||f===void 0||f.removeChild(u),u=null,r=null}},o)}function createDiscreteApi(e,{configProviderProps:n,messageProviderProps:r,dialogProviderProps:o,notificationProviderProps:s,loadingBarProviderProps:u,modalProviderProps:d}={}){const f=[];return e.forEach(m=>{switch(m){case"message":f.push({type:m,Provider:NMessageProvider,props:r});break;case"notification":f.push({type:m,Provider:NNotificationProvider,props:s});break;case"dialog":f.push({type:m,Provider:NDialogProvider,props:o});break;case"loadingBar":f.push({type:m,Provider:NLoadingBarProvider,props:u});break;case"modal":f.push({type:m,Provider:NModalProvider,props:d})}}),createDiscreteApp({providersAndProps:f,configProviderProps:n})}const _export_sfc=(e,n)=>{const r=e.__vccOpts||e;for(const[o,s]of n)r[o]=s;return r},{message}=createDiscreteApi(["message"]);window.$message=message;const _sfc_main$3S=defineComponent({});function _sfc_render$2h(e,n,r,o,s,u){return openBlock(),createElementBlock("div")}const __unplugin_components_17$1=_export_sfc(_sfc_main$3S,[["render",_sfc_render$2h]]),_sfc_main$3R={},_hoisted_1$3p={width:"8",height:"16",viewBox:"0 0 8 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3p,n[0]||(n[0]=[createBaseVNode("g",{id:".base / Sliders"},[createBaseVNode("rect",{id:"Rectangle",width:"8",height:"16",rx:"4",fill:"#1460F3"})],-1)]))}const __unplugin_components_1$e=_export_sfc(_sfc_main$3R,[["render",_sfc_render$2g]]),_imports_0$1=""+new URL("colorful.c840ddf1.svg",import.meta.url).href;var isVue2=!1;/*!
 * pinia v2.2.4
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject$1(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var MutationType;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const e=effectScope(!0),n=e.run(()=>ref({}));let r=[],o=[];const s=markRaw({install(u){setActivePinia(s),s._a=u,u.provide(piniaSymbol,s),u.config.globalProperties.$pinia=s,o.forEach(d=>r.push(d)),o=[]},use(u){return!this._a&&!isVue2?o.push(u):r.push(u),this},_p:r,_a:null,_e:e,_s:new Map,state:n});return s}const noop=()=>{};function addSubscription(e,n,r,o=noop){e.push(n);const s=()=>{const u=e.indexOf(n);u>-1&&(e.splice(u,1),o())};return!r&&getCurrentScope()&&onScopeDispose(s),s}function triggerSubscriptions(e,...n){e.slice().forEach(r=>{r(...n)})}const fallbackRunWithContext=e=>e(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(e,n){e instanceof Map&&n instanceof Map?n.forEach((r,o)=>e.set(o,r)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const r in n){if(!n.hasOwnProperty(r))continue;const o=n[r],s=e[r];isPlainObject$1(s)&&isPlainObject$1(o)&&e.hasOwnProperty(r)&&!isRef(o)&&!isReactive(o)?e[r]=mergeReactiveObjects(s,o):e[r]=o}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject$1(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(e){return!!(isRef(e)&&e.effect)}function createOptionsStore(e,n,r,o){const{state:s,actions:u,getters:d}=n,f=r.state.value[e];let g;function m(){f||(r.state.value[e]=s?s():{});const y=toRefs(r.state.value[e]);return assign(y,u,Object.keys(d||{}).reduce((v,_)=>(v[_]=markRaw(computed(()=>{setActivePinia(r);const w=r._s.get(e);return d[_].call(w,w)})),v),{}))}return g=createSetupStore(e,m,n,r,o,!0),g}function createSetupStore(e,n,r={},o,s,u){let d;const f=assign({actions:{}},r),g={deep:!0};let m,y,v=[],_=[],w;const x=o.state.value[e];!u&&!x&&(o.state.value[e]={}),ref({});let k;function S(N){let q;m=y=!1,typeof N=="function"?(N(o.state.value[e]),q={type:MutationType.patchFunction,storeId:e,events:w}):(mergeReactiveObjects(o.state.value[e],N),q={type:MutationType.patchObject,payload:N,storeId:e,events:w});const Y=k=Symbol();nextTick().then(()=>{k===Y&&(m=!0)}),y=!0,triggerSubscriptions(v,q,o.state.value[e])}const M=u?function(){const{state:q}=r,Y=q?q():{};this.$patch(Z=>{assign(Z,Y)})}:noop;function E(){d.stop(),v=[],_=[],o._s.delete(e)}const P=(N,q="")=>{if(ACTION_MARKER in N)return N[ACTION_NAME]=q,N;const Y=function(){setActivePinia(o);const Z=Array.from(arguments),j=[],ne=[];function le(U){j.push(U)}function J(U){ne.push(U)}triggerSubscriptions(_,{args:Z,name:Y[ACTION_NAME],store:D,after:le,onError:J});let O;try{O=N.apply(this&&this.$id===e?this:D,Z)}catch(U){throw triggerSubscriptions(ne,U),U}return O instanceof Promise?O.then(U=>(triggerSubscriptions(j,U),U)).catch(U=>(triggerSubscriptions(ne,U),Promise.reject(U))):(triggerSubscriptions(j,O),O)};return Y[ACTION_MARKER]=!0,Y[ACTION_NAME]=q,Y},T={_p:o,$id:e,$onAction:addSubscription.bind(null,_),$patch:S,$reset:M,$subscribe(N,q={}){const Y=addSubscription(v,N,q.detached,()=>Z()),Z=d.run(()=>watch(()=>o.state.value[e],j=>{(q.flush==="sync"?y:m)&&N({storeId:e,type:MutationType.direct,events:w},j)},assign({},g,q)));return Y},$dispose:E},D=reactive(T);o._s.set(e,D);const I=(o._a&&o._a.runWithContext||fallbackRunWithContext)(()=>o._e.run(()=>(d=effectScope()).run(()=>n({action:P}))));for(const N in I){const q=I[N];if(isRef(q)&&!isComputed(q)||isReactive(q))u||(x&&shouldHydrate(q)&&(isRef(q)?q.value=x[N]:mergeReactiveObjects(q,x[N])),o.state.value[e][N]=q);else if(typeof q=="function"){const Y=P(q,N);I[N]=Y,f.actions[N]=q}}return assign(D,I),assign(toRaw(D),I),Object.defineProperty(D,"$state",{get:()=>o.state.value[e],set:N=>{S(q=>{assign(q,N)})}}),o._p.forEach(N=>{assign(D,d.run(()=>N({store:D,app:o._a,pinia:o,options:f})))}),x&&u&&r.hydrate&&r.hydrate(D.$state,x),m=!0,y=!0,D}function defineStore(e,n,r){let o,s;const u=typeof n=="function";typeof e=="string"?(o=e,s=u?r:n):(s=e,o=e.id);function d(f,g){const m=hasInjectionContext();return f=f||(m?inject(piniaSymbol,null):null),f&&setActivePinia(f),f=activePinia,f._s.has(o)||(u?createSetupStore(o,n,s,f):createOptionsStore(o,s,f)),f._s.get(o)}return d.$id=o,d}function _arrayLikeToArray$1(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=Array(n);r<n;r++)o[r]=e[r];return o}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _assertClassBrand(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep(e,n,r,o,s,u,d){try{var f=e[u](d),g=f.value}catch(m){return void r(m)}f.done?n(g):Promise.resolve(g).then(o,s)}function _asyncToGenerator(e){return function(){var n=this,r=arguments;return new Promise(function(o,s){var u=e.apply(n,r);function d(g){asyncGeneratorStep(u,o,s,d,f,"next",g)}function f(g){asyncGeneratorStep(u,o,s,d,f,"throw",g)}d(void 0)})}}function _callSuper(e,n,r){return n=_getPrototypeOf(n),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(n,r||[],_getPrototypeOf(e).constructor):n.apply(e,r))}function _checkPrivateRedeclaration(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _classPrivateFieldGet2(e,n){return e.get(_assertClassBrand(e,n))}function _classPrivateFieldInitSpec(e,n,r){_checkPrivateRedeclaration(e,n),n.set(e,r)}function _classPrivateFieldSet2(e,n,r){return e.set(_assertClassBrand(e,n),r),r}function _classPrivateMethodInitSpec(e,n){_checkPrivateRedeclaration(e,n),n.add(e)}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _createForOfIteratorHelper(e,n){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray$1(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,s=function(){};return{s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(g){throw g},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,d=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var g=r.next();return d=g.done,g},e:function(g){f=!0,u=g},f:function(){try{d||r.return==null||r.return()}finally{if(f)throw u}}}}function _defineProperty$1(e,n,r){return(n=_toPropertyKey(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _get(){return _get=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,n,r){var o=_superPropBase(e,n);if(o){var s=Object.getOwnPropertyDescriptor(o,n);return s.get?s.get.call(arguments.length<3?e:r):s.value}},_get.apply(null,arguments)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(e)}function _inherits(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_setPrototypeOf(e,n)}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!e})()}function _iterableToArray$1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _iterableToArrayLimit(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,s,u,d,f=[],g=!0,m=!1;try{if(u=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;g=!1}else for(;!(g=(o=u.call(r)).done)&&(f.push(o.value),f.length!==n);g=!0);}catch(y){m=!0,s=y}finally{try{if(!g&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(m)throw s}}return f}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys$1(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,o)}return r}function _objectSpread2$1(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(r),!0).forEach(function(o){_defineProperty$1(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _possibleConstructorReturn(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return n};var e,n={},r=Object.prototype,o=r.hasOwnProperty,s=Object.defineProperty||function(O,U,W){O[U]=W.value},u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",g=u.toStringTag||"@@toStringTag";function m(O,U,W){return Object.defineProperty(O,U,{value:W,enumerable:!0,configurable:!0,writable:!0}),O[U]}try{m({},"")}catch{m=function(U,W,H){return U[W]=H}}function y(O,U,W,H){var X=U&&U.prototype instanceof M?U:M,Q=Object.create(X.prototype),fe=new le(H||[]);return s(Q,"_invoke",{value:Y(O,W,fe)}),Q}function v(O,U,W){try{return{type:"normal",arg:O.call(U,W)}}catch(H){return{type:"throw",arg:H}}}n.wrap=y;var _="suspendedStart",w="suspendedYield",x="executing",k="completed",S={};function M(){}function E(){}function P(){}var T={};m(T,d,function(){return this});var D=Object.getPrototypeOf,F=D&&D(D(J([])));F&&F!==r&&o.call(F,d)&&(T=F);var I=P.prototype=M.prototype=Object.create(T);function N(O){["next","throw","return"].forEach(function(U){m(O,U,function(W){return this._invoke(U,W)})})}function q(O,U){function W(X,Q,fe,Se){var Pe=v(O[X],O,Q);if(Pe.type!=="throw"){var $e=Pe.arg,Ie=$e.value;return Ie&&typeof Ie=="object"&&o.call(Ie,"__await")?U.resolve(Ie.__await).then(function(Ne){W("next",Ne,fe,Se)},function(Ne){W("throw",Ne,fe,Se)}):U.resolve(Ie).then(function(Ne){$e.value=Ne,fe($e)},function(Ne){return W("throw",Ne,fe,Se)})}Se(Pe.arg)}var H;s(this,"_invoke",{value:function(X,Q){function fe(){return new U(function(Se,Pe){W(X,Q,Se,Pe)})}return H=H?H.then(fe,fe):fe()}})}function Y(O,U,W){var H=_;return function(X,Q){if(H===x)throw Error("Generator is already running");if(H===k){if(X==="throw")throw Q;return{value:e,done:!0}}for(W.method=X,W.arg=Q;;){var fe=W.delegate;if(fe){var Se=Z(fe,W);if(Se){if(Se===S)continue;return Se}}if(W.method==="next")W.sent=W._sent=W.arg;else if(W.method==="throw"){if(H===_)throw H=k,W.arg;W.dispatchException(W.arg)}else W.method==="return"&&W.abrupt("return",W.arg);H=x;var Pe=v(O,U,W);if(Pe.type==="normal"){if(H=W.done?k:w,Pe.arg===S)continue;return{value:Pe.arg,done:W.done}}Pe.type==="throw"&&(H=k,W.method="throw",W.arg=Pe.arg)}}}function Z(O,U){var W=U.method,H=O.iterator[W];if(H===e)return U.delegate=null,W==="throw"&&O.iterator.return&&(U.method="return",U.arg=e,Z(O,U),U.method==="throw")||W!=="return"&&(U.method="throw",U.arg=new TypeError("The iterator does not provide a '"+W+"' method")),S;var X=v(H,O.iterator,U.arg);if(X.type==="throw")return U.method="throw",U.arg=X.arg,U.delegate=null,S;var Q=X.arg;return Q?Q.done?(U[O.resultName]=Q.value,U.next=O.nextLoc,U.method!=="return"&&(U.method="next",U.arg=e),U.delegate=null,S):Q:(U.method="throw",U.arg=new TypeError("iterator result is not an object"),U.delegate=null,S)}function j(O){var U={tryLoc:O[0]};1 in O&&(U.catchLoc=O[1]),2 in O&&(U.finallyLoc=O[2],U.afterLoc=O[3]),this.tryEntries.push(U)}function ne(O){var U=O.completion||{};U.type="normal",delete U.arg,O.completion=U}function le(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(j,this),this.reset(!0)}function J(O){if(O||O===""){var U=O[d];if(U)return U.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var W=-1,H=function X(){for(;++W<O.length;)if(o.call(O,W))return X.value=O[W],X.done=!1,X;return X.value=e,X.done=!0,X};return H.next=H}}throw new TypeError(typeof O+" is not iterable")}return E.prototype=P,s(I,"constructor",{value:P,configurable:!0}),s(P,"constructor",{value:E,configurable:!0}),E.displayName=m(P,g,"GeneratorFunction"),n.isGeneratorFunction=function(O){var U=typeof O=="function"&&O.constructor;return!!U&&(U===E||(U.displayName||U.name)==="GeneratorFunction")},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,P):(O.__proto__=P,m(O,g,"GeneratorFunction")),O.prototype=Object.create(I),O},n.awrap=function(O){return{__await:O}},N(q.prototype),m(q.prototype,f,function(){return this}),n.AsyncIterator=q,n.async=function(O,U,W,H,X){X===void 0&&(X=Promise);var Q=new q(y(O,U,W,H),X);return n.isGeneratorFunction(U)?Q:Q.next().then(function(fe){return fe.done?fe.value:Q.next()})},N(I),m(I,g,"Generator"),m(I,d,function(){return this}),m(I,"toString",function(){return"[object Generator]"}),n.keys=function(O){var U=Object(O),W=[];for(var H in U)W.push(H);return W.reverse(),function X(){for(;W.length;){var Q=W.pop();if(Q in U)return X.value=Q,X.done=!1,X}return X.done=!0,X}},n.values=J,le.prototype={constructor:le,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ne),!O)for(var U in this)U.charAt(0)==="t"&&o.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=e)},stop:function(){this.done=!0;var O=this.tryEntries[0].completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var U=this;function W(Pe,$e){return Q.type="throw",Q.arg=O,U.next=Pe,$e&&(U.method="next",U.arg=e),!!$e}for(var H=this.tryEntries.length-1;H>=0;--H){var X=this.tryEntries[H],Q=X.completion;if(X.tryLoc==="root")return W("end");if(X.tryLoc<=this.prev){var fe=o.call(X,"catchLoc"),Se=o.call(X,"finallyLoc");if(fe&&Se){if(this.prev<X.catchLoc)return W(X.catchLoc,!0);if(this.prev<X.finallyLoc)return W(X.finallyLoc)}else if(fe){if(this.prev<X.catchLoc)return W(X.catchLoc,!0)}else{if(!Se)throw Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return W(X.finallyLoc)}}}},abrupt:function(O,U){for(var W=this.tryEntries.length-1;W>=0;--W){var H=this.tryEntries[W];if(H.tryLoc<=this.prev&&o.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var X=H;break}}X&&(O==="break"||O==="continue")&&X.tryLoc<=U&&U<=X.finallyLoc&&(X=null);var Q=X?X.completion:{};return Q.type=O,Q.arg=U,X?(this.method="next",this.next=X.finallyLoc,S):this.complete(Q)},complete:function(O,U){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&U&&(this.next=U),S},finish:function(O){for(var U=this.tryEntries.length-1;U>=0;--U){var W=this.tryEntries[U];if(W.finallyLoc===O)return this.complete(W.completion,W.afterLoc),ne(W),S}},catch:function(O){for(var U=this.tryEntries.length-1;U>=0;--U){var W=this.tryEntries[U];if(W.tryLoc===O){var H=W.completion;if(H.type==="throw"){var X=H.arg;ne(W)}return X}}throw Error("illegal catch attempt")},delegateYield:function(O,U,W){return this.delegate={iterator:J(O),resultName:U,nextLoc:W},this.method==="next"&&(this.arg=e),S}},n}function _setPrototypeOf(e,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_setPrototypeOf(e,n)}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray$1(e,n)||_nonIterableRest()}function _superPropBase(e,n){for(;!{}.hasOwnProperty.call(e,n)&&(e=_getPrototypeOf(e))!==null;);return e}function _superPropGet(e,n,r,o){var s=_get(_getPrototypeOf(1&o?e.prototype:e),n,r);return 2&o&&typeof s=="function"?function(u){return s.apply(r,u)}:s}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _toPrimitive(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _toPropertyKey(e){var n=_toPrimitive(e,"string");return typeof n=="symbol"?n:n+""}function _typeof$1(e){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(e)}function _unsupportedIterableToArray$1(e,n){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,n):void 0}}var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function o(){if(this instanceof o){var s=[null];return s.push.apply(s,arguments),new(Function.bind.apply(n,s))}return n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(e){pdfExports=e}},_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$0=getAugmentedNamespace(_nodeResolve_empty$1),path2dPolyfill_esm={},hasRequiredPath2dPolyfill_esm;function requirePath2dPolyfill_esm(){if(hasRequiredPath2dPolyfill_esm)return path2dPolyfill_esm;function e(y,v,_){if(_||arguments.length===2)for(var w,x=0,k=v.length;x<k;x++)!w&&x in v||(w||(w=Array.prototype.slice.call(v,0,x)),w[x]=v[x]);return y.concat(w||Array.prototype.slice.call(v))}hasRequiredPath2dPolyfill_esm=1;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function s(y){var v=[],_=String(y).trim();return _[0]!=="M"&&_[0]!=="m"||_.replace(r,function(w,x,k){var S=function(P){var T=P.match(o);return T?T.map(Number):[]}(k),M=x.toLowerCase(),E=x;if(M==="m"&&S.length>2&&(v.push(e([E],S.splice(0,2),!0)),M="l",E=E==="m"?"l":"L"),S.length<n[M])return"";for(v.push(e([E],S.splice(0,n[M]),!0));S.length>=n[M]&&S.length&&n[M];)v.push(e([E],S.splice(0,n[M]),!0));return""}),v}function u(y,v){var _=y.x*Math.cos(v)-y.y*Math.sin(v),w=y.y*Math.cos(v)+y.x*Math.sin(v);y.x=_,y.y=w}function d(y,v){y.x*=v,y.y*=v}var f=function(){function y(v){var _;this.commands=[],v&&v instanceof y?(_=this.commands).push.apply(_,v.commands):v&&(this.commands=s(v))}return y.prototype.addPath=function(v){var _;v&&v instanceof y&&(_=this.commands).push.apply(_,v.commands)},y.prototype.moveTo=function(v,_){this.commands.push(["M",v,_])},y.prototype.lineTo=function(v,_){this.commands.push(["L",v,_])},y.prototype.arc=function(v,_,w,x,k,S){this.commands.push(["AC",v,_,w,x,k,!!S])},y.prototype.arcTo=function(v,_,w,x,k){this.commands.push(["AT",v,_,w,x,k])},y.prototype.ellipse=function(v,_,w,x,k,S,M,E){this.commands.push(["E",v,_,w,x,k,S,M,!!E])},y.prototype.closePath=function(){this.commands.push(["Z"])},y.prototype.bezierCurveTo=function(v,_,w,x,k,S){this.commands.push(["C",v,_,w,x,k,S])},y.prototype.quadraticCurveTo=function(v,_,w,x){this.commands.push(["Q",v,_,w,x])},y.prototype.rect=function(v,_,w,x){this.commands.push(["R",v,_,w,x])},y.prototype.roundRect=function(v,_,w,x,k){k===void 0?this.commands.push(["RR",v,_,w,x,0]):this.commands.push(["RR",v,_,w,x,k])},y}();function g(y,v){var _,w,x,k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J,O,U,W,H,X=0,Q=0,fe=null,Se=null,Pe=null,$e=null,Ie=null,Ne=null;y.beginPath();for(var Be=0;Be<v.length;++Be){(ne=v[Be][0])!=="S"&&ne!=="s"&&ne!=="C"&&ne!=="c"&&(fe=null,Se=null),ne!=="T"&&ne!=="t"&&ne!=="Q"&&ne!=="q"&&(Pe=null,$e=null);var be=void 0;switch(ne){case"m":case"M":be=v[Be],ne==="m"?(X+=be[1],Q+=be[2]):(X=be[1],Q=be[2]),ne!=="M"&&Ie||(Ie={x:X,y:Q}),y.moveTo(X,Q);break;case"l":X+=(be=v[Be])[1],Q+=be[2],y.lineTo(X,Q);break;case"L":X=(be=v[Be])[1],Q=be[2],y.lineTo(X,Q);break;case"H":X=(be=v[Be])[1],y.lineTo(X,Q);break;case"h":X+=(be=v[Be])[1],y.lineTo(X,Q);break;case"V":Q=(be=v[Be])[1],y.lineTo(X,Q);break;case"v":Q+=(be=v[Be])[1],y.lineTo(X,Q);break;case"a":case"A":if(be=v[Be],Ne===null)throw new Error("This should never happen");ne==="a"?(X+=be[6],Q+=be[7]):(X=be[6],Q=be[7]),q=be[1],Y=be[2],E=be[3]*Math.PI/180,x=!!be[4],k=!!be[5],S={x:X,y:Q},u(M={x:(Ne.x-S.x)/2,y:(Ne.y-S.y)/2},-E),(P=M.x*M.x/(q*q)+M.y*M.y/(Y*Y))>1&&(q*=P=Math.sqrt(P),Y*=P),T=q*q*Y*Y,D=q*q*M.y*M.y+Y*Y*M.x*M.x,d(le={x:q*M.y/Y,y:-Y*M.x/q},k!==x?Math.sqrt((T-D)/D)||0:-Math.sqrt((T-D)/D)||0),w=Math.atan2((M.y-le.y)/Y,(M.x-le.x)/q),_=Math.atan2(-(M.y+le.y)/Y,-(M.x+le.x)/q),u(le,E),U=le,W=(S.x+Ne.x)/2,H=(S.y+Ne.y)/2,U.x+=W,U.y+=H,y.save(),y.translate(le.x,le.y),y.rotate(E),y.scale(q,Y),y.arc(0,0,1,w,_,!k),y.restore();break;case"C":fe=(be=v[Be])[3],Se=be[4],X=be[5],Q=be[6],y.bezierCurveTo(be[1],be[2],fe,Se,X,Q);break;case"c":be=v[Be],y.bezierCurveTo(be[1]+X,be[2]+Q,be[3]+X,be[4]+Q,be[5]+X,be[6]+Q),fe=be[3]+X,Se=be[4]+Q,X+=be[5],Q+=be[6];break;case"S":be=v[Be],fe!==null&&Se!==null||(fe=X,Se=Q),y.bezierCurveTo(2*X-fe,2*Q-Se,be[1],be[2],be[3],be[4]),fe=be[1],Se=be[2],X=be[3],Q=be[4];break;case"s":be=v[Be],fe!==null&&Se!==null||(fe=X,Se=Q),y.bezierCurveTo(2*X-fe,2*Q-Se,be[1]+X,be[2]+Q,be[3]+X,be[4]+Q),fe=be[1]+X,Se=be[2]+Q,X+=be[3],Q+=be[4];break;case"Q":Pe=(be=v[Be])[1],$e=be[2],X=be[3],Q=be[4],y.quadraticCurveTo(Pe,$e,X,Q);break;case"q":Pe=(be=v[Be])[1]+X,$e=be[2]+Q,X+=be[3],Q+=be[4],y.quadraticCurveTo(Pe,$e,X,Q);break;case"T":Pe!==null&&$e!==null||(Pe=X,$e=Q),Pe=2*X-Pe,$e=2*Q-$e,X=(be=v[Be])[1],Q=be[2],y.quadraticCurveTo(Pe,$e,X,Q);break;case"t":Pe!==null&&$e!==null||(Pe=X,$e=Q),Pe=2*X-Pe,$e=2*Q-$e,X+=(be=v[Be])[1],Q+=be[2],y.quadraticCurveTo(Pe,$e,X,Q);break;case"z":case"Z":Ie&&(X=Ie.x,Q=Ie.y),Ie=null,y.closePath();break;case"AC":X=(be=v[Be])[1],Q=be[2],N=be[3],w=be[4],_=be[5],J=be[6],y.arc(X,Q,N,w,_,J);break;case"AT":F=(be=v[Be])[1],I=be[2],X=be[3],Q=be[4],N=be[5],y.arcTo(F,I,X,Q,N);break;case"E":X=(be=v[Be])[1],Q=be[2],q=be[3],Y=be[4],E=be[5],w=be[6],_=be[7],J=be[8],y.save(),y.translate(X,Q),y.rotate(E),y.scale(q,Y),y.arc(0,0,1,w,_,J),y.restore();break;case"R":X=(be=v[Be])[1],Q=be[2],Z=be[3],j=be[4],Ie={x:X,y:Q},y.rect(X,Q,Z,j);break;case"RR":X=(be=v[Be])[1],Q=be[2],Z=be[3],j=be[4],O=be[5],Ie={x:X,y:Q},y.roundRect(X,Q,Z,j,O)}Ne?(Ne.x=X,Ne.y=Q):Ne={x:X,y:Q}}}function m(y,v,_,w,x){var k=this;if(x===void 0&&(x=0),typeof x=="number"&&(x=[x]),Array.isArray(x)){if(x.length===0||x.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(x.length," radii provided. Between one and four radii are necessary."));if(x.forEach(function(D){if(D<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(k.constructor.name,"': Radius value ").concat(D," is negative."))}),x.length===1&&x[0]===0)return this.rect(y,v,_,w);var S,M,E,P=Math.min(_,w)/2,T=S=M=E=Math.min(P,x[0]);x.length===2&&(S=E=Math.min(P,x[1])),x.length===3&&(S=E=Math.min(P,x[1]),M=Math.min(P,x[2])),x.length===4&&(S=Math.min(P,x[1]),M=Math.min(P,x[2]),E=Math.min(P,x[3])),this.moveTo(y,v+w-E),this.arcTo(y,v,y+T,v,T),this.arcTo(y+_,v,y+_,v+S,S),this.arcTo(y+_,v+w,y+_-M,v+w,M),this.arcTo(y,v+w,y,v+w-E,E),this.moveTo(y,v)}}return function(y){if(y&&y.CanvasRenderingContext2D&&!y.Path2D){var v=y.CanvasRenderingContext2D,_=v.prototype.fill,w=v.prototype.stroke,x=v.prototype.isPointInPath;v.prototype.fill=function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];if(!(k[0]instanceof f))return E=k[0]||"nonzero",_.apply(this,[E]);var M=k[0],E=k[1]||"nonzero";g(this,M.commands),_.apply(this,[E])},v.prototype.stroke=function(k){k&&g(this,k.commands),w.apply(this)},v.prototype.isPointInPath=function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];if(k[0]instanceof f){var M=k[0],E=k[1],P=k[2],T=k[3]||"nonzero";return g(this,M.commands),x.apply(this,[E,P,T])}return x.apply(this,k)},y.Path2D=f}}(window),function(y){if(y&&y.CanvasRenderingContext2D){var v=y.CanvasRenderingContext2D,_=y.Path2D;v&&!v.prototype.roundRect&&(v.prototype.roundRect=m),_&&!_.prototype.roundRect&&(_.prototype.roundRect=m)}}(window),path2dPolyfill_esm}var ponyfillExports={},hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(e){var n=typeof Symbol=="function"&&_typeof$1(Symbol.iterator)==="symbol"?Symbol:function(re){return"Symbol(".concat(re,")")};function r(re,Ae){var Ue,Ye,st,ut,pt={label:0,sent:function(){if(1&st[0])throw st[1];return st[1]},trys:[],ops:[]};return ut={next:vt(0),throw:vt(1),return:vt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function vt(yt){return function(Bt){return xt([yt,Bt])}}function xt(yt){if(Ue)throw new TypeError("Generator is already executing.");for(;ut&&(ut=0,yt[0]&&(pt=0)),pt;)try{if(Ue=1,Ye&&(st=2&yt[0]?Ye.return:yt[0]?Ye.throw||((st=Ye.return)&&st.call(Ye),0):Ye.next)&&!(st=st.call(Ye,yt[1])).done)return st;switch(Ye=0,st&&(yt=[2&yt[0],st.value]),yt[0]){case 0:case 1:st=yt;break;case 4:return pt.label++,{value:yt[1],done:!1};case 5:pt.label++,Ye=yt[1],yt=[0];continue;case 7:yt=pt.ops.pop(),pt.trys.pop();continue;default:if(!((st=(st=pt.trys).length>0&&st[st.length-1])||yt[0]!==6&&yt[0]!==2)){pt=0;continue}if(yt[0]===3&&(!st||yt[1]>st[0]&&yt[1]<st[3])){pt.label=yt[1];break}if(yt[0]===6&&pt.label<st[1]){pt.label=st[1],st=yt;break}if(st&&pt.label<st[2]){pt.label=st[2],pt.ops.push(yt);break}st[2]&&pt.ops.pop(),pt.trys.pop();continue}yt=Ae.call(re,pt)}catch(Bt){yt=[6,Bt],Ye=0}finally{Ue=st=0}if(5&yt[0])throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}function o(re){var Ae=typeof Symbol=="function"&&Symbol.iterator,Ue=Ae&&re[Ae],Ye=0;if(Ue)return Ue.call(re);if(re&&typeof re.length=="number")return{next:function(){return re&&Ye>=re.length&&(re=void 0),{value:re&&re[Ye++],done:!re}}};throw new TypeError(Ae?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(re){return this instanceof s?(this.v=re,this):new s(re)}function u(re,Ae,Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ye,st=Ue.apply(re,Ae||[]),ut=[];return Ye={},pt("next"),pt("throw"),pt("return"),Ye[Symbol.asyncIterator]=function(){return this},Ye;function pt($t){st[$t]&&(Ye[$t]=function(Nt){return new Promise(function(Jt,Qt){ut.push([$t,Nt,Jt,Qt])>1||vt($t,Nt)})})}function vt($t,Nt){try{xt(st[$t](Nt))}catch(Jt){Tt(ut[0][3],Jt)}}function xt($t){$t.value instanceof s?Promise.resolve($t.value.v).then(yt,Bt):Tt(ut[0][2],$t)}function yt($t){vt("next",$t)}function Bt($t){vt("throw",$t)}function Tt($t,Nt){$t(Nt),ut.shift(),ut.length&&vt(ut[0][0],ut[0][1])}}function d(re){var Ae,Ue;return Ae={},Ye("next"),Ye("throw",function(st){throw st}),Ye("return"),Ae[Symbol.iterator]=function(){return this},Ae;function Ye(st,ut){Ae[st]=re[st]?function(pt){return(Ue=!Ue)?{value:s(re[st](pt)),done:!1}:ut?ut(pt):pt}:ut}}function f(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Ue=re[Symbol.asyncIterator];return Ue?Ue.call(re):(re=typeof o=="function"?o(re):re[Symbol.iterator](),Ae={},Ye("next"),Ye("throw"),Ye("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function Ye(ut){Ae[ut]=re[ut]&&function(pt){return new Promise(function(vt,xt){st(vt,xt,(pt=re[ut](pt)).done,pt.value)})}}function st(ut,pt,vt,xt){Promise.resolve(xt).then(function(yt){ut({value:yt,done:vt})},pt)}}function g(){}function m(re){return _typeof$1(re)==="object"&&re!==null||typeof re=="function"}typeof SuppressedError=="function"&&SuppressedError;var y=g;function v(re,Ae){try{Object.defineProperty(re,"name",{value:Ae,configurable:!0})}catch{}}var _=Promise,w=Promise.prototype.then,x=Promise.reject.bind(_);function k(re){return new _(re)}function S(re){return k(function(Ae){return Ae(re)})}function M(re){return x(re)}function E(re,Ae,Ue){return w.call(re,Ae,Ue)}function P(re,Ae,Ue){E(E(re,Ae,Ue),void 0,y)}function T(re,Ae){P(re,Ae)}function D(re,Ae){P(re,void 0,Ae)}function F(re,Ae,Ue){return E(re,Ae,Ue)}function I(re){E(re,void 0,y)}var N=function(re){if(typeof queueMicrotask=="function")N=queueMicrotask;else{var Ae=S(void 0);N=function(Ue){return E(Ae,Ue)}}return N(re)};function q(re,Ae,Ue){if(typeof re!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(re,Ae,Ue)}function Y(re,Ae,Ue){try{return S(q(re,Ae,Ue))}catch(Ye){return M(Ye)}}var Z=16384,j=function(){function re(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(re.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),re.prototype.push=function(Ae){var Ue=this._back,Ye=Ue;Ue._elements.length===Z-1&&(Ye={_elements:[],_next:void 0}),Ue._elements.push(Ae),Ye!==Ue&&(this._back=Ye,Ue._next=Ye),++this._size},re.prototype.shift=function(){var Ae=this._front,Ue=Ae,Ye=this._cursor,st=Ye+1,ut=Ae._elements,pt=ut[Ye];return st===Z&&(Ue=Ae._next,st=0),--this._size,this._cursor=st,Ae!==Ue&&(this._front=Ue),ut[Ye]=void 0,pt},re.prototype.forEach=function(Ae){for(var Ue=this._cursor,Ye=this._front,st=Ye._elements;!(Ue===st.length&&Ye._next===void 0||Ue===st.length&&(Ue=0,(st=(Ye=Ye._next)._elements).length===0));)Ae(st[Ue]),++Ue},re.prototype.peek=function(){var Ae=this._front,Ue=this._cursor;return Ae._elements[Ue]},re}(),ne=n("[[AbortSteps]]"),le=n("[[ErrorSteps]]"),J=n("[[CancelSteps]]"),O=n("[[PullSteps]]"),U=n("[[ReleaseSteps]]");function W(re,Ae){re._ownerReadableStream=Ae,Ae._reader=re,Ae._state==="readable"?fe(re):Ae._state==="closed"?Pe(re):Se(re,Ae._storedError)}function H(re,Ae){return nn(re._ownerReadableStream,Ae)}function X(re){var Ae=re._ownerReadableStream;Ae._state==="readable"?$e(re,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ie(re,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),Ae._readableStreamController[U](),Ae._reader=void 0,re._ownerReadableStream=void 0}function Q(re){return new TypeError("Cannot "+re+" a stream using a released reader")}function fe(re){re._closedPromise=k(function(Ae,Ue){re._closedPromise_resolve=Ae,re._closedPromise_reject=Ue})}function Se(re,Ae){fe(re),$e(re,Ae)}function Pe(re){fe(re),Ne(re)}function $e(re,Ae){re._closedPromise_reject!==void 0&&(I(re._closedPromise),re._closedPromise_reject(Ae),re._closedPromise_resolve=void 0,re._closedPromise_reject=void 0)}function Ie(re,Ae){Se(re,Ae)}function Ne(re){re._closedPromise_resolve!==void 0&&(re._closedPromise_resolve(void 0),re._closedPromise_resolve=void 0,re._closedPromise_reject=void 0)}var Be=Number.isFinite||function(re){return typeof re=="number"&&isFinite(re)},be=Math.trunc||function(re){return re<0?Math.ceil(re):Math.floor(re)};function Ve(re){return _typeof$1(re)==="object"||typeof re=="function"}function De(re,Ae){if(re!==void 0&&!Ve(re))throw new TypeError("".concat(Ae," is not an object."))}function ve(re,Ae){if(typeof re!="function")throw new TypeError("".concat(Ae," is not a function."))}function ye(re){return _typeof$1(re)==="object"&&re!==null||typeof re=="function"}function we(re,Ae){if(!ye(re))throw new TypeError("".concat(Ae," is not an object."))}function ke(re,Ae,Ue){if(re===void 0)throw new TypeError("Parameter ".concat(Ae," is required in '").concat(Ue,"'."))}function Me(re,Ae,Ue){if(re===void 0)throw new TypeError("".concat(Ae," is required in '").concat(Ue,"'."))}function Le(re){return Number(re)}function Fe(re){return re===0?0:re}function ze(re){return Fe(be(re))}function te(re,Ae){var Ue=0,Ye=Number.MAX_SAFE_INTEGER,st=Number(re);if(st=Fe(st),!Be(st))throw new TypeError("".concat(Ae," is not a finite number"));if((st=ze(st))<Ue||st>Ye)throw new TypeError("".concat(Ae," is outside the accepted range of ").concat(Ue," to ").concat(Ye,", inclusive"));return Be(st)&&st!==0?st:0}function oe(re,Ae){if(!gn(re))throw new TypeError("".concat(Ae," is not a ReadableStream."))}function _e(re){return new Ze(re)}function Ce(re,Ae){re._reader._readRequests.push(Ae)}function Ee(re,Ae,Ue){var Ye=re._reader._readRequests.shift();Ue?Ye._closeSteps():Ye._chunkSteps(Ae)}function Te(re){return re._reader._readRequests.length}function Re(re){var Ae=re._reader;return Ae!==void 0&&!!Xe(Ae)}var Oe,je,We,Ze=function(){function re(Ae){if(ke(Ae,1,"ReadableStreamDefaultReader"),oe(Ae,"First parameter"),mn(Ae))throw new TypeError("This stream has already been locked for exclusive reading by another reader");W(this,Ae),this._readRequests=new j}return Object.defineProperty(re.prototype,"closed",{get:function(){return Xe(this)?this._closedPromise:M(dt("closed"))},enumerable:!1,configurable:!0}),re.prototype.cancel=function(Ae){return Ae===void 0&&(Ae=void 0),Xe(this)?this._ownerReadableStream===void 0?M(Q("cancel")):H(this,Ae):M(dt("cancel"))},re.prototype.read=function(){if(!Xe(this))return M(dt("read"));if(this._ownerReadableStream===void 0)return M(Q("read from"));var Ae,Ue,Ye=k(function(st,ut){Ae=st,Ue=ut});return Ge(this,{_chunkSteps:function(st){return Ae({value:st,done:!1})},_closeSteps:function(){return Ae({value:void 0,done:!0})},_errorSteps:function(st){return Ue(st)}}),Ye},re.prototype.releaseLock=function(){if(!Xe(this))throw dt("releaseLock");this._ownerReadableStream!==void 0&&Qe(this)},re}();function Xe(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_readRequests")&&re instanceof Ze}function Ge(re,Ae){var Ue=re._ownerReadableStream;Ue._disturbed=!0,Ue._state==="closed"?Ae._closeSteps():Ue._state==="errored"?Ae._errorSteps(Ue._storedError):Ue._readableStreamController[O](Ae)}function Qe(re){X(re),rt(re,new TypeError("Reader was released"))}function rt(re,Ae){var Ue=re._readRequests;re._readRequests=new j,Ue.forEach(function(Ye){Ye._errorSteps(Ae)})}function dt(re){return new TypeError("ReadableStreamDefaultReader.prototype.".concat(re," can only be used on a ReadableStreamDefaultReader"))}function qe(re){return re.slice()}function He(re,Ae,Ue,Ye,st){new Uint8Array(re).set(new Uint8Array(Ue,Ye,st),Ae)}Object.defineProperties(Ze.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),v(Ze.prototype.cancel,"cancel"),v(Ze.prototype.read,"read"),v(Ze.prototype.releaseLock,"releaseLock"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Ze.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});var Ke=function(re){return(Ke=typeof re.transfer=="function"?function(Ae){return Ae.transfer()}:typeof structuredClone=="function"?function(Ae){return structuredClone(Ae,{transfer:[Ae]})}:function(Ae){return Ae})(re)},ot=function(re){return(ot=typeof re.detached=="boolean"?function(Ae){return Ae.detached}:function(Ae){return Ae.byteLength===0})(re)};function at(re,Ae,Ue){if(re.slice)return re.slice(Ae,Ue);var Ye=Ue-Ae,st=new ArrayBuffer(Ye);return He(st,0,re,Ae,Ye),st}function et(re,Ae){var Ue=re[Ae];if(Ue!=null){if(typeof Ue!="function")throw new TypeError("".concat(String(Ae)," is not a function"));return Ue}}function Je(re){var Ae,Ue=((Ae={})[n.iterator]=function(){return re.iterator},Ae),Ye=function(){return u(this,arguments,function(){return r(this,function(st){switch(st.label){case 0:return[5,o(d(f(Ue)))];case 1:case 2:return[4,s.apply(void 0,[st.sent()])];case 3:return[2,st.sent()]}})})}();return{iterator:Ye,nextMethod:Ye.next,done:!1}}var nt,it=(We=(Oe=n.asyncIterator)!==null&&Oe!==void 0?Oe:(je=n.for)===null||je===void 0?void 0:je.call(n,"Symbol.asyncIterator"))!==null&&We!==void 0?We:"@@asyncIterator";function ht(re,Ae,Ue){if(Ae===void 0&&(Ae="sync"),Ue===void 0)if(Ae==="async"){if((Ue=et(re,it))===void 0)return Je(ht(re,"sync",et(re,n.iterator)))}else Ue=et(re,n.iterator);if(Ue===void 0)throw new TypeError("The object is not iterable");var Ye=q(Ue,re,[]);if(!m(Ye))throw new TypeError("The iterator method must return an object");return{iterator:Ye,nextMethod:Ye.next,done:!1}}function lt(re){var Ae=q(re.nextMethod,re.iterator,[]);if(!m(Ae))throw new TypeError("The iterator.next() method must return an object");return Ae}function ft(re){return Boolean(re.done)}function mt(re){return re.value}var Ct=((nt={})[it]=function(){return this},nt);Object.defineProperty(Ct,it,{enumerable:!1});var _t=function(){function re(Ae,Ue){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=Ae,this._preventCancel=Ue}return re.prototype.next=function(){var Ae=this,Ue=function(){return Ae._nextSteps()};return this._ongoingPromise=this._ongoingPromise?F(this._ongoingPromise,Ue,Ue):Ue(),this._ongoingPromise},re.prototype.return=function(Ae){var Ue=this,Ye=function(){return Ue._returnSteps(Ae)};return this._ongoingPromise?F(this._ongoingPromise,Ye,Ye):Ye()},re.prototype._nextSteps=function(){var Ae=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var Ue,Ye,st=this._reader,ut=k(function(pt,vt){Ue=pt,Ye=vt});return Ge(st,{_chunkSteps:function(pt){Ae._ongoingPromise=void 0,N(function(){return Ue({value:pt,done:!1})})},_closeSteps:function(){Ae._ongoingPromise=void 0,Ae._isFinished=!0,X(st),Ue({value:void 0,done:!0})},_errorSteps:function(pt){Ae._ongoingPromise=void 0,Ae._isFinished=!0,X(st),Ye(pt)}}),ut},re.prototype._returnSteps=function(Ae){if(this._isFinished)return Promise.resolve({value:Ae,done:!0});this._isFinished=!0;var Ue=this._reader;if(!this._preventCancel){var Ye=H(Ue,Ae);return X(Ue),F(Ye,function(){return{value:Ae,done:!0}})}return X(Ue),S({value:Ae,done:!0})},re}(),wt={next:function(){return Pt(this)?this._asyncIteratorImpl.next():M(ct("next"))},return:function(re){return Pt(this)?this._asyncIteratorImpl.return(re):M(ct("return"))}};function kt(re,Ae){var Ue=_e(re),Ye=new _t(Ue,Ae),st=Object.create(wt);return st._asyncIteratorImpl=Ye,st}function Pt(re){if(!m(re)||!Object.prototype.hasOwnProperty.call(re,"_asyncIteratorImpl"))return!1;try{return re._asyncIteratorImpl instanceof _t}catch{return!1}}function ct(re){return new TypeError("ReadableStreamAsyncIterator.".concat(re," can only be used on a ReadableSteamAsyncIterator"))}Object.setPrototypeOf(wt,Ct);var gt=Number.isNaN||function(re){return re!=re};function bt(re){return!(typeof re!="number"||gt(re)||re<0)}function St(re){var Ae=at(re.buffer,re.byteOffset,re.byteOffset+re.byteLength);return new Uint8Array(Ae)}function Mt(re){var Ae=re._queue.shift();return re._queueTotalSize-=Ae.size,re._queueTotalSize<0&&(re._queueTotalSize=0),Ae.value}function At(re,Ae,Ue){if(!bt(Ue)||Ue===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");re._queue.push({value:Ae,size:Ue}),re._queueTotalSize+=Ue}function Vt(re){return re._queue.peek().value}function Rt(re){re._queue=new j,re._queueTotalSize=0}function zt(re){return re===DataView}function Wt(re){return zt(re.constructor)}function qt(re){return zt(re)?1:re.BYTES_PER_ELEMENT}var Ft=function(){function re(){throw new TypeError("Illegal constructor")}return Object.defineProperty(re.prototype,"view",{get:function(){if(!an(this))throw zn("view");return this._view},enumerable:!1,configurable:!0}),re.prototype.respond=function(Ae){if(!an(this))throw zn("respond");if(ke(Ae,1,"respond"),Ae=te(Ae,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ot(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Mn(this._associatedReadableByteStreamController,Ae)},re.prototype.respondWithNewView=function(Ae){if(!an(this))throw zn("respondWithNewView");if(ke(Ae,1,"respondWithNewView"),!ArrayBuffer.isView(Ae))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ot(Ae.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Bn(this._associatedReadableByteStreamController,Ae)},re}();Object.defineProperties(Ft.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),v(Ft.prototype.respond,"respond"),v(Ft.prototype.respondWithNewView,"respondWithNewView"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Ft.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Ot=function(){function re(){throw new TypeError("Illegal constructor")}return Object.defineProperty(re.prototype,"byobRequest",{get:function(){if(!jt(this))throw bn("byobRequest");return Hn(this)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"desiredSize",{get:function(){if(!jt(this))throw bn("desiredSize");return ir(this)},enumerable:!1,configurable:!0}),re.prototype.close=function(){if(!jt(this))throw bn("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var Ae=this._controlledReadableByteStream._state;if(Ae!=="readable")throw new TypeError("The stream (in ".concat(Ae," state) is not in the readable state and cannot be closed"));_n(this)},re.prototype.enqueue=function(Ae){if(!jt(this))throw bn("enqueue");if(ke(Ae,1,"enqueue"),!ArrayBuffer.isView(Ae))throw new TypeError("chunk must be an array buffer view");if(Ae.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(Ae.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var Ue=this._controlledReadableByteStream._state;if(Ue!=="readable")throw new TypeError("The stream (in ".concat(Ue," state) is not in the readable state and cannot be enqueued to"));$n(this,Ae)},re.prototype.error=function(Ae){if(Ae===void 0&&(Ae=void 0),!jt(this))throw bn("error");Kt(this,Ae)},re.prototype[J]=function(Ae){Gt(this),Rt(this);var Ue=this._cancelAlgorithm(Ae);return An(this),Ue},re.prototype[O]=function(Ae){var Ue=this._controlledReadableByteStream;if(this._queueTotalSize>0)nr(this,Ae);else{var Ye=this._autoAllocateChunkSize;if(Ye!==void 0){var st=void 0;try{st=new ArrayBuffer(Ye)}catch(pt){return void Ae._errorSteps(pt)}var ut={buffer:st,bufferByteLength:Ye,byteOffset:0,byteLength:Ye,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(ut)}Ce(Ue,Ae),Yt(this)}},re.prototype[U]=function(){if(this._pendingPullIntos.length>0){var Ae=this._pendingPullIntos.peek();Ae.readerType="none",this._pendingPullIntos=new j,this._pendingPullIntos.push(Ae)}},re}();function jt(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_controlledReadableByteStream")&&re instanceof Ot}function an(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_associatedReadableByteStreamController")&&re instanceof Ft}function Yt(re){Br(re)&&(re._pulling?re._pullAgain=!0:(re._pulling=!0,P(re._pullAlgorithm(),function(){return re._pulling=!1,re._pullAgain&&(re._pullAgain=!1,Yt(re)),null},function(Ae){return Kt(re,Ae),null})))}function Gt(re){Fn(re),re._pendingPullIntos=new j}function Zt(re,Ae){var Ue=!1;re._state==="closed"&&(Ue=!0);var Ye=Yn(Ae);Ae.readerType==="default"?Ee(re,Ye,Ue):Oi(re,Ye,Ue)}function Yn(re){var Ae=re.bytesFilled,Ue=re.elementSize;return new re.viewConstructor(re.buffer,re.byteOffset,Ae/Ue)}function Pn(re,Ae,Ue,Ye){re._queue.push({buffer:Ae,byteOffset:Ue,byteLength:Ye}),re._queueTotalSize+=Ye}function Xn(re,Ae,Ue,Ye){var st;try{st=at(Ae,Ue,Ue+Ye)}catch(ut){throw Kt(re,ut),ut}Pn(re,st,0,Ye)}function Zn(re,Ae){Ae.bytesFilled>0&&Xn(re,Ae.buffer,Ae.byteOffset,Ae.bytesFilled),hn(re)}function Jn(re,Ae){var Ue=Math.min(re._queueTotalSize,Ae.byteLength-Ae.bytesFilled),Ye=Ae.bytesFilled+Ue,st=Ue,ut=!1,pt=Ye-Ye%Ae.elementSize;pt>=Ae.minimumFill&&(st=pt-Ae.bytesFilled,ut=!0);for(var vt=re._queue;st>0;){var xt=vt.peek(),yt=Math.min(st,xt.byteLength),Bt=Ae.byteOffset+Ae.bytesFilled;He(Ae.buffer,Bt,xt.buffer,xt.byteOffset,yt),xt.byteLength===yt?vt.shift():(xt.byteOffset+=yt,xt.byteLength-=yt),re._queueTotalSize-=yt,Qn(re,yt,Ae),st-=yt}return ut}function Qn(re,Ae,Ue){Ue.bytesFilled+=Ae}function er(re){re._queueTotalSize===0&&re._closeRequested?(An(re),Kn(re._controlledReadableByteStream)):Yt(re)}function Fn(re){re._byobRequest!==null&&(re._byobRequest._associatedReadableByteStreamController=void 0,re._byobRequest._view=null,re._byobRequest=null)}function On(re){for(;re._pendingPullIntos.length>0;){if(re._queueTotalSize===0)return;var Ae=re._pendingPullIntos.peek();Jn(re,Ae)&&(hn(re),Zt(re._controlledReadableByteStream,Ae))}}function Pr(re){for(var Ae=re._controlledReadableByteStream._reader;Ae._readRequests.length>0;){if(re._queueTotalSize===0)return;nr(re,Ae._readRequests.shift())}}function Ar(re,Ae,Ue,Ye){var st,ut=re._controlledReadableByteStream,pt=Ae.constructor,vt=qt(pt),xt=Ae.byteOffset,yt=Ae.byteLength,Bt=Ue*vt;try{st=Ke(Ae.buffer)}catch(Qt){return void Ye._errorSteps(Qt)}var Tt={buffer:st,bufferByteLength:st.byteLength,byteOffset:xt,byteLength:yt,bytesFilled:0,minimumFill:Bt,elementSize:vt,viewConstructor:pt,readerType:"byob"};if(re._pendingPullIntos.length>0)return re._pendingPullIntos.push(Tt),void ei(ut,Ye);if(ut._state!=="closed"){if(re._queueTotalSize>0){if(Jn(re,Tt)){var $t=Yn(Tt);return er(re),void Ye._chunkSteps($t)}if(re._closeRequested){var Nt=new TypeError("Insufficient bytes to fill elements in the given buffer");return Kt(re,Nt),void Ye._errorSteps(Nt)}}re._pendingPullIntos.push(Tt),ei(ut,Ye),Yt(re)}else{var Jt=new pt(Tt.buffer,Tt.byteOffset,0);Ye._closeSteps(Jt)}}function $r(re,Ae){Ae.readerType==="none"&&hn(re);var Ue=re._controlledReadableByteStream;if(Ir(Ue))for(;ti(Ue)>0;)Zt(Ue,hn(re))}function Mr(re,Ae,Ue){if(Qn(re,Ae,Ue),Ue.readerType==="none")return Zn(re,Ue),void On(re);if(!(Ue.bytesFilled<Ue.minimumFill)){hn(re);var Ye=Ue.bytesFilled%Ue.elementSize;if(Ye>0){var st=Ue.byteOffset+Ue.bytesFilled;Xn(re,Ue.buffer,st-Ye,Ye)}Ue.bytesFilled-=Ye,Zt(re._controlledReadableByteStream,Ue),On(re)}}function tr(re,Ae){var Ue=re._pendingPullIntos.peek();Fn(re),re._controlledReadableByteStream._state==="closed"?$r(re,Ue):Mr(re,Ae,Ue),Yt(re)}function hn(re){return re._pendingPullIntos.shift()}function Br(re){var Ae=re._controlledReadableByteStream;return Ae._state==="readable"&&!re._closeRequested&&!!re._started&&(!!(Re(Ae)&&Te(Ae)>0)||!!(Ir(Ae)&&ti(Ae)>0)||ir(re)>0)}function An(re){re._pullAlgorithm=void 0,re._cancelAlgorithm=void 0}function _n(re){var Ae=re._controlledReadableByteStream;if(!re._closeRequested&&Ae._state==="readable")if(re._queueTotalSize>0)re._closeRequested=!0;else{if(re._pendingPullIntos.length>0){var Ue=re._pendingPullIntos.peek();if(Ue.bytesFilled%Ue.elementSize!=0){var Ye=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Kt(re,Ye),Ye}}An(re),Kn(Ae)}}function $n(re,Ae){var Ue=re._controlledReadableByteStream;if(!re._closeRequested&&Ue._state==="readable"){var Ye=Ae.buffer,st=Ae.byteOffset,ut=Ae.byteLength;if(ot(Ye))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");var pt=Ke(Ye);if(re._pendingPullIntos.length>0){var vt=re._pendingPullIntos.peek();if(ot(vt.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Fn(re),vt.buffer=Ke(vt.buffer),vt.readerType==="none"&&Zn(re,vt)}Re(Ue)?(Pr(re),Te(Ue)===0?Pn(re,pt,st,ut):(re._pendingPullIntos.length>0&&hn(re),Ee(Ue,new Uint8Array(pt,st,ut),!1))):Ir(Ue)?(Pn(re,pt,st,ut),On(re)):Pn(re,pt,st,ut),Yt(re)}}function Kt(re,Ae){var Ue=re._controlledReadableByteStream;Ue._state==="readable"&&(Gt(re),Rt(re),An(re),Ei(Ue,Ae))}function nr(re,Ae){var Ue=re._queue.shift();re._queueTotalSize-=Ue.byteLength,er(re);var Ye=new Uint8Array(Ue.buffer,Ue.byteOffset,Ue.byteLength);Ae._chunkSteps(Ye)}function Hn(re){if(re._byobRequest===null&&re._pendingPullIntos.length>0){var Ae=re._pendingPullIntos.peek(),Ue=new Uint8Array(Ae.buffer,Ae.byteOffset+Ae.bytesFilled,Ae.byteLength-Ae.bytesFilled),Ye=Object.create(Ft.prototype);Lr(Ye,re,Ue),re._byobRequest=Ye}return re._byobRequest}function ir(re){var Ae=re._controlledReadableByteStream._state;return Ae==="errored"?null:Ae==="closed"?0:re._strategyHWM-re._queueTotalSize}function Mn(re,Ae){var Ue=re._pendingPullIntos.peek();if(re._controlledReadableByteStream._state==="closed"){if(Ae!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(Ae===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(Ue.bytesFilled+Ae>Ue.byteLength)throw new RangeError("bytesWritten out of range")}Ue.buffer=Ke(Ue.buffer),tr(re,Ae)}function Bn(re,Ae){var Ue=re._pendingPullIntos.peek();if(re._controlledReadableByteStream._state==="closed"){if(Ae.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(Ae.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(Ue.byteOffset+Ue.bytesFilled!==Ae.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(Ue.bufferByteLength!==Ae.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(Ue.bytesFilled+Ae.byteLength>Ue.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var Ye=Ae.byteLength;Ue.buffer=Ke(Ae.buffer),tr(re,Ye)}function or(re,Ae,Ue,Ye,st,ut,pt){Ae._controlledReadableByteStream=re,Ae._pullAgain=!1,Ae._pulling=!1,Ae._byobRequest=null,Ae._queue=Ae._queueTotalSize=void 0,Rt(Ae),Ae._closeRequested=!1,Ae._started=!1,Ae._strategyHWM=ut,Ae._pullAlgorithm=Ye,Ae._cancelAlgorithm=st,Ae._autoAllocateChunkSize=pt,Ae._pendingPullIntos=new j,re._readableStreamController=Ae,P(S(Ue()),function(){return Ae._started=!0,Yt(Ae),null},function(vt){return Kt(Ae,vt),null})}function Tr(re,Ae,Ue){var Ye,st,ut,pt=Object.create(Ot.prototype);Ye=Ae.start!==void 0?function(){return Ae.start(pt)}:function(){},st=Ae.pull!==void 0?function(){return Ae.pull(pt)}:function(){return S(void 0)},ut=Ae.cancel!==void 0?function(xt){return Ae.cancel(xt)}:function(){return S(void 0)};var vt=Ae.autoAllocateChunkSize;if(vt===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");or(re,pt,Ye,st,ut,Ue,vt)}function Lr(re,Ae,Ue){re._associatedReadableByteStreamController=Ae,re._view=Ue}function zn(re){return new TypeError("ReadableStreamBYOBRequest.prototype.".concat(re," can only be used on a ReadableStreamBYOBRequest"))}function bn(re){return new TypeError("ReadableByteStreamController.prototype.".concat(re," can only be used on a ReadableByteStreamController"))}function Rr(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.mode;return{mode:Ue===void 0?void 0:Dr(Ue,"".concat(Ae," has member 'mode' that"))}}function Dr(re,Ae){if((re="".concat(re))!=="byob")throw new TypeError("".concat(Ae," '").concat(re,"' is not a valid enumeration value for ReadableStreamReaderMode"));return re}function Fi(re,Ae){var Ue;return De(re,Ae),{min:te((Ue=re==null?void 0:re.min)!==null&&Ue!==void 0?Ue:1,"".concat(Ae," has member 'min' that"))}}function Qr(re){return new pn(re)}function ei(re,Ae){re._reader._readIntoRequests.push(Ae)}function Oi(re,Ae,Ue){var Ye=re._reader._readIntoRequests.shift();Ue?Ye._closeSteps(Ae):Ye._chunkSteps(Ae)}function ti(re){return re._reader._readIntoRequests.length}function Ir(re){var Ae=re._reader;return Ae!==void 0&&!!wn(Ae)}Object.defineProperties(Ot.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),v(Ot.prototype.close,"close"),v(Ot.prototype.enqueue,"enqueue"),v(Ot.prototype.error,"error"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Ot.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var pn=function(){function re(Ae){if(ke(Ae,1,"ReadableStreamBYOBReader"),oe(Ae,"First parameter"),mn(Ae))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!jt(Ae._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");W(this,Ae),this._readIntoRequests=new j}return Object.defineProperty(re.prototype,"closed",{get:function(){return wn(this)?this._closedPromise:M(ar("closed"))},enumerable:!1,configurable:!0}),re.prototype.cancel=function(Ae){return Ae===void 0&&(Ae=void 0),wn(this)?this._ownerReadableStream===void 0?M(Q("cancel")):H(this,Ae):M(ar("cancel"))},re.prototype.read=function(Ae,Ue){if(Ue===void 0&&(Ue={}),!wn(this))return M(ar("read"));if(!ArrayBuffer.isView(Ae))return M(new TypeError("view must be an array buffer view"));if(Ae.byteLength===0)return M(new TypeError("view must have non-zero byteLength"));if(Ae.buffer.byteLength===0)return M(new TypeError("view's buffer must have non-zero byteLength"));if(ot(Ae.buffer))return M(new TypeError("view's buffer has been detached"));var Ye;try{Ye=Fi(Ue,"options")}catch(xt){return M(xt)}var st,ut,pt=Ye.min;if(pt===0)return M(new TypeError("options.min must be greater than 0"));if(Wt(Ae)){if(pt>Ae.byteLength)return M(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(pt>Ae.length)return M(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return M(Q("read from"));var vt=k(function(xt,yt){st=xt,ut=yt});return ni(this,Ae,pt,{_chunkSteps:function(xt){return st({value:xt,done:!1})},_closeSteps:function(xt){return st({value:xt,done:!0})},_errorSteps:function(xt){return ut(xt)}}),vt},re.prototype.releaseLock=function(){if(!wn(this))throw ar("releaseLock");this._ownerReadableStream!==void 0&&Hi(this)},re}();function wn(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_readIntoRequests")&&re instanceof pn}function ni(re,Ae,Ue,Ye){var st=re._ownerReadableStream;st._disturbed=!0,st._state==="errored"?Ye._errorSteps(st._storedError):Ar(st._readableStreamController,Ae,Ue,Ye)}function Hi(re){X(re),ri(re,new TypeError("Reader was released"))}function ri(re,Ae){var Ue=re._readIntoRequests;re._readIntoRequests=new j,Ue.forEach(function(Ye){Ye._errorSteps(Ae)})}function ar(re){return new TypeError("ReadableStreamBYOBReader.prototype.".concat(re," can only be used on a ReadableStreamBYOBReader"))}function jn(re,Ae){var Ue=re.highWaterMark;if(Ue===void 0)return Ae;if(gt(Ue)||Ue<0)throw new RangeError("Invalid highWaterMark");return Ue}function sr(re){var Ae=re.size;return Ae||function(){return 1}}function lr(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.highWaterMark,Ye=re==null?void 0:re.size;return{highWaterMark:Ue===void 0?void 0:Le(Ue),size:Ye===void 0?void 0:zi(Ye,"".concat(Ae," has member 'size' that"))}}function zi(re,Ae){return ve(re,Ae),function(Ue){return Le(re(Ue))}}function ji(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.abort,Ye=re==null?void 0:re.close,st=re==null?void 0:re.start,ut=re==null?void 0:re.type,pt=re==null?void 0:re.write;return{abort:Ue===void 0?void 0:Ui(Ue,re,"".concat(Ae," has member 'abort' that")),close:Ye===void 0?void 0:Wi(Ye,re,"".concat(Ae," has member 'close' that")),start:st===void 0?void 0:qi(st,re,"".concat(Ae," has member 'start' that")),write:pt===void 0?void 0:Gi(pt,re,"".concat(Ae," has member 'write' that")),type:ut}}function Ui(re,Ae,Ue){return ve(re,Ue),function(Ye){return Y(re,Ae,[Ye])}}function Wi(re,Ae,Ue){return ve(re,Ue),function(){return Y(re,Ae,[])}}function qi(re,Ae,Ue){return ve(re,Ue),function(Ye){return q(re,Ae,[Ye])}}function Gi(re,Ae,Ue){return ve(re,Ue),function(Ye,st){return Y(re,Ae,[Ye,st])}}function ii(re,Ae){if(!Tn(re))throw new TypeError("".concat(Ae," is not a WritableStream."))}function Ki(re){if(_typeof$1(re)!=="object"||re===null)return!1;try{return typeof re.aborted=="boolean"}catch{return!1}}Object.defineProperties(pn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),v(pn.prototype.cancel,"cancel"),v(pn.prototype.read,"read"),v(pn.prototype.releaseLock,"releaseLock"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(pn.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var Yi=typeof AbortController=="function";function Xi(){if(Yi)return new AbortController}var fn=function(){function re(Ae,Ue){Ae===void 0&&(Ae={}),Ue===void 0&&(Ue={}),Ae===void 0?Ae=null:we(Ae,"First parameter");var Ye=lr(Ue,"Second parameter"),st=ji(Ae,"First parameter");if(ai(this),st.type!==void 0)throw new RangeError("Invalid type is specified");var ut=sr(Ye);uo(this,st,jn(Ye,1),ut)}return Object.defineProperty(re.prototype,"locked",{get:function(){if(!Tn(this))throw pr("locked");return Ln(this)},enumerable:!1,configurable:!0}),re.prototype.abort=function(Ae){return Ae===void 0&&(Ae=void 0),Tn(this)?Ln(this)?M(new TypeError("Cannot abort a stream that already has a writer")):cr(this,Ae):M(pr("abort"))},re.prototype.close=function(){return Tn(this)?Ln(this)?M(new TypeError("Cannot close a stream that already has a writer")):sn(this)?M(new TypeError("Cannot close an already-closing stream")):si(this):M(pr("close"))},re.prototype.getWriter=function(){if(!Tn(this))throw pr("getWriter");return oi(this)},re}();function oi(re){return new cn(re)}function Zi(re,Ae,Ue,Ye,st,ut){st===void 0&&(st=1),ut===void 0&&(ut=function(){return 1});var pt=Object.create(fn.prototype);return ai(pt),pi(pt,Object.create(Rn.prototype),re,Ae,Ue,Ye,st,ut),pt}function ai(re){re._state="writable",re._storedError=void 0,re._writer=void 0,re._writableStreamController=void 0,re._writeRequests=new j,re._inFlightWriteRequest=void 0,re._closeRequest=void 0,re._inFlightCloseRequest=void 0,re._pendingAbortRequest=void 0,re._backpressure=!1}function Tn(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_writableStreamController")&&re instanceof fn}function Ln(re){return re._writer!==void 0}function cr(re,Ae){var Ue;if(re._state==="closed"||re._state==="errored")return S(void 0);re._writableStreamController._abortReason=Ae,(Ue=re._writableStreamController._abortController)===null||Ue===void 0||Ue.abort(Ae);var Ye=re._state;if(Ye==="closed"||Ye==="errored")return S(void 0);if(re._pendingAbortRequest!==void 0)return re._pendingAbortRequest._promise;var st=!1;Ye==="erroring"&&(st=!0,Ae=void 0);var ut=k(function(pt,vt){re._pendingAbortRequest={_promise:void 0,_resolve:pt,_reject:vt,_reason:Ae,_wasAlreadyErroring:st}});return re._pendingAbortRequest._promise=ut,st||Vr(re,Ae),ut}function si(re){var Ae=re._state;if(Ae==="closed"||Ae==="errored")return M(new TypeError("The stream (in ".concat(Ae," state) is not in the writable state and cannot be closed")));var Ue=k(function(st,ut){var pt={_resolve:st,_reject:ut};re._closeRequest=pt}),Ye=re._writer;return Ye!==void 0&&re._backpressure&&Ae==="writable"&&qr(Ye),ho(re._writableStreamController),Ue}function Ji(re){return k(function(Ae,Ue){var Ye={_resolve:Ae,_reject:Ue};re._writeRequests.push(Ye)})}function Nr(re,Ae){re._state!=="writable"?Fr(re):Vr(re,Ae)}function Vr(re,Ae){var Ue=re._writableStreamController;re._state="erroring",re._storedError=Ae;var Ye=re._writer;Ye!==void 0&&ci(Ye,Ae),!ro(re)&&Ue._started&&Fr(re)}function Fr(re){re._state="errored",re._writableStreamController[le]();var Ae=re._storedError;if(re._writeRequests.forEach(function(Ye){Ye._reject(Ae)}),re._writeRequests=new j,re._pendingAbortRequest!==void 0){var Ue=re._pendingAbortRequest;if(re._pendingAbortRequest=void 0,Ue._wasAlreadyErroring)return Ue._reject(Ae),void ur(re);P(re._writableStreamController[ne](Ue._reason),function(){return Ue._resolve(),ur(re),null},function(Ye){return Ue._reject(Ye),ur(re),null})}else ur(re)}function Qi(re){re._inFlightWriteRequest._resolve(void 0),re._inFlightWriteRequest=void 0}function eo(re,Ae){re._inFlightWriteRequest._reject(Ae),re._inFlightWriteRequest=void 0,Nr(re,Ae)}function to(re){re._inFlightCloseRequest._resolve(void 0),re._inFlightCloseRequest=void 0,re._state==="erroring"&&(re._storedError=void 0,re._pendingAbortRequest!==void 0&&(re._pendingAbortRequest._resolve(),re._pendingAbortRequest=void 0)),re._state="closed";var Ae=re._writer;Ae!==void 0&&vi(Ae)}function no(re,Ae){re._inFlightCloseRequest._reject(Ae),re._inFlightCloseRequest=void 0,re._pendingAbortRequest!==void 0&&(re._pendingAbortRequest._reject(Ae),re._pendingAbortRequest=void 0),Nr(re,Ae)}function sn(re){return re._closeRequest!==void 0||re._inFlightCloseRequest!==void 0}function ro(re){return re._inFlightWriteRequest!==void 0||re._inFlightCloseRequest!==void 0}function io(re){re._inFlightCloseRequest=re._closeRequest,re._closeRequest=void 0}function oo(re){re._inFlightWriteRequest=re._writeRequests.shift()}function ur(re){re._closeRequest!==void 0&&(re._closeRequest._reject(re._storedError),re._closeRequest=void 0);var Ae=re._writer;Ae!==void 0&&Ur(Ae,re._storedError)}function Or(re,Ae){var Ue=re._writer;Ue!==void 0&&Ae!==re._backpressure&&(Ae?_o(Ue):qr(Ue)),re._backpressure=Ae}Object.defineProperties(fn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),v(fn.prototype.abort,"abort"),v(fn.prototype.close,"close"),v(fn.prototype.getWriter,"getWriter"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(fn.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});var cn=function(){function re(Ae){if(ke(Ae,1,"WritableStreamDefaultWriter"),ii(Ae,"First parameter"),Ln(Ae))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=Ae,Ae._writer=this;var Ue=Ae._state;if(Ue==="writable")!sn(Ae)&&Ae._backpressure?mr(this):yi(this),gr(this);else if(Ue==="erroring")Wr(this,Ae._storedError),gr(this);else if(Ue==="closed")yi(this),vo(this);else{var Ye=Ae._storedError;Wr(this,Ye),mi(this,Ye)}}return Object.defineProperty(re.prototype,"closed",{get:function(){return xn(this)?this._closedPromise:M(Cn("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"desiredSize",{get:function(){if(!xn(this))throw Cn("desiredSize");if(this._ownerWritableStream===void 0)throw Wn("desiredSize");return co(this)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"ready",{get:function(){return xn(this)?this._readyPromise:M(Cn("ready"))},enumerable:!1,configurable:!0}),re.prototype.abort=function(Ae){return Ae===void 0&&(Ae=void 0),xn(this)?this._ownerWritableStream===void 0?M(Wn("abort")):ao(this,Ae):M(Cn("abort"))},re.prototype.close=function(){if(!xn(this))return M(Cn("close"));var Ae=this._ownerWritableStream;return Ae===void 0?M(Wn("close")):sn(Ae)?M(new TypeError("Cannot close an already-closing stream")):li(this)},re.prototype.releaseLock=function(){if(!xn(this))throw Cn("releaseLock");this._ownerWritableStream!==void 0&&ui(this)},re.prototype.write=function(Ae){return Ae===void 0&&(Ae=void 0),xn(this)?this._ownerWritableStream===void 0?M(Wn("write to")):di(this,Ae):M(Cn("write"))},re}();function xn(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_ownerWritableStream")&&re instanceof cn}function ao(re,Ae){return cr(re._ownerWritableStream,Ae)}function li(re){return si(re._ownerWritableStream)}function so(re){var Ae=re._ownerWritableStream,Ue=Ae._state;return sn(Ae)||Ue==="closed"?S(void 0):Ue==="errored"?M(Ae._storedError):li(re)}function lo(re,Ae){re._closedPromiseState==="pending"?Ur(re,Ae):yo(re,Ae)}function ci(re,Ae){re._readyPromiseState==="pending"?_i(re,Ae):bo(re,Ae)}function co(re){var Ae=re._ownerWritableStream,Ue=Ae._state;return Ue==="errored"||Ue==="erroring"?null:Ue==="closed"?0:fi(Ae._writableStreamController)}function ui(re){var Ae=re._ownerWritableStream,Ue=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ci(re,Ue),lo(re,Ue),Ae._writer=void 0,re._ownerWritableStream=void 0}function di(re,Ae){var Ue=re._ownerWritableStream,Ye=Ue._writableStreamController,st=po(Ye,Ae);if(Ue!==re._ownerWritableStream)return M(Wn("write to"));var ut=Ue._state;if(ut==="errored")return M(Ue._storedError);if(sn(Ue)||ut==="closed")return M(new TypeError("The stream is closing or closed and cannot be written to"));if(ut==="erroring")return M(Ue._storedError);var pt=Ji(Ue);return fo(Ye,Ae,st),pt}Object.defineProperties(cn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),v(cn.prototype.abort,"abort"),v(cn.prototype.close,"close"),v(cn.prototype.releaseLock,"releaseLock"),v(cn.prototype.write,"write"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(cn.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var hi={},Rn=function(){function re(){throw new TypeError("Illegal constructor")}return Object.defineProperty(re.prototype,"abortReason",{get:function(){if(!Hr(this))throw jr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"signal",{get:function(){if(!Hr(this))throw jr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),re.prototype.error=function(Ae){if(Ae===void 0&&(Ae=void 0),!Hr(this))throw jr("error");this._controlledWritableStream._state==="writable"&&gi(this,Ae)},re.prototype[ne]=function(Ae){var Ue=this._abortAlgorithm(Ae);return dr(this),Ue},re.prototype[le]=function(){Rt(this)},re}();function Hr(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_controlledWritableStream")&&re instanceof Rn}function pi(re,Ae,Ue,Ye,st,ut,pt,vt){Ae._controlledWritableStream=re,re._writableStreamController=Ae,Ae._queue=void 0,Ae._queueTotalSize=void 0,Rt(Ae),Ae._abortReason=void 0,Ae._abortController=Xi(),Ae._started=!1,Ae._strategySizeAlgorithm=vt,Ae._strategyHWM=pt,Ae._writeAlgorithm=Ye,Ae._closeAlgorithm=st,Ae._abortAlgorithm=ut;var xt=zr(Ae);Or(re,xt),P(S(Ue()),function(){return Ae._started=!0,hr(Ae),null},function(yt){return Ae._started=!0,Nr(re,yt),null})}function uo(re,Ae,Ue,Ye){var st,ut,pt,vt,xt=Object.create(Rn.prototype);st=Ae.start!==void 0?function(){return Ae.start(xt)}:function(){},ut=Ae.write!==void 0?function(yt){return Ae.write(yt,xt)}:function(){return S(void 0)},pt=Ae.close!==void 0?function(){return Ae.close()}:function(){return S(void 0)},vt=Ae.abort!==void 0?function(yt){return Ae.abort(yt)}:function(){return S(void 0)},pi(re,xt,st,ut,pt,vt,Ue,Ye)}function dr(re){re._writeAlgorithm=void 0,re._closeAlgorithm=void 0,re._abortAlgorithm=void 0,re._strategySizeAlgorithm=void 0}function ho(re){At(re,hi,0),hr(re)}function po(re,Ae){try{return re._strategySizeAlgorithm(Ae)}catch(Ue){return Un(re,Ue),1}}function fi(re){return re._strategyHWM-re._queueTotalSize}function fo(re,Ae,Ue){try{At(re,Ae,Ue)}catch(st){return void Un(re,st)}var Ye=re._controlledWritableStream;sn(Ye)||Ye._state!=="writable"||Or(Ye,zr(re)),hr(re)}function hr(re){var Ae=re._controlledWritableStream;if(re._started&&Ae._inFlightWriteRequest===void 0)if(Ae._state!=="erroring"){if(re._queue.length!==0){var Ue=Vt(re);Ue===hi?go(re):mo(re,Ue)}}else Fr(Ae)}function Un(re,Ae){re._controlledWritableStream._state==="writable"&&gi(re,Ae)}function go(re){var Ae=re._controlledWritableStream;io(Ae),Mt(re);var Ue=re._closeAlgorithm();dr(re),P(Ue,function(){return to(Ae),null},function(Ye){return no(Ae,Ye),null})}function mo(re,Ae){var Ue=re._controlledWritableStream;oo(Ue),P(re._writeAlgorithm(Ae),function(){Qi(Ue);var Ye=Ue._state;if(Mt(re),!sn(Ue)&&Ye==="writable"){var st=zr(re);Or(Ue,st)}return hr(re),null},function(Ye){return Ue._state==="writable"&&dr(re),eo(Ue,Ye),null})}function zr(re){return fi(re)<=0}function gi(re,Ae){var Ue=re._controlledWritableStream;dr(re),Vr(Ue,Ae)}function pr(re){return new TypeError("WritableStream.prototype.".concat(re," can only be used on a WritableStream"))}function jr(re){return new TypeError("WritableStreamDefaultController.prototype.".concat(re," can only be used on a WritableStreamDefaultController"))}function Cn(re){return new TypeError("WritableStreamDefaultWriter.prototype.".concat(re," can only be used on a WritableStreamDefaultWriter"))}function Wn(re){return new TypeError("Cannot "+re+" a stream using a released writer")}function gr(re){re._closedPromise=k(function(Ae,Ue){re._closedPromise_resolve=Ae,re._closedPromise_reject=Ue,re._closedPromiseState="pending"})}function mi(re,Ae){gr(re),Ur(re,Ae)}function vo(re){gr(re),vi(re)}function Ur(re,Ae){re._closedPromise_reject!==void 0&&(I(re._closedPromise),re._closedPromise_reject(Ae),re._closedPromise_resolve=void 0,re._closedPromise_reject=void 0,re._closedPromiseState="rejected")}function yo(re,Ae){mi(re,Ae)}function vi(re){re._closedPromise_resolve!==void 0&&(re._closedPromise_resolve(void 0),re._closedPromise_resolve=void 0,re._closedPromise_reject=void 0,re._closedPromiseState="resolved")}function mr(re){re._readyPromise=k(function(Ae,Ue){re._readyPromise_resolve=Ae,re._readyPromise_reject=Ue}),re._readyPromiseState="pending"}function Wr(re,Ae){mr(re),_i(re,Ae)}function yi(re){mr(re),qr(re)}function _i(re,Ae){re._readyPromise_reject!==void 0&&(I(re._readyPromise),re._readyPromise_reject(Ae),re._readyPromise_resolve=void 0,re._readyPromise_reject=void 0,re._readyPromiseState="rejected")}function _o(re){mr(re)}function bo(re,Ae){Wr(re,Ae)}function qr(re){re._readyPromise_resolve!==void 0&&(re._readyPromise_resolve(void 0),re._readyPromise_resolve=void 0,re._readyPromise_reject=void 0,re._readyPromiseState="fulfilled")}function wo(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:commonjsGlobal$1!==void 0?commonjsGlobal$1:void 0}Object.defineProperties(Rn.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Rn.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var bi=wo();function xo(re){if(typeof re!="function"&&_typeof$1(re)!=="object"||re.name!=="DOMException")return!1;try{return new re,!0}catch{return!1}}function Co(){var re=bi==null?void 0:bi.DOMException;return xo(re)?re:void 0}function ko(){var re=function(Ae,Ue){this.message=Ae||"",this.name=Ue||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return v(re,"DOMException"),re.prototype=Object.create(Error.prototype),Object.defineProperty(re.prototype,"constructor",{value:re,writable:!0,configurable:!0}),re}var So=Co()||ko();function wi(re,Ae,Ue,Ye,st,ut){var pt=_e(re),vt=oi(Ae);re._disturbed=!0;var xt=!1,yt=S(void 0);return k(function(Bt,Tt){var $t;if(ut!==void 0){if($t=function(){var Et=ut.reason!==void 0?ut.reason:new So("Aborted","AbortError"),Lt=[];Ye||Lt.push(function(){return Ae._state==="writable"?cr(Ae,Et):S(void 0)}),st||Lt.push(function(){return re._state==="readable"?nn(re,Et):S(void 0)}),Xt(function(){return Promise.all(Lt.map(function(It){return It()}))},!0,Et)},ut.aborted)return void $t();ut.addEventListener("abort",$t)}function Nt(){return k(function(Et,Lt){function It(rn){rn?Et():E(Jt(),It,Lt)}It(!1)})}function Jt(){return xt?S(!0):E(vt._readyPromise,function(){return k(function(Et,Lt){Ge(pt,{_chunkSteps:function(It){yt=E(di(vt,It),void 0,g),Et(!1)},_closeSteps:function(){return Et(!0)},_errorSteps:Lt})})})}if(Ht(re,pt._closedPromise,function(Et){return Ye?En(!0,Et):Xt(function(){return cr(Ae,Et)},!0,Et),null}),Ht(Ae,vt._closedPromise,function(Et){return st?En(!0,Et):Xt(function(){return nn(re,Et)},!0,Et),null}),dn(re,pt._closedPromise,function(){return Ue?En():Xt(function(){return so(vt)}),null}),sn(Ae)||Ae._state==="closed"){var Qt=new TypeError("the destination writable stream closed before all data could be piped to it");st?En(!0,Qt):Xt(function(){return nn(re,Qt)},!0,Qt)}function ln(){var Et=yt;return E(yt,function(){return Et!==yt?ln():void 0})}function Ht(Et,Lt,It){Et._state==="errored"?It(Et._storedError):D(Lt,It)}function dn(Et,Lt,It){Et._state==="closed"?It():T(Lt,It)}function Xt(Et,Lt,It){function rn(){return P(Et(),function(){return Dt(Lt,It)},function(yn){return Dt(!0,yn)}),null}xt||(xt=!0,Ae._state!=="writable"||sn(Ae)?rn():T(ln(),rn))}function En(Et,Lt){xt||(xt=!0,Ae._state!=="writable"||sn(Ae)?Dt(Et,Lt):T(ln(),function(){return Dt(Et,Lt)}))}function Dt(Et,Lt){return ui(vt),X(pt),ut!==void 0&&ut.removeEventListener("abort",$t),Et?Tt(Lt):Bt(void 0),null}I(Nt())})}var un=function(){function re(){throw new TypeError("Illegal constructor")}return Object.defineProperty(re.prototype,"desiredSize",{get:function(){if(!vr(this))throw _r("desiredSize");return Gr(this)},enumerable:!1,configurable:!0}),re.prototype.close=function(){if(!vr(this))throw _r("close");if(!In(this))throw new TypeError("The stream is not in a state that permits close");kn(this)},re.prototype.enqueue=function(Ae){if(Ae===void 0&&(Ae=void 0),!vr(this))throw _r("enqueue");if(!In(this))throw new TypeError("The stream is not in a state that permits enqueue");return Dn(this,Ae)},re.prototype.error=function(Ae){if(Ae===void 0&&(Ae=void 0),!vr(this))throw _r("error");tn(this,Ae)},re.prototype[J]=function(Ae){Rt(this);var Ue=this._cancelAlgorithm(Ae);return yr(this),Ue},re.prototype[O]=function(Ae){var Ue=this._controlledReadableStream;if(this._queue.length>0){var Ye=Mt(this);this._closeRequested&&this._queue.length===0?(yr(this),Kn(Ue)):qn(this),Ae._chunkSteps(Ye)}else Ce(Ue,Ae),qn(this)},re.prototype[U]=function(){},re}();function vr(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_controlledReadableStream")&&re instanceof un}function qn(re){xi(re)&&(re._pulling?re._pullAgain=!0:(re._pulling=!0,P(re._pullAlgorithm(),function(){return re._pulling=!1,re._pullAgain&&(re._pullAgain=!1,qn(re)),null},function(Ae){return tn(re,Ae),null})))}function xi(re){var Ae=re._controlledReadableStream;return!!In(re)&&!!re._started&&(!!(mn(Ae)&&Te(Ae)>0)||Gr(re)>0)}function yr(re){re._pullAlgorithm=void 0,re._cancelAlgorithm=void 0,re._strategySizeAlgorithm=void 0}function kn(re){if(In(re)){var Ae=re._controlledReadableStream;re._closeRequested=!0,re._queue.length===0&&(yr(re),Kn(Ae))}}function Dn(re,Ae){if(In(re)){var Ue=re._controlledReadableStream;if(mn(Ue)&&Te(Ue)>0)Ee(Ue,Ae,!1);else{var Ye=void 0;try{Ye=re._strategySizeAlgorithm(Ae)}catch(st){throw tn(re,st),st}try{At(re,Ae,Ye)}catch(st){throw tn(re,st),st}}qn(re)}}function tn(re,Ae){var Ue=re._controlledReadableStream;Ue._state==="readable"&&(Rt(re),yr(re),Ei(Ue,Ae))}function Gr(re){var Ae=re._controlledReadableStream._state;return Ae==="errored"?null:Ae==="closed"?0:re._strategyHWM-re._queueTotalSize}function Eo(re){return!xi(re)}function In(re){var Ae=re._controlledReadableStream._state;return!re._closeRequested&&Ae==="readable"}function Ci(re,Ae,Ue,Ye,st,ut,pt){Ae._controlledReadableStream=re,Ae._queue=void 0,Ae._queueTotalSize=void 0,Rt(Ae),Ae._started=!1,Ae._closeRequested=!1,Ae._pullAgain=!1,Ae._pulling=!1,Ae._strategySizeAlgorithm=pt,Ae._strategyHWM=ut,Ae._pullAlgorithm=Ye,Ae._cancelAlgorithm=st,re._readableStreamController=Ae,P(S(Ue()),function(){return Ae._started=!0,qn(Ae),null},function(vt){return tn(Ae,vt),null})}function Po(re,Ae,Ue,Ye){var st,ut,pt,vt=Object.create(un.prototype);st=Ae.start!==void 0?function(){return Ae.start(vt)}:function(){},ut=Ae.pull!==void 0?function(){return Ae.pull(vt)}:function(){return S(void 0)},pt=Ae.cancel!==void 0?function(xt){return Ae.cancel(xt)}:function(){return S(void 0)},Ci(re,vt,st,ut,pt,Ue,Ye)}function _r(re){return new TypeError("ReadableStreamDefaultController.prototype.".concat(re," can only be used on a ReadableStreamDefaultController"))}function Ao(re,Ae){return jt(re._readableStreamController)?Mo(re):$o(re)}function $o(re,Ae){var Ue,Ye,st,ut,pt,vt=_e(re),xt=!1,yt=!1,Bt=!1,Tt=!1,$t=k(function(Ht){pt=Ht});function Nt(){return xt?(yt=!0,S(void 0)):(xt=!0,Ge(vt,{_chunkSteps:function(Ht){N(function(){yt=!1;var dn=Ht,Xt=Ht;Bt||Dn(st._readableStreamController,dn),Tt||Dn(ut._readableStreamController,Xt),xt=!1,yt&&Nt()})},_closeSteps:function(){xt=!1,Bt||kn(st._readableStreamController),Tt||kn(ut._readableStreamController),Bt&&Tt||pt(void 0)},_errorSteps:function(){xt=!1}}),S(void 0))}function Jt(Ht){if(Bt=!0,Ue=Ht,Tt){var dn=qe([Ue,Ye]),Xt=nn(re,dn);pt(Xt)}return $t}function Qt(Ht){if(Tt=!0,Ye=Ht,Bt){var dn=qe([Ue,Ye]),Xt=nn(re,dn);pt(Xt)}return $t}function ln(){}return st=Gn(ln,Nt,Jt),ut=Gn(ln,Nt,Qt),D(vt._closedPromise,function(Ht){return tn(st._readableStreamController,Ht),tn(ut._readableStreamController,Ht),Bt&&Tt||pt(void 0),null}),[st,ut]}function Mo(re){var Ae,Ue,Ye,st,ut,pt=_e(re),vt=!1,xt=!1,yt=!1,Bt=!1,Tt=!1,$t=k(function(Dt){ut=Dt});function Nt(Dt){D(Dt._closedPromise,function(Et){return Dt!==pt||(Kt(Ye._readableStreamController,Et),Kt(st._readableStreamController,Et),Bt&&Tt||ut(void 0)),null})}function Jt(){wn(pt)&&(X(pt),Nt(pt=_e(re))),Ge(pt,{_chunkSteps:function(Dt){N(function(){xt=!1,yt=!1;var Et=Dt,Lt=Dt;if(!Bt&&!Tt)try{Lt=St(Dt)}catch(It){return Kt(Ye._readableStreamController,It),Kt(st._readableStreamController,It),void ut(nn(re,It))}Bt||$n(Ye._readableStreamController,Et),Tt||$n(st._readableStreamController,Lt),vt=!1,xt?ln():yt&&Ht()})},_closeSteps:function(){vt=!1,Bt||_n(Ye._readableStreamController),Tt||_n(st._readableStreamController),Ye._readableStreamController._pendingPullIntos.length>0&&Mn(Ye._readableStreamController,0),st._readableStreamController._pendingPullIntos.length>0&&Mn(st._readableStreamController,0),Bt&&Tt||ut(void 0)},_errorSteps:function(){vt=!1}})}function Qt(Dt,Et){Xe(pt)&&(X(pt),Nt(pt=Qr(re)));var Lt=Et?st:Ye,It=Et?Ye:st;ni(pt,Dt,1,{_chunkSteps:function(rn){N(function(){xt=!1,yt=!1;var yn=Et?Tt:Bt;if(Et?Bt:Tt)yn||Bn(Lt._readableStreamController,rn);else{var Vn=void 0;try{Vn=St(rn)}catch(Jr){return Kt(Lt._readableStreamController,Jr),Kt(It._readableStreamController,Jr),void ut(nn(re,Jr))}yn||Bn(Lt._readableStreamController,rn),$n(It._readableStreamController,Vn)}vt=!1,xt?ln():yt&&Ht()})},_closeSteps:function(rn){vt=!1;var yn=Et?Tt:Bt,Vn=Et?Bt:Tt;yn||_n(Lt._readableStreamController),Vn||_n(It._readableStreamController),rn!==void 0&&(yn||Bn(Lt._readableStreamController,rn),!Vn&&It._readableStreamController._pendingPullIntos.length>0&&Mn(It._readableStreamController,0)),yn&&Vn||ut(void 0)},_errorSteps:function(){vt=!1}})}function ln(){if(vt)return xt=!0,S(void 0);vt=!0;var Dt=Hn(Ye._readableStreamController);return Dt===null?Jt():Qt(Dt._view,!1),S(void 0)}function Ht(){if(vt)return yt=!0,S(void 0);vt=!0;var Dt=Hn(st._readableStreamController);return Dt===null?Jt():Qt(Dt._view,!0),S(void 0)}function dn(Dt){if(Bt=!0,Ae=Dt,Tt){var Et=qe([Ae,Ue]),Lt=nn(re,Et);ut(Lt)}return $t}function Xt(Dt){if(Tt=!0,Ue=Dt,Bt){var Et=qe([Ae,Ue]),Lt=nn(re,Et);ut(Lt)}return $t}function En(){}return Ye=Si(En,ln,dn),st=Si(En,Ht,Xt),Nt(pt),[Ye,st]}function Bo(re){return m(re)&&re.getReader!==void 0}function To(re){return Bo(re)?Ro(re.getReader()):Lo(re)}function Lo(re){var Ae,Ue=ht(re,"async");function Ye(){var ut;try{ut=lt(Ue)}catch(pt){return M(pt)}return F(S(ut),function(pt){if(!m(pt))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(ft(pt))kn(Ae._readableStreamController);else{var vt=mt(pt);Dn(Ae._readableStreamController,vt)}})}function st(ut){var pt,vt,xt=Ue.iterator;try{pt=et(xt,"return")}catch(yt){return M(yt)}if(pt===void 0)return S(void 0);try{vt=q(pt,xt,[ut])}catch(yt){return M(yt)}return F(S(vt),function(yt){if(!m(yt))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return Ae=Gn(g,Ye,st,0)}function Ro(re){var Ae;function Ue(){var st;try{st=re.read()}catch(ut){return M(ut)}return F(st,function(ut){if(!m(ut))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(ut.done)kn(Ae._readableStreamController);else{var pt=ut.value;Dn(Ae._readableStreamController,pt)}})}function Ye(st){try{return S(re.cancel(st))}catch(ut){return M(ut)}}return Ae=Gn(g,Ue,Ye,0)}function Do(re,Ae){De(re,Ae);var Ue=re,Ye=Ue==null?void 0:Ue.autoAllocateChunkSize,st=Ue==null?void 0:Ue.cancel,ut=Ue==null?void 0:Ue.pull,pt=Ue==null?void 0:Ue.start,vt=Ue==null?void 0:Ue.type;return{autoAllocateChunkSize:Ye===void 0?void 0:te(Ye,"".concat(Ae," has member 'autoAllocateChunkSize' that")),cancel:st===void 0?void 0:Io(st,Ue,"".concat(Ae," has member 'cancel' that")),pull:ut===void 0?void 0:No(ut,Ue,"".concat(Ae," has member 'pull' that")),start:pt===void 0?void 0:Vo(pt,Ue,"".concat(Ae," has member 'start' that")),type:vt===void 0?void 0:Fo(vt,"".concat(Ae," has member 'type' that"))}}function Io(re,Ae,Ue){return ve(re,Ue),function(Ye){return Y(re,Ae,[Ye])}}function No(re,Ae,Ue){return ve(re,Ue),function(Ye){return Y(re,Ae,[Ye])}}function Vo(re,Ae,Ue){return ve(re,Ue),function(Ye){return q(re,Ae,[Ye])}}function Fo(re,Ae){if((re="".concat(re))!=="bytes")throw new TypeError("".concat(Ae," '").concat(re,"' is not a valid enumeration value for ReadableStreamType"));return re}function Oo(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.preventCancel;return{preventCancel:Boolean(Ue)}}function ki(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.preventAbort,Ye=re==null?void 0:re.preventCancel,st=re==null?void 0:re.preventClose,ut=re==null?void 0:re.signal;return ut!==void 0&&Ho(ut,"".concat(Ae," has member 'signal' that")),{preventAbort:Boolean(Ue),preventCancel:Boolean(Ye),preventClose:Boolean(st),signal:ut}}function Ho(re,Ae){if(!Ki(re))throw new TypeError("".concat(Ae," is not an AbortSignal."))}function zo(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.readable;Me(Ue,"readable","ReadableWritablePair"),oe(Ue,"".concat(Ae," has member 'readable' that"));var Ye=re==null?void 0:re.writable;return Me(Ye,"writable","ReadableWritablePair"),ii(Ye,"".concat(Ae," has member 'writable' that")),{readable:Ue,writable:Ye}}Object.defineProperties(un.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),v(un.prototype.close,"close"),v(un.prototype.enqueue,"enqueue"),v(un.prototype.error,"error"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(un.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var Ut=function(){function re(Ae,Ue){Ae===void 0&&(Ae={}),Ue===void 0&&(Ue={}),Ae===void 0?Ae=null:we(Ae,"First parameter");var Ye=lr(Ue,"Second parameter"),st=Do(Ae,"First parameter");if(Kr(this),st.type==="bytes"){if(Ye.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");Tr(this,st,jn(Ye,0))}else{var ut=sr(Ye);Po(this,st,jn(Ye,1),ut)}}return Object.defineProperty(re.prototype,"locked",{get:function(){if(!gn(this))throw Sn("locked");return mn(this)},enumerable:!1,configurable:!0}),re.prototype.cancel=function(Ae){return Ae===void 0&&(Ae=void 0),gn(this)?mn(this)?M(new TypeError("Cannot cancel a stream that already has a reader")):nn(this,Ae):M(Sn("cancel"))},re.prototype.getReader=function(Ae){if(Ae===void 0&&(Ae=void 0),!gn(this))throw Sn("getReader");return Rr(Ae,"First parameter").mode===void 0?_e(this):Qr(this)},re.prototype.pipeThrough=function(Ae,Ue){if(Ue===void 0&&(Ue={}),!gn(this))throw Sn("pipeThrough");ke(Ae,1,"pipeThrough");var Ye=zo(Ae,"First parameter"),st=ki(Ue,"Second parameter");if(mn(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ln(Ye.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return I(wi(this,Ye.writable,st.preventClose,st.preventAbort,st.preventCancel,st.signal)),Ye.readable},re.prototype.pipeTo=function(Ae,Ue){if(Ue===void 0&&(Ue={}),!gn(this))return M(Sn("pipeTo"));if(Ae===void 0)return M("Parameter 1 is required in 'pipeTo'.");if(!Tn(Ae))return M(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var Ye;try{Ye=ki(Ue,"Second parameter")}catch(st){return M(st)}return mn(this)?M(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ln(Ae)?M(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):wi(this,Ae,Ye.preventClose,Ye.preventAbort,Ye.preventCancel,Ye.signal)},re.prototype.tee=function(){if(!gn(this))throw Sn("tee");return qe(Ao(this))},re.prototype.values=function(Ae){if(Ae===void 0&&(Ae=void 0),!gn(this))throw Sn("values");return kt(this,Oo(Ae,"First parameter").preventCancel)},re.prototype[it]=function(Ae){return this.values(Ae)},re.from=function(Ae){return To(Ae)},re}();function Gn(re,Ae,Ue,Ye,st){Ye===void 0&&(Ye=1),st===void 0&&(st=function(){return 1});var ut=Object.create(Ut.prototype);return Kr(ut),Ci(ut,Object.create(un.prototype),re,Ae,Ue,Ye,st),ut}function Si(re,Ae,Ue){var Ye=Object.create(Ut.prototype);return Kr(Ye),or(Ye,Object.create(Ot.prototype),re,Ae,Ue,0,void 0),Ye}function Kr(re){re._state="readable",re._reader=void 0,re._storedError=void 0,re._disturbed=!1}function gn(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_readableStreamController")&&re instanceof Ut}function mn(re){return re._reader!==void 0}function nn(re,Ae){if(re._disturbed=!0,re._state==="closed")return S(void 0);if(re._state==="errored")return M(re._storedError);Kn(re);var Ue=re._reader;if(Ue!==void 0&&wn(Ue)){var Ye=Ue._readIntoRequests;Ue._readIntoRequests=new j,Ye.forEach(function(st){st._closeSteps(void 0)})}return F(re._readableStreamController[J](Ae),g)}function Kn(re){re._state="closed";var Ae=re._reader;if(Ae!==void 0&&(Ne(Ae),Xe(Ae))){var Ue=Ae._readRequests;Ae._readRequests=new j,Ue.forEach(function(Ye){Ye._closeSteps()})}}function Ei(re,Ae){re._state="errored",re._storedError=Ae;var Ue=re._reader;Ue!==void 0&&($e(Ue,Ae),Xe(Ue)?rt(Ue,Ae):ri(Ue,Ae))}function Sn(re){return new TypeError("ReadableStream.prototype.".concat(re," can only be used on a ReadableStream"))}function Pi(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.highWaterMark;return Me(Ue,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Le(Ue)}}Object.defineProperties(Ut,{from:{enumerable:!0}}),Object.defineProperties(Ut.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),v(Ut.from,"from"),v(Ut.prototype.cancel,"cancel"),v(Ut.prototype.getReader,"getReader"),v(Ut.prototype.pipeThrough,"pipeThrough"),v(Ut.prototype.pipeTo,"pipeTo"),v(Ut.prototype.tee,"tee"),v(Ut.prototype.values,"values"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Ut.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Ut.prototype,it,{value:Ut.prototype.values,writable:!0,configurable:!0});var Ai=function(re){return re.byteLength};v(Ai,"size");var br=function(){function re(Ae){ke(Ae,1,"ByteLengthQueuingStrategy"),Ae=Pi(Ae,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=Ae.highWaterMark}return Object.defineProperty(re.prototype,"highWaterMark",{get:function(){if(!Mi(this))throw $i("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"size",{get:function(){if(!Mi(this))throw $i("size");return Ai},enumerable:!1,configurable:!0}),re}();function $i(re){return new TypeError("ByteLengthQueuingStrategy.prototype.".concat(re," can only be used on a ByteLengthQueuingStrategy"))}function Mi(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_byteLengthQueuingStrategyHighWaterMark")&&re instanceof br}Object.defineProperties(br.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(br.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var Bi=function(){return 1};v(Bi,"size");var wr=function(){function re(Ae){ke(Ae,1,"CountQueuingStrategy"),Ae=Pi(Ae,"First parameter"),this._countQueuingStrategyHighWaterMark=Ae.highWaterMark}return Object.defineProperty(re.prototype,"highWaterMark",{get:function(){if(!Li(this))throw Ti("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"size",{get:function(){if(!Li(this))throw Ti("size");return Bi},enumerable:!1,configurable:!0}),re}();function Ti(re){return new TypeError("CountQueuingStrategy.prototype.".concat(re," can only be used on a CountQueuingStrategy"))}function Li(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_countQueuingStrategyHighWaterMark")&&re instanceof wr}function jo(re,Ae){De(re,Ae);var Ue=re==null?void 0:re.cancel,Ye=re==null?void 0:re.flush,st=re==null?void 0:re.readableType,ut=re==null?void 0:re.start,pt=re==null?void 0:re.transform,vt=re==null?void 0:re.writableType;return{cancel:Ue===void 0?void 0:Go(Ue,re,"".concat(Ae," has member 'cancel' that")),flush:Ye===void 0?void 0:Uo(Ye,re,"".concat(Ae," has member 'flush' that")),readableType:st,start:ut===void 0?void 0:Wo(ut,re,"".concat(Ae," has member 'start' that")),transform:pt===void 0?void 0:qo(pt,re,"".concat(Ae," has member 'transform' that")),writableType:vt}}function Uo(re,Ae,Ue){return ve(re,Ue),function(Ye){return Y(re,Ae,[Ye])}}function Wo(re,Ae,Ue){return ve(re,Ue),function(Ye){return q(re,Ae,[Ye])}}function qo(re,Ae,Ue){return ve(re,Ue),function(Ye,st){return Y(re,Ae,[Ye,st])}}function Go(re,Ae,Ue){return ve(re,Ue),function(Ye){return Y(re,Ae,[Ye])}}Object.defineProperties(wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(wr.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var xr=function(){function re(Ae,Ue,Ye){Ae===void 0&&(Ae={}),Ue===void 0&&(Ue={}),Ye===void 0&&(Ye={}),Ae===void 0&&(Ae=null);var st=lr(Ue,"Second parameter"),ut=lr(Ye,"Third parameter"),pt=jo(Ae,"First parameter");if(pt.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(pt.writableType!==void 0)throw new RangeError("Invalid writableType specified");var vt,xt=jn(ut,0),yt=sr(ut),Bt=jn(st,1),Tt=sr(st);Ko(this,k(function($t){vt=$t}),Bt,Tt,xt,yt),Xo(this,pt),pt.start!==void 0?vt(pt.start(this._transformStreamController)):vt(void 0)}return Object.defineProperty(re.prototype,"readable",{get:function(){if(!Ri(this))throw Vi("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"writable",{get:function(){if(!Ri(this))throw Vi("writable");return this._writable},enumerable:!1,configurable:!0}),re}();function Ko(re,Ae,Ue,Ye,st,ut){function pt(){return Ae}function vt($t){return Qo(re,$t)}function xt($t){return ea(re,$t)}function yt(){return ta(re)}function Bt(){return na(re)}function Tt($t){return ra(re,$t)}re._writable=Zi(pt,vt,yt,xt,Ue,Ye),re._readable=Gn(pt,Bt,Tt,st,ut),re._backpressure=void 0,re._backpressureChangePromise=void 0,re._backpressureChangePromise_resolve=void 0,Cr(re,!0),re._transformStreamController=void 0}function Ri(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_transformStreamController")&&re instanceof xr}function Di(re,Ae){tn(re._readable._readableStreamController,Ae),Yr(re,Ae)}function Yr(re,Ae){Sr(re._transformStreamController),Un(re._writable._writableStreamController,Ae),Xr(re)}function Xr(re){re._backpressure&&Cr(re,!1)}function Cr(re,Ae){re._backpressureChangePromise!==void 0&&re._backpressureChangePromise_resolve(),re._backpressureChangePromise=k(function(Ue){re._backpressureChangePromise_resolve=Ue}),re._backpressure=Ae}Object.defineProperties(xr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(xr.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});var vn=function(){function re(){throw new TypeError("Illegal constructor")}return Object.defineProperty(re.prototype,"desiredSize",{get:function(){if(!kr(this))throw Er("desiredSize");return Gr(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),re.prototype.enqueue=function(Ae){if(Ae===void 0&&(Ae=void 0),!kr(this))throw Er("enqueue");Ii(this,Ae)},re.prototype.error=function(Ae){if(Ae===void 0&&(Ae=void 0),!kr(this))throw Er("error");Zo(this,Ae)},re.prototype.terminate=function(){if(!kr(this))throw Er("terminate");Jo(this)},re}();function kr(re){return!!m(re)&&!!Object.prototype.hasOwnProperty.call(re,"_controlledTransformStream")&&re instanceof vn}function Yo(re,Ae,Ue,Ye,st){Ae._controlledTransformStream=re,re._transformStreamController=Ae,Ae._transformAlgorithm=Ue,Ae._flushAlgorithm=Ye,Ae._cancelAlgorithm=st,Ae._finishPromise=void 0,Ae._finishPromise_resolve=void 0,Ae._finishPromise_reject=void 0}function Xo(re,Ae){var Ue,Ye,st,ut=Object.create(vn.prototype);Ue=Ae.transform!==void 0?function(pt){return Ae.transform(pt,ut)}:function(pt){try{return Ii(ut,pt),S(void 0)}catch(vt){return M(vt)}},Ye=Ae.flush!==void 0?function(){return Ae.flush(ut)}:function(){return S(void 0)},st=Ae.cancel!==void 0?function(pt){return Ae.cancel(pt)}:function(){return S(void 0)},Yo(re,ut,Ue,Ye,st)}function Sr(re){re._transformAlgorithm=void 0,re._flushAlgorithm=void 0,re._cancelAlgorithm=void 0}function Ii(re,Ae){var Ue=re._controlledTransformStream,Ye=Ue._readable._readableStreamController;if(!In(Ye))throw new TypeError("Readable side is not in a state that permits enqueue");try{Dn(Ye,Ae)}catch(st){throw Yr(Ue,st),Ue._readable._storedError}Eo(Ye)!==Ue._backpressure&&Cr(Ue,!0)}function Zo(re,Ae){Di(re._controlledTransformStream,Ae)}function Ni(re,Ae){return F(re._transformAlgorithm(Ae),void 0,function(Ue){throw Di(re._controlledTransformStream,Ue),Ue})}function Jo(re){var Ae=re._controlledTransformStream;kn(Ae._readable._readableStreamController),Yr(Ae,new TypeError("TransformStream terminated"))}function Qo(re,Ae){var Ue=re._transformStreamController;return re._backpressure?F(re._backpressureChangePromise,function(){var Ye=re._writable;if(Ye._state==="erroring")throw Ye._storedError;return Ni(Ue,Ae)}):Ni(Ue,Ae)}function ea(re,Ae){var Ue=re._transformStreamController;if(Ue._finishPromise!==void 0)return Ue._finishPromise;var Ye=re._readable;Ue._finishPromise=k(function(ut,pt){Ue._finishPromise_resolve=ut,Ue._finishPromise_reject=pt});var st=Ue._cancelAlgorithm(Ae);return Sr(Ue),P(st,function(){return Ye._state==="errored"?Nn(Ue,Ye._storedError):(tn(Ye._readableStreamController,Ae),Zr(Ue)),null},function(ut){return tn(Ye._readableStreamController,ut),Nn(Ue,ut),null}),Ue._finishPromise}function ta(re){var Ae=re._transformStreamController;if(Ae._finishPromise!==void 0)return Ae._finishPromise;var Ue=re._readable;Ae._finishPromise=k(function(st,ut){Ae._finishPromise_resolve=st,Ae._finishPromise_reject=ut});var Ye=Ae._flushAlgorithm();return Sr(Ae),P(Ye,function(){return Ue._state==="errored"?Nn(Ae,Ue._storedError):(kn(Ue._readableStreamController),Zr(Ae)),null},function(st){return tn(Ue._readableStreamController,st),Nn(Ae,st),null}),Ae._finishPromise}function na(re){return Cr(re,!1),re._backpressureChangePromise}function ra(re,Ae){var Ue=re._transformStreamController;if(Ue._finishPromise!==void 0)return Ue._finishPromise;var Ye=re._writable;Ue._finishPromise=k(function(ut,pt){Ue._finishPromise_resolve=ut,Ue._finishPromise_reject=pt});var st=Ue._cancelAlgorithm(Ae);return Sr(Ue),P(st,function(){return Ye._state==="errored"?Nn(Ue,Ye._storedError):(Un(Ye._writableStreamController,Ae),Xr(re),Zr(Ue)),null},function(ut){return Un(Ye._writableStreamController,ut),Xr(re),Nn(Ue,ut),null}),Ue._finishPromise}function Er(re){return new TypeError("TransformStreamDefaultController.prototype.".concat(re," can only be used on a TransformStreamDefaultController"))}function Zr(re){re._finishPromise_resolve!==void 0&&(re._finishPromise_resolve(),re._finishPromise_resolve=void 0,re._finishPromise_reject=void 0)}function Nn(re,Ae){re._finishPromise_reject!==void 0&&(I(re._finishPromise),re._finishPromise_reject(Ae),re._finishPromise_resolve=void 0,re._finishPromise_reject=void 0)}function Vi(re){return new TypeError("TransformStream.prototype.".concat(re," can only be used on a TransformStream"))}Object.defineProperties(vn.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),v(vn.prototype.enqueue,"enqueue"),v(vn.prototype.error,"error"),v(vn.prototype.terminate,"terminate"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(vn.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=br,e.CountQueuingStrategy=wr,e.ReadableByteStreamController=Ot,e.ReadableStream=Ut,e.ReadableStreamBYOBReader=pn,e.ReadableStreamBYOBRequest=Ft,e.ReadableStreamDefaultController=un,e.ReadableStreamDefaultReader=Ze,e.TransformStream=xr,e.TransformStreamDefaultController=vn,e.WritableStream=fn,e.WritableStreamDefaultController=Rn,e.WritableStreamDefaultWriter=cn}(ponyfillExports)),ponyfillExports}(function(module,exports){var factory;factory=function(){return function(){var __webpack_modules__=[,function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.MAX_IMAGE_SIZE_TO_CACHE=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.BASELINE_FACTOR=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.assert=function(I,N){I||f(N)},n.bytesToString=function(I){_typeof$1(I)==="object"&&I!==null&&I.length!==void 0||f("Invalid argument for bytesToString");var N=I.length,q=8192;if(N<q)return String.fromCharCode.apply(null,I);for(var Y=[],Z=0;Z<N;Z+=q){var j=Math.min(Z+q,N),ne=I.subarray(Z,j);Y.push(String.fromCharCode.apply(null,ne))}return Y.join("")},n.createPromiseCapability=function(){var I=Object.create(null),N=!1;return Object.defineProperty(I,"settled",{get:function(){return N}}),I.promise=new Promise(function(q,Y){I.resolve=function(Z){N=!0,q(Z)},I.reject=function(Z){N=!0,Y(Z)}}),I},n.createValidAbsoluteUrl=function(I){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!I)return null;try{if(q&&typeof I=="string"){if(q.addDefaultProtocol&&I.startsWith("www.")){var Y=I.match(/\./g);Y&&Y.length>=2&&(I="http://".concat(I))}if(q.tryConvertEncoding)try{I=F(I)}catch{}}var Z=N?new URL(I,N):new URL(I);if(function(j){if(!j)return!1;switch(j.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Z))return Z}catch{}return null},n.getModificationDate=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[I.getUTCFullYear().toString(),(I.getUTCMonth()+1).toString().padStart(2,"0"),I.getUTCDate().toString().padStart(2,"0"),I.getUTCHours().toString().padStart(2,"0"),I.getUTCMinutes().toString().padStart(2,"0"),I.getUTCSeconds().toString().padStart(2,"0")].join("")},n.getVerbosityLevel=function(){return u},n.info=function(I){u>=s.INFOS&&console.log("Info: ".concat(I))},n.isArrayBuffer=function(I){return _typeof$1(I)==="object"&&I!==null&&I.byteLength!==void 0},n.isArrayEqual=function(I,N){if(I.length!==N.length)return!1;for(var q=0,Y=I.length;q<Y;q++)if(I[q]!==N[q])return!1;return!0},n.objectFromMap=function(I){var N,q=Object.create(null),Y=_createForOfIteratorHelper(I);try{for(Y.s();!(N=Y.n()).done;){var Z=_slicedToArray(N.value,2),j=Z[0],ne=Z[1];q[j]=ne}}catch(le){Y.e(le)}finally{Y.f()}return q},n.objectSize=function(I){return Object.keys(I).length},n.setVerbosityLevel=function(I){Number.isInteger(I)&&(u=I)},n.shadow=g,n.string32=function(I){return String.fromCharCode(I>>24&255,I>>16&255,I>>8&255,255&I)},n.stringToBytes=M,n.stringToPDFString=function(I){var N;if(I[0]>="\xEF"&&(I[0]==="\xFE"&&I[1]==="\xFF"?N="utf-16be":I[0]==="\xFF"&&I[1]==="\xFE"?N="utf-16le":I[0]==="\xEF"&&I[1]==="\xBB"&&I[2]==="\xBF"&&(N="utf-8"),N))try{var q=new TextDecoder(N,{fatal:!0}),Y=M(I);return q.decode(Y)}catch(J){d('stringToPDFString: "'.concat(J,'".'))}for(var Z=[],j=0,ne=I.length;j<ne;j++){var le=D[I.charCodeAt(j)];Z.push(le?String.fromCharCode(le):I.charAt(j))}return Z.join("")},n.stringToUTF8String=F,n.unreachable=f,n.utf8StringToString=function(I){return unescape(encodeURIComponent(I))},n.warn=d,globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,r(2)),n.IDENTITY_MATRIX=[1,0,0,1,0,0],n.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],n.MAX_IMAGE_SIZE_TO_CACHE=1e7,n.LINE_FACTOR=1.35,n.LINE_DESCENT_FACTOR=.35;var o=.35/1.35;n.BASELINE_FACTOR=o,n.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},n.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},n.AnnotationEditorPrefix="pdfjs_internal_editor_",n.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},n.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},n.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},n.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},n.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},n.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},n.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},n.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},n.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},n.AnnotationReplyType={GROUP:"Group",REPLY:"R"},n.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},n.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},n.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},n.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},n.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},n.PageActionEventType={O:"PageOpen",C:"PageClose"};var s={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=s,n.CMapCompressionType={NONE:0,BINARY:1},n.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},n.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var u=s.WARNINGS;function d(I){u>=s.WARNINGS&&console.log("Warning: ".concat(I))}function f(I){throw new Error(I)}function g(I,N,q){var Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return Object.defineProperty(I,N,{value:q,enumerable:!Y,configurable:!0,writable:!1}),q}var m=function(){function I(N,q){this.constructor===I&&f("Cannot initialize BaseException."),this.message=N,this.name=q}return I.prototype=new Error,I.constructor=I,I}();n.BaseException=m;var y=function(I){function N(q,Y){var Z;return _classCallCheck(this,N),(Z=_callSuper(this,N,[q,"PasswordException"])).code=Y,Z}return _inherits(N,I),_createClass(N)}(m);n.PasswordException=y;var v=function(I){function N(q,Y){var Z;return _classCallCheck(this,N),(Z=_callSuper(this,N,[q,"UnknownErrorException"])).details=Y,Z}return _inherits(N,I),_createClass(N)}(m);n.UnknownErrorException=v;var _=function(I){function N(q){return _classCallCheck(this,N),_callSuper(this,N,[q,"InvalidPDFException"])}return _inherits(N,I),_createClass(N)}(m);n.InvalidPDFException=_;var w=function(I){function N(q){return _classCallCheck(this,N),_callSuper(this,N,[q,"MissingPDFException"])}return _inherits(N,I),_createClass(N)}(m);n.MissingPDFException=w;var x=function(I){function N(q,Y){var Z;return _classCallCheck(this,N),(Z=_callSuper(this,N,[q,"UnexpectedResponseException"])).status=Y,Z}return _inherits(N,I),_createClass(N)}(m);n.UnexpectedResponseException=x;var k=function(I){function N(q){return _classCallCheck(this,N),_callSuper(this,N,[q,"FormatError"])}return _inherits(N,I),_createClass(N)}(m);n.FormatError=k;var S=function(I){function N(q){return _classCallCheck(this,N),_callSuper(this,N,[q,"AbortException"])}return _inherits(N,I),_createClass(N)}(m);function M(I){typeof I!="string"&&f("Invalid argument for stringToBytes");for(var N=I.length,q=new Uint8Array(N),Y=0;Y<N;++Y)q[Y]=255&I.charCodeAt(Y);return q}n.AbortException=S;var E=function(){return _createClass(function I(){_classCallCheck(this,I)},null,[{key:"isLittleEndian",get:function(){return g(this,"isLittleEndian",((I=new Uint8Array(4))[0]=1,new Uint32Array(I.buffer,0,1)[0]===1));var I}},{key:"isEvalSupported",get:function(){return g(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return g(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}},{key:"platform",get:function(){return typeof navigator>"u"?g(this,"platform",{isWin:!1,isMac:!1}):g(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}])}();n.FeatureTest=E;var P=_toConsumableArray$1(Array(256).keys()).map(function(I){return I.toString(16).padStart(2,"0")}),T=function(){function I(){_classCallCheck(this,I)}return _createClass(I,null,[{key:"makeHexColor",value:function(N,q,Y){return"#".concat(P[N]).concat(P[q]).concat(P[Y])}},{key:"scaleMinMax",value:function(N,q){var Y;N[0]?(N[0]<0&&(Y=q[0],q[0]=q[1],q[1]=Y),q[0]*=N[0],q[1]*=N[0],N[3]<0&&(Y=q[2],q[2]=q[3],q[3]=Y),q[2]*=N[3],q[3]*=N[3]):(Y=q[0],q[0]=q[2],q[2]=Y,Y=q[1],q[1]=q[3],q[3]=Y,N[1]<0&&(Y=q[2],q[2]=q[3],q[3]=Y),q[2]*=N[1],q[3]*=N[1],N[2]<0&&(Y=q[0],q[0]=q[1],q[1]=Y),q[0]*=N[2],q[1]*=N[2]),q[0]+=N[4],q[1]+=N[4],q[2]+=N[5],q[3]+=N[5]}},{key:"transform",value:function(N,q){return[N[0]*q[0]+N[2]*q[1],N[1]*q[0]+N[3]*q[1],N[0]*q[2]+N[2]*q[3],N[1]*q[2]+N[3]*q[3],N[0]*q[4]+N[2]*q[5]+N[4],N[1]*q[4]+N[3]*q[5]+N[5]]}},{key:"applyTransform",value:function(N,q){return[N[0]*q[0]+N[1]*q[2]+q[4],N[0]*q[1]+N[1]*q[3]+q[5]]}},{key:"applyInverseTransform",value:function(N,q){var Y=q[0]*q[3]-q[1]*q[2];return[(N[0]*q[3]-N[1]*q[2]+q[2]*q[5]-q[4]*q[3])/Y,(-N[0]*q[1]+N[1]*q[0]+q[4]*q[1]-q[5]*q[0])/Y]}},{key:"getAxialAlignedBoundingBox",value:function(N,q){var Y=I.applyTransform(N,q),Z=I.applyTransform(N.slice(2,4),q),j=I.applyTransform([N[0],N[3]],q),ne=I.applyTransform([N[2],N[1]],q);return[Math.min(Y[0],Z[0],j[0],ne[0]),Math.min(Y[1],Z[1],j[1],ne[1]),Math.max(Y[0],Z[0],j[0],ne[0]),Math.max(Y[1],Z[1],j[1],ne[1])]}},{key:"inverseTransform",value:function(N){var q=N[0]*N[3]-N[1]*N[2];return[N[3]/q,-N[1]/q,-N[2]/q,N[0]/q,(N[2]*N[5]-N[4]*N[3])/q,(N[4]*N[1]-N[5]*N[0])/q]}},{key:"singularValueDecompose2dScale",value:function(N){var q=[N[0],N[2],N[1],N[3]],Y=N[0]*q[0]+N[1]*q[2],Z=N[0]*q[1]+N[1]*q[3],j=N[2]*q[0]+N[3]*q[2],ne=N[2]*q[1]+N[3]*q[3],le=(Y+ne)/2,J=Math.sqrt(Math.pow(Y+ne,2)-4*(Y*ne-j*Z))/2,O=le+J||1,U=le-J||1;return[Math.sqrt(O),Math.sqrt(U)]}},{key:"normalizeRect",value:function(N){var q=N.slice(0);return N[0]>N[2]&&(q[0]=N[2],q[2]=N[0]),N[1]>N[3]&&(q[1]=N[3],q[3]=N[1]),q}},{key:"intersect",value:function(N,q){var Y=Math.max(Math.min(N[0],N[2]),Math.min(q[0],q[2])),Z=Math.min(Math.max(N[0],N[2]),Math.max(q[0],q[2]));if(Y>Z)return null;var j=Math.max(Math.min(N[1],N[3]),Math.min(q[1],q[3])),ne=Math.min(Math.max(N[1],N[3]),Math.max(q[1],q[3]));return j>ne?null:[Y,j,Z,ne]}},{key:"bezierBoundingBox",value:function(N,q,Y,Z,j,ne,le,J){for(var O,U,W,H,X,Q,fe,Se,Pe=[],$e=[[],[]],Ie=0;Ie<2;++Ie)if(Ie===0?(U=6*N-12*Y+6*j,O=-3*N+9*Y-9*j+3*le,W=3*Y-3*N):(U=6*q-12*Z+6*ne,O=-3*q+9*Z-9*ne+3*J,W=3*Z-3*q),Math.abs(O)<1e-12){if(Math.abs(U)<1e-12)continue;0<(H=-W/U)&&H<1&&Pe.push(H)}else fe=U*U-4*W*O,Se=Math.sqrt(fe),fe<0||(0<(X=(-U+Se)/(2*O))&&X<1&&Pe.push(X),0<(Q=(-U-Se)/(2*O))&&Q<1&&Pe.push(Q));for(var Ne,Be=Pe.length,be=Be;Be--;)Ne=1-(H=Pe[Be]),$e[0][Be]=Ne*Ne*Ne*N+3*Ne*Ne*H*Y+3*Ne*H*H*j+H*H*H*le,$e[1][Be]=Ne*Ne*Ne*q+3*Ne*Ne*H*Z+3*Ne*H*H*ne+H*H*H*J;return $e[0][be]=N,$e[1][be]=q,$e[0][be+1]=le,$e[1][be+1]=J,$e[0].length=$e[1].length=be+2,[Math.min.apply(Math,_toConsumableArray$1($e[0])),Math.min.apply(Math,_toConsumableArray$1($e[1])),Math.max.apply(Math,_toConsumableArray$1($e[0])),Math.max.apply(Math,_toConsumableArray$1($e[1]))]}}])}();n.Util=T;var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function F(I){return decodeURIComponent(escape(I))}},function(e,n,r){var o=r(3);!globalThis.DOMMatrix&&o.isNodeJS&&(globalThis.DOMMatrix=require$$0.DOMMatrix),function(){if(!globalThis.Path2D&&o.isNodeJS){var s=require$$0.CanvasRenderingContext2D,u=requirePath2dPolyfill_esm().polyfillPath2D;globalThis.CanvasRenderingContext2D=s,u(globalThis)}}(),!globalThis.ReadableStream&&o.isNodeJS&&(globalThis.ReadableStream=requirePonyfill().ReadableStream),Array.prototype.at||r(4),Uint8Array.prototype.at||r(78),globalThis.structuredClone||r(90)},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;var r=!((typeof process>"u"?"undefined":_typeof$1(process))!=="object"||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=r},function(e,n,r){r(5);var o=r(77);e.exports=o("Array","at")},function(e,n,r){var o=r(6),s=r(43),u=r(67),d=r(65),f=r(72);o({target:"Array",proto:!0},{at:function(g){var m=s(this),y=u(m),v=d(g),_=v>=0?v:y+v;return _<0||_>=y?void 0:m[_]}}),f("at")},function(e,n,r){var o=r(7),s=r(8).f,u=r(47),d=r(51),f=r(41),g=r(59),m=r(71);e.exports=function(y,v){var _,w,x,k,S,M=y.target,E=y.global,P=y.stat;if(_=E?o:P?o[M]||f(M,{}):(o[M]||{}).prototype)for(w in v){if(k=v[w],x=y.dontCallGetSet?(S=s(_,w))&&S.value:_[w],!m(E?w:M+(P?".":"#")+w,y.forced)&&x!==void 0){if(_typeof$1(k)==_typeof$1(x))continue;g(k,x)}(y.sham||x&&x.sham)&&u(k,"sham",!0),d(_,w,k,y)}}},function(e){var n=function(r){return r&&r.Math==Math&&r};e.exports=n((typeof globalThis>"u"?"undefined":_typeof$1(globalThis))=="object"&&globalThis)||n((typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window)||n((typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self)||n(_typeof$1(commonjsGlobal$1)=="object"&&commonjsGlobal$1)||function(){return this}()||Function("return this")()},function(e,n,r){var o=r(9),s=r(11),u=r(13),d=r(14),f=r(15),g=r(21),m=r(42),y=r(45),v=Object.getOwnPropertyDescriptor;n.f=o?v:function(_,w){if(_=f(_),w=g(w),y)try{return v(_,w)}catch{}if(m(_,w))return d(!s(u.f,_,w),_[w])}},function(e,n,r){var o=r(10);e.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(e){e.exports=function(n){try{return!!n()}catch{return!0}}},function(e,n,r){var o=r(12),s=Function.prototype.call;e.exports=o?s.bind(s):function(){return s.apply(s,arguments)}},function(e,n,r){var o=r(10);e.exports=!o(function(){var s=function(){}.bind();return typeof s!="function"||s.hasOwnProperty("prototype")})},function(e,n){var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!r.call({1:2},1);n.f=s?function(u){var d=o(this,u);return!!d&&d.enumerable}:r},function(e){e.exports=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}}},function(e,n,r){var o=r(16),s=r(19);e.exports=function(u){return o(s(u))}},function(e,n,r){var o=r(17),s=r(10),u=r(18),d=Object,f=o("".split);e.exports=s(function(){return!d("z").propertyIsEnumerable(0)})?function(g){return u(g)=="String"?f(g,""):d(g)}:d},function(e,n,r){var o=r(12),s=Function.prototype,u=s.call,d=o&&s.bind.bind(u,u);e.exports=o?d:function(f){return function(){return u.apply(f,arguments)}}},function(e,n,r){var o=r(17),s=o({}.toString),u=o("".slice);e.exports=function(d){return u(s(d),8,-1)}},function(e,n,r){var o=r(20),s=TypeError;e.exports=function(u){if(o(u))throw s("Can't call method on "+u);return u}},function(e){e.exports=function(n){return n==null}},function(e,n,r){var o=r(22),s=r(26);e.exports=function(u){var d=o(u,"string");return s(d)?d:d+""}},function(e,n,r){var o=r(11),s=r(23),u=r(26),d=r(33),f=r(36),g=r(37),m=TypeError,y=g("toPrimitive");e.exports=function(v,_){if(!s(v)||u(v))return v;var w,x=d(v,y);if(x){if(_===void 0&&(_="default"),w=o(x,v,_),!s(w)||u(w))return w;throw m("Can't convert object to primitive value")}return _===void 0&&(_="number"),f(v,_)}},function(e,n,r){var o=r(24),s=r(25),u=s.all;e.exports=s.IS_HTMLDDA?function(d){return _typeof$1(d)=="object"?d!==null:o(d)||d===u}:function(d){return _typeof$1(d)=="object"?d!==null:o(d)}},function(e,n,r){var o=r(25),s=o.all;e.exports=o.IS_HTMLDDA?function(u){return typeof u=="function"||u===s}:function(u){return typeof u=="function"}},function(e){var n=(typeof document>"u"?"undefined":_typeof$1(document))=="object"&&document.all,r=n===void 0&&n!==void 0;e.exports={all:n,IS_HTMLDDA:r}},function(e,n,r){var o=r(27),s=r(24),u=r(28),d=r(29),f=Object;e.exports=d?function(g){return _typeof$1(g)=="symbol"}:function(g){var m=o("Symbol");return s(m)&&u(m.prototype,f(g))}},function(e,n,r){var o=r(7),s=r(24);e.exports=function(u,d){return arguments.length<2?(f=o[u],s(f)?f:void 0):o[u]&&o[u][d];var f}},function(e,n,r){var o=r(17);e.exports=o({}.isPrototypeOf)},function(e,n,r){var o=r(30);e.exports=o&&!Symbol.sham&&_typeof$1(Symbol.iterator)=="symbol"},function(e,n,r){var o=r(31),s=r(10);e.exports=!!Object.getOwnPropertySymbols&&!s(function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&o&&o<41})},function(e,n,r){var o,s,u=r(7),d=r(32),f=u.process,g=u.Deno,m=f&&f.versions||g&&g.version,y=m&&m.v8;y&&(s=(o=y.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!s&&d&&(!(o=d.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=d.match(/Chrome\/(\d+)/))&&(s=+o[1]),e.exports=s},function(e){e.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},function(e,n,r){var o=r(34),s=r(20);e.exports=function(u,d){var f=u[d];return s(f)?void 0:o(f)}},function(e,n,r){var o=r(24),s=r(35),u=TypeError;e.exports=function(d){if(o(d))return d;throw u(s(d)+" is not a function")}},function(e){var n=String;e.exports=function(r){try{return n(r)}catch{return"Object"}}},function(e,n,r){var o=r(11),s=r(24),u=r(23),d=TypeError;e.exports=function(f,g){var m,y;if(g==="string"&&s(m=f.toString)&&!u(y=o(m,f))||s(m=f.valueOf)&&!u(y=o(m,f))||g!=="string"&&s(m=f.toString)&&!u(y=o(m,f)))return y;throw d("Can't convert object to primitive value")}},function(e,n,r){var o=r(7),s=r(38),u=r(42),d=r(44),f=r(30),g=r(29),m=o.Symbol,y=s("wks"),v=g?m.for||m:m&&m.withoutSetter||d;e.exports=function(_){return u(y,_)||(y[_]=f&&u(m,_)?m[_]:v("Symbol."+_)),y[_]}},function(e,n,r){var o=r(39),s=r(40);(e.exports=function(u,d){return s[u]||(s[u]=d!==void 0?d:{})})("versions",[]).push({version:"3.29.1",mode:o?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e){e.exports=!1},function(e,n,r){var o=r(7),s=r(41),u="__core-js_shared__",d=o[u]||s(u,{});e.exports=d},function(e,n,r){var o=r(7),s=Object.defineProperty;e.exports=function(u,d){try{s(o,u,{value:d,configurable:!0,writable:!0})}catch{o[u]=d}return d}},function(e,n,r){var o=r(17),s=r(43),u=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(d,f){return u(s(d),f)}},function(e,n,r){var o=r(19),s=Object;e.exports=function(u){return s(o(u))}},function(e,n,r){var o=r(17),s=0,u=Math.random(),d=o(1 .toString);e.exports=function(f){return"Symbol("+(f===void 0?"":f)+")_"+d(++s+u,36)}},function(e,n,r){var o=r(9),s=r(10),u=r(46);e.exports=!o&&!s(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},function(e,n,r){var o=r(7),s=r(23),u=o.document,d=s(u)&&s(u.createElement);e.exports=function(f){return d?u.createElement(f):{}}},function(e,n,r){var o=r(9),s=r(48),u=r(14);e.exports=o?function(d,f,g){return s.f(d,f,u(1,g))}:function(d,f,g){return d[f]=g,d}},function(e,n,r){var o=r(9),s=r(45),u=r(49),d=r(50),f=r(21),g=TypeError,m=Object.defineProperty,y=Object.getOwnPropertyDescriptor,v="enumerable",_="configurable",w="writable";n.f=o?u?function(x,k,S){if(d(x),k=f(k),d(S),typeof x=="function"&&k==="prototype"&&"value"in S&&w in S&&!S[w]){var M=y(x,k);M&&M[w]&&(x[k]=S.value,S={configurable:_ in S?S[_]:M[_],enumerable:v in S?S[v]:M[v],writable:!1})}return m(x,k,S)}:m:function(x,k,S){if(d(x),k=f(k),d(S),s)try{return m(x,k,S)}catch{}if("get"in S||"set"in S)throw g("Accessors not supported");return"value"in S&&(x[k]=S.value),x}},function(e,n,r){var o=r(9),s=r(10);e.exports=o&&s(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(e,n,r){var o=r(23),s=String,u=TypeError;e.exports=function(d){if(o(d))return d;throw u(s(d)+" is not an object")}},function(e,n,r){var o=r(24),s=r(48),u=r(52),d=r(41);e.exports=function(f,g,m,y){y||(y={});var v=y.enumerable,_=y.name!==void 0?y.name:g;if(o(m)&&u(m,_,y),y.global)v?f[g]=m:d(g,m);else{try{y.unsafe?f[g]&&(v=!0):delete f[g]}catch{}v?f[g]=m:s.f(f,g,{value:m,enumerable:!1,configurable:!y.nonConfigurable,writable:!y.nonWritable})}return f}},function(e,n,r){var o=r(17),s=r(10),u=r(24),d=r(42),f=r(9),g=r(53).CONFIGURABLE,m=r(54),y=r(55),v=y.enforce,_=y.get,w=String,x=Object.defineProperty,k=o("".slice),S=o("".replace),M=o([].join),E=f&&!s(function(){return x(function(){},"length",{value:8}).length!==8}),P=String(String).split("String"),T=e.exports=function(D,F,I){k(w(F),0,7)==="Symbol("&&(F="["+S(w(F),/^Symbol\(([^)]*)\)/,"$1")+"]"),I&&I.getter&&(F="get "+F),I&&I.setter&&(F="set "+F),(!d(D,"name")||g&&D.name!==F)&&(f?x(D,"name",{value:F,configurable:!0}):D.name=F),E&&I&&d(I,"arity")&&D.length!==I.arity&&x(D,"length",{value:I.arity});try{I&&d(I,"constructor")&&I.constructor?f&&x(D,"prototype",{writable:!1}):D.prototype&&(D.prototype=void 0)}catch{}var N=v(D);return d(N,"source")||(N.source=M(P,typeof F=="string"?F:"")),D};Function.prototype.toString=T(function(){return u(this)&&_(this).source||m(this)},"toString")},function(e,n,r){var o=r(9),s=r(42),u=Function.prototype,d=o&&Object.getOwnPropertyDescriptor,f=s(u,"name"),g=f&&function(){}.name==="something",m=f&&(!o||o&&d(u,"name").configurable);e.exports={EXISTS:f,PROPER:g,CONFIGURABLE:m}},function(e,n,r){var o=r(17),s=r(24),u=r(40),d=o(Function.toString);s(u.inspectSource)||(u.inspectSource=function(f){return d(f)}),e.exports=u.inspectSource},function(e,n,r){var o,s,u,d=r(56),f=r(7),g=r(23),m=r(47),y=r(42),v=r(40),_=r(57),w=r(58),x="Object already initialized",k=f.TypeError,S=f.WeakMap;if(d||v.state){var M=v.state||(v.state=new S);M.get=M.get,M.has=M.has,M.set=M.set,o=function(P,T){if(M.has(P))throw k(x);return T.facade=P,M.set(P,T),T},s=function(P){return M.get(P)||{}},u=function(P){return M.has(P)}}else{var E=_("state");w[E]=!0,o=function(P,T){if(y(P,E))throw k(x);return T.facade=P,m(P,E,T),T},s=function(P){return y(P,E)?P[E]:{}},u=function(P){return y(P,E)}}e.exports={set:o,get:s,has:u,enforce:function(P){return u(P)?s(P):o(P,{})},getterFor:function(P){return function(T){var D;if(!g(T)||(D=s(T)).type!==P)throw k("Incompatible receiver, "+P+" required");return D}}}},function(e,n,r){var o=r(7),s=r(24),u=o.WeakMap;e.exports=s(u)&&/native code/.test(String(u))},function(e,n,r){var o=r(38),s=r(44),u=o("keys");e.exports=function(d){return u[d]||(u[d]=s(d))}},function(e){e.exports={}},function(e,n,r){var o=r(42),s=r(60),u=r(8),d=r(48);e.exports=function(f,g,m){for(var y=s(g),v=d.f,_=u.f,w=0;w<y.length;w++){var x=y[w];o(f,x)||m&&o(m,x)||v(f,x,_(g,x))}}},function(e,n,r){var o=r(27),s=r(17),u=r(61),d=r(70),f=r(50),g=s([].concat);e.exports=o("Reflect","ownKeys")||function(m){var y=u.f(f(m)),v=d.f;return v?g(y,v(m)):y}},function(e,n,r){var o=r(62),s=r(69).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(u){return o(u,s)}},function(e,n,r){var o=r(17),s=r(42),u=r(15),d=r(63).indexOf,f=r(58),g=o([].push);e.exports=function(m,y){var v,_=u(m),w=0,x=[];for(v in _)!s(f,v)&&s(_,v)&&g(x,v);for(;y.length>w;)s(_,v=y[w++])&&(~d(x,v)||g(x,v));return x}},function(e,n,r){var o=r(15),s=r(64),u=r(67),d=function(f){return function(g,m,y){var v,_=o(g),w=u(_),x=s(y,w);if(f&&m!=m){for(;w>x;)if((v=_[x++])!=v)return!0}else for(;w>x;x++)if((f||x in _)&&_[x]===m)return f||x||0;return!f&&-1}};e.exports={includes:d(!0),indexOf:d(!1)}},function(e,n,r){var o=r(65),s=Math.max,u=Math.min;e.exports=function(d,f){var g=o(d);return g<0?s(g+f,0):u(g,f)}},function(e,n,r){var o=r(66);e.exports=function(s){var u=+s;return u!=u||u===0?0:o(u)}},function(e){var n=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(o){var s=+o;return(s>0?r:n)(s)}},function(e,n,r){var o=r(68);e.exports=function(s){return o(s.length)}},function(e,n,r){var o=r(65),s=Math.min;e.exports=function(u){return u>0?s(o(u),9007199254740991):0}},function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,r){var o=r(10),s=r(24),u=/#|\.prototype\./,d=function(v,_){var w=g[f(v)];return w==y||w!=m&&(s(_)?o(_):!!_)},f=d.normalize=function(v){return String(v).replace(u,".").toLowerCase()},g=d.data={},m=d.NATIVE="N",y=d.POLYFILL="P";e.exports=d},function(e,n,r){var o=r(37),s=r(73),u=r(48).f,d=o("unscopables"),f=Array.prototype;f[d]==null&&u(f,d,{configurable:!0,value:s(null)}),e.exports=function(g){f[d][g]=!0}},function(e,n,r){var o,s=r(50),u=r(74),d=r(69),f=r(58),g=r(76),m=r(46),y=r(57),v="prototype",_="script",w=y("IE_PROTO"),x=function(){},k=function(E){return"<"+_+">"+E+"</"+_+">"},S=function(E){E.write(k("")),E.close();var P=E.parentWindow.Object;return E=null,P},M=function(){try{o=new ActiveXObject("htmlfile")}catch{}var E,P,T;M=typeof document<"u"?document.domain&&o?S(o):(P=m("iframe"),T="java"+_+":",P.style.display="none",g.appendChild(P),P.src=String(T),(E=P.contentWindow.document).open(),E.write(k("document.F=Object")),E.close(),E.F):S(o);for(var D=d.length;D--;)delete M[v][d[D]];return M()};f[w]=!0,e.exports=Object.create||function(E,P){var T;return E!==null?(x[v]=s(E),T=new x,x[v]=null,T[w]=E):T=M(),P===void 0?T:u.f(T,P)}},function(e,n,r){var o=r(9),s=r(49),u=r(48),d=r(50),f=r(15),g=r(75);n.f=o&&!s?Object.defineProperties:function(m,y){d(m);for(var v,_=f(y),w=g(y),x=w.length,k=0;x>k;)u.f(m,v=w[k++],_[v]);return m}},function(e,n,r){var o=r(62),s=r(69);e.exports=Object.keys||function(u){return o(u,s)}},function(e,n,r){var o=r(27);e.exports=o("document","documentElement")},function(e,n,r){var o=r(7),s=r(17);e.exports=function(u,d){return s(o[u].prototype[d])}},function(e,n,r){r(79)},function(e,n,r){var o=r(80),s=r(67),u=r(65),d=o.aTypedArray;(0,o.exportTypedArrayMethod)("at",function(f){var g=d(this),m=s(g),y=u(f),v=y>=0?y:m+y;return v<0||v>=m?void 0:g[v]})},function(e,n,r){var o,s,u,d=r(81),f=r(9),g=r(7),m=r(24),y=r(23),v=r(42),_=r(82),w=r(35),x=r(47),k=r(51),S=r(84),M=r(28),E=r(85),P=r(87),T=r(37),D=r(44),F=r(55),I=F.enforce,N=F.get,q=g.Int8Array,Y=q&&q.prototype,Z=g.Uint8ClampedArray,j=Z&&Z.prototype,ne=q&&E(q),le=Y&&E(Y),J=Object.prototype,O=g.TypeError,U=T("toStringTag"),W=D("TYPED_ARRAY_TAG"),H="TypedArrayConstructor",X=d&&!!P&&_(g.opera)!=="Opera",Q=!1,fe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Se={BigInt64Array:8,BigUint64Array:8},Pe=function(Ie){var Ne=E(Ie);if(y(Ne)){var Be=N(Ne);return Be&&v(Be,H)?Be[H]:Pe(Ne)}},$e=function(Ie){if(!y(Ie))return!1;var Ne=_(Ie);return v(fe,Ne)||v(Se,Ne)};for(o in fe)(u=(s=g[o])&&s.prototype)?I(u)[H]=s:X=!1;for(o in Se)(u=(s=g[o])&&s.prototype)&&(I(u)[H]=s);if((!X||!m(ne)||ne===Function.prototype)&&(ne=function(){throw O("Incorrect invocation")},X))for(o in fe)g[o]&&P(g[o],ne);if((!X||!le||le===J)&&(le=ne.prototype,X))for(o in fe)g[o]&&P(g[o].prototype,le);if(X&&E(j)!==le&&P(j,le),f&&!v(le,U))for(o in Q=!0,S(le,U,{configurable:!0,get:function(){return y(this)?this[W]:void 0}}),fe)g[o]&&x(g[o],W,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:X,TYPED_ARRAY_TAG:Q&&W,aTypedArray:function(Ie){if($e(Ie))return Ie;throw O("Target is not a typed array")},aTypedArrayConstructor:function(Ie){if(m(Ie)&&(!P||M(ne,Ie)))return Ie;throw O(w(Ie)+" is not a typed array constructor")},exportTypedArrayMethod:function(Ie,Ne,Be,be){if(f){if(Be)for(var Ve in fe){var De=g[Ve];if(De&&v(De.prototype,Ie))try{delete De.prototype[Ie]}catch{try{De.prototype[Ie]=Ne}catch{}}}le[Ie]&&!Be||k(le,Ie,Be?Ne:X&&Y[Ie]||Ne,be)}},exportTypedArrayStaticMethod:function(Ie,Ne,Be){var be,Ve;if(f){if(P){if(Be){for(be in fe)if((Ve=g[be])&&v(Ve,Ie))try{delete Ve[Ie]}catch{}}if(ne[Ie]&&!Be)return;try{return k(ne,Ie,Be?Ne:X&&ne[Ie]||Ne)}catch{}}for(be in fe)!(Ve=g[be])||Ve[Ie]&&!Be||k(Ve,Ie,Ne)}},getTypedArrayConstructor:Pe,isView:function(Ie){if(!y(Ie))return!1;var Ne=_(Ie);return Ne==="DataView"||v(fe,Ne)||v(Se,Ne)},isTypedArray:$e,TypedArray:ne,TypedArrayPrototype:le}},function(e){e.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},function(e,n,r){var o=r(83),s=r(24),u=r(18),d=r(37)("toStringTag"),f=Object,g=u(function(){return arguments}())=="Arguments";e.exports=o?u:function(m){var y,v,_;return m===void 0?"Undefined":m===null?"Null":typeof(v=function(w,x){try{return w[x]}catch{}}(y=f(m),d))=="string"?v:g?u(y):(_=u(y))=="Object"&&s(y.callee)?"Arguments":_}},function(e,n,r){var o={};o[r(37)("toStringTag")]="z",e.exports=String(o)==="[object z]"},function(e,n,r){var o=r(52),s=r(48);e.exports=function(u,d,f){return f.get&&o(f.get,d,{getter:!0}),f.set&&o(f.set,d,{setter:!0}),s.f(u,d,f)}},function(e,n,r){var o=r(42),s=r(24),u=r(43),d=r(57),f=r(86),g=d("IE_PROTO"),m=Object,y=m.prototype;e.exports=f?m.getPrototypeOf:function(v){var _=u(v);if(o(_,g))return _[g];var w=_.constructor;return s(w)&&_ instanceof w?w.prototype:_ instanceof m?y:null}},function(e,n,r){var o=r(10);e.exports=!o(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},function(e,n,r){var o=r(88),s=r(50),u=r(89);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,f=!1,g={};try{(d=o(Object.prototype,"__proto__","set"))(g,[]),f=g instanceof Array}catch{}return function(m,y){return s(m),u(y),f?d(m,y):m.__proto__=y,m}}():void 0)},function(e,n,r){var o=r(17),s=r(34);e.exports=function(u,d,f){try{return o(s(Object.getOwnPropertyDescriptor(u,d)[f]))}catch{}}},function(e,n,r){var o=r(24),s=String,u=TypeError;e.exports=function(d){if(_typeof$1(d)=="object"||o(d))return d;throw u("Can't set "+s(d)+" as a prototype")}},function(e,n,r){r(91),r(98),r(100),r(123),r(125);var o=r(137);e.exports=o.structuredClone},function(e,n,r){var o=r(15),s=r(72),u=r(92),d=r(55),f=r(48).f,g=r(93),m=r(97),y=r(39),v=r(9),_="Array Iterator",w=d.set,x=d.getterFor(_);e.exports=g(Array,"Array",function(S,M){w(this,{type:_,target:o(S),index:0,kind:M})},function(){var S=x(this),M=S.target,E=S.kind,P=S.index++;return!M||P>=M.length?(S.target=void 0,m(void 0,!0)):m(E=="keys"?P:E=="values"?M[P]:[P,M[P]],!1)},"values");var k=u.Arguments=u.Array;if(s("keys"),s("values"),s("entries"),!y&&v&&k.name!=="values")try{f(k,"name",{value:"values"})}catch{}},function(e){e.exports={}},function(e,n,r){var o=r(6),s=r(11),u=r(39),d=r(53),f=r(24),g=r(94),m=r(85),y=r(87),v=r(96),_=r(47),w=r(51),x=r(37),k=r(92),S=r(95),M=d.PROPER,E=d.CONFIGURABLE,P=S.IteratorPrototype,T=S.BUGGY_SAFARI_ITERATORS,D=x("iterator"),F="keys",I="values",N="entries",q=function(){return this};e.exports=function(Y,Z,j,ne,le,J,O){g(j,Z,ne);var U,W,H,X=function(Ne){if(Ne===le&&$e)return $e;if(!T&&Ne in Se)return Se[Ne];switch(Ne){case F:case I:case N:return function(){return new j(this,Ne)}}return function(){return new j(this)}},Q=Z+" Iterator",fe=!1,Se=Y.prototype,Pe=Se[D]||Se["@@iterator"]||le&&Se[le],$e=!T&&Pe||X(le),Ie=Z=="Array"&&Se.entries||Pe;if(Ie&&(U=m(Ie.call(new Y)))!==Object.prototype&&U.next&&(u||m(U)===P||(y?y(U,P):f(U[D])||w(U,D,q)),v(U,Q,!0,!0),u&&(k[Q]=q)),M&&le==I&&Pe&&Pe.name!==I&&(!u&&E?_(Se,"name",I):(fe=!0,$e=function(){return s(Pe,this)})),le)if(W={values:X(I),keys:J?$e:X(F),entries:X(N)},O)for(H in W)(T||fe||!(H in Se))&&w(Se,H,W[H]);else o({target:Z,proto:!0,forced:T||fe},W);return u&&!O||Se[D]===$e||w(Se,D,$e,{name:le}),k[Z]=$e,W}},function(e,n,r){var o=r(95).IteratorPrototype,s=r(73),u=r(14),d=r(96),f=r(92),g=function(){return this};e.exports=function(m,y,v,_){var w=y+" Iterator";return m.prototype=s(o,{next:u(+!_,v)}),d(m,w,!1,!0),f[w]=g,m}},function(e,n,r){var o,s,u,d=r(10),f=r(24),g=r(23),m=r(73),y=r(85),v=r(51),_=r(37),w=r(39),x=_("iterator"),k=!1;[].keys&&("next"in(u=[].keys())?(s=y(y(u)))!==Object.prototype&&(o=s):k=!0),!g(o)||d(function(){var S={};return o[x].call(S)!==S})?o={}:w&&(o=m(o)),f(o[x])||v(o,x,function(){return this}),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:k}},function(e,n,r){var o=r(48).f,s=r(42),u=r(37)("toStringTag");e.exports=function(d,f,g){d&&!g&&(d=d.prototype),d&&!s(d,u)&&o(d,u,{configurable:!0,value:f})}},function(e){e.exports=function(n,r){return{value:n,done:r}}},function(e,n,r){var o=r(83),s=r(51),u=r(99);o||s(Object.prototype,"toString",u,{unsafe:!0})},function(e,n,r){var o=r(83),s=r(82);e.exports=o?{}.toString:function(){return"[object "+s(this)+"]"}},function(e,n,r){r(101)},function(e,n,r){r(102)("Map",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},r(120))},function(e,n,r){var o=r(6),s=r(7),u=r(17),d=r(71),f=r(51),g=r(103),m=r(110),y=r(117),v=r(24),_=r(20),w=r(23),x=r(10),k=r(118),S=r(96),M=r(119);e.exports=function(E,P,T){var D=E.indexOf("Map")!==-1,F=E.indexOf("Weak")!==-1,I=D?"set":"add",N=s[E],q=N&&N.prototype,Y=N,Z={},j=function(W){var H=u(q[W]);f(q,W,W=="add"?function(X){return H(this,X===0?0:X),this}:W=="delete"?function(X){return!(F&&!w(X))&&H(this,X===0?0:X)}:W=="get"?function(X){return F&&!w(X)?void 0:H(this,X===0?0:X)}:W=="has"?function(X){return!(F&&!w(X))&&H(this,X===0?0:X)}:function(X,Q){return H(this,X===0?0:X,Q),this})};if(d(E,!v(N)||!(F||q.forEach&&!x(function(){new N().entries().next()}))))Y=T.getConstructor(P,E,D,I),g.enable();else if(d(E,!0)){var ne=new Y,le=ne[I](F?{}:-0,1)!=ne,J=x(function(){ne.has(1)}),O=k(function(W){new N(W)}),U=!F&&x(function(){for(var W=new N,H=5;H--;)W[I](H,H);return!W.has(-0)});O||((Y=P(function(W,H){y(W,q);var X=M(new N,W,Y);return _(H)||m(H,X[I],{that:X,AS_ENTRIES:D}),X})).prototype=q,q.constructor=Y),(J||U)&&(j("delete"),j("has"),D&&j("get")),(U||le)&&j(I),F&&q.clear&&delete q.clear}return Z[E]=Y,o({global:!0,constructor:!0,forced:Y!=N},Z),S(Y,E),F||T.setStrong(Y,E,D),Y}},function(e,n,r){var o=r(6),s=r(17),u=r(58),d=r(23),f=r(42),g=r(48).f,m=r(61),y=r(104),v=r(107),_=r(44),w=r(109),x=!1,k=_("meta"),S=0,M=function(P){g(P,k,{value:{objectID:"O"+S++,weakData:{}}})},E=e.exports={enable:function(){E.enable=function(){},x=!0;var P=m.f,T=s([].splice),D={};D[k]=1,P(D).length&&(m.f=function(F){for(var I=P(F),N=0,q=I.length;N<q;N++)if(I[N]===k){T(I,N,1);break}return I},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:y.f}))},fastKey:function(P,T){if(!d(P))return _typeof$1(P)=="symbol"?P:(typeof P=="string"?"S":"P")+P;if(!f(P,k)){if(!v(P))return"F";if(!T)return"E";M(P)}return P[k].objectID},getWeakData:function(P,T){if(!f(P,k)){if(!v(P))return!0;if(!T)return!1;M(P)}return P[k].weakData},onFreeze:function(P){return w&&x&&v(P)&&!f(P,k)&&M(P),P}};u[k]=!0},function(e,n,r){var o=r(18),s=r(15),u=r(61).f,d=r(105),f=(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(g){return f&&o(g)=="Window"?function(m){try{return u(m)}catch{return d(f)}}(g):u(s(g))}},function(e,n,r){var o=r(64),s=r(67),u=r(106),d=Array,f=Math.max;e.exports=function(g,m,y){for(var v=s(g),_=o(m,v),w=o(y===void 0?v:y,v),x=d(f(w-_,0)),k=0;_<w;_++,k++)u(x,k,g[_]);return x.length=k,x}},function(e,n,r){var o=r(21),s=r(48),u=r(14);e.exports=function(d,f,g){var m=o(f);m in d?s.f(d,m,u(0,g)):d[m]=g}},function(e,n,r){var o=r(10),s=r(23),u=r(18),d=r(108),f=Object.isExtensible,g=o(function(){});e.exports=g||d?function(m){return!!s(m)&&(!d||u(m)!="ArrayBuffer")&&(!f||f(m))}:f},function(e,n,r){var o=r(10);e.exports=o(function(){if(typeof ArrayBuffer=="function"){var s=new ArrayBuffer(8);Object.isExtensible(s)&&Object.defineProperty(s,"a",{value:8})}})},function(e,n,r){var o=r(10);e.exports=!o(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,n,r){var o=r(111),s=r(11),u=r(50),d=r(35),f=r(113),g=r(67),m=r(28),y=r(114),v=r(115),_=r(116),w=TypeError,x=function(S,M){this.stopped=S,this.result=M},k=x.prototype;e.exports=function(S,M,E){var P,T,D,F,I,N,q,Y=E&&E.that,Z=!(!E||!E.AS_ENTRIES),j=!(!E||!E.IS_RECORD),ne=!(!E||!E.IS_ITERATOR),le=!(!E||!E.INTERRUPTED),J=o(M,Y),O=function(W){return P&&_(P,"normal",W),new x(!0,W)},U=function(W){return Z?(u(W),le?J(W[0],W[1],O):J(W[0],W[1])):le?J(W,O):J(W)};if(j)P=S.iterator;else if(ne)P=S;else{if(!(T=v(S)))throw w(d(S)+" is not iterable");if(f(T)){for(D=0,F=g(S);F>D;D++)if((I=U(S[D]))&&m(k,I))return I;return new x(!1)}P=y(S,T)}for(N=j?S.next:P.next;!(q=s(N,P)).done;){try{I=U(q.value)}catch(W){_(P,"throw",W)}if(_typeof$1(I)=="object"&&I&&m(k,I))return I}return new x(!1)}},function(e,n,r){var o=r(112),s=r(34),u=r(12),d=o(o.bind);e.exports=function(f,g){return s(f),g===void 0?f:u?d(f,g):function(){return f.apply(g,arguments)}}},function(e,n,r){var o=r(18),s=r(17);e.exports=function(u){if(o(u)==="Function")return s(u)}},function(e,n,r){var o=r(37),s=r(92),u=o("iterator"),d=Array.prototype;e.exports=function(f){return f!==void 0&&(s.Array===f||d[u]===f)}},function(e,n,r){var o=r(11),s=r(34),u=r(50),d=r(35),f=r(115),g=TypeError;e.exports=function(m,y){var v=arguments.length<2?f(m):y;if(s(v))return u(o(v,m));throw g(d(m)+" is not iterable")}},function(e,n,r){var o=r(82),s=r(33),u=r(20),d=r(92),f=r(37)("iterator");e.exports=function(g){if(!u(g))return s(g,f)||s(g,"@@iterator")||d[o(g)]}},function(e,n,r){var o=r(11),s=r(50),u=r(33);e.exports=function(d,f,g){var m,y;s(d);try{if(!(m=u(d,"return"))){if(f==="throw")throw g;return g}m=o(m,d)}catch(v){y=!0,m=v}if(f==="throw")throw g;if(y)throw m;return s(m),g}},function(e,n,r){var o=r(28),s=TypeError;e.exports=function(u,d){if(o(d,u))return u;throw s("Incorrect invocation")}},function(e,n,r){var o=r(37)("iterator"),s=!1;try{var u=0,d={next:function(){return{done:!!u++}},return:function(){s=!0}};d[o]=function(){return this},Array.from(d,function(){throw 2})}catch{}e.exports=function(f,g){if(!g&&!s)return!1;var m=!1;try{var y={};y[o]=function(){return{next:function(){return{done:m=!0}}}},f(y)}catch{}return m}},function(e,n,r){var o=r(24),s=r(23),u=r(87);e.exports=function(d,f,g){var m,y;return u&&o(m=f.constructor)&&m!==g&&s(y=m.prototype)&&y!==g.prototype&&u(d,y),d}},function(e,n,r){var o=r(73),s=r(84),u=r(121),d=r(111),f=r(117),g=r(20),m=r(110),y=r(93),v=r(97),_=r(122),w=r(9),x=r(103).fastKey,k=r(55),S=k.set,M=k.getterFor;e.exports={getConstructor:function(E,P,T,D){var F=E(function(Z,j){f(Z,I),S(Z,{type:P,index:o(null),first:void 0,last:void 0,size:0}),w||(Z.size=0),g(j)||m(j,Z[D],{that:Z,AS_ENTRIES:T})}),I=F.prototype,N=M(P),q=function(Z,j,ne){var le,J,O=N(Z),U=Y(Z,j);return U?U.value=ne:(O.last=U={index:J=x(j,!0),key:j,value:ne,previous:le=O.last,next:void 0,removed:!1},O.first||(O.first=U),le&&(le.next=U),w?O.size++:Z.size++,J!=="F"&&(O.index[J]=U)),Z},Y=function(Z,j){var ne,le=N(Z),J=x(j);if(J!=="F")return le.index[J];for(ne=le.first;ne;ne=ne.next)if(ne.key==j)return ne};return u(I,{clear:function(){for(var Z=N(this),j=Z.index,ne=Z.first;ne;)ne.removed=!0,ne.previous&&(ne.previous=ne.previous.next=void 0),delete j[ne.index],ne=ne.next;Z.first=Z.last=void 0,w?Z.size=0:this.size=0},delete:function(Z){var j=this,ne=N(j),le=Y(j,Z);if(le){var J=le.next,O=le.previous;delete ne.index[le.index],le.removed=!0,O&&(O.next=J),J&&(J.previous=O),ne.first==le&&(ne.first=J),ne.last==le&&(ne.last=O),w?ne.size--:j.size--}return!!le},forEach:function(Z){for(var j,ne=N(this),le=d(Z,arguments.length>1?arguments[1]:void 0);j=j?j.next:ne.first;)for(le(j.value,j.key,this);j&&j.removed;)j=j.previous},has:function(Z){return!!Y(this,Z)}}),u(I,T?{get:function(Z){var j=Y(this,Z);return j&&j.value},set:function(Z,j){return q(this,Z===0?0:Z,j)}}:{add:function(Z){return q(this,Z=Z===0?0:Z,Z)}}),w&&s(I,"size",{configurable:!0,get:function(){return N(this).size}}),F},setStrong:function(E,P,T){var D=P+" Iterator",F=M(P),I=M(D);y(E,P,function(N,q){S(this,{type:D,target:N,state:F(N),kind:q,last:void 0})},function(){for(var N=I(this),q=N.kind,Y=N.last;Y&&Y.removed;)Y=Y.previous;return N.target&&(N.last=Y=Y?Y.next:N.state.first)?v(q=="keys"?Y.key:q=="values"?Y.value:[Y.key,Y.value],!1):(N.target=void 0,v(void 0,!0))},T?"entries":"values",!T,!0),_(P)}}},function(e,n,r){var o=r(51);e.exports=function(s,u,d){for(var f in u)o(s,f,u[f],d);return s}},function(e,n,r){var o=r(27),s=r(84),u=r(37),d=r(9),f=u("species");e.exports=function(g){var m=o(g);d&&m&&!m[f]&&s(m,f,{configurable:!0,get:function(){return this}})}},function(e,n,r){r(124)},function(e,n,r){r(102)("Set",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},r(120))},function(e,n,r){var o,s=r(39),u=r(6),d=r(7),f=r(27),g=r(17),m=r(10),y=r(44),v=r(24),_=r(126),w=r(20),x=r(23),k=r(26),S=r(110),M=r(50),E=r(82),P=r(42),T=r(106),D=r(47),F=r(67),I=r(127),N=r(128),q=r(130),Y=r(131),Z=r(132),j=r(133),ne=d.Object,le=d.Array,J=d.Date,O=d.Error,U=d.EvalError,W=d.RangeError,H=d.ReferenceError,X=d.SyntaxError,Q=d.TypeError,fe=d.URIError,Se=d.PerformanceMark,Pe=d.WebAssembly,$e=Pe&&Pe.CompileError||O,Ie=Pe&&Pe.LinkError||O,Ne=Pe&&Pe.RuntimeError||O,Be=f("DOMException"),be=q.Map,Ve=q.has,De=q.get,ve=q.set,ye=Y.Set,we=Y.add,ke=f("Object","keys"),Me=g([].push),Le=g((!0).valueOf),Fe=g(1 .valueOf),ze=g("".valueOf),te=g(J.prototype.getTime),oe=y("structuredClone"),_e="DataCloneError",Ce="Transferring",Ee=function(Qe){return!m(function(){var rt=new d.Set([7]),dt=Qe(rt),qe=Qe(ne(7));return dt==rt||!dt.has(7)||_typeof$1(qe)!="object"||qe!=7})&&Qe},Te=function(Qe,rt){return!m(function(){var dt=new rt,qe=Qe({a:dt,b:dt});return!(qe&&qe.a===qe.b&&qe.a instanceof rt&&qe.a.stack===dt.stack)})},Re=d.structuredClone,Oe=s||!Te(Re,O)||!Te(Re,Be)||(o=Re,!!m(function(){var Qe=o(new d.AggregateError([1],oe,{cause:3}));return Qe.name!="AggregateError"||Qe.errors[0]!=1||Qe.message!=oe||Qe.cause!=3})),je=!Re&&Ee(function(Qe){return new Se(oe,{detail:Qe}).detail}),We=Ee(Re)||je,Ze=function(Qe){throw new Be("Uncloneable type: "+Qe,_e)},Xe=function(Qe,rt){throw new Be((rt||"Cloning")+" of "+Qe+" cannot be properly polyfilled in this engine",_e)},Ge=function(Qe,rt){if(k(Qe)&&Ze("Symbol"),!x(Qe))return Qe;if(rt){if(Ve(rt,Qe))return De(rt,Qe)}else rt=new be;var dt,qe,He,Ke,ot,at,et,Je,nt,it,ht,lt=E(Qe),ft=!1;switch(lt){case"Array":He=le(F(Qe)),ft=!0;break;case"Object":He={},ft=!0;break;case"Map":He=new be,ft=!0;break;case"Set":He=new ye,ft=!0;break;case"RegExp":He=new RegExp(Qe.source,N(Qe));break;case"Error":switch(qe=Qe.name){case"AggregateError":He=f("AggregateError")([]);break;case"EvalError":He=U();break;case"RangeError":He=W();break;case"ReferenceError":He=H();break;case"SyntaxError":He=X();break;case"TypeError":He=Q();break;case"URIError":He=fe();break;case"CompileError":He=$e();break;case"LinkError":He=Ie();break;case"RuntimeError":He=Ne();break;default:He=O()}ft=!0;break;case"DOMException":He=new Be(Qe.message,Qe.name),ft=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":dt=d[lt],x(dt)||Xe(lt),He=new dt(Ge(Qe.buffer,rt),Qe.byteOffset,lt==="DataView"?Qe.byteLength:Qe.length);break;case"DOMQuad":try{He=new DOMQuad(Ge(Qe.p1,rt),Ge(Qe.p2,rt),Ge(Qe.p3,rt),Ge(Qe.p4,rt))}catch{We?He=We(Qe):Xe(lt)}break;case"FileList":if(Ke=function(){var mt;try{mt=new d.DataTransfer}catch{try{mt=new d.ClipboardEvent("").clipboardData}catch{}}return mt&&mt.items&&mt.files?mt:null}()){for(ot=0,at=F(Qe);ot<at;ot++)Ke.items.add(Ge(Qe[ot],rt));He=Ke.files}else We?He=We(Qe):Xe(lt);break;case"ImageData":try{He=new ImageData(Ge(Qe.data,rt),Qe.width,Qe.height,{colorSpace:Qe.colorSpace})}catch{We?He=We(Qe):Xe(lt)}break;default:if(We)He=We(Qe);else switch(lt){case"BigInt":He=ne(Qe.valueOf());break;case"Boolean":He=ne(Le(Qe));break;case"Number":He=ne(Fe(Qe));break;case"String":He=ne(ze(Qe));break;case"Date":He=new J(te(Qe));break;case"ArrayBuffer":(dt=d.DataView)||typeof Qe.slice=="function"||Xe(lt);try{if(typeof Qe.slice!="function"||Qe.resizable)for(at=Qe.byteLength,ht=("maxByteLength"in Qe)?{maxByteLength:Qe.maxByteLength}:void 0,He=new ArrayBuffer(at,ht),nt=new dt(Qe),it=new dt(He),ot=0;ot<at;ot++)it.setUint8(ot,nt.getUint8(ot));else He=Qe.slice(0)}catch{throw new Be("ArrayBuffer is detached",_e)}break;case"SharedArrayBuffer":He=Qe;break;case"Blob":try{He=Qe.slice(0,Qe.size,Qe.type)}catch{Xe(lt)}break;case"DOMPoint":case"DOMPointReadOnly":dt=d[lt];try{He=dt.fromPoint?dt.fromPoint(Qe):new dt(Qe.x,Qe.y,Qe.z,Qe.w)}catch{Xe(lt)}break;case"DOMRect":case"DOMRectReadOnly":dt=d[lt];try{He=dt.fromRect?dt.fromRect(Qe):new dt(Qe.x,Qe.y,Qe.width,Qe.height)}catch{Xe(lt)}break;case"DOMMatrix":case"DOMMatrixReadOnly":dt=d[lt];try{He=dt.fromMatrix?dt.fromMatrix(Qe):new dt(Qe)}catch{Xe(lt)}break;case"AudioData":case"VideoFrame":v(Qe.clone)||Xe(lt);try{He=Qe.clone()}catch{Ze(lt)}break;case"File":try{He=new File([Qe],Qe.name,Qe)}catch{Xe(lt)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Xe(lt);default:Ze(lt)}}if(ve(rt,Qe,He),ft)switch(lt){case"Array":case"Object":for(et=ke(Qe),ot=0,at=F(et);ot<at;ot++)Je=et[ot],T(He,Je,Ge(Qe[Je],rt));break;case"Map":Qe.forEach(function(mt,Ct){ve(He,Ge(Ct,rt),Ge(mt,rt))});break;case"Set":Qe.forEach(function(mt){we(He,Ge(mt,rt))});break;case"Error":D(He,"message",Ge(Qe.message,rt)),P(Qe,"cause")&&D(He,"cause",Ge(Qe.cause,rt)),qe=="AggregateError"&&(He.errors=Ge(Qe.errors,rt));case"DOMException":Z&&D(He,"stack",Ge(Qe.stack,rt))}return He};u({global:!0,enumerable:!0,sham:!j,forced:Oe},{structuredClone:function(Qe){var rt,dt=I(arguments.length,1)>1&&!w(arguments[1])?M(arguments[1]):void 0,qe=dt?dt.transfer:void 0;return qe!==void 0&&function(He,Ke){if(!x(He))throw Q("Transfer option cannot be converted to a sequence");var ot=[];S(He,function(mt){Me(ot,M(mt))});var at,et,Je,nt,it,ht,lt=0,ft=F(ot);if(j)for(nt=Re(ot,{transfer:ot});lt<ft;)ve(Ke,ot[lt],nt[lt++]);else for(;lt<ft;){if(at=ot[lt++],Ve(Ke,at))throw new Be("Duplicate transferable",_e);switch(et=E(at)){case"ImageBitmap":Je=d.OffscreenCanvas,_(Je)||Xe(et,Ce);try{(ht=new Je(at.width,at.height)).getContext("bitmaprenderer").transferFromImageBitmap(at),it=ht.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":v(at.clone)&&v(at.close)||Xe(et,Ce);try{it=at.clone(),at.close()}catch{}break;case"ArrayBuffer":v(at.transfer)||Xe(et,Ce),it=at.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":Xe(et,Ce)}if(it===void 0)throw new Be("This object cannot be transferred: "+et,_e);ve(Ke,at,it)}}(qe,rt=new be),Ge(Qe,rt)}})},function(e,n,r){var o=r(17),s=r(10),u=r(24),d=r(82),f=r(27),g=r(54),m=function(){},y=[],v=f("Reflect","construct"),_=/^\s*(?:class|function)\b/,w=o(_.exec),x=!_.exec(m),k=function(M){if(!u(M))return!1;try{return v(m,y,M),!0}catch{return!1}},S=function(M){if(!u(M))return!1;switch(d(M)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return x||!!w(_,g(M))}catch{return!0}};S.sham=!0,e.exports=!v||s(function(){var M;return k(k.call)||!k(Object)||!k(function(){M=!0})||M})?S:k},function(e){var n=TypeError;e.exports=function(r,o){if(r<o)throw n("Not enough arguments");return r}},function(e,n,r){var o=r(11),s=r(42),u=r(28),d=r(129),f=RegExp.prototype;e.exports=function(g){var m=g.flags;return m!==void 0||"flags"in f||s(g,"flags")||!u(f,g)?m:o(d,g)}},function(e,n,r){var o=r(50);e.exports=function(){var s=o(this),u="";return s.hasIndices&&(u+="d"),s.global&&(u+="g"),s.ignoreCase&&(u+="i"),s.multiline&&(u+="m"),s.dotAll&&(u+="s"),s.unicode&&(u+="u"),s.unicodeSets&&(u+="v"),s.sticky&&(u+="y"),u}},function(e,n,r){var o=r(17),s=Map.prototype;e.exports={Map,set:o(s.set),get:o(s.get),has:o(s.has),remove:o(s.delete),proto:s}},function(e,n,r){var o=r(17),s=Set.prototype;e.exports={Set,add:o(s.add),has:o(s.has),remove:o(s.delete),proto:s,$has:s.has,$keys:s.keys}},function(e,n,r){var o=r(10),s=r(14);e.exports=!o(function(){var u=Error("a");return!("stack"in u)||(Object.defineProperty(u,"stack",s(1,7)),u.stack!==7)})},function(e,n,r){var o=r(7),s=r(10),u=r(31),d=r(134),f=r(135),g=r(136),m=o.structuredClone;e.exports=!!m&&!s(function(){if(f&&u>92||g&&u>94||d&&u>97)return!1;var y=new ArrayBuffer(8),v=m(y,{transfer:[y]});return y.byteLength!=0||v.byteLength!=8})},function(e,n,r){var o=r(135),s=r(136);e.exports=!o&&!s&&(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&(typeof document>"u"?"undefined":_typeof$1(document))=="object"},function(e){e.exports=(typeof Deno>"u"?"undefined":_typeof$1(Deno))=="object"&&Deno&&_typeof$1(Deno.version)=="object"},function(e,n,r){var o=r(18);e.exports=typeof process<"u"&&o(process)=="process"},function(e,n,r){var o=r(7);e.exports=o},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(139),_display_utils=__w_pdfjs_require__(142),_font_loader=__w_pdfjs_require__(145),_canvas=__w_pdfjs_require__(146),_worker_options=__w_pdfjs_require__(149),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(150),_metadata=__w_pdfjs_require__(151),_optional_content_config=__w_pdfjs_require__(152),_transport_stream=__w_pdfjs_require__(153),_xfa_text=__w_pdfjs_require__(154);function _classPrivateMethodInitSpec(e,n){_checkPrivateRedeclaration(e,n),n.add(e)}function _classPrivateFieldInitSpec$1(e,n,r){_checkPrivateRedeclaration(e,n),n.set(e,r)}function _checkPrivateRedeclaration(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,n){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,n,"get"))}function _classApplyDescriptorGet(e,n){return n.get?n.get.call(e):n.value}function _classPrivateMethodGet(e,n,r){if(!n.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _classPrivateFieldSet(e,n,r){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,n,"set"),r),r}function _classExtractFieldDescriptor(e,n,r){if(!n.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return n.get(e)}function _classApplyDescriptorSet(e,n,r){if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){var _w_pdfjs_require__=__w_pdfjs_require__(155),NodeCanvasFactory=_w_pdfjs_require__.NodeCanvasFactory,NodeCMapReaderFactory=_w_pdfjs_require__.NodeCMapReaderFactory,NodeFilterFactory=_w_pdfjs_require__.NodeFilterFactory,NodeStandardFontDataFactory=_w_pdfjs_require__.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}if(_is_node.isNodeJS){var _w_pdfjs_require__2=__w_pdfjs_require__(156),PDFNodeStream=_w_pdfjs_require__2.PDFNodeStream;createPDFNetworkStream=function(e){return new PDFNodeStream(e)}}else{var _w_pdfjs_require__3=__w_pdfjs_require__(159),PDFNetworkStream=_w_pdfjs_require__3.PDFNetworkStream,_w_pdfjs_require__4=__w_pdfjs_require__(160),PDFFetchStream=_w_pdfjs_require__4.PDFFetchStream;createPDFNetworkStream=function(e){return(0,_display_utils.isValidFetchUrl)(e.url)?new PDFFetchStream(e):new PDFNetworkStream(e)}}function getDocument(e){var n,r;if(typeof e=="string"||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),_typeof$1(e)!=="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");var o=new PDFDocumentLoadingTask,s=o.docId,u=e.url?getUrlProp(e.url):null,d=e.data?getDataProp(e.data):null,f=e.httpHeaders||null,g=e.withCredentials===!0,m=(n=e.password)!==null&&n!==void 0?n:null,y=e.range instanceof PDFDataRangeTransport?e.range:null,v=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,_=e.worker instanceof PDFWorker?e.worker:null,w=e.verbosity,x=typeof e.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,k=typeof e.cMapUrl=="string"?e.cMapUrl:null,S=e.cMapPacked!==!1,M=e.CMapReaderFactory||DefaultCMapReaderFactory,E=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,P=e.StandardFontDataFactory||DefaultStandardFontDataFactory,T=e.stopAtErrors!==!0,D=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,F=e.isEvalSupported!==!1,I=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!_is_node.isNodeJS,N=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,q=typeof e.disableFontFace=="boolean"?e.disableFontFace:_is_node.isNodeJS,Y=e.fontExtraProperties===!0,Z=e.enableXfa===!0,j=e.ownerDocument||globalThis.document,ne=e.disableRange===!0,le=e.disableStream===!0,J=e.disableAutoFetch===!0,O=e.pdfBug===!0,U=y?y.length:(r=e.length)!==null&&r!==void 0?r:NaN,W=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!_is_node.isNodeJS&&!q,H=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:M===_display_utils.DOMCMapReaderFactory&&P===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(k,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(E,document.baseURI),X=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:j}),Q=e.filterFactory||new DefaultFilterFactory({docId:s,ownerDocument:j});(0,_util.setVerbosityLevel)(w);var fe={canvasFactory:X,filterFactory:Q};if(H||(fe.cMapReaderFactory=new M({baseUrl:k,isCompressed:S}),fe.standardFontDataFactory=new P({baseUrl:E})),!_){var Se={verbosity:w,port:_worker_options.GlobalWorkerOptions.workerPort};_=Se.port?PDFWorker.fromPort(Se):new PDFWorker(Se),o._worker=_}var Pe={docId:s,apiVersion:"3.5.141",data:d,password:m,disableAutoFetch:J,rangeChunkSize:v,length:U,docBaseUrl:x,enableXfa:Z,evaluatorOptions:{maxImageSize:D,disableFontFace:q,ignoreErrors:T,isEvalSupported:F,isOffscreenCanvasSupported:I,canvasMaxAreaInBytes:N,fontExtraProperties:Y,useSystemFonts:W,cMapUrl:H?k:null,standardFontDataUrl:H?E:null}},$e={ignoreErrors:T,isEvalSupported:F,disableFontFace:q,fontExtraProperties:Y,enableXfa:Z,ownerDocument:j,disableAutoFetch:J,pdfBug:O,styleElement:null};return _.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");var Ie=_fetchDocument(_,Pe),Ne=new Promise(function(Be){var be;y?be=new _transport_stream.PDFDataTransportStream({length:U,initialData:y.initialData,progressiveDone:y.progressiveDone,contentDispositionFilename:y.contentDispositionFilename,disableRange:ne,disableStream:le},y):d||(be=createPDFNetworkStream({url:u,length:U,httpHeaders:f,withCredentials:g,rangeChunkSize:v,disableRange:ne,disableStream:le})),Be(be)});return Promise.all([Ie,Ne]).then(function(Be){var be=_slicedToArray(Be,2),Ve=be[0],De=be[1];if(o.destroyed)throw new Error("Loading aborted");var ve=new _message_handler.MessageHandler(s,Ve,_.port),ye=new WorkerTransport(ve,o,De,$e,fe);o._transport=ye,ve.send("Ready",null)})}).catch(o._capability.reject),o}function _fetchDocument(e,n){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regeneratorRuntime().mark(function e(n,r){var o;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!n.destroyed){s.next=2;break}throw new Error("Worker was destroyed");case 2:return s.next=4,n.messageHandler.sendWithPromise("GetDocRequest",r,r.data?[r.data.buffer]:null);case 4:if(o=s.sent,!n.destroyed){s.next=7;break}throw new Error("Worker was destroyed");case 7:return s.abrupt("return",o);case 8:case"end":return s.stop()}},e)}))).apply(this,arguments)}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_is_node.isNodeJS&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_is_node.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(e);if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return(0,_util.stringToBytes)(e);if(_typeof$1(e)==="object"&&!isNaN(e==null?void 0:e.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}var PDFDocumentLoadingTask=function(){return _createClass(function n(){var r,o;_classCallCheck(this,n),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat((_docId2._=(r=_docId2._,o=r++,r),o)),this.destroyed=!1,this.onPassword=null,this.onProgress=null},[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.destroyed=!0,o.next=3,(r=this._transport)===null||r===void 0?void 0:r.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return o.stop()}},n,this)})),function(){return e.apply(this,arguments)})}]);var e}(),_docId2={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){return _createClass(function e(n,r){_classCallCheck(this,e);var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=n,this.initialData=r,this.progressiveDone=o,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()},[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,n){var r,o=_createForOfIteratorHelper(this._rangeListeners);try{for(o.s();!(r=o.n()).done;)(0,r.value)(e,n)}catch(s){o.e(s)}finally{o.f()}}},{key:"onDataProgress",value:function(e,n){var r=this;this._readyCapability.promise.then(function(){var o,s=_createForOfIteratorHelper(r._progressListeners);try{for(s.s();!(o=s.n()).done;)(0,o.value)(e,n)}catch(u){s.e(u)}finally{s.f()}})}},{key:"onDataProgressiveRead",value:function(e){var n=this;this._readyCapability.promise.then(function(){var r,o=_createForOfIteratorHelper(n._progressiveReadListeners);try{for(o.s();!(r=o.n()).done;)(0,r.value)(e)}catch(s){o.e(s)}finally{o.f()}})}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then(function(){var n,r=_createForOfIteratorHelper(e._progressiveDoneListeners);try{for(r.s();!(n=r.n()).done;)(0,n.value)()}catch(o){r.e(o)}finally{r.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}])}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){return _createClass(function e(n,r){_classCallCheck(this,e),this._pdfInfo=n,this._transport=r},[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"saveDocument",value:function(){return this._transport.saveDocument()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}])}();exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_tryCleanup=new WeakSet,_abortDelayedCleanup=new WeakSet,PDFPageProxy=function(){return _createClass(function n(r,o,s){_classCallCheck(this,n);var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3];_classPrivateMethodInitSpec(this,_abortDelayedCleanup),_classPrivateMethodInitSpec(this,_tryCleanup),_classPrivateFieldInitSpec$1(this,_delayedCleanupTimeout,{writable:!0,value:null}),_classPrivateFieldInitSpec$1(this,_pendingCleanup,{writable:!0,value:!1}),this._pageIndex=r,this._pageInfo=o,this._transport=s,this._stats=u?new _display_utils.StatTimer:null,this._pdfBug=u,this.commonObjs=s.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1},[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.scale,o=n.rotation,s=o===void 0?this.rotate:o,u=n.offsetX,d=u===void 0?0:u,f=n.offsetY,g=f===void 0?0:f,m=n.dontFlip,y=m!==void 0&&m;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:s,offsetX:d,offsetY:g,dontFlip:y})}},{key:"getAnnotations",value:function(){var n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).intent,r=n===void 0?"display":n,o=this._transport.getRenderingIntent(r);return this._transport.getAnnotations(this._pageIndex,o.renderingIntent)}},{key:"getJSActions",value:function(){return this._transport.getPageJSActions(this._pageIndex)}},{key:"isPureXfa",get:function(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"getXfa",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",((r=this._transport._htmlForXfa)===null||r===void 0?void 0:r.children[this._pageIndex])||null);case 1:case"end":return o.stop()}},n,this)})),function(){return e.apply(this,arguments)})},{key:"render",value:function(n){var r,o,s,u=this,d=n.canvasContext,f=n.viewport,g=n.intent,m=g===void 0?"display":g,y=n.annotationMode,v=y===void 0?_util.AnnotationMode.ENABLE:y,_=n.transform,w=_===void 0?null:_,x=n.background,k=x===void 0?null:x,S=n.optionalContentConfigPromise,M=S===void 0?null:S,E=n.annotationCanvasMap,P=E===void 0?null:E,T=n.pageColors,D=T===void 0?null:T,F=n.printAnnotationStorage,I=F===void 0?null:F;if((o=arguments[0])!==null&&o!==void 0&&o.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(s=this._stats)===null||s===void 0||s.time("Overall");var N=this._transport.getRenderingIntent(m,v,I);_classPrivateFieldSet(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),M||(M=this._transport.getOptionalContentConfig());var q=this._intentStates.get(N.cacheKey);q||(q=Object.create(null),this._intentStates.set(N.cacheKey,q)),q.streamReaderCancelTimeout&&(clearTimeout(q.streamReaderCancelTimeout),q.streamReaderCancelTimeout=null);var Y,Z=!!(N.renderingIntent&_util.RenderingIntentFlag.PRINT);q.displayReadyCapability||(q.displayReadyCapability=(0,_util.createPromiseCapability)(),q.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Y=this._stats)===null||Y===void 0||Y.time("Page Request"),this._pumpOperatorList(N));var j=function(J){var O,U;q.renderTasks.delete(ne),(u._maybeCleanupAfterRender||Z)&&_classPrivateFieldSet(u,_pendingCleanup,!0),_classPrivateMethodGet(u,_tryCleanup,_tryCleanup2).call(u,!Z),J?(ne.capability.reject(J),u._abortOperatorList({intentState:q,reason:J instanceof Error?J:new Error(J)})):ne.capability.resolve(),(O=u._stats)===null||O===void 0||O.timeEnd("Rendering"),(U=u._stats)===null||U===void 0||U.timeEnd("Overall")},ne=new InternalRenderTask({callback:j,params:{canvasContext:d,viewport:f,transform:w,background:k},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:P,operatorList:q.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Z,pdfBug:this._pdfBug,pageColors:D});((r=q).renderTasks||(r.renderTasks=new Set)).add(ne);var le=ne.task;return Promise.all([q.displayReadyCapability.promise,M]).then(function(J){var O,U=_slicedToArray(J,2),W=U[0],H=U[1];_classPrivateFieldGet(u,_pendingCleanup)?j():((O=u._stats)===null||O===void 0||O.time("Rendering"),ne.initializeGraphics({transparency:W,optionalContentConfig:H}),ne.operatorListChanged())}).catch(j),le}},{key:"getOperatorList",value:function(){var n,r,o,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=s.intent,d=u===void 0?"display":u,f=s.annotationMode,g=f===void 0?_util.AnnotationMode.ENABLE:f,m=s.printAnnotationStorage,y=m===void 0?null:m,v=this._transport.getRenderingIntent(d,g,y,!0),_=this._intentStates.get(v.cacheKey);return _||(_=Object.create(null),this._intentStates.set(v.cacheKey,_)),_.opListReadCapability||((n=Object.create(null)).operatorListChanged=function(){_.operatorList.lastChunk&&(_.opListReadCapability.resolve(_.operatorList),_.renderTasks.delete(n))},_.opListReadCapability=(0,_util.createPromiseCapability)(),((r=_).renderTasks||(r.renderTasks=new Set)).add(n),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(o=this._stats)===null||o===void 0||o.time("Page Request"),this._pumpOperatorList(v)),_.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeMarkedContent,r=n!==void 0&&n;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:r===!0},{highWaterMark:100,size:function(o){return o.items.length}})}},{key:"getTextContent",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(o){return _xfa_text.XfaText.textContent(o)});var r=this.streamTextContent(n);return new Promise(function(o,s){var u=r.getReader(),d={items:[],styles:Object.create(null)};(function f(){u.read().then(function(g){var m,y=g.value;g.done?o(d):(Object.assign(d.styles,y.styles),(m=d.items).push.apply(m,_toConsumableArray$1(y.items)),f())},s)})()})}},{key:"getStructTree",value:function(){return this._transport.getStructTree(this._pageIndex)}},{key:"_destroy",value:function(){this.destroyed=!0;var n,r=[],o=_createForOfIteratorHelper(this._intentStates.values());try{for(o.s();!(n=o.n()).done;){var s=n.value;if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability){var u,d=_createForOfIteratorHelper(s.renderTasks);try{for(d.s();!(u=d.n()).done;){var f=u.value;r.push(f.completed),f.cancel()}}catch(g){d.e(g)}finally{d.f()}}}}catch(g){o.e(g)}finally{o.f()}return this.objs.clear(),_classPrivateFieldSet(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),Promise.all(r)}},{key:"cleanup",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];_classPrivateFieldSet(this,_pendingCleanup,!0);var r=_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!1);return n&&r&&this._stats&&(this._stats=new _display_utils.StatTimer),r}},{key:"_startRenderPage",value:function(n,r){var o,s,u=this._intentStates.get(r);u&&((o=this._stats)===null||o===void 0||o.timeEnd("Page Request"),(s=u.displayReadyCapability)===null||s===void 0||s.resolve(n))}},{key:"_renderPageChunk",value:function(n,r){for(var o=0,s=n.length;o<s;o++)r.operatorList.fnArray.push(n.fnArray[o]),r.operatorList.argsArray.push(n.argsArray[o]);r.operatorList.lastChunk=n.lastChunk,r.operatorList.separateAnnots=n.separateAnnots;var u,d=_createForOfIteratorHelper(r.renderTasks);try{for(d.s();!(u=d.n()).done;)u.value.operatorListChanged()}catch(f){d.e(f)}finally{d.f()}n.lastChunk&&_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!0)}},{key:"_pumpOperatorList",value:function(n){var r=this,o=n.renderingIntent,s=n.cacheKey,u=n.annotationStorageMap,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:s,annotationStorage:u}).getReader(),f=this._intentStates.get(s);f.streamReader=d;var g=function(){d.read().then(function(m){var y=m.value;m.done?f.streamReader=null:r._transport.destroyed||(r._renderPageChunk(y,f),g())},function(m){if(f.streamReader=null,!r._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;var y,v=_createForOfIteratorHelper(f.renderTasks);try{for(v.s();!(y=v.n()).done;)y.value.operatorListChanged()}catch(_){v.e(_)}finally{v.f()}_classPrivateMethodGet(r,_tryCleanup,_tryCleanup2).call(r,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else{if(!f.opListReadCapability)throw m;f.opListReadCapability.reject(m)}}})};g()}},{key:"_abortOperatorList",value:function(n){var r=this,o=n.intentState,s=n.reason,u=n.force,d=u!==void 0&&u;if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!d){if(o.renderTasks.size>0)return;if(s instanceof _display_utils.RenderingCancelledException){var f=RENDERING_CANCELLED_TIMEOUT;return s.extraDelay>0&&s.extraDelay<1e3&&(f+=s.extraDelay),void(o.streamReaderCancelTimeout=setTimeout(function(){o.streamReaderCancelTimeout=null,r._abortOperatorList({intentState:o,reason:s,force:!0})},f))}}if(o.streamReader.cancel(new _util.AbortException(s.message)).catch(function(){}),o.streamReader=null,!this._transport.destroyed){var g,m=_createForOfIteratorHelper(this._intentStates);try{for(m.s();!(g=m.n()).done;){var y=_slicedToArray(g.value,2),v=y[0];if(y[1]===o){this._intentStates.delete(v);break}}}catch(_){m.e(_)}finally{m.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]);var e}();function _tryCleanup2(){var e=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),!_classPrivateFieldGet(this,_pendingCleanup))return!1;if(n)return _classPrivateFieldSet(this,_delayedCleanupTimeout,setTimeout(function(){_classPrivateFieldSet(e,_delayedCleanupTimeout,null),_classPrivateMethodGet(e,_tryCleanup,_tryCleanup2).call(e,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;var r,o=_createForOfIteratorHelper(this._intentStates.values());try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.renderTasks,d=s.operatorList;if(u.size>0||!d.lastChunk)return!1}}catch(f){o.e(f)}finally{o.f()}return this._intentStates.clear(),this.objs.clear(),_classPrivateFieldSet(this,_pendingCleanup,!1),!0}function _abortDelayedCleanup2(){_classPrivateFieldGet(this,_delayedCleanupTimeout)&&(clearTimeout(_classPrivateFieldGet(this,_delayedCleanupTimeout)),_classPrivateFieldSet(this,_delayedCleanupTimeout,null))}exports.PDFPageProxy=PDFPageProxy;var _listeners=new WeakMap,_deferred=new WeakMap,LoopbackPort=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_listeners,new Set),_classPrivateFieldInitSpec(this,_deferred,Promise.resolve())},[{key:"postMessage",value:function(e,n){var r=this,o={data:structuredClone(e,n?{transfer:n}:null)};_classPrivateFieldGet2(_deferred,this).then(function(){var s,u=_createForOfIteratorHelper(_classPrivateFieldGet2(_listeners,r));try{for(u.s();!(s=u.n()).done;)s.value.call(r,o)}catch(d){u.e(d)}finally{u.f()}})}},{key:"addEventListener",value:function(e,n){_classPrivateFieldGet2(_listeners,this).add(n)}},{key:"removeEventListener",value:function(e,n){_classPrivateFieldGet2(_listeners,this).delete(n)}},{key:"terminate",value:function(){_classPrivateFieldGet2(_listeners,this).clear()}}])}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if((typeof document>"u"?"undefined":_typeof$1(document))==="object"){var _document,_document$currentScri,pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,n){var r;try{if(!(r=new URL(e)).origin||r.origin==="null")return!1}catch{return!1}var o=new URL(n,r);return r.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(e){var n='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([n]))};var PDFWorker=function(){function PDFWorker(){_classCallCheck(this,PDFWorker);var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.name,r=n===void 0?null:n,o=e.port,s=o===void 0?null:o,u=e.verbosity,d=u===void 0?(0,_util.getVerbosityLevel)():u;if(s&&_workerPorts._.has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=d,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s)return _workerPorts._.set(s,this),void this._initializeFromPort(s);this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}},{key:"_initialize",value:function(){var e=this;if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var n=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));var r=new Worker(n),o=new _message_handler.MessageHandler("main","worker",r),s=function(){r.removeEventListener("error",u),o.destroy(),r.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},u=function(){e._webWorker||s()};r.addEventListener("error",u),o.on("test",function(f){r.removeEventListener("error",u),e.destroyed?s():f?(e._messageHandler=o,e._port=r,e._webWorker=r,e._readyCapability.resolve(),o.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),o.destroy(),r.terminate())}),o.on("ready",function(f){if(r.removeEventListener("error",u),e.destroyed)s();else try{d()}catch{e._setupFakeWorker()}});var d=function(){var f=new Uint8Array;o.send("test",f,[f.buffer])};return void d()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(function(n){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var r=new LoopbackPort;e._port=r;var o="fake".concat(PDFWorkerUtil.fakeWorkerId++),s=new _message_handler.MessageHandler(o+"_worker",o,r);n.setup(s,r);var u=new _message_handler.MessageHandler(o,o+"_worker",r);e._messageHandler=u,e._readyCapability.resolve(),u.send("configure",{verbosity:e.verbosity})}}).catch(function(n){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(n.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_workerPorts._.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(e){if(e==null||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _assertClassBrand(PDFWorker,this,_workerPorts)._.has(e.port)?_assertClassBrand(PDFWorker,this,_workerPorts)._.get(e.port):new PDFWorker(e)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var e;return((e=globalThis.pdfjsWorker)===null||e===void 0?void 0:e.WorkerMessageHandler)||null}catch{return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this14=this,loader=function(){var _ref22=_asyncToGenerator(_regeneratorRuntime().mark(function _callee3(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(mainWorkerMessageHandler=_this14._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context3.next=3;break}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||typeof commonjsRequire!="function"){_context3.next=6;break}return worker=eval("require")(_this14.workerSrc),_context3.abrupt("return",worker.WorkerMessageHandler);case 6:return _context3.next=8,(0,_display_utils.loadScript)(_this14.workerSrc);case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop()}},_callee3)}));return function(){return _ref22.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}])}(),_workerPorts={_:new WeakMap};exports.PDFWorker=PDFWorker;var _methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_cacheSimpleMethod=new WeakSet,WorkerTransport=function(){return _createClass(function n(r,o,s,u,d){_classCallCheck(this,n),_classPrivateMethodInitSpec(this,_cacheSimpleMethod),_classPrivateFieldInitSpec$1(this,_methodPromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec$1(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec$1(this,_pagePromises,{writable:!0,value:new Map}),this.messageHandler=r,this.loadingTask=o,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:u.ownerDocument,styleElement:u.styleElement}),this._params=u,this.canvasFactory=d.canvasFactory,this.filterFactory=d.filterFactory,this.cMapReaderFactory=d.cMapReaderFactory,this.standardFontDataFactory=d.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()},[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"getRenderingIntent",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0&&arguments[3],u=_util.RenderingIntentFlag.DISPLAY,d=null;switch(n){case"any":u=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":u=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(n))}switch(r){case _util.AnnotationMode.DISABLE:u+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:u+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:d=((u+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(r))}return s&&(u+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:u,cacheKey:"".concat(u,"_").concat(_annotation_storage.AnnotationStorage.getHash(d)),annotationStorageMap:d}}},{key:"destroy",value:function(){var n=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r,o=[],s=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());try{for(s.s();!(r=s.n()).done;){var u=r.value;o.push(u._destroy())}}catch(f){s.e(f)}finally{s.f()}_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var d=this.messageHandler.sendWithPromise("Terminate",null);return o.push(d),Promise.all(o).then(function(){n.commonObjs.clear(),n.fontLoader.clear(),_classPrivateFieldGet(n,_methodPromises).clear(),n.filterFactory.destroy(),n._networkStream&&n._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),n.messageHandler&&(n.messageHandler.destroy(),n.messageHandler=null),n.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var n=this,r=this.messageHandler,o=this.loadingTask;r.on("GetReader",function(s,u){(0,_util.assert)(n._networkStream,"GetReader - no `IPDFStream` instance available."),n._fullReader=n._networkStream.getFullReader(),n._fullReader.onProgress=function(d){n._lastProgress={loaded:d.loaded,total:d.total}},u.onPull=function(){n._fullReader.read().then(function(d){var f=d.value;d.done?u.close():((0,_util.assert)(f instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(f),1,[f]))}).catch(function(d){u.error(d)})},u.onCancel=function(d){n._fullReader.cancel(d),u.ready.catch(function(f){if(!n.destroyed)throw f})}}),r.on("ReaderHeadersReady",function(s){var u=(0,_util.createPromiseCapability)(),d=n._fullReader;return d.headersReady.then(function(){var f;d.isStreamingSupported&&d.isRangeSupported||(n._lastProgress&&((f=o.onProgress)===null||f===void 0||f.call(o,n._lastProgress)),d.onProgress=function(g){var m;(m=o.onProgress)===null||m===void 0||m.call(o,{loaded:g.loaded,total:g.total})}),u.resolve({isStreamingSupported:d.isStreamingSupported,isRangeSupported:d.isRangeSupported,contentLength:d.contentLength})},u.reject),u.promise}),r.on("GetRangeReader",function(s,u){(0,_util.assert)(n._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var d=n._networkStream.getRangeReader(s.begin,s.end);d?(u.onPull=function(){d.read().then(function(f){var g=f.value;f.done?u.close():((0,_util.assert)(g instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(g),1,[g]))}).catch(function(f){u.error(f)})},u.onCancel=function(f){d.cancel(f),u.ready.catch(function(g){if(!n.destroyed)throw g})}):u.close()}),r.on("GetDoc",function(s){var u=s.pdfInfo;n._numPages=u.numPages,n._htmlForXfa=u.htmlForXfa,delete u.htmlForXfa,o._capability.resolve(new PDFDocumentProxy(u,n))}),r.on("DocException",function(s){var u;switch(s.name){case"PasswordException":u=new _util.PasswordException(s.message,s.code);break;case"InvalidPDFException":u=new _util.InvalidPDFException(s.message);break;case"MissingPDFException":u=new _util.MissingPDFException(s.message);break;case"UnexpectedResponseException":u=new _util.UnexpectedResponseException(s.message,s.status);break;case"UnknownErrorException":u=new _util.UnknownErrorException(s.message,s.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}o._capability.reject(u)}),r.on("PasswordRequest",function(s){if(n._passwordCapability=(0,_util.createPromiseCapability)(),o.onPassword)try{o.onPassword(function(u){u instanceof Error?n._passwordCapability.reject(u):n._passwordCapability.resolve({password:u})},s.code)}catch(u){n._passwordCapability.reject(u)}else n._passwordCapability.reject(new _util.PasswordException(s.message,s.code));return n._passwordCapability.promise}),r.on("DataLoaded",function(s){var u;(u=o.onProgress)===null||u===void 0||u.call(o,{loaded:s.length,total:s.length}),n.downloadInfoCapability.resolve(s)}),r.on("StartRenderPage",function(s){n.destroyed||_classPrivateFieldGet(n,_pageCache).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),r.on("commonobj",function(s){var u,d=_slicedToArray(s,3),f=d[0],g=d[1],m=d[2];if(!n.destroyed&&!n.commonObjs.has(f))switch(g){case"Font":var y=n._params;if("error"in m){var v=m.error;(0,_util.warn)("Error during font loading: ".concat(v)),n.commonObjs.resolve(f,v);break}var _=y.pdfBug&&(u=globalThis.FontInspector)!==null&&u!==void 0&&u.enabled?function(x,k){return globalThis.FontInspector.fontAdded(x,k)}:null,w=new _font_loader.FontFaceObject(m,{isEvalSupported:y.isEvalSupported,disableFontFace:y.disableFontFace,ignoreErrors:y.ignoreErrors,inspectFont:_});n.fontLoader.bind(w).catch(function(x){return r.sendWithPromise("FontFallback",{id:f})}).finally(function(){!y.fontExtraProperties&&w.data&&(w.data=null),n.commonObjs.resolve(f,w)});break;case"FontPath":case"Image":case"Pattern":n.commonObjs.resolve(f,m);break;default:throw new Error("Got unknown common object type ".concat(g))}}),r.on("obj",function(s){var u=_slicedToArray(s,4),d=u[0],f=u[1],g=u[2],m=u[3];if(!n.destroyed){var y=_classPrivateFieldGet(n,_pageCache).get(f);if(!y.objs.has(d))switch(g){case"Image":var v;y.objs.resolve(d,m),m&&(m.bitmap?m.width*m.height*4:((v=m.data)===null||v===void 0?void 0:v.length)||0)>_util.MAX_IMAGE_SIZE_TO_CACHE&&(y._maybeCleanupAfterRender=!0);break;case"Pattern":y.objs.resolve(d,m);break;default:throw new Error("Got unknown object type ".concat(g))}}}),r.on("DocProgress",function(s){var u;n.destroyed||(u=o.onProgress)===null||u===void 0||u.call(o,{loaded:s.loaded,total:s.total})}),r.on("FetchBuiltInCMap",function(s){return n.destroyed?Promise.reject(new Error("Worker was destroyed.")):n.cMapReaderFactory?n.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),r.on("FetchStandardFontData",function(s){return n.destroyed?Promise.reject(new Error("Worker was destroyed.")):n.standardFontDataFactory?n.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"saveDocument",value:function(){var n,r,o=this;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(n=(r=this._fullReader)===null||r===void 0?void 0:r.filename)!==null&&n!==void 0?n:null}).finally(function(){o.annotationStorage.resetModified()})}},{key:"getPage",value:function(n){var r=this;if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request."));var o=n-1,s=_classPrivateFieldGet(this,_pagePromises).get(o);if(s)return s;var u=this.messageHandler.sendWithPromise("GetPage",{pageIndex:o}).then(function(d){if(r.destroyed)throw new Error("Transport destroyed");var f=new PDFPageProxy(o,d,r,r._params.pdfBug);return _classPrivateFieldGet(r,_pageCache).set(o,f),f});return _classPrivateFieldGet(this,_pagePromises).set(o,u),u}},{key:"getPageIndex",value:function(n){return _typeof$1(n)!=="object"||n===null||!Number.isInteger(n.num)||n.num<0||!Number.isInteger(n.gen)||n.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:n.num,gen:n.gen})}},{key:"getAnnotations",value:function(n,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:r})}},{key:"getFieldObjects",value:function(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"GetFieldObjects")}},{key:"hasJSActions",value:function(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"HasJSActions")}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(n){return typeof n!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}},{key:"getStructTree",value:function(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(n){return new _optional_content_config.OptionalContentConfig(n)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var n=this,r="GetMetadata",o=_classPrivateFieldGet(this,_methodPromises).get(r);if(o)return o;var s=this.messageHandler.sendWithPromise(r,null).then(function(u){var d,f,g,m;return{info:u[0],metadata:u[1]?new _metadata.Metadata(u[1]):null,contentDispositionFilename:(d=(g=n._fullReader)===null||g===void 0?void 0:g.filename)!==null&&d!==void 0?d:null,contentLength:(f=(m=n._fullReader)===null||m===void 0?void 0:m.contentLength)!==null&&f!==void 0?f:null}});return _classPrivateFieldGet(this,_methodPromises).set(r,s),s}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r,o,s,u,d=arguments;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(r=d.length>0&&d[0]!==void 0&&d[0],!this.destroyed){f.next=3;break}return f.abrupt("return");case 3:return f.next=5,this.messageHandler.sendWithPromise("Cleanup",null);case 5:o=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),f.prev=6,o.s();case 8:if((s=o.n()).done){f.next=15;break}if((u=s.value).cleanup()){f.next=13;break}throw new Error("startCleanup: Page ".concat(u.pageNumber," is currently rendering."));case 13:f.next=8;break;case 15:f.next=20;break;case 17:f.prev=17,f.t0=f.catch(6),o.e(f.t0);case 20:return f.prev=20,o.f(),f.finish(20);case 23:this.commonObjs.clear(),r||this.fontLoader.clear(),_classPrivateFieldGet(this,_methodPromises).clear(),this.filterFactory.destroy(!0);case 27:case"end":return f.stop()}},n,this,[[6,17,20,23]])})),function(){return e.apply(this,arguments)})},{key:"loadingParams",get:function(){var n=this._params,r=n.disableAutoFetch,o=n.enableXfa;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r,enableXfa:o})}}]);var e}();function _cacheSimpleMethod2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=_classPrivateFieldGet(this,_methodPromises).get(e);if(r)return r;var o=this.messageHandler.sendWithPromise(e,n);return _classPrivateFieldGet(this,_methodPromises).set(e,o),o}var _objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec$1(this,_objs,{writable:!0,value:Object.create(null)})},[{key:"get",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(n){var r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);return r.capability.promise.then(function(){return n(r.data)}),null}var o=_classPrivateFieldGet(this,_objs)[e];if(o==null||!o.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return o.data}},{key:"has",value:function(e){var n=_classPrivateFieldGet(this,_objs)[e];return(n==null?void 0:n.capability.settled)||!1}},{key:"resolve",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);r.data=n,r.capability.resolve()}},{key:"clear",value:function(){for(var e in _classPrivateFieldGet(this,_objs)){var n,r=_classPrivateFieldGet(this,_objs)[e].data;r==null||(n=r.bitmap)===null||n===void 0||n.close()}_classPrivateFieldSet(this,_objs,Object.create(null))}}])}();function _ensureObj2(e){var n=_classPrivateFieldGet(this,_objs)[e];return n||(_classPrivateFieldGet(this,_objs)[e]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap,RenderTask=function(){return _createClass(function e(n){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_internalRenderTask,null),_classPrivateFieldSet2(_internalRenderTask,this,n),this.onContinue=null},[{key:"promise",get:function(){return _classPrivateFieldGet2(_internalRenderTask,this).capability.promise}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;_classPrivateFieldGet2(_internalRenderTask,this).cancel(null,e)}},{key:"separateAnnots",get:function(){var e=_classPrivateFieldGet2(_internalRenderTask,this).operatorList.separateAnnots;if(!e)return!1;var n=_classPrivateFieldGet2(_internalRenderTask,this).annotationCanvasMap;return e.form||e.canvas&&(n==null?void 0:n.size)>0}}])}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){return _createClass(function n(r){_classCallCheck(this,n);var o=r.callback,s=r.params,u=r.objs,d=r.commonObjs,f=r.annotationCanvasMap,g=r.operatorList,m=r.pageIndex,y=r.canvasFactory,v=r.filterFactory,_=r.useRequestAnimationFrame,w=_!==void 0&&_,x=r.pdfBug,k=x!==void 0&&x,S=r.pageColors,M=S===void 0?null:S;this.callback=o,this.params=s,this.objs=u,this.commonObjs=d,this.annotationCanvasMap=f,this.operatorListIdx=null,this.operatorList=g,this._pageIndex=m,this.canvasFactory=y,this.filterFactory=v,this._pdfBug=k,this.pageColors=M,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=w===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas},[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(n){var r,o,s=n.transparency,u=s!==void 0&&s,d=n.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&(r=globalThis.StepperManager)!==null&&r!==void 0&&r.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var f=this.params,g=f.canvasContext,m=f.viewport,y=f.transform,v=f.background;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:d},this.annotationCanvasMap),this.gfx.beginDrawing({transform:y,viewport:m,transparency:u,background:v}),this.operatorListIdx=0,this.graphicsReady=!0,(o=this.graphicsReadyCallback)===null||o===void 0||o.call(this)}}},{key:"cancel",value:function(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(n=this.gfx)===null||n===void 0||n.endDrawing(this.pageColors),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas",o))}},{key:"operatorListChanged",value:function(){var n;this.graphicsReady?((n=this.stepper)===null||n===void 0||n.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var n=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){n._nextBound().catch(n._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.cancelled){r.next=2;break}return r.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback()));case 4:case"end":return r.stop()}},n,this)})),function(){return e.apply(this,arguments)})}]);var e}(),_canvasInUse={_:new WeakSet},version="3.5.141";exports.version=version;var build="be0f6ee08";exports.build=build},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var o=r(1),s=r(140),u=r(144);function d(E,P,T){f(E,P),P.set(E,T)}function f(E,P){if(P.has(E))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(E,P,T){return function(D,F,I){if(F.set)F.set.call(D,I);else{if(!F.writable)throw new TypeError("attempted to set read only private field");F.value=I}}(E,y(E,P,"set"),T),T}function m(E,P){return function(T,D){return D.get?D.get.call(T):D.value}(E,y(E,P,"get"))}function y(E,P,T){if(!P.has(E))throw new TypeError("attempted to "+T+" private field on non-instance");return P.get(E)}var v=new WeakMap,_=new WeakMap,w=new WeakSet,x=function(){return _createClass(function E(){var P,T;_classCallCheck(this,E),f(P=this,T=w),T.add(P),d(this,v,{writable:!0,value:!1}),d(this,_,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null},[{key:"getValue",value:function(E,P){var T=m(this,_).get(E);return T===void 0?P:Object.assign(P,T)}},{key:"getRawValue",value:function(E){return m(this,_).get(E)}},{key:"remove",value:function(E){if(m(this,_).delete(E),m(this,_).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){var P,T=_createForOfIteratorHelper(m(this,_).values());try{for(T.s();!(P=T.n()).done;)if(P.value instanceof s.AnnotationEditor)return}catch(D){T.e(D)}finally{T.f()}this.onAnnotationEditor(null)}}},{key:"setValue",value:function(E,P){var T=m(this,_).get(E),D=!1;if(T!==void 0)for(var F=0,I=Object.entries(P);F<I.length;F++){var N=_slicedToArray(I[F],2),q=N[0],Y=N[1];T[q]!==Y&&(D=!0,T[q]=Y)}else D=!0,m(this,_).set(E,P);D&&function(Z,j,ne){if(!j.has(Z))throw new TypeError("attempted to get private field on non-instance");return ne}(this,w,k).call(this),P instanceof s.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(P.constructor._type)}},{key:"has",value:function(E){return m(this,_).has(E)}},{key:"getAll",value:function(){return m(this,_).size>0?(0,o.objectFromMap)(m(this,_)):null}},{key:"setAll",value:function(E){for(var P=0,T=Object.entries(E);P<T.length;P++){var D=_slicedToArray(T[P],2),F=D[0],I=D[1];this.setValue(F,I)}}},{key:"size",get:function(){return m(this,_).size}},{key:"resetModified",value:function(){m(this,v)&&(g(this,v,!1),typeof this.onResetModified=="function"&&this.onResetModified())}},{key:"print",get:function(){return new M(this)}},{key:"serializable",get:function(){if(m(this,_).size===0)return null;var E,P=new Map,T=_createForOfIteratorHelper(m(this,_));try{for(T.s();!(E=T.n()).done;){var D=_slicedToArray(E.value,2),F=D[0],I=D[1],N=I instanceof s.AnnotationEditor?I.serialize():I;N&&P.set(F,N)}}catch(q){T.e(q)}finally{T.f()}return P}}],[{key:"getHash",value:function(E){if(!E)return"";var P,T=new u.MurmurHash3_64,D=_createForOfIteratorHelper(E);try{for(D.s();!(P=D.n()).done;){var F=_slicedToArray(P.value,2),I=F[0],N=F[1];T.update("".concat(I,":").concat(JSON.stringify(N)))}}catch(q){D.e(q)}finally{D.f()}return T.hexdigest()}}])}();function k(){m(this,v)||(g(this,v,!0),typeof this.onSetModified=="function"&&this.onSetModified())}n.AnnotationStorage=x;var S=new WeakMap,M=function(E){function P(T){var D;return _classCallCheck(this,P),_classPrivateFieldInitSpec(D=_callSuper(this,P),S,null),_classPrivateFieldSet2(S,D,structuredClone(T.serializable)),D}return _inherits(P,E),_createClass(P,[{key:"print",get:function(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return _classPrivateFieldGet2(S,this)}}])}(x);n.PrintAnnotationStorage=M},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var o=r(141),s=r(1),u=new WeakMap,d=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakMap,v=function(){return _createClass(function _(w){_classCallCheck(this,_),_classPrivateFieldInitSpec(this,u,this.focusin.bind(this)),_classPrivateFieldInitSpec(this,d,this.focusout.bind(this)),_classPrivateFieldInitSpec(this,f,!1),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,m,!1),_defineProperty$1(this,"_uiManager",null),_classPrivateFieldInitSpec(this,y,_._zIndex++),this.constructor===_&&(0,s.unreachable)("Cannot initialize AnnotationEditor."),this.parent=w.parent,this.id=w.id,this.width=this.height=null,this.pageIndex=w.parent.pageIndex,this.name=w.name,this.div=null,this._uiManager=w.uiManager;var x=this.parent.viewport,k=x.rotation,S=x.rawDims,M=S.pageWidth,E=S.pageHeight,P=S.pageX,T=S.pageY;this.rotation=k,this.pageDimensions=[M,E],this.pageTranslation=[P,T];var D=_slicedToArray(this.parentDimensions,2),F=D[0],I=D[1];this.x=w.x/F,this.y=w.y/I,this.isAttachedToDOM=!1},[{key:"addCommands",value:function(_){this._uiManager.addCommands(_)}},{key:"currentLayer",get:function(){return this._uiManager.currentLayer}},{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=_classPrivateFieldGet2(y,this)}},{key:"setParent",value:function(_){_!==null&&(this.pageIndex=_.pageIndex,this.pageDimensions=_.pageDimensions),this.parent=_}},{key:"focusin",value:function(_){_classPrivateFieldGet2(f,this)?_classPrivateFieldSet2(f,this,!1):this.parent.setSelected(this)}},{key:"focusout",value:function(_){var w;if(this.isAttachedToDOM){var x=_.relatedTarget;x!=null&&x.closest("#".concat(this.id))||(_.preventDefault(),(w=this.parent)!==null&&w!==void 0&&w.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.addToAnnotationStorage()}},{key:"addToAnnotationStorage",value:function(){this._uiManager.addToAnnotationStorage(this)}},{key:"dragstart",value:function(_){var w=this.parent.div.getBoundingClientRect();this.startX=_.clientX-w.x,this.startY=_.clientY-w.y,_.dataTransfer.setData("text/plain",this.id),_.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(_,w,x,k){var S=_slicedToArray(this.parentDimensions,2),M=S[0],E=S[1],P=_slicedToArray(this.screenToPageTranslation(x,k),2);x=P[0],k=P[1],this.x=(_+x)/M,this.y=(w+k)/E,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(_,w){var x=_slicedToArray(this.parentDimensions,2),k=x[0],S=x[1],M=_slicedToArray(this.screenToPageTranslation(_,w),2);_=M[0],w=M[1],this.x+=_/k,this.y+=w/S,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(_,w){switch(this.parentRotation){case 90:return[w,-_];case 180:return[-_,-w];case 270:return[-w,_];default:return[_,w]}}},{key:"parentScale",get:function(){return this._uiManager.viewParameters.realScale}},{key:"parentRotation",get:function(){return this._uiManager.viewParameters.rotation}},{key:"parentDimensions",get:function(){var _=this._uiManager.viewParameters.realScale,w=_slicedToArray(this.pageDimensions,2);return[w[0]*_,w[1]*_]}},{key:"setDims",value:function(_,w){var x=_slicedToArray(this.parentDimensions,2),k=x[0],S=x[1];this.div.style.width="".concat(100*_/k,"%"),this.div.style.height="".concat(100*w/S,"%")}},{key:"fixDims",value:function(){var _=this.div.style,w=_.height,x=_.width,k=x.endsWith("%"),S=w.endsWith("%");if(!k||!S){var M=_slicedToArray(this.parentDimensions,2),E=M[0],P=M[1];k||(_.width="".concat(100*parseFloat(x)/E,"%")),S||(_.height="".concat(100*parseFloat(w)/P,"%"))}}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet2(u,this)),this.div.addEventListener("focusout",_classPrivateFieldGet2(d,this));var _=_slicedToArray(this.getInitialTranslation(),2),w=_[0],x=_[1];return this.translate(w,x),(0,o.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"pointerdown",value:function(_){var w=s.FeatureTest.platform.isMac;_.button!==0||_.ctrlKey&&w?_.preventDefault():(_.ctrlKey&&!w||_.shiftKey||_.metaKey&&w?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet2(f,this,!0))}},{key:"getRect",value:function(_,w){var x=this.parentScale,k=_slicedToArray(this.pageDimensions,2),S=k[0],M=k[1],E=_slicedToArray(this.pageTranslation,2),P=E[0],T=E[1],D=_/x,F=w/x,I=this.x*S,N=this.y*M,q=this.width*S,Y=this.height*M;switch(this.rotation){case 0:return[I+D+P,M-N-F-Y+T,I+D+q+P,M-N-F+T];case 90:return[I+F+P,M-N+D+T,I+F+Y+P,M-N+D+q+T];case 180:return[I-D-q+P,M-N+F+T,I-D+P,M-N+F+Y+T];case 270:return[I-F-Y+P,M-N-D-q+T,I-F+P,M-N-D+T];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(_,w){var x=_slicedToArray(_,4),k=x[0],S=x[1],M=x[2],E=x[3],P=M-k,T=E-S;switch(this.rotation){case 0:return[k,w-E,P,T];case 90:return[k,w-S,T,P];case 180:return[M,w-S,P,T];case 270:return[M,w-E,T,P];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){_classPrivateFieldSet2(m,this,!0)}},{key:"disableEditMode",value:function(){_classPrivateFieldSet2(m,this,!1)}},{key:"isInEditMode",value:function(){return _classPrivateFieldGet2(m,this)}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var _;(_=this.div)===null||_===void 0||_.addEventListener("focusin",_classPrivateFieldGet2(u,this))}},{key:"serialize",value:function(){(0,s.unreachable)("An editor must be serializable")}},{key:"remove",value:function(){this.div.removeEventListener("focusin",_classPrivateFieldGet2(u,this)),this.div.removeEventListener("focusout",_classPrivateFieldGet2(d,this)),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var _;(_=this.div)===null||_===void 0||_.classList.add("selectedEditor")}},{key:"unselect",value:function(){var _;(_=this.div)===null||_===void 0||_.classList.remove("selectedEditor")}},{key:"updateParams",value:function(_,w){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return _classPrivateFieldGet2(g,this)},set:function(_){_classPrivateFieldSet2(g,this,_),_?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function(){return(0,s.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function(_,w,x){var k=new this.prototype.constructor({parent:w,id:w.getNextId(),uiManager:x});k.rotation=_.rotation;var S=_slicedToArray(k.pageDimensions,2),M=S[0],E=S[1],P=_slicedToArray(k.getRectInCurrentCoords(_.rect,E),4),T=P[0],D=P[1],F=P[2],I=P[3];return k.x=T/M,k.y=D/E,k.width=F/M,k.height=I/E,k}}])}();_defineProperty$1(v,"_colorManager",new o.ColorManager),_defineProperty$1(v,"_zIndex",1),n.AnnotationEditor=v},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=function(qe,He,Ke){var ot,at=_createForOfIteratorHelper(Ke);try{for(at.s();!(ot=at.n()).done;){var et=ot.value;He.addEventListener(et,qe[et].bind(qe))}}catch(Je){at.e(Je)}finally{at.f()}},n.opacityToHex=function(qe){return Math.round(Math.min(255,Math.max(1,255*qe))).toString(16).padStart(2,"0")};var o=r(1),s=r(142);function u(qe,He,Ke){y(qe,He),He.set(qe,Ke)}function d(qe,He){return function(Ke,ot){return ot.get?ot.get.call(Ke):ot.value}(qe,g(qe,He,"get"))}function f(qe,He,Ke){return function(ot,at,et){if(at.set)at.set.call(ot,et);else{if(!at.writable)throw new TypeError("attempted to set read only private field");at.value=et}}(qe,g(qe,He,"set"),Ke),Ke}function g(qe,He,Ke){if(!He.has(qe))throw new TypeError("attempted to "+Ke+" private field on non-instance");return He.get(qe)}function m(qe,He){y(qe,He),He.add(qe)}function y(qe,He){if(He.has(qe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(qe,He,Ke){if(!He.has(qe))throw new TypeError("attempted to get private field on non-instance");return Ke}var _=new WeakMap,w=function(){return _createClass(function qe(){_classCallCheck(this,qe),_classPrivateFieldInitSpec(this,_,0)},[{key:"getId",value:function(){var qe,He;return"".concat(o.AnnotationEditorPrefix).concat((_classPrivateFieldSet2(_,this,(qe=_classPrivateFieldGet2(_,this),He=qe++,qe)),He))}}])}(),x=new WeakMap,k=new WeakMap,S=new WeakMap,M=new WeakMap,E=function(){return _createClass(function qe(){_classCallCheck(this,qe),_classPrivateFieldInitSpec(this,x,[]),_classPrivateFieldInitSpec(this,k,!1),_classPrivateFieldInitSpec(this,S,void 0),_classPrivateFieldInitSpec(this,M,-1),_classPrivateFieldSet2(S,this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:128)},[{key:"add",value:function(qe){var He=qe.cmd,Ke=qe.undo,ot=qe.mustExec,at=qe.type,et=at===void 0?NaN:at,Je=qe.overwriteIfSameType,nt=Je!==void 0&&Je,it=qe.keepUndo,ht=it!==void 0&&it;if(ot&&He(),!_classPrivateFieldGet2(k,this)){var lt={cmd:He,undo:Ke,type:et};if(_classPrivateFieldGet2(M,this)===-1)return _classPrivateFieldGet2(x,this).length>0&&(_classPrivateFieldGet2(x,this).length=0),_classPrivateFieldSet2(M,this,0),void _classPrivateFieldGet2(x,this).push(lt);if(nt&&_classPrivateFieldGet2(x,this)[_classPrivateFieldGet2(M,this)].type===et)return ht&&(lt.undo=_classPrivateFieldGet2(x,this)[_classPrivateFieldGet2(M,this)].undo),void(_classPrivateFieldGet2(x,this)[_classPrivateFieldGet2(M,this)]=lt);var ft=_classPrivateFieldGet2(M,this)+1;ft===_classPrivateFieldGet2(S,this)?_classPrivateFieldGet2(x,this).splice(0,1):(_classPrivateFieldSet2(M,this,ft),ft<_classPrivateFieldGet2(x,this).length&&_classPrivateFieldGet2(x,this).splice(ft)),_classPrivateFieldGet2(x,this).push(lt)}}},{key:"undo",value:function(){_classPrivateFieldGet2(M,this)!==-1&&(_classPrivateFieldSet2(k,this,!0),_classPrivateFieldGet2(x,this)[_classPrivateFieldGet2(M,this)].undo(),_classPrivateFieldSet2(k,this,!1),_classPrivateFieldSet2(M,this,_classPrivateFieldGet2(M,this)-1))}},{key:"redo",value:function(){_classPrivateFieldGet2(M,this)<_classPrivateFieldGet2(x,this).length-1&&(_classPrivateFieldSet2(M,this,_classPrivateFieldGet2(M,this)+1),_classPrivateFieldSet2(k,this,!0),_classPrivateFieldGet2(x,this)[_classPrivateFieldGet2(M,this)].cmd(),_classPrivateFieldSet2(k,this,!1))}},{key:"hasSomethingToUndo",value:function(){return _classPrivateFieldGet2(M,this)!==-1}},{key:"hasSomethingToRedo",value:function(){return _classPrivateFieldGet2(M,this)<_classPrivateFieldGet2(x,this).length-1}},{key:"destroy",value:function(){_classPrivateFieldSet2(x,this,null)}}])}();n.CommandManager=E;var P=new WeakSet,T=function(){return _createClass(function qe(He){_classCallCheck(this,qe),m(this,P),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var Ke,ot=o.FeatureTest.platform.isMac,at=_createForOfIteratorHelper(He);try{for(at.s();!(Ke=at.n()).done;){var et,Je=_slicedToArray(Ke.value,2),nt=Je[0],it=Je[1],ht=_createForOfIteratorHelper(nt);try{for(ht.s();!(et=ht.n()).done;){var lt=et.value,ft=lt.startsWith("mac+");ot&&ft?(this.callbacks.set(lt.slice(4),it),this.allKeys.add(lt.split("+").at(-1))):ot||ft||(this.callbacks.set(lt,it),this.allKeys.add(lt.split("+").at(-1)))}}catch(mt){ht.e(mt)}finally{ht.f()}}}catch(mt){at.e(mt)}finally{at.f()}},[{key:"exec",value:function(qe,He){if(this.allKeys.has(He.key)){var Ke=this.callbacks.get(v(this,P,D).call(this,He));Ke&&(Ke.bind(qe)(),He.stopPropagation(),He.preventDefault())}}}])}();function D(qe){qe.altKey&&this.buffer.push("alt"),qe.ctrlKey&&this.buffer.push("ctrl"),qe.metaKey&&this.buffer.push("meta"),qe.shiftKey&&this.buffer.push("shift"),this.buffer.push(qe.key);var He=this.buffer.join("+");return this.buffer.length=0,He}n.KeyboardManager=T;var F=function(){function qe(){_classCallCheck(this,qe)}return _createClass(qe,[{key:"_colors",get:function(){var He=new Map([["CanvasText",null],["Canvas",null]]);return(0,s.getColorValues)(He),(0,o.shadow)(this,"_colors",He)}},{key:"convert",value:function(He){var Ke=(0,s.getRGB)(He);if(!window.matchMedia("(forced-colors: active)").matches)return Ke;var ot,at=_createForOfIteratorHelper(this._colors);try{for(at.s();!(ot=at.n()).done;){var et=_slicedToArray(ot.value,2),Je=et[0];if(et[1].every(function(nt,it){return nt===Ke[it]}))return qe._colorsMapping.get(Je)}}catch(nt){at.e(nt)}finally{at.f()}return Ke}},{key:"getHexCode",value:function(He){var Ke,ot=this._colors.get(He);return ot?(Ke=o.Util).makeHexColor.apply(Ke,_toConsumableArray$1(ot)):He}}])}();_defineProperty$1(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),n.ColorManager=F;var I,N,q,Y=new WeakMap,Z=new WeakMap,j=new WeakMap,ne=new WeakMap,le=new WeakMap,J=new WeakMap,O=new WeakMap,U=new WeakMap,W=new WeakMap,H=new WeakMap,X=new WeakMap,Q=new WeakMap,fe=new WeakMap,Se=new WeakMap,Pe=new WeakMap,$e=new WeakMap,Ie=new WeakMap,Ne=new WeakMap,Be=new WeakMap,be=new WeakMap,Ve=new WeakMap,De=new WeakMap,ve=new WeakMap,ye=new WeakSet,we=new WeakSet,ke=new WeakSet,Me=new WeakSet,Le=new WeakSet,Fe=new WeakSet,ze=new WeakSet,te=new WeakSet,oe=new WeakSet,_e=new WeakSet,Ce=new WeakSet,Ee=function(){function qe(He,Ke,ot){_classCallCheck(this,qe),m(this,Ce),m(this,_e),m(this,oe),m(this,te),m(this,ze),m(this,Fe),m(this,Le),m(this,Me),m(this,ke),m(this,we),m(this,ye),u(this,Y,{writable:!0,value:null}),u(this,Z,{writable:!0,value:new Map}),u(this,j,{writable:!0,value:new Map}),u(this,ne,{writable:!0,value:null}),u(this,le,{writable:!0,value:new E}),u(this,J,{writable:!0,value:0}),u(this,O,{writable:!0,value:null}),u(this,U,{writable:!0,value:new Set}),u(this,W,{writable:!0,value:null}),u(this,H,{writable:!0,value:new w}),u(this,X,{writable:!0,value:!1}),u(this,Q,{writable:!0,value:o.AnnotationEditorType.NONE}),u(this,fe,{writable:!0,value:new Set}),u(this,Se,{writable:!0,value:this.copy.bind(this)}),u(this,Pe,{writable:!0,value:this.cut.bind(this)}),u(this,$e,{writable:!0,value:this.paste.bind(this)}),u(this,Ie,{writable:!0,value:this.keydown.bind(this)}),u(this,Ne,{writable:!0,value:this.onEditingAction.bind(this)}),u(this,Be,{writable:!0,value:this.onPageChanging.bind(this)}),u(this,be,{writable:!0,value:this.onScaleChanging.bind(this)}),u(this,Ve,{writable:!0,value:this.onRotationChanging.bind(this)}),u(this,De,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),u(this,ve,{writable:!0,value:null}),f(this,ve,He),f(this,W,Ke),d(this,W)._on("editingaction",d(this,Ne)),d(this,W)._on("pagechanging",d(this,Be)),d(this,W)._on("scalechanging",d(this,be)),d(this,W)._on("rotationchanging",d(this,Ve)),f(this,ne,ot),this.viewParameters={realScale:s.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}return _createClass(qe,[{key:"destroy",value:function(){v(this,we,Re).call(this),d(this,W)._off("editingaction",d(this,Ne)),d(this,W)._off("pagechanging",d(this,Be)),d(this,W)._off("scalechanging",d(this,be)),d(this,W)._off("rotationchanging",d(this,Ve));var He,Ke=_createForOfIteratorHelper(d(this,j).values());try{for(Ke.s();!(He=Ke.n()).done;)He.value.destroy()}catch(ot){Ke.e(ot)}finally{Ke.f()}d(this,j).clear(),d(this,Z).clear(),d(this,U).clear(),f(this,Y,null),d(this,fe).clear(),d(this,le).destroy()}},{key:"onPageChanging",value:function(He){var Ke=He.pageNumber;f(this,J,Ke-1)}},{key:"focusMainContainer",value:function(){d(this,ve).focus()}},{key:"addShouldRescale",value:function(He){d(this,U).add(He)}},{key:"removeShouldRescale",value:function(He){d(this,U).delete(He)}},{key:"onScaleChanging",value:function(He){var Ke=He.scale;this.commitOrRemove(),this.viewParameters.realScale=Ke*s.PixelsPerInch.PDF_TO_CSS_UNITS;var ot,at=_createForOfIteratorHelper(d(this,U));try{for(at.s();!(ot=at.n()).done;)ot.value.onScaleChanging()}catch(et){at.e(et)}finally{at.f()}}},{key:"onRotationChanging",value:function(He){var Ke=He.pagesRotation;this.commitOrRemove(),this.viewParameters.rotation=Ke}},{key:"addToAnnotationStorage",value:function(He){He.isEmpty()||!d(this,ne)||d(this,ne).has(He.id)||d(this,ne).setValue(He.id,He)}},{key:"copy",value:function(He){if(He.preventDefault(),d(this,Y)&&d(this,Y).commitOrRemove(),this.hasSelection){var Ke,ot=[],at=_createForOfIteratorHelper(d(this,fe));try{for(at.s();!(Ke=at.n()).done;){var et=Ke.value;et.isEmpty()||ot.push(et.serialize())}}catch(Je){at.e(Je)}finally{at.f()}ot.length!==0&&He.clipboardData.setData("application/pdfjs",JSON.stringify(ot))}}},{key:"cut",value:function(He){this.copy(He),this.delete()}},{key:"paste",value:function(He){var Ke=this;He.preventDefault();var ot=He.clipboardData.getData("application/pdfjs");if(ot){try{ot=JSON.parse(ot)}catch(lt){return void(0,o.warn)('paste: "'.concat(lt.message,'".'))}if(Array.isArray(ot)){this.unselectAll();var at=d(this,j).get(d(this,J));try{var et,Je=[],nt=_createForOfIteratorHelper(ot);try{for(nt.s();!(et=nt.n()).done;){var it=et.value,ht=at.deserialize(it);if(!ht)return;Je.push(ht)}}catch(lt){nt.e(lt)}finally{nt.f()}this.addCommands({cmd:function(){for(var lt=0,ft=Je;lt<ft.length;lt++){var mt=ft[lt];v(Ke,oe,Qe).call(Ke,mt)}v(Ke,Ce,dt).call(Ke,Je)},undo:function(){for(var lt=0,ft=Je;lt<ft.length;lt++)ft[lt].remove()},mustExec:!0})}catch(lt){(0,o.warn)('paste: "'.concat(lt.message,'".'))}}}}},{key:"keydown",value:function(He){var Ke;(Ke=this.getActive())!==null&&Ke!==void 0&&Ke.shouldGetKeyboardEvents()||qe._keyboardManager.exec(this,He)}},{key:"onEditingAction",value:function(He){["undo","redo","delete","selectAll"].includes(He.name)&&this[He.name]()}},{key:"setEditingState",value:function(He){He?(v(this,ye,Te).call(this),v(this,ke,Oe).call(this),v(this,Le,We).call(this,{isEditing:d(this,Q)!==o.AnnotationEditorType.NONE,isEmpty:v(this,_e,rt).call(this),hasSomethingToUndo:d(this,le).hasSomethingToUndo(),hasSomethingToRedo:d(this,le).hasSomethingToRedo(),hasSelectedEditor:!1})):(v(this,we,Re).call(this),v(this,Me,je).call(this),v(this,Le,We).call(this,{isEditing:!1}))}},{key:"registerEditorTypes",value:function(He){if(!d(this,O)){f(this,O,He);var Ke,ot=_createForOfIteratorHelper(d(this,O));try{for(ot.s();!(Ke=ot.n()).done;){var at=Ke.value;v(this,Fe,Ze).call(this,at.defaultPropertiesToUpdate)}}catch(et){ot.e(et)}finally{ot.f()}}}},{key:"getId",value:function(){return d(this,H).getId()}},{key:"currentLayer",get:function(){return d(this,j).get(d(this,J))}},{key:"currentPageIndex",get:function(){return d(this,J)}},{key:"addLayer",value:function(He){d(this,j).set(He.pageIndex,He),d(this,X)?He.enable():He.disable()}},{key:"removeLayer",value:function(He){d(this,j).delete(He.pageIndex)}},{key:"updateMode",value:function(He){if(f(this,Q,He),He===o.AnnotationEditorType.NONE)this.setEditingState(!1),v(this,te,Ge).call(this);else{this.setEditingState(!0),v(this,ze,Xe).call(this);var Ke,ot=_createForOfIteratorHelper(d(this,j).values());try{for(ot.s();!(Ke=ot.n()).done;)Ke.value.updateMode(He)}catch(at){ot.e(at)}finally{ot.f()}}}},{key:"updateToolbar",value:function(He){He!==d(this,Q)&&d(this,W).dispatch("switchannotationeditormode",{source:this,mode:He})}},{key:"updateParams",value:function(He,Ke){if(d(this,O)){var ot,at=_createForOfIteratorHelper(d(this,fe));try{for(at.s();!(ot=at.n()).done;)ot.value.updateParams(He,Ke)}catch(nt){at.e(nt)}finally{at.f()}var et,Je=_createForOfIteratorHelper(d(this,O));try{for(Je.s();!(et=Je.n()).done;)et.value.updateDefaultParams(He,Ke)}catch(nt){Je.e(nt)}finally{Je.f()}}}},{key:"getEditors",value:function(He){var Ke,ot=[],at=_createForOfIteratorHelper(d(this,Z).values());try{for(at.s();!(Ke=at.n()).done;){var et=Ke.value;et.pageIndex===He&&ot.push(et)}}catch(Je){at.e(Je)}finally{at.f()}return ot}},{key:"getEditor",value:function(He){return d(this,Z).get(He)}},{key:"addEditor",value:function(He){d(this,Z).set(He.id,He)}},{key:"removeEditor",value:function(He){var Ke;d(this,Z).delete(He.id),this.unselect(He),(Ke=d(this,ne))===null||Ke===void 0||Ke.remove(He.id)}},{key:"setActiveEditor",value:function(He){d(this,Y)!==He&&(f(this,Y,He),He&&v(this,Fe,Ze).call(this,He.propertiesToUpdate))}},{key:"toggleSelected",value:function(He){if(d(this,fe).has(He))return d(this,fe).delete(He),He.unselect(),void v(this,Le,We).call(this,{hasSelectedEditor:this.hasSelection});d(this,fe).add(He),He.select(),v(this,Fe,Ze).call(this,He.propertiesToUpdate),v(this,Le,We).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(He){var Ke,ot=_createForOfIteratorHelper(d(this,fe));try{for(ot.s();!(Ke=ot.n()).done;){var at=Ke.value;at!==He&&at.unselect()}}catch(et){ot.e(et)}finally{ot.f()}d(this,fe).clear(),d(this,fe).add(He),He.select(),v(this,Fe,Ze).call(this,He.propertiesToUpdate),v(this,Le,We).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(He){return d(this,fe).has(He)}},{key:"unselect",value:function(He){He.unselect(),d(this,fe).delete(He),v(this,Le,We).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return d(this,fe).size!==0}},{key:"undo",value:function(){d(this,le).undo(),v(this,Le,We).call(this,{hasSomethingToUndo:d(this,le).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:v(this,_e,rt).call(this)})}},{key:"redo",value:function(){d(this,le).redo(),v(this,Le,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,le).hasSomethingToRedo(),isEmpty:v(this,_e,rt).call(this)})}},{key:"addCommands",value:function(He){d(this,le).add(He),v(this,Le,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:v(this,_e,rt).call(this)})}},{key:"delete",value:function(){var He=this;if(this.commitOrRemove(),this.hasSelection){var Ke=_toConsumableArray$1(d(this,fe));this.addCommands({cmd:function(){var ot,at=_createForOfIteratorHelper(Ke);try{for(at.s();!(ot=at.n()).done;)ot.value.remove()}catch(et){at.e(et)}finally{at.f()}},undo:function(){var ot,at=_createForOfIteratorHelper(Ke);try{for(at.s();!(ot=at.n()).done;){var et=ot.value;v(He,oe,Qe).call(He,et)}}catch(Je){at.e(Je)}finally{at.f()}},mustExec:!0})}}},{key:"commitOrRemove",value:function(){var He;(He=d(this,Y))===null||He===void 0||He.commitOrRemove()}},{key:"selectAll",value:function(){var He,Ke=_createForOfIteratorHelper(d(this,fe));try{for(Ke.s();!(He=Ke.n()).done;)He.value.commit()}catch(ot){Ke.e(ot)}finally{Ke.f()}v(this,Ce,dt).call(this,d(this,Z).values())}},{key:"unselectAll",value:function(){if(d(this,Y))d(this,Y).commitOrRemove();else if(d(this,fe).size!==0){var He,Ke=_createForOfIteratorHelper(d(this,fe));try{for(Ke.s();!(He=Ke.n()).done;)He.value.unselect()}catch(ot){Ke.e(ot)}finally{Ke.f()}d(this,fe).clear(),v(this,Le,We).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function(He){return d(this,Y)===He}},{key:"getActive",value:function(){return d(this,Y)}},{key:"getMode",value:function(){return d(this,Q)}}])}();function Te(){d(this,ve).addEventListener("keydown",d(this,Ie))}function Re(){d(this,ve).removeEventListener("keydown",d(this,Ie))}function Oe(){document.addEventListener("copy",d(this,Se)),document.addEventListener("cut",d(this,Pe)),document.addEventListener("paste",d(this,$e))}function je(){document.removeEventListener("copy",d(this,Se)),document.removeEventListener("cut",d(this,Pe)),document.removeEventListener("paste",d(this,$e))}function We(qe){var He=this;Object.entries(qe).some(function(Ke){var ot=_slicedToArray(Ke,2),at=ot[0],et=ot[1];return d(He,De)[at]!==et})&&d(this,W).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,De),qe)})}function Ze(qe){d(this,W).dispatch("annotationeditorparamschanged",{source:this,details:qe})}function Xe(){if(!d(this,X)){f(this,X,!0);var qe,He=_createForOfIteratorHelper(d(this,j).values());try{for(He.s();!(qe=He.n()).done;)qe.value.enable()}catch(Ke){He.e(Ke)}finally{He.f()}}}function Ge(){if(this.unselectAll(),d(this,X)){f(this,X,!1);var qe,He=_createForOfIteratorHelper(d(this,j).values());try{for(He.s();!(qe=He.n()).done;)qe.value.disable()}catch(Ke){He.e(Ke)}finally{He.f()}}}function Qe(qe){var He=d(this,j).get(qe.pageIndex);He?He.addOrRebuild(qe):this.addEditor(qe)}function rt(){if(d(this,Z).size===0)return!0;if(d(this,Z).size===1){var qe,He=_createForOfIteratorHelper(d(this,Z).values());try{for(He.s();!(qe=He.n()).done;)return qe.value.isEmpty()}catch(Ke){He.e(Ke)}finally{He.f()}}return!1}function dt(qe){d(this,fe).clear();var He,Ke=_createForOfIteratorHelper(qe);try{for(Ke.s();!(He=Ke.n()).done;){var ot=He.value;ot.isEmpty()||(d(this,fe).add(ot),ot.select())}}catch(at){Ke.e(at)}finally{Ke.f()}v(this,Le,We).call(this,{hasSelectedEditor:!0})}n.AnnotationEditorUIManager=Ee,I=Ee,N="_keyboardManager",q=new T([[["ctrl+a","mac+meta+a"],Ee.prototype.selectAll],[["ctrl+z","mac+meta+z"],Ee.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Ee.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Ee.prototype.delete],[["Escape","mac+Escape"],Ee.prototype.unselectAll]]),(N=function(qe){var He=function(Ke,ot){if(_typeof$1(Ke)!=="object"||Ke===null)return Ke;var at=Ke[Symbol.toPrimitive];if(at!==void 0){var et=at.call(Ke,ot||"default");if(_typeof$1(et)!=="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ot==="string"?String:Number)(Ke)}(qe,"string");return _typeof$1(He)==="symbol"?He:String(He)}(N))in I?Object.defineProperty(I,N,{value:q,enumerable:!0,configurable:!0,writable:!0}):I[N]=q},function(e,n,r){var o;Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMFilterFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=n.AnnotationPrefix=void 0,n.deprecated=function(Ne){console.log("Deprecated API usage: "+Ne)},n.getColorValues=function(Ne){var Be=document.createElement("span");Be.style.visibility="hidden",document.body.append(Be);var be,Ve=_createForOfIteratorHelper(Ne.keys());try{for(Ve.s();!(be=Ve.n()).done;){var De=be.value;Be.style.color=De;var ve=window.getComputedStyle(Be).color;Ne.set(De,Ie(ve))}}catch(ye){Ve.e(ye)}finally{Ve.f()}Be.remove()},n.getCurrentTransform=function(Ne){var Be=Ne.getTransform(),be=Be.a,Ve=Be.b,De=Be.c,ve=Be.d,ye=Be.e,we=Be.f;return[be,Ve,De,ve,ye,we]},n.getCurrentTransformInverse=function(Ne){var Be=Ne.getTransform().invertSelf(),be=Be.a,Ve=Be.b,De=Be.c,ve=Be.d,ye=Be.e,we=Be.f;return[be,Ve,De,ve,ye,we]},n.getFilenameFromUrl=function(Ne){var Be=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!Be){var be=Ne.split(/[#?]/,1);Ne=_slicedToArray(be,1)[0]}return Ne.substring(Ne.lastIndexOf("/")+1)},n.getPdfFilenameFromUrl=function(Ne){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof Ne!="string")return Be;if(Q(Ne))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Be;var be=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ve=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(Ne),De=be.exec(Ve[1])||be.exec(Ve[2])||be.exec(Ve[3]);if(De&&(De=De[0]).includes("%"))try{De=be.exec(decodeURIComponent(De))[0]}catch{}return De||Be},n.getRGB=Ie,n.getXfaPageViewport=function(Ne,Be){var be=Be.scale,Ve=be===void 0?1:be,De=Be.rotation,ve=De===void 0?0:De,ye=Ne.attributes.style,we=ye.width,ke=ye.height,Me=[0,0,parseInt(we),parseInt(ke)];return new H({viewBox:Me,scale:Ve,rotation:ve})},n.isDataScheme=Q,n.isPdfFile=function(Ne){return typeof Ne=="string"&&/\.pdf$/i.test(Ne)},n.isValidFetchUrl=Pe,n.loadScript=function(Ne){var Be=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(be,Ve){var De=document.createElement("script");De.src=Ne,De.onload=function(ve){Be&&De.remove(),be(ve)},De.onerror=function(){Ve(new Error("Cannot load script at: ".concat(De.src)))},(document.head||document.documentElement).append(De)})},n.setLayerDimensions=function(Ne,Be){var be=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Ve=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Be instanceof H){var De=Be.rawDims,ve=De.pageWidth,ye=De.pageHeight,we=Ne.style,ke="calc(var(--scale-factor) * ".concat(ve,"px)"),Me="calc(var(--scale-factor) * ".concat(ye,"px)");be&&Be.rotation%180!=0?(we.width=Me,we.height=ke):(we.width=ke,we.height=Me)}Ve&&Ne.setAttribute("data-main-rotation",Be.rotation)};var s=r(143),u=r(1);function d(Ne,Be,be){f(Ne,Be),Be.set(Ne,be)}function f(Ne,Be){if(Be.has(Ne))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(Ne,Be,be){if(!Be.has(Ne))throw new TypeError("attempted to get private field on non-instance");return be}function m(Ne,Be){return function(be,Ve){return Ve.get?Ve.get.call(be):Ve.value}(Ne,v(Ne,Be,"get"))}function y(Ne,Be,be){return function(Ve,De,ve){if(De.set)De.set.call(Ve,ve);else{if(!De.writable)throw new TypeError("attempted to set read only private field");De.value=ve}}(Ne,v(Ne,Be,"set"),be),be}function v(Ne,Be,be){if(!Be.has(Ne))throw new TypeError("attempted to "+be+" private field on non-instance");return Be.get(Ne)}var _="http://www.w3.org/2000/svg";n.AnnotationPrefix="pdfjs_internal_id_";var w=_createClass(function Ne(){_classCallCheck(this,Ne)});o=w,_defineProperty$1(w,"CSS",96),_defineProperty$1(w,"PDF",72),_defineProperty$1(w,"PDF_TO_CSS_UNITS",o.CSS/o.PDF),n.PixelsPerInch=w;var x=new WeakMap,k=new WeakMap,S=new WeakMap,M=new WeakMap,E=new WeakMap,P=new WeakMap,T=new WeakMap,D=new WeakMap,F=new WeakMap,I=new WeakMap,N=new WeakSet,q=function(Ne){function Be(){var be;_classCallCheck(this,Be);var Ve,De,ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=ve.docId,we=ve.ownerDocument,ke=we===void 0?globalThis.document:we;return be=_callSuper(this,Be),f(Ve=be,De=N),De.add(Ve),d(be,I,{get:Z,set:void 0}),d(be,F,{get:Y,set:void 0}),d(be,x,{writable:!0,value:void 0}),d(be,k,{writable:!0,value:void 0}),d(be,S,{writable:!0,value:void 0}),d(be,M,{writable:!0,value:void 0}),d(be,E,{writable:!0,value:void 0}),d(be,P,{writable:!0,value:void 0}),d(be,T,{writable:!0,value:void 0}),d(be,D,{writable:!0,value:0}),y(be,S,ye),y(be,M,ke),be}return _inherits(Be,Ne),_createClass(Be,[{key:"addFilter",value:function(be){var Ve,De;if(!be)return"none";var ve,ye,we,ke,Me=m(this,F).get(be);if(Me)return Me;if(be.length===1){for(var Le=be[0],Fe=new Array(256),ze=0;ze<256;ze++)Fe[ze]=Le[ze]/255;ke=ve=ye=we=Fe.join(",")}else{for(var te=_slicedToArray(be,3),oe=te[0],_e=te[1],Ce=te[2],Ee=new Array(256),Te=new Array(256),Re=new Array(256),Oe=0;Oe<256;Oe++)Ee[Oe]=oe[Oe]/255,Te[Oe]=_e[Oe]/255,Re[Oe]=Ce[Oe]/255;ve=Ee.join(","),ye=Te.join(","),we=Re.join(","),ke="".concat(ve).concat(ye).concat(we)}if(Me=m(this,F).get(ke))return m(this,F).set(be,Me),Me;var je="g_".concat(m(this,S),"_transfer_map_").concat((y(this,D,(Ve=m(this,D),De=Ve++,Ve)),De)),We="url(#".concat(je,")");m(this,F).set(be,We),m(this,F).set(ke,We);var Ze=m(this,M).createElementNS(_,"filter",_);Ze.setAttribute("id",je),Ze.setAttribute("color-interpolation-filters","sRGB");var Xe=m(this,M).createElementNS(_,"feComponentTransfer");return Ze.append(Xe),g(this,N,j).call(this,Xe,"feFuncR",ve),g(this,N,j).call(this,Xe,"feFuncG",ye),g(this,N,j).call(this,Xe,"feFuncB",we),m(this,I).append(Ze),We}},{key:"addHCMFilter",value:function(be,Ve){var De,ve,ye,we="".concat(be,"-").concat(Ve);if(m(this,P)===we)return m(this,T);if(y(this,P,we),y(this,T,"none"),(ye=m(this,E))===null||ye===void 0||ye.remove(),!be||!Ve)return m(this,T);m(this,I).style.color=be;var ke=Ie(be=getComputedStyle(m(this,I)).getPropertyValue("color"));be=(De=u.Util).makeHexColor.apply(De,_toConsumableArray$1(ke)),m(this,I).style.color=Ve;var Me=Ie(Ve=getComputedStyle(m(this,I)).getPropertyValue("color"));if(Ve=(ve=u.Util).makeHexColor.apply(ve,_toConsumableArray$1(Me)),m(this,I).style.color="",be==="#000000"&&Ve==="#ffffff"||be===Ve)return m(this,T);for(var Le=new Array(256),Fe=0;Fe<=255;Fe++){var ze=Fe/255;Le[Fe]=ze<=.03928?ze/12.92:Math.pow((ze+.055)/1.055,2.4)}var te=Le.join(","),oe="g_".concat(m(this,S),"_hcm_filter"),_e=y(this,E,m(this,M).createElementNS(_,"filter",_));_e.setAttribute("id",oe),_e.setAttribute("color-interpolation-filters","sRGB");var Ce=m(this,M).createElementNS(_,"feComponentTransfer");_e.append(Ce),g(this,N,j).call(this,Ce,"feFuncR",te),g(this,N,j).call(this,Ce,"feFuncG",te),g(this,N,j).call(this,Ce,"feFuncB",te);var Ee=m(this,M).createElementNS(_,"feColorMatrix");Ee.setAttribute("type","matrix"),Ee.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),_e.append(Ee),Ce=m(this,M).createElementNS(_,"feComponentTransfer"),_e.append(Ce);var Te=function(Re,Oe){for(var je=ke[Re]/255,We=Me[Re]/255,Ze=new Array(Oe+1),Xe=0;Xe<=Oe;Xe++)Ze[Xe]=je+Xe/Oe*(We-je);return Ze.join(",")};return g(this,N,j).call(this,Ce,"feFuncR",Te(0,5)),g(this,N,j).call(this,Ce,"feFuncG",Te(1,5)),g(this,N,j).call(this,Ce,"feFuncB",Te(2,5)),m(this,I).append(_e),y(this,T,"url(#".concat(oe,")")),m(this,T)}},{key:"destroy",value:function(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&m(this,T)||(m(this,k)&&(m(this,k).parentNode.parentNode.remove(),y(this,k,null)),m(this,x)&&(m(this,x).clear(),y(this,x,null)),y(this,D,0))}}])}(s.BaseFilterFactory);function Y(){return m(this,x)||y(this,x,new Map)}function Z(){if(!m(this,k)){var Ne=m(this,M).createElement("div"),Be=Ne.style;Be.visibility="hidden",Be.contain="strict",Be.width=Be.height=0,Be.position="absolute",Be.top=Be.left=0,Be.zIndex=-1;var be=m(this,M).createElementNS(_,"svg");be.setAttribute("width",0),be.setAttribute("height",0),y(this,k,m(this,M).createElementNS(_,"defs")),Ne.append(be),be.append(m(this,k)),m(this,M).body.append(Ne)}return m(this,k)}function j(Ne,Be,be){var Ve=m(this,M).createElementNS(_,Be);Ve.setAttribute("type","discrete"),Ve.setAttribute("tableValues",be),Ne.append(Ve)}n.DOMFilterFactory=q;var ne=function(Ne){function Be(){var be;_classCallCheck(this,Be);var Ve=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).ownerDocument,De=Ve===void 0?globalThis.document:Ve;return(be=_callSuper(this,Be))._document=De,be}return _inherits(Be,Ne),_createClass(Be,[{key:"_createCanvas",value:function(be,Ve){var De=this._document.createElement("canvas");return De.width=be,De.height=Ve,De}}])}(s.BaseCanvasFactory);function le(Ne){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime().mark(function Ne(Be){var be,Ve,De=arguments;return _regeneratorRuntime().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(be=De.length>1&&De[1]!==void 0&&De[1],!Pe(Be,document.baseURI)){ve.next=21;break}return ve.next=4,fetch(Be);case 4:if((Ve=ve.sent).ok){ve.next=7;break}throw new Error(Ve.statusText);case 7:if(!be){ve.next=15;break}return ve.t1=Uint8Array,ve.next=11,Ve.arrayBuffer();case 11:ve.t2=ve.sent,ve.t0=new ve.t1(ve.t2),ve.next=20;break;case 15:return ve.t3=u.stringToBytes,ve.next=18,Ve.text();case 18:ve.t4=ve.sent,ve.t0=(0,ve.t3)(ve.t4);case 20:return ve.abrupt("return",ve.t0);case 21:return ve.abrupt("return",new Promise(function(ye,we){var ke=new XMLHttpRequest;ke.open("GET",Be,!0),be&&(ke.responseType="arraybuffer"),ke.onreadystatechange=function(){if(ke.readyState===XMLHttpRequest.DONE){var Me;if((ke.status===200||ke.status===0)&&(be&&ke.response?Me=new Uint8Array(ke.response):!be&&ke.responseText&&(Me=(0,u.stringToBytes)(ke.responseText)),Me))return void ye(Me);we(new Error(ke.statusText))}},ke.send(null)}));case 22:case"end":return ve.stop()}},Ne)})),J.apply(this,arguments)}n.DOMCanvasFactory=ne;var O=function(Ne){function Be(){return _classCallCheck(this,Be),_callSuper(this,Be,arguments)}return _inherits(Be,Ne),_createClass(Be,[{key:"_fetchData",value:function(be,Ve){return le(be,this.isCompressed).then(function(De){return{cMapData:De,compressionType:Ve}})}}])}(s.BaseCMapReaderFactory);n.DOMCMapReaderFactory=O;var U=function(Ne){function Be(){return _classCallCheck(this,Be),_callSuper(this,Be,arguments)}return _inherits(Be,Ne),_createClass(Be,[{key:"_fetchData",value:function(be){return le(be,!0)}}])}(s.BaseStandardFontDataFactory);n.DOMStandardFontDataFactory=U;var W=function(Ne){function Be(){return _classCallCheck(this,Be),_callSuper(this,Be,arguments)}return _inherits(Be,Ne),_createClass(Be,[{key:"_createSVG",value:function(be){return document.createElementNS(_,be)}}])}(s.BaseSVGFactory);n.DOMSVGFactory=W;var H=function(){function Ne(Be){_classCallCheck(this,Ne);var be=Be.viewBox,Ve=Be.scale,De=Be.rotation,ve=Be.offsetX,ye=ve===void 0?0:ve,we=Be.offsetY,ke=we===void 0?0:we,Me=Be.dontFlip,Le=Me!==void 0&&Me;this.viewBox=be,this.scale=Ve,this.rotation=De,this.offsetX=ye,this.offsetY=ke;var Fe,ze,te,oe,_e,Ce,Ee,Te,Re=(be[2]+be[0])/2,Oe=(be[3]+be[1])/2;switch((De%=360)<0&&(De+=360),De){case 180:Fe=-1,ze=0,te=0,oe=1;break;case 90:Fe=0,ze=1,te=1,oe=0;break;case 270:Fe=0,ze=-1,te=-1,oe=0;break;case 0:Fe=1,ze=0,te=0,oe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Le&&(te=-te,oe=-oe),Fe===0?(_e=Math.abs(Oe-be[1])*Ve+ye,Ce=Math.abs(Re-be[0])*Ve+ke,Ee=(be[3]-be[1])*Ve,Te=(be[2]-be[0])*Ve):(_e=Math.abs(Re-be[0])*Ve+ye,Ce=Math.abs(Oe-be[1])*Ve+ke,Ee=(be[2]-be[0])*Ve,Te=(be[3]-be[1])*Ve),this.transform=[Fe*Ve,ze*Ve,te*Ve,oe*Ve,_e-Fe*Ve*Re-te*Ve*Oe,Ce-ze*Ve*Re-oe*Ve*Oe],this.width=Ee,this.height=Te}return _createClass(Ne,[{key:"rawDims",get:function(){var Be=this.viewBox;return(0,u.shadow)(this,"rawDims",{pageWidth:Be[2]-Be[0],pageHeight:Be[3]-Be[1],pageX:Be[0],pageY:Be[1]})}},{key:"clone",value:function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=Be.scale,Ve=be===void 0?this.scale:be,De=Be.rotation,ve=De===void 0?this.rotation:De,ye=Be.offsetX,we=ye===void 0?this.offsetX:ye,ke=Be.offsetY,Me=ke===void 0?this.offsetY:ke,Le=Be.dontFlip,Fe=Le!==void 0&&Le;return new Ne({viewBox:this.viewBox.slice(),scale:Ve,rotation:ve,offsetX:we,offsetY:Me,dontFlip:Fe})}},{key:"convertToViewportPoint",value:function(Be,be){return u.Util.applyTransform([Be,be],this.transform)}},{key:"convertToViewportRectangle",value:function(Be){var be=u.Util.applyTransform([Be[0],Be[1]],this.transform),Ve=u.Util.applyTransform([Be[2],Be[3]],this.transform);return[be[0],be[1],Ve[0],Ve[1]]}},{key:"convertToPdfPoint",value:function(Be,be){return u.Util.applyInverseTransform([Be,be],this.transform)}}])}();n.PageViewport=H;var X=function(Ne){function Be(be,Ve){var De;_classCallCheck(this,Be);var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(De=_callSuper(this,Be,[be,"RenderingCancelledException"])).type=Ve,De.extraDelay=ve,De}return _inherits(Be,Ne),_createClass(Be)}(u.BaseException);function Q(Ne){for(var Be=Ne.length,be=0;be<Be&&Ne[be].trim()==="";)be++;return Ne.substring(be,be+5).toLowerCase()==="data:"}n.RenderingCancelledException=X;var fe,Se=function(){return _createClass(function Ne(){_classCallCheck(this,Ne),_defineProperty$1(this,"started",Object.create(null)),_defineProperty$1(this,"times",[])},[{key:"time",value:function(Ne){Ne in this.started&&(0,u.warn)("Timer is already running for ".concat(Ne)),this.started[Ne]=Date.now()}},{key:"timeEnd",value:function(Ne){Ne in this.started||(0,u.warn)("Timer has not been started for ".concat(Ne)),this.times.push({name:Ne,start:this.started[Ne],end:Date.now()}),delete this.started[Ne]}},{key:"toString",value:function(){var Ne,Be=[],be=0,Ve=_createForOfIteratorHelper(this.times);try{for(Ve.s();!(Ne=Ve.n()).done;){var De=Ne.value.name;be=Math.max(De.length,be)}}catch(Fe){Ve.e(Fe)}finally{Ve.f()}var ve,ye=_createForOfIteratorHelper(this.times);try{for(ye.s();!(ve=ye.n()).done;){var we=ve.value,ke=we.name,Me=we.start,Le=we.end;Be.push("".concat(ke.padEnd(be)," ").concat(Le-Me,`ms
`))}}catch(Fe){ye.e(Fe)}finally{ye.f()}return Be.join("")}}])}();function Pe(Ne,Be){try{var be=(Be?new URL(Ne,Be):new URL(Ne)).protocol;return be==="http:"||be==="https:"}catch{return!1}}n.StatTimer=Se;var $e=function(){return _createClass(function Ne(){_classCallCheck(this,Ne)},null,[{key:"toDateObject",value:function(Ne){if(!Ne||typeof Ne!="string")return null;fe||(fe=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var Be=fe.exec(Ne);if(!Be)return null;var be=parseInt(Be[1],10),Ve=parseInt(Be[2],10);Ve=Ve>=1&&Ve<=12?Ve-1:0;var De=parseInt(Be[3],10);De=De>=1&&De<=31?De:1;var ve=parseInt(Be[4],10);ve=ve>=0&&ve<=23?ve:0;var ye=parseInt(Be[5],10);ye=ye>=0&&ye<=59?ye:0;var we=parseInt(Be[6],10);we=we>=0&&we<=59?we:0;var ke=Be[7]||"Z",Me=parseInt(Be[8],10);Me=Me>=0&&Me<=23?Me:0;var Le=parseInt(Be[9],10)||0;return Le=Le>=0&&Le<=59?Le:0,ke==="-"?(ve+=Me,ye+=Le):ke==="+"&&(ve-=Me,ye-=Le),new Date(Date.UTC(be,Ve,De,ve,ye,we))}}])}();function Ie(Ne){if(Ne.startsWith("#")){var Be=parseInt(Ne.slice(1),16);return[(16711680&Be)>>16,(65280&Be)>>8,255&Be]}return Ne.startsWith("rgb(")?Ne.slice(4,-1).split(",").map(function(be){return parseInt(be)}):Ne.startsWith("rgba(")?Ne.slice(5,-1).split(",").map(function(be){return parseInt(be)}).slice(0,3):((0,u.warn)('Not a valid color format: "'.concat(Ne,'"')),[0,0,0])}n.PDFDateString=$e},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseFilterFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var o=r(1),s=function(){return _createClass(function m(){_classCallCheck(this,m),this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")},[{key:"addFilter",value:function(m){return"none"}},{key:"addHCMFilter",value:function(m,y){return"none"}},{key:"destroy",value:function(){}}])}();n.BaseFilterFactory=s;var u=function(){return _createClass(function m(){_classCallCheck(this,m),this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")},[{key:"create",value:function(m,y){if(m<=0||y<=0)throw new Error("Invalid canvas size");var v=this._createCanvas(m,y);return{canvas:v,context:v.getContext("2d")}}},{key:"reset",value:function(m,y,v){if(!m.canvas)throw new Error("Canvas is not specified");if(y<=0||v<=0)throw new Error("Invalid canvas size");m.canvas.width=y,m.canvas.height=v}},{key:"destroy",value:function(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}},{key:"_createCanvas",value:function(m,y){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}])}();n.BaseCanvasFactory=u;var d=function(){return _createClass(function y(v){_classCallCheck(this,y);var _=v.baseUrl,w=_===void 0?null:_,x=v.isCompressed,k=x===void 0||x;this.constructor===y&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=w,this.isCompressed=k},[{key:"fetch",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _,w,x,k=this;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(_=v.name,this.baseUrl){S.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(_){S.next=5;break}throw new Error("CMap name must be specified.");case 5:return w=this.baseUrl+_+(this.isCompressed?".bcmap":""),x=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE,S.abrupt("return",this._fetchData(w,x).catch(function(M){throw new Error("Unable to load ".concat(k.isCompressed?"binary ":"","CMap at: ").concat(w))}));case 8:case"end":return S.stop()}},y,this)})),function(y){return m.apply(this,arguments)})},{key:"_fetchData",value:function(y,v){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]);var m}();n.BaseCMapReaderFactory=d;var f=function(){return _createClass(function y(v){_classCallCheck(this,y);var _=v.baseUrl,w=_===void 0?null:_;this.constructor===y&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=w},[{key:"fetch",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _,w;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(_=v.filename,this.baseUrl){x.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(_){x.next=5;break}throw new Error("Font filename must be specified.");case 5:return w="".concat(this.baseUrl).concat(_),x.abrupt("return",this._fetchData(w).catch(function(k){throw new Error("Unable to load font data at: ".concat(w))}));case 7:case"end":return x.stop()}},y,this)})),function(y){return m.apply(this,arguments)})},{key:"_fetchData",value:function(y){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]);var m}();n.BaseStandardFontDataFactory=f;var g=function(){return _createClass(function m(){_classCallCheck(this,m),this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")},[{key:"create",value:function(m,y){var v=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(m<=0||y<=0)throw new Error("Invalid SVG dimensions");var _=this._createSVG("svg:svg");return _.setAttribute("version","1.1"),v||(_.setAttribute("width","".concat(m,"px")),_.setAttribute("height","".concat(y,"px"))),_.setAttribute("preserveAspectRatio","none"),_.setAttribute("viewBox","0 0 ".concat(m," ").concat(y)),_}},{key:"createElement",value:function(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}},{key:"_createSVG",value:function(m){(0,o.unreachable)("Abstract method `_createSVG` called.")}}])}();n.BaseSVGFactory=g},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var o=r(1),s=3285377520,u=4294901760,d=65535,f=function(){return _createClass(function g(m){_classCallCheck(this,g),this.h1=m?4294967295&m:s,this.h2=m?4294967295&m:s},[{key:"update",value:function(g){var m,y;if(typeof g=="string"){m=new Uint8Array(2*g.length),y=0;for(var v=0,_=g.length;v<_;v++){var w=g.charCodeAt(v);w<=255?m[y++]=w:(m[y++]=w>>>8,m[y++]=255&w)}}else{if(!(0,o.isArrayBuffer)(g))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");y=(m=g.slice()).byteLength}for(var x=y>>2,k=y-4*x,S=new Uint32Array(m.buffer,0,x),M=0,E=0,P=this.h1,T=this.h2,D=3432918353,F=461845907,I=11601,N=13715,q=0;q<x;q++)1&q?P=5*(P=(P^=M=(M=(M=(M=S[q])*D&u|M*I&d)<<15|M>>>17)*F&u|M*N&d)<<13|P>>>19)+3864292196:T=5*(T=(T^=E=(E=(E=(E=S[q])*D&u|E*I&d)<<15|E>>>17)*F&u|E*N&d)<<13|T>>>19)+3864292196;switch(M=0,k){case 3:M^=m[4*x+2]<<16;case 2:M^=m[4*x+1]<<8;case 1:M=(M=(M=(M^=m[4*x])*D&u|M*I&d)<<15|M>>>17)*F&u|M*N&d,1&x?P^=M:T^=M}this.h1=P,this.h2=T}},{key:"hexdigest",value:function(){var g=this.h1,m=this.h2;return g=3981806797*(g^=m>>>1)&u|36045*g&d,g=444984403*(g^=(m=4283543511*m&u|(2950163797*(m<<16|g>>>16)&u)>>>16)>>>1)&u|60499*g&d,((g^=(m=3301882366*m&u|(3120437893*(m<<16|g>>>16)&u)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(m>>>0).toString(16).padStart(8,"0")}}])}();n.MurmurHash3_64=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var o=r(1),s=r(3),u=function(){return _createClass(function g(m){_classCallCheck(this,g);var y=m.ownerDocument,v=y===void 0?globalThis.document:y;m.styleElement,this._document=v,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0},[{key:"addNativeFontFace",value:function(g){this.nativeFontFaces.push(g),this._document.fonts.add(g)}},{key:"insertRule",value:function(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var m=this.styleElement.sheet;m.insertRule(g,m.cssRules.length)}},{key:"clear",value:function(){var g,m=_createForOfIteratorHelper(this.nativeFontFaces);try{for(m.s();!(g=m.n()).done;){var y=g.value;this._document.fonts.delete(y)}}catch(v){m.e(v)}finally{m.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function g(m){var y,v,_=this;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!m.attached&&!m.missingFile){w.next=2;break}return w.abrupt("return");case 2:if(m.attached=!0,!this.isFontLoadingAPISupported){w.next=18;break}if(!(y=m.createNativeFontFace())){w.next=17;break}return this.addNativeFontFace(y),w.prev=7,w.next=10,y.loaded;case 10:w.next=17;break;case 12:throw w.prev=12,w.t0=w.catch(7),(0,o.warn)("Failed to load font '".concat(y.family,"': '").concat(w.t0,"'.")),m.disableFontFace=!0,w.t0;case 17:return w.abrupt("return");case 18:if(!(v=m.createFontFaceRule())){w.next=25;break}if(this.insertRule(v),!this.isSyncFontLoadingSupported){w.next=23;break}return w.abrupt("return");case 23:return w.next=25,new Promise(function(x){var k=_._queueLoadingCallback(x);_._prepareFontLoadEvent(m,k)});case 25:case"end":return w.stop()}},g,this,[[7,12]])})),function(g){return f.apply(this,arguments)})},{key:"isFontLoadingAPISupported",get:function(){var g,m=!((g=this._document)===null||g===void 0||!g.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",m)}},{key:"isSyncFontLoadingSupported",get:function(){var g=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",g)}},{key:"_queueLoadingCallback",value:function(g){var m=this.loadingRequests,y={done:!1,complete:function(){for((0,o.assert)(!y.done,"completeRequest() cannot be called twice."),y.done=!0;m.length>0&&m[0].done;){var v=m.shift();setTimeout(v.callback,0)}},callback:g};return m.push(y),y}},{key:"_loadTestFont",get:function(){var g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",g)}},{key:"_prepareFontLoadEvent",value:function(g,m){function y(j,ne){return j.charCodeAt(ne)<<24|j.charCodeAt(ne+1)<<16|j.charCodeAt(ne+2)<<8|255&j.charCodeAt(ne+3)}function v(j,ne,le,J){return j.substring(0,ne)+J+j.substring(ne+le)}var _,w,x=this._document.createElement("canvas");x.width=1,x.height=1;var k=x.getContext("2d"),S=0,M="lt".concat(Date.now()).concat(this.loadTestFontId++),E=this._loadTestFont,P=1482184792,T=y(E=v(E,976,M.length,M),16);for(_=0,w=M.length-3;_<w;_+=4)T=T-P+y(M,_)|0;_<M.length&&(T=T-P+y(M+"XXX",_)|0),E=v(E,16,4,(0,o.string32)(T));var D="url(data:font/opentype;base64,".concat(btoa(E),");"),F='@font-face {font-family:"'.concat(M,'";src:').concat(D,"}");this.insertRule(F);var I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(var N=0,q=[g.loadedName,M];N<q.length;N++){var Y=q[N],Z=this._document.createElement("span");Z.textContent="Hi",Z.style.fontFamily=Y,I.append(Z)}this._document.body.append(I),function j(ne,le){if(++S>30)return(0,o.warn)("Load test font never loaded."),void le();k.font="30px "+ne,k.fillText(".",0,20),k.getImageData(0,0,1,1).data[3]>0?le():setTimeout(j.bind(null,ne,le))}(M,function(){I.remove(),m.complete()})}}]);var f}();n.FontLoader=u;var d=function(){return _createClass(function f(g,m){_classCallCheck(this,f);var y=m.isEvalSupported,v=y===void 0||y,_=m.disableFontFace,w=_!==void 0&&_,x=m.ignoreErrors,k=x!==void 0&&x,S=m.inspectFont,M=S===void 0?null:S;for(var E in this.compiledGlyphs=Object.create(null),g)this[E]=g[E];this.isEvalSupported=v!==!1,this.disableFontFace=w===!0,this.ignoreErrors=k===!0,this._inspectFont=M},[{key:"createNativeFontFace",value:function(){var f,g;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),g=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}else g=new FontFace(this.loadedName,this.data,{});return(f=this._inspectFont)===null||f===void 0||f.call(this,this),g}},{key:"createFontFaceRule",value:function(){var f;if(!this.data||this.disableFontFace)return null;var g,m=(0,o.bytesToString)(this.data),y="url(data:".concat(this.mimetype,";base64,").concat(btoa(m),");");if(this.cssFontInfo){var v="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(v+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),g='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(v,"src:").concat(y,"}")}else g='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(y,"}");return(f=this._inspectFont)===null||f===void 0||f.call(this,this,y),g}},{key:"getPathGenerator",value:function(f,g){if(this.compiledGlyphs[g]!==void 0)return this.compiledGlyphs[g];var m;try{m=f.get(this.loadedName+"_path_"+g)}catch(k){if(!this.ignoreErrors)throw k;return(0,o.warn)('getPathGenerator - ignoring character: "'.concat(k,'".')),this.compiledGlyphs[g]=function(S,M){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){var y,v=[],_=_createForOfIteratorHelper(m);try{for(_.s();!(y=_.n()).done;){var w=y.value,x=w.args!==void 0?w.args.join(","):"";v.push("c.",w.cmd,"(",x,`);
`)}}catch(k){_.e(k)}finally{_.f()}return this.compiledGlyphs[g]=new Function("c","size",v.join(""))}return this.compiledGlyphs[g]=function(k,S){var M,E=_createForOfIteratorHelper(m);try{for(E.s();!(M=E.n()).done;){var P=M.value;P.cmd==="scale"&&(P.args=[S,-S]),k[P.cmd].apply(k,P.args)}}catch(T){E.e(T)}finally{E.f()}}}}])}();n.FontFaceObject=d},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var o=r(1),s=r(142),u=r(147),d=r(148),f=r(3);function g(O,U){(function(W,H){if(H.has(W))throw new TypeError("Cannot initialize the same private elements twice on an object")})(O,U),U.add(O)}function m(O,U,W){if(!U.has(O))throw new TypeError("attempted to get private field on non-instance");return W}var y=4096,v=16,_=function(){return _createClass(function O(U){_classCallCheck(this,O),this.canvasFactory=U,this.cache=Object.create(null)},[{key:"getCanvas",value:function(O,U,W){var H;return this.cache[O]!==void 0?(H=this.cache[O],this.canvasFactory.reset(H,U,W)):(H=this.canvasFactory.create(U,W),this.cache[O]=H),H}},{key:"delete",value:function(O){delete this.cache[O]}},{key:"clear",value:function(){for(var O in this.cache){var U=this.cache[O];this.canvasFactory.destroy(U),delete this.cache[O]}}}])}();function w(O,U,W,H,X,Q,fe,Se,Pe,$e){var Ie=_slicedToArray((0,s.getCurrentTransform)(O),6),Ne=Ie[0],Be=Ie[1],be=Ie[2],Ve=Ie[3],De=Ie[4],ve=Ie[5];if(Be===0&&be===0){var ye=fe*Ne+De,we=Math.round(ye),ke=Se*Ve+ve,Me=Math.round(ke),Le=(fe+Pe)*Ne+De,Fe=Math.abs(Math.round(Le)-we)||1,ze=(Se+$e)*Ve+ve,te=Math.abs(Math.round(ze)-Me)||1;return O.setTransform(Math.sign(Ne),0,0,Math.sign(Ve),we,Me),O.drawImage(U,W,H,X,Q,0,0,Fe,te),O.setTransform(Ne,Be,be,Ve,De,ve),[Fe,te]}if(Ne===0&&Ve===0){var oe=Se*be+De,_e=Math.round(oe),Ce=fe*Be+ve,Ee=Math.round(Ce),Te=(Se+$e)*be+De,Re=Math.abs(Math.round(Te)-_e)||1,Oe=(fe+Pe)*Be+ve,je=Math.abs(Math.round(Oe)-Ee)||1;return O.setTransform(0,Math.sign(Be),Math.sign(be),0,_e,Ee),O.drawImage(U,W,H,X,Q,0,0,je,Re),O.setTransform(Ne,Be,be,Ve,De,ve),[je,Re]}return O.drawImage(U,W,H,X,Q,fe,Se,Pe,$e),[Math.hypot(Ne,Be)*Pe,Math.hypot(be,Ve)*$e]}var x=function(){return _createClass(function O(U,W){_classCallCheck(this,O),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,U,W])},[{key:"clone",value:function(){var O=Object.create(this);return O.clipBox=this.clipBox.slice(),O}},{key:"setCurrentPoint",value:function(O,U){this.x=O,this.y=U}},{key:"updatePathMinMax",value:function(O,U,W){var H=_slicedToArray(o.Util.applyTransform([U,W],O),2);U=H[0],W=H[1],this.minX=Math.min(this.minX,U),this.minY=Math.min(this.minY,W),this.maxX=Math.max(this.maxX,U),this.maxY=Math.max(this.maxY,W)}},{key:"updateRectMinMax",value:function(O,U){var W=o.Util.applyTransform(U,O),H=o.Util.applyTransform(U.slice(2),O);this.minX=Math.min(this.minX,W[0],H[0]),this.minY=Math.min(this.minY,W[1],H[1]),this.maxX=Math.max(this.maxX,W[0],H[0]),this.maxY=Math.max(this.maxY,W[1],H[1])}},{key:"updateScalingPathMinMax",value:function(O,U){o.Util.scaleMinMax(O,U),this.minX=Math.min(this.minX,U[0]),this.maxX=Math.max(this.maxX,U[1]),this.minY=Math.min(this.minY,U[2]),this.maxY=Math.max(this.maxY,U[3])}},{key:"updateCurvePathMinMax",value:function(O,U,W,H,X,Q,fe,Se,Pe,$e){var Ie=o.Util.bezierBoundingBox(U,W,H,X,Q,fe,Se,Pe);if($e)return $e[0]=Math.min($e[0],Ie[0],Ie[2]),$e[1]=Math.max($e[1],Ie[0],Ie[2]),$e[2]=Math.min($e[2],Ie[1],Ie[3]),void($e[3]=Math.max($e[3],Ie[1],Ie[3]));this.updateRectMinMax(O,Ie)}},{key:"getPathBoundingBox",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.PathType.FILL,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,W=[this.minX,this.minY,this.maxX,this.maxY];if(O===u.PathType.STROKE){U||(0,o.unreachable)("Stroke bounding box must include transform.");var H=o.Util.singularValueDecompose2dScale(U),X=H[0]*this.lineWidth/2,Q=H[1]*this.lineWidth/2;W[0]-=X,W[1]-=Q,W[2]+=X,W[3]+=Q}return W}},{key:"updateClipFromPath",value:function(){var O=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(O||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(O){this.clipBox=O,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.PathType.FILL,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o.Util.intersect(this.clipBox,this.getPathBoundingBox(O,U))}}])}();function k(O,U){if(typeof ImageData<"u"&&U instanceof ImageData)O.putImageData(U,0,0);else{var W,H,X,Q,fe,Se=U.height,Pe=U.width,$e=Se%v,Ie=(Se-$e)/v,Ne=$e===0?Ie:Ie+1,Be=O.createImageData(Pe,v),be=0,Ve=U.data,De=Be.data;if(U.kind===o.ImageKind.GRAYSCALE_1BPP){var ve=Ve.byteLength,ye=new Uint32Array(De.buffer,0,De.byteLength>>2),we=ye.length,ke=Pe+7>>3,Me=4294967295,Le=o.FeatureTest.isLittleEndian?4278190080:255;for(H=0;H<Ne;H++){for(Q=H<Ie?v:$e,W=0,X=0;X<Q;X++){for(var Fe=ve-be,ze=0,te=Fe>ke?Pe:8*Fe-7,oe=-8&te,_e=0,Ce=0;ze<oe;ze+=8)Ce=Ve[be++],ye[W++]=128&Ce?Me:Le,ye[W++]=64&Ce?Me:Le,ye[W++]=32&Ce?Me:Le,ye[W++]=16&Ce?Me:Le,ye[W++]=8&Ce?Me:Le,ye[W++]=4&Ce?Me:Le,ye[W++]=2&Ce?Me:Le,ye[W++]=1&Ce?Me:Le;for(;ze<te;ze++)_e===0&&(Ce=Ve[be++],_e=128),ye[W++]=Ce&_e?Me:Le,_e>>=1}for(;W<we;)ye[W++]=0;O.putImageData(Be,0,H*v)}}else if(U.kind===o.ImageKind.RGBA_32BPP){for(X=0,fe=Pe*v*4,H=0;H<Ie;H++)De.set(Ve.subarray(be,be+fe)),be+=fe,O.putImageData(Be,0,X),X+=v;H<Ne&&(fe=Pe*$e*4,De.set(Ve.subarray(be,be+fe)),O.putImageData(Be,0,X))}else{if(U.kind!==o.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(U.kind));for(fe=Pe*(Q=v),H=0;H<Ne;H++){for(H>=Ie&&(fe=Pe*(Q=$e)),W=0,X=fe;X--;)De[W++]=Ve[be++],De[W++]=Ve[be++],De[W++]=Ve[be++],De[W++]=255;O.putImageData(Be,0,H*v)}}}}function S(O,U){if(U.bitmap)O.drawImage(U.bitmap,0,0);else for(var W=U.height,H=U.width,X=W%v,Q=(W-X)/v,fe=X===0?Q:Q+1,Se=O.createImageData(H,v),Pe=0,$e=U.data,Ie=Se.data,Ne=0;Ne<fe;Ne++){var Be=Ne<Q?v:X;Pe=(0,d.convertBlackAndWhiteToRGBA)({src:$e,srcPos:Pe,dest:Ie,width:H,height:Be,nonBlackColor:0}).srcPos,O.putImageData(Se,0,Ne*v)}}function M(O,U){for(var W=0,H=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];W<H.length;W++){var X=H[W];O[X]!==void 0&&(U[X]=O[X])}O.setLineDash!==void 0&&(U.setLineDash(O.getLineDash()),U.lineDashOffset=O.lineDashOffset)}function E(O){O.strokeStyle=O.fillStyle="#000000",O.fillRule="nonzero",O.globalAlpha=1,O.lineWidth=1,O.lineCap="butt",O.lineJoin="miter",O.miterLimit=10,O.globalCompositeOperation="source-over",O.font="10px sans-serif",O.setLineDash!==void 0&&(O.setLineDash([]),O.lineDashOffset=0),f.isNodeJS||(O.filter="none")}function P(O,U,W,H){for(var X=O.length,Q=3;Q<X;Q+=4){var fe=O[Q];if(fe===0)O[Q-3]=U,O[Q-2]=W,O[Q-1]=H;else if(fe<255){var Se=255-fe;O[Q-3]=O[Q-3]*fe+U*Se>>8,O[Q-2]=O[Q-2]*fe+W*Se>>8,O[Q-1]=O[Q-1]*fe+H*Se>>8}}}function T(O,U,W){for(var H=O.length,X=.00392156862745098,Q=3;Q<H;Q+=4){var fe=W?W[O[Q]]:O[Q];U[Q]=U[Q]*fe*X|0}}function D(O,U,W){for(var H=O.length,X=3;X<H;X+=4){var Q=77*O[X-3]+152*O[X-2]+28*O[X-1];U[X]=W?U[X]*W[Q>>8]>>8:U[X]*Q>>16}}function F(O,U,W,H){var X=H[0],Q=H[1],fe=H[2]-X,Se=H[3]-Q;fe!==0&&Se!==0&&(function(Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye,we){var ke,Me=!!be,Le=Me?be[0]:0,Fe=Me?be[1]:0,ze=Me?be[2]:0;ke=Be==="Luminosity"?D:T;for(var te=Math.min(Ne,Math.ceil(1048576/Ie)),oe=0;oe<Ne;oe+=te){var _e=Math.min(te,Ne-oe),Ce=Pe.getImageData(De-ye,oe+(ve-we),Ie,_e),Ee=$e.getImageData(De,oe+ve,Ie,_e);Me&&P(Ce.data,Le,Fe,ze),ke(Ce.data,Ee.data,Ve),$e.putImageData(Ee,De,oe+ve)}}(U.context,W,fe,Se,U.subtype,U.backdrop,U.transferMap,X,Q,U.offsetX,U.offsetY),O.save(),O.globalAlpha=1,O.globalCompositeOperation="source-over",O.setTransform(1,0,0,1,0,0),O.drawImage(W.canvas,0,0),O.restore())}function I(O,U){var W=o.Util.singularValueDecompose2dScale(O);W[0]=Math.fround(W[0]),W[1]=Math.fround(W[1]);var H=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return U!==void 0?U:W[0]<=H||W[1]<=H}var N=["butt","round","square"],q=["miter","round","bevel"],Y={},Z={},j=new WeakSet,ne=function(){function O(U,W,H,X,Q,fe,Se){_classCallCheck(this,O);var Pe=fe.optionalContentConfig,$e=fe.markedContentStack,Ie=$e===void 0?null:$e;g(this,j),this.ctx=U,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=W,this.objs=H,this.canvasFactory=X,this.filterFactory=Q,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ie||[],this.optionalContentConfig=Pe,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Se,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return _createClass(O,[{key:"getObject",value:function(U){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof U=="string"?U.startsWith("g_")?this.commonObjs.get(U):this.objs.get(U):W}},{key:"beginDrawing",value:function(U){var W,H,X=U.transform,Q=U.viewport,fe=U.transparency,Se=fe!==void 0&&fe,Pe=U.background,$e=Pe===void 0?null:Pe,Ie=this.ctx.canvas.width,Ne=this.ctx.canvas.height,Be=this.ctx.fillStyle;if(this.ctx.fillStyle=$e||"#ffffff",this.ctx.fillRect(0,0,Ie,Ne),this.ctx.fillStyle=Be,Se){var be,Ve=this.cachedCanvases.getCanvas("transparent",Ie,Ne);this.compositeCtx=this.ctx,this.transparentCanvas=Ve.canvas,this.ctx=Ve.context,this.ctx.save(),(be=this.ctx).transform.apply(be,_toConsumableArray$1((0,s.getCurrentTransform)(this.compositeCtx)))}this.ctx.save(),E(this.ctx),X&&((H=this.ctx).transform.apply(H,_toConsumableArray$1(X)),this.outputScaleX=X[0],this.outputScaleY=X[0]),(W=this.ctx).transform.apply(W,_toConsumableArray$1(Q.transform)),this.viewportScale=Q.scale,this.baseTransform=(0,s.getCurrentTransform)(this.ctx)}},{key:"executeOperatorList",value:function(U,W,H,X){var Q=U.argsArray,fe=U.fnArray,Se=W||0,Pe=Q.length;if(Pe===Se)return Se;for(var $e,Ie=Pe-Se>10&&typeof H=="function",Ne=Ie?Date.now()+15:0,Be=0,be=this.commonObjs,Ve=this.objs;;){if(X!==void 0&&Se===X.nextBreakPoint)return X.breakIt(Se,H),Se;if(($e=fe[Se])!==o.OPS.dependency)this[$e].apply(this,Q[Se]);else{var De,ve=_createForOfIteratorHelper(Q[Se]);try{for(ve.s();!(De=ve.n()).done;){var ye=De.value,we=ye.startsWith("g_")?be:Ve;if(!we.has(ye))return we.get(ye,H),Se}}catch(ke){ve.e(ke)}finally{ve.f()}}if(++Se===Pe)return Se;if(Ie&&++Be>10){if(Date.now()>Ne)return H(),Se;Be=0}}}},{key:"endDrawing",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;m(this,j,le).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var W,H=_createForOfIteratorHelper(this._cachedBitmapsMap.values());try{for(H.s();!(W=H.n()).done;){var X,Q=W.value,fe=_createForOfIteratorHelper(Q.values());try{for(fe.s();!(X=fe.n()).done;){var Se=X.value;typeof HTMLCanvasElement<"u"&&Se instanceof HTMLCanvasElement&&(Se.width=Se.height=0)}}catch(Ie){fe.e(Ie)}finally{fe.f()}Q.clear()}}catch(Ie){H.e(Ie)}finally{H.f()}if(this._cachedBitmapsMap.clear(),U){var Pe=this.filterFactory.addHCMFilter(U.foreground,U.background);if(Pe!=="none"){var $e=this.ctx.filter;this.ctx.filter=Pe,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=$e}}}},{key:"_scaleImage",value:function(U,W){for(var H,X,Q=U.width,fe=U.height,Se=Math.max(Math.hypot(W[0],W[1]),1),Pe=Math.max(Math.hypot(W[2],W[3]),1),$e=Q,Ie=fe,Ne="prescale1";Se>2&&$e>1||Pe>2&&Ie>1;){var Be=$e,be=Ie;Se>2&&$e>1&&(Se/=$e/(Be=$e>=16384?Math.floor($e/2)-1||1:Math.ceil($e/2))),Pe>2&&Ie>1&&(Pe/=Ie/(be=Ie>=16384?Math.floor(Ie/2)-1||1:Math.ceil(Ie)/2)),(X=(H=this.cachedCanvases.getCanvas(Ne,Be,be)).context).clearRect(0,0,Be,be),X.drawImage(U,0,0,$e,Ie,0,0,Be,be),U=H.canvas,$e=Be,Ie=be,Ne=Ne==="prescale1"?"prescale2":"prescale1"}return{img:U,paintWidth:$e,paintHeight:Ie}}},{key:"_createMaskCanvas",value:function(U){var W,H,X,Q,fe=this.ctx,Se=U.width,Pe=U.height,$e=this.current.fillColor,Ie=this.current.patternFill,Ne=(0,s.getCurrentTransform)(fe);if((U.bitmap||U.data)&&U.count>1){var Be=U.bitmap||U.data.buffer;H=JSON.stringify(Ie?Ne:[Ne.slice(0,4),$e]),(W=this._cachedBitmapsMap.get(Be))||(W=new Map,this._cachedBitmapsMap.set(Be,W));var be=W.get(H);if(be&&!Ie)return{canvas:be,offsetX:Math.round(Math.min(Ne[0],Ne[2])+Ne[4]),offsetY:Math.round(Math.min(Ne[1],Ne[3])+Ne[5])};X=be}X||S((Q=this.cachedCanvases.getCanvas("maskCanvas",Se,Pe)).context,U);var Ve=o.Util.transform(Ne,[1/Se,0,0,-1/Pe,0,0]);Ve=o.Util.transform(Ve,[1,0,0,1,0,-Pe]);var De=o.Util.applyTransform([0,0],Ve),ve=o.Util.applyTransform([Se,Pe],Ve),ye=o.Util.normalizeRect([De[0],De[1],ve[0],ve[1]]),we=Math.round(ye[2]-ye[0])||1,ke=Math.round(ye[3]-ye[1])||1,Me=this.cachedCanvases.getCanvas("fillCanvas",we,ke),Le=Me.context,Fe=Math.min(De[0],ve[0]),ze=Math.min(De[1],ve[1]);Le.translate(-Fe,-ze),Le.transform.apply(Le,_toConsumableArray$1(Ve)),X||(X=(X=this._scaleImage(Q.canvas,(0,s.getCurrentTransformInverse)(Le))).img,W&&Ie&&W.set(H,X)),Le.imageSmoothingEnabled=I((0,s.getCurrentTransform)(Le),U.interpolate),w(Le,X,0,0,X.width,X.height,0,0,Se,Pe),Le.globalCompositeOperation="source-in";var te=o.Util.transform((0,s.getCurrentTransformInverse)(Le),[1,0,0,1,-Fe,-ze]);return Le.fillStyle=Ie?$e.getPattern(fe,this,te,u.PathType.FILL):$e,Le.fillRect(0,0,Se,Pe),W&&!Ie&&(this.cachedCanvases.delete("fillCanvas"),W.set(H,Me.canvas)),{canvas:Me.canvas,offsetX:Math.round(Fe),offsetY:Math.round(ze)}}},{key:"setLineWidth",value:function(U){U!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=U,this.ctx.lineWidth=U}},{key:"setLineCap",value:function(U){this.ctx.lineCap=N[U]}},{key:"setLineJoin",value:function(U){this.ctx.lineJoin=q[U]}},{key:"setMiterLimit",value:function(U){this.ctx.miterLimit=U}},{key:"setDash",value:function(U,W){var H=this.ctx;H.setLineDash!==void 0&&(H.setLineDash(U),H.lineDashOffset=W)}},{key:"setRenderingIntent",value:function(U){}},{key:"setFlatness",value:function(U){}},{key:"setGState",value:function(U){var W,H=_createForOfIteratorHelper(U);try{for(H.s();!(W=H.n()).done;){var X=_slicedToArray(W.value,2),Q=X[0],fe=X[1];switch(Q){case"LW":this.setLineWidth(fe);break;case"LC":this.setLineCap(fe);break;case"LJ":this.setLineJoin(fe);break;case"ML":this.setMiterLimit(fe);break;case"D":this.setDash(fe[0],fe[1]);break;case"RI":this.setRenderingIntent(fe);break;case"FL":this.setFlatness(fe);break;case"Font":this.setFont(fe[0],fe[1]);break;case"CA":this.current.strokeAlpha=fe;break;case"ca":this.current.fillAlpha=fe,this.ctx.globalAlpha=fe;break;case"BM":this.ctx.globalCompositeOperation=fe;break;case"SMask":this.current.activeSMask=fe?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(fe)}}}catch(Se){H.e(Se)}finally{H.f()}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var U=this.inSMaskMode;this.current.activeSMask&&!U?this.beginSMaskMode():!this.current.activeSMask&&U&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var U=this.ctx.canvas.width,W=this.ctx.canvas.height,H="smaskGroupAt"+this.groupLevel,X=this.cachedCanvases.getCanvas(H,U,W);this.suspendedCtx=this.ctx,this.ctx=X.context;var Q=this.ctx;Q.setTransform.apply(Q,_toConsumableArray$1((0,s.getCurrentTransform)(this.suspendedCtx))),M(this.suspendedCtx,Q),function(fe,Se){if(fe._removeMirroring)throw new Error("Context is already forwarding operations.");fe.__originalSave=fe.save,fe.__originalRestore=fe.restore,fe.__originalRotate=fe.rotate,fe.__originalScale=fe.scale,fe.__originalTranslate=fe.translate,fe.__originalTransform=fe.transform,fe.__originalSetTransform=fe.setTransform,fe.__originalResetTransform=fe.resetTransform,fe.__originalClip=fe.clip,fe.__originalMoveTo=fe.moveTo,fe.__originalLineTo=fe.lineTo,fe.__originalBezierCurveTo=fe.bezierCurveTo,fe.__originalRect=fe.rect,fe.__originalClosePath=fe.closePath,fe.__originalBeginPath=fe.beginPath,fe._removeMirroring=function(){fe.save=fe.__originalSave,fe.restore=fe.__originalRestore,fe.rotate=fe.__originalRotate,fe.scale=fe.__originalScale,fe.translate=fe.__originalTranslate,fe.transform=fe.__originalTransform,fe.setTransform=fe.__originalSetTransform,fe.resetTransform=fe.__originalResetTransform,fe.clip=fe.__originalClip,fe.moveTo=fe.__originalMoveTo,fe.lineTo=fe.__originalLineTo,fe.bezierCurveTo=fe.__originalBezierCurveTo,fe.rect=fe.__originalRect,fe.closePath=fe.__originalClosePath,fe.beginPath=fe.__originalBeginPath,delete fe._removeMirroring},fe.save=function(){Se.save(),this.__originalSave()},fe.restore=function(){Se.restore(),this.__originalRestore()},fe.translate=function(Pe,$e){Se.translate(Pe,$e),this.__originalTranslate(Pe,$e)},fe.scale=function(Pe,$e){Se.scale(Pe,$e),this.__originalScale(Pe,$e)},fe.transform=function(Pe,$e,Ie,Ne,Be,be){Se.transform(Pe,$e,Ie,Ne,Be,be),this.__originalTransform(Pe,$e,Ie,Ne,Be,be)},fe.setTransform=function(Pe,$e,Ie,Ne,Be,be){Se.setTransform(Pe,$e,Ie,Ne,Be,be),this.__originalSetTransform(Pe,$e,Ie,Ne,Be,be)},fe.resetTransform=function(){Se.resetTransform(),this.__originalResetTransform()},fe.rotate=function(Pe){Se.rotate(Pe),this.__originalRotate(Pe)},fe.clip=function(Pe){Se.clip(Pe),this.__originalClip(Pe)},fe.moveTo=function(Pe,$e){Se.moveTo(Pe,$e),this.__originalMoveTo(Pe,$e)},fe.lineTo=function(Pe,$e){Se.lineTo(Pe,$e),this.__originalLineTo(Pe,$e)},fe.bezierCurveTo=function(Pe,$e,Ie,Ne,Be,be){Se.bezierCurveTo(Pe,$e,Ie,Ne,Be,be),this.__originalBezierCurveTo(Pe,$e,Ie,Ne,Be,be)},fe.rect=function(Pe,$e,Ie,Ne){Se.rect(Pe,$e,Ie,Ne),this.__originalRect(Pe,$e,Ie,Ne)},fe.closePath=function(){Se.closePath(),this.__originalClosePath()},fe.beginPath=function(){Se.beginPath(),this.__originalBeginPath()}}(Q,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),M(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(U){if(this.current.activeSMask){U?(U[0]=Math.floor(U[0]),U[1]=Math.floor(U[1]),U[2]=Math.ceil(U[2]),U[3]=Math.ceil(U[3])):U=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var W=this.current.activeSMask;F(this.suspendedCtx,W,this.ctx,U),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.inSMaskMode?(M(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var U=this.current;this.stateStack.push(U),this.current=U.clone()}},{key:"restore",value:function(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),M(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(U,W,H,X,Q,fe){this.ctx.transform(U,W,H,X,Q,fe),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(U,W,H){for(var X,Q,fe=this.ctx,Se=this.current,Pe=Se.x,$e=Se.y,Ie=(0,s.getCurrentTransform)(fe),Ne=Ie[0]===0&&Ie[3]===0||Ie[1]===0&&Ie[2]===0,Be=Ne?H.slice(0):null,be=0,Ve=0,De=U.length;be<De;be++)switch(0|U[be]){case o.OPS.rectangle:Pe=W[Ve++],$e=W[Ve++];var ve=W[Ve++],ye=W[Ve++],we=Pe+ve,ke=$e+ye;fe.moveTo(Pe,$e),ve===0||ye===0?fe.lineTo(we,ke):(fe.lineTo(we,$e),fe.lineTo(we,ke),fe.lineTo(Pe,ke)),Ne||Se.updateRectMinMax(Ie,[Pe,$e,we,ke]),fe.closePath();break;case o.OPS.moveTo:Pe=W[Ve++],$e=W[Ve++],fe.moveTo(Pe,$e),Ne||Se.updatePathMinMax(Ie,Pe,$e);break;case o.OPS.lineTo:Pe=W[Ve++],$e=W[Ve++],fe.lineTo(Pe,$e),Ne||Se.updatePathMinMax(Ie,Pe,$e);break;case o.OPS.curveTo:X=Pe,Q=$e,Pe=W[Ve+4],$e=W[Ve+5],fe.bezierCurveTo(W[Ve],W[Ve+1],W[Ve+2],W[Ve+3],Pe,$e),Se.updateCurvePathMinMax(Ie,X,Q,W[Ve],W[Ve+1],W[Ve+2],W[Ve+3],Pe,$e,Be),Ve+=6;break;case o.OPS.curveTo2:X=Pe,Q=$e,fe.bezierCurveTo(Pe,$e,W[Ve],W[Ve+1],W[Ve+2],W[Ve+3]),Se.updateCurvePathMinMax(Ie,X,Q,Pe,$e,W[Ve],W[Ve+1],W[Ve+2],W[Ve+3],Be),Pe=W[Ve+2],$e=W[Ve+3],Ve+=4;break;case o.OPS.curveTo3:X=Pe,Q=$e,Pe=W[Ve+2],$e=W[Ve+3],fe.bezierCurveTo(W[Ve],W[Ve+1],Pe,$e,Pe,$e),Se.updateCurvePathMinMax(Ie,X,Q,W[Ve],W[Ve+1],Pe,$e,Pe,$e,Be),Ve+=4;break;case o.OPS.closePath:fe.closePath()}Ne&&Se.updateScalingPathMinMax(Ie,Be),Se.setCurrentPoint(Pe,$e)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(){var U=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],W=this.ctx,H=this.current.strokeColor;W.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(_typeof$1(H)==="object"&&H!=null&&H.getPattern?(W.save(),W.strokeStyle=H.getPattern(W,this,(0,s.getCurrentTransformInverse)(W),u.PathType.STROKE),this.rescaleAndStroke(!1),W.restore()):this.rescaleAndStroke(!0)),U&&this.consumePath(this.current.getClippedPathBoundingBox()),W.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(){var U=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],W=this.ctx,H=this.current.fillColor,X=!1;this.current.patternFill&&(W.save(),W.fillStyle=H.getPattern(W,this,(0,s.getCurrentTransformInverse)(W),u.PathType.FILL),X=!0);var Q=this.current.getClippedPathBoundingBox();this.contentVisible&&Q!==null&&(this.pendingEOFill?(W.fill("evenodd"),this.pendingEOFill=!1):W.fill()),X&&W.restore(),U&&this.consumePath(Q)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=Y}},{key:"eoClip",value:function(){this.pendingClip=Z}},{key:"beginText",value:function(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var U=this.pendingTextPaths,W=this.ctx;if(U!==void 0){W.save(),W.beginPath();var H,X=_createForOfIteratorHelper(U);try{for(X.s();!(H=X.n()).done;){var Q=H.value;W.setTransform.apply(W,_toConsumableArray$1(Q.transform)),W.translate(Q.x,Q.y),Q.addToPath(W,Q.fontSize)}}catch(fe){X.e(fe)}finally{X.f()}W.restore(),W.clip(),W.beginPath(),delete this.pendingTextPaths}else W.beginPath()}},{key:"setCharSpacing",value:function(U){this.current.charSpacing=U}},{key:"setWordSpacing",value:function(U){this.current.wordSpacing=U}},{key:"setHScale",value:function(U){this.current.textHScale=U/100}},{key:"setLeading",value:function(U){this.current.leading=-U}},{key:"setFont",value:function(U,W){var H=this.commonObjs.get(U),X=this.current;if(!H)throw new Error("Can't find font for ".concat(U));if(X.fontMatrix=H.fontMatrix||o.FONT_IDENTITY_MATRIX,X.fontMatrix[0]!==0&&X.fontMatrix[3]!==0||(0,o.warn)("Invalid font matrix for font "+U),W<0?(W=-W,X.fontDirection=-1):X.fontDirection=1,this.current.font=H,this.current.fontSize=W,!H.isType3Font){var Q=H.loadedName||"sans-serif",fe="normal";H.black?fe="900":H.bold&&(fe="bold");var Se=H.italic?"italic":"normal",Pe='"'.concat(Q,'", ').concat(H.fallbackName),$e=W;W<16?$e=16:W>100&&($e=100),this.current.fontSizeScale=W/$e,this.ctx.font="".concat(Se," ").concat(fe," ").concat($e,"px ").concat(Pe)}}},{key:"setTextRenderingMode",value:function(U){this.current.textRenderingMode=U}},{key:"setTextRise",value:function(U){this.current.textRise=U}},{key:"moveText",value:function(U,W){this.current.x=this.current.lineX+=U,this.current.y=this.current.lineY+=W}},{key:"setLeadingMoveText",value:function(U,W){this.setLeading(-W),this.moveText(U,W)}},{key:"setTextMatrix",value:function(U,W,H,X,Q,fe){this.current.textMatrix=[U,W,H,X,Q,fe],this.current.textMatrixScale=Math.hypot(U,W),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(U,W,H,X){var Q,fe=this.ctx,Se=this.current,Pe=Se.font,$e=Se.textRenderingMode,Ie=Se.fontSize/Se.fontSizeScale,Ne=$e&o.TextRenderingMode.FILL_STROKE_MASK,Be=!!($e&o.TextRenderingMode.ADD_TO_PATH_FLAG),be=Se.patternFill&&!Pe.missingFile;(Pe.disableFontFace||Be||be)&&(Q=Pe.getPathGenerator(this.commonObjs,U)),Pe.disableFontFace||be?(fe.save(),fe.translate(W,H),fe.beginPath(),Q(fe,Ie),X&&fe.setTransform.apply(fe,_toConsumableArray$1(X)),Ne!==o.TextRenderingMode.FILL&&Ne!==o.TextRenderingMode.FILL_STROKE||fe.fill(),Ne!==o.TextRenderingMode.STROKE&&Ne!==o.TextRenderingMode.FILL_STROKE||fe.stroke(),fe.restore()):(Ne!==o.TextRenderingMode.FILL&&Ne!==o.TextRenderingMode.FILL_STROKE||fe.fillText(U,W,H),Ne!==o.TextRenderingMode.STROKE&&Ne!==o.TextRenderingMode.FILL_STROKE||fe.strokeText(U,W,H)),Be&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,s.getCurrentTransform)(fe),x:W,y:H,fontSize:Ie,addToPath:Q})}},{key:"isFontSubpixelAAEnabled",get:function(){var U=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;U.scale(1.5,1),U.fillText("I",0,10);for(var W=U.getImageData(0,0,10,10).data,H=!1,X=3;X<W.length;X+=4)if(W[X]>0&&W[X]<255){H=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",H)}},{key:"showText",value:function(U){var W=this.current,H=W.font;if(H.isType3Font)return this.showType3Text(U);var X=W.fontSize;if(X!==0){var Q,fe=this.ctx,Se=W.fontSizeScale,Pe=W.charSpacing,$e=W.wordSpacing,Ie=W.fontDirection,Ne=W.textHScale*Ie,Be=U.length,be=H.vertical,Ve=be?1:-1,De=H.defaultVMetrics,ve=X*W.fontMatrix[0],ye=W.textRenderingMode===o.TextRenderingMode.FILL&&!H.disableFontFace&&!W.patternFill;if(fe.save(),fe.transform.apply(fe,_toConsumableArray$1(W.textMatrix)),fe.translate(W.x,W.y+W.textRise),Ie>0?fe.scale(Ne,-1):fe.scale(Ne,1),W.patternFill){fe.save();var we=W.fillColor.getPattern(fe,this,(0,s.getCurrentTransformInverse)(fe),u.PathType.FILL);Q=(0,s.getCurrentTransform)(fe),fe.restore(),fe.fillStyle=we}var ke=W.lineWidth,Me=W.textMatrixScale;if(Me===0||ke===0){var Le=W.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;Le!==o.TextRenderingMode.STROKE&&Le!==o.TextRenderingMode.FILL_STROKE||(ke=this.getSinglePixelWidth())}else ke/=Me;if(Se!==1&&(fe.scale(Se,Se),ke/=Se),fe.lineWidth=ke,H.isInvalidPDFjsFont){var Fe,ze=[],te=0,oe=_createForOfIteratorHelper(U);try{for(oe.s();!(Fe=oe.n()).done;){var _e=Fe.value;ze.push(_e.unicode),te+=_e.width}}catch(at){oe.e(at)}finally{oe.f()}return fe.fillText(ze.join(""),0,0),W.x+=te*ve*Ne,fe.restore(),void this.compose()}var Ce,Ee=0;for(Ce=0;Ce<Be;++Ce){var Te=U[Ce];if(typeof Te!="number"){var Re=!1,Oe=(Te.isSpace?$e:0)+Pe,je=Te.fontChar,We=Te.accent,Ze=void 0,Xe=void 0,Ge=Te.width;if(be){var Qe=Te.vmetric||De,rt=-(Te.vmetric?Qe[1]:.5*Ge)*ve,dt=Qe[2]*ve;Ge=Qe?-Qe[0]:Ge,Ze=rt/Se,Xe=(Ee+dt)/Se}else Ze=Ee/Se,Xe=0;if(H.remeasure&&Ge>0){var qe=1e3*fe.measureText(je).width/X*Se;if(Ge<qe&&this.isFontSubpixelAAEnabled){var He=Ge/qe;Re=!0,fe.save(),fe.scale(He,1),Ze/=He}else Ge!==qe&&(Ze+=(Ge-qe)/2e3*X/Se)}if(this.contentVisible&&(Te.isInFont||H.missingFile)){if(ye&&!We)fe.fillText(je,Ze,Xe);else if(this.paintChar(je,Ze,Xe,Q),We){var Ke=Ze+X*We.offset.x/Se,ot=Xe-X*We.offset.y/Se;this.paintChar(We.fontChar,Ke,ot,Q)}}Ee+=be?Ge*ve-Oe*Ie:Ge*ve+Oe*Ie,Re&&fe.restore()}else Ee+=Ve*Te*X/1e3}be?W.y-=Ee:W.x+=Ee*Ne,fe.restore(),this.compose()}}},{key:"showType3Text",value:function(U){var W,H,X,Q,fe=this.ctx,Se=this.current,Pe=Se.font,$e=Se.fontSize,Ie=Se.fontDirection,Ne=Pe.vertical?1:-1,Be=Se.charSpacing,be=Se.wordSpacing,Ve=Se.textHScale*Ie,De=Se.fontMatrix||o.FONT_IDENTITY_MATRIX,ve=U.length;if(Se.textRenderingMode!==o.TextRenderingMode.INVISIBLE&&$e!==0){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,fe.save(),fe.transform.apply(fe,_toConsumableArray$1(Se.textMatrix)),fe.translate(Se.x,Se.y),fe.scale(Ve,Ie),W=0;W<ve;++W)if(typeof(H=U[W])!="number"){var ye=(H.isSpace?be:0)+Be,we=Pe.charProcOperatorList[H.operatorListId];we?(this.contentVisible&&(this.processingType3=H,this.save(),fe.scale($e,$e),fe.transform.apply(fe,_toConsumableArray$1(De)),this.executeOperatorList(we),this.restore()),X=o.Util.applyTransform([H.width,0],De)[0]*$e+ye,fe.translate(X,0),Se.x+=X*Ve):(0,o.warn)('Type3 character "'.concat(H.operatorListId,'" is not available.'))}else Q=Ne*H*$e/1e3,this.ctx.translate(Q,0),Se.x+=Q*Ve;fe.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(U,W){}},{key:"setCharWidthAndBounds",value:function(U,W,H,X,Q,fe){this.ctx.rect(H,X,Q-H,fe-X),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(U){var W,H=this;if(U[0]==="TilingPattern"){var X=U[1],Q=this.baseTransform||(0,s.getCurrentTransform)(this.ctx),fe={createCanvasGraphics:function(Se){return new O(Se,H.commonObjs,H.objs,H.canvasFactory,H.filterFactory,{optionalContentConfig:H.optionalContentConfig,markedContentStack:H.markedContentStack})}};W=new u.TilingPattern(U,X,this.ctx,fe,Q)}else W=this._getPattern(U[1],U[2]);return W}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(U,W,H){var X=o.Util.makeHexColor(U,W,H);this.ctx.strokeStyle=X,this.current.strokeColor=X}},{key:"setFillRGBColor",value:function(U,W,H){var X=o.Util.makeHexColor(U,W,H);this.ctx.fillStyle=X,this.current.fillColor=X,this.current.patternFill=!1}},{key:"_getPattern",value:function(U){var W,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this.cachedPatterns.has(U)?W=this.cachedPatterns.get(U):(W=(0,u.getShadingPattern)(this.getObject(U)),this.cachedPatterns.set(U,W)),H&&(W.matrix=H),W}},{key:"shadingFill",value:function(U){if(this.contentVisible){var W=this.ctx;this.save();var H=this._getPattern(U);W.fillStyle=H.getPattern(W,this,(0,s.getCurrentTransformInverse)(W),u.PathType.SHADING);var X=(0,s.getCurrentTransformInverse)(W);if(X){var Q=W.canvas,fe=Q.width,Se=Q.height,Pe=o.Util.applyTransform([0,0],X),$e=o.Util.applyTransform([0,Se],X),Ie=o.Util.applyTransform([fe,0],X),Ne=o.Util.applyTransform([fe,Se],X),Be=Math.min(Pe[0],$e[0],Ie[0],Ne[0]),be=Math.min(Pe[1],$e[1],Ie[1],Ne[1]),Ve=Math.max(Pe[0],$e[0],Ie[0],Ne[0]),De=Math.max(Pe[1],$e[1],Ie[1],Ne[1]);this.ctx.fillRect(Be,be,Ve-Be,De-be)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,o.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,o.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(U,W){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(U)&&U.length===6&&this.transform.apply(this,_toConsumableArray$1(U)),this.baseTransform=(0,s.getCurrentTransform)(this.ctx),W)){var H=W[2]-W[0],X=W[3]-W[1];this.ctx.rect(W[0],W[1],H,X),this.current.updateRectMinMax((0,s.getCurrentTransform)(this.ctx),W),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(U){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var W=this.ctx;U.isolated||(0,o.info)("TODO: Support non-isolated groups."),U.knockout&&(0,o.warn)("Knockout groups not supported.");var H=(0,s.getCurrentTransform)(W);if(U.matrix&&W.transform.apply(W,_toConsumableArray$1(U.matrix)),!U.bbox)throw new Error("Bounding box is required.");var X=o.Util.getAxialAlignedBoundingBox(U.bbox,(0,s.getCurrentTransform)(W)),Q=[0,0,W.canvas.width,W.canvas.height];X=o.Util.intersect(X,Q)||[0,0,0,0];var fe=Math.floor(X[0]),Se=Math.floor(X[1]),Pe=Math.max(Math.ceil(X[2])-fe,1),$e=Math.max(Math.ceil(X[3])-Se,1),Ie=1,Ne=1;Pe>y&&(Ie=Pe/y,Pe=y),$e>y&&(Ne=$e/y,$e=y),this.current.startNewPathAndClipBox([0,0,Pe,$e]);var Be="groupAt"+this.groupLevel;U.smask&&(Be+="_smask_"+this.smaskCounter++%2);var be=this.cachedCanvases.getCanvas(Be,Pe,$e),Ve=be.context;Ve.scale(1/Ie,1/Ne),Ve.translate(-fe,-Se),Ve.transform.apply(Ve,_toConsumableArray$1(H)),U.smask?this.smaskStack.push({canvas:be.canvas,context:Ve,offsetX:fe,offsetY:Se,scaleX:Ie,scaleY:Ne,subtype:U.smask.subtype,backdrop:U.smask.backdrop,transferMap:U.smask.transferMap||null,startTransformInverse:null}):(W.setTransform(1,0,0,1,0,0),W.translate(fe,Se),W.scale(Ie,Ne),W.save()),M(W,Ve),this.ctx=Ve,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(W),this.groupLevel++}}},{key:"endGroup",value:function(U){if(this.contentVisible){this.groupLevel--;var W=this.ctx,H=this.groupStack.pop();if(this.ctx=H,this.ctx.imageSmoothingEnabled=!1,U.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{var X;this.ctx.restore();var Q=(0,s.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),(X=this.ctx).setTransform.apply(X,_toConsumableArray$1(Q));var fe=o.Util.getAxialAlignedBoundingBox([0,0,W.canvas.width,W.canvas.height],Q);this.ctx.drawImage(W.canvas,0,0),this.ctx.restore(),this.compose(fe)}}}},{key:"beginAnnotation",value:function(U,W,H,X,Q){var fe;if(m(this,j,le).call(this),E(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&(fe=this.ctx).setTransform.apply(fe,_toConsumableArray$1(this.baseTransform)),Array.isArray(W)&&W.length===4){var Se=W[2]-W[0],Pe=W[3]-W[1];if(Q&&this.annotationCanvasMap){(H=H.slice())[4]-=W[0],H[5]-=W[1],(W=W.slice())[0]=W[1]=0,W[2]=Se,W[3]=Pe;var $e=_slicedToArray(o.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(this.ctx)),2),Ie=$e[0],Ne=$e[1],Be=this.viewportScale,be=Math.ceil(Se*this.outputScaleX*Be),Ve=Math.ceil(Pe*this.outputScaleY*Be);this.annotationCanvas=this.canvasFactory.create(be,Ve);var De=this.annotationCanvas,ve=De.canvas,ye=De.context;this.annotationCanvasMap.set(U,ve),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ye,this.ctx.setTransform(Ie,0,0,-Ne,0,Pe*Ne),E(this.ctx)}else E(this.ctx),this.ctx.rect(W[0],W[1],Se,Pe),this.ctx.clip(),this.endPath()}this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,_toConsumableArray$1(H)),this.transform.apply(this,_toConsumableArray$1(X))}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(U){if(this.contentVisible){var W=U.count;(U=this.getObject(U.data,U)).count=W;var H=this.ctx,X=this.processingType3;if(X&&(X.compiled===void 0&&(X.compiled=function(Se){var Pe=Se.width,$e=Se.height;if(Pe>1e3||$e>1e3)return null;var Ie,Ne,Be,be,Ve=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),De=Pe+1,ve=new Uint8Array(De*($e+1)),ye=Pe+7&-8,we=new Uint8Array(ye*$e),ke=0,Me=_createForOfIteratorHelper(Se.data);try{for(Me.s();!(be=Me.n()).done;)for(var Le=be.value,Fe=128;Fe>0;)we[ke++]=Le&Fe?0:255,Fe>>=1}catch(We){Me.e(We)}finally{Me.f()}var ze=0;for(we[ke=0]!==0&&(ve[0]=1,++ze),Ne=1;Ne<Pe;Ne++)we[ke]!==we[ke+1]&&(ve[Ne]=we[ke]?2:1,++ze),ke++;for(we[ke]!==0&&(ve[Ne]=2,++ze),Ie=1;Ie<$e;Ie++){Be=Ie*De,we[(ke=Ie*ye)-ye]!==we[ke]&&(ve[Be]=we[ke]?1:8,++ze);var te=(we[ke]?4:0)+(we[ke-ye]?8:0);for(Ne=1;Ne<Pe;Ne++)Ve[te=(te>>2)+(we[ke+1]?4:0)+(we[ke-ye+1]?8:0)]&&(ve[Be+Ne]=Ve[te],++ze),ke++;if(we[ke-ye]!==we[ke]&&(ve[Be+Ne]=we[ke]?2:4,++ze),ze>1e3)return null}for(Be=Ie*De,we[ke=ye*($e-1)]!==0&&(ve[Be]=8,++ze),Ne=1;Ne<Pe;Ne++)we[ke]!==we[ke+1]&&(ve[Be+Ne]=we[ke]?4:8,++ze),ke++;if(we[ke]!==0&&(ve[Be+Ne]=4,++ze),ze>1e3)return null;var oe=new Int32Array([0,De,-1,0,-De,0,0,0,1]),_e=new Path2D;for(Ie=0;ze&&Ie<=$e;Ie++){for(var Ce=Ie*De,Ee=Ce+Pe;Ce<Ee&&!ve[Ce];)Ce++;if(Ce!==Ee){_e.moveTo(Ce%De,Ie);var Te=Ce,Re=ve[Ce];do{var Oe=oe[Re];do Ce+=Oe;while(!ve[Ce]);var je=ve[Ce];je!==5&&je!==10?(Re=je,ve[Ce]=0):(Re=je&51*Re>>4,ve[Ce]&=Re>>2|Re<<2),_e.lineTo(Ce%De,Ce/De|0),ve[Ce]||--ze}while(Te!==Ce);--Ie}}return we=null,ve=null,function(We){We.save(),We.scale(1/Pe,-1/$e),We.translate(0,-$e),We.fill(_e),We.beginPath(),We.restore()}}(U)),X.compiled))X.compiled(H);else{var Q=this._createMaskCanvas(U),fe=Q.canvas;H.save(),H.setTransform(1,0,0,1,0,0),H.drawImage(fe,Q.offsetX,Q.offsetY),H.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function(U,W){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,Q=arguments.length>4?arguments[4]:void 0,fe=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){U=this.getObject(U.data,U);var Se=this.ctx;Se.save();var Pe=(0,s.getCurrentTransform)(Se);Se.transform(W,H,X,Q,0,0);var $e=this._createMaskCanvas(U);Se.setTransform(1,0,0,1,$e.offsetX-Pe[4],$e.offsetY-Pe[5]);for(var Ie=0,Ne=fe.length;Ie<Ne;Ie+=2){var Be=o.Util.transform(Pe,[W,H,X,Q,fe[Ie],fe[Ie+1]]),be=_slicedToArray(o.Util.applyTransform([0,0],Be),2),Ve=be[0],De=be[1];Se.drawImage($e.canvas,Ve,De)}Se.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(U){if(this.contentVisible){var W,H=this.ctx,X=this.current.fillColor,Q=this.current.patternFill,fe=_createForOfIteratorHelper(U);try{for(fe.s();!(W=fe.n()).done;){var Se=W.value,Pe=Se.data,$e=Se.width,Ie=Se.height,Ne=Se.transform,Be=this.cachedCanvases.getCanvas("maskCanvas",$e,Ie),be=Be.context;be.save(),S(be,this.getObject(Pe,Se)),be.globalCompositeOperation="source-in",be.fillStyle=Q?X.getPattern(be,this,(0,s.getCurrentTransformInverse)(H),u.PathType.FILL):X,be.fillRect(0,0,$e,Ie),be.restore(),H.save(),H.transform.apply(H,_toConsumableArray$1(Ne)),H.scale(1,-1),w(H,Be.canvas,0,0,$e,Ie,0,-1,1,1),H.restore()}}catch(Ve){fe.e(Ve)}finally{fe.f()}this.compose()}}},{key:"paintImageXObject",value:function(U){if(this.contentVisible){var W=this.getObject(U);W?this.paintInlineImageXObject(W):(0,o.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(U,W,H,X){if(this.contentVisible){var Q=this.getObject(U);if(Q){for(var fe=Q.width,Se=Q.height,Pe=[],$e=0,Ie=X.length;$e<Ie;$e+=2)Pe.push({transform:[W,0,0,H,X[$e],X[$e+1]],x:0,y:0,w:fe,h:Se});this.paintInlineImageXObjectGroup(Q,Pe)}else(0,o.warn)("Dependent image isn't ready yet")}}},{key:"applyTransferMapsToCanvas",value:function(U){return this.current.transferMaps!=="none"&&(U.filter=this.current.transferMaps,U.drawImage(U.canvas,0,0),U.filter="none"),U.canvas}},{key:"applyTransferMapsToBitmap",value:function(U){if(this.current.transferMaps==="none")return U.bitmap;var W=U.bitmap,H=U.width,X=U.height,Q=this.cachedCanvases.getCanvas("inlineImage",H,X),fe=Q.context;return fe.filter=this.current.transferMaps,fe.drawImage(W,0,0),fe.filter="none",Q.canvas}},{key:"paintInlineImageXObject",value:function(U){if(this.contentVisible){var W,H=U.width,X=U.height,Q=this.ctx;if(this.save(),f.isNodeJS||(Q.filter="none"),Q.scale(1/H,-1/X),U.bitmap)W=this.applyTransferMapsToBitmap(U);else if(typeof HTMLElement=="function"&&U instanceof HTMLElement||!U.data)W=U;else{var fe=this.cachedCanvases.getCanvas("inlineImage",H,X).context;k(fe,U),W=this.applyTransferMapsToCanvas(fe)}var Se=this._scaleImage(W,(0,s.getCurrentTransformInverse)(Q));Q.imageSmoothingEnabled=I((0,s.getCurrentTransform)(Q),U.interpolate),w(Q,Se.img,0,0,Se.paintWidth,Se.paintHeight,0,-X,H,X),this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(U,W){if(this.contentVisible){var H,X=this.ctx;if(U.bitmap)H=U.bitmap;else{var Q=U.width,fe=U.height,Se=this.cachedCanvases.getCanvas("inlineImage",Q,fe).context;k(Se,U),H=this.applyTransferMapsToCanvas(Se)}var Pe,$e=_createForOfIteratorHelper(W);try{for($e.s();!(Pe=$e.n()).done;){var Ie=Pe.value;X.save(),X.transform.apply(X,_toConsumableArray$1(Ie.transform)),X.scale(1,-1),w(X,H,Ie.x,Ie.y,Ie.w,Ie.h,0,-1,1,1),X.restore()}}catch(Ne){$e.e(Ne)}finally{$e.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(U){}},{key:"markPointProps",value:function(U,W){}},{key:"beginMarkedContent",value:function(U){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(U,W){U==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(W)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(U){var W=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(U);var H=this.ctx;this.pendingClip&&(W||(this.pendingClip===Z?H.clip("evenodd"):H.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),H.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var U=(0,s.getCurrentTransform)(this.ctx);if(U[1]===0&&U[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(U[0]),Math.abs(U[3]));else{var W=Math.abs(U[0]*U[3]-U[2]*U[1]),H=Math.hypot(U[0],U[2]),X=Math.hypot(U[1],U[3]);this._cachedGetSinglePixelWidth=Math.max(H,X)/W}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(!this._cachedScaleForStroking){var U,W,H=this.current.lineWidth,X=(0,s.getCurrentTransform)(this.ctx);if(X[1]===0&&X[2]===0){var Q=Math.abs(X[0]),fe=Math.abs(X[3]);if(H===0)U=1/Q,W=1/fe;else{var Se=Q*H,Pe=fe*H;U=Se<1?1/Se:1,W=Pe<1?1/Pe:1}}else{var $e=Math.abs(X[0]*X[3]-X[2]*X[1]),Ie=Math.hypot(X[0],X[1]),Ne=Math.hypot(X[2],X[3]);if(H===0)U=Ne/$e,W=Ie/$e;else{var Be=H*$e;U=Ne>Be?Ne/Be:1,W=Ie>Be?Ie/Be:1}}this._cachedScaleForStroking=[U,W]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(U){var W=this.ctx,H=this.current.lineWidth,X=_slicedToArray(this.getScaleForStroking(),2),Q=X[0],fe=X[1];if(W.lineWidth=H||1,Q!==1||fe!==1){var Se,Pe,$e;U&&(Se=(0,s.getCurrentTransform)(W),Pe=W.getLineDash().slice(),$e=W.lineDashOffset),W.scale(Q,fe);var Ie=Math.max(Q,fe);W.setLineDash(W.getLineDash().map(function(Ne){return Ne/Ie})),W.lineDashOffset/=Ie,W.stroke(),U&&(W.setTransform.apply(W,_toConsumableArray$1(Se)),W.setLineDash(Pe),W.lineDashOffset=$e)}else W.stroke()}},{key:"isContentVisible",value:function(){for(var U=this.markedContentStack.length-1;U>=0;U--)if(!this.markedContentStack[U].visible)return!1;return!0}}])}();function le(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(var J in n.CanvasGraphics=ne,o.OPS)ne.prototype[J]!==void 0&&(ne.prototype[o.OPS[J]]=ne.prototype[J])},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=function(S){switch(S[0]){case"RadialAxial":return new g(S);case"Mesh":return new v(S);case"Dummy":return new _}throw new Error("Unknown IR type: ".concat(S[0]))};var o=r(1),s=r(142),u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function d(S,M){if(M){var E=M[2]-M[0],P=M[3]-M[1],T=new Path2D;T.rect(M[0],M[1],E,P),S.clip(T)}}n.PathType=u;var f=function(){return _createClass(function S(){_classCallCheck(this,S),this.constructor===S&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")},[{key:"getPattern",value:function(){(0,o.unreachable)("Abstract method `getPattern` called.")}}])}(),g=function(S){function M(E){var P;return _classCallCheck(this,M),(P=_callSuper(this,M))._type=E[1],P._bbox=E[2],P._colorStops=E[3],P._p0=E[4],P._p1=E[5],P._r0=E[6],P._r1=E[7],P.matrix=null,P}return _inherits(M,S),_createClass(M,[{key:"_createGradient",value:function(E){var P;this._type==="axial"?P=E.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=E.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var T,D=_createForOfIteratorHelper(this._colorStops);try{for(D.s();!(T=D.n()).done;){var F=T.value;P.addColorStop(F[0],F[1])}}catch(I){D.e(I)}finally{D.f()}return P}},{key:"getPattern",value:function(E,P,T,D){var F;if(D===u.STROKE||D===u.FILL){var I=P.current.getClippedPathBoundingBox(D,(0,s.getCurrentTransform)(E))||[0,0,0,0],N=Math.ceil(I[2]-I[0])||1,q=Math.ceil(I[3]-I[1])||1,Y=P.cachedCanvases.getCanvas("pattern",N,q,!0),Z=Y.context;Z.clearRect(0,0,Z.canvas.width,Z.canvas.height),Z.beginPath(),Z.rect(0,0,Z.canvas.width,Z.canvas.height),Z.translate(-I[0],-I[1]),T=o.Util.transform(T,[1,0,0,1,I[0],I[1]]),Z.transform.apply(Z,_toConsumableArray$1(P.baseTransform)),this.matrix&&Z.transform.apply(Z,_toConsumableArray$1(this.matrix)),d(Z,this._bbox),Z.fillStyle=this._createGradient(Z),Z.fill(),F=E.createPattern(Y.canvas,"no-repeat");var j=new DOMMatrix(T);F.setTransform(j)}else d(E,this._bbox),F=this._createGradient(E);return F}}])}(f);function m(S,M,E,P,T,D,F,I){var N,q=M.coords,Y=M.colors,Z=S.data,j=4*S.width;q[E+1]>q[P+1]&&(N=E,E=P,P=N,N=D,D=F,F=N),q[P+1]>q[T+1]&&(N=P,P=T,T=N,N=F,F=I,I=N),q[E+1]>q[P+1]&&(N=E,E=P,P=N,N=D,D=F,F=N);var ne=(q[E]+M.offsetX)*M.scaleX,le=(q[E+1]+M.offsetY)*M.scaleY,J=(q[P]+M.offsetX)*M.scaleX,O=(q[P+1]+M.offsetY)*M.scaleY,U=(q[T]+M.offsetX)*M.scaleX,W=(q[T+1]+M.offsetY)*M.scaleY;if(!(le>=W))for(var H,X,Q,fe,Se,Pe,$e,Ie,Ne=Y[D],Be=Y[D+1],be=Y[D+2],Ve=Y[F],De=Y[F+1],ve=Y[F+2],ye=Y[I],we=Y[I+1],ke=Y[I+2],Me=Math.round(le),Le=Math.round(W),Fe=Me;Fe<=Le;Fe++){if(Fe<O){var ze=void 0;H=ne-(ne-J)*(ze=Fe<le?0:(le-Fe)/(le-O)),X=Ne-(Ne-Ve)*ze,Q=Be-(Be-De)*ze,fe=be-(be-ve)*ze}else{var te=void 0;H=J-(J-U)*(te=Fe>W?1:O===W?0:(O-Fe)/(O-W)),X=Ve-(Ve-ye)*te,Q=De-(De-we)*te,fe=ve-(ve-ke)*te}var oe=void 0;Se=ne-(ne-U)*(oe=Fe<le?0:Fe>W?1:(le-Fe)/(le-W)),Pe=Ne-(Ne-ye)*oe,$e=Be-(Be-we)*oe,Ie=be-(be-ke)*oe;for(var _e=Math.round(Math.min(H,Se)),Ce=Math.round(Math.max(H,Se)),Ee=j*Fe+4*_e,Te=_e;Te<=Ce;Te++)(oe=(H-Te)/(H-Se))<0?oe=0:oe>1&&(oe=1),Z[Ee++]=X-(X-Pe)*oe|0,Z[Ee++]=Q-(Q-$e)*oe|0,Z[Ee++]=fe-(fe-Ie)*oe|0,Z[Ee++]=255}}function y(S,M,E){var P,T,D=M.coords,F=M.colors;switch(M.type){case"lattice":var I=M.verticesPerRow,N=Math.floor(D.length/I)-1,q=I-1;for(P=0;P<N;P++)for(var Y=P*I,Z=0;Z<q;Z++,Y++)m(S,E,D[Y],D[Y+1],D[Y+I],F[Y],F[Y+1],F[Y+I]),m(S,E,D[Y+I+1],D[Y+1],D[Y+I],F[Y+I+1],F[Y+1],F[Y+I]);break;case"triangles":for(P=0,T=D.length;P<T;P+=3)m(S,E,D[P],D[P+1],D[P+2],F[P],F[P+1],F[P+2]);break;default:throw new Error("illegal figure")}}var v=function(S){function M(E){var P;return _classCallCheck(this,M),(P=_callSuper(this,M))._coords=E[2],P._colors=E[3],P._figures=E[4],P._bounds=E[5],P._bbox=E[7],P._background=E[8],P.matrix=null,P}return _inherits(M,S),_createClass(M,[{key:"_createMeshCanvas",value:function(E,P,T){var D=Math.floor(this._bounds[0]),F=Math.floor(this._bounds[1]),I=Math.ceil(this._bounds[2])-D,N=Math.ceil(this._bounds[3])-F,q=Math.min(Math.ceil(Math.abs(I*E[0]*1.1)),3e3),Y=Math.min(Math.ceil(Math.abs(N*E[1]*1.1)),3e3),Z=I/q,j=N/Y,ne={coords:this._coords,colors:this._colors,offsetX:-D,offsetY:-F,scaleX:1/Z,scaleY:1/j},le=q+4,J=Y+4,O=T.getCanvas("mesh",le,J,!1),U=O.context,W=U.createImageData(q,Y);if(P)for(var H=W.data,X=0,Q=H.length;X<Q;X+=4)H[X]=P[0],H[X+1]=P[1],H[X+2]=P[2],H[X+3]=255;var fe,Se=_createForOfIteratorHelper(this._figures);try{for(Se.s();!(fe=Se.n()).done;)y(W,fe.value,ne)}catch(Pe){Se.e(Pe)}finally{Se.f()}return U.putImageData(W,2,2),{canvas:O.canvas,offsetX:D-2*Z,offsetY:F-2*j,scaleX:Z,scaleY:j}}},{key:"getPattern",value:function(E,P,T,D){var F;if(d(E,this._bbox),D===u.SHADING)F=o.Util.singularValueDecompose2dScale((0,s.getCurrentTransform)(E));else if(F=o.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){var I=o.Util.singularValueDecompose2dScale(this.matrix);F=[F[0]*I[0],F[1]*I[1]]}var N=this._createMeshCanvas(F,D===u.SHADING?null:this._background,P.cachedCanvases);return D!==u.SHADING&&(E.setTransform.apply(E,_toConsumableArray$1(P.baseTransform)),this.matrix&&E.transform.apply(E,_toConsumableArray$1(this.matrix))),E.translate(N.offsetX,N.offsetY),E.scale(N.scaleX,N.scaleY),E.createPattern(N.canvas,"no-repeat")}}])}(f),_=function(S){function M(){return _classCallCheck(this,M),_callSuper(this,M,arguments)}return _inherits(M,S),_createClass(M,[{key:"getPattern",value:function(){return"hotpink"}}])}(f),w=1,x=2,k=function(){function S(M,E,P,T,D){_classCallCheck(this,S),this.operatorList=M[2],this.matrix=M[3]||[1,0,0,1,0,0],this.bbox=M[4],this.xstep=M[5],this.ystep=M[6],this.paintType=M[7],this.tilingType=M[8],this.color=E,this.ctx=P,this.canvasGraphicsFactory=T,this.baseTransform=D}return _createClass(S,[{key:"createPatternCanvas",value:function(M){var E=this.operatorList,P=this.bbox,T=this.xstep,D=this.ystep,F=this.paintType,I=this.tilingType,N=this.color,q=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+I);var Y=P[0],Z=P[1],j=P[2],ne=P[3],le=o.Util.singularValueDecompose2dScale(this.matrix),J=o.Util.singularValueDecompose2dScale(this.baseTransform),O=[le[0]*J[0],le[1]*J[1]],U=this.getSizeAndScale(T,this.ctx.canvas.width,O[0]),W=this.getSizeAndScale(D,this.ctx.canvas.height,O[1]),H=M.cachedCanvases.getCanvas("pattern",U.size,W.size,!0),X=H.context,Q=q.createCanvasGraphics(X);Q.groupLevel=M.groupLevel,this.setFillAndStrokeStyleToContext(Q,F,N);var fe=Y,Se=Z,Pe=j,$e=ne;return Y<0&&(fe=0,Pe+=Math.abs(Y)),Z<0&&(Se=0,$e+=Math.abs(Z)),X.translate(-U.scale*fe,-W.scale*Se),Q.transform(U.scale,0,0,W.scale,0,0),X.save(),this.clipBbox(Q,fe,Se,Pe,$e),Q.baseTransform=(0,s.getCurrentTransform)(Q.ctx),Q.executeOperatorList(E),Q.endDrawing(),{canvas:H.canvas,scaleX:U.scale,scaleY:W.scale,offsetX:fe,offsetY:Se}}},{key:"getSizeAndScale",value:function(M,E,P){M=Math.abs(M);var T=Math.max(S.MAX_PATTERN_SIZE,E),D=Math.ceil(M*P);return D>=T?D=T:P=D/M,{scale:P,size:D}}},{key:"clipBbox",value:function(M,E,P,T,D){var F=T-E,I=D-P;M.ctx.rect(E,P,F,I),M.current.updateRectMinMax((0,s.getCurrentTransform)(M.ctx),[E,P,T,D]),M.clip(),M.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(M,E,P){var T=M.ctx,D=M.current;switch(E){case w:var F=this.ctx;T.fillStyle=F.fillStyle,T.strokeStyle=F.strokeStyle,D.fillColor=F.fillStyle,D.strokeColor=F.strokeStyle;break;case x:var I=o.Util.makeHexColor(P[0],P[1],P[2]);T.fillStyle=I,T.strokeStyle=I,D.fillColor=I,D.strokeColor=I;break;default:throw new o.FormatError("Unsupported paint type: ".concat(E))}}},{key:"getPattern",value:function(M,E,P,T){var D=P;T!==u.SHADING&&(D=o.Util.transform(D,E.baseTransform),this.matrix&&(D=o.Util.transform(D,this.matrix)));var F=this.createPatternCanvas(E),I=new DOMMatrix(D);I=(I=I.translate(F.offsetX,F.offsetY)).scale(1/F.scaleX,1/F.scaleY);var N=M.createPattern(F.canvas,"repeat");return N.setTransform(I),N}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}])}();n.TilingPattern=k},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.convertBlackAndWhiteToRGBA=s,n.convertToRGBA=function(u){switch(u.kind){case o.ImageKind.GRAYSCALE_1BPP:return s(u);case o.ImageKind.RGB_24BPP:return function(d){var f=d.src,g=d.srcPos,m=g===void 0?0:g,y=d.dest,v=d.destPos,_=v===void 0?0:v;d.width,d.height;var w=0,x=f.length>>2,k=new Uint32Array(f.buffer,m,x);if(o.FeatureTest.isLittleEndian){for(;w<x-2;w+=3,_+=4){var S=k[w],M=k[w+1],E=k[w+2];y[_]=4278190080|S,y[_+1]=S>>>24|M<<8|4278190080,y[_+2]=M>>>16|E<<16|4278190080,y[_+3]=E>>>8|4278190080}for(var P=4*w,T=f.length;P<T;P+=3)y[_++]=f[P]|f[P+1]<<8|f[P+2]<<16|4278190080}else{for(;w<x-2;w+=3,_+=4){var D=k[w],F=k[w+1],I=k[w+2];y[_]=255|D,y[_+1]=D<<24|F>>>8|255,y[_+2]=F<<16|I>>>16|255,y[_+3]=I<<8|255}for(var N=4*w,q=f.length;N<q;N+=3)y[_++]=f[N]<<24|f[N+1]<<16|f[N+2]<<8|255}return{srcPos:m,destPos:_}}(u)}return null},n.grayToRGBA=function(u,d){if(o.FeatureTest.isLittleEndian)for(var f=0,g=u.length;f<g;f++)d[f]=65793*u[f]|4278190080;else for(var m=0,y=u.length;m<y;m++)d[m]=16843008*u[m]|255};var o=r(1);function s(u){var d=u.src,f=u.srcPos,g=f===void 0?0:f,m=u.dest,y=u.width,v=u.height,_=u.nonBlackColor,w=_===void 0?4294967295:_,x=u.inverseDecode,k=x!==void 0&&x,S=o.FeatureTest.isLittleEndian?4278190080:255,M=_slicedToArray(k?[w,S]:[S,w],2),E=M[0],P=M[1],T=y>>3,D=7&y,F=d.length;m=new Uint32Array(m.buffer);for(var I=0,N=0;N<v;N++){for(var q=g+T;g<q;g++){var Y=g<F?d[g]:255;m[I++]=128&Y?P:E,m[I++]=64&Y?P:E,m[I++]=32&Y?P:E,m[I++]=16&Y?P:E,m[I++]=8&Y?P:E,m[I++]=4&Y?P:E,m[I++]=2&Y?P:E,m[I++]=1&Y?P:E}if(D!==0)for(var Z=g<F?d[g++]:255,j=0;j<D;j++)m[I++]=Z&1<<7-j?P:E}return{srcPos:g,destPos:I}}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;var r=Object.create(null);n.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var o=r(1),s=1,u=2,d=1,f=2,g=3,m=4,y=5,v=6,_=7,w=8;function x(S){switch(S instanceof Error||_typeof$1(S)==="object"&&S!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new o.AbortException(S.message);case"MissingPDFException":return new o.MissingPDFException(S.message);case"PasswordException":return new o.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new o.UnknownErrorException(S.message,S.details);default:return new o.UnknownErrorException(S.message,S.toString())}}var k=function(){return _createClass(function M(E,P,T){var D=this;_classCallCheck(this,M),this.sourceName=E,this.targetName=P,this.comObj=T,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(F){var I=F.data;if(I.targetName===D.sourceName)if(I.stream)D._processStreamMessage(I);else if(I.callback){var N=I.callbackId,q=D.callbackCapabilities[N];if(!q)throw new Error("Cannot resolve callback ".concat(N));if(delete D.callbackCapabilities[N],I.callback===s)q.resolve(I.data);else{if(I.callback!==u)throw new Error("Unexpected callback case");q.reject(x(I.reason))}}else{var Y=D.actionHandler[I.action];if(!Y)throw new Error("Unknown action from worker: ".concat(I.action));if(I.callbackId){var Z=D.sourceName,j=I.sourceName;new Promise(function(ne){ne(Y(I.data))}).then(function(ne){T.postMessage({sourceName:Z,targetName:j,callback:s,callbackId:I.callbackId,data:ne})},function(ne){T.postMessage({sourceName:Z,targetName:j,callback:u,callbackId:I.callbackId,reason:x(ne)})})}else I.streamId?D._createStreamSink(I):Y(I.data)}},T.addEventListener("message",this._onComObjOnMessage)},[{key:"on",value:function(M,E){var P=this.actionHandler;if(P[M])throw new Error('There is already an actionName called "'.concat(M,'"'));P[M]=E}},{key:"send",value:function(M,E,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,data:E},P)}},{key:"sendWithPromise",value:function(M,E,P){var T=this.callbackId++,D=(0,o.createPromiseCapability)();this.callbackCapabilities[T]=D;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,callbackId:T,data:E},P)}catch(F){D.reject(F)}return D.promise}},{key:"sendWithStream",value:function(M,E,P,T){var D=this,F=this.streamId++,I=this.sourceName,N=this.targetName,q=this.comObj;return new ReadableStream({start:function(Y){var Z=(0,o.createPromiseCapability)();return D.streamControllers[F]={controller:Y,startCall:Z,pullCall:null,cancelCall:null,isClosed:!1},q.postMessage({sourceName:I,targetName:N,action:M,streamId:F,data:E,desiredSize:Y.desiredSize},T),Z.promise},pull:function(Y){var Z=(0,o.createPromiseCapability)();return D.streamControllers[F].pullCall=Z,q.postMessage({sourceName:I,targetName:N,stream:v,streamId:F,desiredSize:Y.desiredSize}),Z.promise},cancel:function(Y){(0,o.assert)(Y instanceof Error,"cancel must have a valid reason");var Z=(0,o.createPromiseCapability)();return D.streamControllers[F].cancelCall=Z,D.streamControllers[F].isClosed=!0,q.postMessage({sourceName:I,targetName:N,stream:d,streamId:F,reason:x(Y)}),Z.promise}},P)}},{key:"_createStreamSink",value:function(M){var E=M.streamId,P=this.sourceName,T=M.sourceName,D=this.comObj,F=this,I=this.actionHandler[M.action],N={enqueue:function(q){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Z=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var j=this.desiredSize;this.desiredSize-=Y,j>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),D.postMessage({sourceName:P,targetName:T,stream:m,streamId:E,chunk:q},Z)}},close:function(){this.isCancelled||(this.isCancelled=!0,D.postMessage({sourceName:P,targetName:T,stream:g,streamId:E}),delete F.streamSinks[E])},error:function(q){(0,o.assert)(q instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,D.postMessage({sourceName:P,targetName:T,stream:y,streamId:E,reason:x(q)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:M.desiredSize,ready:null};N.sinkCapability.resolve(),N.ready=N.sinkCapability.promise,this.streamSinks[E]=N,new Promise(function(q){q(I(M.data,N))}).then(function(){D.postMessage({sourceName:P,targetName:T,stream:w,streamId:E,success:!0})},function(q){D.postMessage({sourceName:P,targetName:T,stream:w,streamId:E,reason:x(q)})})}},{key:"_processStreamMessage",value:function(M){var E=M.streamId,P=this.sourceName,T=M.sourceName,D=this.comObj,F=this.streamControllers[E],I=this.streamSinks[E];switch(M.stream){case w:M.success?F.startCall.resolve():F.startCall.reject(x(M.reason));break;case _:M.success?F.pullCall.resolve():F.pullCall.reject(x(M.reason));break;case v:if(!I){D.postMessage({sourceName:P,targetName:T,stream:_,streamId:E,success:!0});break}I.desiredSize<=0&&M.desiredSize>0&&I.sinkCapability.resolve(),I.desiredSize=M.desiredSize,new Promise(function(N){N(I.onPull&&I.onPull())}).then(function(){D.postMessage({sourceName:P,targetName:T,stream:_,streamId:E,success:!0})},function(N){D.postMessage({sourceName:P,targetName:T,stream:_,streamId:E,reason:x(N)})});break;case m:if((0,o.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(M.chunk);break;case g:if((0,o.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),this._deleteStreamController(F,E);break;case y:(0,o.assert)(F,"error should have stream controller"),F.controller.error(x(M.reason)),this._deleteStreamController(F,E);break;case f:M.success?F.cancelCall.resolve():F.cancelCall.reject(x(M.reason)),this._deleteStreamController(F,E);break;case d:if(!I)break;new Promise(function(N){N(I.onCancel&&I.onCancel(x(M.reason)))}).then(function(){D.postMessage({sourceName:P,targetName:T,stream:f,streamId:E,success:!0})},function(N){D.postMessage({sourceName:P,targetName:T,stream:f,streamId:E,reason:x(N)})}),I.sinkCapability.reject(x(M.reason)),I.isCancelled=!0,delete this.streamSinks[E];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function M(E,P){return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Promise.allSettled([E.startCall&&E.startCall.promise,E.pullCall&&E.pullCall.promise,E.cancelCall&&E.cancelCall.promise]);case 2:delete this.streamControllers[P];case 3:case"end":return T.stop()}},M,this)})),function(M,E){return S.apply(this,arguments)})},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]);var S}();n.MessageHandler=k},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var o=r(1),s=new WeakMap,u=new WeakMap,d=function(){return _createClass(function f(g){_classCallCheck(this,f),_classPrivateFieldInitSpec(this,s,void 0),_classPrivateFieldInitSpec(this,u,void 0);var m=g.parsedData,y=g.rawData;_classPrivateFieldSet2(s,this,m),_classPrivateFieldSet2(u,this,y)},[{key:"getRaw",value:function(){return _classPrivateFieldGet2(u,this)}},{key:"get",value:function(f){var g;return(g=_classPrivateFieldGet2(s,this).get(f))!==null&&g!==void 0?g:null}},{key:"getAll",value:function(){return(0,o.objectFromMap)(_classPrivateFieldGet2(s,this))}},{key:"has",value:function(f){return _classPrivateFieldGet2(s,this).has(f)}}])}();n.Metadata=d},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var o=r(1),s=r(144);function u(D,F,I){d(D,F),F.set(D,I)}function d(D,F){if(F.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function f(D,F,I){if(!F.has(D))throw new TypeError("attempted to get private field on non-instance");return I}function g(D,F){return function(I,N){return N.get?N.get.call(I):N.value}(D,y(D,F,"get"))}function m(D,F,I){return function(N,q,Y){if(q.set)q.set.call(N,Y);else{if(!q.writable)throw new TypeError("attempted to set read only private field");q.value=Y}}(D,y(D,F,"set"),I),I}function y(D,F,I){if(!F.has(D))throw new TypeError("attempted to "+I+" private field on non-instance");return F.get(D)}var v=Symbol("INTERNAL"),_=new WeakMap,w=function(){return _createClass(function D(F,I){_classCallCheck(this,D),_classPrivateFieldInitSpec(this,_,!0),this.name=F,this.intent=I},[{key:"visible",get:function(){return _classPrivateFieldGet2(_,this)}},{key:"_setVisible",value:function(D,F){D!==v&&(0,o.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet2(_,this,F)}}])}(),x=new WeakMap,k=new WeakMap,S=new WeakMap,M=new WeakMap,E=new WeakSet,P=function(){return _createClass(function D(F){var I,N;if(_classCallCheck(this,D),d(I=this,N=E),N.add(I),u(this,x,{writable:!0,value:null}),u(this,k,{writable:!0,value:new Map}),u(this,S,{writable:!0,value:null}),u(this,M,{writable:!0,value:null}),this.name=null,this.creator=null,F!==null){this.name=F.name,this.creator=F.creator,m(this,M,F.order);var q,Y=_createForOfIteratorHelper(F.groups);try{for(Y.s();!(q=Y.n()).done;){var Z=q.value;g(this,k).set(Z.id,new w(Z.name,Z.intent))}}catch(X){Y.e(X)}finally{Y.f()}if(F.baseState==="OFF"){var j,ne=_createForOfIteratorHelper(g(this,k).values());try{for(ne.s();!(j=ne.n()).done;)j.value._setVisible(v,!1)}catch(X){ne.e(X)}finally{ne.f()}}var le,J=_createForOfIteratorHelper(F.on);try{for(J.s();!(le=J.n()).done;){var O=le.value;g(this,k).get(O)._setVisible(v,!0)}}catch(X){J.e(X)}finally{J.f()}var U,W=_createForOfIteratorHelper(F.off);try{for(W.s();!(U=W.n()).done;){var H=U.value;g(this,k).get(H)._setVisible(v,!1)}}catch(X){W.e(X)}finally{W.f()}m(this,S,this.getHash())}},[{key:"isVisible",value:function(D){if(g(this,k).size===0)return!0;if(!D)return(0,o.warn)("Optional content group not defined."),!0;if(D.type==="OCG")return g(this,k).has(D.id)?g(this,k).get(D.id).visible:((0,o.warn)("Optional content group not found: ".concat(D.id)),!0);if(D.type==="OCMD"){if(D.expression)return f(this,E,T).call(this,D.expression);if(!D.policy||D.policy==="AnyOn"){var F,I=_createForOfIteratorHelper(D.ids);try{for(I.s();!(F=I.n()).done;){var N=F.value;if(!g(this,k).has(N))return(0,o.warn)("Optional content group not found: ".concat(N)),!0;if(g(this,k).get(N).visible)return!0}}catch(W){I.e(W)}finally{I.f()}return!1}if(D.policy==="AllOn"){var q,Y=_createForOfIteratorHelper(D.ids);try{for(Y.s();!(q=Y.n()).done;){var Z=q.value;if(!g(this,k).has(Z))return(0,o.warn)("Optional content group not found: ".concat(Z)),!0;if(!g(this,k).get(Z).visible)return!1}}catch(W){Y.e(W)}finally{Y.f()}return!0}if(D.policy==="AnyOff"){var j,ne=_createForOfIteratorHelper(D.ids);try{for(ne.s();!(j=ne.n()).done;){var le=j.value;if(!g(this,k).has(le))return(0,o.warn)("Optional content group not found: ".concat(le)),!0;if(!g(this,k).get(le).visible)return!0}}catch(W){ne.e(W)}finally{ne.f()}return!1}if(D.policy==="AllOff"){var J,O=_createForOfIteratorHelper(D.ids);try{for(O.s();!(J=O.n()).done;){var U=J.value;if(!g(this,k).has(U))return(0,o.warn)("Optional content group not found: ".concat(U)),!0;if(g(this,k).get(U).visible)return!1}}catch(W){O.e(W)}finally{O.f()}return!0}return(0,o.warn)("Unknown optional content policy ".concat(D.policy,".")),!0}return(0,o.warn)("Unknown group type ".concat(D.type,".")),!0}},{key:"setVisibility",value:function(D){var F=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];g(this,k).has(D)?(g(this,k).get(D)._setVisible(v,!!F),m(this,x,null)):(0,o.warn)("Optional content group not found: ".concat(D))}},{key:"hasInitialVisibility",get:function(){return this.getHash()===g(this,S)}},{key:"getOrder",value:function(){return g(this,k).size?g(this,M)?g(this,M).slice():_toConsumableArray$1(g(this,k).keys()):null}},{key:"getGroups",value:function(){return g(this,k).size>0?(0,o.objectFromMap)(g(this,k)):null}},{key:"getGroup",value:function(D){return g(this,k).get(D)||null}},{key:"getHash",value:function(){if(g(this,x)!==null)return g(this,x);var D,F=new s.MurmurHash3_64,I=_createForOfIteratorHelper(g(this,k));try{for(I.s();!(D=I.n()).done;){var N=_slicedToArray(D.value,2),q=N[0],Y=N[1];F.update("".concat(q,":").concat(Y.visible))}}catch(Z){I.e(Z)}finally{I.f()}return m(this,x,F.hexdigest())}}])}();function T(D){var F=D.length;if(F<2)return!0;for(var I=D[0],N=1;N<F;N++){var q=D[N],Y=void 0;if(Array.isArray(q))Y=f(this,E,T).call(this,q);else{if(!g(this,k).has(q))return(0,o.warn)("Optional content group not found: ".concat(q)),!0;Y=g(this,k).get(q).visible}switch(I){case"And":if(!Y)return!1;break;case"Or":if(Y)return!0;break;case"Not":return!Y;default:return!0}}return I==="And"}n.OptionalContentConfig=P},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var o=r(1),s=r(142),u=function(){return _createClass(function g(m,y){var v=this;_classCallCheck(this,g);var _=m.length,w=m.initialData,x=m.progressiveDone,k=x!==void 0&&x,S=m.contentDispositionFilename,M=S===void 0?null:S,E=m.disableRange,P=E!==void 0&&E,T=m.disableStream,D=T!==void 0&&T;if((0,o.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=k,this._contentDispositionFilename=M,(w==null?void 0:w.length)>0){var F=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;this._queuedChunks.push(F)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!D,this._isRangeSupported=!P,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(I,N){v._onReceiveData({begin:I,chunk:N})}),this._pdfDataRangeTransport.addProgressListener(function(I,N){v._onProgress({loaded:I,total:N})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(I){v._onReceiveData({chunk:I})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){v._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()},[{key:"_onReceiveData",value:function(g){var m=g.begin,y=g.chunk,v=y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength?y.buffer:new Uint8Array(y).buffer;if(m===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(v):this._queuedChunks.push(v);else{var _=this._rangeReaders.some(function(w){return w._begin===m&&(w._enqueue(v),!0)});(0,o.assert)(_,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var g,m;return(g=(m=this._fullRequestReader)===null||m===void 0?void 0:m._loaded)!==null&&g!==void 0?g:0}},{key:"_onProgress",value:function(g){var m,y,v,_;g.total===void 0?(m=this._rangeReaders[0])===null||m===void 0||(y=m.onProgress)===null||y===void 0||y.call(m,{loaded:g.loaded}):(v=this._fullRequestReader)===null||v===void 0||(_=v.onProgress)===null||_===void 0||_.call(v,{loaded:g.loaded,total:g.total})}},{key:"_onProgressiveDone",value:function(){var g;(g=this._fullRequestReader)===null||g===void 0||g.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(g){var m=this._rangeReaders.indexOf(g);m>=0&&this._rangeReaders.splice(m,1)}},{key:"getFullReader",value:function(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var g=this._queuedChunks;return this._queuedChunks=null,new d(this,g,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(g,m){if(m<=this._progressiveDataLength)return null;var y=new f(this,g,m);return this._pdfDataRangeTransport.requestDataRange(g,m),this._rangeReaders.push(y),y}},{key:"cancelAllRequests",value:function(g){var m;(m=this._fullRequestReader)===null||m===void 0||m.cancel(g);var y,v=_createForOfIteratorHelper(this._rangeReaders.slice(0));try{for(v.s();!(y=v.n()).done;)y.value.cancel(g)}catch(_){v.e(_)}finally{v.f()}this._pdfDataRangeTransport.abort()}}])}();n.PDFDataTransportStream=u;var d=function(){return _createClass(function m(y,v){_classCallCheck(this,m);var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=y,this._done=_||!1,this._filename=(0,s.isPdfFile)(w)?w:null,this._queuedChunks=v||[],this._loaded=0;var x,k=_createForOfIteratorHelper(this._queuedChunks);try{for(k.s();!(x=k.n()).done;){var S=x.value;this._loaded+=S.byteLength}}catch(M){k.e(M)}finally{k.f()}this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null},[{key:"_enqueue",value:function(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var y,v;return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(this._queuedChunks.length>0)){_.next=3;break}return y=this._queuedChunks.shift(),_.abrupt("return",{value:y,done:!1});case 3:if(!this._done){_.next=5;break}return _.abrupt("return",{value:void 0,done:!0});case 5:return v=(0,o.createPromiseCapability)(),this._requests.push(v),_.abrupt("return",v.promise);case 8:case"end":return _.stop()}},m,this)})),function(){return g.apply(this,arguments)})},{key:"cancel",value:function(m){this._done=!0;var y,v=_createForOfIteratorHelper(this._requests);try{for(v.s();!(y=v.n()).done;)y.value.resolve({value:void 0,done:!0})}catch(_){v.e(_)}finally{v.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]);var g}(),f=function(){return _createClass(function m(y,v,_){_classCallCheck(this,m),this._stream=y,this._begin=v,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null},[{key:"_enqueue",value:function(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});var y,v=_createForOfIteratorHelper(this._requests);try{for(v.s();!(y=v.n()).done;)y.value.resolve({value:void 0,done:!0})}catch(_){v.e(_)}finally{v.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var y,v;return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!this._queuedChunk){_.next=4;break}return y=this._queuedChunk,this._queuedChunk=null,_.abrupt("return",{value:y,done:!1});case 4:if(!this._done){_.next=6;break}return _.abrupt("return",{value:void 0,done:!0});case 6:return v=(0,o.createPromiseCapability)(),this._requests.push(v),_.abrupt("return",v.promise);case 9:case"end":return _.stop()}},m,this)})),function(){return g.apply(this,arguments)})},{key:"cancel",value:function(m){this._done=!0;var y,v=_createForOfIteratorHelper(this._requests);try{for(v.s();!(y=v.n()).done;)y.value.resolve({value:void 0,done:!0})}catch(_){v.e(_)}finally{v.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]);var g}()},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;var r=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"textContent",value:function(s){var u=[],d={items:u,styles:Object.create(null)};return function f(g){var m;if(g){var y=null,v=g.name;if(v==="#text")y=g.value;else{if(!o.shouldBuildText(v))return;g!=null&&(m=g.attributes)!==null&&m!==void 0&&m.textContent?y=g.attributes.textContent:g.value&&(y=g.value)}if(y!==null&&u.push({str:y}),g.children){var _,w=_createForOfIteratorHelper(g.children);try{for(w.s();!(_=w.n()).done;)f(_.value)}catch(x){w.e(x)}finally{w.f()}}}}(s),d}},{key:"shouldBuildText",value:function(s){return!(s==="textarea"||s==="input"||s==="option"||s==="select")}}])}();n.XfaText=r},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeFilterFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var o=r(143),s=function(m){return new Promise(function(y,v){require$$0.readFile(m,function(_,w){!_&&w?y(new Uint8Array(w)):v(new Error(_))})})},u=function(m){function y(){return _classCallCheck(this,y),_callSuper(this,y,arguments)}return _inherits(y,m),_createClass(y)}(o.BaseFilterFactory);n.NodeFilterFactory=u;var d=function(m){function y(){return _classCallCheck(this,y),_callSuper(this,y,arguments)}return _inherits(y,m),_createClass(y,[{key:"_createCanvas",value:function(v,_){return require$$0.createCanvas(v,_)}}])}(o.BaseCanvasFactory);n.NodeCanvasFactory=d;var f=function(m){function y(){return _classCallCheck(this,y),_callSuper(this,y,arguments)}return _inherits(y,m),_createClass(y,[{key:"_fetchData",value:function(v,_){return s(v).then(function(w){return{cMapData:w,compressionType:_}})}}])}(o.BaseCMapReaderFactory);n.NodeCMapReaderFactory=f;var g=function(m){function y(){return _classCallCheck(this,y),_callSuper(this,y,arguments)}return _inherits(y,m),_createClass(y,[{key:"_fetchData",value:function(v){return s(v)}}])}(o.BaseStandardFontDataFactory);n.NodeStandardFontDataFactory=g},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var o=r(1),s=r(157),u=require$$0,d=require$$0,f=require$$0,g=require$$0,m=/^file:\/\/\/[a-zA-Z]:\//,y=function(){return _createClass(function E(P){var T,D;_classCallCheck(this,E),this.source=P,this.url=(T=P.url,(D=g.parse(T)).protocol==="file:"||D.host?D:/^[a-z]:[/\\]/i.test(T)?g.parse("file:///".concat(T)):(D.host||(D.protocol="file:"),D)),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_progressiveDataLength",get:function(){var E,P;return(E=(P=this._fullRequestReader)===null||P===void 0?void 0:P._loaded)!==null&&E!==void 0?E:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new x(this),this._fullRequestReader}},{key:"getRangeReader",value:function(E,P){if(P<=this._progressiveDataLength)return null;var T=this.isFsUrl?new M(this,E,P):new k(this,E,P);return this._rangeRequestReaders.push(T),T}},{key:"cancelAllRequests",value:function(E){var P;(P=this._fullRequestReader)===null||P===void 0||P.cancel(E);var T,D=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(D.s();!(T=D.n()).done;)T.value.cancel(E)}catch(F){D.e(F)}finally{D.f()}}}])}();n.PDFNodeStream=y;var v=function(){return _createClass(function P(T){_classCallCheck(this,P),this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null;var D=T.source;this._contentLength=D.length,this._loaded=0,this._filename=null,this._disableRange=D.disableRange||!1,this._rangeChunkSize=D.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!D.disableStream,this._isRangeSupported=!D.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()},[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function P(){var T,D,F;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this._readCapability.promise;case 2:if(!this._done){I.next=4;break}return I.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){I.next=6;break}throw this._storedError;case 6:if((D=this._readableStream.read())!==null){I.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),I.abrupt("return",this.read());case 10:return this._loaded+=D.length,(T=this.onProgress)===null||T===void 0||T.call(this,{loaded:this._loaded,total:this._contentLength}),F=new Uint8Array(D).buffer,I.abrupt("return",{value:F,done:!1});case 14:case"end":return I.stop()}},P,this)})),function(){return E.apply(this,arguments)})},{key:"cancel",value:function(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}},{key:"_error",value:function(P){this._storedError=P,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(P){var T=this;this._readableStream=P,P.on("readable",function(){T._readCapability.resolve()}),P.on("end",function(){P.destroy(),T._done=!0,T._readCapability.resolve()}),P.on("error",function(D){T._error(D)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var E}(),_=function(){return _createClass(function P(T){_classCallCheck(this,P),this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();var D=T.source;this._isStreamingSupported=!D.disableStream},[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function P(){var T,D,F;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this._readCapability.promise;case 2:if(!this._done){I.next=4;break}return I.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){I.next=6;break}throw this._storedError;case 6:if((D=this._readableStream.read())!==null){I.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),I.abrupt("return",this.read());case 10:return this._loaded+=D.length,(T=this.onProgress)===null||T===void 0||T.call(this,{loaded:this._loaded}),F=new Uint8Array(D).buffer,I.abrupt("return",{value:F,done:!1});case 14:case"end":return I.stop()}},P,this)})),function(){return E.apply(this,arguments)})},{key:"cancel",value:function(P){this._readableStream?this._readableStream.destroy(P):this._error(P)}},{key:"_error",value:function(P){this._storedError=P,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(P){var T=this;this._readableStream=P,P.on("readable",function(){T._readCapability.resolve()}),P.on("end",function(){P.destroy(),T._done=!0,T._readCapability.resolve()}),P.on("error",function(D){T._error(D)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var E}();function w(E,P){return{protocol:E.protocol,auth:E.auth,host:E.hostname,port:E.port,path:E.path,method:"GET",headers:P}}var x=function(E){function P(T){var D;_classCallCheck(this,P);var F=function(I){if(I.statusCode===404){var N=new o.MissingPDFException('Missing PDF "'.concat(D._url,'".'));return D._storedError=N,void D._headersCapability.reject(N)}D._headersCapability.resolve(),D._setReadableStream(I);var q=function(ne){return D._readableStream.headers[ne.toLowerCase()]},Y=(0,s.validateRangeRequestCapabilities)({getResponseHeader:q,isHttp:T.isHttp,rangeChunkSize:D._rangeChunkSize,disableRange:D._disableRange}),Z=Y.allowRangeRequests,j=Y.suggestedLength;D._isRangeSupported=Z,D._contentLength=j||D._contentLength,D._filename=(0,s.extractFilenameFromHeader)(q)};return(D=_callSuper(this,P,[T]))._request=null,D._url.protocol==="http:"?D._request=d.request(w(D._url,T.httpHeaders),F):D._request=f.request(w(D._url,T.httpHeaders),F),D._request.on("error",function(I){D._storedError=I,D._headersCapability.reject(I)}),D._request.end(),D}return _inherits(P,E),_createClass(P)}(v),k=function(E){function P(T,D,F){var I;for(var N in _classCallCheck(this,P),(I=_callSuper(this,P,[T]))._httpHeaders={},T.httpHeaders){var q=T.httpHeaders[N];q!==void 0&&(I._httpHeaders[N]=q)}I._httpHeaders.Range="bytes=".concat(D,"-").concat(F-1);var Y=function(Z){if(Z.statusCode!==404)I._setReadableStream(Z);else{var j=new o.MissingPDFException('Missing PDF "'.concat(I._url,'".'));I._storedError=j}};return I._request=null,I._url.protocol==="http:"?I._request=d.request(w(I._url,I._httpHeaders),Y):I._request=f.request(w(I._url,I._httpHeaders),Y),I._request.on("error",function(Z){I._storedError=Z}),I._request.end(),I}return _inherits(P,E),_createClass(P)}(_),S=function(E){function P(T){var D;_classCallCheck(this,P),D=_callSuper(this,P,[T]);var F=decodeURIComponent(D._url.path);return m.test(D._url.href)&&(F=F.replace(/^\//,"")),u.lstat(F,function(I,N){if(I)return I.code==="ENOENT"&&(I=new o.MissingPDFException('Missing PDF "'.concat(F,'".'))),D._storedError=I,void D._headersCapability.reject(I);D._contentLength=N.size,D._setReadableStream(u.createReadStream(F)),D._headersCapability.resolve()}),D}return _inherits(P,E),_createClass(P)}(v),M=function(E){function P(T,D,F){var I;_classCallCheck(this,P),I=_callSuper(this,P,[T]);var N=decodeURIComponent(I._url.path);return m.test(I._url.href)&&(N=N.replace(/^\//,"")),I._setReadableStream(u.createReadStream(N,{start:D,end:F-1})),I}return _inherits(P,E),_createClass(P)}(_)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=function(d,f){return d===404||d===0&&f.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+f+'".'):new o.UnexpectedResponseException("Unexpected server response (".concat(d,') while retrieving PDF "').concat(f,'".'),d)},n.extractFilenameFromHeader=function(d){var f=d("Content-Disposition");if(f){var g=(0,s.getFilenameFromContentDispositionHeader)(f);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,u.isPdfFile)(g))return g}return null},n.validateRangeRequestCapabilities=function(d){var f=d.getResponseHeader,g=d.isHttp,m=d.rangeChunkSize,y=d.disableRange,v={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(f("Content-Length"),10);return Number.isInteger(_)&&(v.suggestedLength=_,_<=2*m||y||!g||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(v.allowRangeRequests=!0)),v},n.validateResponseStatus=function(d){return d===200||d===206};var o=r(1),s=r(158),u=r(142)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=function(s){var u=!0,d=m("filename\\*","i").exec(s);if(d){var f=_(d=d[1]);return v(f=x(f=w(f=unescape(f))))}if(d=function(k){for(var S,M=[],E=m("filename\\*((?!0\\d)\\d+)(\\*?)","ig");(S=E.exec(k))!==null;){var P=_slicedToArray(S,4),T=P[1],D=P[2],F=P[3];if((T=parseInt(T,10))in M){if(T===0)break}else M[T]=[D,F]}for(var I=[],N=0;N<M.length&&N in M;++N){var q=_slicedToArray(M[N],2),Y=q[0],Z=q[1];Z=_(Z),Y&&(Z=unescape(Z),N===0&&(Z=w(Z))),I.push(Z)}return I.join("")}(s))return v(x(d));if(d=m("filename","i").exec(s)){var g=_(d=d[1]);return v(g=x(g))}function m(k,S){return new RegExp("(?:^|;)\\s*"+k+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function y(k,S){if(k){if(!/^[\x00-\xFF]+$/.test(S))return S;try{var M=new TextDecoder(k,{fatal:!0}),E=(0,o.stringToBytes)(S);S=M.decode(E),u=!1}catch{}}return S}function v(k){return u&&/[\x80-\xff]/.test(k)&&(k=y("utf-8",k),u&&(k=y("iso-8859-1",k))),k}function _(k){if(k.startsWith('"')){for(var S=k.slice(1).split('\\"'),M=0;M<S.length;++M){var E=S[M].indexOf('"');E!==-1&&(S[M]=S[M].slice(0,E),S.length=M+1),S[M]=S[M].replaceAll(/\\(.)/g,"$1")}k=S.join('"')}return k}function w(k){var S=k.indexOf("'");return S===-1?k:y(k.slice(0,S),k.slice(S+1).replace(/^[^']*'/,""))}function x(k){return!k.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(k)?k:k.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,M,E,P){if(E==="q"||E==="Q")return y(M,P=(P=P.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(T,D){return String.fromCharCode(parseInt(D,16))}));try{P=atob(P)}catch{}return y(M,P)})}return""};var o=r(1)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var o=r(1),s=r(157),u=function(){return _createClass(function m(y){_classCallCheck(this,m);var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&v.httpHeaders||Object.create(null),this.withCredentials=v.withCredentials||!1,this.getXhr=v.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)},[{key:"requestRange",value:function(m,y,v){var _={begin:m,end:y};for(var w in v)_[w]=v[w];return this.request(_)}},{key:"requestFull",value:function(m){return this.request(m)}},{key:"request",value:function(m){var y=this.getXhr(),v=this.currXhrId++,_=this.pendingRequests[v]={xhr:y};for(var w in y.open("GET",this.url),y.withCredentials=this.withCredentials,this.httpHeaders){var x=this.httpHeaders[w];x!==void 0&&y.setRequestHeader(w,x)}return this.isHttp&&"begin"in m&&"end"in m?(y.setRequestHeader("Range","bytes=".concat(m.begin,"-").concat(m.end-1)),_.expectedStatus=206):_.expectedStatus=200,y.responseType="arraybuffer",m.onError&&(y.onerror=function(k){m.onError(y.status)}),y.onreadystatechange=this.onStateChange.bind(this,v),y.onprogress=this.onProgress.bind(this,v),_.onHeadersReceived=m.onHeadersReceived,_.onDone=m.onDone,_.onError=m.onError,_.onProgress=m.onProgress,y.send(null),v}},{key:"onProgress",value:function(m,y){var v,_=this.pendingRequests[m];_&&((v=_.onProgress)===null||v===void 0||v.call(_,y))}},{key:"onStateChange",value:function(m,y){var v=this.pendingRequests[m];if(v){var _=v.xhr;if(_.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),_.readyState===4&&m in this.pendingRequests)if(delete this.pendingRequests[m],_.status===0&&this.isHttp){var w;(w=v.onError)===null||w===void 0||w.call(v,_.status)}else{var x=_.status||200;if(x===200&&v.expectedStatus===206||x===v.expectedStatus){var k=function(T){var D=T.response;return typeof D!="string"?D:(0,o.stringToBytes)(D).buffer}(_);if(x===206){var S=_.getResponseHeader("Content-Range"),M=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);v.onDone({begin:parseInt(M[1],10),chunk:k})}else if(k)v.onDone({begin:0,chunk:k});else{var E;(E=v.onError)===null||E===void 0||E.call(v,_.status)}}else{var P;(P=v.onError)===null||P===void 0||P.call(v,_.status)}}}}},{key:"getRequestXhr",value:function(m){return this.pendingRequests[m].xhr}},{key:"isPendingRequest",value:function(m){return m in this.pendingRequests}},{key:"abortRequest",value:function(m){var y=this.pendingRequests[m].xhr;delete this.pendingRequests[m],y.abort()}}])}(),d=function(){return _createClass(function m(y){_classCallCheck(this,m),this._source=y,this._manager=new u(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_onRangeRequestReaderClosed",value:function(m){var y=this._rangeRequestReaders.indexOf(m);y>=0&&this._rangeRequestReaders.splice(y,1)}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(m,y){var v=new g(this._manager,m,y);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}},{key:"cancelAllRequests",value:function(m){var y;(y=this._fullRequestReader)===null||y===void 0||y.cancel(m);var v,_=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(_.s();!(v=_.n()).done;)v.value.cancel(m)}catch(w){_.e(w)}finally{_.f()}}}])}();n.PDFNetworkStream=d;var f=function(){return _createClass(function y(v,_){_classCallCheck(this,y),this._manager=v;var w={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._fullRequestId=v.requestFull(w),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=_.disableRange||!1,this._contentLength=_.length,this._rangeChunkSize=_.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null},[{key:"_onHeadersReceived",value:function(){var y=this._fullRequestId,v=this._manager.getRequestXhr(y),_=function(S){return v.getResponseHeader(S)},w=(0,s.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),x=w.allowRangeRequests,k=w.suggestedLength;x&&(this._isRangeSupported=!0),this._contentLength=k||this._contentLength,this._filename=(0,s.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){var v,_=_createForOfIteratorHelper(this._requests);try{for(_.s();!(v=_.n()).done;)v.value.resolve({value:void 0,done:!0})}catch(w){_.e(w)}finally{_.f()}this._requests.length=0}}},{key:"_onError",value:function(y){this._storedError=(0,s.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);var v,_=_createForOfIteratorHelper(this._requests);try{for(_.s();!(v=_.n()).done;)v.value.reject(this._storedError)}catch(w){_.e(w)}finally{_.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(y){var v;(v=this.onProgress)===null||v===void 0||v.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var v,_;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!this._storedError){w.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){w.next=5;break}return v=this._cachedChunks.shift(),w.abrupt("return",{value:v,done:!1});case 5:if(!this._done){w.next=7;break}return w.abrupt("return",{value:void 0,done:!0});case 7:return _=(0,o.createPromiseCapability)(),this._requests.push(_),w.abrupt("return",_.promise);case 10:case"end":return w.stop()}},y,this)})),function(){return m.apply(this,arguments)})},{key:"cancel",value:function(y){this._done=!0,this._headersReceivedCapability.reject(y);var v,_=_createForOfIteratorHelper(this._requests);try{for(_.s();!(v=_.n()).done;)v.value.resolve({value:void 0,done:!0})}catch(w){_.e(w)}finally{_.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]);var m}(),g=function(){return _createClass(function y(v,_,w){_classCallCheck(this,y),this._manager=v;var x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._requestId=v.requestRange(_,w,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null},[{key:"_close",value:function(){var y;(y=this.onClosed)===null||y===void 0||y.call(this,this)}},{key:"_onDone",value:function(y){var v=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunk=v,this._done=!0;var _,w=_createForOfIteratorHelper(this._requests);try{for(w.s();!(_=w.n()).done;)_.value.resolve({value:void 0,done:!0})}catch(x){w.e(x)}finally{w.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(y){this._storedError=(0,s.createResponseStatusError)(y,this._url);var v,_=_createForOfIteratorHelper(this._requests);try{for(_.s();!(v=_.n()).done;)v.value.reject(this._storedError)}catch(w){_.e(w)}finally{_.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(y){var v;this.isStreamingSupported||(v=this.onProgress)===null||v===void 0||v.call(this,{loaded:y.loaded})}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var v,_;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!this._storedError){w.next=2;break}throw this._storedError;case 2:if(this._queuedChunk===null){w.next=6;break}return v=this._queuedChunk,this._queuedChunk=null,w.abrupt("return",{value:v,done:!1});case 6:if(!this._done){w.next=8;break}return w.abrupt("return",{value:void 0,done:!0});case 8:return _=(0,o.createPromiseCapability)(),this._requests.push(_),w.abrupt("return",_.promise);case 11:case"end":return w.stop()}},y,this)})),function(){return m.apply(this,arguments)})},{key:"cancel",value:function(y){this._done=!0;var v,_=_createForOfIteratorHelper(this._requests);try{for(_.s();!(v=_.n()).done;)v.value.resolve({value:void 0,done:!0})}catch(w){_.e(w)}finally{_.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]);var m}()},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var o=r(1),s=r(157);function u(v,_,w){return{method:"GET",headers:v,signal:w.signal,mode:"cors",credentials:_?"include":"same-origin",redirect:"follow"}}function d(v){var _=new Headers;for(var w in v){var x=v[w];x!==void 0&&_.append(w,x)}return _}function f(v){return v instanceof Uint8Array?v.buffer:v instanceof ArrayBuffer?v:((0,o.warn)("getArrayBuffer - unexpected data format: ".concat(v)),new Uint8Array(v).buffer)}var g=function(){return _createClass(function v(_){_classCallCheck(this,v),this.source=_,this.isHttp=/^https?:/i.test(_.url),this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_progressiveDataLength",get:function(){var v,_;return(v=(_=this._fullRequestReader)===null||_===void 0?void 0:_._loaded)!==null&&v!==void 0?v:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}},{key:"getRangeReader",value:function(v,_){if(_<=this._progressiveDataLength)return null;var w=new y(this,v,_);return this._rangeRequestReaders.push(w),w}},{key:"cancelAllRequests",value:function(v){var _;(_=this._fullRequestReader)===null||_===void 0||_.cancel(v);var w,x=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(x.s();!(w=x.n()).done;)w.value.cancel(v)}catch(k){x.e(k)}finally{x.f()}}}])}();n.PDFFetchStream=g;var m=function(){return _createClass(function _(w){var x=this;_classCallCheck(this,_),this._stream=w,this._reader=null,this._loaded=0,this._filename=null;var k=w.source;this._withCredentials=k.withCredentials||!1,this._contentLength=k.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=k.disableRange||!1,this._rangeChunkSize=k.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!k.disableStream,this._isRangeSupported=!k.disableRange,this._headers=d(this._stream.httpHeaders);var S=k.url;fetch(S,u(this._headers,this._withCredentials,this._abortController)).then(function(M){if(!(0,s.validateResponseStatus)(M.status))throw(0,s.createResponseStatusError)(M.status,S);x._reader=M.body.getReader(),x._headersCapability.resolve();var E=function(F){return M.headers.get(F)},P=(0,s.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:x._stream.isHttp,rangeChunkSize:x._rangeChunkSize,disableRange:x._disableRange}),T=P.allowRangeRequests,D=P.suggestedLength;x._isRangeSupported=T,x._contentLength=D||x._contentLength,x._filename=(0,s.extractFilenameFromHeader)(E),!x._isStreamingSupported&&x._isRangeSupported&&x.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null},[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function _(){var w,x,k,S;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,this._headersCapability.promise;case 2:return M.next=4,this._reader.read();case 4:if(x=M.sent,k=x.value,!(S=x.done)){M.next=9;break}return M.abrupt("return",{value:k,done:S});case 9:return this._loaded+=k.byteLength,(w=this.onProgress)===null||w===void 0||w.call(this,{loaded:this._loaded,total:this._contentLength}),M.abrupt("return",{value:f(k),done:!1});case 12:case"end":return M.stop()}},_,this)})),function(){return v.apply(this,arguments)})},{key:"cancel",value:function(_){var w;(w=this._reader)===null||w===void 0||w.cancel(_),this._abortController.abort()}}]);var v}(),y=function(){return _createClass(function _(w,x,k){var S=this;_classCallCheck(this,_),this._stream=w,this._reader=null,this._loaded=0;var M=w.source;this._withCredentials=M.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!M.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(x,"-").concat(k-1));var E=M.url;fetch(E,u(this._headers,this._withCredentials,this._abortController)).then(function(P){if(!(0,s.validateResponseStatus)(P.status))throw(0,s.createResponseStatusError)(P.status,E);S._readCapability.resolve(),S._reader=P.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null},[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function _(){var w,x,k,S;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,this._readCapability.promise;case 2:return M.next=4,this._reader.read();case 4:if(x=M.sent,k=x.value,!(S=x.done)){M.next=9;break}return M.abrupt("return",{value:k,done:S});case 9:return this._loaded+=k.byteLength,(w=this.onProgress)===null||w===void 0||w.call(this,{loaded:this._loaded}),M.abrupt("return",{value:f(k),done:!1});case 12:case"end":return M.stop()}},_,this)})),function(){return v.apply(this,arguments)})},{key:"cancel",value:function(_){var w;(w=this._reader)===null||w===void 0||w.cancel(_),this._abortController.abort()}}]);var v}()},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=function(v){v.textContentSource||!v.textContent&&!v.textContentStream||((0,s.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),v.textContentSource=v.textContent||v.textContentStream);var _=v.container,w=v.viewport,x=getComputedStyle(_),k=x.getPropertyValue("visibility"),S=parseFloat(x.getPropertyValue("--scale-factor"));k==="visible"&&(!S||Math.abs(S-w.scale)>1e-15)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");var M=new y(v);return M._render(),M},n.updateTextLayer=function(v){var _=v.container,w=v.viewport,x=v.textDivs,k=v.textDivProperties,S=v.isOffscreenCanvasSupported,M=v.mustRotate,E=M===void 0||M,P=v.mustRescale,T=P===void 0||P;if(E&&(0,s.setLayerDimensions)(_,{rotation:w.rotation}),T){var D,F=f(0,S),I={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:F},N=_createForOfIteratorHelper(x);try{for(N.s();!(D=N.n()).done;){var q=D.value;I.properties=k.get(q),I.div=q,m(I)}}catch(Y){N.e(Y)}finally{N.f()}}};var o=r(1),s=r(142),u=30,d=new Map;function f(v,_){var w;if(_&&o.FeatureTest.isOffscreenCanvasSupported)w=new OffscreenCanvas(v,v).getContext("2d",{alpha:!1});else{var x=document.createElement("canvas");x.width=x.height=v,w=x.getContext("2d",{alpha:!1})}return w}function g(v,_,w){var x=document.createElement("span"),k={angle:0,canvasWidth:0,hasText:_.str!=="",hasEOL:_.hasEOL,fontSize:0};v._textDivs.push(x);var S=o.Util.transform(v._transform,_.transform),M=Math.atan2(S[1],S[0]),E=w[_.fontName];E.vertical&&(M+=Math.PI/2);var P,T,D=Math.hypot(S[2],S[3]),F=D*function(j,ne){var le=d.get(j);if(le)return le;var J=f(u,ne);J.font="".concat(u,"px ").concat(j);var O=J.measureText(""),U=O.fontBoundingBoxAscent,W=Math.abs(O.fontBoundingBoxDescent);if(U){var H=U/(U+W);return d.set(j,H),J.canvas.width=J.canvas.height=0,H}J.strokeStyle="red",J.clearRect(0,0,u,u),J.strokeText("g",0,0);var X=J.getImageData(0,0,u,u).data;W=0;for(var Q=X.length-1-3;Q>=0;Q-=4)if(X[Q]>0){W=Math.ceil(Q/4/u);break}J.clearRect(0,0,u,u),J.strokeText("A",0,u),U=0;for(var fe=0,Se=(X=J.getImageData(0,0,u,u).data).length;fe<Se;fe+=4)if(X[fe]>0){U=u-Math.floor(fe/4/u);break}if(J.canvas.width=J.canvas.height=0,U){var Pe=U/(U+W);return d.set(j,Pe),Pe}return d.set(j,.8),.8}(E.fontFamily,v._isOffscreenCanvasSupported);M===0?(P=S[4],T=S[5]-F):(P=S[4]+F*Math.sin(M),T=S[5]-F*Math.cos(M));var I="calc(var(--scale-factor)*",N=x.style;v._container===v._rootContainer?(N.left="".concat((100*P/v._pageWidth).toFixed(2),"%"),N.top="".concat((100*T/v._pageHeight).toFixed(2),"%")):(N.left="".concat(I).concat(P.toFixed(2),"px)"),N.top="".concat(I).concat(T.toFixed(2),"px)")),N.fontSize="".concat(I).concat(D.toFixed(2),"px)"),N.fontFamily=E.fontFamily,k.fontSize=D,x.setAttribute("role","presentation"),x.textContent=_.str,x.dir=_.dir,v._fontInspectorEnabled&&(x.dataset.fontName=_.fontName),M!==0&&(k.angle=M*(180/Math.PI));var q=!1;if(_.str.length>1)q=!0;else if(_.str!==" "&&_.transform[0]!==_.transform[3]){var Y=Math.abs(_.transform[0]),Z=Math.abs(_.transform[3]);Y!==Z&&Math.max(Y,Z)/Math.min(Y,Z)>1.5&&(q=!0)}q&&(k.canvasWidth=E.vertical?_.height:_.width),v._textDivProperties.set(x,k),v._isReadableStream&&v._layoutText(x)}function m(v){var _=v.div,w=v.scale,x=v.properties,k=v.ctx,S=v.prevFontSize,M=v.prevFontFamily,E=_.style,P="";if(x.canvasWidth!==0&&x.hasText){var T=E.fontFamily,D=x.canvasWidth,F=x.fontSize;S===F&&M===T||(k.font="".concat(F*w,"px ").concat(T),v.prevFontSize=F,v.prevFontFamily=T);var I=k.measureText(_.textContent).width;I>0&&(P="scaleX(".concat(D*w/I,")"))}x.angle!==0&&(P="rotate(".concat(x.angle,"deg) ").concat(P)),P.length>0&&(E.transform=P)}var y=function(){return _createClass(function v(_){var w,x=this;_classCallCheck(this,v);var k=_.textContentSource,S=_.container,M=_.viewport,E=_.textDivs,P=_.textDivProperties,T=_.textContentItemsStr,D=_.isOffscreenCanvasSupported;this._textContentSource=k,this._isReadableStream=k instanceof ReadableStream,this._container=this._rootContainer=S,this._textDivs=E||[],this._textContentItemsStr=T||[],this._isOffscreenCanvasSupported=D,this._fontInspectorEnabled=!((w=globalThis.FontInspector)===null||w===void 0||!w.enabled),this._reader=null,this._textDivProperties=P||new WeakMap,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:M.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:f(0,D)};var F=M.rawDims,I=F.pageWidth,N=F.pageHeight,q=F.pageX,Y=F.pageY;this._transform=[1,0,0,-1,-q,Y+N],this._pageWidth=I,this._pageHeight=N,(0,s.setLayerDimensions)(S,M),this._capability.promise.finally(function(){x._layoutTextParams=null}).catch(function(){})},[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}},{key:"_processItems",value:function(v,_){var w,x=_createForOfIteratorHelper(v);try{for(x.s();!(w=x.n()).done;){var k=w.value;if(k.str!==void 0)this._textContentItemsStr.push(k.str),g(this,k,_);else if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){var S=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id","".concat(k.id)),S.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode)}}catch(M){x.e(M)}finally{x.f()}}},{key:"_layoutText",value:function(v){var _=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,m(this._layoutTextParams),_.hasText&&this._container.append(v),_.hasEOL){var w=document.createElement("br");w.setAttribute("role","presentation"),this._container.append(w)}}},{key:"_render",value:function(){var v=this,_=(0,o.createPromiseCapability)(),w=Object.create(null);if(this._isReadableStream){var x=function(){v._reader.read().then(function(E){var P=E.value;E.done?_.resolve():(Object.assign(w,P.styles),v._processItems(P.items,w),x())},_.reject)};this._reader=this._textContentSource.getReader(),x()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');var k=this._textContentSource,S=k.items,M=k.styles;this._processItems(S,M),_.resolve()}_.promise.then(function(){w=null,function(E){if(!E._canceled){var P=E._textDivs,T=E._capability;if(P.length>1e5)T.resolve();else{if(!E._isReadableStream){var D,F=_createForOfIteratorHelper(P);try{for(F.s();!(D=F.n()).done;){var I=D.value;E._layoutText(I)}}catch(N){F.e(N)}finally{F.f()}}T.resolve()}}}(v)},this._capability.reject)}}])}();n.TextLayerRenderTask=y},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var o=r(1),s=r(141),u=r(163),d=r(164),f=r(142);function g(H,X){y(H,X),X.add(H)}function m(H,X,Q){y(H,X),X.set(H,Q)}function y(H,X){if(X.has(H))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(H,X,Q){if(!X.has(H))throw new TypeError("attempted to get private field on non-instance");return Q}function _(H,X){return function(Q,fe){return fe.get?fe.get.call(Q):fe.value}(H,x(H,X,"get"))}function w(H,X,Q){return function(fe,Se,Pe){if(Se.set)Se.set.call(fe,Pe);else{if(!Se.writable)throw new TypeError("attempted to set read only private field");Se.value=Pe}}(H,x(H,X,"set"),Q),Q}function x(H,X,Q){if(!X.has(H))throw new TypeError("attempted to "+Q+" private field on non-instance");return X.get(H)}var k,S,M,E=new WeakMap,P=new WeakMap,T=new WeakMap,D=new WeakMap,F=new WeakMap,I=new WeakMap,N=new WeakMap,q=new WeakMap,Y=new WeakSet,Z=new WeakSet,j=new WeakSet,ne=new WeakSet,le=function(){return _createClass(function H(X){_classCallCheck(this,H),g(this,ne),g(this,j),g(this,Z),g(this,Y),m(this,E,{writable:!0,value:void 0}),m(this,P,{writable:!0,value:!1}),m(this,T,{writable:!0,value:this.pointerup.bind(this)}),m(this,D,{writable:!0,value:this.pointerdown.bind(this)}),m(this,F,{writable:!0,value:new Map}),m(this,I,{writable:!0,value:!1}),m(this,N,{writable:!0,value:!1}),m(this,q,{writable:!0,value:void 0}),H._initialized||(H._initialized=!0,u.FreeTextEditor.initialize(X.l10n),d.InkEditor.initialize(X.l10n)),X.uiManager.registerEditorTypes([u.FreeTextEditor,d.InkEditor]),w(this,q,X.uiManager),this.pageIndex=X.pageIndex,this.div=X.div,w(this,E,X.accessibilityManager),_(this,q).addLayer(this)},[{key:"isEmpty",get:function(){return _(this,F).size===0}},{key:"updateToolbar",value:function(H){_(this,q).updateToolbar(H)}},{key:"updateMode",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_(this,q).getMode();v(this,ne,W).call(this),H===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_(this,q).unselectAll(),H!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",H===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",H===o.AnnotationEditorType.INK),this.div.hidden=!1)}},{key:"addInkEditorIfNeeded",value:function(H){if(H||_(this,q).getMode()===o.AnnotationEditorType.INK){if(!H){var X,Q=_createForOfIteratorHelper(_(this,F).values());try{for(Q.s();!(X=Q.n()).done;){var fe=X.value;if(fe.isEmpty())return void fe.setInBackground()}}catch(Se){Q.e(Se)}finally{Q.f()}}v(this,j,U).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(H){_(this,q).setEditingState(H)}},{key:"addCommands",value:function(H){_(this,q).addCommands(H)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var H,X=_createForOfIteratorHelper(_(this,F).values());try{for(X.s();!(H=X.n()).done;)H.value.enableEditing()}catch(Q){X.e(Q)}finally{X.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var H,X=_createForOfIteratorHelper(_(this,F).values());try{for(X.s();!(H=X.n()).done;)H.value.disableEditing()}catch(Q){X.e(Q)}finally{X.f()}v(this,ne,W).call(this),this.isEmpty&&(this.div.hidden=!0)}},{key:"setActiveEditor",value:function(H){_(this,q).getActive()!==H&&_(this,q).setActiveEditor(H)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",_(this,D)),this.div.addEventListener("pointerup",_(this,T))}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",_(this,D)),this.div.removeEventListener("pointerup",_(this,T))}},{key:"attach",value:function(H){_(this,F).set(H.id,H)}},{key:"detach",value:function(H){var X;_(this,F).delete(H.id),(X=_(this,E))===null||X===void 0||X.removePointerInTextLayer(H.contentDiv)}},{key:"remove",value:function(H){var X=this;_(this,q).removeEditor(H),this.detach(H),H.div.style.display="none",setTimeout(function(){H.div.style.display="",H.div.remove(),H.isAttachedToDOM=!1,document.activeElement===document.body&&_(X,q).focusMainContainer()},0),_(this,N)||this.addInkEditorIfNeeded(!1)}},{key:"add",value:function(H){if(v(this,Y,J).call(this,H),_(this,q).addEditor(H),this.attach(H),!H.isAttachedToDOM){var X=H.render();this.div.append(X),H.isAttachedToDOM=!0}this.moveEditorInDOM(H),H.onceAdded(),_(this,q).addToAnnotationStorage(H)}},{key:"moveEditorInDOM",value:function(H){var X;(X=_(this,E))===null||X===void 0||X.moveElementInDOM(this.div,H.div,H.contentDiv,!0)}},{key:"addOrRebuild",value:function(H){H.needsToBeRebuilt()?H.rebuild():this.add(H)}},{key:"addANewEditor",value:function(H){var X=this;this.addCommands({cmd:function(){X.addOrRebuild(H)},undo:function(){H.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function(H){var X=this;this.addCommands({cmd:function(){X.addOrRebuild(H)},undo:function(){H.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return _(this,q).getId()}},{key:"deserialize",value:function(H){switch(H.annotationType){case o.AnnotationEditorType.FREETEXT:return u.FreeTextEditor.deserialize(H,this,_(this,q));case o.AnnotationEditorType.INK:return d.InkEditor.deserialize(H,this,_(this,q))}return null}},{key:"setSelected",value:function(H){_(this,q).setSelected(H)}},{key:"toggleSelected",value:function(H){_(this,q).toggleSelected(H)}},{key:"isSelected",value:function(H){return _(this,q).isSelected(H)}},{key:"unselect",value:function(H){_(this,q).unselect(H)}},{key:"pointerup",value:function(H){var X=o.FeatureTest.platform.isMac;H.button!==0||H.ctrlKey&&X||H.target===this.div&&_(this,I)&&(w(this,I,!1),_(this,P)?v(this,j,U).call(this,H):w(this,P,!0))}},{key:"pointerdown",value:function(H){var X=o.FeatureTest.platform.isMac;if(!(H.button!==0||H.ctrlKey&&X)&&H.target===this.div){w(this,I,!0);var Q=_(this,q).getActive();w(this,P,!Q||Q.isEmpty())}}},{key:"drop",value:function(H){var X=H.dataTransfer.getData("text/plain"),Q=_(this,q).getEditor(X);if(Q){H.preventDefault(),H.dataTransfer.dropEffect="move",v(this,Y,J).call(this,Q);var fe=this.div.getBoundingClientRect(),Se=H.clientX-fe.x,Pe=H.clientY-fe.y;Q.translate(Se-Q.startX,Pe-Q.startY),this.moveEditorInDOM(Q),Q.div.focus()}}},{key:"dragover",value:function(H){H.preventDefault()}},{key:"destroy",value:function(){var H;((H=_(this,q).getActive())===null||H===void 0?void 0:H.parent)===this&&_(this,q).setActiveEditor(null);var X,Q=_createForOfIteratorHelper(_(this,F).values());try{for(Q.s();!(X=Q.n()).done;){var fe,Se=X.value;(fe=_(this,E))===null||fe===void 0||fe.removePointerInTextLayer(Se.contentDiv),Se.setParent(null),Se.isAttachedToDOM=!1,Se.div.remove()}}catch(Pe){Q.e(Pe)}finally{Q.f()}this.div=null,_(this,F).clear(),_(this,q).removeLayer(this)}},{key:"render",value:function(H){var X=H.viewport;this.viewport=X,(0,f.setLayerDimensions)(this.div,X),(0,s.bindEvents)(this,this.div,["dragover","drop"]);var Q,fe=_createForOfIteratorHelper(_(this,q).getEditors(this.pageIndex));try{for(fe.s();!(Q=fe.n()).done;){var Se=Q.value;this.add(Se)}}catch(Pe){fe.e(Pe)}finally{fe.f()}this.updateMode()}},{key:"update",value:function(H){var X=H.viewport;_(this,q).commitOrRemove(),this.viewport=X,(0,f.setLayerDimensions)(this.div,{rotation:X.rotation}),this.updateMode()}},{key:"pageDimensions",get:function(){var H=this.viewport.rawDims;return[H.pageWidth,H.pageHeight]}}])}();function J(H){var X;H.parent!==this&&(this.attach(H),(X=H.parent)===null||X===void 0||X.detach(H),H.setParent(this),H.div&&H.isAttachedToDOM&&(H.div.remove(),this.div.append(H.div)))}function O(H){switch(_(this,q).getMode()){case o.AnnotationEditorType.FREETEXT:return new u.FreeTextEditor(H);case o.AnnotationEditorType.INK:return new d.InkEditor(H)}return null}function U(H){var X=this.getNextId(),Q=v(this,Z,O).call(this,{parent:this,id:X,x:H.offsetX,y:H.offsetY,uiManager:_(this,q)});return Q&&this.add(Q),Q}function W(){w(this,N,!0);var H,X=_createForOfIteratorHelper(_(this,F).values());try{for(X.s();!(H=X.n()).done;){var Q=H.value;Q.isEmpty()&&Q.remove()}}catch(fe){X.e(fe)}finally{X.f()}w(this,N,!1)}n.AnnotationEditorLayer=le,k=le,M=!1,(S=function(H){var X=function(Q,fe){if(_typeof$1(Q)!=="object"||Q===null)return Q;var Se=Q[Symbol.toPrimitive];if(Se!==void 0){var Pe=Se.call(Q,fe||"default");if(_typeof$1(Pe)!=="object")return Pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(fe==="string"?String:Number)(Q)}(H,"string");return _typeof$1(X)==="symbol"?X:String(X)}(S="_initialized"))in k?Object.defineProperty(k,S,{value:M,enumerable:!0,configurable:!0,writable:!0}):k[S]=M},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var o=r(1),s=r(141),u=r(140);function d(O,U){m(O,U),U.add(O)}function f(O,U,W){return(U=function(H){var X=function(Q,fe){if(_typeof$1(Q)!=="object"||Q===null)return Q;var Se=Q[Symbol.toPrimitive];if(Se!==void 0){var Pe=Se.call(Q,fe||"default");if(_typeof$1(Pe)!=="object")return Pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(fe==="string"?String:Number)(Q)}(H,"string");return _typeof$1(X)==="symbol"?X:String(X)}(U))in O?Object.defineProperty(O,U,{value:W,enumerable:!0,configurable:!0,writable:!0}):O[U]=W,O}function g(O,U,W){m(O,U),U.set(O,W)}function m(O,U){if(U.has(O))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(O,U){return function(W,H){return H.get?H.get.call(W):H.value}(O,w(O,U,"get"))}function v(O,U,W){if(!U.has(O))throw new TypeError("attempted to get private field on non-instance");return W}function _(O,U,W){return function(H,X,Q){if(X.set)X.set.call(H,Q);else{if(!X.writable)throw new TypeError("attempted to set read only private field");X.value=Q}}(O,w(O,U,"set"),W),W}function w(O,U,W){if(!U.has(O))throw new TypeError("attempted to "+W+" private field on non-instance");return U.get(O)}var x=new WeakMap,k=new WeakMap,S=new WeakMap,M=new WeakMap,E=new WeakMap,P=new WeakMap,T=new WeakMap,D=new WeakMap,F=new WeakMap,I=new WeakSet,N=new WeakSet,q=new WeakSet,Y=new WeakSet,Z=function(O){function U(W){var H;return _classCallCheck(this,U),d(H=_callSuper(this,U,[_objectSpread2$1(_objectSpread2$1({},W),{},{name:"freeTextEditor"})]),Y),d(H,q),d(H,N),d(H,I),g(H,x,{writable:!0,value:H.editorDivBlur.bind(H)}),g(H,k,{writable:!0,value:H.editorDivFocus.bind(H)}),g(H,S,{writable:!0,value:H.editorDivInput.bind(H)}),g(H,M,{writable:!0,value:H.editorDivKeydown.bind(H)}),g(H,E,{writable:!0,value:void 0}),g(H,P,{writable:!0,value:""}),g(H,T,{writable:!0,value:"".concat(H.id,"-editor")}),g(H,D,{writable:!0,value:!1}),g(H,F,{writable:!0,value:void 0}),_(H,E,W.color||U._defaultColor||u.AnnotationEditor._defaultLineColor),_(H,F,W.fontSize||U._defaultFontSize),H}return _inherits(U,O),_createClass(U,[{key:"updateParams",value:function(W,H){switch(W){case o.AnnotationEditorParamsType.FREETEXT_SIZE:v(this,I,j).call(this,H);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:v(this,N,ne).call(this,H)}}},{key:"propertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,y(this,F)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,y(this,E)]]}},{key:"getInitialTranslation",value:function(){var W=this.parentScale;return[-U._internalPadding*W,-(U._internalPadding+y(this,F))*W]}},{key:"rebuild",value:function(){_superPropGet(U,"rebuild",this,3)([]),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),_superPropGet(U,"enableEditMode",this,3)([]),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",y(this,M)),this.editorDiv.addEventListener("focus",y(this,k)),this.editorDiv.addEventListener("blur",y(this,x)),this.editorDiv.addEventListener("input",y(this,S)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),_superPropGet(U,"disableEditMode",this,3)([]),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",y(this,T)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",y(this,M)),this.editorDiv.removeEventListener("focus",y(this,k)),this.editorDiv.removeEventListener("blur",y(this,x)),this.editorDiv.removeEventListener("input",y(this,S)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}},{key:"focusin",value:function(W){_superPropGet(U,"focusin",this,3)([W]),W.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),_superPropGet(U,"remove",this,3)([])}},{key:"commit",value:function(){this.isInEditMode()&&(_superPropGet(U,"commit",this,3)([]),y(this,D)||(_(this,D,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_(this,P,v(this,q,le).call(this).trimEnd()),v(this,Y,J).call(this))}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(W){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(W){W.target===this.div&&W.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(W){U._keyboardManager.exec(this,W)}},{key:"editorDivFocus",value:function(W){this.isEditing=!0}},{key:"editorDivBlur",value:function(W){this.isEditing=!1}},{key:"editorDivInput",value:function(W){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){var W,H,X=this;if(this.div)return this.div;this.width&&(W=this.x,H=this.y),_superPropGet(U,"render",this,3)([]),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",y(this,T)),this.enableEditing(),U._l10nPromise.get("editor_free_text2_aria_label").then(function(be){var Ve;return(Ve=X.editorDiv)===null||Ve===void 0?void 0:Ve.setAttribute("aria-label",be)}),U._l10nPromise.get("free_text2_default_content").then(function(be){var Ve;return(Ve=X.editorDiv)===null||Ve===void 0?void 0:Ve.setAttribute("default-content",be)}),this.editorDiv.contentEditable=!0;var Q=this.editorDiv.style;if(Q.fontSize="calc(".concat(y(this,F),"px * var(--scale-factor))"),Q.color=y(this,E),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,s.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var fe=_slicedToArray(this.parentDimensions,2),Se=fe[0],Pe=fe[1];this.setAt(W*Se,H*Pe,this.width*Se,this.height*Pe);var $e,Ie=_createForOfIteratorHelper(y(this,P).split(`
`));try{for(Ie.s();!($e=Ie.n()).done;){var Ne=$e.value,Be=document.createElement("div");Be.append(Ne?document.createTextNode(Ne):document.createElement("br")),this.editorDiv.append(Be)}}catch(be){Ie.e(be)}finally{Ie.f()}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var W=U._internalPadding*this.parentScale,H=this.getRect(W,W),X=u.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:y(this,E));return{annotationType:o.AnnotationEditorType.FREETEXT,color:X,fontSize:y(this,F),value:y(this,P),pageIndex:this.pageIndex,rect:H,rotation:this.rotation}}}],[{key:"initialize",value:function(W){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(function(X){return[X,W.get(X)]}));var H=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(H.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(W,H){switch(W){case o.AnnotationEditorParamsType.FREETEXT_SIZE:U._defaultFontSize=H;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:U._defaultColor=H}}},{key:"defaultPropertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,U._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,U._defaultColor||u.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function(W,H,X){var Q,fe=_superPropGet(U,"deserialize",this,2)([W,H,X]);return _(fe,F,W.fontSize),_(fe,E,(Q=o.Util).makeHexColor.apply(Q,_toConsumableArray$1(W.color))),_(fe,P,W.value),fe}}])}(u.AnnotationEditor);function j(O){var U=this,W=function(X){U.editorDiv.style.fontSize="calc(".concat(X,"px * var(--scale-factor))"),U.translate(0,-(X-y(U,F))*U.parentScale),_(U,F,X),v(U,Y,J).call(U)},H=y(this,F);this.addCommands({cmd:function(){W(O)},undo:function(){W(H)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function ne(O){var U=this,W=y(this,E);this.addCommands({cmd:function(){_(U,E,U.editorDiv.style.color=O)},undo:function(){_(U,E,U.editorDiv.style.color=W)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function le(){var O=this.editorDiv.getElementsByTagName("div");if(O.length===0)return this.editorDiv.innerText;var U,W=[],H=_createForOfIteratorHelper(O);try{for(H.s();!(U=H.n()).done;){var X=U.value;W.push(X.innerText.replace(/\r\n?|\n/,""))}}catch(Q){H.e(Q)}finally{H.f()}return W.join(`
`)}function J(){var O,U=_slicedToArray(this.parentDimensions,2),W=U[0],H=U[1];if(this.isAttachedToDOM)O=this.div.getBoundingClientRect();else{var X=this.currentLayer,Q=this.div,fe=Q.style.display;Q.style.display="hidden",X.div.append(this.div),O=Q.getBoundingClientRect(),Q.remove(),Q.style.display=fe}this.width=O.width/W,this.height=O.height/H}n.FreeTextEditor=Z,f(Z,"_freeTextDefaultContent",""),f(Z,"_l10nPromise",void 0),f(Z,"_internalPadding",0),f(Z,"_defaultColor",null),f(Z,"_defaultFontSize",10),f(Z,"_keyboardManager",new s.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Z.prototype.commitOrRemove]])),f(Z,"_type","freetext")},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0,Object.defineProperty(n,"fitCurve",{enumerable:!0,get:function(){return u.fitCurve}});var o=r(1),s=r(140),u=r(165),d=r(141);function f(et,Je){y(et,Je),Je.add(et)}function g(et,Je,nt){return(Je=function(it){var ht=function(lt,ft){if(_typeof$1(lt)!=="object"||lt===null)return lt;var mt=lt[Symbol.toPrimitive];if(mt!==void 0){var Ct=mt.call(lt,ft||"default");if(_typeof$1(Ct)!=="object")return Ct;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ft==="string"?String:Number)(lt)}(it,"string");return _typeof$1(ht)==="symbol"?ht:String(ht)}(Je))in et?Object.defineProperty(et,Je,{value:nt,enumerable:!0,configurable:!0,writable:!0}):et[Je]=nt,et}function m(et,Je,nt){y(et,Je),Je.set(et,nt)}function y(et,Je){if(Je.has(et))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(et,Je,nt){return function(it,ht){if(it!==ht)throw new TypeError("Private static access of wrong provenance")}(et,Je),nt}function _(et,Je,nt){return function(it,ht,lt){if(ht.set)ht.set.call(it,lt);else{if(!ht.writable)throw new TypeError("attempted to set read only private field");ht.value=lt}}(et,x(et,Je,"set"),nt),nt}function w(et,Je){return function(nt,it){return it.get?it.get.call(nt):it.value}(et,x(et,Je,"get"))}function x(et,Je,nt){if(!Je.has(et))throw new TypeError("attempted to "+nt+" private field on non-instance");return Je.get(et)}function k(et,Je,nt){if(!Je.has(et))throw new TypeError("attempted to get private field on non-instance");return nt}var S=16,M=new WeakMap,E=new WeakMap,P=new WeakMap,T=new WeakMap,D=new WeakMap,F=new WeakMap,I=new WeakMap,N=new WeakMap,q=new WeakMap,Y=new WeakMap,Z=new WeakMap,j=new WeakMap,ne=new WeakMap,le=new WeakMap,J=new WeakSet,O=new WeakSet,U=new WeakSet,W=new WeakSet,H=new WeakSet,X=new WeakSet,Q=new WeakSet,fe=new WeakSet,Se=new WeakSet,Pe=new WeakSet,$e=new WeakSet,Ie=new WeakSet,Ne=new WeakSet,Be=new WeakSet,be=new WeakSet,Ve=new WeakSet,De=new WeakSet,ve=new WeakSet,ye=new WeakSet,we=new WeakSet,ke=new WeakSet,Me=new WeakSet,Le=function(et){function Je(nt){var it;return _classCallCheck(this,Je),f(it=_callSuper(this,Je,[_objectSpread2$1(_objectSpread2$1({},nt),{},{name:"inkEditor"})]),Me),f(it,ke),f(it,we),f(it,ye),f(it,ve),f(it,De),f(it,Ve),f(it,be),f(it,Be),f(it,Ne),f(it,Ie),f(it,$e),f(it,Pe),f(it,Se),f(it,fe),f(it,Q),f(it,X),f(it,H),f(it,W),f(it,U),f(it,O),f(it,J),m(it,M,{writable:!0,value:0}),m(it,E,{writable:!0,value:0}),m(it,P,{writable:!0,value:0}),m(it,T,{writable:!0,value:it.canvasPointermove.bind(it)}),m(it,D,{writable:!0,value:it.canvasPointerleave.bind(it)}),m(it,F,{writable:!0,value:it.canvasPointerup.bind(it)}),m(it,I,{writable:!0,value:it.canvasPointerdown.bind(it)}),m(it,N,{writable:!0,value:!1}),m(it,q,{writable:!0,value:!1}),m(it,Y,{writable:!0,value:null}),m(it,Z,{writable:!0,value:null}),m(it,j,{writable:!0,value:0}),m(it,ne,{writable:!0,value:0}),m(it,le,{writable:!0,value:null}),it.color=nt.color||null,it.thickness=nt.thickness||null,it.opacity=nt.opacity||null,it.paths=[],it.bezierPath2D=[],it.currentPath=[],it.scaleFactor=1,it.translationX=it.translationY=0,it.x=0,it.y=0,it}return _inherits(Je,et),_createClass(Je,[{key:"updateParams",value:function(nt,it){switch(nt){case o.AnnotationEditorParamsType.INK_THICKNESS:k(this,J,Fe).call(this,it);break;case o.AnnotationEditorParamsType.INK_COLOR:k(this,O,ze).call(this,it);break;case o.AnnotationEditorParamsType.INK_OPACITY:k(this,U,te).call(this,it)}}},{key:"propertiesToUpdate",get:function(){var nt;return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Je._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||Je._defaultColor||s.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((nt=this.opacity)!==null&&nt!==void 0?nt:Je._defaultOpacity))]]}},{key:"rebuild",value:function(){_superPropGet(Je,"rebuild",this,3)([]),this.div!==null&&(this.canvas||(k(this,$e,je).call(this),k(this,Ie,We).call(this)),this.isAttachedToDOM||(this.parent.add(this),k(this,Ne,Ze).call(this)),k(this,ke,ot).call(this))}},{key:"remove",value:function(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,w(this,Z).disconnect(),_(this,Z,null),_superPropGet(Je,"remove",this,3)([]))}},{key:"setParent",value:function(nt){!this.parent&&nt?this._uiManager.removeShouldRescale(this):this.parent&&nt===null&&this._uiManager.addShouldRescale(this),_superPropGet(Je,"setParent",this,3)([nt])}},{key:"onScaleChanging",value:function(){var nt=_slicedToArray(this.parentDimensions,2),it=nt[0],ht=nt[1],lt=this.width*it,ft=this.height*ht;this.setDimensions(lt,ft)}},{key:"enableEditMode",value:function(){w(this,N)||this.canvas===null||(_superPropGet(Je,"enableEditMode",this,3)([]),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",w(this,I)),this.canvas.addEventListener("pointerup",w(this,F)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&this.canvas!==null&&(_superPropGet(Je,"disableEditMode",this,3)([]),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",w(this,I)),this.canvas.removeEventListener("pointerup",w(this,F)))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}},{key:"commit",value:function(){w(this,N)||(_superPropGet(Je,"commit",this,3)([]),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_(this,N,!0),this.div.classList.add("disabled"),k(this,ke,ot).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}},{key:"focusin",value:function(nt){_superPropGet(Je,"focusin",this,3)([nt]),this.enableEditMode()}},{key:"canvasPointerdown",value:function(nt){nt.button===0&&this.isInEditMode()&&!w(this,N)&&(this.setInForeground(),nt.type!=="mouse"&&this.div.focus(),nt.stopPropagation(),this.canvas.addEventListener("pointerleave",w(this,D)),this.canvas.addEventListener("pointermove",w(this,T)),k(this,X,Ce).call(this,nt.offsetX,nt.offsetY))}},{key:"canvasPointermove",value:function(nt){nt.stopPropagation(),k(this,Q,Ee).call(this,nt.offsetX,nt.offsetY)}},{key:"canvasPointerup",value:function(nt){nt.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(nt.stopPropagation(),k(this,Pe,Oe).call(this,nt),this.setInBackground())}},{key:"canvasPointerleave",value:function(nt){k(this,Pe,Oe).call(this,nt),this.setInBackground()}},{key:"render",value:function(){var nt,it,ht=this;if(this.div)return this.div;this.width&&(nt=this.x,it=this.y),_superPropGet(Je,"render",this,3)([]),Je._l10nPromise.get("editor_ink2_aria_label").then(function(ct){var gt;return(gt=ht.div)===null||gt===void 0?void 0:gt.setAttribute("aria-label",ct)});var lt=_slicedToArray(k(this,W,oe).call(this),4),ft=lt[0],mt=lt[1],Ct=lt[2],_t=lt[3];if(this.setAt(ft,mt,0,0),this.setDims(Ct,_t),k(this,$e,je).call(this),this.width){var wt=_slicedToArray(this.parentDimensions,2),kt=wt[0],Pt=wt[1];this.setAt(nt*kt,it*Pt,this.width*kt,this.height*Pt),_(this,q,!0),k(this,Ne,Ze).call(this),this.setDims(this.width*kt,this.height*Pt),k(this,Se,Re).call(this),k(this,Me,at).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return k(this,Ie,We).call(this),this.div}},{key:"setDimensions",value:function(nt,it){var ht=Math.round(nt),lt=Math.round(it);if(w(this,j)!==ht||w(this,ne)!==lt){_(this,j,ht),_(this,ne,lt),this.canvas.style.visibility="hidden",w(this,M)&&Math.abs(w(this,M)-nt/it)>.01&&(it=Math.ceil(nt/w(this,M)),this.setDims(nt,it));var ft=_slicedToArray(this.parentDimensions,2),mt=ft[0],Ct=ft[1];this.width=nt/mt,this.height=it/Ct,w(this,N)&&k(this,Be,Xe).call(this,nt,it),k(this,Ne,Ze).call(this),k(this,Se,Re).call(this),this.canvas.style.visibility="visible",this.fixDims()}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var nt=this.getRect(0,0),it=this.rotation%180==0?nt[3]-nt[1]:nt[2]-nt[0],ht=s.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:ht,thickness:this.thickness,opacity:this.opacity,paths:k(this,Ve,rt).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,it),pageIndex:this.pageIndex,rect:nt,rotation:this.rotation}}}],[{key:"initialize",value:function(nt){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(function(it){return[it,nt.get(it)]}))}},{key:"updateDefaultParams",value:function(nt,it){switch(nt){case o.AnnotationEditorParamsType.INK_THICKNESS:Je._defaultThickness=it;break;case o.AnnotationEditorParamsType.INK_COLOR:Je._defaultColor=it;break;case o.AnnotationEditorParamsType.INK_OPACITY:Je._defaultOpacity=it/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,Je._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,Je._defaultColor||s.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*Je._defaultOpacity)]]}},{key:"deserialize",value:function(nt,it,ht){var lt,ft=_superPropGet(Je,"deserialize",this,2)([nt,it,ht]);ft.thickness=nt.thickness,ft.color=(lt=o.Util).makeHexColor.apply(lt,_toConsumableArray$1(nt.color)),ft.opacity=nt.opacity;var mt=_slicedToArray(ft.pageDimensions,2),Ct=mt[0],_t=mt[1],wt=ft.width*Ct,kt=ft.height*_t,Pt=ft.parentScale,ct=nt.thickness/2;_(ft,M,wt/kt),_(ft,N,!0),_(ft,j,Math.round(wt)),_(ft,ne,Math.round(kt));var gt,bt=_createForOfIteratorHelper(nt.paths);try{for(bt.s();!(gt=bt.n()).done;){var St=gt.value.bezier,Mt=[];ft.paths.push(Mt);for(var At=Pt*(St[0]-ct),Vt=Pt*(kt-St[1]-ct),Rt=2,zt=St.length;Rt<zt;Rt+=6){var Wt=Pt*(St[Rt]-ct),qt=Pt*(kt-St[Rt+1]-ct),Ft=Pt*(St[Rt+2]-ct),Ot=Pt*(kt-St[Rt+3]-ct),jt=Pt*(St[Rt+4]-ct),an=Pt*(kt-St[Rt+5]-ct);Mt.push([[At,Vt],[Wt,qt],[Ft,Ot],[jt,an]]),At=jt,Vt=an}var Yt=v(this,Je,Qe).call(this,Mt);ft.bezierPath2D.push(Yt)}}catch(Zt){bt.e(Zt)}finally{bt.f()}var Gt=k(ft,ye,He).call(ft);return _(ft,P,Math.max(S,Gt[2]-Gt[0])),_(ft,E,Math.max(S,Gt[3]-Gt[1])),k(ft,Be,Xe).call(ft,wt,kt),ft}}])}(s.AnnotationEditor);function Fe(et){var Je=this,nt=this.thickness;this.addCommands({cmd:function(){Je.thickness=et,k(Je,ke,ot).call(Je)},undo:function(){Je.thickness=nt,k(Je,ke,ot).call(Je)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function ze(et){var Je=this,nt=this.color;this.addCommands({cmd:function(){Je.color=et,k(Je,Se,Re).call(Je)},undo:function(){Je.color=nt,k(Je,Se,Re).call(Je)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function te(et){var Je=this;et/=100;var nt=this.opacity;this.addCommands({cmd:function(){Je.opacity=et,k(Je,Se,Re).call(Je)},undo:function(){Je.opacity=nt,k(Je,Se,Re).call(Je)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function oe(){var et=this.parentRotation,Je=_slicedToArray(this.parentDimensions,2),nt=Je[0],it=Je[1];switch(et){case 90:return[0,it,it,nt];case 180:return[nt,it,nt,it];case 270:return[nt,0,it,nt];default:return[0,0,nt,it]}}function _e(){var et=this.ctx,Je=this.color,nt=this.opacity,it=this.thickness,ht=this.parentScale,lt=this.scaleFactor;et.lineWidth=it*ht/lt,et.lineCap="round",et.lineJoin="round",et.miterLimit=10,et.strokeStyle="".concat(Je).concat((0,d.opacityToHex)(nt))}function Ce(et,Je){var nt,it=this;this.isEditing=!0,w(this,q)||(_(this,q,!0),k(this,Ne,Ze).call(this),this.thickness||(this.thickness=Le._defaultThickness),this.color||(this.color=Le._defaultColor||s.AnnotationEditor._defaultLineColor),(nt=this.opacity)!==null&&nt!==void 0||(this.opacity=Le._defaultOpacity)),this.currentPath.push([et,Je]),_(this,Y,null),k(this,H,_e).call(this),this.ctx.beginPath(),this.ctx.moveTo(et,Je),_(this,le,function(){var ht;w(it,le)&&(w(it,Y)&&(it.isEmpty()?(it.ctx.setTransform(1,0,0,1,0,0),it.ctx.clearRect(0,0,it.canvas.width,it.canvas.height)):k(it,Se,Re).call(it),(ht=it.ctx).lineTo.apply(ht,_toConsumableArray$1(w(it,Y))),_(it,Y,null),it.ctx.stroke()),window.requestAnimationFrame(w(it,le)))}),window.requestAnimationFrame(w(this,le))}function Ee(et,Je){var nt=_slicedToArray(this.currentPath.at(-1),2),it=nt[0],ht=nt[1];et===it&&Je===ht||(this.currentPath.push([et,Je]),_(this,Y,[et,Je]))}function Te(et,Je){var nt=this;this.ctx.closePath(),_(this,le,null),et=Math.min(Math.max(et,0),this.canvas.width),Je=Math.min(Math.max(Je,0),this.canvas.height);var it,ht=_slicedToArray(this.currentPath.at(-1),2),lt=ht[0],ft=ht[1];if(et===lt&&Je===ft||this.currentPath.push([et,Je]),this.currentPath.length!==1)it=(0,u.fitCurve)(this.currentPath,30,null);else{var mt=[et,Je];it=[[mt,mt.slice(),mt.slice(),mt]]}var Ct=v(Le,Le,Qe).call(Le,it);this.currentPath.length=0,this.addCommands({cmd:function(){nt.paths.push(it),nt.bezierPath2D.push(Ct),nt.rebuild()},undo:function(){nt.paths.pop(),nt.bezierPath2D.pop(),nt.paths.length===0?nt.remove():(nt.canvas||(k(nt,$e,je).call(nt),k(nt,Ie,We).call(nt)),k(nt,ke,ot).call(nt))},mustExec:!0})}function Re(){if(this.isEmpty())k(this,be,Ge).call(this);else{k(this,H,_e).call(this);var et=this.canvas,Je=this.ctx;Je.setTransform(1,0,0,1,0,0),Je.clearRect(0,0,et.width,et.height),k(this,be,Ge).call(this);var nt,it=_createForOfIteratorHelper(this.bezierPath2D);try{for(it.s();!(nt=it.n()).done;){var ht=nt.value;Je.stroke(ht)}}catch(lt){it.e(lt)}finally{it.f()}}}function Oe(et){k(this,fe,Te).call(this,et.offsetX,et.offsetY),this.canvas.removeEventListener("pointerleave",w(this,D)),this.canvas.removeEventListener("pointermove",w(this,T)),this.addToAnnotationStorage()}function je(){var et=this;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Le._l10nPromise.get("editor_ink_canvas_aria_label").then(function(Je){var nt;return(nt=et.canvas)===null||nt===void 0?void 0:nt.setAttribute("aria-label",Je)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function We(){var et=this;_(this,Z,new ResizeObserver(function(Je){var nt=Je[0].contentRect;nt.width&&nt.height&&et.setDimensions(nt.width,nt.height)})),w(this,Z).observe(this.div)}function Ze(){if(w(this,q)){var et=_slicedToArray(this.parentDimensions,2),Je=et[0],nt=et[1];this.canvas.width=Math.ceil(this.width*Je),this.canvas.height=Math.ceil(this.height*nt),k(this,be,Ge).call(this)}}function Xe(et,Je){var nt=k(this,we,Ke).call(this),it=(et-nt)/w(this,P),ht=(Je-nt)/w(this,E);this.scaleFactor=Math.min(it,ht)}function Ge(){var et=k(this,we,Ke).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+et,this.translationY*this.scaleFactor+et)}function Qe(et){for(var Je=new Path2D,nt=0,it=et.length;nt<it;nt++){var ht=_slicedToArray(et[nt],4),lt=ht[0],ft=ht[1],mt=ht[2],Ct=ht[3];nt===0&&Je.moveTo.apply(Je,_toConsumableArray$1(lt)),Je.bezierCurveTo(ft[0],ft[1],mt[0],mt[1],Ct[0],Ct[1])}return Je}function rt(et,Je,nt,it){var ht,lt,ft,mt=[],Ct=this.thickness/2,_t=_createForOfIteratorHelper(this.paths);try{for(_t.s();!(ft=_t.n()).done;){var wt=ft.value;ht=[],lt=[];for(var kt=0,Pt=wt.length;kt<Pt;kt++){var ct=_slicedToArray(wt[kt],4),gt=ct[0],bt=ct[1],St=ct[2],Mt=ct[3],At=et*(gt[0]+Je)+Ct,Vt=it-et*(gt[1]+nt)-Ct,Rt=et*(bt[0]+Je)+Ct,zt=it-et*(bt[1]+nt)-Ct,Wt=et*(St[0]+Je)+Ct,qt=it-et*(St[1]+nt)-Ct,Ft=et*(Mt[0]+Je)+Ct,Ot=it-et*(Mt[1]+nt)-Ct;kt===0&&(ht.push(At,Vt),lt.push(At,Vt)),ht.push(Rt,zt,Wt,qt,Ft,Ot),k(this,De,dt).call(this,At,Vt,Rt,zt,Wt,qt,Ft,Ot,4,lt)}mt.push({bezier:ht,points:lt})}}catch(jt){_t.e(jt)}finally{_t.f()}return mt}function dt(et,Je,nt,it,ht,lt,ft,mt,Ct,_t){if(k(this,ve,qe).call(this,et,Je,nt,it,ht,lt,ft,mt))_t.push(ft,mt);else{for(var wt=1;wt<Ct-1;wt++){var kt=wt/Ct,Pt=1-kt,ct=kt*et+Pt*nt,gt=kt*Je+Pt*it,bt=kt*nt+Pt*ht,St=kt*it+Pt*lt;ct=kt*(ct=kt*ct+Pt*bt)+Pt*(bt=kt*bt+Pt*(kt*ht+Pt*ft)),gt=kt*(gt=kt*gt+Pt*St)+Pt*(St=kt*St+Pt*(kt*lt+Pt*mt)),_t.push(ct,gt)}_t.push(ft,mt)}}function qe(et,Je,nt,it,ht,lt,ft,mt){var Ct=Math.pow(3*nt-2*et-ft,2),_t=Math.pow(3*it-2*Je-mt,2),wt=Math.pow(3*ht-et-2*ft,2),kt=Math.pow(3*lt-Je-2*mt,2);return Math.max(Ct,wt)+Math.max(_t,kt)<=10}function He(){var et,Je=1/0,nt=-1/0,it=1/0,ht=-1/0,lt=_createForOfIteratorHelper(this.paths);try{for(lt.s();!(et=lt.n()).done;){var ft,mt=_createForOfIteratorHelper(et.value);try{for(mt.s();!(ft=mt.n()).done;){var Ct,_t=_slicedToArray(ft.value,4),wt=_t[0],kt=_t[1],Pt=_t[2],ct=_t[3],gt=(Ct=o.Util).bezierBoundingBox.apply(Ct,_toConsumableArray$1(wt).concat(_toConsumableArray$1(kt),_toConsumableArray$1(Pt),_toConsumableArray$1(ct)));Je=Math.min(Je,gt[0]),it=Math.min(it,gt[1]),nt=Math.max(nt,gt[2]),ht=Math.max(ht,gt[3])}}catch(bt){mt.e(bt)}finally{mt.f()}}}catch(bt){lt.e(bt)}finally{lt.f()}return[Je,it,nt,ht]}function Ke(){return w(this,N)?Math.ceil(this.thickness*this.parentScale):0}function ot(){var et=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.isEmpty())if(w(this,N)){var Je=k(this,ye,He).call(this),nt=k(this,we,Ke).call(this);_(this,P,Math.max(S,Je[2]-Je[0])),_(this,E,Math.max(S,Je[3]-Je[1]));var it=Math.ceil(nt+w(this,P)*this.scaleFactor),ht=Math.ceil(nt+w(this,E)*this.scaleFactor),lt=_slicedToArray(this.parentDimensions,2),ft=lt[0],mt=lt[1];this.width=it/ft,this.height=ht/mt,_(this,M,it/ht),k(this,Me,at).call(this);var Ct=this.translationX,_t=this.translationY;this.translationX=-Je[0],this.translationY=-Je[1],k(this,Ne,Ze).call(this),k(this,Se,Re).call(this),_(this,j,it),_(this,ne,ht),this.setDims(it,ht);var wt=et?nt/this.scaleFactor/2:0;this.translate(Ct-this.translationX-wt,_t-this.translationY-wt)}else k(this,Se,Re).call(this)}function at(){var et=this.div.style;w(this,M)>=1?(et.minHeight="".concat(S,"px"),et.minWidth="".concat(Math.round(w(this,M)*S),"px")):(et.minWidth="".concat(S,"px"),et.minHeight="".concat(Math.round(S/w(this,M)),"px"))}n.InkEditor=Le,g(Le,"_defaultColor",null),g(Le,"_defaultOpacity",1),g(Le,"_defaultThickness",1),g(Le,"_l10nPromise",void 0),g(Le,"_type","ink")},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.fitCurve=void 0;var o=r(166);n.fitCurve=o},function(e){function n(y,v,_,w,x){var k,S,M,E,P,T,D,F,I,N,q,Y,Z;if(y.length===2)return Y=g.vectorLen(g.subtract(y[0],y[1]))/3,[k=[y[0],g.addArrays(y[0],g.mulItems(v,Y)),g.addArrays(y[1],g.mulItems(_,Y)),y[1]]];S=function(O){var U,W,H,X=[];return O.forEach(function(Q,fe){U=fe?W+g.vectorLen(g.subtract(Q,H)):0,X.push(U),W=U,H=Q}),X=X.map(function(Q){return Q/W})}(y);var j=_slicedToArray(r(y,S,S,v,_,x),3);if(k=j[0],E=j[1],T=j[2],E===0||E<w)return[k];if(E<w*w)for(M=S,P=E,D=T,Z=0;Z<20;Z++){var ne=_slicedToArray(r(y,S,M=o(k,y,M),v,_,x),3);if(k=ne[0],E=ne[1],T=ne[2],E<w)return[k];if(T===D){var le=E/P;if(le>.9999&&le<1.0001)break}P=E,D=T}if(q=[],(F=g.subtract(y[T-1],y[T+1])).every(function(O){return O===0})){var J=[-(F=g.subtract(y[T-1],y[T]))[1],F[0]];F[0]=J[0],F[1]=J[1]}return I=g.normalize(F),N=g.mulItems(I,-1),q=(q=q.concat(n(y.slice(0,T+1),v,I,w,x))).concat(n(y.slice(T),N,_,w,x))}function r(y,v,_,w,x,k){var S,M,E;S=function(D,F,I,N){var q,Y,Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie=D[0],Ne=D[D.length-1];for(q=[Ie,null,null,Ne],Y=g.zeros_Xx2x2(F.length),Q=0,fe=F.length;Q<fe;Q++)$e=1-(Pe=F[Q]),(Z=Y[Q])[0]=g.mulItems(I,3*Pe*($e*$e)),Z[1]=g.mulItems(N,3*$e*(Pe*Pe));for(j=[[0,0],[0,0]],ne=[0,0],Q=0,fe=D.length;Q<fe;Q++)Pe=F[Q],Z=Y[Q],j[0][0]+=g.dot(Z[0],Z[0]),j[0][1]+=g.dot(Z[0],Z[1]),j[1][0]+=g.dot(Z[0],Z[1]),j[1][1]+=g.dot(Z[1],Z[1]),Se=g.subtract(D[Q],m.q([Ie,Ie,Ne,Ne],Pe)),ne[0]+=g.dot(Z[0],Se),ne[1]+=g.dot(Z[1],Se);return le=j[0][0]*j[1][1]-j[1][0]*j[0][1],J=j[0][0]*ne[1]-j[1][0]*ne[0],O=ne[0]*j[1][1]-ne[1]*j[0][1],U=le===0?0:O/le,W=le===0?0:J/le,X=g.vectorLen(g.subtract(Ie,Ne)),U<(H=1e-6*X)||W<H?(q[1]=g.addArrays(Ie,g.mulItems(I,X/3)),q[2]=g.addArrays(Ne,g.mulItems(N,X/3))):(q[1]=g.addArrays(Ie,g.mulItems(I,U)),q[2]=g.addArrays(Ne,g.mulItems(N,W))),q}(y,_,w,x);var P=function(D,F,I){var N,q,Y,Z,j,ne,le,J;q=0,Y=Math.floor(D.length/2);var O=u(F,10);for(j=0,ne=D.length;j<ne;j++)le=D[j],J=d(0,I[j],O,10),(N=(Z=g.subtract(m.q(F,J),le))[0]*Z[0]+Z[1]*Z[1])>q&&(q=N,Y=j);return[q,Y]}(y,S,v),T=_slicedToArray(P,2);return M=T[0],E=T[1],k&&k({bez:S,points:y,params:v,maxErr:M,maxPoint:E}),[S,M,E]}function o(y,v,_){return _.map(function(w,x){return s(y,v[x],w)})}function s(y,v,_){var w=g.subtract(m.q(y,_),v),x=m.qprime(y,_),k=g.mulMatrix(w,x),S=g.sum(g.squareItems(x))+2*g.mulMatrix(w,m.qprimeprime(y,_));return S===0?_:_-k/S}var u=function(y,v){for(var _,w=[0],x=y[0],k=0,S=1;S<=v;S++)_=m.q(y,S/v),k+=g.vectorLen(g.subtract(_,x)),w.push(k),x=_;return w=w.map(function(M){return M/k})};function d(y,v,_,w){if(v<0)return 0;if(v>1)return 1;for(var x,k,S,M,E=1;E<=w;E++)if(v<=_[E]){S=(E-1)/w,k=E/w,M=(v-(x=_[E-1]))/(_[E]-x)*(k-S)+S;break}return M}function f(y,v){return g.normalize(g.subtract(y,v))}var g=function(){function y(){_classCallCheck(this,y)}return _createClass(y,null,[{key:"zeros_Xx2x2",value:function(v){for(var _=[];v--;)_.push([0,0]);return _}},{key:"mulItems",value:function(v,_){return v.map(function(w){return w*_})}},{key:"mulMatrix",value:function(v,_){return v.reduce(function(w,x,k){return w+x*_[k]},0)}},{key:"subtract",value:function(v,_){return v.map(function(w,x){return w-_[x]})}},{key:"addArrays",value:function(v,_){return v.map(function(w,x){return w+_[x]})}},{key:"addItems",value:function(v,_){return v.map(function(w){return w+_})}},{key:"sum",value:function(v){return v.reduce(function(_,w){return _+w})}},{key:"dot",value:function(v,_){return y.mulMatrix(v,_)}},{key:"vectorLen",value:function(v){return Math.hypot.apply(Math,_toConsumableArray$1(v))}},{key:"divItems",value:function(v,_){return v.map(function(w){return w/_})}},{key:"squareItems",value:function(v){return v.map(function(_){return _*_})}},{key:"normalize",value:function(v){return this.divItems(v,this.vectorLen(v))}}])}(),m=function(){return _createClass(function y(){_classCallCheck(this,y)},null,[{key:"q",value:function(y,v){var _=1-v,w=g.mulItems(y[0],_*_*_),x=g.mulItems(y[1],3*_*_*v),k=g.mulItems(y[2],3*_*v*v),S=g.mulItems(y[3],v*v*v);return g.addArrays(g.addArrays(w,x),g.addArrays(k,S))}},{key:"qprime",value:function(y,v){var _=1-v,w=g.mulItems(g.subtract(y[1],y[0]),3*_*_),x=g.mulItems(g.subtract(y[2],y[1]),6*_*v),k=g.mulItems(g.subtract(y[3],y[2]),3*v*v);return g.addArrays(g.addArrays(w,x),k)}},{key:"qprimeprime",value:function(y,v){return g.addArrays(g.mulItems(g.addArrays(g.subtract(y[2],g.mulItems(y[1],2)),y[0]),6*(1-v)),g.mulItems(g.addArrays(g.subtract(y[3],g.mulItems(y[2],2)),y[1]),6*v))}}])}();e.exports=function(y,v,_){if(!Array.isArray(y))throw new TypeError("First argument should be an array");if(y.forEach(function(S){if(!Array.isArray(S)||S.some(function(M){return typeof M!="number"})||S.length!==y[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),y=y.filter(function(S,M){return M===0||!S.every(function(E,P){return E===y[M-1][P]})}),y.length<2)return[];var w=y.length,x=f(y[1],y[0]),k=f(y[w-2],y[w-1]);return n(y,x,k,v,_)},e.exports.fitCubic=n,e.exports.createTangent=f},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var o=r(1),s=r(142),u=r(139),d=r(168),f=r(169);function g(De,ve,ye){return function(we,ke){if(we!==ke)throw new TypeError("Private static access of wrong provenance")}(De,ve),ye}function m(De,ve){(function(ye,we){if(we.has(ye))throw new TypeError("Cannot initialize the same private elements twice on an object")})(De,ve),ve.add(De)}function y(De,ve,ye){if(!ve.has(De))throw new TypeError("attempted to get private field on non-instance");return ye}var v=1e3,_=new WeakSet;function w(De){return{width:De[2]-De[0],height:De[3]-De[1]}}var x=function(){return _createClass(function De(){_classCallCheck(this,De)},null,[{key:"create",value:function(De){switch(De.data.annotationType){case o.AnnotationType.LINK:return new E(De);case o.AnnotationType.TEXT:return new D(De);case o.AnnotationType.WIDGET:switch(De.data.fieldType){case"Tx":return new I(De);case"Btn":return De.data.radioButton?new q(De):De.data.checkBox?new N(De):new Y(De);case"Ch":return new Z(De)}return new F(De);case o.AnnotationType.POPUP:return new j(De);case o.AnnotationType.FREETEXT:return new le(De);case o.AnnotationType.LINE:return new J(De);case o.AnnotationType.SQUARE:return new O(De);case o.AnnotationType.CIRCLE:return new U(De);case o.AnnotationType.POLYLINE:return new W(De);case o.AnnotationType.CARET:return new X(De);case o.AnnotationType.INK:return new Q(De);case o.AnnotationType.POLYGON:return new H(De);case o.AnnotationType.HIGHLIGHT:return new fe(De);case o.AnnotationType.UNDERLINE:return new Se(De);case o.AnnotationType.SQUIGGLY:return new Pe(De);case o.AnnotationType.STRIKEOUT:return new $e(De);case o.AnnotationType.STAMP:return new Ie(De);case o.AnnotationType.FILEATTACHMENT:return new Ne(De);default:return new k(De)}}}])}(),k=function(){return _createClass(function De(ve){_classCallCheck(this,De);var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=ye.isRenderable,ke=we!==void 0&&we,Me=ye.ignoreBorder,Le=Me!==void 0&&Me,Fe=ye.createQuadrilaterals,ze=Fe!==void 0&&Fe;this.isRenderable=ke,this.data=ve.data,this.layer=ve.layer,this.page=ve.page,this.viewport=ve.viewport,this.linkService=ve.linkService,this.downloadManager=ve.downloadManager,this.imageResourcesPath=ve.imageResourcesPath,this.renderForms=ve.renderForms,this.svgFactory=ve.svgFactory,this.annotationStorage=ve.annotationStorage,this.enableScripting=ve.enableScripting,this.hasJSActions=ve.hasJSActions,this._fieldObjects=ve.fieldObjects,ke&&(this.container=this._createContainer(Le)),ze&&(this.quadrilaterals=this._createQuadrilaterals(Le))},[{key:"_createContainer",value:function(){var De=arguments.length>0&&arguments[0]!==void 0&&arguments[0],ve=this.data,ye=this.page,we=this.viewport,ke=document.createElement("section");ke.setAttribute("data-annotation-id",ve.id),ve.noRotate&&ke.classList.add("norotate");var Me=we.rawDims,Le=Me.pageWidth,Fe=Me.pageHeight,ze=Me.pageX,te=Me.pageY,oe=w(ve.rect),_e=oe.width,Ce=oe.height,Ee=o.Util.normalizeRect([ve.rect[0],ye.view[3]-ve.rect[1]+ye.view[1],ve.rect[2],ye.view[3]-ve.rect[3]+ye.view[1]]);if(!De&&ve.borderStyle.width>0){ke.style.borderWidth="".concat(ve.borderStyle.width,"px");var Te=ve.borderStyle.horizontalCornerRadius,Re=ve.borderStyle.verticalCornerRadius;if(Te>0||Re>0){var Oe="calc(".concat(Te,"px * var(--scale-factor)) / calc(").concat(Re,"px * var(--scale-factor))");ke.style.borderRadius=Oe}else if(this instanceof q){var je="calc(".concat(_e,"px * var(--scale-factor)) / calc(").concat(Ce,"px * var(--scale-factor))");ke.style.borderRadius=je}switch(ve.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:ke.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:ke.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:ke.style.borderBottomStyle="solid"}var We=ve.borderColor||null;We?ke.style.borderColor=o.Util.makeHexColor(0|We[0],0|We[1],0|We[2]):ke.style.borderWidth=0}ke.style.left="".concat(100*(Ee[0]-ze)/Le,"%"),ke.style.top="".concat(100*(Ee[1]-te)/Fe,"%");var Ze=ve.rotation;return ve.hasOwnCanvas||Ze===0?(ke.style.width="".concat(100*_e/Le,"%"),ke.style.height="".concat(100*Ce/Fe,"%")):this.setRotation(Ze,ke),ke}},{key:"setRotation",value:function(De){var ve,ye,we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,ke=this.viewport.rawDims,Me=ke.pageWidth,Le=ke.pageHeight,Fe=w(this.data.rect),ze=Fe.width,te=Fe.height;De%180==0?(ve=100*ze/Me,ye=100*te/Le):(ve=100*te/Me,ye=100*ze/Le),we.style.width="".concat(ve,"%"),we.style.height="".concat(ye,"%"),we.setAttribute("data-main-rotation",(360-De)%360)}},{key:"_commonActions",get:function(){var De=this,ve=function(ye,we,ke){var Me=ke.detail[ye];ke.target.style[we]=d.ColorConverters["".concat(Me[0],"_HTML")](Me.slice(1))};return(0,o.shadow)(this,"_commonActions",{display:function(ye){var we=ye.detail.display%2==1;De.container.style.visibility=we?"hidden":"visible",De.annotationStorage.setValue(De.data.id,{hidden:we,print:ye.detail.display===0||ye.detail.display===3})},print:function(ye){De.annotationStorage.setValue(De.data.id,{print:ye.detail.print})},hidden:function(ye){De.container.style.visibility=ye.detail.hidden?"hidden":"visible",De.annotationStorage.setValue(De.data.id,{hidden:ye.detail.hidden})},focus:function(ye){setTimeout(function(){return ye.target.focus({preventScroll:!1})},0)},userName:function(ye){ye.target.title=ye.detail.userName},readonly:function(ye){ye.detail.readonly?ye.target.setAttribute("readonly",""):ye.target.removeAttribute("readonly")},required:function(ye){De._setRequired(ye.target,ye.detail.required)},bgColor:function(ye){ve("bgColor","backgroundColor",ye)},fillColor:function(ye){ve("fillColor","backgroundColor",ye)},fgColor:function(ye){ve("fgColor","color",ye)},textColor:function(ye){ve("textColor","color",ye)},borderColor:function(ye){ve("borderColor","borderColor",ye)},strokeColor:function(ye){ve("strokeColor","borderColor",ye)},rotation:function(ye){var we=ye.detail.rotation;De.setRotation(we),De.annotationStorage.setValue(De.data.id,{rotation:we})}})}},{key:"_dispatchEventFromSandbox",value:function(De,ve){for(var ye=this._commonActions,we=0,ke=Object.keys(ve.detail);we<ke.length;we++){var Me=ke[we],Le=De[Me]||ye[Me];Le==null||Le(ve)}}},{key:"_setDefaultPropertiesFromJS",value:function(De){if(this.enableScripting){var ve=this.annotationStorage.getRawValue(this.data.id);if(ve)for(var ye=this._commonActions,we=0,ke=Object.entries(ve);we<ke.length;we++){var Me=_slicedToArray(ke[we],2),Le=Me[0],Fe=Me[1],ze=ye[Le];ze&&(ze({detail:_defineProperty$1({},Le,Fe),target:De}),delete ve[Le])}}}},{key:"_createQuadrilaterals",value:function(){var De=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.data.quadPoints)return null;var ve,ye=[],we=this.data.rect,ke=_createForOfIteratorHelper(this.data.quadPoints);try{for(ke.s();!(ve=ke.n()).done;){var Me=ve.value;this.data.rect=[Me[2].x,Me[2].y,Me[1].x,Me[1].y],ye.push(this._createContainer(De))}}catch(Le){ke.e(Le)}finally{ke.f()}return this.data.rect=we,ye}},{key:"_createPopup",value:function(De,ve){var ye=this.container;this.quadrilaterals&&(De=De||this.quadrilaterals,ye=this.quadrilaterals[0]),De||((De=document.createElement("div")).classList.add("popupTriggerArea"),ye.append(De));var we=new ne({container:ye,trigger:De,color:ve.color,titleObj:ve.titleObj,modificationDate:ve.modificationDate,contentsObj:ve.contentsObj,richText:ve.richText,hideWrapper:!0}).render();we.style.left="100%",ye.append(we)}},{key:"_renderQuadrilaterals",value:function(De){var ve,ye=_createForOfIteratorHelper(this.quadrilaterals);try{for(ye.s();!(ve=ye.n()).done;)ve.value.classList.add(De)}catch(we){ye.e(we)}finally{ye.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(De){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ye=[];if(this._fieldObjects){var we=this._fieldObjects[De];if(we){var ke,Me=_createForOfIteratorHelper(we);try{for(Me.s();!(ke=Me.n()).done;){var Le=ke.value,Fe=Le.page,ze=Le.id,te=Le.exportValues;if(Fe!==-1&&ze!==ve){var oe=typeof te=="string"?te:null,_e=document.querySelector('[data-element-id="'.concat(ze,'"]'));!_e||_.has(_e)?ye.push({id:ze,exportValue:oe,domElement:_e}):(0,o.warn)("_getElementsByName - element not allowed: ".concat(ze))}}}catch(je){Me.e(je)}finally{Me.f()}}return ye}var Ce,Ee=_createForOfIteratorHelper(document.getElementsByName(De));try{for(Ee.s();!(Ce=Ee.n()).done;){var Te=Ce.value,Re=Te.exportValue,Oe=Te.getAttribute("data-element-id");Oe!==ve&&_.has(Te)&&ye.push({id:Oe,exportValue:Re,domElement:Te})}}catch(je){Ee.e(je)}finally{Ee.f()}return ye}}])}(),S=new WeakSet,M=new WeakSet,E=function(De){function ve(ye){var we;_classCallCheck(this,ve);var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return m(we=_callSuper(this,ve,[ye,{isRenderable:!0,ignoreBorder:!(ke==null||!ke.ignoreBorder),createQuadrilaterals:!0}]),M),m(we,S),we.isTooltipOnly=ye.data.isTooltipOnly,we}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){var ye=this.data,we=this.linkService,ke=document.createElement("a");ke.setAttribute("data-element-id",ye.id);var Me=!1;return ye.url?(we.addLinkAttributes(ke,ye.url,ye.newWindow),Me=!0):ye.action?(this._bindNamedAction(ke,ye.action),Me=!0):ye.attachment?(this._bindAttachment(ke,ye.attachment),Me=!0):ye.setOCGState?(y(this,M,T).call(this,ke,ye.setOCGState),Me=!0):ye.dest?(this._bindLink(ke,ye.dest),Me=!0):(ye.actions&&(ye.actions.Action||ye.actions["Mouse Up"]||ye.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ke,ye),Me=!0),ye.resetForm?(this._bindResetFormAction(ke,ye.resetForm),Me=!0):this.isTooltipOnly&&!Me&&(this._bindLink(ke,""),Me=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(Le,Fe){var ze=Fe===0?ke:ke.cloneNode();return Le.append(ze),Le}):(this.container.classList.add("linkAnnotation"),Me&&this.container.append(ke),this.container)}},{key:"_bindLink",value:function(ye,we){var ke=this;ye.href=this.linkService.getDestinationHash(we),ye.onclick=function(){return we&&ke.linkService.goToDestination(we),!1},(we||we==="")&&y(this,S,P).call(this)}},{key:"_bindNamedAction",value:function(ye,we){var ke=this;ye.href=this.linkService.getAnchorUrl(""),ye.onclick=function(){return ke.linkService.executeNamedAction(we),!1},y(this,S,P).call(this)}},{key:"_bindAttachment",value:function(ye,we){var ke=this;ye.href=this.linkService.getAnchorUrl(""),ye.onclick=function(){var Me;return(Me=ke.downloadManager)===null||Me===void 0||Me.openOrDownloadData(ke.container,we.content,we.filename),!1},y(this,S,P).call(this)}},{key:"_bindJSAction",value:function(ye,we){var ke=this;ye.href=this.linkService.getAnchorUrl("");for(var Me=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),Le=function(){var te=ze[Fe],oe=Me.get(te);if(!oe)return 1;ye[oe]=function(){var _e;return(_e=ke.linkService.eventBus)===null||_e===void 0||_e.dispatch("dispatcheventinsandbox",{source:ke,detail:{id:we.id,name:te}}),!1}},Fe=0,ze=Object.keys(we.actions);Fe<ze.length;Fe++)Le();ye.onclick||(ye.onclick=function(){return!1}),y(this,S,P).call(this)}},{key:"_bindResetFormAction",value:function(ye,we){var ke=this,Me=ye.onclick;if(Me||(ye.href=this.linkService.getAnchorUrl("")),y(this,S,P).call(this),!this._fieldObjects)return(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(Me||(ye.onclick=function(){return!1}));ye.onclick=function(){Me==null||Me();var Le=we.fields,Fe=we.refs,ze=we.include,te=[];if(Le.length!==0||Fe.length!==0){var oe,_e=new Set(Fe),Ce=_createForOfIteratorHelper(Le);try{for(Ce.s();!(oe=Ce.n()).done;){var Ee,Te=oe.value,Re=_createForOfIteratorHelper(ke._fieldObjects[Te]||[]);try{for(Re.s();!(Ee=Re.n()).done;){var Oe=Ee.value.id;_e.add(Oe)}}catch(ft){Re.e(ft)}finally{Re.f()}}}catch(ft){Ce.e(ft)}finally{Ce.f()}for(var je=0,We=Object.values(ke._fieldObjects);je<We.length;je++){var Ze,Xe=_createForOfIteratorHelper(We[je]);try{for(Xe.s();!(Ze=Xe.n()).done;){var Ge=Ze.value;_e.has(Ge.id)===ze&&te.push(Ge)}}catch(ft){Xe.e(ft)}finally{Xe.f()}}}else for(var Qe=0,rt=Object.values(ke._fieldObjects);Qe<rt.length;Qe++){var dt=rt[Qe];te.push.apply(te,_toConsumableArray$1(dt))}for(var qe,He=ke.annotationStorage,Ke=[],ot=0,at=te;ot<at.length;ot++){var et=at[ot],Je=et.id;switch(Ke.push(Je),et.type){case"text":var nt=et.defaultValue||"";He.setValue(Je,{value:nt});break;case"checkbox":case"radiobutton":var it=et.defaultValue===et.exportValues;He.setValue(Je,{value:it});break;case"combobox":case"listbox":var ht=et.defaultValue||"";He.setValue(Je,{value:ht});break;default:continue}var lt=document.querySelector('[data-element-id="'.concat(Je,'"]'));lt&&(_.has(lt)?lt.dispatchEvent(new Event("resetform")):(0,o.warn)("_bindResetFormAction - element not allowed: ".concat(Je)))}return ke.enableScripting&&((qe=ke.linkService.eventBus)===null||qe===void 0||qe.dispatch("dispatcheventinsandbox",{source:ke,detail:{id:"app",ids:Ke,name:"ResetForm"}})),!1}}}])}(k);function P(){this.container.setAttribute("data-internal-link","")}function T(De,ve){var ye=this;De.href=this.linkService.getAnchorUrl(""),De.onclick=function(){return ye.linkService.executeSetOCGState(ve),!1},y(this,S,P).call(this)}var D=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str)}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){this.container.classList.add("textAnnotation");var ye=document.createElement("img");return ye.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",ye.alt="[{{type}} Annotation]",ye.dataset.l10nId="text_annotation_type",ye.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(ye,this.data),this.container.append(ye),this.container}}])}(k),F=function(De){function ve(){return _classCallCheck(this,ve),_callSuper(this,ve,arguments)}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(ye){var we=o.FeatureTest.platform,ke=we.isWin,Me=we.isMac;return ke&&ye.ctrlKey||Me&&ye.metaKey}},{key:"_setEventListener",value:function(ye,we,ke,Me){var Le=this;we.includes("mouse")?ye.addEventListener(we,function(Fe){var ze;(ze=Le.linkService.eventBus)===null||ze===void 0||ze.dispatch("dispatcheventinsandbox",{source:Le,detail:{id:Le.data.id,name:ke,value:Me(Fe),shift:Fe.shiftKey,modifier:Le._getKeyModifier(Fe)}})}):ye.addEventListener(we,function(Fe){var ze;(ze=Le.linkService.eventBus)===null||ze===void 0||ze.dispatch("dispatcheventinsandbox",{source:Le,detail:{id:Le.data.id,name:ke,value:Me(Fe)}})})}},{key:"_setEventListeners",value:function(ye,we,ke){var Me,Le=_createForOfIteratorHelper(we);try{for(Le.s();!(Me=Le.n()).done;){var Fe,ze=_slicedToArray(Me.value,2),te=ze[0],oe=ze[1];(oe==="Action"||(Fe=this.data.actions)!==null&&Fe!==void 0&&Fe[oe])&&this._setEventListener(ye,te,oe,ke)}}catch(_e){Le.e(_e)}finally{Le.f()}}},{key:"_setBackgroundColor",value:function(ye){var we=this.data.backgroundColor||null;ye.style.backgroundColor=we===null?"transparent":o.Util.makeHexColor(we[0],we[1],we[2])}},{key:"_setTextStyle",value:function(ye){var we,ke=this.data.defaultAppearanceData.fontColor,Me=this.data.defaultAppearanceData.fontSize||9,Le=ye.style,Fe=function(_e){return Math.round(10*_e)/10};if(this.data.multiLine){var ze=Math.abs(this.data.rect[3]-this.data.rect[1]-2),te=ze/(Math.round(ze/(o.LINE_FACTOR*Me))||1);we=Math.min(Me,Fe(te/o.LINE_FACTOR))}else{var oe=Math.abs(this.data.rect[3]-this.data.rect[1]-2);we=Math.min(Me,Fe(oe/o.LINE_FACTOR))}Le.fontSize="calc(".concat(we,"px * var(--scale-factor))"),Le.color=o.Util.makeHexColor(ke[0],ke[1],ke[2]),this.data.textAlignment!==null&&(Le.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(ye,we){we?ye.setAttribute("required",!0):ye.removeAttribute("required"),ye.setAttribute("aria-required",we)}}])}(k),I=function(De){function ve(ye){return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:ye.renderForms||!ye.data.hasAppearance&&!!ye.data.fieldValue}])}return _inherits(ve,De),_createClass(ve,[{key:"setPropertyOnSiblings",value:function(ye,we,ke,Me){var Le,Fe=this.annotationStorage,ze=_createForOfIteratorHelper(this._getElementsByName(ye.name,ye.id));try{for(ze.s();!(Le=ze.n()).done;){var te=Le.value;te.domElement&&(te.domElement[we]=ke),Fe.setValue(te.id,_defineProperty$1({},Me,ke))}}catch(oe){ze.e(oe)}finally{ze.f()}}},{key:"render",value:function(){var ye=this,we=this.annotationStorage,ke=this.data.id;this.container.classList.add("textWidgetAnnotation");var Me=null;if(this.renderForms){var Le=we.getValue(ke,{value:this.data.fieldValue}),Fe=Le.formattedValue||Le.value||"",ze=we.getValue(ke,{charLimit:this.data.maxLen}).charLimit;ze&&Fe.length>ze&&(Fe=Fe.slice(0,ze));var te={userValue:Fe,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?((Me=document.createElement("textarea")).textContent=Fe,this.data.doNotScroll&&(Me.style.overflowY="hidden")):((Me=document.createElement("input")).type="text",Me.setAttribute("value",Fe),this.data.doNotScroll&&(Me.style.overflowX="hidden")),_.add(Me),Me.setAttribute("data-element-id",ke),Me.disabled=this.data.readOnly,Me.name=this.data.fieldName,Me.tabIndex=v,this._setRequired(Me,this.data.required),ze&&(Me.maxLength=ze),Me.addEventListener("input",function(Te){we.setValue(ke,{value:Te.target.value}),ye.setPropertyOnSiblings(Me,"value",Te.target.value,"value")}),Me.addEventListener("resetform",function(Te){var Re,Oe=(Re=ye.data.defaultFieldValue)!==null&&Re!==void 0?Re:"";Me.value=te.userValue=Oe,te.formattedValue=null});var oe=function(Te){var Re=te.formattedValue;Re!=null&&(Te.target.value=Re),Te.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var _e;Me.addEventListener("focus",function(Te){var Re=Te.target;te.userValue&&(Re.value=te.userValue),te.lastCommittedValue=Re.value,te.commitKey=1}),Me.addEventListener("updatefromsandbox",function(Te){var Re={value:function(Oe){var je;te.userValue=(je=Oe.detail.value)!==null&&je!==void 0?je:"",we.setValue(ke,{value:te.userValue.toString()}),Oe.target.value=te.userValue},formattedValue:function(Oe){var je=Oe.detail.formattedValue;te.formattedValue=je,je!=null&&Oe.target!==document.activeElement&&(Oe.target.value=je),we.setValue(ke,{formattedValue:je})},selRange:function(Oe){var je;(je=Oe.target).setSelectionRange.apply(je,_toConsumableArray$1(Oe.detail.selRange))},charLimit:function(Oe){var je,We=Oe.detail.charLimit,Ze=Oe.target;if(We!==0){Ze.setAttribute("maxLength",We);var Xe=te.userValue;!Xe||Xe.length<=We||(Xe=Xe.slice(0,We),Ze.value=te.userValue=Xe,we.setValue(ke,{value:Xe}),(je=ye.linkService.eventBus)===null||je===void 0||je.dispatch("dispatcheventinsandbox",{source:ye,detail:{id:ke,name:"Keystroke",value:Xe,willCommit:!0,commitKey:1,selStart:Ze.selectionStart,selEnd:Ze.selectionEnd}}))}else Ze.removeAttribute("maxLength")}};ye._dispatchEventFromSandbox(Re,Te)}),Me.addEventListener("keydown",function(Te){var Re;te.commitKey=1;var Oe=-1;if(Te.key==="Escape"?Oe=0:Te.key!=="Enter"||ye.data.multiLine?Te.key==="Tab"&&(te.commitKey=3):Oe=2,Oe!==-1){var je=Te.target.value;te.lastCommittedValue!==je&&(te.lastCommittedValue=je,te.userValue=je,(Re=ye.linkService.eventBus)===null||Re===void 0||Re.dispatch("dispatcheventinsandbox",{source:ye,detail:{id:ke,name:"Keystroke",value:je,willCommit:!0,commitKey:Oe,selStart:Te.target.selectionStart,selEnd:Te.target.selectionEnd}}))}});var Ce=oe;oe=null,Me.addEventListener("blur",function(Te){if(Te.relatedTarget){var Re,Oe=Te.target.value;te.userValue=Oe,te.lastCommittedValue!==Oe&&((Re=ye.linkService.eventBus)===null||Re===void 0||Re.dispatch("dispatcheventinsandbox",{source:ye,detail:{id:ke,name:"Keystroke",value:Oe,willCommit:!0,commitKey:te.commitKey,selStart:Te.target.selectionStart,selEnd:Te.target.selectionEnd}})),Ce(Te)}}),(_e=this.data.actions)!==null&&_e!==void 0&&_e.Keystroke&&Me.addEventListener("beforeinput",function(Te){var Re;te.lastCommittedValue=null;var Oe=Te.data,je=Te.target,We=je.value,Ze=je.selectionStart,Xe=je.selectionEnd,Ge=Ze,Qe=Xe;switch(Te.inputType){case"deleteWordBackward":var rt=We.substring(0,Ze).match(/\w*[^\w]*$/);rt&&(Ge-=rt[0].length);break;case"deleteWordForward":var dt=We.substring(Ze).match(/^[^\w]*\w*/);dt&&(Qe+=dt[0].length);break;case"deleteContentBackward":Ze===Xe&&(Ge-=1);break;case"deleteContentForward":Ze===Xe&&(Qe+=1)}Te.preventDefault(),(Re=ye.linkService.eventBus)===null||Re===void 0||Re.dispatch("dispatcheventinsandbox",{source:ye,detail:{id:ke,name:"Keystroke",value:We,change:Oe||"",willCommit:!1,selStart:Ge,selEnd:Qe}})}),this._setEventListeners(Me,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Te){return Te.target.value})}if(oe&&Me.addEventListener("blur",oe),this.data.comb){var Ee=(this.data.rect[2]-this.data.rect[0])/ze;Me.classList.add("comb"),Me.style.letterSpacing="calc(".concat(Ee,"px * var(--scale-factor) - 1ch)")}}else(Me=document.createElement("div")).textContent=this.data.fieldValue,Me.style.verticalAlign="middle",Me.style.display="table-cell";return this._setTextStyle(Me),this._setBackgroundColor(Me),this._setDefaultPropertiesFromJS(Me),this.container.append(Me),this.container}}])}(F),N=function(De){function ve(ye){return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:ye.renderForms}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){var ye=this,we=this.annotationStorage,ke=this.data,Me=ke.id,Le=we.getValue(Me,{value:ke.exportValue===ke.fieldValue}).value;typeof Le=="string"&&(Le=Le!=="Off",we.setValue(Me,{value:Le})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var Fe=document.createElement("input");return _.add(Fe),Fe.setAttribute("data-element-id",Me),Fe.disabled=ke.readOnly,this._setRequired(Fe,this.data.required),Fe.type="checkbox",Fe.name=ke.fieldName,Le&&Fe.setAttribute("checked",!0),Fe.setAttribute("exportValue",ke.exportValue),Fe.tabIndex=v,Fe.addEventListener("change",function(ze){var te,oe=ze.target,_e=oe.name,Ce=oe.checked,Ee=_createForOfIteratorHelper(ye._getElementsByName(_e,Me));try{for(Ee.s();!(te=Ee.n()).done;){var Te=te.value,Re=Ce&&Te.exportValue===ke.exportValue;Te.domElement&&(Te.domElement.checked=Re),we.setValue(Te.id,{value:Re})}}catch(Oe){Ee.e(Oe)}finally{Ee.f()}we.setValue(Me,{value:Ce})}),Fe.addEventListener("resetform",function(ze){var te=ke.defaultFieldValue||"Off";ze.target.checked=te===ke.exportValue}),this.enableScripting&&this.hasJSActions&&(Fe.addEventListener("updatefromsandbox",function(ze){var te={value:function(oe){oe.target.checked=oe.detail.value!=="Off",we.setValue(Me,{value:oe.target.checked})}};ye._dispatchEventFromSandbox(te,ze)}),this._setEventListeners(Fe,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(ze){return ze.target.checked})),this._setBackgroundColor(Fe),this._setDefaultPropertiesFromJS(Fe),this.container.append(Fe),this.container}}])}(F),q=function(De){function ve(ye){return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:ye.renderForms}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){var ye=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var we=this.annotationStorage,ke=this.data,Me=ke.id,Le=we.getValue(Me,{value:ke.fieldValue===ke.buttonValue}).value;typeof Le=="string"&&(Le=Le!==ke.buttonValue,we.setValue(Me,{value:Le}));var Fe=document.createElement("input");if(_.add(Fe),Fe.setAttribute("data-element-id",Me),Fe.disabled=ke.readOnly,this._setRequired(Fe,this.data.required),Fe.type="radio",Fe.name=ke.fieldName,Le&&Fe.setAttribute("checked",!0),Fe.tabIndex=v,Fe.addEventListener("change",function(te){var oe,_e=te.target,Ce=_e.name,Ee=_e.checked,Te=_createForOfIteratorHelper(ye._getElementsByName(Ce,Me));try{for(Te.s();!(oe=Te.n()).done;){var Re=oe.value;we.setValue(Re.id,{value:!1})}}catch(Oe){Te.e(Oe)}finally{Te.f()}we.setValue(Me,{value:Ee})}),Fe.addEventListener("resetform",function(te){var oe=ke.defaultFieldValue;te.target.checked=oe!=null&&oe===ke.buttonValue}),this.enableScripting&&this.hasJSActions){var ze=ke.buttonValue;Fe.addEventListener("updatefromsandbox",function(te){var oe={value:function(_e){var Ce,Ee=ze===_e.detail.value,Te=_createForOfIteratorHelper(ye._getElementsByName(_e.target.name));try{for(Te.s();!(Ce=Te.n()).done;){var Re=Ce.value,Oe=Ee&&Re.id===Me;Re.domElement&&(Re.domElement.checked=Oe),we.setValue(Re.id,{value:Oe})}}catch(je){Te.e(je)}finally{Te.f()}}};ye._dispatchEventFromSandbox(oe,te)}),this._setEventListeners(Fe,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(te){return te.target.checked})}return this._setBackgroundColor(Fe),this._setDefaultPropertiesFromJS(Fe),this.container.append(Fe),this.container}}])}(F),Y=function(De){function ve(ye){return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{ignoreBorder:ye.data.hasAppearance}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){var ye=this,we=_superPropGet(ve,"render",this,3)([]);we.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(we.title=this.data.alternativeText);var ke=we.lastChild;return this.enableScripting&&this.hasJSActions&&ke&&(this._setDefaultPropertiesFromJS(ke),ke.addEventListener("updatefromsandbox",function(Me){ye._dispatchEventFromSandbox({},Me)})),we}}])}(E),Z=function(De){function ve(ye){return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:ye.renderForms}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){var ye=this;this.container.classList.add("choiceWidgetAnnotation");var we=this.annotationStorage,ke=this.data.id,Me=we.getValue(ke,{value:this.data.fieldValue}),Le=document.createElement("select");_.add(Le),Le.setAttribute("data-element-id",ke),Le.disabled=this.data.readOnly,this._setRequired(Le,this.data.required),Le.name=this.data.fieldName,Le.tabIndex=v;var Fe=this.data.combo&&this.data.options.length>0;this.data.combo||(Le.size=this.data.options.length,this.data.multiSelect&&(Le.multiple=!0)),Le.addEventListener("resetform",function(je){var We,Ze=ye.data.defaultFieldValue,Xe=_createForOfIteratorHelper(Le.options);try{for(Xe.s();!(We=Xe.n()).done;){var Ge=We.value;Ge.selected=Ge.value===Ze}}catch(Qe){Xe.e(Qe)}finally{Xe.f()}});var ze,te=_createForOfIteratorHelper(this.data.options);try{for(te.s();!(ze=te.n()).done;){var oe=ze.value,_e=document.createElement("option");_e.textContent=oe.displayValue,_e.value=oe.exportValue,Me.value.includes(oe.exportValue)&&(_e.setAttribute("selected",!0),Fe=!1),Le.append(_e)}}catch(je){te.e(je)}finally{te.f()}var Ce=null;if(Fe){var Ee=document.createElement("option");Ee.value=" ",Ee.setAttribute("hidden",!0),Ee.setAttribute("selected",!0),Le.prepend(Ee),Ce=function(){Ee.remove(),Le.removeEventListener("input",Ce),Ce=null},Le.addEventListener("input",Ce)}var Te=function(je){var We=je?"value":"textContent",Ze=Le.options;return Le.multiple?Array.prototype.filter.call(Ze,function(Xe){return Xe.selected}).map(function(Xe){return Xe[We]}):Ze.selectedIndex===-1?null:Ze[Ze.selectedIndex][We]},Re=Te(!1),Oe=function(je){var We=je.target.options;return Array.prototype.map.call(We,function(Ze){return{displayValue:Ze.textContent,exportValue:Ze.value}})};return this.enableScripting&&this.hasJSActions?(Le.addEventListener("updatefromsandbox",function(je){var We={value:function(Ze){var Xe;(Xe=Ce)===null||Xe===void 0||Xe();var Ge,Qe=Ze.detail.value,rt=new Set(Array.isArray(Qe)?Qe:[Qe]),dt=_createForOfIteratorHelper(Le.options);try{for(dt.s();!(Ge=dt.n()).done;){var qe=Ge.value;qe.selected=rt.has(qe.value)}}catch(He){dt.e(He)}finally{dt.f()}we.setValue(ke,{value:Te(!0)}),Re=Te(!1)},multipleSelection:function(Ze){Le.multiple=!0},remove:function(Ze){var Xe=Le.options,Ge=Ze.detail.remove;if(Xe[Ge].selected=!1,Le.remove(Ge),Xe.length>0){var Qe=Array.prototype.findIndex.call(Xe,function(rt){return rt.selected});Qe===-1&&(Xe[0].selected=!0)}we.setValue(ke,{value:Te(!0),items:Oe(Ze)}),Re=Te(!1)},clear:function(Ze){for(;Le.length!==0;)Le.remove(0);we.setValue(ke,{value:null,items:[]}),Re=Te(!1)},insert:function(Ze){var Xe=Ze.detail.insert,Ge=Xe.index,Qe=Xe.displayValue,rt=Xe.exportValue,dt=Le.children[Ge],qe=document.createElement("option");qe.textContent=Qe,qe.value=rt,dt?dt.before(qe):Le.append(qe),we.setValue(ke,{value:Te(!0),items:Oe(Ze)}),Re=Te(!1)},items:function(Ze){for(var Xe=Ze.detail.items;Le.length!==0;)Le.remove(0);var Ge,Qe=_createForOfIteratorHelper(Xe);try{for(Qe.s();!(Ge=Qe.n()).done;){var rt=Ge.value,dt=rt.displayValue,qe=rt.exportValue,He=document.createElement("option");He.textContent=dt,He.value=qe,Le.append(He)}}catch(Ke){Qe.e(Ke)}finally{Qe.f()}Le.options.length>0&&(Le.options[0].selected=!0),we.setValue(ke,{value:Te(!0),items:Oe(Ze)}),Re=Te(!1)},indices:function(Ze){var Xe,Ge=new Set(Ze.detail.indices),Qe=_createForOfIteratorHelper(Ze.target.options);try{for(Qe.s();!(Xe=Qe.n()).done;){var rt=Xe.value;rt.selected=Ge.has(rt.index)}}catch(dt){Qe.e(dt)}finally{Qe.f()}we.setValue(ke,{value:Te(!0)}),Re=Te(!1)},editable:function(Ze){Ze.target.disabled=!Ze.detail.editable}};ye._dispatchEventFromSandbox(We,je)}),Le.addEventListener("input",function(je){var We,Ze=Te(!0);we.setValue(ke,{value:Ze}),je.preventDefault(),(We=ye.linkService.eventBus)===null||We===void 0||We.dispatch("dispatcheventinsandbox",{source:ye,detail:{id:ke,name:"Keystroke",value:Re,changeEx:Ze,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Le,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],function(je){return je.target.value})):Le.addEventListener("input",function(je){we.setValue(ke,{value:Te(!0)})}),this.data.combo&&this._setTextStyle(Le),this._setBackgroundColor(Le),this._setDefaultPropertiesFromJS(Le),this.container.append(Le),this.container}}])}(F),j=function(De){function ve(ye){var we,ke,Me;_classCallCheck(this,ve);var Le=ye.data,Fe=!ve.IGNORE_TYPES.has(Le.parentType)&&!!((we=Le.titleObj)!==null&&we!==void 0&&we.str||(ke=Le.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=Le.richText)!==null&&Me!==void 0&&Me.str);return _callSuper(this,ve,[ye,{isRenderable:Fe}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){this.container.classList.add("popupAnnotation");var ye=this.layer.querySelectorAll('[data-annotation-id="'.concat(this.data.parentId,'"]'));if(ye.length===0)return this.container;var we=new ne({container:this.container,trigger:Array.from(ye),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),ke=this.page,Me=o.Util.normalizeRect([this.data.parentRect[0],ke.view[3]-this.data.parentRect[1]+ke.view[1],this.data.parentRect[2],ke.view[3]-this.data.parentRect[3]+ke.view[1]]),Le=Me[0]+this.data.parentRect[2]-this.data.parentRect[0],Fe=Me[1],ze=this.viewport.rawDims,te=ze.pageWidth,oe=ze.pageHeight,_e=ze.pageX,Ce=ze.pageY;return this.container.style.left="".concat(100*(Le-_e)/te,"%"),this.container.style.top="".concat(100*(Fe-Ce)/oe,"%"),this.container.append(we.render()),this.container}}])}(k);_defineProperty$1(j,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));var ne=function(){return _createClass(function De(ve){_classCallCheck(this,De),this.container=ve.container,this.trigger=ve.trigger,this.color=ve.color,this.titleObj=ve.titleObj,this.modificationDate=ve.modificationDate,this.contentsObj=ve.contentsObj,this.richText=ve.richText,this.hideWrapper=ve.hideWrapper||!1,this.pinned=!1},[{key:"render",value:function(){var De,ve,ye=document.createElement("div");ye.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?ye:this.container,this.hideElement.hidden=!0;var we=document.createElement("div");we.classList.add("popup");var ke=this.color;if(ke){var Me=.7*(255-ke[0])+ke[0],Le=.7*(255-ke[1])+ke[1],Fe=.7*(255-ke[2])+ke[2];we.style.backgroundColor=o.Util.makeHexColor(0|Me,0|Le,0|Fe)}var ze=document.createElement("h1");ze.dir=this.titleObj.dir,ze.textContent=this.titleObj.str,we.append(ze);var te=s.PDFDateString.toDateObject(this.modificationDate);if(te){var oe=document.createElement("span");oe.classList.add("popupDate"),oe.textContent="{{date}}, {{time}}",oe.dataset.l10nId="annotation_date_string",oe.dataset.l10nArgs=JSON.stringify({date:te.toLocaleDateString(),time:te.toLocaleTimeString()}),we.append(oe)}if((De=this.richText)===null||De===void 0||!De.str||(ve=this.contentsObj)!==null&&ve!==void 0&&ve.str&&this.contentsObj.str!==this.richText.str){var _e=this._formatContents(this.contentsObj);we.append(_e)}else f.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:we}),we.lastChild.classList.add("richText","popupContent");Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var Ce,Ee=_createForOfIteratorHelper(this.trigger);try{for(Ee.s();!(Ce=Ee.n()).done;){var Te=Ce.value;Te.addEventListener("click",this._toggle.bind(this)),Te.addEventListener("mouseover",this._show.bind(this,!1)),Te.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(Re){Ee.e(Re)}finally{Ee.f()}return we.addEventListener("click",this._hide.bind(this,!0)),ye.append(we),ye}},{key:"_formatContents",value:function(De){var ve=De.str,ye=De.dir,we=document.createElement("p");we.classList.add("popupContent"),we.dir=ye;for(var ke=ve.split(/(?:\r\n?|\n)/),Me=0,Le=ke.length;Me<Le;++Me){var Fe=ke[Me];we.append(document.createTextNode(Fe)),Me<Le-1&&we.append(document.createElement("br"))}return we}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}},{key:"_hide",value:function(){(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}])}(),le=function(De){function ve(ye){var we,ke,Me,Le;return _classCallCheck(this,ve),(we=_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(ke=ye.data.titleObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.contentsObj)!==null&&Me!==void 0&&Me.str||(Le=ye.data.richText)!==null&&Le!==void 0&&Le.str),ignoreBorder:!0}])).textContent=ye.data.textContent,we}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var ye=document.createElement("div");ye.classList.add("annotationTextContent"),ye.setAttribute("role","comment");var we,ke=_createForOfIteratorHelper(this.textContent);try{for(ke.s();!(we=ke.n()).done;){var Me=we.value,Le=document.createElement("span");Le.textContent=Me,ye.append(Le)}}catch(Fe){ke.e(Fe)}finally{ke.f()}this.container.append(ye)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}])}(k),J=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){this.container.classList.add("lineAnnotation");var ye=this.data,we=w(ye.rect),ke=we.width,Me=we.height,Le=this.svgFactory.create(ke,Me,!0),Fe=this.svgFactory.createElement("svg:line");return Fe.setAttribute("x1",ye.rect[2]-ye.lineCoordinates[0]),Fe.setAttribute("y1",ye.rect[3]-ye.lineCoordinates[1]),Fe.setAttribute("x2",ye.rect[2]-ye.lineCoordinates[2]),Fe.setAttribute("y2",ye.rect[3]-ye.lineCoordinates[3]),Fe.setAttribute("stroke-width",ye.borderStyle.width||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),Le.append(Fe),this.container.append(Le),this._createPopup(Fe,ye),this.container}}])}(k),O=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){this.container.classList.add("squareAnnotation");var ye=this.data,we=w(ye.rect),ke=we.width,Me=we.height,Le=this.svgFactory.create(ke,Me,!0),Fe=ye.borderStyle.width,ze=this.svgFactory.createElement("svg:rect");return ze.setAttribute("x",Fe/2),ze.setAttribute("y",Fe/2),ze.setAttribute("width",ke-Fe),ze.setAttribute("height",Me-Fe),ze.setAttribute("stroke-width",Fe||1),ze.setAttribute("stroke","transparent"),ze.setAttribute("fill","transparent"),Le.append(ze),this.container.append(Le),this._createPopup(ze,ye),this.container}}])}(k),U=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){this.container.classList.add("circleAnnotation");var ye=this.data,we=w(ye.rect),ke=we.width,Me=we.height,Le=this.svgFactory.create(ke,Me,!0),Fe=ye.borderStyle.width,ze=this.svgFactory.createElement("svg:ellipse");return ze.setAttribute("cx",ke/2),ze.setAttribute("cy",Me/2),ze.setAttribute("rx",ke/2-Fe/2),ze.setAttribute("ry",Me/2-Fe/2),ze.setAttribute("stroke-width",Fe||1),ze.setAttribute("stroke","transparent"),ze.setAttribute("fill","transparent"),Le.append(ze),this.container.append(Le),this._createPopup(ze,ye),this.container}}])}(k),W=function(De){function ve(ye){var we,ke,Me,Le;return _classCallCheck(this,ve),(we=_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(ke=ye.data.titleObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.contentsObj)!==null&&Me!==void 0&&Me.str||(Le=ye.data.richText)!==null&&Le!==void 0&&Le.str),ignoreBorder:!0}])).containerClassName="polylineAnnotation",we.svgElementName="svg:polyline",we}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var ye,we=this.data,ke=w(we.rect),Me=ke.width,Le=ke.height,Fe=this.svgFactory.create(Me,Le,!0),ze=[],te=_createForOfIteratorHelper(we.vertices);try{for(te.s();!(ye=te.n()).done;){var oe=ye.value,_e=oe.x-we.rect[0],Ce=we.rect[3]-oe.y;ze.push(_e+","+Ce)}}catch(Te){te.e(Te)}finally{te.f()}ze=ze.join(" ");var Ee=this.svgFactory.createElement(this.svgElementName);return Ee.setAttribute("points",ze),Ee.setAttribute("stroke-width",we.borderStyle.width||1),Ee.setAttribute("stroke","transparent"),Ee.setAttribute("fill","transparent"),Fe.append(Ee),this.container.append(Fe),this._createPopup(Ee,we),this.container}}])}(k),H=function(De){function ve(ye){var we;return _classCallCheck(this,ve),(we=_callSuper(this,ve,[ye])).containerClassName="polygonAnnotation",we.svgElementName="svg:polygon",we}return _inherits(ve,De),_createClass(ve)}(W),X=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}])}(k),Q=function(De){function ve(ye){var we,ke,Me,Le;return _classCallCheck(this,ve),(we=_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(ke=ye.data.titleObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.contentsObj)!==null&&Me!==void 0&&Me.str||(Le=ye.data.richText)!==null&&Le!==void 0&&Le.str),ignoreBorder:!0}])).containerClassName="inkAnnotation",we.svgElementName="svg:polyline",we}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var ye,we=this.data,ke=w(we.rect),Me=ke.width,Le=ke.height,Fe=this.svgFactory.create(Me,Le,!0),ze=_createForOfIteratorHelper(we.inkLists);try{for(ze.s();!(ye=ze.n()).done;){var te,oe=ye.value,_e=[],Ce=_createForOfIteratorHelper(oe);try{for(Ce.s();!(te=Ce.n()).done;){var Ee=te.value,Te=Ee.x-we.rect[0],Re=we.rect[3]-Ee.y;_e.push("".concat(Te,",").concat(Re))}}catch(je){Ce.e(je)}finally{Ce.f()}_e=_e.join(" ");var Oe=this.svgFactory.createElement(this.svgElementName);Oe.setAttribute("points",_e),Oe.setAttribute("stroke-width",we.borderStyle.width||1),Oe.setAttribute("stroke","transparent"),Oe.setAttribute("fill","transparent"),this._createPopup(Oe,we),Fe.append(Oe)}}catch(je){ze.e(je)}finally{ze.f()}return this.container.append(Fe),this.container}}])}(k),fe=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}])}(k),Se=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}])}(k),Pe=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}])}(k),$e=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}])}(k),Ie=function(De){function ve(ye){var we,ke,Me;return _classCallCheck(this,ve),_callSuper(this,ve,[ye,{isRenderable:!!(ye.data.hasPopup||(we=ye.data.titleObj)!==null&&we!==void 0&&we.str||(ke=ye.data.contentsObj)!==null&&ke!==void 0&&ke.str||(Me=ye.data.richText)!==null&&Me!==void 0&&Me.str),ignoreBorder:!0}])}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}])}(k),Ne=function(De){function ve(ye){var we,ke;_classCallCheck(this,ve);var Me=(we=_callSuper(this,ve,[ye,{isRenderable:!0}])).data.file,Le=Me.filename,Fe=Me.content;return we.filename=(0,s.getFilenameFromUrl)(Le,!0),we.content=Fe,(ke=we.linkService.eventBus)===null||ke===void 0||ke.dispatch("fileattachmentannotation",{source:we,filename:Le,content:Fe}),we}return _inherits(ve,De),_createClass(ve,[{key:"render",value:function(){var ye,we,ke;return this.container.classList.add("fileAttachmentAnnotation"),this.data.hasAppearance?ke=document.createElement("div"):(ke=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(this.data.name)?"paperclip":"pushpin",".svg"),ke.classList.add("popupTriggerArea"),ke.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((ye=this.data.titleObj)!==null&&ye!==void 0&&ye.str||(we=this.data.contentsObj)!==null&&we!==void 0&&we.str||this.data.richText)&&this._createPopup(ke,this.data),this.container.append(ke),this.container}},{key:"_download",value:function(){var ye;(ye=this.downloadManager)===null||ye===void 0||ye.openOrDownloadData(this.container,this.content,this.filename)}}])}(k),Be=function(){function De(){_classCallCheck(this,De)}return _createClass(De,null,[{key:"render",value:function(ve){var ye=ve.annotations,we=ve.div,ke=ve.viewport,Me=ve.accessibilityManager;(0,s.setLayerDimensions)(we,ke);var Le,Fe={data:null,layer:we,page:ve.page,viewport:ke,linkService:ve.linkService,downloadManager:ve.downloadManager,imageResourcesPath:ve.imageResourcesPath||"",renderForms:ve.renderForms!==!1,svgFactory:new s.DOMSVGFactory,annotationStorage:ve.annotationStorage||new u.AnnotationStorage,enableScripting:ve.enableScripting===!0,hasJSActions:ve.hasJSActions,fieldObjects:ve.fieldObjects},ze=0,te=_createForOfIteratorHelper(ye);try{for(te.s();!(Le=te.n()).done;){var oe=Le.value;if(!oe.noHTML){if(oe.annotationType!==o.AnnotationType.POPUP){var _e=w(oe.rect),Ce=_e.width,Ee=_e.height;if(Ce<=0||Ee<=0)continue}Fe.data=oe;var Te=x.create(Fe);if(Te.isRenderable){var Re=Te.render();if(oe.hidden&&(Re.style.visibility="hidden"),Array.isArray(Re)){var Oe,je=_createForOfIteratorHelper(Re);try{for(je.s();!(Oe=je.n()).done;){var We=Oe.value;We.style.zIndex=ze++,g(De,De,be).call(De,We,oe.id,we,Me)}}catch(Ze){je.e(Ze)}finally{je.f()}}else Re.style.zIndex=ze++,Te instanceof j?we.prepend(Re):g(De,De,be).call(De,Re,oe.id,we,Me)}}}}catch(Ze){te.e(Ze)}finally{te.f()}g(this,De,Ve).call(this,we,ve.annotationCanvasMap)}},{key:"update",value:function(ve){var ye=ve.annotationCanvasMap,we=ve.div,ke=ve.viewport;(0,s.setLayerDimensions)(we,{rotation:ke.rotation}),g(this,De,Ve).call(this,we,ye),we.hidden=!1}}])}();function be(De,ve,ye,we){var ke=De.firstChild||De;ke.id="".concat(s.AnnotationPrefix).concat(ve),ye.append(De),we==null||we.moveElementInDOM(ye,De,ke,!1)}function Ve(De,ve){if(ve){var ye,we=_createForOfIteratorHelper(ve);try{for(we.s();!(ye=we.n()).done;){var ke=_slicedToArray(ye.value,2),Me=ke[0],Le=ke[1],Fe=De.querySelector('[data-annotation-id="'.concat(Me,'"]'));if(Fe){var ze=Fe.firstChild;ze?ze.nodeName==="CANVAS"?ze.replaceWith(Le):ze.before(Le):Fe.append(Le)}}}catch(te){we.e(te)}finally{we.f()}ve.clear()}}n.AnnotationLayer=Be},function(e,n){function r(s){return Math.floor(255*Math.max(0,Math.min(1,s))).toString(16).padStart(2,"0")}Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;var o=function(){return _createClass(function s(){_classCallCheck(this,s)},null,[{key:"CMYK_G",value:function(s){var u=_slicedToArray(s,4),d=u[0],f=u[1],g=u[2],m=u[3];return["G",1-Math.min(1,.3*d+.59*g+.11*f+m)]}},{key:"G_CMYK",value:function(s){return["CMYK",0,0,0,1-_slicedToArray(s,1)[0]]}},{key:"G_RGB",value:function(s){var u=_slicedToArray(s,1)[0];return["RGB",u,u,u]}},{key:"G_HTML",value:function(s){var u=r(_slicedToArray(s,1)[0]);return"#".concat(u).concat(u).concat(u)}},{key:"RGB_G",value:function(s){var u=_slicedToArray(s,3);return["G",.3*u[0]+.59*u[1]+.11*u[2]]}},{key:"RGB_HTML",value:function(s){var u=_slicedToArray(s,3),d=u[0],f=u[1],g=u[2],m=r(d),y=r(f),v=r(g);return"#".concat(m).concat(y).concat(v)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(s){var u=_slicedToArray(s,4),d=u[0],f=u[1],g=u[2],m=u[3];return["RGB",1-Math.min(1,d+m),1-Math.min(1,g+m),1-Math.min(1,f+m)]}},{key:"CMYK_HTML",value:function(s){var u=this.CMYK_RGB(s).slice(1);return this.RGB_HTML(u)}},{key:"RGB_CMYK",value:function(s){var u=_slicedToArray(s,3),d=1-u[0],f=1-u[1],g=1-u[2];return["CMYK",d,f,g,Math.min(d,f,g)]}}])}();n.ColorConverters=o},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var o=r(154),s=function(){return _createClass(function u(){_classCallCheck(this,u)},null,[{key:"setupStorage",value:function(u,d,f,g,m){var y=g.getValue(d,{value:null});switch(f.name){case"textarea":if(y.value!==null&&(u.textContent=y.value),m==="print")break;u.addEventListener("input",function(x){g.setValue(d,{value:x.target.value})});break;case"input":if(f.attributes.type==="radio"||f.attributes.type==="checkbox"){if(y.value===f.attributes.xfaOn?u.setAttribute("checked",!0):y.value===f.attributes.xfaOff&&u.removeAttribute("checked"),m==="print")break;u.addEventListener("change",function(x){g.setValue(d,{value:x.target.checked?x.target.getAttribute("xfaOn"):x.target.getAttribute("xfaOff")})})}else{if(y.value!==null&&u.setAttribute("value",y.value),m==="print")break;u.addEventListener("input",function(x){g.setValue(d,{value:x.target.value})})}break;case"select":if(y.value!==null){var v,_=_createForOfIteratorHelper(f.children);try{for(_.s();!(v=_.n()).done;){var w=v.value;w.attributes.value===y.value&&(w.attributes.selected=!0)}}catch(x){_.e(x)}finally{_.f()}}u.addEventListener("input",function(x){var k=x.target.options,S=k.selectedIndex===-1?"":k[k.selectedIndex].value;g.setValue(d,{value:S})})}}},{key:"setAttributes",value:function(u){var d=u.html,f=u.element,g=u.storage,m=g===void 0?null:g,y=u.intent,v=u.linkService,_=f.attributes,w=d instanceof HTMLAnchorElement;_.type==="radio"&&(_.name="".concat(_.name,"-").concat(y));for(var x=0,k=Object.entries(_);x<k.length;x++){var S=_slicedToArray(k[x],2),M=S[0],E=S[1];if(E!=null)switch(M){case"class":E.length&&d.setAttribute(M,E.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",E);break;case"style":Object.assign(d.style,E);break;case"textContent":d.textContent=E;break;default:(!w||M!=="href"&&M!=="newWindow")&&d.setAttribute(M,E)}}w&&v.addLinkAttributes(d,_.href,_.newWindow),m&&_.dataId&&this.setupStorage(d,_.dataId,f,m)}},{key:"render",value:function(u){var d=u.annotationStorage,f=u.linkService,g=u.xfaHtml,m=u.intent||"display",y=document.createElement(g.name);g.attributes&&this.setAttributes({html:y,element:g,intent:m,linkService:f});var v=[[g,-1,y]],_=u.div;if(_.append(y),u.viewport){var w="matrix(".concat(u.viewport.transform.join(","),")");_.style.transform=w}m!=="richText"&&_.setAttribute("class","xfaLayer xfaFont");for(var x=[];v.length>0;){var k,S=_slicedToArray(v.at(-1),3),M=S[0],E=S[1],P=S[2];if(E+1!==M.children.length){var T=M.children[++v.at(-1)[1]];if(T!==null){var D=T.name;if(D!=="#text"){var F=void 0;if(F=T!=null&&(k=T.attributes)!==null&&k!==void 0&&k.xmlns?document.createElementNS(T.attributes.xmlns,D):document.createElement(D),P.append(F),T.attributes&&this.setAttributes({html:F,element:T,storage:d,intent:m,linkService:f}),T.children&&T.children.length>0)v.push([T,-1,F]);else if(T.value){var I=document.createTextNode(T.value);o.XfaText.shouldBuildText(D)&&x.push(I),F.append(I)}}else{var N=document.createTextNode(T.value);x.push(N),P.append(N)}}}else v.pop()}var q,Y=_createForOfIteratorHelper(_.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(Y.s();!(q=Y.n()).done;)q.value.setAttribute("readOnly",!0)}catch(Z){Y.e(Z)}finally{Y.f()}return{textDivs:x}}},{key:"update",value:function(u){var d="matrix(".concat(u.viewport.transform.join(","),")");u.div.style.transform=d,u.div.hidden=!1}}])}();n.XfaLayer=s},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var o=r(142),s=r(1),u=r(3),d=_createClass(function E(){_classCallCheck(this,E),(0,s.unreachable)("Not implemented: SVGGraphics")});n.SVGGraphics=d;var f=function(E){if(Number.isInteger(E))return E.toString();var P=E.toFixed(10),T=P.length-1;if(P[T]!=="0")return P;do T--;while(P[T]==="0");return P.substring(0,P[T]==="."?T:T+1)},g=function(E){if(E[4]===0&&E[5]===0){if(E[1]===0&&E[2]===0)return E[0]===1&&E[3]===1?"":"scale(".concat(f(E[0])," ").concat(f(E[3]),")");if(E[0]===E[3]&&E[1]===-E[2]){var P=180*Math.acos(E[0])/Math.PI;return"rotate(".concat(f(P),")")}}else if(E[0]===1&&E[1]===0&&E[2]===0&&E[3]===1)return"translate(".concat(f(E[4])," ").concat(f(E[5]),")");return"matrix(".concat(f(E[0])," ").concat(f(E[1])," ").concat(f(E[2])," ").concat(f(E[3])," ").concat(f(E[4])," ")+"".concat(f(E[5]),")")},m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},y=["butt","round","square"],v=["miter","round","bevel"],_=function(E){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",T=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(URL.createObjectURL&&typeof Blob<"u"&&!T)return URL.createObjectURL(new Blob([E],{type:P}));for(var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",F="data:".concat(P,";base64,"),I=0,N=E.length;I<N;I+=3){var q=255&E[I],Y=255&E[I+1],Z=255&E[I+2];F+=D[q>>2]+D[(3&q)<<4|Y>>4]+D[I+1<N?(15&Y)<<2|Z>>6:64]+D[I+2<N?63&Z:64]}return F},w=function(){for(var E=new Uint8Array([137,80,78,71,13,10,26,10]),P=new Int32Array(256),T=0;T<256;T++){for(var D=T,F=0;F<8;F++)D=1&D?3988292384^D>>1&2147483647:D>>1&2147483647;P[T]=D}function I(Y,Z,j,ne){var le=ne,J=Z.length;j[le]=J>>24&255,j[le+1]=J>>16&255,j[le+2]=J>>8&255,j[le+3]=255&J,j[le+=4]=255&Y.charCodeAt(0),j[le+1]=255&Y.charCodeAt(1),j[le+2]=255&Y.charCodeAt(2),j[le+3]=255&Y.charCodeAt(3),le+=4,j.set(Z,le);var O=function(U,W,H){for(var X=-1,Q=W;Q<H;Q++){var fe=255&(X^U[Q]);X=X>>>8^P[fe]}return~X}(j,ne+4,le+=Z.length);j[le]=O>>24&255,j[le+1]=O>>16&255,j[le+2]=O>>8&255,j[le+3]=255&O}function N(Y){var Z=Y.length,j=65535,ne=Math.ceil(Z/j),le=new Uint8Array(2+Z+5*ne+4),J=0;le[J++]=120,le[J++]=156;for(var O=0;Z>j;)le[J++]=0,le[J++]=255,le[J++]=255,le[J++]=0,le[J++]=0,le.set(Y.subarray(O,O+j),J),J+=j,O+=j,Z-=j;le[J++]=1,le[J++]=255&Z,le[J++]=Z>>8&255,le[J++]=255&~Z,le[J++]=(65535&~Z)>>8&255,le.set(Y.subarray(O),J),J+=Y.length-O;var U=function(W,H,X){for(var Q=1,fe=0,Se=H;Se<X;++Se)fe=(fe+(Q=(Q+(255&W[Se]))%65521))%65521;return fe<<16|Q}(Y,0,Y.length);return le[J++]=U>>24&255,le[J++]=U>>16&255,le[J++]=U>>8&255,le[J++]=255&U,le}function q(Y,Z,j,ne){var le,J,O,U=Y.width,W=Y.height,H=Y.data;switch(Z){case s.ImageKind.GRAYSCALE_1BPP:J=0,le=1,O=U+7>>3;break;case s.ImageKind.RGB_24BPP:J=2,le=8,O=3*U;break;case s.ImageKind.RGBA_32BPP:J=6,le=8,O=4*U;break;default:throw new Error("invalid format")}for(var X=new Uint8Array((1+O)*W),Q=0,fe=0,Se=0;Se<W;++Se)X[Q++]=0,X.set(H.subarray(fe,fe+O),Q),fe+=O,Q+=O;if(Z===s.ImageKind.GRAYSCALE_1BPP&&ne){Q=0;for(var Pe=0;Pe<W;Pe++){Q++;for(var $e=0;$e<O;$e++)X[Q++]^=255}}var Ie=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,255&U,W>>24&255,W>>16&255,W>>8&255,255&W,le,J,0,0,0]),Ne=function(De){if(!u.isNodeJS)return N(De);try{var ve;ve=parseInt(process.versions.node)>=8?De:Buffer.from(De);var ye=require$$0.deflateSync(ve,{level:9});return ye instanceof Uint8Array?ye:new Uint8Array(ye)}catch(we){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+we)}return N(De)}(X),Be=E.length+36+Ie.length+Ne.length,be=new Uint8Array(Be),Ve=0;return be.set(E,Ve),I("IHDR",Ie,be,Ve+=E.length),I("IDATA",Ne,be,Ve+=12+Ie.length),Ve+=12+Ne.length,I("IEND",new Uint8Array(0),be,Ve),_(be,"image/png",j)}return function(Y,Z,j){return q(Y,Y.kind===void 0?s.ImageKind.GRAYSCALE_1BPP:Y.kind,Z,j)}}(),x=function(){return _createClass(function E(){_classCallCheck(this,E),this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""},[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(E,P){this.x=E,this.y=P}}])}(),k=0,S=0,M=0;n.SVGGraphics=d=function(){return _createClass(function E(P,T){_classCallCheck(this,E);var D=arguments.length>2&&arguments[2]!==void 0&&arguments[2];for(var F in(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new x,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=P,this.objs=T,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[],s.OPS)this._operatorIdMapping[s.OPS[F]]=F},[{key:"getObject",value:function(E){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof E=="string"?E.startsWith("g_")?this.commonObjs.get(E):this.objs.get(E):P}},{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var E=this.current;this.extraStack.push(E),this.current=E.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(E){this.save(),this.executeOpTree(E),this.restore()}},{key:"loadDependencies",value:function(E){for(var P=this,T=E.fnArray,D=E.argsArray,F=0,I=T.length;F<I;F++)if(T[F]===s.OPS.dependency){var N,q=_createForOfIteratorHelper(D[F]);try{var Y=function(){var Z=N.value,j=Z.startsWith("g_")?P.commonObjs:P.objs,ne=new Promise(function(le){j.get(Z,le)});P.current.dependencies.push(ne)};for(q.s();!(N=q.n()).done;)Y()}catch(Z){q.e(Z)}finally{q.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(E,P,T,D,F,I){var N=[E,P,T,D,F,I];this.transformMatrix=s.Util.transform(this.transformMatrix,N),this.tgrp=null}},{key:"getSVG",value:function(E,P){var T=this;this.viewport=P;var D=this._initialize(P);return this.loadDependencies(E).then(function(){return T.transformMatrix=s.IDENTITY_MATRIX,T.executeOpTree(T.convertOpList(E)),D})}},{key:"convertOpList",value:function(E){for(var P=this._operatorIdMapping,T=E.argsArray,D=E.fnArray,F=[],I=0,N=D.length;I<N;I++){var q=D[I];F.push({fnId:q,fn:P[q],args:T[I]})}return function(Y){var Z,j=[],ne=[],le=_createForOfIteratorHelper(Y);try{for(le.s();!(Z=le.n()).done;){var J=Z.value;J.fn!=="save"?J.fn==="restore"?j=ne.pop():j.push(J):(j.push({fnId:92,fn:"group",items:[]}),ne.push(j),j=j.at(-1).items)}}catch(O){le.e(O)}finally{le.f()}return j}(F)}},{key:"executeOpTree",value:function(E){var P,T=_createForOfIteratorHelper(E);try{for(T.s();!(P=T.n()).done;){var D=P.value,F=D.fn,I=D.fnId,N=D.args;switch(0|I){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(N);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(N[0],N[1]);break;case s.OPS.setFont:this.setFont(N);break;case s.OPS.showText:case s.OPS.showSpacedText:this.showText(N[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(N[0],N[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(N[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(N[0]);break;case s.OPS.setHScale:this.setHScale(N[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(N[0],N[1],N[2],N[3],N[4],N[5]);break;case s.OPS.setTextRise:this.setTextRise(N[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(N[0]);break;case s.OPS.setLineWidth:this.setLineWidth(N[0]);break;case s.OPS.setLineJoin:this.setLineJoin(N[0]);break;case s.OPS.setLineCap:this.setLineCap(N[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(N[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(N[0],N[1],N[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(N[0],N[1],N[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(N);break;case s.OPS.setFillColorN:this.setFillColorN(N);break;case s.OPS.shadingFill:this.shadingFill(N[0]);break;case s.OPS.setDash:this.setDash(N[0],N[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(N[0]);break;case s.OPS.setFlatness:this.setFlatness(N[0]);break;case s.OPS.setGState:this.setGState(N[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintImageXObject:this.paintImageXObject(N[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(N[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(N[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(N[0],N[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(N[0],N[1],N[2],N[3],N[4],N[5]);break;case s.OPS.constructPath:this.constructPath(N[0],N[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(D.items);break;default:(0,s.warn)("Unimplemented operator ".concat(F))}}}catch(q){T.e(q)}finally{T.f()}}},{key:"setWordSpacing",value:function(E){this.current.wordSpacing=E}},{key:"setCharSpacing",value:function(E){this.current.charSpacing=E}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(E,P,T,D,F,I){var N=this.current;N.textMatrix=N.lineMatrix=[E,P,T,D,F,I],N.textMatrixScale=Math.hypot(E,P),N.x=N.lineX=0,N.y=N.lineY=0,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size","".concat(f(N.fontSize),"px")),N.tspan.setAttributeNS(null,"y",f(-N.y)),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtElement.append(N.tspan)}},{key:"beginText",value:function(){var E=this.current;E.x=E.lineX=0,E.y=E.lineY=0,E.textMatrix=s.IDENTITY_MATRIX,E.lineMatrix=s.IDENTITY_MATRIX,E.textMatrixScale=1,E.tspan=this.svgFactory.createElement("svg:tspan"),E.txtElement=this.svgFactory.createElement("svg:text"),E.txtgrp=this.svgFactory.createElement("svg:g"),E.xcoords=[],E.ycoords=[]}},{key:"moveText",value:function(E,P){var T=this.current;T.x=T.lineX+=E,T.y=T.lineY+=P,T.xcoords=[],T.ycoords=[],T.tspan=this.svgFactory.createElement("svg:tspan"),T.tspan.setAttributeNS(null,"font-family",T.fontFamily),T.tspan.setAttributeNS(null,"font-size","".concat(f(T.fontSize),"px")),T.tspan.setAttributeNS(null,"y",f(-T.y))}},{key:"showText",value:function(E){var P=this.current,T=P.font,D=P.fontSize;if(D!==0){var F,I=P.fontSizeScale,N=P.charSpacing,q=P.wordSpacing,Y=P.fontDirection,Z=P.textHScale*Y,j=T.vertical,ne=j?1:-1,le=T.defaultVMetrics,J=D*P.fontMatrix[0],O=0,U=_createForOfIteratorHelper(E);try{for(U.s();!(F=U.n()).done;){var W=F.value;if(W!==null)if(typeof W!="number"){var H=(W.isSpace?q:0)+N,X=W.fontChar,Q=void 0,fe=void 0,Se=W.width;if(j){var Pe=void 0,$e=W.vmetric||le;Pe=-(Pe=W.vmetric?$e[1]:.5*Se)*J;var Ie=$e[2]*J;Se=$e?-$e[0]:Se,Q=Pe/I,fe=(O+Ie)/I}else Q=O/I,fe=0;(W.isInFont||T.missingFile)&&(P.xcoords.push(P.x+Q),j&&P.ycoords.push(-P.y+fe),P.tspan.textContent+=X),O+=j?Se*J-H*Y:Se*J+H*Y}else O+=ne*W*D/1e3;else O+=Y*q}}catch(Ve){U.e(Ve)}finally{U.f()}P.tspan.setAttributeNS(null,"x",P.xcoords.map(f).join(" ")),j?P.tspan.setAttributeNS(null,"y",P.ycoords.map(f).join(" ")):P.tspan.setAttributeNS(null,"y",f(-P.y)),j?P.y-=O:P.x+=O*Z,P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size","".concat(f(P.fontSize),"px")),P.fontStyle!==m.fontStyle&&P.tspan.setAttributeNS(null,"font-style",P.fontStyle),P.fontWeight!==m.fontWeight&&P.tspan.setAttributeNS(null,"font-weight",P.fontWeight);var Ne=P.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(Ne===s.TextRenderingMode.FILL||Ne===s.TextRenderingMode.FILL_STROKE?(P.fillColor!==m.fillColor&&P.tspan.setAttributeNS(null,"fill",P.fillColor),P.fillAlpha<1&&P.tspan.setAttributeNS(null,"fill-opacity",P.fillAlpha)):P.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?P.tspan.setAttributeNS(null,"fill","transparent"):P.tspan.setAttributeNS(null,"fill","none"),Ne===s.TextRenderingMode.STROKE||Ne===s.TextRenderingMode.FILL_STROKE){var Be=1/(P.textMatrixScale||1);this._setStrokeAttributes(P.tspan,Be)}var be=P.textMatrix;P.textRise!==0&&((be=be.slice())[5]+=P.textRise),P.txtElement.setAttributeNS(null,"transform","".concat(g(be)," scale(").concat(f(Z),", -1)")),P.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),P.txtElement.append(P.tspan),P.txtgrp.append(P.txtElement),this._ensureTransformGroup().append(P.txtElement)}}},{key:"setLeadingMoveText",value:function(E,P){this.setLeading(-P),this.moveText(E,P)}},{key:"addFontStyle",value:function(E){if(!E.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));var P=_(E.data,E.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(E.loadedName,'";')+" src: url(".concat(P,`); }
`)}},{key:"setFont",value:function(E){var P=this.current,T=this.commonObjs.get(E[0]),D=E[1];P.font=T,!this.embedFonts||T.missingFile||this.embeddedFonts[T.loadedName]||(this.addFontStyle(T),this.embeddedFonts[T.loadedName]=T),P.fontMatrix=T.fontMatrix||s.FONT_IDENTITY_MATRIX;var F="normal";T.black?F="900":T.bold&&(F="bold");var I=T.italic?"italic":"normal";D<0?(D=-D,P.fontDirection=-1):P.fontDirection=1,P.fontSize=D,P.fontFamily=T.loadedName,P.fontWeight=F,P.fontStyle=I,P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"y",f(-P.y)),P.xcoords=[],P.ycoords=[]}},{key:"endText",value:function(){var E,P=this.current;P.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&(E=P.txtElement)!==null&&E!==void 0&&E.hasChildNodes()&&(P.element=P.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(E){E>0&&(this.current.lineWidth=E)}},{key:"setLineCap",value:function(E){this.current.lineCap=y[E]}},{key:"setLineJoin",value:function(E){this.current.lineJoin=v[E]}},{key:"setMiterLimit",value:function(E){this.current.miterLimit=E}},{key:"setStrokeAlpha",value:function(E){this.current.strokeAlpha=E}},{key:"setStrokeRGBColor",value:function(E,P,T){this.current.strokeColor=s.Util.makeHexColor(E,P,T)}},{key:"setFillAlpha",value:function(E){this.current.fillAlpha=E}},{key:"setFillRGBColor",value:function(E,P,T){this.current.fillColor=s.Util.makeHexColor(E,P,T),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(E){this.current.strokeColor=this._makeColorN_Pattern(E)}},{key:"setFillColorN",value:function(E){this.current.fillColor=this._makeColorN_Pattern(E)}},{key:"shadingFill",value:function(E){var P=this.viewport.width,T=this.viewport.height,D=s.Util.inverseTransform(this.transformMatrix),F=s.Util.applyTransform([0,0],D),I=s.Util.applyTransform([0,T],D),N=s.Util.applyTransform([P,0],D),q=s.Util.applyTransform([P,T],D),Y=Math.min(F[0],I[0],N[0],q[0]),Z=Math.min(F[1],I[1],N[1],q[1]),j=Math.max(F[0],I[0],N[0],q[0]),ne=Math.max(F[1],I[1],N[1],q[1]),le=this.svgFactory.createElement("svg:rect");le.setAttributeNS(null,"x",Y),le.setAttributeNS(null,"y",Z),le.setAttributeNS(null,"width",j-Y),le.setAttributeNS(null,"height",ne-Z),le.setAttributeNS(null,"fill",this._makeShadingPattern(E)),this.current.fillAlpha<1&&le.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(le)}},{key:"_makeColorN_Pattern",value:function(E){return E[0]==="TilingPattern"?this._makeTilingPattern(E):this._makeShadingPattern(E)}},{key:"_makeTilingPattern",value:function(E){var P=E[1],T=E[2],D=E[3]||s.IDENTITY_MATRIX,F=_slicedToArray(E[4],4),I=F[0],N=F[1],q=F[2],Y=F[3],Z=E[5],j=E[6],ne=E[7],le="shading".concat(M++),J=_slicedToArray(s.Util.normalizeRect([].concat(_toConsumableArray$1(s.Util.applyTransform([I,N],D)),_toConsumableArray$1(s.Util.applyTransform([q,Y],D)))),4),O=J[0],U=J[1],W=J[2],H=J[3],X=_slicedToArray(s.Util.singularValueDecompose2dScale(D),2),Q=Z*X[0],fe=j*X[1],Se=this.svgFactory.createElement("svg:pattern");Se.setAttributeNS(null,"id",le),Se.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Se.setAttributeNS(null,"width",Q),Se.setAttributeNS(null,"height",fe),Se.setAttributeNS(null,"x","".concat(O)),Se.setAttributeNS(null,"y","".concat(U));var Pe=this.svg,$e=this.transformMatrix,Ie=this.current.fillColor,Ne=this.current.strokeColor,Be=this.svgFactory.create(W-O,H-U);if(this.svg=Be,this.transformMatrix=D,ne===2){var be,Ve=(be=s.Util).makeHexColor.apply(be,_toConsumableArray$1(P));this.current.fillColor=Ve,this.current.strokeColor=Ve}return this.executeOpTree(this.convertOpList(T)),this.svg=Pe,this.transformMatrix=$e,this.current.fillColor=Ie,this.current.strokeColor=Ne,Se.append(Be.childNodes[0]),this.defs.append(Se),"url(#".concat(le,")")}},{key:"_makeShadingPattern",value:function(E){switch(typeof E=="string"&&(E=this.objs.get(E)),E[0]){case"RadialAxial":var P,T="shading".concat(M++),D=E[3];switch(E[1]){case"axial":var F=E[4],I=E[5];(P=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",T),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"x1",F[0]),P.setAttributeNS(null,"y1",F[1]),P.setAttributeNS(null,"x2",I[0]),P.setAttributeNS(null,"y2",I[1]);break;case"radial":var N=E[4],q=E[5],Y=E[6],Z=E[7];(P=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",T),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"cx",q[0]),P.setAttributeNS(null,"cy",q[1]),P.setAttributeNS(null,"r",Z),P.setAttributeNS(null,"fx",N[0]),P.setAttributeNS(null,"fy",N[1]),P.setAttributeNS(null,"fr",Y);break;default:throw new Error("Unknown RadialAxial type: ".concat(E[1]))}var j,ne=_createForOfIteratorHelper(D);try{for(ne.s();!(j=ne.n()).done;){var le=j.value,J=this.svgFactory.createElement("svg:stop");J.setAttributeNS(null,"offset",le[0]),J.setAttributeNS(null,"stop-color",le[1]),P.append(J)}}catch(O){ne.e(O)}finally{ne.f()}return this.defs.append(P),"url(#".concat(T,")");case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(E[0]))}}},{key:"setDash",value:function(E,P){this.current.dashArray=E,this.current.dashPhase=P}},{key:"constructPath",value:function(E,P){var T,D=this.current,F=D.x,I=D.y,N=[],q=0,Y=_createForOfIteratorHelper(E);try{for(Y.s();!(T=Y.n()).done;)switch(0|T.value){case s.OPS.rectangle:F=P[q++],I=P[q++];var Z=P[q++],j=P[q++],ne=F+Z,le=I+j;N.push("M",f(F),f(I),"L",f(ne),f(I),"L",f(ne),f(le),"L",f(F),f(le),"Z");break;case s.OPS.moveTo:F=P[q++],I=P[q++],N.push("M",f(F),f(I));break;case s.OPS.lineTo:F=P[q++],I=P[q++],N.push("L",f(F),f(I));break;case s.OPS.curveTo:F=P[q+4],I=P[q+5],N.push("C",f(P[q]),f(P[q+1]),f(P[q+2]),f(P[q+3]),f(F),f(I)),q+=6;break;case s.OPS.curveTo2:N.push("C",f(F),f(I),f(P[q]),f(P[q+1]),f(P[q+2]),f(P[q+3])),F=P[q+2],I=P[q+3],q+=4;break;case s.OPS.curveTo3:F=P[q+2],I=P[q+3],N.push("C",f(P[q]),f(P[q+1]),f(F),f(I),f(F),f(I)),q+=4;break;case s.OPS.closePath:N.push("Z")}}catch(J){Y.e(J)}finally{Y.f()}N=N.join(" "),D.path&&E.length>0&&E[0]!==s.OPS.rectangle&&E[0]!==s.OPS.moveTo?N=D.path.getAttributeNS(null,"d")+N:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",N),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(F,I)}},{key:"endPath",value:function(){var E=this.current;if(E.path=null,this.pendingClip)if(E.element){var P="clippath".concat(k++),T=this.svgFactory.createElement("svg:clipPath");T.setAttributeNS(null,"id",P),T.setAttributeNS(null,"transform",g(this.transformMatrix));var D=E.element.cloneNode(!0);if(this.pendingClip==="evenodd"?D.setAttributeNS(null,"clip-rule","evenodd"):D.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,T.append(D),this.defs.append(T),E.activeClipUrl){E.clipGroup=null;var F,I=_createForOfIteratorHelper(this.extraStack);try{for(I.s();!(F=I.n()).done;)F.value.clipGroup=null}catch(N){I.e(N)}finally{I.f()}T.setAttributeNS(null,"clip-path",E.activeClipUrl)}E.activeClipUrl="url(#".concat(P,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(E){this.pendingClip=E}},{key:"closePath",value:function(){var E=this.current;if(E.path){var P="".concat(E.path.getAttributeNS(null,"d"),"Z");E.path.setAttributeNS(null,"d",P)}}},{key:"setLeading",value:function(E){this.current.leading=-E}},{key:"setTextRise",value:function(E){this.current.textRise=E}},{key:"setTextRenderingMode",value:function(E){this.current.textRenderingMode=E}},{key:"setHScale",value:function(E){this.current.textHScale=E/100}},{key:"setRenderingIntent",value:function(E){}},{key:"setFlatness",value:function(E){}},{key:"setGState",value:function(E){var P,T=_createForOfIteratorHelper(E);try{for(T.s();!(P=T.n()).done;){var D=_slicedToArray(P.value,2),F=D[0],I=D[1];switch(F){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I);break;case"CA":this.setStrokeAlpha(I);break;case"ca":this.setFillAlpha(I);break;default:(0,s.warn)("Unimplemented graphic state operator ".concat(F))}}}catch(N){T.e(N)}finally{T.f()}}},{key:"fill",value:function(){var E=this.current;E.element&&(E.element.setAttributeNS(null,"fill",E.fillColor),E.element.setAttributeNS(null,"fill-opacity",E.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var E=this.current;E.element&&(this._setStrokeAttributes(E.element),E.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(E){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,T=this.current,D=T.dashArray;P!==1&&D.length>0&&(D=D.map(function(F){return P*F})),E.setAttributeNS(null,"stroke",T.strokeColor),E.setAttributeNS(null,"stroke-opacity",T.strokeAlpha),E.setAttributeNS(null,"stroke-miterlimit",f(T.miterLimit)),E.setAttributeNS(null,"stroke-linecap",T.lineCap),E.setAttributeNS(null,"stroke-linejoin",T.lineJoin),E.setAttributeNS(null,"stroke-width",f(P*T.lineWidth)+"px"),E.setAttributeNS(null,"stroke-dasharray",D.map(f).join(" ")),E.setAttributeNS(null,"stroke-dashoffset",f(P*T.dashPhase)+"px")}},{key:"eoFill",value:function(){var E;(E=this.current.element)===null||E===void 0||E.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){var E;(E=this.current.element)===null||E===void 0||E.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width","1px"),E.setAttributeNS(null,"height","1px"),E.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(E)}},{key:"paintImageXObject",value:function(E){var P=this.getObject(E);P?this.paintInlineImageXObject(P):(0,s.warn)("Dependent image with object ID ".concat(E," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(E,P){var T=E.width,D=E.height,F=w(E,this.forceDataSchema,!!P),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",f(T)),I.setAttributeNS(null,"height",f(D)),this.current.element=I,this.clip("nonzero");var N=this.svgFactory.createElement("svg:image");N.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",F),N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y",f(-D)),N.setAttributeNS(null,"width",f(T)+"px"),N.setAttributeNS(null,"height",f(D)+"px"),N.setAttributeNS(null,"transform","scale(".concat(f(1/T)," ").concat(f(-1/D),")")),P?P.append(N):this._ensureTransformGroup().append(N)}},{key:"paintImageMaskXObject",value:function(E){var P=this.getObject(E.data,E);if(P.bitmap)(0,s.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");else{var T=this.current,D=P.width,F=P.height,I=T.fillColor;T.maskId="mask".concat(S++);var N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",T.maskId);var q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x","0"),q.setAttributeNS(null,"y","0"),q.setAttributeNS(null,"width",f(D)),q.setAttributeNS(null,"height",f(F)),q.setAttributeNS(null,"fill",I),q.setAttributeNS(null,"mask","url(#".concat(T.maskId,")")),this.defs.append(N),this._ensureTransformGroup().append(q),this.paintInlineImageXObject(P,N)}}},{key:"paintFormXObjectBegin",value:function(E,P){if(Array.isArray(E)&&E.length===6&&this.transform(E[0],E[1],E[2],E[3],E[4],E[5]),P){var T=P[2]-P[0],D=P[3]-P[1],F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",P[0]),F.setAttributeNS(null,"y",P[1]),F.setAttributeNS(null,"width",f(T)),F.setAttributeNS(null,"height",f(D)),this.current.element=F,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(E){var P=this.svgFactory.create(E.width,E.height),T=this.svgFactory.createElement("svg:defs");P.append(T),this.defs=T;var D=this.svgFactory.createElement("svg:g");return D.setAttributeNS(null,"transform",g(E.transform)),P.append(D),this.svg=D,P}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var E=this.svgFactory.createElement("svg:g");E.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(E),this.current.clipGroup=E}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}])}()}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var n=__webpack_module_cache__[e];if(n!==void 0)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return n.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return u.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return f.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return n.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return s.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var n=__w_pdfjs_require__(1),r=__w_pdfjs_require__(138),o=__w_pdfjs_require__(142),s=__w_pdfjs_require__(161),u=__w_pdfjs_require__(162),d=__w_pdfjs_require__(141),f=__w_pdfjs_require__(167),g=__w_pdfjs_require__(149),m=__w_pdfjs_require__(170),y=__w_pdfjs_require__(169)}(),__webpack_exports__}()},module.exports=factory()})(pdf);var cryptoJsExports={},cryptoJs={get exports(){return cryptoJsExports},set exports(e){cryptoJsExports=e}},coreExports={},core$1={get exports(){return coreExports},set exports(e){coreExports=e}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,core$1.exports=function(){var e=e||function(n,r){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&commonjsGlobal$1!==void 0&&commonjsGlobal$1.crypto&&(o=commonjsGlobal$1.crypto),!o&&typeof commonjsRequire=="function")try{o=require$$0}catch{}var s=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},u=Object.create||function(){function S(){}return function(M){var E;return S.prototype=M,E=new S,S.prototype=null,E}}(),d={},f=d.lib={},g=f.Base={extend:function(S){var M=u(this);return S&&M.mixIn(S),M.hasOwnProperty("init")&&this.init!==M.init||(M.init=function(){M.$super.init.apply(this,arguments)}),M.init.prototype=M,M.$super=this,M},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var M in S)S.hasOwnProperty(M)&&(this[M]=S[M]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}},m=f.WordArray=g.extend({init:function(S,M){S=this.words=S||[],this.sigBytes=M!=r?M:4*S.length},toString:function(S){return(S||v).stringify(this)},concat:function(S){var M=this.words,E=S.words,P=this.sigBytes,T=S.sigBytes;if(this.clamp(),P%4)for(var D=0;D<T;D++){var F=E[D>>>2]>>>24-D%4*8&255;M[P+D>>>2]|=F<<24-(P+D)%4*8}else for(var I=0;I<T;I+=4)M[P+I>>>2]=E[I>>>2];return this.sigBytes+=T,this},clamp:function(){var S=this.words,M=this.sigBytes;S[M>>>2]&=4294967295<<32-M%4*8,S.length=n.ceil(M/4)},clone:function(){var S=g.clone.call(this);return S.words=this.words.slice(0),S},random:function(S){for(var M=[],E=0;E<S;E+=4)M.push(s());return new m.init(M,S)}}),y=d.enc={},v=y.Hex={stringify:function(S){for(var M=S.words,E=S.sigBytes,P=[],T=0;T<E;T++){var D=M[T>>>2]>>>24-T%4*8&255;P.push((D>>>4).toString(16)),P.push((15&D).toString(16))}return P.join("")},parse:function(S){for(var M=S.length,E=[],P=0;P<M;P+=2)E[P>>>3]|=parseInt(S.substr(P,2),16)<<24-P%8*4;return new m.init(E,M/2)}},_=y.Latin1={stringify:function(S){for(var M=S.words,E=S.sigBytes,P=[],T=0;T<E;T++){var D=M[T>>>2]>>>24-T%4*8&255;P.push(String.fromCharCode(D))}return P.join("")},parse:function(S){for(var M=S.length,E=[],P=0;P<M;P++)E[P>>>2]|=(255&S.charCodeAt(P))<<24-P%4*8;return new m.init(E,M)}},w=y.Utf8={stringify:function(S){try{return decodeURIComponent(escape(_.stringify(S)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(S){return _.parse(unescape(encodeURIComponent(S)))}},x=f.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(S){typeof S=="string"&&(S=w.parse(S)),this._data.concat(S),this._nDataBytes+=S.sigBytes},_process:function(S){var M,E=this._data,P=E.words,T=E.sigBytes,D=this.blockSize,F=T/(4*D),I=(F=S?n.ceil(F):n.max((0|F)-this._minBufferSize,0))*D,N=n.min(4*I,T);if(I){for(var q=0;q<I;q+=D)this._doProcessBlock(P,q);M=P.splice(0,I),E.sigBytes-=N}return new m.init(M,N)},clone:function(){var S=g.clone.call(this);return S._data=this._data.clone(),S},_minBufferSize:0});f.Hasher=x.extend({cfg:g.extend(),init:function(S){this.cfg=this.cfg.extend(S),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(S){return this._append(S),this._process(),this},finalize:function(S){return S&&this._append(S),this._doFinalize()},blockSize:16,_createHelper:function(S){return function(M,E){return new S.init(E).finalize(M)}},_createHmacHelper:function(S){return function(M,E){return new k.HMAC.init(S,E).finalize(M)}}});var k=d.algo={};return d}(Math);return e}()),coreExports}var x64CoreExports={},x64Core={get exports(){return x64CoreExports},set exports(e){x64CoreExports=e}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,x64Core.exports=function(e){return function(n){var r=e,o=r.lib,s=o.Base,u=o.WordArray,d=r.x64={};d.Word=s.extend({init:function(f,g){this.high=f,this.low=g}}),d.WordArray=s.extend({init:function(f,g){f=this.words=f||[],this.sigBytes=g!=n?g:8*f.length},toX32:function(){for(var f=this.words,g=f.length,m=[],y=0;y<g;y++){var v=f[y];m.push(v.high),m.push(v.low)}return u.create(m,this.sigBytes)},clone:function(){for(var f=s.clone.call(this),g=f.words=this.words.slice(0),m=g.length,y=0;y<m;y++)g[y]=g[y].clone();return f}})}(),e}(requireCore())),x64CoreExports}var libTypedarraysExports={},libTypedarrays={get exports(){return libTypedarraysExports},set exports(e){libTypedarraysExports=e}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,libTypedarrays.exports=function(e){return function(){if(typeof ArrayBuffer=="function"){var n=e.lib.WordArray,r=n.init,o=n.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray<"u"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var u=s.byteLength,d=[],f=0;f<u;f++)d[f>>>2]|=s[f]<<24-f%4*8;r.call(this,d,u)}else r.apply(this,arguments)};o.prototype=n}}(),e.lib.WordArray}(requireCore())),libTypedarraysExports}var encUtf16Exports={},encUtf16={get exports(){return encUtf16Exports},set exports(e){encUtf16Exports=e}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,encUtf16.exports=function(e){return function(){var n=e,r=n.lib.WordArray,o=n.enc;function s(u){return u<<8&4278255360|u>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(u){for(var d=u.words,f=u.sigBytes,g=[],m=0;m<f;m+=2){var y=d[m>>>2]>>>16-m%4*8&65535;g.push(String.fromCharCode(y))}return g.join("")},parse:function(u){for(var d=u.length,f=[],g=0;g<d;g++)f[g>>>1]|=u.charCodeAt(g)<<16-g%2*16;return r.create(f,2*d)}},o.Utf16LE={stringify:function(u){for(var d=u.words,f=u.sigBytes,g=[],m=0;m<f;m+=2){var y=s(d[m>>>2]>>>16-m%4*8&65535);g.push(String.fromCharCode(y))}return g.join("")},parse:function(u){for(var d=u.length,f=[],g=0;g<d;g++)f[g>>>1]|=s(u.charCodeAt(g)<<16-g%2*16);return r.create(f,2*d)}}}(),e.enc.Utf16}(requireCore())),encUtf16Exports}var encBase64Exports={},encBase64={get exports(){return encBase64Exports},set exports(e){encBase64Exports=e}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,encBase64.exports=function(e){return function(){var n=e,r=n.lib.WordArray;function o(s,u,d){for(var f=[],g=0,m=0;m<u;m++)if(m%4){var y=d[s.charCodeAt(m-1)]<<m%4*2|d[s.charCodeAt(m)]>>>6-m%4*2;f[g>>>2]|=y<<24-g%4*8,g++}return r.create(f,g)}n.enc.Base64={stringify:function(s){var u=s.words,d=s.sigBytes,f=this._map;s.clamp();for(var g=[],m=0;m<d;m+=3)for(var y=(u[m>>>2]>>>24-m%4*8&255)<<16|(u[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|u[m+2>>>2]>>>24-(m+2)%4*8&255,v=0;v<4&&m+.75*v<d;v++)g.push(f.charAt(y>>>6*(3-v)&63));var _=f.charAt(64);if(_)for(;g.length%4;)g.push(_);return g.join("")},parse:function(s){var u=s.length,d=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var g=0;g<d.length;g++)f[d.charCodeAt(g)]=g}var m=d.charAt(64);if(m){var y=s.indexOf(m);y!==-1&&(u=y)}return o(s,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}(requireCore())),encBase64Exports}var encBase64urlExports={},encBase64url={get exports(){return encBase64urlExports},set exports(e){encBase64urlExports=e}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,encBase64url.exports=function(e){return function(){var n=e,r=n.lib.WordArray;function o(s,u,d){for(var f=[],g=0,m=0;m<u;m++)if(m%4){var y=d[s.charCodeAt(m-1)]<<m%4*2|d[s.charCodeAt(m)]>>>6-m%4*2;f[g>>>2]|=y<<24-g%4*8,g++}return r.create(f,g)}n.enc.Base64url={stringify:function(s,u){u===void 0&&(u=!0);var d=s.words,f=s.sigBytes,g=u?this._safe_map:this._map;s.clamp();for(var m=[],y=0;y<f;y+=3)for(var v=(d[y>>>2]>>>24-y%4*8&255)<<16|(d[y+1>>>2]>>>24-(y+1)%4*8&255)<<8|d[y+2>>>2]>>>24-(y+2)%4*8&255,_=0;_<4&&y+.75*_<f;_++)m.push(g.charAt(v>>>6*(3-_)&63));var w=g.charAt(64);if(w)for(;m.length%4;)m.push(w);return m.join("")},parse:function(s,u){u===void 0&&(u=!0);var d=s.length,f=u?this._safe_map:this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var m=0;m<f.length;m++)g[f.charCodeAt(m)]=m}var y=f.charAt(64);if(y){var v=s.indexOf(y);v!==-1&&(d=v)}return o(s,d,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url}(requireCore())),encBase64urlExports}var md5Exports={},md5={get exports(){return md5Exports},set exports(e){md5Exports=e}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,md5.exports=function(e){return function(n){var r=e,o=r.lib,s=o.WordArray,u=o.Hasher,d=r.algo,f=[];(function(){for(var w=0;w<64;w++)f[w]=4294967296*n.abs(n.sin(w+1))|0})();var g=d.MD5=u.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,x){for(var k=0;k<16;k++){var S=x+k,M=w[S];w[S]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8)}var E=this._hash.words,P=w[x+0],T=w[x+1],D=w[x+2],F=w[x+3],I=w[x+4],N=w[x+5],q=w[x+6],Y=w[x+7],Z=w[x+8],j=w[x+9],ne=w[x+10],le=w[x+11],J=w[x+12],O=w[x+13],U=w[x+14],W=w[x+15],H=E[0],X=E[1],Q=E[2],fe=E[3];H=m(H,X,Q,fe,P,7,f[0]),fe=m(fe,H,X,Q,T,12,f[1]),Q=m(Q,fe,H,X,D,17,f[2]),X=m(X,Q,fe,H,F,22,f[3]),H=m(H,X,Q,fe,I,7,f[4]),fe=m(fe,H,X,Q,N,12,f[5]),Q=m(Q,fe,H,X,q,17,f[6]),X=m(X,Q,fe,H,Y,22,f[7]),H=m(H,X,Q,fe,Z,7,f[8]),fe=m(fe,H,X,Q,j,12,f[9]),Q=m(Q,fe,H,X,ne,17,f[10]),X=m(X,Q,fe,H,le,22,f[11]),H=m(H,X,Q,fe,J,7,f[12]),fe=m(fe,H,X,Q,O,12,f[13]),Q=m(Q,fe,H,X,U,17,f[14]),H=y(H,X=m(X,Q,fe,H,W,22,f[15]),Q,fe,T,5,f[16]),fe=y(fe,H,X,Q,q,9,f[17]),Q=y(Q,fe,H,X,le,14,f[18]),X=y(X,Q,fe,H,P,20,f[19]),H=y(H,X,Q,fe,N,5,f[20]),fe=y(fe,H,X,Q,ne,9,f[21]),Q=y(Q,fe,H,X,W,14,f[22]),X=y(X,Q,fe,H,I,20,f[23]),H=y(H,X,Q,fe,j,5,f[24]),fe=y(fe,H,X,Q,U,9,f[25]),Q=y(Q,fe,H,X,F,14,f[26]),X=y(X,Q,fe,H,Z,20,f[27]),H=y(H,X,Q,fe,O,5,f[28]),fe=y(fe,H,X,Q,D,9,f[29]),Q=y(Q,fe,H,X,Y,14,f[30]),H=v(H,X=y(X,Q,fe,H,J,20,f[31]),Q,fe,N,4,f[32]),fe=v(fe,H,X,Q,Z,11,f[33]),Q=v(Q,fe,H,X,le,16,f[34]),X=v(X,Q,fe,H,U,23,f[35]),H=v(H,X,Q,fe,T,4,f[36]),fe=v(fe,H,X,Q,I,11,f[37]),Q=v(Q,fe,H,X,Y,16,f[38]),X=v(X,Q,fe,H,ne,23,f[39]),H=v(H,X,Q,fe,O,4,f[40]),fe=v(fe,H,X,Q,P,11,f[41]),Q=v(Q,fe,H,X,F,16,f[42]),X=v(X,Q,fe,H,q,23,f[43]),H=v(H,X,Q,fe,j,4,f[44]),fe=v(fe,H,X,Q,J,11,f[45]),Q=v(Q,fe,H,X,W,16,f[46]),H=_(H,X=v(X,Q,fe,H,D,23,f[47]),Q,fe,P,6,f[48]),fe=_(fe,H,X,Q,Y,10,f[49]),Q=_(Q,fe,H,X,U,15,f[50]),X=_(X,Q,fe,H,N,21,f[51]),H=_(H,X,Q,fe,J,6,f[52]),fe=_(fe,H,X,Q,F,10,f[53]),Q=_(Q,fe,H,X,ne,15,f[54]),X=_(X,Q,fe,H,T,21,f[55]),H=_(H,X,Q,fe,Z,6,f[56]),fe=_(fe,H,X,Q,W,10,f[57]),Q=_(Q,fe,H,X,q,15,f[58]),X=_(X,Q,fe,H,O,21,f[59]),H=_(H,X,Q,fe,I,6,f[60]),fe=_(fe,H,X,Q,le,10,f[61]),Q=_(Q,fe,H,X,D,15,f[62]),X=_(X,Q,fe,H,j,21,f[63]),E[0]=E[0]+H|0,E[1]=E[1]+X|0,E[2]=E[2]+Q|0,E[3]=E[3]+fe|0},_doFinalize:function(){var w=this._data,x=w.words,k=8*this._nDataBytes,S=8*w.sigBytes;x[S>>>5]|=128<<24-S%32;var M=n.floor(k/4294967296),E=k;x[15+(S+64>>>9<<4)]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),x[14+(S+64>>>9<<4)]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),w.sigBytes=4*(x.length+1),this._process();for(var P=this._hash,T=P.words,D=0;D<4;D++){var F=T[D];T[D]=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8)}return P},clone:function(){var w=u.clone.call(this);return w._hash=this._hash.clone(),w}});function m(w,x,k,S,M,E,P){var T=w+(x&k|~x&S)+M+P;return(T<<E|T>>>32-E)+x}function y(w,x,k,S,M,E,P){var T=w+(x&S|k&~S)+M+P;return(T<<E|T>>>32-E)+x}function v(w,x,k,S,M,E,P){var T=w+(x^k^S)+M+P;return(T<<E|T>>>32-E)+x}function _(w,x,k,S,M,E,P){var T=w+(k^(x|~S))+M+P;return(T<<E|T>>>32-E)+x}r.MD5=u._createHelper(g),r.HmacMD5=u._createHmacHelper(g)}(Math),e.MD5}(requireCore())),md5Exports}var sha1Exports={},sha1={get exports(){return sha1Exports},set exports(e){sha1Exports=e}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,sha1.exports=function(e){return function(){var n=e,r=n.lib,o=r.WordArray,s=r.Hasher,u=n.algo,d=[],f=u.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(g,m){for(var y=this._hash.words,v=y[0],_=y[1],w=y[2],x=y[3],k=y[4],S=0;S<80;S++){if(S<16)d[S]=0|g[m+S];else{var M=d[S-3]^d[S-8]^d[S-14]^d[S-16];d[S]=M<<1|M>>>31}var E=(v<<5|v>>>27)+k+d[S];E+=S<20?1518500249+(_&w|~_&x):S<40?1859775393+(_^w^x):S<60?(_&w|_&x|w&x)-1894007588:(_^w^x)-899497514,k=x,x=w,w=_<<30|_>>>2,_=v,v=E}y[0]=y[0]+v|0,y[1]=y[1]+_|0,y[2]=y[2]+w|0,y[3]=y[3]+x|0,y[4]=y[4]+k|0},_doFinalize:function(){var g=this._data,m=g.words,y=8*this._nDataBytes,v=8*g.sigBytes;return m[v>>>5]|=128<<24-v%32,m[14+(v+64>>>9<<4)]=Math.floor(y/4294967296),m[15+(v+64>>>9<<4)]=y,g.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var g=s.clone.call(this);return g._hash=this._hash.clone(),g}});n.SHA1=s._createHelper(f),n.HmacSHA1=s._createHmacHelper(f)}(),e.SHA1}(requireCore())),sha1Exports}var sha256Exports={},sha256={get exports(){return sha256Exports},set exports(e){sha256Exports=e}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,sha256.exports=function(e){return function(n){var r=e,o=r.lib,s=o.WordArray,u=o.Hasher,d=r.algo,f=[],g=[];(function(){function v(k){for(var S=n.sqrt(k),M=2;M<=S;M++)if(!(k%M))return!1;return!0}function _(k){return 4294967296*(k-(0|k))|0}for(var w=2,x=0;x<64;)v(w)&&(x<8&&(f[x]=_(n.pow(w,.5))),g[x]=_(n.pow(w,1/3)),x++),w++})();var m=[],y=d.SHA256=u.extend({_doReset:function(){this._hash=new s.init(f.slice(0))},_doProcessBlock:function(v,_){for(var w=this._hash.words,x=w[0],k=w[1],S=w[2],M=w[3],E=w[4],P=w[5],T=w[6],D=w[7],F=0;F<64;F++){if(F<16)m[F]=0|v[_+F];else{var I=m[F-15],N=(I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3,q=m[F-2],Y=(q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10;m[F]=N+m[F-7]+Y+m[F-16]}var Z=x&k^x&S^k&S,j=(x<<30|x>>>2)^(x<<19|x>>>13)^(x<<10|x>>>22),ne=D+((E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25))+(E&P^~E&T)+g[F]+m[F];D=T,T=P,P=E,E=M+ne|0,M=S,S=k,k=x,x=ne+(j+Z)|0}w[0]=w[0]+x|0,w[1]=w[1]+k|0,w[2]=w[2]+S|0,w[3]=w[3]+M|0,w[4]=w[4]+E|0,w[5]=w[5]+P|0,w[6]=w[6]+T|0,w[7]=w[7]+D|0},_doFinalize:function(){var v=this._data,_=v.words,w=8*this._nDataBytes,x=8*v.sigBytes;return _[x>>>5]|=128<<24-x%32,_[14+(x+64>>>9<<4)]=n.floor(w/4294967296),_[15+(x+64>>>9<<4)]=w,v.sigBytes=4*_.length,this._process(),this._hash},clone:function(){var v=u.clone.call(this);return v._hash=this._hash.clone(),v}});r.SHA256=u._createHelper(y),r.HmacSHA256=u._createHmacHelper(y)}(Math),e.SHA256}(requireCore())),sha256Exports}var sha224Exports={},sha224={get exports(){return sha224Exports},set exports(e){sha224Exports=e}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,sha224.exports=function(e){return function(){var n=e,r=n.lib.WordArray,o=n.algo,s=o.SHA256,u=o.SHA224=s.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var d=s._doFinalize.call(this);return d.sigBytes-=4,d}});n.SHA224=s._createHelper(u),n.HmacSHA224=s._createHmacHelper(u)}(),e.SHA224}(requireCore(),requireSha256())),sha224Exports}var sha512Exports={},sha512={get exports(){return sha512Exports},set exports(e){sha512Exports=e}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,sha512.exports=function(e){return function(){var n=e,r=n.lib.Hasher,o=n.x64,s=o.Word,u=o.WordArray,d=n.algo;function f(){return s.create.apply(s,arguments)}var g=[f(1116352408,3609767458),f(1899447441,602891725),f(3049323471,3964484399),f(3921009573,2173295548),f(961987163,4081628472),f(1508970993,3053834265),f(2453635748,2937671579),f(2870763221,3664609560),f(3624381080,2734883394),f(310598401,1164996542),f(607225278,1323610764),f(1426881987,3590304994),f(1925078388,4068182383),f(2162078206,991336113),f(2614888103,633803317),f(3248222580,3479774868),f(3835390401,2666613458),f(4022224774,944711139),f(264347078,2341262773),f(604807628,2007800933),f(770255983,1495990901),f(1249150122,1856431235),f(1555081692,3175218132),f(1996064986,2198950837),f(2554220882,3999719339),f(2821834349,766784016),f(2952996808,2566594879),f(3210313671,3203337956),f(3336571891,1034457026),f(3584528711,2466948901),f(113926993,3758326383),f(338241895,168717936),f(666307205,1188179964),f(773529912,1546045734),f(1294757372,1522805485),f(1396182291,2643833823),f(1695183700,2343527390),f(1986661051,1014477480),f(2177026350,1206759142),f(2456956037,344077627),f(2730485921,1290863460),f(2820302411,3158454273),f(3259730800,3505952657),f(3345764771,106217008),f(3516065817,3606008344),f(3600352804,1432725776),f(4094571909,1467031594),f(275423344,851169720),f(430227734,3100823752),f(506948616,1363258195),f(659060556,3750685593),f(883997877,3785050280),f(958139571,3318307427),f(1322822218,3812723403),f(1537002063,2003034995),f(1747873779,3602036899),f(1955562222,1575990012),f(2024104815,1125592928),f(2227730452,2716904306),f(2361852424,442776044),f(2428436474,593698344),f(2756734187,3733110249),f(3204031479,2999351573),f(3329325298,3815920427),f(3391569614,3928383900),f(3515267271,566280711),f(3940187606,3454069534),f(4118630271,4000239992),f(116418474,1914138554),f(174292421,2731055270),f(289380356,3203993006),f(460393269,320620315),f(685471733,587496836),f(852142971,1086792851),f(1017036298,365543100),f(1126000580,2618297676),f(1288033470,3409855158),f(1501505948,4234509866),f(1607167915,987167468),f(1816402316,1246189591)],m=[];(function(){for(var v=0;v<80;v++)m[v]=f()})();var y=d.SHA512=r.extend({_doReset:function(){this._hash=new u.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(v,_){for(var w=this._hash.words,x=w[0],k=w[1],S=w[2],M=w[3],E=w[4],P=w[5],T=w[6],D=w[7],F=x.high,I=x.low,N=k.high,q=k.low,Y=S.high,Z=S.low,j=M.high,ne=M.low,le=E.high,J=E.low,O=P.high,U=P.low,W=T.high,H=T.low,X=D.high,Q=D.low,fe=F,Se=I,Pe=N,$e=q,Ie=Y,Ne=Z,Be=j,be=ne,Ve=le,De=J,ve=O,ye=U,we=W,ke=H,Me=X,Le=Q,Fe=0;Fe<80;Fe++){var ze,te,oe=m[Fe];if(Fe<16)te=oe.high=0|v[_+2*Fe],ze=oe.low=0|v[_+2*Fe+1];else{var _e=m[Fe-15],Ce=_e.high,Ee=_e.low,Te=(Ce>>>1|Ee<<31)^(Ce>>>8|Ee<<24)^Ce>>>7,Re=(Ee>>>1|Ce<<31)^(Ee>>>8|Ce<<24)^(Ee>>>7|Ce<<25),Oe=m[Fe-2],je=Oe.high,We=Oe.low,Ze=(je>>>19|We<<13)^(je<<3|We>>>29)^je>>>6,Xe=(We>>>19|je<<13)^(We<<3|je>>>29)^(We>>>6|je<<26),Ge=m[Fe-7],Qe=Ge.high,rt=Ge.low,dt=m[Fe-16],qe=dt.high,He=dt.low;te=(te=(te=Te+Qe+((ze=Re+rt)>>>0<Re>>>0?1:0))+Ze+((ze+=Xe)>>>0<Xe>>>0?1:0))+qe+((ze+=He)>>>0<He>>>0?1:0),oe.high=te,oe.low=ze}var Ke,ot=Ve&ve^~Ve&we,at=De&ye^~De&ke,et=fe&Pe^fe&Ie^Pe&Ie,Je=Se&$e^Se&Ne^$e&Ne,nt=(fe>>>28|Se<<4)^(fe<<30|Se>>>2)^(fe<<25|Se>>>7),it=(Se>>>28|fe<<4)^(Se<<30|fe>>>2)^(Se<<25|fe>>>7),ht=(Ve>>>14|De<<18)^(Ve>>>18|De<<14)^(Ve<<23|De>>>9),lt=(De>>>14|Ve<<18)^(De>>>18|Ve<<14)^(De<<23|Ve>>>9),ft=g[Fe],mt=ft.high,Ct=ft.low,_t=Me+ht+((Ke=Le+lt)>>>0<Le>>>0?1:0),wt=it+Je;Me=we,Le=ke,we=ve,ke=ye,ve=Ve,ye=De,Ve=Be+(_t=(_t=(_t=_t+ot+((Ke+=at)>>>0<at>>>0?1:0))+mt+((Ke+=Ct)>>>0<Ct>>>0?1:0))+te+((Ke+=ze)>>>0<ze>>>0?1:0))+((De=be+Ke|0)>>>0<be>>>0?1:0)|0,Be=Ie,be=Ne,Ie=Pe,Ne=$e,Pe=fe,$e=Se,fe=_t+(nt+et+(wt>>>0<it>>>0?1:0))+((Se=Ke+wt|0)>>>0<Ke>>>0?1:0)|0}I=x.low=I+Se,x.high=F+fe+(I>>>0<Se>>>0?1:0),q=k.low=q+$e,k.high=N+Pe+(q>>>0<$e>>>0?1:0),Z=S.low=Z+Ne,S.high=Y+Ie+(Z>>>0<Ne>>>0?1:0),ne=M.low=ne+be,M.high=j+Be+(ne>>>0<be>>>0?1:0),J=E.low=J+De,E.high=le+Ve+(J>>>0<De>>>0?1:0),U=P.low=U+ye,P.high=O+ve+(U>>>0<ye>>>0?1:0),H=T.low=H+ke,T.high=W+we+(H>>>0<ke>>>0?1:0),Q=D.low=Q+Le,D.high=X+Me+(Q>>>0<Le>>>0?1:0)},_doFinalize:function(){var v=this._data,_=v.words,w=8*this._nDataBytes,x=8*v.sigBytes;return _[x>>>5]|=128<<24-x%32,_[30+(x+128>>>10<<5)]=Math.floor(w/4294967296),_[31+(x+128>>>10<<5)]=w,v.sigBytes=4*_.length,this._process(),this._hash.toX32()},clone:function(){var v=r.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:32});n.SHA512=r._createHelper(y),n.HmacSHA512=r._createHmacHelper(y)}(),e.SHA512}(requireCore(),requireX64Core())),sha512Exports}var sha384Exports={},sha384={get exports(){return sha384Exports},set exports(e){sha384Exports=e}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,sha384.exports=function(e){return function(){var n=e,r=n.x64,o=r.Word,s=r.WordArray,u=n.algo,d=u.SHA512,f=u.SHA384=d.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var g=d._doFinalize.call(this);return g.sigBytes-=16,g}});n.SHA384=d._createHelper(f),n.HmacSHA384=d._createHmacHelper(f)}(),e.SHA384}(requireCore(),requireX64Core(),requireSha512())),sha384Exports}var sha3Exports={},sha3={get exports(){return sha3Exports},set exports(e){sha3Exports=e}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,sha3.exports=function(e){return function(n){var r=e,o=r.lib,s=o.WordArray,u=o.Hasher,d=r.x64.Word,f=r.algo,g=[],m=[],y=[];(function(){for(var w=1,x=0,k=0;k<24;k++){g[w+5*x]=(k+1)*(k+2)/2%64;var S=(2*w+3*x)%5;w=x%5,x=S}for(w=0;w<5;w++)for(x=0;x<5;x++)m[w+5*x]=x+(2*w+3*x)%5*5;for(var M=1,E=0;E<24;E++){for(var P=0,T=0,D=0;D<7;D++){if(1&M){var F=(1<<D)-1;F<32?T^=1<<F:P^=1<<F-32}128&M?M=M<<1^113:M<<=1}y[E]=d.create(P,T)}})();var v=[];(function(){for(var w=0;w<25;w++)v[w]=d.create()})();var _=f.SHA3=u.extend({cfg:u.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],x=0;x<25;x++)w[x]=new d.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,x){for(var k=this._state,S=this.blockSize/2,M=0;M<S;M++){var E=w[x+2*M],P=w[x+2*M+1];E=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),P=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),(Q=k[M]).high^=P,Q.low^=E}for(var T=0;T<24;T++){for(var D=0;D<5;D++){for(var F=0,I=0,N=0;N<5;N++)F^=(Q=k[D+5*N]).high,I^=Q.low;var q=v[D];q.high=F,q.low=I}for(D=0;D<5;D++){var Y=v[(D+4)%5],Z=v[(D+1)%5],j=Z.high,ne=Z.low;for(F=Y.high^(j<<1|ne>>>31),I=Y.low^(ne<<1|j>>>31),N=0;N<5;N++)(Q=k[D+5*N]).high^=F,Q.low^=I}for(var le=1;le<25;le++){var J=(Q=k[le]).high,O=Q.low,U=g[le];U<32?(F=J<<U|O>>>32-U,I=O<<U|J>>>32-U):(F=O<<U-32|J>>>64-U,I=J<<U-32|O>>>64-U);var W=v[m[le]];W.high=F,W.low=I}var H=v[0],X=k[0];for(H.high=X.high,H.low=X.low,D=0;D<5;D++)for(N=0;N<5;N++){var Q=k[le=D+5*N],fe=v[le],Se=v[(D+1)%5+5*N],Pe=v[(D+2)%5+5*N];Q.high=fe.high^~Se.high&Pe.high,Q.low=fe.low^~Se.low&Pe.low}Q=k[0];var $e=y[T];Q.high^=$e.high,Q.low^=$e.low}},_doFinalize:function(){var w=this._data,x=w.words;this._nDataBytes;var k=8*w.sigBytes,S=32*this.blockSize;x[k>>>5]|=1<<24-k%32,x[(n.ceil((k+1)/S)*S>>>5)-1]|=128,w.sigBytes=4*x.length,this._process();for(var M=this._state,E=this.cfg.outputLength/8,P=E/8,T=[],D=0;D<P;D++){var F=M[D],I=F.high,N=F.low;I=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),N=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8),T.push(N),T.push(I)}return new s.init(T,E)},clone:function(){for(var w=u.clone.call(this),x=w._state=this._state.slice(0),k=0;k<25;k++)x[k]=x[k].clone();return w}});r.SHA3=u._createHelper(_),r.HmacSHA3=u._createHmacHelper(_)}(Math),e.SHA3}(requireCore(),requireX64Core())),sha3Exports}var ripemd160Exports={},ripemd160={get exports(){return ripemd160Exports},set exports(e){ripemd160Exports=e}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,ripemd160.exports=function(e){/** @preserve
      (c) 2012 by Cdric Mesnil. All rights reserved.
      	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
          - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      */return function(){var n=e,r=n.lib,o=r.WordArray,s=r.Hasher,u=n.algo,d=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),f=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),g=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=o.create([0,1518500249,1859775393,2400959708,2840853838]),v=o.create([1352829926,1548603684,1836072691,2053994217,0]),_=u.RIPEMD160=s.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,T){for(var D=0;D<16;D++){var F=T+D,I=P[F];P[F]=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8)}var N,q,Y,Z,j,ne,le,J,O,U,W,H=this._hash.words,X=y.words,Q=v.words,fe=d.words,Se=f.words,Pe=g.words,$e=m.words;for(ne=N=H[0],le=q=H[1],J=Y=H[2],O=Z=H[3],U=j=H[4],D=0;D<80;D+=1)W=N+P[T+fe[D]]|0,W+=D<16?w(q,Y,Z)+X[0]:D<32?x(q,Y,Z)+X[1]:D<48?k(q,Y,Z)+X[2]:D<64?S(q,Y,Z)+X[3]:M(q,Y,Z)+X[4],W=(W=E(W|=0,Pe[D]))+j|0,N=j,j=Z,Z=E(Y,10),Y=q,q=W,W=ne+P[T+Se[D]]|0,W+=D<16?M(le,J,O)+Q[0]:D<32?S(le,J,O)+Q[1]:D<48?k(le,J,O)+Q[2]:D<64?x(le,J,O)+Q[3]:w(le,J,O)+Q[4],W=(W=E(W|=0,$e[D]))+U|0,ne=U,U=O,O=E(J,10),J=le,le=W;W=H[1]+Y+O|0,H[1]=H[2]+Z+U|0,H[2]=H[3]+j+ne|0,H[3]=H[4]+N+le|0,H[4]=H[0]+q+J|0,H[0]=W},_doFinalize:function(){var P=this._data,T=P.words,D=8*this._nDataBytes,F=8*P.sigBytes;T[F>>>5]|=128<<24-F%32,T[14+(F+64>>>9<<4)]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8),P.sigBytes=4*(T.length+1),this._process();for(var I=this._hash,N=I.words,q=0;q<5;q++){var Y=N[q];N[q]=16711935&(Y<<8|Y>>>24)|4278255360&(Y<<24|Y>>>8)}return I},clone:function(){var P=s.clone.call(this);return P._hash=this._hash.clone(),P}});function w(P,T,D){return P^T^D}function x(P,T,D){return P&T|~P&D}function k(P,T,D){return(P|~T)^D}function S(P,T,D){return P&D|T&~D}function M(P,T,D){return P^(T|~D)}function E(P,T){return P<<T|P>>>32-T}n.RIPEMD160=s._createHelper(_),n.HmacRIPEMD160=s._createHmacHelper(_)}(),e.RIPEMD160}(requireCore())),ripemd160Exports}var hmacExports={},hmac={get exports(){return hmacExports},set exports(e){hmacExports=e}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,hmac.exports=function(e){(function(){var n=e,r=n.lib.Base,o=n.enc.Utf8;n.algo.HMAC=r.extend({init:function(s,u){s=this._hasher=new s.init,typeof u=="string"&&(u=o.parse(u));var d=s.blockSize,f=4*d;u.sigBytes>f&&(u=s.finalize(u)),u.clamp();for(var g=this._oKey=u.clone(),m=this._iKey=u.clone(),y=g.words,v=m.words,_=0;_<d;_++)y[_]^=1549556828,v[_]^=909522486;g.sigBytes=m.sigBytes=f,this.reset()},reset:function(){var s=this._hasher;s.reset(),s.update(this._iKey)},update:function(s){return this._hasher.update(s),this},finalize:function(s){var u=this._hasher,d=u.finalize(s);return u.reset(),u.finalize(this._oKey.clone().concat(d))}})})()}(requireCore())),hmacExports}var pbkdf2Exports={},pbkdf2={get exports(){return pbkdf2Exports},set exports(e){pbkdf2Exports=e}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,pbkdf2.exports=function(e){return function(){var n=e,r=n.lib,o=r.Base,s=r.WordArray,u=n.algo,d=u.SHA256,f=u.HMAC,g=u.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:d,iterations:25e4}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,y){for(var v=this.cfg,_=f.create(v.hasher,m),w=s.create(),x=s.create([1]),k=w.words,S=x.words,M=v.keySize,E=v.iterations;k.length<M;){var P=_.update(y).finalize(x);_.reset();for(var T=P.words,D=T.length,F=P,I=1;I<E;I++){F=_.finalize(F),_.reset();for(var N=F.words,q=0;q<D;q++)T[q]^=N[q]}w.concat(P),S[0]++}return w.sigBytes=4*M,w}});n.PBKDF2=function(m,y,v){return g.create(v).compute(m,y)}}(),e.PBKDF2}(requireCore(),requireSha256(),requireHmac())),pbkdf2Exports}var evpkdfExports={},evpkdf={get exports(){return evpkdfExports},set exports(e){evpkdfExports=e}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,evpkdf.exports=function(e){return function(){var n=e,r=n.lib,o=r.Base,s=r.WordArray,u=n.algo,d=u.MD5,f=u.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:d,iterations:1}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,m){for(var y,v=this.cfg,_=v.hasher.create(),w=s.create(),x=w.words,k=v.keySize,S=v.iterations;x.length<k;){y&&_.update(y),y=_.update(g).finalize(m),_.reset();for(var M=1;M<S;M++)y=_.finalize(y),_.reset();w.concat(y)}return w.sigBytes=4*k,w}});n.EvpKDF=function(g,m,y){return f.create(y).compute(g,m)}}(),e.EvpKDF}(requireCore(),requireSha1(),requireHmac())),evpkdfExports}var cipherCoreExports={},cipherCore={get exports(){return cipherCoreExports},set exports(e){cipherCoreExports=e}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,cipherCore.exports=function(e){e.lib.Cipher||function(n){var r=e,o=r.lib,s=o.Base,u=o.WordArray,d=o.BufferedBlockAlgorithm,f=r.enc;f.Utf8;var g=f.Base64,m=r.algo.EvpKDF,y=o.Cipher=d.extend({cfg:s.extend(),createEncryptor:function(T,D){return this.create(this._ENC_XFORM_MODE,T,D)},createDecryptor:function(T,D){return this.create(this._DEC_XFORM_MODE,T,D)},init:function(T,D,F){this.cfg=this.cfg.extend(F),this._xformMode=T,this._key=D,this.reset()},reset:function(){d.reset.call(this),this._doReset()},process:function(T){return this._append(T),this._process()},finalize:function(T){return T&&this._append(T),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function T(D){return typeof D=="string"?P:M}return function(D){return{encrypt:function(F,I,N){return T(I).encrypt(D,F,I,N)},decrypt:function(F,I,N){return T(I).decrypt(D,F,I,N)}}}}()});o.StreamCipher=y.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var v=r.mode={},_=o.BlockCipherMode=s.extend({createEncryptor:function(T,D){return this.Encryptor.create(T,D)},createDecryptor:function(T,D){return this.Decryptor.create(T,D)},init:function(T,D){this._cipher=T,this._iv=D}}),w=v.CBC=function(){var T=_.extend();function D(F,I,N){var q,Y=this._iv;Y?(q=Y,this._iv=n):q=this._prevBlock;for(var Z=0;Z<N;Z++)F[I+Z]^=q[Z]}return T.Encryptor=T.extend({processBlock:function(F,I){var N=this._cipher,q=N.blockSize;D.call(this,F,I,q),N.encryptBlock(F,I),this._prevBlock=F.slice(I,I+q)}}),T.Decryptor=T.extend({processBlock:function(F,I){var N=this._cipher,q=N.blockSize,Y=F.slice(I,I+q);N.decryptBlock(F,I),D.call(this,F,I,q),this._prevBlock=Y}}),T}(),x=(r.pad={}).Pkcs7={pad:function(T,D){for(var F=4*D,I=F-T.sigBytes%F,N=I<<24|I<<16|I<<8|I,q=[],Y=0;Y<I;Y+=4)q.push(N);var Z=u.create(q,I);T.concat(Z)},unpad:function(T){var D=255&T.words[T.sigBytes-1>>>2];T.sigBytes-=D}};o.BlockCipher=y.extend({cfg:y.cfg.extend({mode:w,padding:x}),reset:function(){var T;y.reset.call(this);var D=this.cfg,F=D.iv,I=D.mode;this._xformMode==this._ENC_XFORM_MODE?T=I.createEncryptor:(T=I.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==T?this._mode.init(this,F&&F.words):(this._mode=T.call(I,this,F&&F.words),this._mode.__creator=T)},_doProcessBlock:function(T,D){this._mode.processBlock(T,D)},_doFinalize:function(){var T,D=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(D.pad(this._data,this.blockSize),T=this._process(!0)):(T=this._process(!0),D.unpad(T)),T},blockSize:4});var k=o.CipherParams=s.extend({init:function(T){this.mixIn(T)},toString:function(T){return(T||this.formatter).stringify(this)}}),S=(r.format={}).OpenSSL={stringify:function(T){var D=T.ciphertext,F=T.salt;return(F?u.create([1398893684,1701076831]).concat(F).concat(D):D).toString(g)},parse:function(T){var D,F=g.parse(T),I=F.words;return I[0]==1398893684&&I[1]==1701076831&&(D=u.create(I.slice(2,4)),I.splice(0,4),F.sigBytes-=16),k.create({ciphertext:F,salt:D})}},M=o.SerializableCipher=s.extend({cfg:s.extend({format:S}),encrypt:function(T,D,F,I){I=this.cfg.extend(I);var N=T.createEncryptor(F,I),q=N.finalize(D),Y=N.cfg;return k.create({ciphertext:q,key:F,iv:Y.iv,algorithm:T,mode:Y.mode,padding:Y.padding,blockSize:T.blockSize,formatter:I.format})},decrypt:function(T,D,F,I){return I=this.cfg.extend(I),D=this._parse(D,I.format),T.createDecryptor(F,I).finalize(D.ciphertext)},_parse:function(T,D){return typeof T=="string"?D.parse(T,this):T}}),E=(r.kdf={}).OpenSSL={execute:function(T,D,F,I,N){if(I||(I=u.random(8)),N)q=m.create({keySize:D+F,hasher:N}).compute(T,I);else var q=m.create({keySize:D+F}).compute(T,I);var Y=u.create(q.words.slice(D),4*F);return q.sigBytes=4*D,k.create({key:q,iv:Y,salt:I})}},P=o.PasswordBasedCipher=M.extend({cfg:M.cfg.extend({kdf:E}),encrypt:function(T,D,F,I){var N=(I=this.cfg.extend(I)).kdf.execute(F,T.keySize,T.ivSize,I.salt,I.hasher);I.iv=N.iv;var q=M.encrypt.call(this,T,D,N.key,I);return q.mixIn(N),q},decrypt:function(T,D,F,I){I=this.cfg.extend(I),D=this._parse(D,I.format);var N=I.kdf.execute(F,T.keySize,T.ivSize,D.salt,I.hasher);return I.iv=N.iv,M.decrypt.call(this,T,D,N.key,I)}})}()}(requireCore(),requireEvpkdf())),cipherCoreExports}var modeCfbExports={},modeCfb={get exports(){return modeCfbExports},set exports(e){modeCfbExports=e}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,modeCfb.exports=function(e){return e.mode.CFB=function(){var n=e.lib.BlockCipherMode.extend();function r(o,s,u,d){var f,g=this._iv;g?(f=g.slice(0),this._iv=void 0):f=this._prevBlock,d.encryptBlock(f,0);for(var m=0;m<u;m++)o[s+m]^=f[m]}return n.Encryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize;r.call(this,o,s,d,u),this._prevBlock=o.slice(s,s+d)}}),n.Decryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize,f=o.slice(s,s+d);r.call(this,o,s,d,u),this._prevBlock=f}}),n}(),e.mode.CFB}(requireCore(),requireCipherCore())),modeCfbExports}var modeCtrExports={},modeCtr={get exports(){return modeCtrExports},set exports(e){modeCtrExports=e}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,modeCtr.exports=function(e){return e.mode.CTR=(n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize,f=this._iv,g=this._counter;f&&(g=this._counter=f.slice(0),this._iv=void 0);var m=g.slice(0);u.encryptBlock(m,0),g[d-1]=g[d-1]+1|0;for(var y=0;y<d;y++)o[s+y]^=m[y]}}),n.Decryptor=r,n),e.mode.CTR;var n,r}(requireCore(),requireCipherCore())),modeCtrExports}var modeCtrGladmanExports={},modeCtrGladman={get exports(){return modeCtrGladmanExports},set exports(e){modeCtrGladmanExports=e}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,modeCtrGladman.exports=function(e){/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */return e.mode.CTRGladman=function(){var n=e.lib.BlockCipherMode.extend();function r(u){if(255&~(u>>24))u+=1<<24;else{var d=u>>16&255,f=u>>8&255,g=255&u;d===255?(d=0,f===255?(f=0,g===255?g=0:++g):++f):++d,u=0,u+=d<<16,u+=f<<8,u+=g}return u}function o(u){return(u[0]=r(u[0]))===0&&(u[1]=r(u[1])),u}var s=n.Encryptor=n.extend({processBlock:function(u,d){var f=this._cipher,g=f.blockSize,m=this._iv,y=this._counter;m&&(y=this._counter=m.slice(0),this._iv=void 0),o(y);var v=y.slice(0);f.encryptBlock(v,0);for(var _=0;_<g;_++)u[d+_]^=v[_]}});return n.Decryptor=s,n}(),e.mode.CTRGladman}(requireCore(),requireCipherCore())),modeCtrGladmanExports}var modeOfbExports={},modeOfb={get exports(){return modeOfbExports},set exports(e){modeOfbExports=e}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,modeOfb.exports=function(e){return e.mode.OFB=(n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(o,s){var u=this._cipher,d=u.blockSize,f=this._iv,g=this._keystream;f&&(g=this._keystream=f.slice(0),this._iv=void 0),u.encryptBlock(g,0);for(var m=0;m<d;m++)o[s+m]^=g[m]}}),n.Decryptor=r,n),e.mode.OFB;var n,r}(requireCore(),requireCipherCore())),modeOfbExports}var modeEcbExports={},modeEcb={get exports(){return modeEcbExports},set exports(e){modeEcbExports=e}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,modeEcb.exports=function(e){return e.mode.ECB=((n=e.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(r,o){this._cipher.encryptBlock(r,o)}}),n.Decryptor=n.extend({processBlock:function(r,o){this._cipher.decryptBlock(r,o)}}),n),e.mode.ECB;var n}(requireCore(),requireCipherCore())),modeEcbExports}var padAnsix923Exports={},padAnsix923={get exports(){return padAnsix923Exports},set exports(e){padAnsix923Exports=e}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,padAnsix923.exports=function(e){return e.pad.AnsiX923={pad:function(n,r){var o=n.sigBytes,s=4*r,u=s-o%s,d=o+u-1;n.clamp(),n.words[d>>>2]|=u<<24-d%4*8,n.sigBytes+=u},unpad:function(n){var r=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=r}},e.pad.Ansix923}(requireCore(),requireCipherCore())),padAnsix923Exports}var padIso10126Exports={},padIso10126={get exports(){return padIso10126Exports},set exports(e){padIso10126Exports=e}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,padIso10126.exports=function(e){return e.pad.Iso10126={pad:function(n,r){var o=4*r,s=o-n.sigBytes%o;n.concat(e.lib.WordArray.random(s-1)).concat(e.lib.WordArray.create([s<<24],1))},unpad:function(n){var r=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=r}},e.pad.Iso10126}(requireCore(),requireCipherCore())),padIso10126Exports}var padIso97971Exports={},padIso97971={get exports(){return padIso97971Exports},set exports(e){padIso97971Exports=e}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,padIso97971.exports=function(e){return e.pad.Iso97971={pad:function(n,r){n.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(n,r)},unpad:function(n){e.pad.ZeroPadding.unpad(n),n.sigBytes--}},e.pad.Iso97971}(requireCore(),requireCipherCore())),padIso97971Exports}var padZeropaddingExports={},padZeropadding={get exports(){return padZeropaddingExports},set exports(e){padZeropaddingExports=e}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,padZeropadding.exports=function(e){return e.pad.ZeroPadding={pad:function(n,r){var o=4*r;n.clamp(),n.sigBytes+=o-(n.sigBytes%o||o)},unpad:function(n){var r=n.words,o=n.sigBytes-1;for(o=n.sigBytes-1;o>=0;o--)if(r[o>>>2]>>>24-o%4*8&255){n.sigBytes=o+1;break}}},e.pad.ZeroPadding}(requireCore(),requireCipherCore())),padZeropaddingExports}var padNopaddingExports={},padNopadding={get exports(){return padNopaddingExports},set exports(e){padNopaddingExports=e}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,padNopadding.exports=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}(requireCore(),requireCipherCore())),padNopaddingExports}var formatHexExports={},formatHex={get exports(){return formatHexExports},set exports(e){formatHexExports=e}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,formatHex.exports=function(e){return function(){var n=e,r=n.lib.CipherParams,o=n.enc.Hex;n.format.Hex={stringify:function(s){return s.ciphertext.toString(o)},parse:function(s){var u=o.parse(s);return r.create({ciphertext:u})}}}(),e.format.Hex}(requireCore(),requireCipherCore())),formatHexExports}var aesExports={},aes={get exports(){return aesExports},set exports(e){aesExports=e}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,aes.exports=function(e){return function(){var n=e,r=n.lib.BlockCipher,o=n.algo,s=[],u=[],d=[],f=[],g=[],m=[],y=[],v=[],_=[],w=[];(function(){for(var S=[],M=0;M<256;M++)S[M]=M<128?M<<1:M<<1^283;var E=0,P=0;for(M=0;M<256;M++){var T=P^P<<1^P<<2^P<<3^P<<4;T=T>>>8^255&T^99,s[E]=T,u[T]=E;var D=S[E],F=S[D],I=S[F],N=257*S[T]^16843008*T;d[E]=N<<24|N>>>8,f[E]=N<<16|N>>>16,g[E]=N<<8|N>>>24,m[E]=N,N=16843009*I^65537*F^257*D^16843008*E,y[T]=N<<24|N>>>8,v[T]=N<<16|N>>>16,_[T]=N<<8|N>>>24,w[T]=N,E?(E=D^S[S[S[I^D]]],P^=S[S[P]]):E=P=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],k=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var S=this._keyPriorReset=this._key,M=S.words,E=S.sigBytes/4,P=4*((this._nRounds=E+6)+1),T=this._keySchedule=[],D=0;D<P;D++)D<E?T[D]=M[D]:(N=T[D-1],D%E?E>6&&D%E==4&&(N=s[N>>>24]<<24|s[N>>>16&255]<<16|s[N>>>8&255]<<8|s[255&N]):(N=s[(N=N<<8|N>>>24)>>>24]<<24|s[N>>>16&255]<<16|s[N>>>8&255]<<8|s[255&N],N^=x[D/E|0]<<24),T[D]=T[D-E]^N);for(var F=this._invKeySchedule=[],I=0;I<P;I++){if(D=P-I,I%4)var N=T[D];else N=T[D-4];F[I]=I<4||D<=4?N:y[s[N>>>24]]^v[s[N>>>16&255]]^_[s[N>>>8&255]]^w[s[255&N]]}}},encryptBlock:function(S,M){this._doCryptBlock(S,M,this._keySchedule,d,f,g,m,s)},decryptBlock:function(S,M){var E=S[M+1];S[M+1]=S[M+3],S[M+3]=E,this._doCryptBlock(S,M,this._invKeySchedule,y,v,_,w,u),E=S[M+1],S[M+1]=S[M+3],S[M+3]=E},_doCryptBlock:function(S,M,E,P,T,D,F,I){for(var N=this._nRounds,q=S[M]^E[0],Y=S[M+1]^E[1],Z=S[M+2]^E[2],j=S[M+3]^E[3],ne=4,le=1;le<N;le++){var J=P[q>>>24]^T[Y>>>16&255]^D[Z>>>8&255]^F[255&j]^E[ne++],O=P[Y>>>24]^T[Z>>>16&255]^D[j>>>8&255]^F[255&q]^E[ne++],U=P[Z>>>24]^T[j>>>16&255]^D[q>>>8&255]^F[255&Y]^E[ne++],W=P[j>>>24]^T[q>>>16&255]^D[Y>>>8&255]^F[255&Z]^E[ne++];q=J,Y=O,Z=U,j=W}J=(I[q>>>24]<<24|I[Y>>>16&255]<<16|I[Z>>>8&255]<<8|I[255&j])^E[ne++],O=(I[Y>>>24]<<24|I[Z>>>16&255]<<16|I[j>>>8&255]<<8|I[255&q])^E[ne++],U=(I[Z>>>24]<<24|I[j>>>16&255]<<16|I[q>>>8&255]<<8|I[255&Y])^E[ne++],W=(I[j>>>24]<<24|I[q>>>16&255]<<16|I[Y>>>8&255]<<8|I[255&Z])^E[ne++],S[M]=J,S[M+1]=O,S[M+2]=U,S[M+3]=W},keySize:8});n.AES=r._createHelper(k)}(),e.AES}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),aesExports}var tripledesExports={},tripledes={get exports(){return tripledesExports},set exports(e){tripledesExports=e}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,tripledes.exports=function(e){return function(){var n=e,r=n.lib,o=r.WordArray,s=r.BlockCipher,u=n.algo,d=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],f=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],g=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],m=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],y=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],v=u.DES=s.extend({_doReset:function(){for(var k=this._key.words,S=[],M=0;M<56;M++){var E=d[M]-1;S[M]=k[E>>>5]>>>31-E%32&1}for(var P=this._subKeys=[],T=0;T<16;T++){var D=P[T]=[],F=g[T];for(M=0;M<24;M++)D[M/6|0]|=S[(f[M]-1+F)%28]<<31-M%6,D[4+(M/6|0)]|=S[28+(f[M+24]-1+F)%28]<<31-M%6;for(D[0]=D[0]<<1|D[0]>>>31,M=1;M<7;M++)D[M]=D[M]>>>4*(M-1)+3;D[7]=D[7]<<5|D[7]>>>27}var I=this._invSubKeys=[];for(M=0;M<16;M++)I[M]=P[15-M]},encryptBlock:function(k,S){this._doCryptBlock(k,S,this._subKeys)},decryptBlock:function(k,S){this._doCryptBlock(k,S,this._invSubKeys)},_doCryptBlock:function(k,S,M){this._lBlock=k[S],this._rBlock=k[S+1],_.call(this,4,252645135),_.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),_.call(this,1,1431655765);for(var E=0;E<16;E++){for(var P=M[E],T=this._lBlock,D=this._rBlock,F=0,I=0;I<8;I++)F|=m[I][((D^P[I])&y[I])>>>0];this._lBlock=D,this._rBlock=T^F}var N=this._lBlock;this._lBlock=this._rBlock,this._rBlock=N,_.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),_.call(this,16,65535),_.call(this,4,252645135),k[S]=this._lBlock,k[S+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function _(k,S){var M=(this._lBlock>>>k^this._rBlock)&S;this._rBlock^=M,this._lBlock^=M<<k}function w(k,S){var M=(this._rBlock>>>k^this._lBlock)&S;this._lBlock^=M,this._rBlock^=M<<k}n.DES=s._createHelper(v);var x=u.TripleDES=s.extend({_doReset:function(){var k=this._key.words;if(k.length!==2&&k.length!==4&&k.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=k.slice(0,2),M=k.length<4?k.slice(0,2):k.slice(2,4),E=k.length<6?k.slice(0,2):k.slice(4,6);this._des1=v.createEncryptor(o.create(S)),this._des2=v.createEncryptor(o.create(M)),this._des3=v.createEncryptor(o.create(E))},encryptBlock:function(k,S){this._des1.encryptBlock(k,S),this._des2.decryptBlock(k,S),this._des3.encryptBlock(k,S)},decryptBlock:function(k,S){this._des3.decryptBlock(k,S),this._des2.encryptBlock(k,S),this._des1.decryptBlock(k,S)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=s._createHelper(x)}(),e.TripleDES}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),tripledesExports}var rc4Exports={},rc4={get exports(){return rc4Exports},set exports(e){rc4Exports=e}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,rc4.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,s=o.RC4=r.extend({_doReset:function(){for(var f=this._key,g=f.words,m=f.sigBytes,y=this._S=[],v=0;v<256;v++)y[v]=v;v=0;for(var _=0;v<256;v++){var w=v%m,x=g[w>>>2]>>>24-w%4*8&255;_=(_+y[v]+x)%256;var k=y[v];y[v]=y[_],y[_]=k}this._i=this._j=0},_doProcessBlock:function(f,g){f[g]^=u.call(this)},keySize:8,ivSize:0});function u(){for(var f=this._S,g=this._i,m=this._j,y=0,v=0;v<4;v++){m=(m+f[g=(g+1)%256])%256;var _=f[g];f[g]=f[m],f[m]=_,y|=f[(f[g]+f[m])%256]<<24-8*v}return this._i=g,this._j=m,y}n.RC4=r._createHelper(s);var d=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var f=this.cfg.drop;f>0;f--)u.call(this)}});n.RC4Drop=r._createHelper(d)}(),e.RC4}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rc4Exports}var rabbitExports={},rabbit={get exports(){return rabbitExports},set exports(e){rabbitExports=e}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,rabbit.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,s=[],u=[],d=[],f=o.Rabbit=r.extend({_doReset:function(){for(var m=this._key.words,y=this.cfg.iv,v=0;v<4;v++)m[v]=16711935&(m[v]<<8|m[v]>>>24)|4278255360&(m[v]<<24|m[v]>>>8);var _=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],w=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];for(this._b=0,v=0;v<4;v++)g.call(this);for(v=0;v<8;v++)w[v]^=_[v+4&7];if(y){var x=y.words,k=x[0],S=x[1],M=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),E=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),P=M>>>16|4294901760&E,T=E<<16|65535&M;for(w[0]^=M,w[1]^=P,w[2]^=E,w[3]^=T,w[4]^=M,w[5]^=P,w[6]^=E,w[7]^=T,v=0;v<4;v++)g.call(this)}},_doProcessBlock:function(m,y){var v=this._X;g.call(this),s[0]=v[0]^v[5]>>>16^v[3]<<16,s[1]=v[2]^v[7]>>>16^v[5]<<16,s[2]=v[4]^v[1]>>>16^v[7]<<16,s[3]=v[6]^v[3]>>>16^v[1]<<16;for(var _=0;_<4;_++)s[_]=16711935&(s[_]<<8|s[_]>>>24)|4278255360&(s[_]<<24|s[_]>>>8),m[y+_]^=s[_]},blockSize:4,ivSize:2});function g(){for(var m=this._X,y=this._C,v=0;v<8;v++)u[v]=y[v];for(y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<u[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<u[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<u[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<u[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<u[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<u[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<u[6]>>>0?1:0)|0,this._b=y[7]>>>0<u[7]>>>0?1:0,v=0;v<8;v++){var _=m[v]+y[v],w=65535&_,x=_>>>16,k=((w*w>>>17)+w*x>>>15)+x*x,S=((4294901760&_)*_|0)+((65535&_)*_|0);d[v]=k^S}m[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,m[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,m[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,m[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,m[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,m[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,m[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,m[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.Rabbit=r._createHelper(f)}(),e.Rabbit}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rabbitExports}var rabbitLegacyExports={},rabbitLegacy={get exports(){return rabbitLegacyExports},set exports(e){rabbitLegacyExports=e}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,rabbitLegacy.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,s=[],u=[],d=[],f=o.RabbitLegacy=r.extend({_doReset:function(){var m=this._key.words,y=this.cfg.iv,v=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],_=this._C=[m[2]<<16|m[2]>>>16,4294901760&m[0]|65535&m[1],m[3]<<16|m[3]>>>16,4294901760&m[1]|65535&m[2],m[0]<<16|m[0]>>>16,4294901760&m[2]|65535&m[3],m[1]<<16|m[1]>>>16,4294901760&m[3]|65535&m[0]];this._b=0;for(var w=0;w<4;w++)g.call(this);for(w=0;w<8;w++)_[w]^=v[w+4&7];if(y){var x=y.words,k=x[0],S=x[1],M=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),E=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),P=M>>>16|4294901760&E,T=E<<16|65535&M;for(_[0]^=M,_[1]^=P,_[2]^=E,_[3]^=T,_[4]^=M,_[5]^=P,_[6]^=E,_[7]^=T,w=0;w<4;w++)g.call(this)}},_doProcessBlock:function(m,y){var v=this._X;g.call(this),s[0]=v[0]^v[5]>>>16^v[3]<<16,s[1]=v[2]^v[7]>>>16^v[5]<<16,s[2]=v[4]^v[1]>>>16^v[7]<<16,s[3]=v[6]^v[3]>>>16^v[1]<<16;for(var _=0;_<4;_++)s[_]=16711935&(s[_]<<8|s[_]>>>24)|4278255360&(s[_]<<24|s[_]>>>8),m[y+_]^=s[_]},blockSize:4,ivSize:2});function g(){for(var m=this._X,y=this._C,v=0;v<8;v++)u[v]=y[v];for(y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<u[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<u[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<u[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<u[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<u[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<u[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<u[6]>>>0?1:0)|0,this._b=y[7]>>>0<u[7]>>>0?1:0,v=0;v<8;v++){var _=m[v]+y[v],w=65535&_,x=_>>>16,k=((w*w>>>17)+w*x>>>15)+x*x,S=((4294901760&_)*_|0)+((65535&_)*_|0);d[v]=k^S}m[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,m[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,m[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,m[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,m[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,m[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,m[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,m[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.RabbitLegacy=r._createHelper(f)}(),e.RabbitLegacy}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rabbitLegacyExports}var blowfishExports={},blowfish={get exports(){return blowfishExports},set exports(e){blowfishExports=e}},hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,blowfish.exports=function(e){return function(){var n=e,r=n.lib.BlockCipher,o=n.algo,s=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],d=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],f={pbox:[],sbox:[]};function g(w,x){var k=x>>24&255,S=x>>16&255,M=x>>8&255,E=255&x,P=w.sbox[0][k]+w.sbox[1][S];return P^=w.sbox[2][M],P+=w.sbox[3][E]}function m(w,x,k){for(var S,M=x,E=k,P=0;P<s;++P)S=M^=w.pbox[P],M=E=g(w,M)^E,E=S;return S=M,M=E,E=S,E^=w.pbox[s],{left:M^=w.pbox[s+1],right:E}}function y(w,x,k){for(var S,M=x,E=k,P=s+1;P>1;--P)S=M^=w.pbox[P],M=E=g(w,M)^E,E=S;return S=M,M=E,E=S,E^=w.pbox[1],{left:M^=w.pbox[0],right:E}}function v(w,x,k){for(var S=0;S<4;S++){w.sbox[S]=[];for(var M=0;M<256;M++)w.sbox[S][M]=d[S][M]}for(var E=0,P=0;P<s+2;P++)w.pbox[P]=u[P]^x[E],++E>=k&&(E=0);for(var T=0,D=0,F=0,I=0;I<s+2;I+=2)T=(F=m(w,T,D)).left,D=F.right,w.pbox[I]=T,w.pbox[I+1]=D;for(var N=0;N<4;N++)for(var q=0;q<256;q+=2)T=(F=m(w,T,D)).left,D=F.right,w.sbox[N][q]=T,w.sbox[N][q+1]=D;return!0}var _=o.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,x=w.words,k=w.sigBytes/4;v(f,x,k)}},encryptBlock:function(w,x){var k=m(f,w[x],w[x+1]);w[x]=k.left,w[x+1]=k.right},decryptBlock:function(w,x){var k=y(f,w[x],w[x+1]);w[x]=k.left,w[x+1]=k.right},blockSize:2,keySize:4,ivSize:2});n.Blowfish=r._createHelper(_)}(),e.Blowfish}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),blowfishExports}cryptoJs.exports=function(e){return e}(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish());var CryptoJS=cryptoJsExports,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";function int2char(e){return BI_RM.charAt(e)}function op_and(e,n){return e&n}function op_or(e,n){return e|n}function op_xor(e,n){return e^n}function op_andnot(e,n){return e&~n}function lbit(e){if(e==0)return-1;var n=0;return 65535&e||(e>>=16,n+=16),255&e||(e>>=8,n+=8),15&e||(e>>=4,n+=4),3&e||(e>>=2,n+=2),1&e||++n,n}function cbit(e){for(var n=0;e!=0;)e&=e-1,++n;return n}var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=",decoder$1;function hex2b64(e){var n,r,o="";for(n=0;n+3<=e.length;n+=3)r=parseInt(e.substring(n,n+3),16),o+=b64map.charAt(r>>6)+b64map.charAt(63&r);for(n+1==e.length?(r=parseInt(e.substring(n,n+1),16),o+=b64map.charAt(r<<2)):n+2==e.length&&(r=parseInt(e.substring(n,n+2),16),o+=b64map.charAt(r>>2)+b64map.charAt((3&r)<<4));(3&o.length)>0;)o+=b64pad;return o}function b64tohex(e){var n,r="",o=0,s=0;for(n=0;n<e.length&&e.charAt(n)!=b64pad;++n){var u=b64map.indexOf(e.charAt(n));u<0||(o==0?(r+=int2char(u>>2),s=3&u,o=1):o==1?(r+=int2char(s<<2|u>>4),s=15&u,o=2):o==2?(r+=int2char(s),r+=int2char(u>>2),s=3&u,o=3):(r+=int2char(s<<2|u>>4),r+=int2char(15&u),o=0))}return o==1&&(r+=int2char(s<<2)),r}var Hex={decode:function(e){var n;if(decoder$1===void 0){var r="0123456789ABCDEF",o=` \f
\r	\xA0\u2028\u2029`;for(decoder$1={},n=0;n<16;++n)decoder$1[r.charAt(n)]=n;for(r=r.toLowerCase(),n=10;n<16;++n)decoder$1[r.charAt(n)]=n;for(n=0;n<8;++n)decoder$1[o.charAt(n)]=-1}var s=[],u=0,d=0;for(n=0;n<e.length;++n){var f=e.charAt(n);if(f=="=")break;if((f=decoder$1[f])!=-1){if(f===void 0)throw new Error("Illegal character at offset "+n);u|=f,++d>=2?(s[s.length]=u,u=0,d=0):u<<=4}}if(d)throw new Error("Hex encoding incomplete: 4 bits missing");return s}},decoder,Base64$1={decode:function(e){var n;if(decoder===void 0){var r=`= \f
\r	\xA0\u2028\u2029`;for(decoder=Object.create(null),n=0;n<64;++n)decoder["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n)]=n;for(decoder["-"]=62,decoder._=63,n=0;n<9;++n)decoder[r.charAt(n)]=-1}var o=[],s=0,u=0;for(n=0;n<e.length;++n){var d=e.charAt(n);if(d=="=")break;if((d=decoder[d])!=-1){if(d===void 0)throw new Error("Illegal character at offset "+n);s|=d,++u>=4?(o[o.length]=s>>16,o[o.length]=s>>8&255,o[o.length]=255&s,s=0,u=0):s<<=6}}switch(u){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:o[o.length]=s>>10;break;case 3:o[o.length]=s>>16,o[o.length]=s>>8&255}return o},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var n=Base64$1.re.exec(e);if(n)if(n[1])e=n[1];else{if(!n[2])throw new Error("RegExp out of sync");e=n[2]}return Base64$1.decode(e)}},max=1e13,Int10=function(){function e(n){this.buf=[+n||0]}return e.prototype.mulAdd=function(n,r){var o,s,u=this.buf,d=u.length;for(o=0;o<d;++o)(s=u[o]*n+r)<max?r=0:s-=(r=0|s/max)*max,u[o]=s;r>0&&(u[o]=r)},e.prototype.sub=function(n){var r,o,s=this.buf,u=s.length;for(r=0;r<u;++r)(o=s[r]-n)<0?(o+=max,n=1):n=0,s[r]=o;for(;s[s.length-1]===0;)s.pop()},e.prototype.toString=function(n){if((n||10)!=10)throw new Error("only base 10 is supported");for(var r=this.buf,o=r[r.length-1].toString(),s=r.length-2;s>=0;--s)o+=(max+r[s]).toString().substring(1);return o},e.prototype.valueOf=function(){for(var n=this.buf,r=0,o=n.length-1;o>=0;--o)r=r*max+n[o];return r},e.prototype.simplify=function(){var n=this.buf;return n.length==1?n[0]:this},e}(),ellipsis="\u2026",reTimeS=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,reTimeL=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function stringCut(e,n){return e.length>n&&(e=e.substring(0,n)+ellipsis),e}var Stream=function(){function e(n,r){this.hexDigits="0123456789ABCDEF",n instanceof e?(this.enc=n.enc,this.pos=n.pos):(this.enc=n,this.pos=r)}return e.prototype.get=function(n){if(n===void 0&&(n=this.pos++),n>=this.enc.length)throw new Error("Requesting byte offset ".concat(n," on a stream of length ").concat(this.enc.length));return typeof this.enc=="string"?this.enc.charCodeAt(n):this.enc[n]},e.prototype.hexByte=function(n){return this.hexDigits.charAt(n>>4&15)+this.hexDigits.charAt(15&n)},e.prototype.hexDump=function(n,r,o){for(var s="",u=n;u<r;++u)if(s+=this.hexByte(this.get(u)),o!==!0)switch(15&u){case 7:s+="  ";break;case 15:s+=`
`;break;default:s+=" "}return s},e.prototype.isASCII=function(n,r){for(var o=n;o<r;++o){var s=this.get(o);if(s<32||s>176)return!1}return!0},e.prototype.parseStringISO=function(n,r){for(var o="",s=n;s<r;++s)o+=String.fromCharCode(this.get(s));return o},e.prototype.parseStringUTF=function(n,r){for(var o="",s=n;s<r;){var u=this.get(s++);o+=u<128?String.fromCharCode(u):u>191&&u<224?String.fromCharCode((31&u)<<6|63&this.get(s++)):String.fromCharCode((15&u)<<12|(63&this.get(s++))<<6|63&this.get(s++))}return o},e.prototype.parseStringBMP=function(n,r){for(var o,s,u="",d=n;d<r;)o=this.get(d++),s=this.get(d++),u+=String.fromCharCode(o<<8|s);return u},e.prototype.parseTime=function(n,r,o){var s=this.parseStringISO(n,r),u=(o?reTimeS:reTimeL).exec(s);return u?(o&&(u[1]=+u[1],u[1]+=+u[1]<70?2e3:1900),s=u[1]+"-"+u[2]+"-"+u[3]+" "+u[4],u[5]&&(s+=":"+u[5],u[6]&&(s+=":"+u[6],u[7]&&(s+="."+u[7]))),u[8]&&(s+=" UTC",u[8]!="Z"&&(s+=u[8],u[9]&&(s+=":"+u[9]))),s):"Unrecognized time: "+s},e.prototype.parseInteger=function(n,r){for(var o,s=this.get(n),u=s>127,d=u?255:0,f="";s==d&&++n<r;)s=this.get(n);if((o=r-n)===0)return u?-1:0;if(o>4){for(f=s,o<<=3;!(128&(+f^d));)f=+f<<1,--o;f="("+o+` bit)
`}u&&(s-=256);for(var g=new Int10(s),m=n+1;m<r;++m)g.mulAdd(256,this.get(m));return f+g.toString()},e.prototype.parseBitString=function(n,r,o){for(var s=this.get(n),u="("+((r-n-1<<3)-s)+` bit)
`,d="",f=n+1;f<r;++f){for(var g=this.get(f),m=f==r-1?s:0,y=7;y>=m;--y)d+=g>>y&1?"1":"0";if(d.length>o)return u+stringCut(d,o)}return u+d},e.prototype.parseOctetString=function(n,r,o){if(this.isASCII(n,r))return stringCut(this.parseStringISO(n,r),o);var s=r-n,u="("+s+` byte)
`;s>(o/=2)&&(r=n+o);for(var d=n;d<r;++d)u+=this.hexByte(this.get(d));return s>o&&(u+=ellipsis),u},e.prototype.parseOID=function(n,r,o){for(var s="",u=new Int10,d=0,f=n;f<r;++f){var g=this.get(f);if(u.mulAdd(128,127&g),d+=7,!(128&g)){if(s==="")if((u=u.simplify())instanceof Int10)u.sub(80),s="2."+u.toString();else{var m=u<80?u<40?0:1:2;s=m+"."+(u-40*m)}else s+="."+u.toString();if(s.length>o)return stringCut(s,o);u=new Int10,d=0}}return d>0&&(s+=".incomplete"),s},e}(),ASN1=function(){function e(n,r,o,s,u){if(!(s instanceof ASN1Tag))throw new Error("Invalid tag value.");this.stream=n,this.header=r,this.length=o,this.tag=s,this.sub=u}return e.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},e.prototype.content=function(n){if(this.tag===void 0)return null;n===void 0&&(n=1/0);var r=this.posContent(),o=Math.abs(this.length);if(!this.tag.isUniversal())return this.sub!==null?"("+this.sub.length+" elem)":this.stream.parseOctetString(r,r+o,n);switch(this.tag.tagNumber){case 1:return this.stream.get(r)===0?"false":"true";case 2:return this.stream.parseInteger(r,r+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(r,r+o,n);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(r,r+o,n);case 6:return this.stream.parseOID(r,r+o,n);case 16:case 17:return this.sub!==null?"("+this.sub.length+" elem)":"(no elem)";case 12:return stringCut(this.stream.parseStringUTF(r,r+o),n);case 18:case 19:case 20:case 21:case 22:case 26:return stringCut(this.stream.parseStringISO(r,r+o),n);case 30:return stringCut(this.stream.parseStringBMP(r,r+o),n);case 23:case 24:return this.stream.parseTime(r,r+o,this.tag.tagNumber==23)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub===null?"null":this.sub.length)+"]"},e.prototype.toPrettyString=function(n){n===void 0&&(n="");var r=n+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(r+="+"),r+=this.length,this.tag.tagConstructed?r+=" (constructed)":!this.tag.isUniversal()||this.tag.tagNumber!=3&&this.tag.tagNumber!=4||this.sub===null||(r+=" (encapsulates)"),r+=`
`,this.sub!==null){n+="  ";for(var o=0,s=this.sub.length;o<s;++o)r+=this.sub[o].toPrettyString(n)}return r},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},e.decodeLength=function(n){var r=n.get(),o=127&r;if(o==r)return o;if(o>6)throw new Error("Length over 48 bits not supported at position "+(n.pos-1));if(o===0)return null;r=0;for(var s=0;s<o;++s)r=256*r+n.get();return r},e.prototype.getHexStringValue=function(){var n=this.toHexString(),r=2*this.header,o=2*this.length;return n.substr(r,o)},e.decode=function(n){var r;r=n instanceof Stream?n:new Stream(n,0);var o=new Stream(r),s=new ASN1Tag(r),u=e.decodeLength(r),d=r.pos,f=d-o.pos,g=null,m=function(){var v=[];if(u!==null){for(var _=d+u;r.pos<_;)v[v.length]=e.decode(r);if(r.pos!=_)throw new Error("Content size is not correct for container starting at offset "+d)}else try{for(;;){var w=e.decode(r);if(w.tag.isEOC())break;v[v.length]=w}u=d-r.pos}catch(x){throw new Error("Exception while decoding undefined length content: "+x)}return v};if(s.tagConstructed)g=m();else if(s.isUniversal()&&(s.tagNumber==3||s.tagNumber==4))try{if(s.tagNumber==3&&r.get()!=0)throw new Error("BIT STRINGs with unused bits cannot encapsulate.");g=m();for(var y=0;y<g.length;++y)if(g[y].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch{g=null}if(g===null){if(u===null)throw new Error("We can't skip over an invalid tag with undefined length at offset "+d);r.pos=d+Math.abs(u)}return new e(o,f,u,s,g)},e}(),ASN1Tag=function(){function e(n){var r=n.get();if(this.tagClass=r>>6,this.tagConstructed=!!(32&r),this.tagNumber=31&r,this.tagNumber==31){var o=new Int10;do r=n.get(),o.mulAdd(128,127&r);while(128&r);this.tagNumber=o.simplify()}}return e.prototype.isUniversal=function(){return this.tagClass===0},e.prototype.isEOC=function(){return this.tagClass===0&&this.tagNumber===0},e}(),dbits,canary=0xdeadbeefcafe,j_lm=(16777215&canary)==15715070,lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1],BigInteger=function(){function e(n,r,o){n!=null&&(typeof n=="number"?this.fromNumber(n,r,o):r==null&&typeof n!="string"?this.fromString(n,256):this.fromString(n,r))}return e.prototype.toString=function(n){if(this.s<0)return"-"+this.negate().toString(n);var r;if(n==16)r=4;else if(n==8)r=3;else if(n==2)r=1;else if(n==32)r=5;else{if(n!=4)return this.toRadix(n);r=2}var o,s=(1<<r)-1,u=!1,d="",f=this.t,g=this.DB-f*this.DB%r;if(f-- >0)for(g<this.DB&&(o=this[f]>>g)>0&&(u=!0,d=int2char(o));f>=0;)g<r?(o=(this[f]&(1<<g)-1)<<r-g,o|=this[--f]>>(g+=this.DB-r)):(o=this[f]>>(g-=r)&s,g<=0&&(g+=this.DB,--f)),o>0&&(u=!0),u&&(d+=int2char(o));return u?d:"0"},e.prototype.negate=function(){var n=nbi();return e.ZERO.subTo(this,n),n},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(n){var r=this.s-n.s;if(r!=0)return r;var o=this.t;if((r=o-n.t)!=0)return this.s<0?-r:r;for(;--o>=0;)if((r=this[o]-n[o])!=0)return r;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(n){var r=nbi();return this.abs().divRemTo(n,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&n.subTo(r,r),r},e.prototype.modPowInt=function(n,r){var o;return o=n<256||r.isEven()?new Classic(r):new Montgomery(r),this.exp(n,o)},e.prototype.clone=function(){var n=nbi();return this.copyTo(n),n},e.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var n=this.t,r=[];r[0]=this.s;var o,s=this.DB-n*this.DB%8,u=0;if(n-- >0)for(s<this.DB&&(o=this[n]>>s)!=(this.s&this.DM)>>s&&(r[u++]=o|this.s<<this.DB-s);n>=0;)s<8?(o=(this[n]&(1<<s)-1)<<8-s,o|=this[--n]>>(s+=this.DB-8)):(o=this[n]>>(s-=8)&255,s<=0&&(s+=this.DB,--n)),128&o&&(o|=-256),u==0&&(128&this.s)!=(128&o)&&++u,(u>0||o!=this.s)&&(r[u++]=o);return r},e.prototype.equals=function(n){return this.compareTo(n)==0},e.prototype.min=function(n){return this.compareTo(n)<0?this:n},e.prototype.max=function(n){return this.compareTo(n)>0?this:n},e.prototype.and=function(n){var r=nbi();return this.bitwiseTo(n,op_and,r),r},e.prototype.or=function(n){var r=nbi();return this.bitwiseTo(n,op_or,r),r},e.prototype.xor=function(n){var r=nbi();return this.bitwiseTo(n,op_xor,r),r},e.prototype.andNot=function(n){var r=nbi();return this.bitwiseTo(n,op_andnot,r),r},e.prototype.not=function(){for(var n=nbi(),r=0;r<this.t;++r)n[r]=this.DM&~this[r];return n.t=this.t,n.s=~this.s,n},e.prototype.shiftLeft=function(n){var r=nbi();return n<0?this.rShiftTo(-n,r):this.lShiftTo(n,r),r},e.prototype.shiftRight=function(n){var r=nbi();return n<0?this.lShiftTo(-n,r):this.rShiftTo(n,r),r},e.prototype.getLowestSetBit=function(){for(var n=0;n<this.t;++n)if(this[n]!=0)return n*this.DB+lbit(this[n]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var n=0,r=this.s&this.DM,o=0;o<this.t;++o)n+=cbit(this[o]^r);return n},e.prototype.testBit=function(n){var r=Math.floor(n/this.DB);return r>=this.t?this.s!=0:!!(this[r]&1<<n%this.DB)},e.prototype.setBit=function(n){return this.changeBit(n,op_or)},e.prototype.clearBit=function(n){return this.changeBit(n,op_andnot)},e.prototype.flipBit=function(n){return this.changeBit(n,op_xor)},e.prototype.add=function(n){var r=nbi();return this.addTo(n,r),r},e.prototype.subtract=function(n){var r=nbi();return this.subTo(n,r),r},e.prototype.multiply=function(n){var r=nbi();return this.multiplyTo(n,r),r},e.prototype.divide=function(n){var r=nbi();return this.divRemTo(n,r,null),r},e.prototype.remainder=function(n){var r=nbi();return this.divRemTo(n,null,r),r},e.prototype.divideAndRemainder=function(n){var r=nbi(),o=nbi();return this.divRemTo(n,r,o),[r,o]},e.prototype.modPow=function(n,r){var o,s,u=n.bitLength(),d=nbv(1);if(u<=0)return d;o=u<18?1:u<48?3:u<144?4:u<768?5:6,s=u<8?new Classic(r):r.isEven()?new Barrett(r):new Montgomery(r);var f=[],g=3,m=o-1,y=(1<<o)-1;if(f[1]=s.convert(this),o>1){var v=nbi();for(s.sqrTo(f[1],v);g<=y;)f[g]=nbi(),s.mulTo(v,f[g-2],f[g]),g+=2}var _,w,x=n.t-1,k=!0,S=nbi();for(u=nbits(n[x])-1;x>=0;){for(u>=m?_=n[x]>>u-m&y:(_=(n[x]&(1<<u+1)-1)<<m-u,x>0&&(_|=n[x-1]>>this.DB+u-m)),g=o;!(1&_);)_>>=1,--g;if((u-=g)<0&&(u+=this.DB,--x),k)f[_].copyTo(d),k=!1;else{for(;g>1;)s.sqrTo(d,S),s.sqrTo(S,d),g-=2;g>0?s.sqrTo(d,S):(w=d,d=S,S=w),s.mulTo(S,f[_],d)}for(;x>=0&&!(n[x]&1<<u);)s.sqrTo(d,S),w=d,d=S,S=w,--u<0&&(u=this.DB-1,--x)}return s.revert(d)},e.prototype.modInverse=function(n){var r=n.isEven();if(this.isEven()&&r||n.signum()==0)return e.ZERO;for(var o=n.clone(),s=this.clone(),u=nbv(1),d=nbv(0),f=nbv(0),g=nbv(1);o.signum()!=0;){for(;o.isEven();)o.rShiftTo(1,o),r?(u.isEven()&&d.isEven()||(u.addTo(this,u),d.subTo(n,d)),u.rShiftTo(1,u)):d.isEven()||d.subTo(n,d),d.rShiftTo(1,d);for(;s.isEven();)s.rShiftTo(1,s),r?(f.isEven()&&g.isEven()||(f.addTo(this,f),g.subTo(n,g)),f.rShiftTo(1,f)):g.isEven()||g.subTo(n,g),g.rShiftTo(1,g);o.compareTo(s)>=0?(o.subTo(s,o),r&&u.subTo(f,u),d.subTo(g,d)):(s.subTo(o,s),r&&f.subTo(u,f),g.subTo(d,g))}return s.compareTo(e.ONE)!=0?e.ZERO:g.compareTo(n)>=0?g.subtract(n):g.signum()<0?(g.addTo(n,g),g.signum()<0?g.add(n):g):g},e.prototype.pow=function(n){return this.exp(n,new NullExp)},e.prototype.gcd=function(n){var r=this.s<0?this.negate():this.clone(),o=n.s<0?n.negate():n.clone();if(r.compareTo(o)<0){var s=r;r=o,o=s}var u=r.getLowestSetBit(),d=o.getLowestSetBit();if(d<0)return r;for(u<d&&(d=u),d>0&&(r.rShiftTo(d,r),o.rShiftTo(d,o));r.signum()>0;)(u=r.getLowestSetBit())>0&&r.rShiftTo(u,r),(u=o.getLowestSetBit())>0&&o.rShiftTo(u,o),r.compareTo(o)>=0?(r.subTo(o,r),r.rShiftTo(1,r)):(o.subTo(r,o),o.rShiftTo(1,o));return d>0&&o.lShiftTo(d,o),o},e.prototype.isProbablePrime=function(n){var r,o=this.abs();if(o.t==1&&o[0]<=lowprimes[lowprimes.length-1]){for(r=0;r<lowprimes.length;++r)if(o[0]==lowprimes[r])return!0;return!1}if(o.isEven())return!1;for(r=1;r<lowprimes.length;){for(var s=lowprimes[r],u=r+1;u<lowprimes.length&&s<lplim;)s*=lowprimes[u++];for(s=o.modInt(s);r<u;)if(s%lowprimes[r++]==0)return!1}return o.millerRabin(n)},e.prototype.copyTo=function(n){for(var r=this.t-1;r>=0;--r)n[r]=this[r];n.t=this.t,n.s=this.s},e.prototype.fromInt=function(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0},e.prototype.fromString=function(n,r){var o;if(r==16)o=4;else if(r==8)o=3;else if(r==256)o=8;else if(r==2)o=1;else if(r==32)o=5;else{if(r!=4)return void this.fromRadix(n,r);o=2}this.t=0,this.s=0;for(var s=n.length,u=!1,d=0;--s>=0;){var f=o==8?255&+n[s]:intAt(n,s);f<0?n.charAt(s)=="-"&&(u=!0):(u=!1,d==0?this[this.t++]=f:d+o>this.DB?(this[this.t-1]|=(f&(1<<this.DB-d)-1)<<d,this[this.t++]=f>>this.DB-d):this[this.t-1]|=f<<d,(d+=o)>=this.DB&&(d-=this.DB))}o==8&&128&+n[0]&&(this.s=-1,d>0&&(this[this.t-1]|=(1<<this.DB-d)-1<<d)),this.clamp(),u&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t},e.prototype.dlShiftTo=function(n,r){var o;for(o=this.t-1;o>=0;--o)r[o+n]=this[o];for(o=n-1;o>=0;--o)r[o]=0;r.t=this.t+n,r.s=this.s},e.prototype.drShiftTo=function(n,r){for(var o=n;o<this.t;++o)r[o-n]=this[o];r.t=Math.max(this.t-n,0),r.s=this.s},e.prototype.lShiftTo=function(n,r){for(var o=n%this.DB,s=this.DB-o,u=(1<<s)-1,d=Math.floor(n/this.DB),f=this.s<<o&this.DM,g=this.t-1;g>=0;--g)r[g+d+1]=this[g]>>s|f,f=(this[g]&u)<<o;for(g=d-1;g>=0;--g)r[g]=0;r[d]=f,r.t=this.t+d+1,r.s=this.s,r.clamp()},e.prototype.rShiftTo=function(n,r){r.s=this.s;var o=Math.floor(n/this.DB);if(o>=this.t)r.t=0;else{var s=n%this.DB,u=this.DB-s,d=(1<<s)-1;r[0]=this[o]>>s;for(var f=o+1;f<this.t;++f)r[f-o-1]|=(this[f]&d)<<u,r[f-o]=this[f]>>s;s>0&&(r[this.t-o-1]|=(this.s&d)<<u),r.t=this.t-o,r.clamp()}},e.prototype.subTo=function(n,r){for(var o=0,s=0,u=Math.min(n.t,this.t);o<u;)s+=this[o]-n[o],r[o++]=s&this.DM,s>>=this.DB;if(n.t<this.t){for(s-=n.s;o<this.t;)s+=this[o],r[o++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;o<n.t;)s-=n[o],r[o++]=s&this.DM,s>>=this.DB;s-=n.s}r.s=s<0?-1:0,s<-1?r[o++]=this.DV+s:s>0&&(r[o++]=s),r.t=o,r.clamp()},e.prototype.multiplyTo=function(n,r){var o=this.abs(),s=n.abs(),u=o.t;for(r.t=u+s.t;--u>=0;)r[u]=0;for(u=0;u<s.t;++u)r[u+o.t]=o.am(0,s[u],r,u,0,o.t);r.s=0,r.clamp(),this.s!=n.s&&e.ZERO.subTo(r,r)},e.prototype.squareTo=function(n){for(var r=this.abs(),o=n.t=2*r.t;--o>=0;)n[o]=0;for(o=0;o<r.t-1;++o){var s=r.am(o,r[o],n,2*o,0,1);(n[o+r.t]+=r.am(o+1,2*r[o],n,2*o+1,s,r.t-o-1))>=r.DV&&(n[o+r.t]-=r.DV,n[o+r.t+1]=1)}n.t>0&&(n[n.t-1]+=r.am(o,r[o],n,2*o,0,1)),n.s=0,n.clamp()},e.prototype.divRemTo=function(n,r,o){var s=n.abs();if(!(s.t<=0)){var u=this.abs();if(u.t<s.t)return r!=null&&r.fromInt(0),void(o!=null&&this.copyTo(o));o==null&&(o=nbi());var d=nbi(),f=this.s,g=n.s,m=this.DB-nbits(s[s.t-1]);m>0?(s.lShiftTo(m,d),u.lShiftTo(m,o)):(s.copyTo(d),u.copyTo(o));var y=d.t,v=d[y-1];if(v!=0){var _=v*(1<<this.F1)+(y>1?d[y-2]>>this.F2:0),w=this.FV/_,x=(1<<this.F1)/_,k=1<<this.F2,S=o.t,M=S-y,E=r==null?nbi():r;for(d.dlShiftTo(M,E),o.compareTo(E)>=0&&(o[o.t++]=1,o.subTo(E,o)),e.ONE.dlShiftTo(y,E),E.subTo(d,d);d.t<y;)d[d.t++]=0;for(;--M>=0;){var P=o[--S]==v?this.DM:Math.floor(o[S]*w+(o[S-1]+k)*x);if((o[S]+=d.am(0,P,o,M,0,y))<P)for(d.dlShiftTo(M,E),o.subTo(E,o);o[S]<--P;)o.subTo(E,o)}r!=null&&(o.drShiftTo(y,r),f!=g&&e.ZERO.subTo(r,r)),o.t=y,o.clamp(),m>0&&o.rShiftTo(m,o),f<0&&e.ZERO.subTo(o,o)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var n=this[0];if(!(1&n))return 0;var r=3&n;return(r=(r=(r=(r=r*(2-(15&n)*r)&15)*(2-(255&n)*r)&255)*(2-((65535&n)*r&65535))&65535)*(2-n*r%this.DV)%this.DV)>0?this.DV-r:-r},e.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},e.prototype.exp=function(n,r){if(n>4294967295||n<1)return e.ONE;var o=nbi(),s=nbi(),u=r.convert(this),d=nbits(n)-1;for(u.copyTo(o);--d>=0;)if(r.sqrTo(o,s),(n&1<<d)>0)r.mulTo(s,u,o);else{var f=o;o=s,s=f}return r.revert(o)},e.prototype.chunkSize=function(n){return Math.floor(Math.LN2*this.DB/Math.log(n))},e.prototype.toRadix=function(n){if(n==null&&(n=10),this.signum()==0||n<2||n>36)return"0";var r=this.chunkSize(n),o=Math.pow(n,r),s=nbv(o),u=nbi(),d=nbi(),f="";for(this.divRemTo(s,u,d);u.signum()>0;)f=(o+d.intValue()).toString(n).substr(1)+f,u.divRemTo(s,u,d);return d.intValue().toString(n)+f},e.prototype.fromRadix=function(n,r){this.fromInt(0),r==null&&(r=10);for(var o=this.chunkSize(r),s=Math.pow(r,o),u=!1,d=0,f=0,g=0;g<n.length;++g){var m=intAt(n,g);m<0?n.charAt(g)=="-"&&this.signum()==0&&(u=!0):(f=r*f+m,++d>=o&&(this.dMultiply(s),this.dAddOffset(f,0),d=0,f=0))}d>0&&(this.dMultiply(Math.pow(r,d)),this.dAddOffset(f,0)),u&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(n,r,o){if(typeof r=="number")if(n<2)this.fromInt(1);else for(this.fromNumber(n,o),this.testBit(n-1)||this.bitwiseTo(e.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>n&&this.subTo(e.ONE.shiftLeft(n-1),this);else{var s=[],u=7&n;s.length=1+(n>>3),r.nextBytes(s),u>0?s[0]&=(1<<u)-1:s[0]=0,this.fromString(s,256)}},e.prototype.bitwiseTo=function(n,r,o){var s,u,d=Math.min(n.t,this.t);for(s=0;s<d;++s)o[s]=r(this[s],n[s]);if(n.t<this.t){for(u=n.s&this.DM,s=d;s<this.t;++s)o[s]=r(this[s],u);o.t=this.t}else{for(u=this.s&this.DM,s=d;s<n.t;++s)o[s]=r(u,n[s]);o.t=n.t}o.s=r(this.s,n.s),o.clamp()},e.prototype.changeBit=function(n,r){var o=e.ONE.shiftLeft(n);return this.bitwiseTo(o,r,o),o},e.prototype.addTo=function(n,r){for(var o=0,s=0,u=Math.min(n.t,this.t);o<u;)s+=this[o]+n[o],r[o++]=s&this.DM,s>>=this.DB;if(n.t<this.t){for(s+=n.s;o<this.t;)s+=this[o],r[o++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;o<n.t;)s+=n[o],r[o++]=s&this.DM,s>>=this.DB;s+=n.s}r.s=s<0?-1:0,s>0?r[o++]=s:s<-1&&(r[o++]=this.DV+s),r.t=o,r.clamp()},e.prototype.dMultiply=function(n){this[this.t]=this.am(0,n-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(n,r){if(n!=0){for(;this.t<=r;)this[this.t++]=0;for(this[r]+=n;this[r]>=this.DV;)this[r]-=this.DV,++r>=this.t&&(this[this.t++]=0),++this[r]}},e.prototype.multiplyLowerTo=function(n,r,o){var s=Math.min(this.t+n.t,r);for(o.s=0,o.t=s;s>0;)o[--s]=0;for(var u=o.t-this.t;s<u;++s)o[s+this.t]=this.am(0,n[s],o,s,0,this.t);for(u=Math.min(n.t,r);s<u;++s)this.am(0,n[s],o,s,0,r-s);o.clamp()},e.prototype.multiplyUpperTo=function(n,r,o){--r;var s=o.t=this.t+n.t-r;for(o.s=0;--s>=0;)o[s]=0;for(s=Math.max(r-this.t,0);s<n.t;++s)o[this.t+s-r]=this.am(r-s,n[s],o,0,0,this.t+s-r);o.clamp(),o.drShiftTo(1,o)},e.prototype.modInt=function(n){if(n<=0)return 0;var r=this.DV%n,o=this.s<0?n-1:0;if(this.t>0)if(r==0)o=this[0]%n;else for(var s=this.t-1;s>=0;--s)o=(r*o+this[s])%n;return o},e.prototype.millerRabin=function(n){var r=this.subtract(e.ONE),o=r.getLowestSetBit();if(o<=0)return!1;var s=r.shiftRight(o);(n=n+1>>1)>lowprimes.length&&(n=lowprimes.length);for(var u=nbi(),d=0;d<n;++d){u.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var f=u.modPow(s,this);if(f.compareTo(e.ONE)!=0&&f.compareTo(r)!=0){for(var g=1;g++<o&&f.compareTo(r)!=0;)if((f=f.modPowInt(2,this)).compareTo(e.ONE)==0)return!1;if(f.compareTo(r)!=0)return!1}}return!0},e.prototype.square=function(){var n=nbi();return this.squareTo(n),n},e.prototype.gcda=function(n,r){var o=this.s<0?this.negate():this.clone(),s=n.s<0?n.negate():n.clone();if(o.compareTo(s)<0){var u=o;o=s,s=u}var d=o.getLowestSetBit(),f=s.getLowestSetBit();if(f<0)r(o);else{d<f&&(f=d),f>0&&(o.rShiftTo(f,o),s.rShiftTo(f,s));var g=function(){(d=o.getLowestSetBit())>0&&o.rShiftTo(d,o),(d=s.getLowestSetBit())>0&&s.rShiftTo(d,s),o.compareTo(s)>=0?(o.subTo(s,o),o.rShiftTo(1,o)):(s.subTo(o,s),s.rShiftTo(1,s)),o.signum()>0?setTimeout(g,0):(f>0&&s.lShiftTo(f,s),setTimeout(function(){r(s)},0))};setTimeout(g,10)}},e.prototype.fromNumberAsync=function(n,r,o,s){if(typeof r=="number")if(n<2)this.fromInt(1);else{this.fromNumber(n,o),this.testBit(n-1)||this.bitwiseTo(e.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);var u=this,d=function(){u.dAddOffset(2,0),u.bitLength()>n&&u.subTo(e.ONE.shiftLeft(n-1),u),u.isProbablePrime(r)?setTimeout(function(){s()},0):setTimeout(d,0)};setTimeout(d,0)}else{var f=[],g=7&n;f.length=1+(n>>3),r.nextBytes(f),g>0?f[0]&=(1<<g)-1:f[0]=0,this.fromString(f,256)}},e}(),NullExp=function(){function e(){}return e.prototype.convert=function(n){return n},e.prototype.revert=function(n){return n},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o)},e.prototype.sqrTo=function(n,r){n.squareTo(r)},e}(),Classic=function(){function e(n){this.m=n}return e.prototype.convert=function(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n},e.prototype.revert=function(n){return n},e.prototype.reduce=function(n){n.divRemTo(this.m,null,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}(),Montgomery=function(){function e(n){this.m=n,this.mp=n.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}return e.prototype.convert=function(n){var r=nbi();return n.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),n.s<0&&r.compareTo(BigInteger.ZERO)>0&&this.m.subTo(r,r),r},e.prototype.revert=function(n){var r=nbi();return n.copyTo(r),this.reduce(r),r},e.prototype.reduce=function(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var r=0;r<this.m.t;++r){var o=32767&n[r],s=o*this.mpl+((o*this.mph+(n[r]>>15)*this.mpl&this.um)<<15)&n.DM;for(n[o=r+this.m.t]+=this.m.am(0,s,n,r,0,this.m.t);n[o]>=n.DV;)n[o]-=n.DV,n[++o]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}(),Barrett=function(){function e(n){this.m=n,this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n)}return e.prototype.convert=function(n){if(n.s<0||n.t>2*this.m.t)return n.mod(this.m);if(n.compareTo(this.m)<0)return n;var r=nbi();return n.copyTo(r),this.reduce(r),r},e.prototype.revert=function(n){return n},e.prototype.reduce=function(n){for(n.drShiftTo(this.m.t-1,this.r2),n.t>this.m.t+1&&(n.t=this.m.t+1,n.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);n.compareTo(this.r2)<0;)n.dAddOffset(1,this.m.t+1);for(n.subTo(this.r2,n);n.compareTo(this.m)>=0;)n.subTo(this.m,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}();function nbi(){return new BigInteger(null)}function parseBigInt(e,n){return new BigInteger(e,n)}var inBrowser=typeof navigator<"u";inBrowser&&j_lm&&navigator.appName=="Microsoft Internet Explorer"?(BigInteger.prototype.am=function(e,n,r,o,s,u){for(var d=32767&n,f=n>>15;--u>=0;){var g=32767&this[e],m=this[e++]>>15,y=f*g+m*d;s=((g=d*g+((32767&y)<<15)+r[o]+(1073741823&s))>>>30)+(y>>>15)+f*m+(s>>>30),r[o++]=1073741823&g}return s},dbits=30):inBrowser&&j_lm&&navigator.appName!="Netscape"?(BigInteger.prototype.am=function(e,n,r,o,s,u){for(;--u>=0;){var d=n*this[e++]+r[o]+s;s=Math.floor(d/67108864),r[o++]=67108863&d}return s},dbits=26):(BigInteger.prototype.am=function(e,n,r,o,s,u){for(var d=16383&n,f=n>>14;--u>=0;){var g=16383&this[e],m=this[e++]>>14,y=f*g+m*d;s=((g=d*g+((16383&y)<<14)+r[o]+s)>>28)+(y>>14)+f*m,r[o++]=268435455&g}return s},dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RC=[],rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function intAt(e,n){var r=BI_RC[e.charCodeAt(n)];return r==null?-1:r}function nbv(e){var n=nbi();return n.fromInt(e),n}function nbits(e){var n,r=1;return(n=e>>>16)!=0&&(e=n,r+=16),(n=e>>8)!=0&&(e=n,r+=8),(n=e>>4)!=0&&(e=n,r+=4),(n=e>>2)!=0&&(e=n,r+=2),(n=e>>1)!=0&&(e=n,r+=1),r}BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1);var Arcfour=function(){function e(){this.i=0,this.j=0,this.S=[]}return e.prototype.init=function(n){var r,o,s;for(r=0;r<256;++r)this.S[r]=r;for(o=0,r=0;r<256;++r)o=o+this.S[r]+n[r%n.length]&255,s=this.S[r],this.S[r]=this.S[o],this.S[o]=s;this.i=0,this.j=0},e.prototype.next=function(){var n;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,n=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=n,this.S[n+this.S[this.i]&255]},e}();function prng_newstate(){return new Arcfour}var rng_psize=256,rng_state,rng_pool=null,rng_pptr;if(rng_pool==null){rng_pool=[],rng_pptr=0;var t=void 0;if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){var z=new Uint32Array(256);for(window.crypto.getRandomValues(z),t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z[t]}var count=0,_onMouseMoveListener_=function(e){if((count=count||0)>=256||rng_pptr>=rng_psize)window.removeEventListener?window.removeEventListener("mousemove",_onMouseMoveListener_,!1):window.detachEvent&&window.detachEvent("onmousemove",_onMouseMoveListener_);else try{var n=e.x+e.y;rng_pool[rng_pptr++]=255&n,count+=1}catch{}};typeof window<"u"&&(window.addEventListener?window.addEventListener("mousemove",_onMouseMoveListener_,!1):window.attachEvent&&window.attachEvent("onmousemove",_onMouseMoveListener_))}function rng_get_byte(){if(rng_state==null){for(rng_state=prng_newstate();rng_pptr<rng_psize;){var e=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=255&e}for(rng_state.init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}var SecureRandom=function(){function e(){}return e.prototype.nextBytes=function(n){for(var r=0;r<n.length;++r)n[r]=rng_get_byte()},e}();function pkcs1pad1(e,n){if(n<e.length+22)return console.error("Message too long for RSA"),null;for(var r=n-e.length-6,o="",s=0;s<r;s+=2)o+="ff";return parseBigInt("0001"+o+"00"+e,16)}function pkcs1pad2(e,n){if(n<e.length+11)return console.error("Message too long for RSA"),null;for(var r=[],o=e.length-1;o>=0&&n>0;){var s=e.charCodeAt(o--);s<128?r[--n]=s:s>127&&s<2048?(r[--n]=63&s|128,r[--n]=s>>6|192):(r[--n]=63&s|128,r[--n]=s>>6&63|128,r[--n]=s>>12|224)}r[--n]=0;for(var u=new SecureRandom,d=[];n>2;){for(d[0]=0;d[0]==0;)u.nextBytes(d);r[--n]=d[0]}return r[--n]=2,r[--n]=0,new BigInteger(r)}var RSAKey=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.doPublic=function(n){return n.modPowInt(this.e,this.n)},e.prototype.doPrivate=function(n){if(this.p==null||this.q==null)return n.modPow(this.d,this.n);for(var r=n.mod(this.p).modPow(this.dmp1,this.p),o=n.mod(this.q).modPow(this.dmq1,this.q);r.compareTo(o)<0;)r=r.add(this.p);return r.subtract(o).multiply(this.coeff).mod(this.p).multiply(this.q).add(o)},e.prototype.setPublic=function(n,r){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16)):console.error("Invalid RSA public key")},e.prototype.encrypt=function(n){var r=this.n.bitLength()+7>>3,o=pkcs1pad2(n,r);if(o==null)return null;var s=this.doPublic(o);if(s==null)return null;for(var u=s.toString(16),d=u.length,f=0;f<2*r-d;f++)u="0"+u;return u},e.prototype.setPrivate=function(n,r,o){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16),this.d=parseBigInt(o,16)):console.error("Invalid RSA private key")},e.prototype.setPrivateEx=function(n,r,o,s,u,d,f,g){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16),this.d=parseBigInt(o,16),this.p=parseBigInt(s,16),this.q=parseBigInt(u,16),this.dmp1=parseBigInt(d,16),this.dmq1=parseBigInt(f,16),this.coeff=parseBigInt(g,16)):console.error("Invalid RSA private key")},e.prototype.generate=function(n,r){var o=new SecureRandom,s=n>>1;this.e=parseInt(r,16);for(var u=new BigInteger(r,16);;){for(;this.p=new BigInteger(n-s,1,o),this.p.subtract(BigInteger.ONE).gcd(u).compareTo(BigInteger.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(s,1,o),this.q.subtract(BigInteger.ONE).gcd(u).compareTo(BigInteger.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var d=this.p;this.p=this.q,this.q=d}var f=this.p.subtract(BigInteger.ONE),g=this.q.subtract(BigInteger.ONE),m=f.multiply(g);if(m.gcd(u).compareTo(BigInteger.ONE)==0){this.n=this.p.multiply(this.q),this.d=u.modInverse(m),this.dmp1=this.d.mod(f),this.dmq1=this.d.mod(g),this.coeff=this.q.modInverse(this.p);break}}},e.prototype.decrypt=function(n){var r=parseBigInt(n,16),o=this.doPrivate(r);return o==null?null:pkcs1unpad2(o,this.n.bitLength()+7>>3)},e.prototype.generateAsync=function(n,r,o){var s=new SecureRandom,u=n>>1;this.e=parseInt(r,16);var d=new BigInteger(r,16),f=this,g=function(){var m=function(){if(f.p.compareTo(f.q)<=0){var _=f.p;f.p=f.q,f.q=_}var w=f.p.subtract(BigInteger.ONE),x=f.q.subtract(BigInteger.ONE),k=w.multiply(x);k.gcd(d).compareTo(BigInteger.ONE)==0?(f.n=f.p.multiply(f.q),f.d=d.modInverse(k),f.dmp1=f.d.mod(w),f.dmq1=f.d.mod(x),f.coeff=f.q.modInverse(f.p),setTimeout(function(){o()},0)):setTimeout(g,0)},y=function(){f.q=nbi(),f.q.fromNumberAsync(u,1,s,function(){f.q.subtract(BigInteger.ONE).gcda(d,function(_){_.compareTo(BigInteger.ONE)==0&&f.q.isProbablePrime(10)?setTimeout(m,0):setTimeout(y,0)})})},v=function(){f.p=nbi(),f.p.fromNumberAsync(n-u,1,s,function(){f.p.subtract(BigInteger.ONE).gcda(d,function(_){_.compareTo(BigInteger.ONE)==0&&f.p.isProbablePrime(10)?setTimeout(y,0):setTimeout(v,0)})})};setTimeout(v,0)};setTimeout(g,0)},e.prototype.sign=function(n,r,o){var s=pkcs1pad1(getDigestHeader(o)+r(n).toString(),this.n.bitLength()/4);if(s==null)return null;var u=this.doPrivate(s);if(u==null)return null;var d=u.toString(16);return 1&d.length?"0"+d:d},e.prototype.verify=function(n,r,o){var s=parseBigInt(r,16),u=this.doPublic(s);return u==null?null:removeDigestHeader(u.toString(16).replace(/^1f+00/,""))==o(n).toString()},e}();function pkcs1unpad2(e,n){for(var r=e.toByteArray(),o=0;o<r.length&&r[o]==0;)++o;if(r.length-o!=n-1||r[o]!=2)return null;for(++o;r[o]!=0;)if(++o>=r.length)return null;for(var s="";++o<r.length;){var u=255&r[o];u<128?s+=String.fromCharCode(u):u>191&&u<224?(s+=String.fromCharCode((31&u)<<6|63&r[o+1]),++o):(s+=String.fromCharCode((15&u)<<12|(63&r[o+1])<<6|63&r[o+2]),o+=2)}return s}var DIGEST_HEADERS={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};function getDigestHeader(e){return DIGEST_HEADERS[e]||""}function removeDigestHeader(e){for(var n in DIGEST_HEADERS)if(DIGEST_HEADERS.hasOwnProperty(n)){var r=DIGEST_HEADERS[n],o=r.length;if(e.substr(0,o)==r)return e.substr(o)}return e}/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/var YAHOO={};YAHOO.lang={extend:function(e,n,r){if(!n||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var o=function(){};if(o.prototype=n.prototype,e.prototype=new o,e.prototype.constructor=e,e.superclass=n.prototype,n.prototype.constructor==Object.prototype.constructor&&(n.prototype.constructor=n),r){var s;for(s in r)e.prototype[s]=r[s];var u=function(){},d=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(u=function(f,g){for(s=0;s<d.length;s+=1){var m=d[s],y=g[m];typeof y=="function"&&y!=Object.prototype[m]&&(f[m]=y)}})}catch{}u(e.prototype,r)}}};/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version asn1 1.0.13 (2017-Jun-02)
 * @since jsrsasign 2.1
 * @license <a href="https://kjur.github.io/jsrsasign/license/">MIT License</a>
 */var KJUR={};KJUR.asn1!==void 0&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var n=e.toString(16);return n.length%2==1&&(n="0"+n),n},this.bigIntToMinTwosComplementsHex=function(e){var n=e.toString(16);if(n.substr(0,1)!="-")n.length%2==1?n="0"+n:n.match(/^[0-7]/)||(n="00"+n);else{var r=n.substr(1).length;r%2==1?r+=1:n.match(/^[0-7]/)||(r+=2);for(var o="",s=0;s<r;s++)o+="f";n=new BigInteger(o,16).xor(e).add(BigInteger.ONE).toString(16).replace(/^-/,"")}return n},this.getPEMStringFromHex=function(e,n){return hextopem(e,n)},this.newObject=function(e){var n=KJUR.asn1,r=n.DERBoolean,o=n.DERInteger,s=n.DERBitString,u=n.DEROctetString,d=n.DERNull,f=n.DERObjectIdentifier,g=n.DEREnumerated,m=n.DERUTF8String,y=n.DERNumericString,v=n.DERPrintableString,_=n.DERTeletexString,w=n.DERIA5String,x=n.DERUTCTime,k=n.DERGeneralizedTime,S=n.DERSequence,M=n.DERSet,E=n.DERTaggedObject,P=n.ASN1Util.newObject,T=Object.keys(e);if(T.length!=1)throw"key of param shall be only one.";var D=T[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+D+":")==-1)throw"undefined key: "+D;if(D=="bool")return new r(e[D]);if(D=="int")return new o(e[D]);if(D=="bitstr")return new s(e[D]);if(D=="octstr")return new u(e[D]);if(D=="null")return new d(e[D]);if(D=="oid")return new f(e[D]);if(D=="enum")return new g(e[D]);if(D=="utf8str")return new m(e[D]);if(D=="numstr")return new y(e[D]);if(D=="prnstr")return new v(e[D]);if(D=="telstr")return new _(e[D]);if(D=="ia5str")return new w(e[D]);if(D=="utctime")return new x(e[D]);if(D=="gentime")return new k(e[D]);if(D=="seq"){for(var F=e[D],I=[],N=0;N<F.length;N++){var q=P(F[N]);I.push(q)}return new S({array:I})}if(D=="set"){for(F=e[D],I=[],N=0;N<F.length;N++)q=P(F[N]),I.push(q);return new M({array:I})}if(D=="tag"){var Y=e[D];if(Object.prototype.toString.call(Y)==="[object Array]"&&Y.length==3){var Z=P(Y[2]);return new E({tag:Y[0],explicit:Y[1],obj:Z})}var j={};if(Y.explicit!==void 0&&(j.explicit=Y.explicit),Y.tag!==void 0&&(j.tag=Y.tag),Y.obj===void 0)throw"obj shall be specified for 'tag'.";return j.obj=P(Y.obj),new E(j)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(e){for(var n="",r=parseInt(e.substr(0,2),16),o=(n=Math.floor(r/40)+"."+r%40,""),s=2;s<e.length;s+=2){var u=("00000000"+parseInt(e.substr(s,2),16).toString(2)).slice(-8);o+=u.substr(1,7),u.substr(0,1)=="0"&&(n=n+"."+new BigInteger(o,2).toString(10),o="")}return n},KJUR.asn1.ASN1Util.oidIntToHex=function(e){var n=function(f){var g=f.toString(16);return g.length==1&&(g="0"+g),g},r=function(f){var g="",m=new BigInteger(f,10).toString(2),y=7-m.length%7;y==7&&(y=0);for(var v="",_=0;_<y;_++)v+="0";for(m=v+m,_=0;_<m.length-1;_+=7){var w=m.substr(_,7);_!=m.length-7&&(w="1"+w),g+=n(parseInt(w,2))}return g};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var o="",s=e.split("."),u=40*parseInt(s[0])+parseInt(s[1]);o+=n(u),s.splice(0,2);for(var d=0;d<s.length;d++)o+=r(s[d]);return o},KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var e=this.hV.length/2,n=e.toString(16);if(n.length%2==1&&(n="0"+n),e<128)return n;var r=n.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+n},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=stohex(this.s)},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"?this.setString(e):e.str!==void 0?this.setString(e.str):e.hex!==void 0&&this.setStringHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(n){return utc=n.getTime()+6e4*n.getTimezoneOffset(),new Date(utc)},this.formatDate=function(n,r,o){var s=this.zeroPadding,u=this.localDateToUTC(n),d=String(u.getFullYear());r=="utc"&&(d=d.substr(2,2));var f=d+s(String(u.getMonth()+1),2)+s(String(u.getDate()),2)+s(String(u.getHours()),2)+s(String(u.getMinutes()),2)+s(String(u.getSeconds()),2);if(o===!0){var g=u.getMilliseconds();if(g!=0){var m=s(String(g),3);f=f+"."+(m=m.replace(/[0]+$/,""))}}return f+"Z"},this.zeroPadding=function(n,r){return n.length>=r?n:new Array(r-n.length+1).join("0")+n},this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=stohex(n)},this.setByDateValue=function(n,r,o,s,u,d){var f=new Date(Date.UTC(n,r-1,o,s,u,d,0));this.setByDate(f)},this.getFreshValueHex=function(){return this.hV}},YAHOO.lang.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array=n},this.appendASN1Object=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array.push(n)},this.asn1Array=new Array,e!==void 0&&e.array!==void 0&&(this.asn1Array=e.array)},YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},YAHOO.lang.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.bigint!==void 0?this.setByBigInteger(e.bigint):e.int!==void 0?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):e.hex!==void 0&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){if(e!==void 0&&e.obj!==void 0){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex="00"+n.getEncodedHex()}KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,o){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var s="0"+r;this.hTLV=null,this.isModified=!0,this.hV=s+o},this.setByBinaryString=function(r){var o=8-(r=r.replace(/0+$/,"")).length%8;o==8&&(o=0);for(var s=0;s<=o;s++)r+="0";var u="";for(s=0;s<r.length-1;s+=8){var d=r.substr(s,8),f=parseInt(d,2).toString(16);f.length==1&&(f="0"+f),u+=f}this.hTLV=null,this.isModified=!0,this.hV="0"+o+u},this.setByBooleanArray=function(r){for(var o="",s=0;s<r.length;s++)r[s]==1?o+="1":o+="0";this.setByBinaryString(o)},this.newFalseArray=function(r){for(var o=new Array(r),s=0;s<r;s++)o[s]=!1;return o},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):e.hex!==void 0?this.setHexValueIncludingUnusedBits(e.hex):e.bin!==void 0?this.setByBinaryString(e.bin):e.array!==void 0&&this.setByBooleanArray(e.array))},YAHOO.lang.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){if(e!==void 0&&e.obj!==void 0){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex=n.getEncodedHex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},YAHOO.lang.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},YAHOO.lang.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){var n=function(o){var s=o.toString(16);return s.length==1&&(s="0"+s),s},r=function(o){var s="",u=new BigInteger(o,10).toString(2),d=7-u.length%7;d==7&&(d=0);for(var f="",g=0;g<d;g++)f+="0";for(u=f+u,g=0;g<u.length-1;g+=7){var m=u.substr(g,7);g!=u.length-7&&(m="1"+m),s+=n(parseInt(m,2))}return s};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(o){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=o},this.setValueOidString=function(o){if(!o.match(/^[0-9.]+$/))throw"malformed oid string: "+o;var s="",u=o.split("."),d=40*parseInt(u[0])+parseInt(u[1]);s+=n(d),u.splice(0,2);for(var f=0;f<u.length;f++)s+=r(u[f]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.setValueName=function(o){var s=KJUR.asn1.x509.OID.name2oid(o);if(s==="")throw"DERObjectIdentifier oidName undefined: "+o;this.setValueOidString(s)},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):e.oid!==void 0?this.setValueOidString(e.oid):e.hex!==void 0?this.setValueHex(e.hex):e.name!==void 0&&this.setValueName(e.name))},YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(e){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.int!==void 0?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):e.hex!==void 0&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},YAHOO.lang.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},YAHOO.lang.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},YAHOO.lang.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},YAHOO.lang.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},YAHOO.lang.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.date=n,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{12}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date))},YAHOO.lang.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.date=n,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{14}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date),e.millis===!0&&(this.withMillis=!0))},YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var n="",r=0;r<this.asn1Array.length;r++)n+=this.asn1Array[r].getEncodedHex();return this.hV=n,this.hV}},YAHOO.lang.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var n=new Array,r=0;r<this.asn1Array.length;r++){var o=this.asn1Array[r];n.push(o.getEncodedHex())}return this.sortFlag==1&&n.sort(),this.hV=n.join(""),this.hV},e!==void 0&&e.sortflag!==void 0&&e.sortflag==0&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(n,r,o){this.hT=r,this.isExplicit=n,this.asn1Object=o,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=o.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,r),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.tag!==void 0&&(this.hT=e.tag),e.explicit!==void 0&&(this.isExplicit=e.explicit),e.obj!==void 0&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},YAHOO.lang.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var __extends=(_extendStatics=function(e,n){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},_extendStatics(e,n)},function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}_extendStatics(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}),_extendStatics,JSEncryptRSAKey=function(e){function n(r){var o=e.call(this)||this;return r&&(typeof r=="string"?o.parseKey(r):(n.hasPrivateKeyProperty(r)||n.hasPublicKeyProperty(r))&&o.parsePropertiesFrom(r)),o}return __extends(n,e),n.prototype.parseKey=function(r){try{var o=0,s=0,u=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(r)?Hex.decode(r):Base64$1.unarmor(r),d=ASN1.decode(u);if(d.sub.length===3&&(d=d.sub[2].sub[0]),d.sub.length===9){o=d.sub[1].getHexStringValue(),this.n=parseBigInt(o,16),s=d.sub[2].getHexStringValue(),this.e=parseInt(s,16);var f=d.sub[3].getHexStringValue();this.d=parseBigInt(f,16);var g=d.sub[4].getHexStringValue();this.p=parseBigInt(g,16);var m=d.sub[5].getHexStringValue();this.q=parseBigInt(m,16);var y=d.sub[6].getHexStringValue();this.dmp1=parseBigInt(y,16);var v=d.sub[7].getHexStringValue();this.dmq1=parseBigInt(v,16);var _=d.sub[8].getHexStringValue();this.coeff=parseBigInt(_,16)}else{if(d.sub.length!==2)return!1;if(d.sub[0].sub){var w=d.sub[1].sub[0];o=w.sub[0].getHexStringValue(),this.n=parseBigInt(o,16),s=w.sub[1].getHexStringValue(),this.e=parseInt(s,16)}else o=d.sub[0].getHexStringValue(),this.n=parseBigInt(o,16),s=d.sub[1].getHexStringValue(),this.e=parseInt(s,16)}return!0}catch{return!1}},n.prototype.getPrivateBaseKey=function(){var r={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};return new KJUR.asn1.DERSequence(r).getEncodedHex()},n.prototype.getPrivateBaseKeyB64=function(){return hex2b64(this.getPrivateBaseKey())},n.prototype.getPublicBaseKey=function(){var r=new KJUR.asn1.DERSequence({array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]}),o=new KJUR.asn1.DERSequence({array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]}),s=new KJUR.asn1.DERBitString({hex:"00"+o.getEncodedHex()});return new KJUR.asn1.DERSequence({array:[r,s]}).getEncodedHex()},n.prototype.getPublicBaseKeyB64=function(){return hex2b64(this.getPublicBaseKey())},n.wordwrap=function(r,o){if(!r)return r;var s="(.{1,"+(o=o||64)+`})( +|$
?)|(.{1,`+o+"})";return r.match(RegExp(s,"g")).join(`
`)},n.prototype.getPrivateKey=function(){var r=`-----BEGIN RSA PRIVATE KEY-----
`;return r+=n.wordwrap(this.getPrivateBaseKeyB64())+`
`,r+="-----END RSA PRIVATE KEY-----"},n.prototype.getPublicKey=function(){var r=`-----BEGIN PUBLIC KEY-----
`;return r+=n.wordwrap(this.getPublicBaseKeyB64())+`
`,r+="-----END PUBLIC KEY-----"},n.hasPublicKeyProperty=function(r){return(r=r||{}).hasOwnProperty("n")&&r.hasOwnProperty("e")},n.hasPrivateKeyProperty=function(r){return(r=r||{}).hasOwnProperty("n")&&r.hasOwnProperty("e")&&r.hasOwnProperty("d")&&r.hasOwnProperty("p")&&r.hasOwnProperty("q")&&r.hasOwnProperty("dmp1")&&r.hasOwnProperty("dmq1")&&r.hasOwnProperty("coeff")},n.prototype.parsePropertiesFrom=function(r){this.n=r.n,this.e=r.e,r.hasOwnProperty("d")&&(this.d=r.d,this.p=r.p,this.q=r.q,this.dmp1=r.dmp1,this.dmq1=r.dmq1,this.coeff=r.coeff)},n}(RSAKey),_a$1,version$1=typeof process<"u"?(_a$1=process.env)===null||_a$1===void 0?void 0:_a$1.npm_package_version:void 0,JSEncrypt=function(){function e(n){n===void 0&&(n={}),n=n||{},this.default_key_size=n.default_key_size?parseInt(n.default_key_size,10):1024,this.default_public_exponent=n.default_public_exponent||"010001",this.log=n.log||!1,this.key=null}return e.prototype.setKey=function(n){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new JSEncryptRSAKey(n)},e.prototype.setPrivateKey=function(n){this.setKey(n)},e.prototype.setPublicKey=function(n){this.setKey(n)},e.prototype.decrypt=function(n){try{return this.getKey().decrypt(b64tohex(n))}catch{return!1}},e.prototype.encrypt=function(n){try{return hex2b64(this.getKey().encrypt(n))}catch{return!1}},e.prototype.sign=function(n,r,o){try{return hex2b64(this.getKey().sign(n,r,o))}catch{return!1}},e.prototype.verify=function(n,r,o){try{return this.getKey().verify(n,b64tohex(r),o)}catch{return!1}},e.prototype.getKey=function(n){if(!this.key){if(this.key=new JSEncryptRSAKey,n&&{}.toString.call(n)==="[object Function]")return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,n);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},e.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},e.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},e.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},e.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},e.version=version$1,e}(),base64Exports={},base64={get exports(){return base64Exports},set exports(e){base64Exports=e}},module$1,exports$1;module$1=base64,exports$1=base64Exports,function(e){var n=exports$1,r=module$1&&module$1.exports==n&&module$1,o=_typeof$1(commonjsGlobal$1)=="object"&&commonjsGlobal$1;o.global!==o&&o.window!==o||(e=o);var s=function(y){this.message=y};(s.prototype=new Error).name="InvalidCharacterError";var u=function(y){throw new s(y)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=/[\t\n\f\r ]/g,g={encode:function(y){y=String(y),/[^\0-\xFF]/.test(y)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var v,_,w,x,k=y.length%3,S="",M=-1,E=y.length-k;++M<E;)v=y.charCodeAt(M)<<16,_=y.charCodeAt(++M)<<8,w=y.charCodeAt(++M),S+=d.charAt((x=v+_+w)>>18&63)+d.charAt(x>>12&63)+d.charAt(x>>6&63)+d.charAt(63&x);return k==2?(v=y.charCodeAt(M)<<8,_=y.charCodeAt(++M),S+=d.charAt((x=v+_)>>10)+d.charAt(x>>4&63)+d.charAt(x<<2&63)+"="):k==1&&(x=y.charCodeAt(M),S+=d.charAt(x>>2)+d.charAt(x<<4&63)+"=="),S},decode:function(y){var v=(y=String(y).replace(f,"")).length;v%4==0&&(v=(y=y.replace(/==?$/,"")).length),(v%4==1||/[^+a-zA-Z0-9/]/.test(y))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var _,w,x=0,k="",S=-1;++S<v;)w=d.indexOf(y.charAt(S)),_=x%4?64*_+w:w,x++%4&&(k+=String.fromCharCode(255&_>>(-2*x&6)));return k},version:"1.0.0"};if(n&&!n.nodeType)if(r)r.exports=g;else for(var m in g)g.hasOwnProperty(m)&&(n[m]=g[m]);else e.base64=g}(commonjsGlobal$1);var Base64=base64Exports,printExports={},print={get exports(){return printExports},set exports(e){printExports=e}},factory;factory=function(){return function(e){var n={};function r(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=n,r.d=function(o,s,u){r.o(o,s)||Object.defineProperty(o,s,{enumerable:!0,get:u})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,s){if(1&s&&(o=r(o)),8&s||4&s&&_typeof$1(o)==="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&s&&typeof o!="string")for(var d in o)r.d(u,d,function(f){return o[f]}.bind(null,d));return u},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=0)}({"./src/index.js":function(e,n,r){r.r(n),r("./src/sass/index.scss");var o=r("./src/js/init.js").default.init;typeof window<"u"&&(window.printJS=o),n.default=o},"./src/js/browser.js":function(e,n,r){r.r(n);var o={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!o.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};n.default=o},"./src/js/functions.js":function(e,n,r){r.r(n),r.d(n,"addWrapper",function(){return d}),r.d(n,"capitalizePrint",function(){return f}),r.d(n,"collectStyles",function(){return g}),r.d(n,"addHeader",function(){return y}),r.d(n,"cleanUp",function(){return v}),r.d(n,"isRawHTML",function(){return _});var o=r("./src/js/modal.js"),s=r("./src/js/browser.js");function u(w){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},u(w)}function d(w,x){return'<div style="font-family:'+x.font+" !important; font-size: "+x.font_size+' !important; width:100%;">'+w+"</div>"}function f(w){return w.charAt(0).toUpperCase()+w.slice(1)}function g(w,x){for(var k="",S=(document.defaultView||window).getComputedStyle(w,""),M=0;M<S.length;M++)(x.targetStyles.indexOf("*")!==-1||x.targetStyle.indexOf(S[M])!==-1||m(x.targetStyles,S[M]))&&S.getPropertyValue(S[M])&&(k+=S[M]+":"+S.getPropertyValue(S[M])+";");return k+="max-width: "+x.maxWidth+"px !important; font-size: "+x.font_size+" !important;"}function m(w,x){for(var k=0;k<w.length;k++)if(u(x)==="object"&&x.indexOf(w[k])!==-1)return!0;return!1}function y(w,x){var k=document.createElement("div");if(_(x.header))k.innerHTML=x.header;else{var S=document.createElement("h1"),M=document.createTextNode(x.header);S.appendChild(M),S.setAttribute("style",x.headerStyle),k.appendChild(S)}w.insertBefore(k,w.childNodes[0])}function v(w){w.showModal&&o.default.close(),w.onLoadingEnd&&w.onLoadingEnd(),(w.showModal||w.onLoadingStart)&&window.URL.revokeObjectURL(w.printable);var x="mouseover";(s.default.isChrome()||s.default.isFirefox())&&(x="focus"),window.addEventListener(x,function k(){window.removeEventListener(x,k),w.onPrintDialogClose();var S=document.getElementById(w.frameId);S&&S.remove()})}function _(w){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(w)}},"./src/js/html.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),s=r("./src/js/print.js");function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(f)}function d(f,g){for(var m=f.cloneNode(),y=Array.prototype.slice.call(f.childNodes),v=0;v<y.length;v++)if(g.ignoreElements.indexOf(y[v].id)===-1){var _=d(y[v],g);m.appendChild(_)}switch(g.scanStyles&&f.nodeType===1&&m.setAttribute("style",Object(o.collectStyles)(f,g)),f.tagName){case"SELECT":m.value=f.value;break;case"CANVAS":m.getContext("2d").drawImage(f,0,0)}return m}n.default={print:function(f,g){var m,y=u(m=f.printable)==="object"&&m&&(m instanceof HTMLElement||m.nodeType===1)?f.printable:document.getElementById(f.printable);y?(f.printableElement=d(y,f),f.header&&Object(o.addHeader)(f.printableElement,f),s.default.send(f,g)):window.console.error("Invalid HTML element id: "+f.printable)}}},"./src/js/image.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),s=r("./src/js/print.js"),u=r("./src/js/browser.js");n.default={print:function(d,f){d.printable.constructor!==Array&&(d.printable=[d.printable]),d.printableElement=document.createElement("div"),d.printable.forEach(function(g){var m=document.createElement("img");if(m.setAttribute("style",d.imageStyle),m.src=g,u.default.isFirefox()){var y=m.src;m.src=y}var v=document.createElement("div");v.appendChild(m),d.printableElement.appendChild(v)}),d.header&&Object(o.addHeader)(d.printableElement,d),s.default.send(d,f)}}},"./src/js/init.js":function(e,n,r){r.r(n);var o=r("./src/js/browser.js"),s=r("./src/js/modal.js"),u=r("./src/js/pdf.js"),d=r("./src/js/html.js"),f=r("./src/js/raw-html.js"),g=r("./src/js/image.js"),m=r("./src/js/json.js");function y(_){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},y(_)}var v=["pdf","html","image","json","raw-html"];n.default={init:function(){var _={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(M){throw M},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},w=arguments[0];if(w===void 0)throw new Error("printJS expects at least 1 attribute.");switch(y(w)){case"string":_.printable=encodeURI(w),_.fallbackPrintable=_.printable,_.type=arguments[1]||_.type;break;case"object":for(var x in _.printable=w.printable,_.fallbackPrintable=w.fallbackPrintable!==void 0?w.fallbackPrintable:_.printable,_.fallbackPrintable=_.base64?"data:application/pdf;base64,".concat(_.fallbackPrintable):_.fallbackPrintable,_)x!=="printable"&&x!=="fallbackPrintable"&&(_[x]=w[x]!==void 0?w[x]:_[x]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+y(w))}if(!_.printable)throw new Error("Missing printable information.");if(!_.type||typeof _.type!="string"||v.indexOf(_.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");_.showModal&&s.default.show(_),_.onLoadingStart&&_.onLoadingStart();var k=document.getElementById(_.frameId);k&&k.parentNode.removeChild(k);var S=document.createElement("iframe");switch(o.default.isFirefox()?S.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):S.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),S.setAttribute("id",_.frameId),_.type!=="pdf"&&(S.srcdoc="<html><head><title>"+_.documentTitle+"</title>",_.css&&(Array.isArray(_.css)||(_.css=[_.css]),_.css.forEach(function(M){S.srcdoc+='<link rel="stylesheet" href="'+M+'">'})),S.srcdoc+="</head><body></body></html>"),_.type){case"pdf":if(o.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer."),window.open(_.fallbackPrintable,"_blank").focus(),_.onIncompatibleBrowser()}catch(M){_.onError(M)}finally{_.showModal&&s.default.close(),_.onLoadingEnd&&_.onLoadingEnd()}else u.default.print(_,S);break;case"image":g.default.print(_,S);break;case"html":d.default.print(_,S);break;case"raw-html":f.default.print(_,S);break;case"json":m.default.print(_,S)}}}},"./src/js/json.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),s=r("./src/js/print.js");function u(d){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u(d)}n.default={print:function(d,f){if(u(d.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof d.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!d.properties||!Array.isArray(d.properties))throw new Error("Invalid properties array for your JSON data.");d.properties=d.properties.map(function(g){return{field:u(g)==="object"?g.field:g,displayName:u(g)==="object"?g.displayName:g,columnSize:u(g)==="object"&&g.columnSize?g.columnSize+";":100/d.properties.length+"%;"}}),d.printableElement=document.createElement("div"),d.header&&Object(o.addHeader)(d.printableElement,d),d.printableElement.innerHTML+=function(g){var m=g.printable,y=g.properties,v='<table style="border-collapse: collapse; width: 100%;">';g.repeatTableHeader&&(v+="<thead>"),v+="<tr>";for(var _=0;_<y.length;_++)v+='<th style="width:'+y[_].columnSize+";"+g.gridHeaderStyle+'">'+Object(o.capitalizePrint)(y[_].displayName)+"</th>";v+="</tr>",g.repeatTableHeader&&(v+="</thead>"),v+="<tbody>";for(var w=0;w<m.length;w++){v+="<tr>";for(var x=0;x<y.length;x++){var k=m[w],S=y[x].field.split(".");if(S.length>1)for(var M=0;M<S.length;M++)k=k[S[M]];else k=k[y[x].field];v+='<td style="width:'+y[x].columnSize+g.gridStyle+'">'+k+"</td>"}v+="</tr>"}return v+="</tbody></table>"}(d),s.default.send(d,f)}}},"./src/js/modal.js":function(e,n,r){r.r(n);var o={show:function(s){var u=document.createElement("div");u.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),u.setAttribute("id","printJS-Modal");var d=document.createElement("div");d.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var f=document.createElement("div");f.setAttribute("class","printClose"),f.setAttribute("id","printClose"),d.appendChild(f);var g=document.createElement("span");g.setAttribute("class","printSpinner"),d.appendChild(g);var m=document.createTextNode(s.modalMessage);d.appendChild(m),u.appendChild(d),document.getElementsByTagName("body")[0].appendChild(u),document.getElementById("printClose").addEventListener("click",function(){o.close()})},close:function(){var s=document.getElementById("printJS-Modal");s&&s.parentNode.removeChild(s)}};n.default=o},"./src/js/pdf.js":function(e,n,r){r.r(n);var o=r("./src/js/print.js"),s=r("./src/js/functions.js");function u(d,f,g){var m=new window.Blob([g],{type:"application/pdf"});m=window.URL.createObjectURL(m),f.setAttribute("src",m),o.default.send(d,f)}n.default={print:function(d,f){if(d.base64){var g=Uint8Array.from(atob(d.printable),function(y){return y.charCodeAt(0)});u(d,f,g)}else{d.printable=/^(blob|http|\/\/)/i.test(d.printable)?d.printable:window.location.origin+(d.printable.charAt(0)!=="/"?"/"+d.printable:d.printable);var m=new window.XMLHttpRequest;m.responseType="arraybuffer",m.addEventListener("error",function(){Object(s.cleanUp)(d),d.onError(m.statusText,m)}),m.addEventListener("load",function(){if([200,201].indexOf(m.status)===-1)return Object(s.cleanUp)(d),void d.onError(m.statusText,m);u(d,f,m.response)}),m.open("GET",d.printable,!0),m.send()}}}},"./src/js/print.js":function(e,n,r){r.r(n);var o=r("./src/js/browser.js"),s=r("./src/js/functions.js"),u={send:function(f,g){document.getElementsByTagName("body")[0].appendChild(g);var m=document.getElementById(f.frameId);m.onload=function(){if(f.type!=="pdf"){var y=m.contentWindow||m.contentDocument;if(y.document&&(y=y.document),y.body.appendChild(f.printableElement),f.type!=="pdf"&&f.style){var v=document.createElement("style");v.innerHTML=f.style,y.head.appendChild(v)}var _=y.getElementsByTagName("img");_.length>0?function(w){var x=w.map(function(k){if(k.src&&k.src!==window.location.href)return function(S){return new Promise(function(M){(function E(){S&&S.naturalWidth!==void 0&&S.naturalWidth!==0&&S.complete?M():setTimeout(E,500)})()})}(k)});return Promise.all(x)}(Array.from(_)).then(function(){return d(m,f)}):d(m,f)}else o.default.isFirefox()?setTimeout(function(){return d(m,f)},1e3):d(m,f)}}};function d(f,g){try{if(f.focus(),o.default.isEdge()||o.default.isIE())try{f.contentWindow.document.execCommand("print",!1,null)}catch{f.contentWindow.print()}else f.contentWindow.print()}catch(m){g.onError(m)}finally{o.default.isFirefox()&&(f.style.visibility="hidden",f.style.left="-1px"),Object(s.cleanUp)(g)}}n.default=u},"./src/js/raw-html.js":function(e,n,r){r.r(n);var o=r("./src/js/print.js");n.default={print:function(s,u){s.printableElement=document.createElement("div"),s.printableElement.setAttribute("style","width:100%"),s.printableElement.innerHTML=s.printable,o.default.send(s,u)}}},"./src/sass/index.scss":function(e,n,r){},0:function(e,n,r){e.exports=r("./src/index.js")}}).default},print.exports=factory();var printJS=getDefaultExportFromCjs$1(printExports),FileSaver_minExports={},FileSaver_min$1={get exports(){return FileSaver_minExports},set exports(e){FileSaver_minExports=e}},getRandomValues;(function(e,n){(function(){function r(m,y){return y===void 0?y={autoBom:!1}:_typeof$1(y)!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function o(m,y,v){var _=new XMLHttpRequest;_.open("GET",m),_.responseType="blob",_.onload=function(){g(_.response,y,v)},_.onerror=function(){console.error("could not download file")},_.send()}function s(m){var y=new XMLHttpRequest;y.open("HEAD",m,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function u(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(y)}}var d=(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window.window===window?window:(typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self.self===self?self:_typeof$1(commonjsGlobal$1)=="object"&&commonjsGlobal$1.global===commonjsGlobal$1?commonjsGlobal$1:void 0,f=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=d.saveAs||((typeof window>"u"?"undefined":_typeof$1(window))!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(m,y,v){var _=d.URL||d.webkitURL,w=document.createElement("a");y=y||m.name||"download",w.download=y,w.rel="noopener",typeof m=="string"?(w.href=m,w.origin===location.origin?u(w):s(w.href)?o(m,y,v):u(w,w.target="_blank")):(w.href=_.createObjectURL(m),setTimeout(function(){_.revokeObjectURL(w.href)},4e4),setTimeout(function(){u(w)},0))}:"msSaveOrOpenBlob"in navigator?function(m,y,v){if(y=y||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(r(m,v),y);else if(s(m))o(m,y,v);else{var _=document.createElement("a");_.href=m,_.target="_blank",setTimeout(function(){u(_)})}}:function(m,y,v,_){if((_=_||open("","_blank"))&&(_.document.title=_.document.body.innerText="downloading..."),typeof m=="string")return o(m,y,v);var w=m.type==="application/octet-stream",x=/constructor/i.test(d.HTMLElement)||d.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||w&&x||f)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var P=S.result;P=k?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=P:location=P,_=null},S.readAsDataURL(m)}else{var M=d.URL||d.webkitURL,E=M.createObjectURL(m);_?_.location=E:location.href=E,_=null,setTimeout(function(){M.revokeObjectURL(E)},4e4)}});d.saveAs=g.saveAs=g,e.exports=g})()})(FileSaver_min$1);var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return byteToHex[e[n+0]]+byteToHex[e[n+1]]+byteToHex[e[n+2]]+byteToHex[e[n+3]]+"-"+byteToHex[e[n+4]]+byteToHex[e[n+5]]+"-"+byteToHex[e[n+6]]+byteToHex[e[n+7]]+"-"+byteToHex[e[n+8]]+byteToHex[e[n+9]]+"-"+byteToHex[e[n+10]]+byteToHex[e[n+11]]+byteToHex[e[n+12]]+byteToHex[e[n+13]]+byteToHex[e[n+14]]+byteToHex[e[n+15]]}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(e,n,r){if(native.randomUUID&&!n&&!e)return native.randomUUID();var o=(e=e||{}).random||(e.rng||rng)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){r=r||0;for(var s=0;s<16;++s)n[r+s]=o[s];return n}return unsafeStringify(o)}var DEFAULT_SCALE_VALUE="page-fit",DEFAULT_SCALE=1,DEFAULT_SCALE_DELTA=1.1,MIN_SCALE=.05,MAX_SCALE=10,UNKNOWN_SCALE=0,MAX_AUTO_SCALE=1.25,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,RenderingStates$1={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},SidebarView={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4},RendererType={CANVAS:"canvas",SVG:"svg"},TextLayerMode={DISABLE:0,ENABLE:1},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},userAgent$1=navigator.userAgent||"",platform=navigator.platform||"",maxTouchPoints=navigator.maxTouchPoints||1,maxCanvasPixels=16777216,isAndroid$1=/Android/.test(userAgent$1),isIOS$1=/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent$1)||platform==="MacIntel"&&maxTouchPoints>1;(isIOS$1||isAndroid$1)&&(maxCanvasPixels=5242880);var isMobileDevice$1=isIOS$1||isAndroid$1||/webOS|BlackBerry|IEMobile|Opera Mini/i.test(userAgent$1),isMobile$1=window.innerWidth<640,OutputScale=function(){return _createClass(function e(){_classCallCheck(this,e);var n=window.devicePixelRatio||1;this.sx=n,this.sy=n},[{key:"scaled",get:function(){return this.sx!==1||this.sy!==1}}])}();function round(e,n){var r=Math.pow(10,n);return Math.round(e*r)/r}function parseAdobePDFTimestamp(e){if(!e)return new Date;var n=e.match(/D:(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})([-+]\d{2}'\d{2}')?/);if(n){var r=_slicedToArray(n,8),o=r[1],s=r[2],u=r[3],d=r[4],f=r[5],g=r[6];return r[7],new Date(parseInt(o),parseInt(s)-1,parseInt(u),parseInt(d),parseInt(f),parseInt(g))}throw new Error("Invalid timestamp format")}var PromiseExt=_createClass(function e(){var n=this;_classCallCheck(this,e),this.promise=new Promise(function(r,o){n.resolve=function(s){r(s)},n.reject=function(s){o(s)}})});function BaseException(e,n){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=e,this.name=n}BaseException.prototype=new Error,BaseException.constructor=BaseException;var EventBus=function(){return _createClass(function e(){_classCallCheck(this,e),this._listeners=Object.create(null)},[{key:"on",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._on(e,n,{external:!0,once:r==null?void 0:r.once})}},{key:"off",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._off(e,n,{external:!0,once:r==null?void 0:r.once})}},{key:"dispatch",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=this._listeners[e];if(o&&o.length!==0){var s,u,d=_createForOfIteratorHelper(o.slice(0));try{for(d.s();!(u=d.n()).done;){var f=u.value,g=f.listener,m=f.external;f.once&&this._off(e,g),m?(s||(s=[])).push(g):g(n,r)}}catch(_){d.e(_)}finally{d.f()}if(s){var y,v=_createForOfIteratorHelper(s);try{for(v.s();!(y=v.n()).done;)(0,y.value)(n)}catch(_){v.e(_)}finally{v.f()}s=null}}}},{key:"_on",value:function(e,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;((r=this._listeners)[e]||(r[e]=[])).push({listener:n,external:(o==null?void 0:o.external)===!0,once:(o==null?void 0:o.once)===!0})}},{key:"_off",value:function(e,n){var r=this._listeners[e];if(r){for(var o=0,s=r.length;o<s;o++)if(r[o].listener===n)return void r.splice(o,1)}}}])}();function scrollIntoView(e,n){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=e.offsetParent;if(o){for(var s=e.offsetTop+e.clientTop,u=e.offsetLeft+e.clientLeft;o.clientHeight===o.scrollHeight&&o.clientWidth===o.scrollWidth||r&&(o.classList.contains("markedContent")||getComputedStyle(o).overflow==="hidden");)if(s+=o.offsetTop,u+=o.offsetLeft,!(o=o.offsetParent))return;n&&(n.top!==void 0&&(s+=n.top),n.left!==void 0&&(u+=n.left,o.scrollLeft=u)),o.scrollTop=s}else console.error("offsetParent is not set -- cannot scroll")}function watchScroll(e,n){var r=function(u){s||(s=window.requestAnimationFrame(function(){s=null;var d=e.scrollLeft,f=o.lastX;d!==f&&(o.right=d>f),o.lastX=d;var g=e.scrollTop,m=o.lastY;g!==m&&(o.down=g>m),o.lastY=g,n(o)}))},o={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:r},s=null;return e.addEventListener("scroll",r,!0),o}function binarySearchFirstItem(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=e.length-1;if(o<0||!n(e[o]))return e.length;if(n(e[r]))return r;for(;r<o;){var s=r+o>>1;n(e[s])?o=s:r=s+1}return r}function backtrackBeforeAllVisibleElements(e,n,r){if(e<2)return e;var o=n[e].div,s=o.offsetTop+o.clientTop;s>=r&&(s=(o=n[e-1].div).offsetTop+o.clientTop);for(var u=e-2;u>=0&&!((o=n[u].div).offsetTop+o.clientTop+o.clientHeight<=s);--u)e=u;return e}function getVisibleElements(e){var n=e.scrollEl,r=e.views,o=e.sortByVisibility,s=o!==void 0&&o,u=e.horizontal,d=u!==void 0&&u,f=e.rtl,g=f!==void 0&&f,m=n.scrollTop,y=m+n.clientHeight,v=n.scrollLeft,_=v+n.clientWidth,w=[],x=new Set,k=r.length,S=binarySearchFirstItem(r,d?function(O){var U=O.div,W=U.offsetLeft+U.clientLeft,H=W+U.clientWidth;return g?W<_:H>v}:function(O){var U=O.div;return U.offsetTop+U.clientTop+U.clientHeight>m});S>0&&S<k&&!d&&(S=backtrackBeforeAllVisibleElements(S,r,m));for(var M=d?_:-1,E=S;E<k;E++){var P=r[E],T=P.div,D=T.offsetLeft+T.clientLeft,F=T.offsetTop+T.clientTop,I=T.clientWidth,N=T.clientHeight,q=D+I,Y=F+N;if(M===-1)Y>=y&&(M=Y);else if((d?D:F)>M)break;if(!(Y<=m||F>=y||q<=v||D>=_)){var Z=Math.max(0,m-F)+Math.max(0,Y-y),j=(I-(Math.max(0,v-D)+Math.max(0,q-_)))/I,ne=(N-Z)/N*j*100|0;w.push({id:P.id,x:D,y:F,view:P,percent:ne,widthPercent:100*j|0}),x.add(P.id)}}var le=w[0],J=w.at(-1);return s&&w.sort(function(O,U){var W=O.percent-U.percent;return Math.abs(W)>.001?-W:O.id-U.id}),getExpandKeepRange(w,x,r,2),{first:le,last:J,views:w,ids:x}}function getExpandKeepRange(e,n,r,o){if(e.length&&e){var s=e[0].view.pageIndex,u=e[e.length-1].view.pageIndex,d=Math.min(s,u),f=Math.max(s,u),g=r.length;if(d>1)for(var m=Math.max(1,d-o);m<d&&m<g;m++){var y=r[m];e.push({id:y.id,view:y,percent:0,widthPercent:0}),n.add(y.id)}if(f<g-1)for(var v=f+1;v<g&&v<=f+o;v++){var _=r[v];e.push({id:_.id,view:_,percent:0,widthPercent:0}),n.add(_.id)}}}function normalizeWheelEventDirection(e){var n=Math.hypot(e.deltaX,e.deltaY),r=Math.atan2(e.deltaY,e.deltaX);return-.25*Math.PI<r&&r<.75*Math.PI&&(n=-n),n}function normalizeWheelEventDelta(e){var n=normalizeWheelEventDirection(e);return e.deltaMode===0?n/=900:e.deltaMode===1&&(n/=30),n}function isValidRotation(e){return Number.isInteger(e)&&e%90==0}function isValidScrollMode(e){return Number.isInteger(e)&&Object.values(ScrollMode).includes(e)&&e!==ScrollMode.UNKNOWN}function isValidSpreadMode(e){return Number.isInteger(e)&&Object.values(SpreadMode).includes(e)&&e!==SpreadMode.UNKNOWN}function isPortraitOrientation(e){return e.width<=e.height}typeof document<"u"&&document.documentElement.style;var xmlParser=function(e){return new window.DOMParser().parseFromString(e,"text/xml")},getElementsByTagName=function(e,n){var r=Array.prototype.slice.call(e.childNodes),o=null;return r.forEach(function(s){s.tagName===n&&(o=s.childNodes)}),o};function bindEvents(e,n,r){var o,s=_createForOfIteratorHelper(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;n.addEventListener(u,e[u].bind(e))}}catch(d){s.e(d)}finally{s.f()}}function getFontAttribute(e){var n=null;return Array.prototype.slice.call(e.childNodes).forEach(function(r){if(r.tagName==="defaultappearance"){var o=(r.innerHTML||r.textContent||"").split(" ");n={"font-size":parseInt(o[5],10),"font-name":o[4].substr(1),"font-color":rgbToHex(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2]))}}else if(r.tagName==="contents-richtext"){var s=r.innerHTML||r.textContent||"";s=s.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&amp;","&");var u=new window.DOMParser().parseFromString(s,"text/xml").getElementsByTagName("body")[0].getAttribute("style"),d={};u.split(";").forEach(function(f){var g=_slicedToArray(f.split(":").map(function(v){return v.trim()}),2),m=g[0],y=g[1];m&&y&&(d[m]=y)})}}),n&&{fontName:n["font-name"],fontSize:parseFloat(n["font-size"]),fontColor:n.color}}var ANNOTATION_TYPE={ink:"ink",freetext:"freetext",text:"text",square:"square",circle:"circle",line:"line",arrow:"line",image:"image",highlight:"highlight",underline:"underline",strikeout:"strikeout",squiggly:"squiggly",stamp:"stamp",redact:"redact"},findIndex=function(e,n){return n.findIndex(function(r){return(r==null?void 0:r.name)===e})},parseAnnotationFromXml=function(e){if(!e)return[];for(var n=xmlParser(e),r=n.firstElementChild||n.firstChild,o=getElementsByTagName(r,"annots")||[],s=Array.prototype.slice.call(o),u=[],d=0;d<s.length;d++){var f=s[d],g=ANNOTATION_TYPE[f.tagName],m=f.attributes;if(g){var y={date:m.date?m.date.value:m.creationdate?m.creationdate.value:void 0,color:m.color?m.color.value:void 0,flags:m.flags?m.flags.value:void 0,rect:m.rect?m.rect.value:void 0,name:m.name?m.name.value:v4(),width:m.width?m.width.value:void 0,"interior-color":m["interior-color"]?m["interior-color"].value:void 0,page:m.page?m.page.value:void 0,opacity:m.opacity?m.opacity.value:1,type:g};if(y.flags&&y.flags.indexOf("hidden")>-1&&(y.isHidden=1),["highlight","underline","strikeout","squiggly"].includes(g)){var v=getContent(f);v&&(y.content=v),y.coords=m.coords?m.coords.value:void 0}if(g==="line"){if(!y.rect)continue;y.start=m.start?m.start.value:void 0,y.end=m.end?m.end.value:void 0}if(g==="line"&&m.tail&&m.tail.value==="OpenArrow"&&(y.tail="OpenArrow",y.head="None"),(g==="square"||g==="circle"||g==="text"||g==="line")&&!y.rect)continue;if(g==="ink"){var _=getPosition(f);if(!_)continue;!y.inklist&&(y.inklist={}),y.inklist.gesture=_}if(g==="text"||g==="freetext"){if(!y.rect)continue;var w=getContent(f);w&&(y.content=w)}if(g==="freetext"){y.justification=m.justification?m.justification.value:void 0;var x=getFontAttribute(f);x&&(y.textStyle=x)}if(g==="stamp"){if(!m["stamp-type"]||m["stamp-type"].value==="image")continue;y["stamp-type"]=m["stamp-type"]?m["stamp-type"].value:void 0,y.icon=m.icon?m.icon.value:void 0}u.push(y)}}return u},getPosition=function(e){var n=[],r=e.children[0].children;return Array.prototype.slice.call(r).forEach(function(o){o.tagName==="gesture"&&n.push(o.innerHTML||o.textContent||"")}),n.length===0&&(n=""),n},getContent=function(e){var n="";return Array.prototype.slice.call(e.childNodes).forEach(function(r){if(r.tagName==="contents")n=r.innerHTML||r.textContent||"";else if(r.tagName==="contents-richtext"){var o=r.innerHTML||r.textContent||"";o=o.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&amp;","&");var s=new window.DOMParser().parseFromString(o,"text/xml");n=s.firstElementChild.innerText}}),n};function unreachable(e){throw new Error(e)}function assert(e,n){e||unreachable(n)}function shadow$1(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return(typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || TESTING"))&&assert(n in e,'shadow: Property "'.concat(n&&n.toString(),'" not found in object.')),Object.defineProperty(e,n,{value:r,enumerable:!o,configurable:!0,writable:!1}),r}var Util=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"makeHexColor",value:function(n,r,o){return"#".concat(hexNumbers[n]).concat(hexNumbers[r]).concat(hexNumbers[o])}},{key:"scaleMinMax",value:function(n,r){var o;n[0]?(n[0]<0&&(o=r[0],r[0]=r[1],r[1]=o),r[0]*=n[0],r[1]*=n[0],n[3]<0&&(o=r[2],r[2]=r[3],r[3]=o),r[2]*=n[3],r[3]*=n[3]):(o=r[0],r[0]=r[2],r[2]=o,o=r[1],r[1]=r[3],r[3]=o,n[1]<0&&(o=r[2],r[2]=r[3],r[3]=o),r[2]*=n[1],r[3]*=n[1],n[2]<0&&(o=r[0],r[0]=r[1],r[1]=o),r[0]*=n[2],r[1]*=n[2]),r[0]+=n[4],r[1]+=n[4],r[2]+=n[5],r[3]+=n[5]}},{key:"transform",value:function(n,r){return[n[0]*r[0]+n[2]*r[1],n[1]*r[0]+n[3]*r[1],n[0]*r[2]+n[2]*r[3],n[1]*r[2]+n[3]*r[3],n[0]*r[4]+n[2]*r[5]+n[4],n[1]*r[4]+n[3]*r[5]+n[5]]}},{key:"applyTransform",value:function(n,r){return[n[0]*r[0]+n[1]*r[2]+r[4],n[0]*r[1]+n[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function(n,r){var o=r[0]*r[3]-r[1]*r[2];return[(n[0]*r[3]-n[1]*r[2]+r[2]*r[5]-r[4]*r[3])/o,(-n[0]*r[1]+n[1]*r[0]+r[4]*r[1]-r[5]*r[0])/o]}},{key:"getAxialAlignedBoundingBox",value:function(n,r){var o=e.applyTransform(n,r),s=e.applyTransform(n.slice(2,4),r),u=e.applyTransform([n[0],n[3]],r),d=e.applyTransform([n[2],n[1]],r);return[Math.min(o[0],s[0],u[0],d[0]),Math.min(o[1],s[1],u[1],d[1]),Math.max(o[0],s[0],u[0],d[0]),Math.max(o[1],s[1],u[1],d[1])]}},{key:"inverseTransform",value:function(n){var r=n[0]*n[3]-n[1]*n[2];return[n[3]/r,-n[1]/r,-n[2]/r,n[0]/r,(n[2]*n[5]-n[4]*n[3])/r,(n[4]*n[1]-n[5]*n[0])/r]}},{key:"singularValueDecompose2dScale",value:function(n){var r=[n[0],n[2],n[1],n[3]],o=n[0]*r[0]+n[1]*r[2],s=n[0]*r[1]+n[1]*r[3],u=n[2]*r[0]+n[3]*r[2],d=n[2]*r[1]+n[3]*r[3],f=(o+d)/2,g=Math.sqrt(Math.pow(o+d,2)-4*(o*d-u*s))/2,m=f+g||1,y=f-g||1;return[Math.sqrt(m),Math.sqrt(y)]}},{key:"normalizeRect",value:function(n){var r=n.slice(0);return n[0]>n[2]&&(r[0]=n[2],r[2]=n[0]),n[1]>n[3]&&(r[1]=n[3],r[3]=n[1]),r}},{key:"intersect",value:function(n,r){var o=Math.max(Math.min(n[0],n[2]),Math.min(r[0],r[2])),s=Math.min(Math.max(n[0],n[2]),Math.max(r[0],r[2]));if(o>s)return null;var u=Math.max(Math.min(n[1],n[3]),Math.min(r[1],r[3])),d=Math.min(Math.max(n[1],n[3]),Math.max(r[1],r[3]));return u>d?null:[o,u,s,d]}},{key:"bezierBoundingBox",value:function(n,r,o,s,u,d,f,g){for(var m,y,v,_,w,x,k,S,M=[],E=[[],[]],P=0;P<2;++P)if(P===0?(y=6*n-12*o+6*u,m=-3*n+9*o-9*u+3*f,v=3*o-3*n):(y=6*r-12*s+6*d,m=-3*r+9*s-9*d+3*g,v=3*s-3*r),Math.abs(m)<1e-12){if(Math.abs(y)<1e-12)continue;0<(_=-v/y)&&_<1&&M.push(_)}else k=y*y-4*v*m,S=Math.sqrt(k),k<0||(0<(w=(-y+S)/(2*m))&&w<1&&M.push(w),0<(x=(-y-S)/(2*m))&&x<1&&M.push(x));for(var T,D=M.length,F=D;D--;)T=1-(_=M[D]),E[0][D]=T*T*T*n+3*T*T*_*o+3*T*_*_*u+_*_*_*f,E[1][D]=T*T*T*r+3*T*T*_*s+3*T*_*_*d+_*_*_*g;return E[0][F]=n,E[1][F]=r,E[0][F+1]=f,E[1][F+1]=g,E[0].length=E[1].length=F+2,[Math.min.apply(Math,_toConsumableArray$1(E[0])),Math.min.apply(Math,_toConsumableArray$1(E[1])),Math.max.apply(Math,_toConsumableArray$1(E[0])),Math.max.apply(Math,_toConsumableArray$1(E[1]))]}},{key:"getBoundingBox",value:function(n,r,o,s){return[Math.abs(n-o),Math.abs(r-s)]}}])}();function getColorFormat(e){return e.startsWith("#")?"hex":e.startsWith("rgb(")?"rgb":e.startsWith("hsl")?"hsl":"unknown"}function convertColorToRGB(e){var n=getColorFormat(e);if(n==="hex")return hexToRgb(e);if(n==="rgb"){var r=e.match(/(\d+),\s*(\d+),\s*(\d+)/);return r?{R:parseInt(r[1]),G:parseInt(r[2]),B:parseInt(r[3])}:{error:"Invalid RGB format"}}if(n==="hsl"){var o=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!o)return{error:"Invalid HSL format"};var s=parseInt(o[1]),u=parseInt(o[2])/100,d=parseInt(o[3])/100;return hslToRgb$1(s,u,d)}console.error({message:"Invalid color value"})}function rgbToHex(e,n,r){var o=(16777216|e<<16|n<<8|r).toString(16).slice(1).toUpperCase();return"#".concat(o)}var onClickOutside=function(e,n){var r=function(o){var s=!0;if(Array.isArray(e))e.forEach(function(u){u&&u.contains(o.target)&&(s=!1)});else if(e&&e.contains(o.target))return;s&&(n&&n(o),document.removeEventListener(isMobileDevice$1?"touchstart":"mousedown",r))};return document.addEventListener(isMobileDevice$1?"touchstart":"mousedown",r),r},onClickOutsideUp=function(e,n){var r=function(o){var s=!0;if(Array.isArray(e))e.forEach(function(u){u&&u.contains(o.target)&&(s=!1)});else if(e&&e.contains(o.target))return;s&&(n&&n(o),document.removeEventListener(isMobileDevice$1?"touchend":"mouseup",r))};return document.addEventListener(isMobileDevice$1?"touchend":"mouseup",r),r};function hexToRgb(e){var n=e.slice(1),r=parseInt(n,16);return{R:r>>16&255,G:r>>8&255,B:255&r}}var hslToRgb$1=function(e,n,r){var o,s,u;if(e/=360,n===0)o=s=u=Math.round(255*r);else{var d=function(m,y,v){return v<0&&(v+=1),v>1&&(v-=1),v<.16666666666666666?m+6*(y-m)*v:v<.5?y:v<.6666666666666666?m+(y-m)*(.6666666666666666-v)*6:m},f=r<.5?r*(1+n):r+n-r*n,g=2*r-f;o=Math.round(255*d(g,f,e+1/3)),s=Math.round(255*d(g,f,e)),u=Math.round(255*d(g,f,e-1/3))}return{R:o,G:s,B:u}},setCss=function(e,n){if(e&&n)for(var r in n)e.style[r]=n[r]},_pagesRefCache=new WeakMap,PDFLinkService=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_pagesRefCache,new Map),this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null},[{key:"setDocument",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.baseUrl=n,this.pdfDocument=e,_classPrivateFieldGet2(_pagesRefCache,this).clear()}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(e){this.pdfViewer.pagesRotation=e}},{key:"goToPage",value:function(e){if(this.pdfDocument){var n=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(n)&&n>0&&n<=this.pagesCount?this.pdfViewer.scrollPageIntoView({pageNumber:n}):console.error('PDFLinkService.goToPage: "'.concat(e,'" is not a valid page.'))}}},{key:"cachePageRef",value:function(e,n){if(n){var r=n.gen===0?"".concat(n.num,"R"):"".concat(n.num,"R").concat(n.gen);_classPrivateFieldGet2(_pagesRefCache,this).set(r,e)}}},{key:"_cachedPageNumber",value:function(e){if(!e)return null;var n=e.gen===0?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return _classPrivateFieldGet2(_pagesRefCache,this).get(n)||null}},{key:"isPageVisible",value:function(e){return this.pdfViewer.isPageVisible(e)}},{key:"isPageCached",value:function(e){return this.pdfViewer.isPageCached(e)}}])}(),_activeCapability=new WeakMap,_updateCallback=new WeakMap,_callback=new WeakMap,_reason=new WeakMap,_active=new WeakMap,_PasswordPrompt_brand=new WeakSet,PasswordPrompt=function(){return _createClass(function o(s){var u=this;_classCallCheck(this,o),_classPrivateMethodInitSpec(this,_PasswordPrompt_brand),_classPrivateFieldInitSpec(this,_activeCapability,null),_classPrivateFieldInitSpec(this,_updateCallback,null),_classPrivateFieldInitSpec(this,_callback,null),_classPrivateFieldInitSpec(this,_reason,null),_classPrivateFieldInitSpec(this,_active,!1),this.dialog=s.dialog,this.label=s.label,this.input=s.input,this.submitButton=s.submitButton,this.cancelButton=s.cancelButton,this.$t=s.$t,this.submitButton.addEventListener("click",_assertClassBrand(_PasswordPrompt_brand,this,_verify).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keyup",function(d){d.keyCode===13&&_assertClassBrand(_PasswordPrompt_brand,u,_verify).call(u),u.label.textContent="",u.input.value===""?u.submitButton.classList.add("disabled"):u.submitButton.classList.remove("disabled")})},[{key:"open",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!_classPrivateFieldGet2(_activeCapability,this)){u.next=3;break}return u.next=3,_classPrivateFieldGet2(_activeCapability,this).promise;case 3:_classPrivateFieldSet2(_activeCapability,this,pdfExports.createPromiseCapability()),u.prev=4,this.dialog.classList.add("show"),this.submitButton.classList.add("disabled"),_classPrivateFieldSet2(_active,this,!0),u.next=14;break;case 10:throw u.prev=10,u.t0=u.catch(4),_classPrivateFieldSet2(_activeCapability,this,null),u.t0;case 14:(s=_classPrivateFieldGet2(_reason,this)===pdfExports.PasswordResponses.INCORRECT_PASSWORD)&&this.input.focus(),s?(this.label.textContent=this.$t("passwordDialog.wrongPwd"),this.label.style.color="red"):(this.label.style.color="",this.label.textContent="");case 17:case"end":return u.stop()}},o,this,[[4,10]])})),function(){return r.apply(this,arguments)})},{key:"close",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:_classPrivateFieldGet2(_active,this)&&((s=new Event("click")).param=!1,document.getElementById("eyeVisible").dispatchEvent(s),this.dialog.classList.remove("show"),_classPrivateFieldSet2(_active,this,!1),_assertClassBrand(_PasswordPrompt_brand,this,_cancel).call(this));case 1:case"end":return u.stop()}},o,this)})),function(){return n.apply(this,arguments)})},{key:"setUpdateCallback",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function o(s,u,d){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!_classPrivateFieldGet2(_activeCapability,this)){f.next=3;break}return f.next=3,_classPrivateFieldGet2(_activeCapability,this).promise;case 3:_classPrivateFieldSet2(_updateCallback,this,s),_classPrivateFieldSet2(_reason,this,u),_classPrivateFieldSet2(_callback,this,d);case 6:case"end":return f.stop()}},o,this)})),function(o,s,u){return e.apply(this,arguments)})}]);var e,n,r}();function _verify(){var e=this.input.value;(e==null?void 0:e.length)>0&&_assertClassBrand(_PasswordPrompt_brand,this,_invokeCallback).call(this,e)}function _cancel(){_assertClassBrand(_PasswordPrompt_brand,this,_invokeCallback).call(this,new Error("PasswordPrompt cancelled.")),_classPrivateFieldGet2(_activeCapability,this).resolve()}function _invokeCallback(e){_classPrivateFieldGet2(_updateCallback,this)&&(this.input.value="",_classPrivateFieldGet2(_updateCallback,this).call(this,e),_classPrivateFieldGet2(_callback,this).call(this,e),_classPrivateFieldSet2(_callback,this,null),_classPrivateFieldSet2(_updateCallback,this,null),this.close())}var RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},ALIGNMAP={LEFT:0,CENTER:1,CENTERED:1,RIGHT:2},MARGIN_DISTANCE=10,AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},AnnotationTypeString={1:"text",2:"link",3:"freetext",4:"line",5:"square",6:"circle",7:"polygon",8:"polyline",9:"highlight",10:"underline",11:"squiggly",12:"strikeout",13:"stamp",14:"caret",15:"ink",16:"popup",17:"fileattachment",18:"sound",19:"movie",20:"widget",21:"screen",22:"printermark",23:"trapnet",24:"watermark",25:"threed",26:"richmedia",27:"redact",28:"interchange"};_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1({1:"none",0:"check"},"1","circle"),2,"cross"),3,"diamond"),4,"square"),5,"star");var PixelsPerInch=_createClass(function e(){_classCallCheck(this,e)});_defineProperty$1(PixelsPerInch,"CSS",96),_defineProperty$1(PixelsPerInch,"PDF",72),_defineProperty$1(PixelsPerInch,"PDF_TO_CSS_UNITS",1);var AnnotationState={MARKED:0,UNMARKED:1,ACCEPTED:2,REJECTED:3,CANCELLED:4,COMPLETED:5,NONE:6,ERROR:7},AnnotationStateString={0:"MARKED",1:"UNMARKED",2:"ACCEPTED",3:"REJECTED",4:"CANCELLED",5:"COMPLETED",6:"NONE",7:"ERROR"},KeyboardManager=function(){return _createClass(function e(n){_classCallCheck(this,e),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var r,o=e.platform.isMac,s=_createForOfIteratorHelper(n);try{for(s.s();!(r=s.n()).done;){var u,d=_slicedToArray(r.value,2),f=d[0],g=d[1],m=_createForOfIteratorHelper(f);try{for(m.s();!(u=m.n()).done;){var y=u.value,v=y.startsWith("mac+");o&&v?(this.callbacks.set(y.slice(4),g),this.allKeys.add(y.split("+").at(-1))):o||v||(this.callbacks.set(y,g),this.allKeys.add(y.split("+").at(-1)))}}catch(_){m.e(_)}finally{m.f()}}}catch(_){s.e(_)}finally{s.f()}},[{key:"_serialize",value:function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);var n=this.buffer.join("+");return this.buffer.length=0,n}},{key:"exec",value:function(e,n){if(this.allKeys.has(n.key)){var r=this.callbacks.get(this._serialize(n));r&&(r.bind(e)(),n.stopPropagation(),n.preventDefault())}}}],[{key:"platform",get:function(){var e=typeof navigator<"u"?navigator.platform:"";return shadow$1(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}])}();function opacityToHex(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}var dayjs_minExports={},dayjs_min$1={get exports(){return dayjs_minExports},set exports(e){dayjs_minExports=e}};dayjs_min$1.exports=function(){var e=1e3,n=6e4,r=36e5,o="millisecond",s="second",u="minute",d="hour",f="day",g="week",m="month",y="quarter",v="year",_="date",w="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var ne=["th","st","nd","rd"],le=j%100;return"["+j+(ne[(le-20)%10]||ne[le]||ne[0])+"]"}},M=function(j,ne,le){var J=String(j);return!J||J.length>=ne?j:""+Array(ne+1-J.length).join(le)+j},E={s:M,z:function(j){var ne=-j.utcOffset(),le=Math.abs(ne),J=Math.floor(le/60),O=le%60;return(ne<=0?"+":"-")+M(J,2,"0")+":"+M(O,2,"0")},m:function j(ne,le){if(ne.date()<le.date())return-j(le,ne);var J=12*(le.year()-ne.year())+(le.month()-ne.month()),O=ne.clone().add(J,m),U=le-O<0,W=ne.clone().add(J+(U?-1:1),m);return+(-(J+(le-O)/(U?O-W:W-O))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:m,y:v,w:g,d:f,D:_,h:d,m:u,s,ms:o,Q:y}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},P="en",T={};T[P]=S;var D="$isDayjsObject",F=function(j){return j instanceof Y||!(!j||!j[D])},I=function j(ne,le,J){var O;if(!ne)return P;if(typeof ne=="string"){var U=ne.toLowerCase();T[U]&&(O=U),le&&(T[U]=le,O=U);var W=ne.split("-");if(!O&&W.length>1)return j(W[0])}else{var H=ne.name;T[H]=ne,O=H}return!J&&O&&(P=O),O||!J&&P},N=function(j,ne){if(F(j))return j.clone();var le=_typeof$1(ne)=="object"?ne:{};return le.date=j,le.args=arguments,new Y(le)},q=E;q.l=I,q.i=F,q.w=function(j,ne){return N(j,{locale:ne.$L,utc:ne.$u,x:ne.$x,$offset:ne.$offset})};var Y=function(){function j(le){this.$L=I(le.locale,null,!0),this.parse(le),this.$x=this.$x||le.x||{},this[D]=!0}var ne=j.prototype;return ne.parse=function(le){this.$d=function(J){var O=J.date,U=J.utc;if(O===null)return new Date(NaN);if(q.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var W=O.match(x);if(W){var H=W[2]-1||0,X=(W[7]||"0").substring(0,3);return U?new Date(Date.UTC(W[1],H,W[3]||1,W[4]||0,W[5]||0,W[6]||0,X)):new Date(W[1],H,W[3]||1,W[4]||0,W[5]||0,W[6]||0,X)}}return new Date(O)}(le),this.init()},ne.init=function(){var le=this.$d;this.$y=le.getFullYear(),this.$M=le.getMonth(),this.$D=le.getDate(),this.$W=le.getDay(),this.$H=le.getHours(),this.$m=le.getMinutes(),this.$s=le.getSeconds(),this.$ms=le.getMilliseconds()},ne.$utils=function(){return q},ne.isValid=function(){return this.$d.toString()!==w},ne.isSame=function(le,J){var O=N(le);return this.startOf(J)<=O&&O<=this.endOf(J)},ne.isAfter=function(le,J){return N(le)<this.startOf(J)},ne.isBefore=function(le,J){return this.endOf(J)<N(le)},ne.$g=function(le,J,O){return q.u(le)?this[J]:this.set(O,le)},ne.unix=function(){return Math.floor(this.valueOf()/1e3)},ne.valueOf=function(){return this.$d.getTime()},ne.startOf=function(le,J){var O=this,U=!!q.u(J)||J,W=q.p(le),H=function(Ne,Be){var be=q.w(O.$u?Date.UTC(O.$y,Be,Ne):new Date(O.$y,Be,Ne),O);return U?be:be.endOf(f)},X=function(Ne,Be){return q.w(O.toDate()[Ne].apply(O.toDate("s"),(U?[0,0,0,0]:[23,59,59,999]).slice(Be)),O)},Q=this.$W,fe=this.$M,Se=this.$D,Pe="set"+(this.$u?"UTC":"");switch(W){case v:return U?H(1,0):H(31,11);case m:return U?H(1,fe):H(0,fe+1);case g:var $e=this.$locale().weekStart||0,Ie=(Q<$e?Q+7:Q)-$e;return H(U?Se-Ie:Se+(6-Ie),fe);case f:case _:return X(Pe+"Hours",0);case d:return X(Pe+"Minutes",1);case u:return X(Pe+"Seconds",2);case s:return X(Pe+"Milliseconds",3);default:return this.clone()}},ne.endOf=function(le){return this.startOf(le,!1)},ne.$set=function(le,J){var O,U=q.p(le),W="set"+(this.$u?"UTC":""),H=(O={},O[f]=W+"Date",O[_]=W+"Date",O[m]=W+"Month",O[v]=W+"FullYear",O[d]=W+"Hours",O[u]=W+"Minutes",O[s]=W+"Seconds",O[o]=W+"Milliseconds",O)[U],X=U===f?this.$D+(J-this.$W):J;if(U===m||U===v){var Q=this.clone().set(_,1);Q.$d[H](X),Q.init(),this.$d=Q.set(_,Math.min(this.$D,Q.daysInMonth())).$d}else H&&this.$d[H](X);return this.init(),this},ne.set=function(le,J){return this.clone().$set(le,J)},ne.get=function(le){return this[q.p(le)]()},ne.add=function(le,J){var O,U=this;le=Number(le);var W=q.p(J),H=function(fe){var Se=N(U);return q.w(Se.date(Se.date()+Math.round(fe*le)),U)};if(W===m)return this.set(m,this.$M+le);if(W===v)return this.set(v,this.$y+le);if(W===f)return H(1);if(W===g)return H(7);var X=(O={},O[u]=n,O[d]=r,O[s]=e,O)[W]||1,Q=this.$d.getTime()+le*X;return q.w(Q,this)},ne.subtract=function(le,J){return this.add(-1*le,J)},ne.format=function(le){var J=this,O=this.$locale();if(!this.isValid())return O.invalidDate||w;var U=le||"YYYY-MM-DDTHH:mm:ssZ",W=q.z(this),H=this.$H,X=this.$m,Q=this.$M,fe=O.weekdays,Se=O.months,Pe=O.meridiem,$e=function(Be,be,Ve,De){return Be&&(Be[be]||Be(J,U))||Ve[be].slice(0,De)},Ie=function(Be){return q.s(H%12||12,Be,"0")},Ne=Pe||function(Be,be,Ve){var De=Be<12?"AM":"PM";return Ve?De.toLowerCase():De};return U.replace(k,function(Be,be){return be||function(Ve){switch(Ve){case"YY":return String(J.$y).slice(-2);case"YYYY":return q.s(J.$y,4,"0");case"M":return Q+1;case"MM":return q.s(Q+1,2,"0");case"MMM":return $e(O.monthsShort,Q,Se,3);case"MMMM":return $e(Se,Q);case"D":return J.$D;case"DD":return q.s(J.$D,2,"0");case"d":return String(J.$W);case"dd":return $e(O.weekdaysMin,J.$W,fe,2);case"ddd":return $e(O.weekdaysShort,J.$W,fe,3);case"dddd":return fe[J.$W];case"H":return String(H);case"HH":return q.s(H,2,"0");case"h":return Ie(1);case"hh":return Ie(2);case"a":return Ne(H,X,!0);case"A":return Ne(H,X,!1);case"m":return String(X);case"mm":return q.s(X,2,"0");case"s":return String(J.$s);case"ss":return q.s(J.$s,2,"0");case"SSS":return q.s(J.$ms,3,"0");case"Z":return W}return null}(Be)||W.replace(":","")})},ne.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ne.diff=function(le,J,O){var U,W=this,H=q.p(J),X=N(le),Q=(X.utcOffset()-this.utcOffset())*n,fe=this-X,Se=function(){return q.m(W,X)};switch(H){case v:U=Se()/12;break;case m:U=Se();break;case y:U=Se()/3;break;case g:U=(fe-Q)/6048e5;break;case f:U=(fe-Q)/864e5;break;case d:U=fe/r;break;case u:U=fe/n;break;case s:U=fe/e;break;default:U=fe}return O?U:q.a(U)},ne.daysInMonth=function(){return this.endOf(m).$D},ne.$locale=function(){return T[this.$L]},ne.locale=function(le,J){if(!le)return this.$L;var O=this.clone(),U=I(le,J,!0);return U&&(O.$L=U),O},ne.clone=function(){return q.w(this.$d,this)},ne.toDate=function(){return new Date(this.valueOf())},ne.toJSON=function(){return this.isValid()?this.toISOString():null},ne.toISOString=function(){return this.$d.toISOString()},ne.toString=function(){return this.$d.toUTCString()},j}(),Z=Y.prototype;return N.prototype=Z,[["$ms",o],["$s",s],["$m",u],["$H",d],["$W",f],["$M",m],["$y",v],["$D",_]].forEach(function(j){Z[j[1]]=function(ne){return this.$g(ne,j[0],j[1])}}),N.extend=function(j,ne){return j.$i||(j(ne,Y,N),j.$i=!0),N},N.locale=I,N.isDayjs=F,N.unix=function(j){return N(1e3*j)},N.en=T[P],N.Ls=T,N.p={},N}();var dayjs$1=dayjs_minExports,PDFAnnotation=function(){return _createClass(function e(n){_classCallCheck(this,e),this._boundFocusin=this.focusin.bind(this),this._boundFocusout=this.focusout.bind(this),this._hasBeenSelected=!1,this._isEditing=!1,this._isInEditMode=!1,this.annotation=n.annotation||null,this.parent=n.parent,this.id=n.id,this.width=this.height=null,this.pageIndex=n.parent.pageIndex,this.name=n.name,this.div=null,this.viewport=this.parent.viewport;var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],s=r[1];this.x=n.x/o,this.y=n.y/s,this.rotation=this.viewport.rotation,this.isAttachedToDOM=!1},[{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"focusin",value:function(){this._hasBeenSelected?this._hasBeenSelected=!1:this.parent.setSelected(this)}},{key:"focusout",value:function(e){if(this.isAttachedToDOM){var n=e.relatedTarget;n!=null&&n.closest("#".concat(this.id))||(e.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove(),this.parent.unselect(this))}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"fixDims",value:function(){var e=this.div.style,n=e.height,r=e.width,o=r.endsWith("%"),s=n.endsWith("%");if(!o||!s){var u=_slicedToArray(this.parent.viewportBaseDimensions,2),d=u[0],f=u[1];o||(e.width="".concat(100*parseFloat(r)/d,"%")),s||(e.height="".concat(100*parseFloat(n)/f,"%"))}}},{key:"commit",value:function(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function(e){var n=this.parent.div.getBoundingClientRect();this.startX=e.clientX-n.x,this.startY=e.clientY-n.y,e.dataTransfer.setData("text/plain",this.id),e.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(e,n,r,o){var s=_slicedToArray(this.parent.viewportBaseDimensions,2),u=s[0],d=s[1],f=_slicedToArray(this.screenToPageTranslation(r,o),2);r=f[0],o=f[1],this.x=(e+r)/u,this.y=(n+o)/d,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(e,n){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],s=r[1],u=_slicedToArray(this.screenToPageTranslation(e,n),2);e=u[0],n=u[1],this.x+=e/o,this.y+=n/s,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(e,n){switch(this.parent.viewport.rotation){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}},{key:"setDims",value:function(e,n){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],s=r[1];this.div.style.width="".concat(100*e/o,"%"),this.div.style.height="".concat(100*n/s,"%")}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){if(this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.div.addEventListener("focusin",this._boundFocusin),this.div.addEventListener("focusout",this._boundFocusout),this.annotation){var e=this.rectCalc(position,this.parent.viewport.height,scale);this.div.style.top=e.top+"px",this.div.style.left=e.left+"px"}else{var n=_slicedToArray(this.getInitialTranslation(),2),r=n[0],o=n[1];this.translate(r,o)}return bindEvents(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"rectCalc",value:function(e,n,r){return{top:n-e.top*r,left:e.left*r,width:(e.right-e.left)*r,height:(e.top-e.bottom)*r}}},{key:"pointerdown",value:function(e){var n=KeyboardManager.platform.isMac;e.button!==0||e.ctrlKey&&n?e.preventDefault():(e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this),this._hasBeenSelected=!0)}},{key:"getRect",value:function(e,n){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],s=r[1],u=_slicedToArray(this.parent.pageDimensions,2),d=u[0],f=u[1],g=d*e/o,m=f*n/s,y=this.x*d,v=this.y*f,_=this.width*d,w=this.height*f;switch(this.rotation){case 0:return[y+g,f-v-m-w,y+g+_,f-v-m];case 90:return[y+m,f-v+g,y+m+w,f-v+g+_];case 180:return[y-g-_,f-v+m,y-g,f-v+m+w];case 270:return[y-m-w,f-v-g-_,y-m,f-v-g];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(e,n){var r=_slicedToArray(e,4),o=r[0],s=r[1],u=r[2],d=r[3],f=u-o,g=d-s;switch(this.rotation){case 0:return[o,n-d,f,g];case 90:return[o,n-s,g,f];case 180:return[u,n-s,f,g];case 270:return[u,n-d,g,f];default:throw new Error("Invalid rotation")}}},{key:"enableEditMode",value:function(){this._isInEditMode=!0}},{key:"disableEditMode",value:function(){this._isInEditMode=!1}},{key:"isInEditMode",value:function(){return this._isInEditMode}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var e;(e=this.div)===null||e===void 0||e.addEventListener("focusin",this._boundFocusin)}},{key:"remove",value:function(){this.div.removeEventListener("focusin",this._boundFocusin),this.div.removeEventListener("focusout",this._boundFocusout),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var e;(e=this.div)===null||e===void 0||e.classList.add("selectedAnnotation")}},{key:"unselect",value:function(){var e;(e=this.div)===null||e===void 0||e.classList.remove("selectedAnnotation")}},{key:"updateParams",value:function(e,n){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return this._isEditing},set:function(e){this._isEditing=e,e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"deserialize",value:function(e,n){var r=new this.prototype.constructor({parent:n,id:n.getNextId()});r.rotation=e.rotation;var o=_slicedToArray(n.pageDimensions,2),s=o[0],u=o[1],d=_slicedToArray(r.getRectInCurrentCoords(e.rect,u),4),f=d[0],g=d[1],m=d[2],y=d[3];return r.x=f/s,r.y=g/u,r.width=m/s,r.height=y/u,r}},{key:"renderImportAnnotations",value:function(e,n){var r=new this.prototype.constructor({parent:n,id:n.getNextId()});r.rotation=e.rotation;var o=_slicedToArray(n.pageDimensions,2),s=o[0],u=o[1],d=this.prototype.rectCalc(e.position,n.viewport.height,n.scaleFactor);return r.x=d.top/s,r.y=d.left/u,r.width=d.width/s,r.height=d.height/u,r}}])}(),_PDFAnnotationSticky;_defineProperty$1(PDFAnnotation,"_zIndex",1),_defineProperty$1(PDFAnnotation,"_defaultLineColor","#ff0000");var PDFAnnotationSticky=function(e){function n(r){var o;return _classCallCheck(this,n),(o=_callSuper(this,n,[_objectSpread2$1(_objectSpread2$1({},r),{},{name:"stickyAnnotation"})]))._boundEditorDivBlur=o.editorDivBlur.bind(o),o._boundEditorDivFocus=o.editorDivFocus.bind(o),o._boundEditorDivInput=o.editorDivInput.bind(o),o._boundEditorDivKeydown=o.editorDivKeydown.bind(o),o._content="",o._editorDivId="".concat(o.id,"-editor"),o._hasAlreadyBeenCommitted=!1,o.annotationObj=null,o._color=r.color||n._defaultColor,o._fontSize=r.fontSize||n._defaultFontSize,o._internalPadding=r.internalPadding||n._defaultInternalPadding,o._stickyWidth=20,o}return _inherits(n,PDFAnnotation),_createClass(n,[{key:"updateParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.FREETEXT_SIZE:this._updateFontSize(o);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this._updateColor(o)}}},{key:"propertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this._fontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,this._color]]}},{key:"_updateFontSize",value:function(r){this.editorDiv.style.fontSize="".concat(r,"px"),this.translate(0,-(r-this._fontSize)*this.parent.scaleFactor),this._fontSize=r,this._setEditorDimensions()}},{key:"_updateColor",value:function(r){this._color=r,this.editorDiv.style.color=r}},{key:"getInitialTranslation",value:function(){return[-this._internalPadding*this.parent.scaleFactor,-(this._internalPadding+this._fontSize)*this.parent.scaleFactor]}},{key:"rebuild",value:function(){_superPropGet(n,"rebuild",this,3)([]),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),_superPropGet(n,"enableEditMode",this,3)([]),this.overlayDiv.classList.remove("enabled"),this.editorDiv.style.display="initial",this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("focus",this._boundEditorDivFocus),this.editorDiv.addEventListener("blur",this._boundEditorDivBlur),this.editorDiv.addEventListener("input",this._boundEditorDivInput))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),_superPropGet(n,"disableEditMode",this,3)([]),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this._editorDivId),this.editorDiv.style.display="none",this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this._boundEditorDivKeydown),this.editorDiv.removeEventListener("focus",this._boundEditorDivFocus),this.editorDiv.removeEventListener("blur",this._boundEditorDivBlur),this.editorDiv.removeEventListener("input",this._boundEditorDivInput),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}},{key:"focusin",value:function(r){_superPropGet(n,"focusin",this,3)([r]),r.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),_superPropGet(n,"remove",this,3)([])}},{key:"_extractText",value:function(){var r,o=this.editorDiv.getElementsByTagName("div");if(o.length===0)return this.editorDiv.innerText;var s=[];((r=this.editorDiv.firstChild)===null||r===void 0?void 0:r.nodeName)==="#text"&&s.push(this.editorDiv.firstChild.data);var u,d=_createForOfIteratorHelper(o);try{for(d.s();!(u=d.n()).done;){var f=u.value.firstChild;(f==null?void 0:f.nodeName)==="#text"?s.push(f.data):s.push("")}}catch(g){d.e(g)}finally{d.f()}return s.join(`
`)}},{key:"_setEditorDimensions",value:function(){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],s=r[1],u=this.div.getBoundingClientRect();this.width=u.width/o,this.height=u.height/s}},{key:"commit",value:function(){this._content=this._extractText().trimEnd();var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],s=r[1],u={left:this.x*o,bottom:this.y*s+this._stickyWidth,right:this.x*o+this._stickyWidth,top:this.y*s};this.annotationObj={id:v4(),obj_type:"Text",obj_attr:{bdcolor:"#FF2600",content:this._content||void 0,date:dayjs$1().format("YYYY-MM-DD_HH:mm:ss"),ftransparency:1,page:this.pageIndex,position:this.parsePositionForBackend(u,this.viewport.height,this.parent.scale),transparency:1}},_superPropGet(n,"commit",this,3)([]),this._hasAlreadyBeenCommitted||(this._hasAlreadyBeenCommitted=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this._setEditorDimensions()}},{key:"parsePositionForBackend",value:function(r,o,s){return{left:Math.round(1e3*r.left/s)/1e3,bottom:Math.round(1e3*(o-r.bottom)/s)/1e3,right:Math.round(1e3*r.right/s)/1e3,top:Math.round(1e3*(o-r.top)/s)/1e3}}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(r){r.target===this.div&&r.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(r){n._keyboardManager.exec(this,r)}},{key:"editorDivFocus",value:function(){this.isEditing=!0}},{key:"editorDivBlur",value:function(){this.isEditing=!1}},{key:"editorDivInput",value:function(r){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){if(this.div)return this.div;var r,o;this.width&&(r=this.x,o=this.y),_superPropGet(n,"render",this,3)([]),this.iconDiv=document.createElement("div"),this.iconDiv.classList="icon-wrapper",this.iconDiv.innerHTML='<svg data-status="normal" width="32" height="32" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path d="M0 0h32v32H0z"></path><path d="M28 5.333V24H14.667L8 28v-4H4V5.333h24zM18.667 18H9.333v1.333h9.334V18zm4-4H9.333v1.333h13.334V14zm0-4H9.333v1.333h13.334V10z" fill="#BE0C0E"></path></g></svg>',this.div.append(this.iconDiv),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal editor-container",this.editorDiv.setAttribute("id",this._editorDivId),this.enableEditing(),this.editorDiv.contentEditable=!0;var s=this.editorDiv.style;if(s.fontSize="".concat(this._fontSize,"px"),s.color=this._color,s.top="36px",s.left="50%",this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){this.setAt(r,o,this.width,this.height);var u,d=_createForOfIteratorHelper(this._content.split(`
`));try{for(d.s();!(u=d.n()).done;){var f=u.value,g=document.createElement("div");g.append(f?document.createTextNode(f):document.createElement("br")),this.editorDiv.append(g)}}catch(m){d.e(m)}finally{d.f()}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var r=this._internalPadding*this.parent.scaleFactor,o=this.getRect(r,r);return{annotationType:AnnotationEditorType.FREETEXT,color:this._color,fontSize:this._fontSize,value:this._content,pageIndex:this.parent.pageIndex,rect:o,rotation:this.rotation}}}],[{key:"updateDefaultParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.FREETEXT_SIZE:n._defaultFontSize=o;break;case AnnotationEditorParamsType.FREETEXT_COLOR:n._defaultColor=o}}},{key:"defaultPropertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,n._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,n._defaultColor||n._defaultLineColor]]}},{key:"deserialize",value:function(r,o){var s;return(s=r.type==="custom"?_superPropGet(n,"renderImportAnnotations",this,2)([r,o]):_superPropGet(n,"deserialize",this,2)([r,o]))._fontSize=r.fontSize,s._color=this._color,s._content=r.value,s}}])}(),_InkEditor;_PDFAnnotationSticky=PDFAnnotationSticky,_defineProperty$1(PDFAnnotationSticky,"_defaultColor","#000"),_defineProperty$1(PDFAnnotationSticky,"_defaultFontSize",10),_defineProperty$1(PDFAnnotationSticky,"_defaultInternalPadding",2),_defineProperty$1(PDFAnnotationSticky,"_keyboardManager",new KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],_PDFAnnotationSticky.prototype.commitOrRemove]]));var RESIZER_SIZE=16,TIME_TO_WAIT_BEFORE_FIXING_DIMS=100,_InkEditor_brand=new WeakSet,InkEditor=function(e){function n(r){var o;return _classCallCheck(this,n),_classPrivateMethodInitSpec(o=_callSuper(this,n,[_objectSpread2$1(_objectSpread2$1({},r),{},{name:"inkEditor"})]),_InkEditor_brand),o._aspectRatio=0,o._zIndexForeground=n._zIndex++,o._baseHeight=0,o._baseWidth=0,o._boundCanvasPointermove=o.canvasPointermove.bind(o),o._boundCanvasPointerleave=o.canvasPointerleave.bind(o),o._boundCanvasPointerup=o.canvasPointerup.bind(o),o._boundCanvasPointerdown=o.canvasPointerdown.bind(o),o._disableEditing=!1,o._isCanvasInitialized=!1,o._lastPoint=null,o._observer=null,o._realWidth=0,o._realHeight=0,o._requestFrameCallback=null,o.color=r.color||null,o.thickness=r.thickness||null,o.opacity=r.opacity||null,o.paths=[],o.bezierPath2D=[],o.currentPath=[],o.arrowPoints=[],o.scaleFactor=1,o.translationX=o.translationY=0,o.x=0,o.y=0,o}return _inherits(n,PDFAnnotation),_createClass(n,[{key:"updateParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.INK_THICKNESS:this._updateThickness(o);break;case AnnotationEditorParamsType.INK_COLOR:this._updateColor(o);break;case AnnotationEditorParamsType.INK_OPACITY:this._updateOpacity(o)}}},{key:"propertiesToUpdate",get:function(){var r;return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||n._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||n._defaultColor||PDFAnnotation._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((r=this.opacity)!==null&&r!==void 0?r:n._defaultOpacity))]]}},{key:"_updateThickness",value:function(r){this.thickness=r,_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this)}},{key:"_updateColor",value:function(r){var o=this,s=this.color;this.parent.addCommands({cmd:function(){o.color=r,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},undo:function(){o.color=s,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}},{key:"_updateOpacity",value:function(r){var o=this;r/=100;var s=this.opacity;this.parent.addCommands({cmd:function(){o.opacity=r,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},undo:function(){o.opacity=s,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}},{key:"rebuild",value:function(){_superPropGet(n,"rebuild",this,3)([]),this.div!==null&&(this.canvas||_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this),this.isAttachedToDOM||(this.parent.add(this),_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this)),_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this))}},{key:"remove",value:function(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this._observer.disconnect(),this._observer=null,_superPropGet(n,"remove",this,3)([]))}},{key:"enableEditMode",value:function(){this._disableEditing||this.canvas===null||(_superPropGet(n,"enableEditMode",this,3)([]),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this._boundCanvasPointerdown),this.canvas.addEventListener("pointerup",this._boundCanvasPointerup))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&this.canvas!==null&&(_superPropGet(n,"disableEditMode",this,3)([]),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerup",this._boundCanvasPointerup))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return!this.paths||this.paths.length<2}},{key:"drawLine",value:function(r,o){var s,u,d,f=r[0]-o[0],g=r[1]-o[1],m=Math.atan(g/f),y=[(r[0]+o[0])/2,(r[1]+o[1])/2];this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),(s=this.ctx).moveTo.apply(s,_toConsumableArray$1(r)),(u=this.ctx).lineTo.apply(u,_toConsumableArray$1(o)),this.ctx.stroke(),this.drawStartLineArrow.apply(this,_toConsumableArray$1(r).concat(_toConsumableArray$1(o))),this.drawEndLineArrow.apply(this,_toConsumableArray$1(r).concat(_toConsumableArray$1(o))),this._move&&this.drawCircle(r,o,m),this.ctx.save(),(d=this.ctx).translate.apply(d,y),this.ctx.beginPath(),this.ctx.rotate(m);var v=Math.round(10*Math.sqrt(f*f+g*g))/10;this.ctx.fillStyle="blue",this.ctx.font="12px Arial";var _=this.ctx.measureText(v+" pt").width;this.ctx.fillText(v+" pt",-_*Math.cos(m)/2,0),this.ctx.restore(),this.ctx.save(),this.parent._uiManager._eventBus.dispatch("distanceChanged",{distance:v})}},{key:"drawCircle",value:function(r,o){var s=r[0]-o[0],u=r[1]-o[1],d=Math.atan(u/s),f=r[0]+10*Math.cos(d),g=r[1]+10*Math.sin(d),m=this.ctx,y="#0097ff";m.fillStyle=y,m.beginPath(),m.arc(f,g,6,0,2*Math.PI,!0),m.fill(),m.stroke();var v=o[0]-10*Math.cos(d),_=o[1]-10*Math.sin(d);m.fillStyle=y,m.beginPath(),m.arc(v,_,6,0,2*Math.PI,!0),m.fill(),m.stroke(),this._dragStartPoint=[f,g],this._dragEndPoint=[v,_]}},{key:"drawStartLineArrow",value:function(r,o,s,u){var d,f,g=180*Math.atan2(u-o,s-r)/Math.PI,m=(g+30)*Math.PI/180,y=(g-30)*Math.PI/180,v=10*Math.cos(m),_=10*Math.sin(m),w=10*Math.cos(y),x=10*Math.sin(y);d=r+v,f=o+_,this.arrowPoints[0]=[d,f],this.ctx.moveTo(d,f),this.ctx.lineTo(r,o),d=r+w,f=o+x,this.arrowPoints[1]=[d,f],this.ctx.lineTo(d,f),this.ctx.stroke()}},{key:"drawEndLineArrow",value:function(r,o,s,u){var d,f,g=180*Math.atan2(o-u,r-s)/Math.PI,m=(g+30)*Math.PI/180,y=(g-30)*Math.PI/180,v=10*Math.cos(m),_=10*Math.sin(m),w=10*Math.cos(y),x=10*Math.sin(y);d=s+v,f=u+_,this.arrowPoints[2]=[d,f],this.ctx.moveTo(d,f),this.ctx.lineTo(s,u),d=s+w,f=u+x,this.arrowPoints[3]=[d,f],this.ctx.lineTo(d,f),this.ctx.stroke()}},{key:"commit",value:function(){this._disableEditing||(_superPropGet(n,"commit",this,3)([]),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this._disableEditing=!0,this.div.classList.add("disabled"),_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}},{key:"focusin",value:function(r){_superPropGet(n,"focusin",this,3)([r]),this.enableEditMode()}},{key:"canvasPointerdown",value:function(r){r.button===0&&this.isInEditMode()&&!this._disableEditing&&(this.setInForeground(),r.type!=="mouse"&&this.div.focus(),r.stopPropagation(),this.canvas.addEventListener("pointerleave",this._boundCanvasPointerleave),this.canvas.addEventListener("pointermove",this._boundCanvasPointermove),_assertClassBrand(_InkEditor_brand,this,_startDrawing).call(this,r.offsetX,r.offsetY))}},{key:"canvasPointermove",value:function(r){r.stopPropagation(),_assertClassBrand(_InkEditor_brand,this,_draw).call(this,r.offsetX,r.offsetY)}},{key:"canvasPointerup",value:function(r){if(r.button===0&&(this.isInEditMode()&&this.currentPath.length!==0&&(r.stopPropagation(),_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,r),this.setInBackground()),this.isAttachedToDOM&&!(this.currentPath.length<2))){var o=r.relatedTarget;o!=null&&o.closest("#".concat(this.id))||(r.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove(),this.parent.unselect(this))}}},{key:"canvasPointerleave",value:function(r){_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,r),this.setInBackground()}},{key:"setInForeground",value:function(){this.div.style.zIndex=this._zIndexForeground}},{key:"render",value:function(){if(this.div)return this.div;var r,o;this.width&&(r=this.x,o=this.y),_superPropGet(n,"render",this,3)([]);var s=_slicedToArray(_assertClassBrand(_InkEditor_brand,this,_getInitialBBox).call(this),4),u=s[0],d=s[1],f=s[2],g=s[3];if(this.setAt(u,d,0,0),this.setDims(f,g),_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this),this.width){var m=_slicedToArray(this.parent.viewportBaseDimensions,2),y=m[0],v=m[1];this.setAt(r*y,o*v,this.width*y,this.height*v),this._isCanvasInitialized=!0,_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),this.setDims(this.width*y,this.height*v),_assertClassBrand(_InkEditor_brand,this,_redraw).call(this),_assertClassBrand(_InkEditor_brand,this,_setMinDims).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _assertClassBrand(_InkEditor_brand,this,_createObserver).call(this),this.div}},{key:"setDimensions",value:function(r,o){var s=Math.round(r),u=Math.round(o);if(this._realWidth!==s||this._realHeight!==u){this._realWidth=s,this._realHeight=u,this.canvas.style.visibility="hidden",this._aspectRatio&&Math.abs(this._aspectRatio-r/o)>.01&&(o=Math.ceil(r/this._aspectRatio),this.setDims(r,o));var d=_slicedToArray(this.parent.viewportBaseDimensions,2),f=d[0],g=d[1];this.width=r/f,this.height=o/g,this._disableEditing&&_assertClassBrand(_InkEditor_brand,this,_setScaleFactor).call(this,r,o),_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),_assertClassBrand(_InkEditor_brand,this,_redraw).call(this),this.canvas.style.visibility="visible"}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var r=this.getRect(0,0),o=this.rotation%180==0?r[3]-r[1]:r[2]-r[0],s=PDFAnnotation._defaultLineColor;return{annotationType:AnnotationEditorType.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:_assertClassBrand(_InkEditor_brand,this,_serializePaths).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,o),pageIndex:this.parent.pageIndex,rect:r,rotation:this.rotation}}}],[{key:"updateDefaultParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.INK_THICKNESS:n._defaultThickness=o;break;case AnnotationEditorParamsType.INK_COLOR:n._defaultColor=o;break;case AnnotationEditorParamsType.INK_OPACITY:n._defaultOpacity=o/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.INK_THICKNESS,n._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,n._defaultColor||PDFAnnotation._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*n._defaultOpacity)]]}},{key:"deserialize",value:function(r,o){var s=_superPropGet(n,"deserialize",this,2)([r,o]);s.thickness=r.thickness,s.color=Util.makeHexColor.apply(Util,_toConsumableArray$1(r.color)),s.opacity=r.opacity;var u=_slicedToArray(o.pageDimensions,2),d=u[0],f=u[1],g=s.width*d,m=s.height*f,y=o.scaleFactor,v=r.thickness/2;s._aspectRatio=g/m,s._disableEditing=!0,s._realWidth=Math.round(g),s._realHeight=Math.round(m);var _,w=_createForOfIteratorHelper(r.paths);try{for(w.s();!(_=w.n()).done;){var x=_.value.bezier,k=[];s.paths.push(k);for(var S=y*(x[0]-v),M=y*(m-x[1]-v),E=2,P=x.length;E<P;E+=6){var T=y*(x[E]-v),D=y*(m-x[E+1]-v),F=y*(x[E+2]-v),I=y*(m-x[E+3]-v),N=y*(x[E+4]-v),q=y*(m-x[E+5]-v);k.push([[S,M],[T,D],[F,I],[N,q]]),S=N,M=q}var Y=_assertClassBrand(n,this,_buildPath2D).call(this,k);s.bezierPath2D.push(Y)}}catch(j){w.e(j)}finally{w.f()}var Z=_assertClassBrand(_InkEditor_brand,s,_getBbox).call(s);return s._baseWidth=Math.max(RESIZER_SIZE,Z[2]-Z[0]),s._baseHeight=Math.max(RESIZER_SIZE,Z[3]-Z[1]),_assertClassBrand(_InkEditor_brand,s,_setScaleFactor).call(s,g,m),s}}])}();function _getInitialBBox(){var e=this.parent.viewport,n=e.width,r=e.height;switch(e.rotation){case 90:return[0,n,n,r];case 180:return[n,r,n,r];case 270:return[r,0,n,r];default:return[0,0,n,r]}}function _setStroke(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle="".concat(this.color).concat(opacityToHex(this.opacity))}function _startDrawing(e,n){var r,o=this;this.isEditing=!0,this._isCanvasInitialized||(this._isCanvasInitialized=!0,_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),this.thickness||(this.thickness=_InkEditor._defaultThickness),this.color||(this.color=_InkEditor._defaultColor||PDFAnnotation._defaultLineColor),(r=this.opacity)!==null&&r!==void 0||(this.opacity=_InkEditor._defaultOpacity)),this.currentPath[0]=[e,n],this._lastPoint=null,_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this),this._requestFrameCallback=function(){o._requestFrameCallback&&(o._lastPoint&&(o.drawLine(o.currentPath[0],o._lastPoint),o._lastPoint=null),window.requestAnimationFrame(o._requestFrameCallback))},window.requestAnimationFrame(this._requestFrameCallback)}function _draw(e,n){var r=_slicedToArray(this.currentPath.at(-1),2),o=r[0],s=r[1];e===o&&n===s||(this.currentPath[1]=[e,n],this._lastPoint=[e,n])}function _stopDrawing(e,n){this.ctx.closePath(),this._requestFrameCallback=null,e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height);var r=_slicedToArray(this.currentPath.at(-1),2),o=r[0],s=r[1];e===o&&n===s||(this.currentPath[1]=[e,n]),this.currentPath.length!==0&&(this.paths=_toConsumableArray$1(this.currentPath),this.rebuild())}function _redraw(){this.isEmpty()?_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this):(_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this),this.canvas,this.ctx.setTransform(1,0,0,1,0,0),_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this),this.drawLine(this.currentPath[0],this.currentPath[1]))}function _endDrawing(e){_assertClassBrand(_InkEditor_brand,this,_stopDrawing).call(this,e.offsetX,e.offsetY),this.canvas.removeEventListener("pointerleave",this._boundCanvasPointerleave),this.canvas.removeEventListener("pointermove",this._boundCanvasPointermove),this.parent.addToAnnotationStorage(this)}function _createCanvas(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.textCtx=this.canvas.getContext("2d")}function _createObserver(){var e=this,n=null;this._observer=new ResizeObserver(function(r){var o=r[0].contentRect;o.width&&o.height&&(n!==null&&clearTimeout(n),n=setTimeout(function(){e.fixDims(),n=null},TIME_TO_WAIT_BEFORE_FIXING_DIMS),e.setDimensions(o.width,o.height))}),this._observer.observe(this.div)}function _setCanvasDims(){if(this._isCanvasInitialized){var e=_slicedToArray(this.parent.viewportBaseDimensions,2),n=e[0],r=e[1];this.canvas.width=Math.ceil(this.width*n),this.canvas.height=Math.ceil(this.height*r),_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this)}}function _setScaleFactor(e,n){var r=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this),o=(e-r)/this._baseWidth,s=(n-r)/this._baseHeight;this.scaleFactor=Math.min(o,s)}function _updateTransform(){var e=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function _buildPath2D(e){for(var n=new Path2D,r=0,o=e.length;r<o;r++){var s=_slicedToArray(e[r],4),u=s[0],d=s[1],f=s[2],g=s[3];r===0&&n.moveTo.apply(n,_toConsumableArray$1(u)),n.bezierCurveTo(d[0],d[1],f[0],f[1],g[0],g[1])}return n}function _serializePaths(e,n,r,o){var s,u,d,f=[],g=this.thickness/2,m=_createForOfIteratorHelper(this.paths);try{for(m.s();!(d=m.n()).done;){var y=d.value;s=[],u=[];for(var v=0,_=y.length;v<_;v++){var w=_slicedToArray(y[v],4),x=w[0],k=w[1],S=w[2],M=w[3],E=e*(x[0]+n)+g,P=o-e*(x[1]+r)-g,T=e*(k[0]+n)+g,D=o-e*(k[1]+r)-g,F=e*(S[0]+n)+g,I=o-e*(S[1]+r)-g,N=e*(M[0]+n)+g,q=o-e*(M[1]+r)-g;v===0&&(s.push(E,P),u.push(E,P)),s.push(T,D,F,I,N,q),_assertClassBrand(_InkEditor_brand,this,_extractPointsOnBezier).call(this,E,P,T,D,F,I,N,q,4,u)}f.push({bezier:s,points:u})}}catch(Y){m.e(Y)}finally{m.f()}return f}function _extractPointsOnBezier(e,n,r,o,s,u,d,f,g,m){if(_assertClassBrand(_InkEditor_brand,this,_isAlmostFlat).call(this,e,n,r,o,s,u,d,f))m.push(d,f);else{for(var y=1;y<g-1;y++){var v=y/g,_=1-v,w=v*e+_*r,x=v*n+_*o,k=v*r+_*s,S=v*o+_*u;w=v*(w=v*w+_*k)+_*(k=v*k+_*(v*s+_*d)),x=v*(x=v*x+_*S)+_*(S=v*S+_*(v*u+_*f)),m.push(w,x)}m.push(d,f)}}function _isAlmostFlat(e,n,r,o,s,u,d,f){var g=Math.pow(3*r-2*e-d,2),m=Math.pow(3*o-2*n-f,2),y=Math.pow(3*s-e-2*d,2),v=Math.pow(3*u-n-2*f,2);return Math.max(g,y)+Math.max(m,v)<=10}function _getBbox(){var e,n=1/0,r=-1/0,o=1/0,s=-1/0,u=_createForOfIteratorHelper([].concat(_toConsumableArray$1(this.currentPath),_toConsumableArray$1(this.arrowPoints)));try{for(u.s();!(e=u.n()).done;){var d=_slicedToArray(e.value,2),f=d[0],g=d[1];n=Math.min(f,n),o=Math.min(g,o),r=Math.max(f,r),s=Math.max(g,s)}}catch(m){u.e(m)}finally{u.f()}return[n,o,r,s]}function _getPadding(){return this._disableEditing?Math.ceil(this.thickness*this.parent.scaleFactor):0}function _fitToContent(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.isEmpty())if(this._disableEditing){var n=_assertClassBrand(_InkEditor_brand,this,_getBbox).call(this),r=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);this._baseWidth=Math.max(RESIZER_SIZE,n[2]-n[0]),this._baseHeight=Math.max(RESIZER_SIZE,n[3]-n[1]);var o=Math.ceil(r+this._baseWidth*this.scaleFactor),s=Math.ceil(r+this._baseHeight*this.scaleFactor),u=_slicedToArray(this.parent.viewportBaseDimensions,2),d=u[0],f=u[1];this.width=o/d,this.height=s/f,this._aspectRatio=o/s,_assertClassBrand(_InkEditor_brand,this,_setMinDims).call(this);var g=this.translationX,m=this.translationY;this.translationX=-n[0],this.translationY=-n[1],_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),_assertClassBrand(_InkEditor_brand,this,_redraw).call(this),this._realWidth=o,this._realHeight=s,this.setDims(o,s);var y=e?r/this.scaleFactor/2:0;this.translate(g-this.translationX-y,m-this.translationY-y)}else _assertClassBrand(_InkEditor_brand,this,_redraw).call(this)}function _setMinDims(){var e=this.div.style;this._aspectRatio>=1?(e.minHeight="".concat(RESIZER_SIZE,"px"),e.minWidth="".concat(Math.round(this._aspectRatio*RESIZER_SIZE),"px")):(e.minWidth="".concat(RESIZER_SIZE,"px"),e.minHeight="".concat(Math.round(RESIZER_SIZE/this._aspectRatio),"px"))}_InkEditor=InkEditor,_defineProperty$1(InkEditor,"_defaultColor",null),_defineProperty$1(InkEditor,"_defaultOpacity",1),_defineProperty$1(InkEditor,"_defaultThickness",1),_defineProperty$1(InkEditor,"_l10nPromise",void 0),_defineProperty$1(InkEditor,"_type","ink"),_defineProperty$1(InkEditor,"_zIndex",1);var PDFAnnotationLayer=function(){return _createClass(function e(n){_classCallCheck(this,e),this._cancelled=!1,this._allowClick=!1,this._boundPointerup=this.pointerup.bind(this),this._boundPointerdown=this.pointerdown.bind(this),this._editors=new Map,this._hadPointerDown=!1,this._isCleaningUp=!1,this._uiManager=n.uiManager,this.pageDiv=n.pageDiv,this.div=null,this.scale=n.scale,this._accessibilityManager=n.accessibilityManager,n.uiManager.registerEditorTypes([PDFAnnotationSticky,InkEditor]),this.annotationStorage=n.annotationStorage||null,this.pageIndex=n.pageIndex},[{key:"updateToolbar",value:function(e){this._uiManager.updateToolbar(e)}},{key:"updateMode",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._uiManager.getMode();this._cleanup(),e===AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this._uiManager.unselectAll(),this.div.classList.toggle("freeTextEditing",e===AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===AnnotationEditorType.INK)}},{key:"moveEditorInDOM",value:function(e){var n;(n=this._accessibilityManager)===null||n===void 0||n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}},{key:"addInkEditorIfNeeded",value:function(e){if(e||this._uiManager.getMode()===AnnotationEditorType.INK){if(!e){var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.isEmpty())return void o.setInBackground()}}catch(s){r.e(s)}finally{r.f()}}this._createAndAddNewEditor({offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(e){this._uiManager.setEditingState(e)}},{key:"addCommands",value:function(e){this._uiManager.addCommands(e)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;)e.value.enableEditing()}catch(r){n.e(r)}finally{n.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;)e.value.disableEditing()}catch(r){n.e(r)}finally{n.f()}}},{key:"setActiveEditor",value:function(e){this._uiManager.getActive()!==e&&this._uiManager.setActiveEditor(e)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",this._boundPointerdown),this.div.addEventListener("pointerup",this._boundPointerup)}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",this._boundPointerdown),this.div.removeEventListener("pointerup",this._boundPointerup)}},{key:"attach",value:function(e){this._editors.set(e.id,e)}},{key:"detach",value:function(e){this._editors.delete(e.id)}},{key:"remove",value:function(e){var n=this;this._uiManager.removeEditor(e),this.detach(e),this.annotationStorage.remove(e.id),e.div.style.display="none",setTimeout(function(){e.div.style.display="",e.div.remove(),e.isAttachedToDOM=!1,document.activeElement===document.body&&n._uiManager.focusMainContainer()},0),this._isCleaningUp||this.addInkEditorIfNeeded(!1)}},{key:"_changeParent",value:function(e){var n;e.parent!==this&&(this.attach(e),e.pageIndex=this.pageIndex,(n=e.parent)===null||n===void 0||n.detach(e),e.parent=this,e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}},{key:"add",value:function(e){if(this._changeParent(e),this._uiManager.addEditor(e),this.attach(e),!e.isAttachedToDOM){var n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.onceAdded(),this.addToAnnotationStorage(e)}},{key:"addToAnnotationStorage",value:function(e){e.isEmpty()||this.annotationStorage.has(e.id)||this.annotationStorage.setValue(e.id,e)}},{key:"updateAnnotationStorage",value:function(e){}},{key:"addOrRebuild",value:function(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}},{key:"addUndoableEditor",value:function(e){this.addOrRebuild(e)}},{key:"getNextId",value:function(){return this._uiManager.getId()}},{key:"_createNewEditor",value:function(e){switch(this._uiManager.getMode()){case AnnotationEditorType.FREETEXT:return new PDFAnnotationSticky(e);case AnnotationEditorType.INK:return new InkEditor(e)}return null}},{key:"deserialize",value:function(e){switch(e.annotationType){case AnnotationEditorType.FREETEXT:return PDFAnnotationSticky.deserialize(e,this);case AnnotationEditorType.INK:return InkEditor.deserialize(e,this)}return null}},{key:"_createAndAddNewEditor",value:function(e){var n=this.getNextId(),r=this._createNewEditor({parent:this,id:n,x:e.offsetX,y:e.offsetY});return r&&this.add(r),r}},{key:"setSelected",value:function(e){this._uiManager.setSelected(e)}},{key:"toggleSelected",value:function(e){this._uiManager.toggleSelected(e)}},{key:"isSelected",value:function(e){return this._uiManager.isSelected(e)}},{key:"unselect",value:function(e){this._uiManager.unselect(e)}},{key:"pointerup",value:function(e){var n=KeyboardManager.platform.isMac;e.button!==0||e.ctrlKey&&n||e.target===this.div&&this._hadPointerDown&&(this._hadPointerDown=!1,this._allowClick?this._createAndAddNewEditor(e):this._allowClick=!0)}},{key:"pointerdown",value:function(e){var n=KeyboardManager.platform.isMac;if(!(e.button!==0||e.ctrlKey&&n)&&e.target===this.div){this._hadPointerDown=!0;var r=this._uiManager.getActive();this._allowClick=!r||r.isEmpty()}}},{key:"drop",value:function(e){var n=e.dataTransfer.getData("text/plain"),r=this._uiManager.getEditor(n);if(r){e.preventDefault(),e.dataTransfer.dropEffect="move",this._changeParent(r);var o=this.div.getBoundingClientRect(),s=e.clientX-o.x,u=e.clientY-o.y;r.translate(s-r.startX,u-r.startY),r.div.focus()}}},{key:"dragover",value:function(e){e.preventDefault()}},{key:"_cleanup",value:function(){this._isCleaningUp=!0;var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.isEmpty()&&r.remove()}}catch(o){n.e(o)}finally{n.f()}this._isCleaningUp=!1}},{key:"_removeAll",value:function(){this._isCleaningUp=!0;var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;)e.value.remove()}catch(r){n.e(r)}finally{n.f()}this._isCleaningUp=!1}},{key:"render",value:function(e){if(!this._cancelled){var n=e.clone({dontFlip:!0});if(this.div)return this.update({viewport:n}),void this.show();this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div)}}},{key:"cancel",value:function(){this._cancelled=!0,this.destroy()}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}},{key:"show",value:function(){this.div&&(this.div.hidden=!1)}},{key:"destroy",value:function(){var e;if(this.div){this.pageDiv=null,((e=this._uiManager.getActive())===null||e===void 0?void 0:e.parent)===this&&this._uiManager.setActiveEditor(null);var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;){var o=n.value;o.isAttachedToDOM=!1,o.div.remove(),o.parent=null}}catch(s){r.e(s)}finally{r.f()}this.div.remove(),this.div=null,this._editors.clear(),this._uiManager.removeLayer(this)}}},{key:"removeAllAnnotations",value:function(){var e;((e=this._uiManager.getActive())===null||e===void 0?void 0:e.parent)===this&&this._uiManager.setActiveEditor(null);var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;){var o=n.value;this.remove(o)}}catch(s){r.e(s)}finally{r.f()}}},{key:"update",value:function(e){this._uiManager.commitOrRemove(),this.viewport=e.viewport,this.setDimensions(),this.updateMode()}},{key:"scaleFactor",get:function(){return this.viewport.scale}},{key:"pageDimensions",get:function(){var e=_slicedToArray(this.viewport.viewBox,4),n=e[0],r=e[1];return[e[2]-n,e[3]-r]}},{key:"viewportBaseDimensions",get:function(){var e=this.viewport,n=e.width,r=e.height;return e.rotation%180==0?[n,r]:[r,n]}},{key:"setDimensions",value:function(){var e=this.viewport,n=e.width,r=e.height,o=e.rotation%180!=0,s=Math.floor(n)+"px",u=Math.floor(r)+"px";this.div.style.width=o?u:s,this.div.style.height=o?s:u}}])}(),BaseAnnotation=function(){return _createClass(function e(n){var r=n.annotation,o=n.layer;_classCallCheck(this,e),r.name||(r.name=v4()),this.layer=o,this.annotation=r,this.scrollTop=0,this.scrollLeft=0,this.deleteSvgStr=`<rect width="30" height="30" rx="2" fill="#DDE9FF"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M19 6.5V9.5H24V10.5H21.5V23.5H8.5V10.5H6V9.5H11V6.5H19ZM9.5 10.5V22.5H20.5V10.5H9.5ZM18 7.5V9.5H12V7.5H18ZM13.5 13V20H12.5V13H13.5ZM17.5 20V13H16.5V20H17.5Z" fill="#333333"/>
    `,this.replySvgStr=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M16 12.3333C16 12.7017 15.8537 13.055 15.5932 13.3154C15.3327 13.5759 14.9795 13.7222 14.6111 13.7222H6.27778L3.5 16.5V5.38889C3.5 5.02053 3.64633 4.66726 3.9068 4.4068C4.16726 4.14633 4.52053 4 4.88889 4H14.6111C14.9795 4 15.3327 4.14633 15.5932 4.4068C15.8537 4.66726 16 5.02053 16 5.38889V12.3333Z" stroke="#43474D" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},[{key:"getMouseLocation",value:function(e){var n=this.layer.documentViewer.getScrollViewElement(),r=n.scrollLeft||0,o=n.scrollTop||0;return{x:e.pageX+r,y:e.pageY+o}}}])}();function getClickPoint(e){var n=0,r=0;if(e.touches&&e.touches.length){var o=e.touches[0];n=o.pageX,r=o.pageY}else if(e.changedTouches){var s=e.changedTouches[0];n=s.pageX,r=s.pageY}else n=e.pageX,r=e.pageY;return{pageX:n,pageY:r}}function getAbsoluteCoordinate(e,n){var r=getClickPoint(n),o=r.pageX,s=r.pageY,u=e.getBoundingClientRect(),d=window.pageXOffset||window.scrollX||0,f=window.pageYOffset||window.scrollY||0;return{x:o-u.left-d,y:s-u.top-f,width:u.width-d,height:u.height-f}}function createSvg(e,n,r){var o=document.createElementNS("http://www.w3.org/2000/svg",e);if(n)for(var s in n)o.setAttribute(s,n[s]);if(r)for(var u in r)o.style[u]=r[u];return o}function getActualPoint(e,n){return{x:e.x*n,y:e.y*n}}function getInitialPoint(e,n){return{x:e.x/n,y:e.y/n}}var TO_FIXED_PRECISION=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function med(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2]}function getSvgPathFromStroke(e){if(!e.length)return"";var n=e.length-1;return e.reduce(function(r,o,s,u){return s===n?r.push(o,med(o,u[0]),"L",u[0],"Z"):r.push(o,med(o,u[s+1])),r},["M",e[0],"Q"]).join(" ").replace(TO_FIXED_PRECISION,"$1")}var getHtmlToText=function(e){return formatText(replaceToBreak(getHtml(e)))},formatText=function(e){return e.replace(/\<br\/\>/gi,`
`).replace(/\<br\>/gi,`
`).replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/<\/?[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},getHtml=function(e){return e.innerHTML},replaceToBreak=function(e){return e=(e=(e=String(e).replace(/<\/div>/gi,"")).replace(/<div>(<br>)?(<br\/>)?/gi,`
`)).replace(/<br>|<br\/>/gi,`
`)},keepLastIndex=function(e){if(window.getSelection)(n=window.getSelection()).selectAllChildren(e),n.collapseToEnd();else if(document.selection){var n;(n=document.selection.createRange()).moveToElementText(e),n.collapse(!1),n.select()}},createElement=function(e,n,r){var o=document.createElement(e);if(r)for(var s in r)o.setAttribute(s,r[s]);if(n)for(var u in n)o.style[u]=n[u];return o},pastePlainText=function(e){e.preventDefault();var n=(e.originalEvent||e).clipboardData.getData("text");if(n){var r=window.getSelection();r.rangeCount&&(r.deleteFromDocument(),r.getRangeAt(0).insertNode(document.createTextNode(n)),r.collapseToEnd())}},_ArrowHelper_brand=new WeakSet,ArrowHelper=function(){return _createClass(function e(n,r){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_ArrowHelper_brand),this.start=n,this.end=r},[{key:"getStartArrow",value:function(e,n,r){var o=this.getStartArrowPoints(e,n);if(o){var s=void 0;s=r?document.createElementNS("http://www.w3.org/2000/svg","polygon"):document.createElementNS("http://www.w3.org/2000/svg","polyline");var u="";if(o.forEach(function(d){u.length>0&&(u+=" "),u+="".concat(d.x,",").concat(d.y)}),u.length>0)return s.setAttribute("points",u),s}}},{key:"getStartArrowPoints",value:function(e,n){var r=_assertClassBrand(_ArrowHelper_brand,this,_getNormalize).call(this);if(r&&n>0){var o={x:(r={x:r.x*n,y:r.y*n}).x*Math.cos(e*Math.PI/180)-r.y*Math.sin(e*Math.PI/180),y:r.y*Math.cos(e*Math.PI/180)+r.x*Math.sin(e*Math.PI/180)},s={x:r.x*Math.cos(-e*Math.PI/180)-r.y*Math.sin(-e*Math.PI/180),y:r.y*Math.cos(-e*Math.PI/180)+r.x*Math.sin(-e*Math.PI/180)};return[{x:this.start.x+o.x,y:this.start.y+o.y},{x:this.start.x,y:this.start.y},{x:this.start.x+s.x,y:this.start.y+s.y}]}}},{key:"getEndArrow",value:function(e,n,r){var o=this.getEndArrowPoints(e,n);if(o){var s=void 0;s=r?document.createElementNS("http://www.w3.org/2000/svg","polygon"):document.createElementNS("http://www.w3.org/2000/svg","polyline");var u="";if(o.forEach(function(d){u.length>0&&(u+=" "),u+="".concat(d.x,",").concat(d.y)}),u.length>0)return s.setAttribute("points",u),s}}},{key:"getEndArrowPoints",value:function(e,n){var r=_assertClassBrand(_ArrowHelper_brand,this,_getNormalize).call(this);if(r&&n>0){var o={x:(r={x:r.x*n,y:r.y*n}).x*Math.cos(e*Math.PI/180)-r.y*Math.sin(e*Math.PI/180),y:r.y*Math.cos(e*Math.PI/180)+r.x*Math.sin(e*Math.PI/180)},s={x:r.x*Math.cos(-e*Math.PI/180)-r.y*Math.sin(-e*Math.PI/180),y:r.y*Math.cos(-e*Math.PI/180)+r.x*Math.sin(-e*Math.PI/180)};return[{x:this.end.x-o.x,y:this.end.y-o.y},{x:this.end.x,y:this.end.y},{x:this.end.x-s.x,y:this.end.y-s.y}]}}}])}();function _getNormalize(){var e=_assertClassBrand(_ArrowHelper_brand,this,_getVector).call(this),n=_assertClassBrand(_ArrowHelper_brand,this,_getLineLength).call(this);if(e&&n>0)return{x:e.x/n,y:e.y/n}}function _getVector(){if(this.start&&this.end)return{x:this.end.x-this.start.x,y:this.end.y-this.start.y}}function _getLineLength(){var e=_assertClassBrand(_ArrowHelper_brand,this,_getVector).call(this);return e?Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)):0}var Line=function(e){function n(y){var v,_=y.annotation,w=y.layer,x=y.show,k=x!==void 0&&x,S=y.enableReply,M=S===void 0||S;return _classCallCheck(this,n),(v=_callSuper(this,n,[{annotation:_,layer:w}])).enableReply=M,v.hidden=!0,v.initial=!1,v.start=null,v.end=null,v.newStart=null,v.newEnd=null,v.svgElement=null,v.startCircle=null,v.middleCircle=null,v.endCircle=null,v.show=k,v.ratio=window.devicePixelRatio||1,v.decimalPlaces=0,v.isPopupShow=!1,v.onMousedown=v.handleMouseDown.bind(v),v.onMouseup=v.handleMouseUp.bind(v),v.onMousemove=v.handleMouseMove.bind(v),v.onDelete=v.handleDelete.bind(v),v.onOpenReply=v.openReply.bind(v),v.onKeydown=v.handleKeydown.bind(v),v.handlePropertyPanel=v.handlePropertyPanel.bind(v),v.onHandlePopup=v.handlePopup.bind(v),v.onKeydown=v.handleKeyDown.bind(v),v.annotation.measure?v.renderMeasure():v.render(),v}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var y=this,v=this.annotation,_=this.getActualPoint(this.layer.viewport.scale),w=_.start,x=_.end;this.start=w,this.end=x;var k=(this.annotation.borderWidth||2)*this.layer.viewport.scale,S=this.calculate(w,x),M=Math.max(3*k,12*this.layer.viewport.scale);v.borderColor||(v.borderColor=v.color||"#FF0000");var E={left:S.left-M,top:S.top-M,width:S.width+2*M,height:S.height+2*M};if(E.width||E.height){this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(E.left," ").concat(E.top," ").concat(E.width," ").concat(E.height));var P=document.createElementNS("http://www.w3.org/2000/svg","line");if(P.setAttribute("x1",this.start.x),P.setAttribute("y1",this.start.y),P.setAttribute("x2",this.end.x),P.setAttribute("y2",this.end.y),P.setAttribute("stroke",v.borderColor),P.setAttribute("stroke-width",k),P.setAttribute("mainLine",""),v.opacity&&P.setAttribute("stroke-opacity",v.opacity),this.svgElement.append(P),this.annotation.head||this.annotation.tail){var T=new ArrowHelper(this.start,this.end),D=[];if(this.annotation.head&&this.annotation.head==="OpenArrow"){var F=T.getStartArrow(30,M,!1);F&&(F.setAttribute("head",""),D.push(F))}if(this.annotation.tail&&this.annotation.tail==="OpenArrow"){var I=T.getEndArrow(30,M,!1);I&&(I.setAttribute("tail",""),D.push(I))}D.forEach(function(Y){Y&&(Y.setAttribute("stroke",v.borderColor),Y.setAttribute("stroke-width",k),Y.setAttribute("fill","none"),v.opacity&&Y.setAttribute("stroke-opacity",v.opacity),y.svgElement.append(Y))})}this.annotationContainer=document.createElement("div"),this.annotationContainer.append(this.svgElement),this.annotationContainer.id=v.name,this.annotationContainer.className="annotation",this.annotationContainer.style.top=E.top+"px",this.annotationContainer.style.left=E.left+"px",this.annotationContainer.style.width=E.width+"px",this.annotationContainer.style.height=E.height+"px",this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.deletetButton.style.left=E.left+E.width+MARGIN_DISTANCE-30+"px",this.deletetButton.style.top=E.top-MARGIN_DISTANCE-30+"px",this.replyButton=createElement("div",{width:"30px",height:"30px",background:"#DDE9FF",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.replyButton.style.left=E.left+E.width+MARGIN_DISTANCE-65+"px",this.replyButton.style.top=E.top-MARGIN_DISTANCE-30+"px";var N=document.createElementNS("http://www.w3.org/2000/svg","svg");N.setAttribute("data-id","move"),N.setAttribute("height",E.height),N.setAttribute("viewBox","".concat(E.left," ").concat(E.top," ").concat(E.width+2*MARGIN_DISTANCE," ").concat(E.height+2*MARGIN_DISTANCE)),N.style.position="absolute",N.style.zIndex=1,N.style.left="".concat(E.left-MARGIN_DISTANCE,"px"),N.style.top="".concat(E.top-MARGIN_DISTANCE,"px"),N.style.width="".concat(E.width+2*MARGIN_DISTANCE,"px"),N.style.height="".concat(E.height+2*MARGIN_DISTANCE,"px"),this.outerLine=N,this.startCircle=createSvg("circle",{class:"start","data-id":"start",fill:"#1460F3",cx:w.x+MARGIN_DISTANCE,cy:w.y+MARGIN_DISTANCE,r:6}),this.endCircle=createSvg("circle",{class:"end","data-id":"end",fill:"#1460F3",cx:x.x+MARGIN_DISTANCE,cy:x.y+MARGIN_DISTANCE,r:6}),this.moveLine=createSvg("line",{class:"move","data-id":"move",x1:w.x+MARGIN_DISTANCE,y1:w.y+MARGIN_DISTANCE,x2:x.x+MARGIN_DISTANCE,y2:x.y+MARGIN_DISTANCE,fill:"transparent",stroke:"transparent","stroke-width":5}),this.outerLine.append(this.moveLine),this.outerLine.append(this.startCircle),this.outerLine.append(this.endCircle),this.outerLineContainer.append(this.outerLine);var q=this.layer.documentViewer.isAnnotationPopup;q&&this.outerLineContainer.append(this.deletetButton),q&&this.enableReply&&this.outerLineContainer.append(this.replyButton),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}}},{key:"renderMeasure",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var v,_,w,x,k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye,we,ke=this;return _regeneratorRuntime().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(v=this.annotation,_=this.layer.viewport.scale,w=this.getActualPoint(_),x=w.start,k=w.end,this.start=x,this.end=k,v.precision&&(v.precision>1&&(v.precision=Math.pow(10,-Math.floor(Math.log10(v.precision)))),this.decimalPlaces=((S=Math.abs(v.precision).toString().split(".")[1])===null||S===void 0?void 0:S.length)||0),v.borderColor||(v.borderColor=v.color||"#FF0000"),v.factor){Me.next=11;break}return Me.next=10,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",v.rulerPtr);case 10:v.factor=Me.sent;case 11:if(v.X||(v.X=(Math.abs(k.x-x.x)*v.factor).toFixed(this.decimalPlaces)),v.Y||(v.Y=(Math.abs(k.y-x.y)*v.factor).toFixed(this.decimalPlaces)),v.angle||(M=Math.atan2(k.y-x.y,k.x-x.x)/Math.PI*180,E=Math.abs(M)>90?180-Math.abs(M):M,P=1*Math.abs(E).toFixed(this.decimalPlaces),v.angle=P),v.fontStyle||(v.fontStyle="regular"),v.contents){Me.next=18;break}return Me.next=18,this.getMeasureData();case 18:if(T=v.leadLength*_,D=v.leadExtension*_,F=k.x-x.x,I=k.y-x.y,N=Math.sqrt(F*F+I*I),Z=-(Y=I/N),j=q=F/N,ne={x:x.x+Z*T,y:x.y+j*T},le={x:k.x+Z*T,y:k.y+j*T},J={x:x.x-Z*D,y:x.y-j*D},O={x:k.x-Z*D,y:k.y-j*D},U=this.maxRect([ne,le,J,O]),W=(this.annotation.borderWidth||2)*_,H=Math.max(3*W,10*_),(X={left:U.left-H,top:U.top-H,width:U.width+2*H,height:U.height+2*H}).width||X.height){Me.next=37;break}return Me.abrupt("return");case 37:this.rect=X,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(X.left," ").concat(X.top," ").concat(X.width," ").concat(X.height)),this.svgElement.style.pointerEvents="all",this.svgElement.style.overflow="visible",v.opacity&&(this.svgElement.style.opacity=v.opacity),Q={x:(x.x+k.x)/2,y:(x.y+k.y)/2},fe=Math.atan2(k.y-x.y,k.x-x.x)/Math.PI*180,Se=Math.abs(fe)>90?fe-180:fe,this.textEle=createSvg("text",{fill:v.color||v.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":v.fontSize,x:Q.x,y:Q.y,transform:"rotate(".concat(Se," ").concat(Q.x," ").concat(Q.y,")")},{pointerEvents:"none"}),this.textEle.textContent=v.contents,this.svgElement.append(this.textEle),Pe=this.getTextWidth(),$e={x:x.x+q*(N/2-Pe/2),y:x.y+Y*(N/2-Pe/2)},Ie={x:x.x+q*(N/2+Pe/2),y:x.y+Y*(N/2+Pe/2)},Ne="",Be=Math.ceil(this.ratio*this.layer.viewport.scale),v.dashes.length===1||v.dashes.length===2&&v.dashes[0]===v.dashes[1]?Ne=Math.ceil(v.dashes[0]*Be)+"":v.dashes.length>2&&(Ne=v.dashes.map(function(Le){return Math.ceil(Le*Be)}).join(", ")),[{startLine:"",x1:x.x,y1:x.y,x2:$e.x,y2:$e.y,"stroke-dasharray":Ne},{endLine:"",x1:Ie.x,y1:Ie.y,x2:k.x,y2:k.y,"stroke-dasharray":Ne},{startLead:"",x1:x.x,y1:x.y,x2:ne.x,y2:ne.y},{endLead:"",x1:k.x,y1:k.y,x2:le.x,y2:le.y},{startLeadExtension:"",x1:x.x,y1:x.y,x2:J.x,y2:J.y},{endLeadExtension:"",x1:k.x,y1:k.y,x2:O.x,y2:O.y}].forEach(function(Le){var Fe=createSvg("line",_objectSpread2$1(_objectSpread2$1({},Le),{},{stroke:v.borderColor,"stroke-width":W}),{"stroke-linecap":"butt"});ke.svgElement.append(Fe)}),(this.annotation.head||this.annotation.tail)&&(be=new ArrowHelper(this.start,this.end),Ve=[],this.annotation.head&&this.annotation.head==="OpenArrow"&&(De=be.getStartArrow(45,H))&&(De.setAttribute("head",""),Ve.push(De)),this.annotation.tail&&this.annotation.tail==="OpenArrow"&&(ve=be.getEndArrow(45,H))&&(ve.setAttribute("tail",""),Ve.push(ve)),Ve.forEach(function(Le){Le&&(Le.setAttribute("stroke",v.borderColor),Le.setAttribute("stroke-width",W),Le.setAttribute("fill","none"),ke.svgElement.append(Le))})),this.annotationContainer=document.createElement("div"),this.annotationContainer.append(this.svgElement),this.annotationContainer.id=v.name,this.annotationContainer.className="annotation",this.annotationContainer.style.top=X.top+"px",this.annotationContainer.style.left=X.left+"px",this.annotationContainer.style.width=X.width+"px",this.annotationContainer.style.height=X.height+"px",this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",(ye=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("data-id","move"),ye.setAttribute("width",X.width),ye.setAttribute("height",X.height),ye.setAttribute("viewBox","".concat(X.left," ").concat(X.top," ").concat(X.width," ").concat(X.height)),ye.style.position="absolute",ye.style.zIndex=1,ye.style.left="".concat(X.left,"px"),ye.style.top="".concat(X.top,"px"),ye.style.width="".concat(X.width,"px"),ye.style.height="".concat(X.height,"px"),ye.style.border="".concat(parseFloat(_.toFixed(1)),"px dashed #1460F3"),ye.style.boxSizing="content-box",ye.style.pointerEvents="all",ye.style.cursor="all-scroll",this.outerLine=ye,we=this.annotation.leadLength>this.annotation.leadExtension,this.startCircle=createSvg("circle",{class:"start","data-id":"start",fill:"#1460F3",cx:we?ne.x:J.x,cy:we?ne.y:J.y,r:6},{cursor:"default"}),this.middleCircle=createSvg("circle",{class:"middle","data-id":"middle",fill:"#1460F3",cx:Q.x,cy:Q.y,r:6},{cursor:"default"}),this.endCircle=createSvg("circle",{class:"end","data-id":"end",fill:"#1460F3",cx:we?le.x:O.x,cy:we?le.y:O.y,r:6},{cursor:"default"}),this.moveLine=createSvg("line",{class:"move","data-id":"move",x1:x.x,y1:x.y,x2:k.x,y2:k.y,fill:"transparent",stroke:"transparent","stroke-width":5}),this.outerLine.append(this.moveLine),this.outerLine.append(this.startCircle),this.outerLine.append(this.middleCircle),this.outerLine.append(this.endCircle),this.outerLineContainer.append(this.outerLine),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 98:case"end":return Me.stop()}},y,this)})),function(){return m.apply(this,arguments)})},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(y){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(y==null?void 0:y.target)){this.hidden=!1,this.updateTool(),this.annotation.measure&&(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)),document.addEventListener("keydown",this.onKeydown);var v=[this.svgElement,this.outerLine,document.querySelector(".toggle-button"),document.getElementById("propertyPanelButton"),document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];this.deletetButton&&v.push(this.deletetButton),this.replyButton&&v.push(this.replyButton),onClickOutsideUp(v,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var y,v,_;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),document.removeEventListener("keydown",this.onKeydown),(y=this.outerLine)===null||y===void 0||y.removeEventListener("mousedown",this.onMousedown),(v=this.outerLine)===null||v===void 0||v.removeEventListener("touchstart",this.onMousedown),(_=this.outerLineContainer)===null||_===void 0||_.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure&&(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup))}},{key:"getActualPoint",value:function(y){var v=this.annotation;!v.linePoints&&v.start&&v.end&&(v.linePoints=v.start+","+v.end);var _=_slicedToArray(v.linePoints,4);return{start:{x:_[0]*y,y:_[1]*y},end:{x:_[2]*y,y:_[3]*y}}}},{key:"getInitialPoint",value:function(){var y=this.layer.viewport.scale;return{start:{x:this.start.x/y,y:this.start.y/y},end:{x:this.end.x/y,y:this.end.y/y}}}},{key:"calculate",value:function(y,v){var _=this.rectCalc({start:y,end:v}),w=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return this.annotation.arrow?{top:_.top-10,left:_.left-10,width:_.width+20,height:_.height+20}:{top:_.top-w/2,left:_.left-w/2,width:_.width+w,height:_.height+w}}},{key:"rectCalc",value:function(y){var v=y.start,_=y.end;return{top:v.y<_.y?v.y:_.y,left:v.x<_.x?v.x:_.x,width:Math.abs(_.x-v.x),height:Math.abs(_.y-v.y)}}},{key:"maxRect",value:function(y){var v=Math.min(y[0].x,y[1].x,y[2].x,y[3].x),_=Math.min(y[0].y,y[1].y,y[2].y,y[3].y);return{left:v,top:_,width:Math.max(y[0].x,y[1].x,y[2].x,y[3].x)-v,height:Math.max(y[0].y,y[1].y,y[2].y,y[3].y)-_}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var y=this.annotation;this.layer.annotationStore.selectedElementName=y.name;var v=_objectSpread2$1({},y);delete v.annotPtr,delete v.pagePtr,delete v.operate,delete v.targetPage,delete v.arrow,this.layer.eventBus.dispatch("annotationSelected",v)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.measureResult,angle:this.annotation.angle,X:this.annotation.X,Y:this.annotation.Y}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleMouseDown",value:function(y){if(y.button===0||y.type!=="mousedown"){this.layer.tool&&y.stopPropagation();var v=y.target.getAttribute("data-id"),_=this.layer.documentViewer.getScrollViewElement();this.scrollTop=_.scrollTop,this.scrollLeft=_.scrollLeft;var w=getClickPoint(y),x=w.pageX,k=w.pageY;this.startState={operator:v,clickX:x,clickY:k},this.initialPoints={start:this.start,end:this.end},this.initLeadLength=this.annotation.leadLength,this.initLeadExtension=this.annotation.leadExtension,this.hasUpdatedInitialRect=!1,document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(y){var v=this;if(y.button===0||y.type!=="mousemove"){this.hidePopup(),y.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var _=getClickPoint(y),w=_.pageX,x=_.pageY,k=this.layer.documentViewer.getScrollViewElement(),S=k.scrollTop;w=w+k.scrollLeft-this.scrollLeft,x=x+S-this.scrollTop;var M=this.start,E=this.end,P=this.startState,T=this.layer.viewport,D=T.width,F=T.height,I=T.scale;if(P.operator==="start"){var N=w-(P.clickX-this.start.x),q=x-(P.clickY-this.start.y);N=Math.min(D,N),N=Math.max(0,N),q=Math.min(F,q),q=Math.max(0,q),this.update({start:{x:N,y:q},end:E})}else if(P.operator==="middle"){var Y,Z=((Y=document.querySelector(".document-container"))===null||Y===void 0?void 0:Y.style.marginLeft)||0;Z=parseFloat(Z),w=w+this.scrollLeft-Z,x+=this.scrollTop;var j,ne,le,J=this.layer.documentViewer.windowToPage({x:w,y:x},this.layer.page+1,!1),O={x:(M.x+E.x)/2,y:(M.y+E.y)/2},U={x:E.x-M.x,y:E.y-M.y},W={x:-U.y,y:U.x},H={x:J.x-O.x,y:J.y-O.y},X=(H.x*W.x+H.y*W.y)/(W.x*W.x+W.y*W.y),Q=M.x+X*W.x,fe=M.y+X*W.y,Se=E.x+X*W.x,Pe=E.y+X*W.y;if(Q=Math.max(0,Math.min(D,Q)),fe=Math.max(0,Math.min(F,fe)),Se=Math.max(0,Math.min(D,Se)),Pe=Math.max(0,Math.min(F,Pe)),Q===0||Q===D||fe===0||fe===F||Se===0||Se===D||Pe===0||Pe===F)return;var $e=function(at,et,Je,nt){var it=(v.initialPoints.start.x+v.initialPoints.end.x)/2,ht=(v.initialPoints.start.y+v.initialPoints.end.y)/2;j=(at+Je)/2-it,ne=(et+nt)/2-ht,le=Math.sqrt(j*j+ne*ne)/v.layer.viewport.scale};$e(Q,fe,Se,Pe);var Ie=function(){var at=v.svgElement.querySelector("[startLead]"),et=v.svgElement.querySelector("[startLeadExtension]"),Je={x:at.getAttribute("x2"),y:at.getAttribute("y2")},nt={x:et.getAttribute("x2"),y:et.getAttribute("y2")},it=function(wt,kt){return{x:kt.x-wt.x,y:kt.y-wt.y}},ht=function(wt,kt){return wt.x*kt.x+wt.y*kt.y},lt=it(v.initialPoints.start,Je),ft=it(v.initialPoints.start,nt),mt=it(v.initialPoints.start,{x:Q,y:fe}),Ct=ht(mt,lt),_t=ht(mt,ft);return Ct>_t?"toLead":_t>Ct?"toExtension":void 0}();Ie||(Ie=j>0?"toExtension":j<0||ne<0?"toLead":"toExtension"),Ie==="toExtension"?(this.annotation.leadExtension<=.1&&(this.initLeadExtension===.1||this.annotation.leadExtension!==.1||this.hasUpdatedInitialRect||(this.initialPoints={start:{x:Q,y:fe},end:{x:Se,y:Pe}},this.hasUpdatedInitialRect=!0,$e(Q,fe,Se,Pe)),this.annotation.leadLength=Math.max(this.initLeadLength+le,.1),this.initLeadExtension=.1),this.annotation.leadExtension=Math.max(this.initLeadExtension-le,.1)):Ie==="toLead"&&(this.annotation.leadLength<=.1&&(this.initLeadLength===.1||this.annotation.leadLength!==.1||this.hasUpdatedInitialRect||(this.initialPoints={start:{x:Q,y:fe},end:{x:Se,y:Pe}},this.hasUpdatedInitialRect=!0,$e(Q,fe,Se,Pe)),this.annotation.leadExtension=Math.max(this.initLeadExtension+le,.1),this.initLeadLength=.1),this.annotation.leadLength=Math.max(this.initLeadLength-le,.1)),this.update({start:{x:Q,y:fe},end:{x:Se,y:Pe}})}else if(P.operator==="end"){var Ne=w-(P.clickX-this.end.x),Be=x-(P.clickY-this.end.y);Ne=Math.min(D,Ne),Ne=Math.max(0,Ne),Be=Math.min(F,Be),Be=Math.max(0,Be),this.update({start:M,end:{x:Ne,y:Be}})}else if(P.operator==="move"){var be,Ve,De,ve,ye=this.layer.documentViewer,we=this.getMouseLocation(y),ke=ye.getSelectedPage(we,we);if(ke.first&&ke.first!==this.layer.page+1){var Me=ye.windowToPage(we,ke.first,!1),Le=Math.abs(M.x-E.x),Fe=Math.abs(M.y-E.y);if(ye.pdfViewer.spreadMode===0&&ye.pdfViewer.scrollMode===0)be=w-(P.clickX-this.start.x),Ve=ke.first>this.layer.page+1?Me.y:Me.y-Fe,De=w-(P.clickX-this.end.x),ve=ke.first>this.layer.page+1?Me.y+Fe:Me.y;else if(ye.pdfViewer.spreadMode===0&&ye.pdfViewer.scrollMode===1)be=ke.first>this.layer.page+1?Me.x:Me.x-Le,Ve=x-(P.clickY-this.start.y),De=ke.first>this.layer.page+1?Me.x+Le:Me.x,ve=x-(P.clickY-this.end.y);else if(ye.pdfViewer.spreadMode===1&&ye.pdfViewer.scrollMode===0){var ze=Math.min(ke.first,this.layer.page+1),te=Math.max(ke.first,this.layer.page+1);if(te-ze>2||ze+1===te&&ze%2==0)return;ze+1===te?(be=ke.first>this.layer.page+1?Me.x:Me.x-Le,Ve=x-(P.clickY-this.start.y),De=ke.first>this.layer.page+1?Me.x+Le:Me.x,ve=x-(P.clickY-this.end.y)):ze+2===te&&(be=w-(P.clickX-this.start.x),Ve=ke.first>this.layer.page+1?Me.y:Me.y-Fe,De=w-(P.clickX-this.end.x),ve=ke.first>this.layer.page+1?Me.y+Fe:Me.y)}else if(ye.pdfViewer.spreadMode===2&&ye.pdfViewer.scrollMode===0){var oe=Math.min(ke.first,this.layer.page+1),_e=Math.max(ke.first,this.layer.page+1);if(_e-oe>2||oe+1===_e&&(oe!==1||_e!==2)&&_e%2==0||oe===1&&_e===3)return;oe+2===_e||oe===1&&_e===2?(be=w-(P.clickX-this.start.x),Ve=ke.first>this.layer.page+1?Me.y:Me.y-Fe,De=w-(P.clickX-this.end.x),ve=ke.first>this.layer.page+1?Me.y+Fe:Me.y):oe+1===_e&&(be=ke.first>this.layer.page+1?Me.x:Me.x-Le,Ve=x-(P.clickY-this.start.y),De=ke.first>this.layer.page+1?Me.x+Le:Me.x,ve=x-(P.clickY-this.end.y))}this.layer=ye.pdfViewer._pages[ke.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{be=w-(P.clickX-this.start.x),Ve=x-(P.clickY-this.start.y),De=w-(P.clickX-this.end.x),ve=x-(P.clickY-this.end.y);var Ee=ye.pageToWindow({x:be,y:Ve},this.layer.page+1,!1),Te=ye.pageToWindow({x:De,y:ve},this.layer.page+1,!1),Re=0,Oe=0;x>P.clickY?Oe=(Oe=k.offsetHeight-(Te.y-k.scrollTop-k.offsetTop))<100?5:0:x<P.clickY&&(Oe=(Oe=Ee.y-k.scrollTop-k.offsetTop)<100?-5:0),w>P.clickX?Re=(Re=k.offsetWidth-(Te.x-k.scrollLeft-k.offsetLeft))<100?5:0:w<P.clickX&&(Re=(Re=Ee.x-k.scrollLeft-k.offsetLeft)<100?-5:0),(Re||Oe)&&(k.scrollTop+=Oe,k.scrollLeft+=Re);var je=this.annotation.leadLength*I,We=this.annotation.leadExtension*I,Ze=De-be,Xe=ve-Ve,Ge=Math.sqrt(Ze*Ze+Xe*Xe),Qe=Ze/Ge,rt=-(Xe/Ge),dt={x:be+rt*je,y:Ve+Qe*je},qe={x:De+rt*je,y:ve+Qe*je},He={x:be-rt*We,y:Ve-Qe*We},Ke={x:De-rt*We,y:ve-Qe*We},ot={width:Math.abs(M.x-E.x),height:Math.abs(M.y-E.y)};Math.min(dt.x,qe.x,He.x,Ke.x)<0||Math.max(dt.x,qe.x,He.x,Ke.x)>D?(be=M.x,De=E.x):be<De?(be=Math.max(0,be),be=Math.min(D-ot.width,be),De=Math.max(ot.width,De),De=Math.min(D,De)):(De=Math.max(0,De),De=Math.min(D-ot.width,De),be=Math.max(ot.width,be),be=Math.min(D,be)),Math.min(dt.y,qe.y,He.y,Ke.y)<0||Math.min(dt.y,qe.y,He.y,Ke.y)>F?(Ve=M.y,ve=E.y):Ve<ve?(Ve=Math.max(0,Ve),Ve=Math.min(F-ot.height,Ve),ve=Math.max(ot.height,ve),ve=Math.min(F,ve)):(ve=Math.max(0,ve),ve=Math.min(F-ot.height,ve),Ve=Math.max(ot.height,Ve),Ve=Math.min(F,Ve))}this.update({start:{x:be,y:Ve},end:{x:De,y:ve}})}P.clickX=w,P.clickY=x}}},{key:"handleDelete",value:function(y){this.layer.tool&&y&&y.stopPropagation(),this.delete();var v={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(v.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",v)}},{key:"delete",value:function(){var y;this.handleOutside(),(y=this.annotationContainer)===null||y===void 0||y.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleKeydown",value:function(y){}},{key:"handleMouseUp",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _,w,x,k,S,M,E,P,T,D,F,I,N,q;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(v.button===0||v.type!=="mouseup"){Y.next=2;break}return Y.abrupt("return");case 2:if(this.layer.tool&&v.stopPropagation(),v.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,this.initialPoints=null,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,_=this.annotation,w=this.getInitialPoint(),x=w.start,k=w.end,S=[x.x,x.y,k.x,k.y],_.linePoints=S,M=Math.min(x.x,k.x),E=Math.min(x.y,k.y),P=Math.max(x.x,k.x),T=Math.max(x.y,k.y),D={left:M-6,top:E-6,right:P+6,bottom:T+6},_.rect=D,this.annotation.measure&&this.showPopup(),_.pageIndex===this.layer.page){Y.next=42;break}return F={type:"delete",annotation:{operate:"del-annot",name:_.name,pageIndex:_.pageIndex,annotPtr:_.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",F),delete(I=Object.assign({},_)).annotPtr,delete I.pagePtr,delete I.name,I.operate="add-annot",I.pageIndex=this.layer.page,Y.next=34,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(I);case 34:return N=Y.sent,this.annotation=N[0],Y.next=38,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 38:this.annotationContainer.remove(),this.outerLineContainer.remove(),Y.next=45;break;case 42:return q={operate:"mod-annot",name:_.name,pageIndex:this.layer.page,pagePtr:_.pagePtr,annotPtr:_.annotPtr,linePoints:S,rect:D},Y.next=45,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(q);case 45:case"end":return Y.stop()}},y,this)})),function(y){return g.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"update",value:function(y){var v=y.start,_=y.end,w=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.start=v,this.end=_;var x,k,S,M,E,P=this.layer.viewport.scale,T=(this.annotation.borderWidth||2)*P,D=Math.max(3*T,10*P);if(this.annotation.measure){var F=this.annotation.leadLength*P,I=this.annotation.leadExtension*P,N=_.x-v.x,q=_.y-v.y,Y=Math.sqrt(N*N+q*q),Z=-(q/Y),j=N/Y;k={x:v.x+Z*F,y:v.y+j*F},S={x:_.x+Z*F,y:_.y+j*F},M={x:v.x-Z*I,y:v.y-j*I},E={x:_.x-Z*I,y:_.y-j*I};var ne=this.maxRect([k,S,M,E]);x={left:ne.left-D,top:ne.top-D,width:ne.width+2*D,height:ne.height+2*D}}else{var le=this.calculate(v,_);x={left:le.left-D,top:le.top-D,width:le.width+2*D,height:le.height+2*D}}this.rect=x;var J=this.rect;this.svgElement.setAttribute("width",J.width),this.svgElement.setAttribute("height",J.height),this.svgElement.setAttribute("viewBox","".concat(J.left," ").concat(J.top," ").concat(J.width," ").concat(J.height));var O=this.svgElement.querySelector("[mainLine]");O&&(O.setAttribute("x1",v.x),O.setAttribute("y1",v.y),O.setAttribute("x2",_.x),O.setAttribute("y2",_.y)),this.annotationContainer.style.top=J.top+"px",this.annotationContainer.style.left=J.left+"px",this.annotationContainer.style.width=J.width+"px",this.annotationContainer.style.height=J.height+"px";var U=this.annotation.measure?0:MARGIN_DISTANCE;if(this.outerLine.setAttribute("height",J.height),this.outerLine.setAttribute("viewBox","".concat(J.left," ").concat(J.top," ").concat(J.width+2*U," ").concat(J.height+2*U)),this.outerLine.style.left="".concat(J.left-U,"px"),this.outerLine.style.top="".concat(J.top-U,"px"),this.outerLine.style.width="".concat(J.width+2*U,"px"),this.outerLine.style.height="".concat(J.height+2*U,"px"),this.deletetButton&&(this.deletetButton.style.left=J.left+J.width+MARGIN_DISTANCE-30+"px",this.deletetButton.style.top=J.top-MARGIN_DISTANCE-30+"px"),this.replyButton&&(this.replyButton.style.left=J.left+J.width+MARGIN_DISTANCE-65+"px",this.replyButton.style.top=J.top-MARGIN_DISTANCE-30+"px"),this.annotation.measure){var W=this.annotation.leadLength>this.annotation.leadExtension;this.startCircle.setAttribute("cx",W?k.x:M.x),this.startCircle.setAttribute("cy",W?k.y:M.y),this.endCircle.setAttribute("cx",W?S.x:E.x),this.endCircle.setAttribute("cy",W?S.y:E.y)}else this.startCircle.setAttribute("cx",v.x+U),this.startCircle.setAttribute("cy",v.y+U),this.endCircle.setAttribute("cx",_.x+U),this.endCircle.setAttribute("cy",_.y+U);if(this.moveLine.setAttribute("x1",v.x+U),this.moveLine.setAttribute("y1",v.y+U),this.moveLine.setAttribute("x2",_.x+U),this.moveLine.setAttribute("y2",_.y+U),this.annotation.head||this.annotation.tail){var H=new ArrowHelper(v,_),X=this.annotation.measure?45:30,Q=(this.annotation.borderWidth||2)*P,fe=Math.max(3*Q,(this.annotation.measure?10:12)*P);if(this.annotation.head&&this.annotation.head==="OpenArrow"){var Se=this.svgElement.querySelector("[head]");if(Se){var Pe=H.getStartArrowPoints(X,fe),$e="";Pe&&Pe.forEach(function(be){$e.length>0&&($e+=" "),$e+="".concat(be.x,",").concat(be.y)}),$e.length>0&&Se.setAttribute("points",$e)}}if(this.annotation.tail&&this.annotation.tail==="OpenArrow"){var Ie=this.svgElement.querySelector("[tail]");if(Ie){var Ne=H.getEndArrowPoints(X,fe),Be="";Ne&&Ne.forEach(function(be){Be.length>0&&(Be+=" "),Be+="".concat(be.x,",").concat(be.y)}),Be.length>0&&Ie.setAttribute("points",Be)}}}this.annotation.measure&&w&&this.updateMeasure(v,_)}},{key:"updateMeasure",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function y(v,_){var w,x,k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be;return _regeneratorRuntime().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(!this.startState||this.startState.operator==="move"){Ve.next=12;break}return w=this.getInitialPoint(),x={left:Math.min(w.start.x,w.end.x),top:Math.min(w.start.y,w.end.y),right:Math.max(w.start.x,w.end.x),bottom:Math.max(w.start.y,w.end.y)},k=[w.start.x,w.start.y,w.end.x,w.end.y],S={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:x,linePoints:k},this.annotation.contents&&(S.contents=this.annotation.contents,S.labelPosition=this.annotation.labelPosition),this.annotation.rect=x,this.annotation.linePoints=k,Ve.next=10,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(S);case 10:return Ve.next=12,this.getMeasureData();case 12:if(!this.startState||this.startState.operator!=="middle"){Ve.next=17;break}return M={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,leadLength:this.annotation.leadLength,leadExtension:this.annotation.leadExtension,leadOffset:1-this.annotation.leadLength,contents:this.annotation.contents},this.annotation.leadOffset=1-this.annotation.leadLength,Ve.next=17,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(M);case 17:if(E=this.svgElement.querySelector("[startLine]"),P=this.svgElement.querySelector("[endLine]"),T=this.svgElement.querySelector("[startLead]"),D=this.svgElement.querySelector("[endLead]"),F=this.svgElement.querySelector("[startLeadExtension]"),I=this.svgElement.querySelector("[endLeadExtension]"),N={x:(v.x+_.x)/2,y:(v.y+_.y)/2},q=this.annotation.leadLength*this.layer.viewport.scale,Y=this.annotation.leadExtension*this.layer.viewport.scale,Z=_.x-v.x,j=_.y-v.y,ne=Math.sqrt(Z*Z+j*j),O=-(J=j/ne),U=le=Z/ne,E&&(W={x:v.x+le*(ne/2-this.textGap/2),y:v.y+J*(ne/2-this.textGap/2)},E.setAttribute("x1",v.x),E.setAttribute("y1",v.y),E.setAttribute("x2",W.x),E.setAttribute("y2",W.y)),P&&(H={x:v.x+le*(ne/2+this.textGap/2),y:v.y+J*(ne/2+this.textGap/2)},P.setAttribute("x1",H.x),P.setAttribute("y1",H.y),P.setAttribute("x2",_.x),P.setAttribute("y2",_.y)),T&&(X={x:v.x+O*q,y:v.y+U*q},T.setAttribute("x1",v.x),T.setAttribute("y1",v.y),T.setAttribute("x2",X.x),T.setAttribute("y2",X.y)),D&&(Q={x:_.x+O*q,y:_.y+U*q},D.setAttribute("x1",_.x),D.setAttribute("y1",_.y),D.setAttribute("x2",Q.x),D.setAttribute("y2",Q.y)),F&&(fe={x:v.x-O*Y,y:v.y-U*Y},F.setAttribute("x1",v.x),F.setAttribute("y1",v.y),F.setAttribute("x2",fe.x),F.setAttribute("y2",fe.y)),I&&(Se={x:_.x-O*Y,y:_.y-U*Y},I.setAttribute("x1",_.x),I.setAttribute("y1",_.y),I.setAttribute("x2",Se.x),I.setAttribute("y2",Se.y)),this.textEle&&(Pe=Math.atan2(_.y-v.y,_.x-v.x)/Math.PI*180,$e=Math.abs(Pe)>90?Pe-180:Pe,Ie=Math.abs(Pe)>90?180-Math.abs(Pe):Pe,Ne=1*Math.abs(Ie).toFixed(this.decimalPlaces),this.annotation.angle=Ne,this.textEle.setAttribute("x",N.x),this.textEle.setAttribute("y",N.y),this.textEle.setAttribute("transform","rotate(".concat($e," ").concat(N.x," ").concat(N.y,")"))),this.middleCircle.setAttribute("cx",N.x),this.middleCircle.setAttribute("cy",N.y),!this.startState||this.startState.operator!=="move"){Ve.next=44;break}return Ve.abrupt("return");case 44:this.textEle&&(this.textEle.textContent=this.annotation.contents),Be=(Math.abs(_.x-v.x)*this.annotation.factor).toFixed(this.decimalPlaces),be=(Math.abs(_.y-v.y)*this.annotation.factor).toFixed(this.decimalPlaces),this.annotation.X=Be,this.annotation.Y=be,this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.measureResult,angle:this.annotation.angle,X:Be,Y:be});case 50:case"end":return Ve.stop()}},y,this)})),function(y,v){return f.apply(this,arguments)})},{key:"handlePropertyPanel",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(_=this.annotation,this.layer.annotationStore.selectedElementName===_.name){k.next=3;break}return k.abrupt("return");case 3:w=0,k.t0=_regeneratorRuntime().keys(v);case 5:if((k.t1=k.t0()).done){k.next=13;break}return x=k.t1.value,k.t2=w,k.next=10,this.setCustomData(x,v[x],!0);case 10:w=k.t2+=k.sent,k.next=5;break;case 13:w>0&&this.sendData(v);case 14:case"end":return k.stop()}},y,this)})),function(y){return d.apply(this,arguments)})},{key:"setCustomData",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function y(v,_){var w,x,k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie=this,Ne=arguments;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:w=Ne.length>2&&Ne[2]!==void 0&&Ne[2],x=this.annotation,k=0,Be.t0=_regeneratorRuntime().keys(x);case 4:if((Be.t1=Be.t0()).done){Be.next=44;break}if((S=Be.t1.value)!==v||this.annotation[S]===_){Be.next=42;break}if(x[S]=_,k=1,v==="borderColor"&&["startLine","endLine","startLead","endLead","startLeadExtension","endLeadExtension","head","tail"].forEach(function(be){var Ve=Ie.svgElement.querySelector("[".concat(be,"]"));Ve&&Ve.setAttribute("stroke",_)}),v==="opacity"&&(this.svgElement.style.opacity=_),v==="borderWidth"&&(["startLine","endLine","startLead","endLead","startLeadExtension","endLeadExtension","head","tail"].forEach(function(be){var Ve=Ie.svgElement.querySelector("[".concat(be,"]"));Ve&&Ve.setAttribute("stroke-width",_)}),this.update({start:this.start,end:this.end},!1),this.showPopup()),v==="borderStyle"&&["startLine","endLine"].forEach(function(be){var Ve=Ie.svgElement.querySelector("[".concat(be,"]"));if(Ve&&_==="solid"&&Ve.setAttribute("stroke-dasharray",""),Ve&&_==="dashed"){var De="",ve=Math.ceil(Ie.ratio*Ie.layer.viewport.scale);x.dashes.length===1||x.dashes.length===2&&x.dashes[0]===x.dashes[1]?De=Math.ceil(x.dashes[0]*ve)+"":x.dashes.length>2&&(De=x.dashes.map(function(ye){return Math.ceil(ye*ve)}).join(", ")),Ve.setAttribute("stroke-dasharray",De)}}),v==="dashes"&&["startLine","endLine"].forEach(function(be){var Ve=Ie.svgElement.querySelector("[".concat(be,"]"));Ve&&Ve.setAttribute("stroke-dasharray",Math.ceil(_[0]*Ie.ratio*Ie.layer.viewport.scale))}),v==="head"&&((M=this.svgElement.querySelector("[head]"))?M.style.display=_?"":"none":_&&(E=(x.borderWidth||2)*this.layer.viewport.scale,P=Math.max(3*E,(x.measure?10:12)*this.layer.viewport.scale),T=new ArrowHelper(this.start,this.end),(D=T.getStartArrow(45,P))&&(D.setAttribute("head",""),D.setAttribute("stroke",x.borderColor),D.setAttribute("stroke-width",E),D.setAttribute("fill","none"),this.svgElement.append(D)))),v==="tail"&&((F=this.svgElement.querySelector("[tail]"))?F.style.display=_?"":"none":_&&(I=(x.borderWidth||2)*this.layer.viewport.scale,N=Math.max(3*I,(x.measure?10:12)*this.layer.viewport.scale),q=new ArrowHelper(this.start,this.end),(Y=q.getEndArrow(45,N))&&(Y.setAttribute("tail",""),Y.setAttribute("stroke",x.borderColor),Y.setAttribute("stroke-width",I),Y.setAttribute("fill","none"),this.svgElement.append(Y)))),v==="color"&&this.textEle.setAttribute("fill",_),v==="fontSize"&&this.textEle.setAttribute("font-size",_),v==="fontName"&&(this.textEle.style.fontFamily=_),v==="fontStyle"&&((Z=_)==="boldItalic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!0):Z==="bold"?(this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!1):Z==="italic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="normal",x.isBold=!1,x.isItalic=!0):(x.isItalic=!1,x.isBold=!1,this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="normal")),v==="contents"&&(this.textEle.textContent=_),v!=="scale"&&v!=="precision"){Be.next=41;break}return v==="precision"&&(this.decimalPlaces=((j=Math.abs(x.precision).toString().split(".")[1])===null||j===void 0?void 0:j.length)||0),Be.next=25,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1({rulerPtr:x.rulerPtr},v,_));case 25:return Be.next=27,this.getMeasureData();case 27:return Be.next=29,this.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:x.annotPtr,contents:x.contents});case 29:return Be.next=31,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",x.rulerPtr);case 31:ne=Be.sent,le=(Math.abs(this.end.x-this.start.x)*ne).toFixed(this.decimalPlaces),J=(Math.abs(this.end.y-this.start.y)*ne).toFixed(this.decimalPlaces),x.factor=ne,x.X=le,x.Y=J,this.textEle&&(this.textEle.textContent=x.contents),this.layer.annotationStore.selectedElementName!==this.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:_,length:x.measureResult,X:le,Y:J}),k=0;case 41:["fontSize","scale","precision","contents"].includes(v)&&(O=this.svgElement.querySelector("[startLine]"),U=this.svgElement.querySelector("[endLine]"),W=this.end.x-this.start.x,H=this.end.y-this.start.y,X=Math.sqrt(W*W+H*H),Q=W/X,fe=H/X,Se=this.getTextWidth(),O&&(Pe={x:this.start.x+Q*(X/2-Se/2),y:this.start.y+fe*(X/2-Se/2)},O.setAttribute("x1",this.start.x),O.setAttribute("y1",this.start.y),O.setAttribute("x2",Pe.x),O.setAttribute("y2",Pe.y)),U&&($e={x:this.start.x+Q*(X/2+Se/2),y:this.start.y+fe*(X/2+Se/2)},U.setAttribute("x1",$e.x),U.setAttribute("y1",$e.y),U.setAttribute("x2",this.end.x),U.setAttribute("y2",this.end.y)));case 42:Be.next=4;break;case 44:return!w&&this.sendData(_defineProperty$1({},v,_)),Be.abrupt("return",k);case 46:case"end":return Be.stop()}},y,this)})),function(y,v){return u.apply(this,arguments)})},{key:"sendData",value:function(y){var v=this.annotation,_={pagePtr:v.pagePtr,annotPtr:v.annotPtr,rulerPtr:v.rulerPtr,pageIndex:v.pageIndex,contents:v.contents};if(["fontSize","fontName","color","fontStyle"].some(function(S){return y[S]})){_.fontSize=v.fontSize,_.color=v.color;var w={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=v.fontName;v.isBold&&v.isItalic?_.fontName=w[x].boldItalic:v.isBold?_.fontName=w[x].bold:v.isItalic?_.fontName=w[x].italic:_.fontName=w[x]?w[x].normal:x,delete y.fontName}(y.hasOwnProperty("head")||y.hasOwnProperty("tail"))&&(_.head=v.head,_.tail=v.tail,delete y.head,delete y.tail),y.dashes&&(_.borderStyle=v.borderStyle,_.borderWidth=v.borderWidth),y.borderStyle&&(_.dashes=y.borderStyle==="solid"?[]:v.dashes,_.borderWidth=v.borderWidth);var k=Object.assign({},_,y);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(k)}},{key:"getMeasureData",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var v,_,w,x,k;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return v=this.annotation,_=v.annotPtr,w=v.rulerPtr,S.next=3,this.layer.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{annotPtr:_,rulerPtr:w});case 3:x=S.sent,k=this.formatValue(x),this.annotation.measureResult=k,this.annotation.contents=k+this.annotation.scale.translateUnit;case 7:case"end":return S.stop()}},y,this)})),function(){return s.apply(this,arguments)})},{key:"showPopup",value:function(){var y=this.layer.div.getBoundingClientRect(),v=y.left+this.rect.left,_=this.rect.top+y.top,w={left:v,top:_,right:v+this.rect.width,bottom:_+this.rect.height};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:w}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:v==="delete"&&this.handleDelete(),v==="reply"&&this.openReply();case 2:case"end":return _.stop()}},y,this)})),function(y){return o.apply(this,arguments)})},{key:"formatValue",value:function(y){return y%1==0?y:Number(y.toFixed(this.decimalPlaces))}},{key:"getTextWidth",value:function(){var y=document.createElement("canvas").getContext("2d");y.font="".concat(this.annotation.fontSize,"px ").concat(this.annotation.fontFamily);var v=1.1*y.measureText(this.annotation.contents).width,_=this.end.x-this.start.x,w=this.end.y-this.start.y,x=Math.sqrt(_*_+w*w);return this.textGap=x>v?v:x,this.textGap}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(v.target.tagName!=="INPUT"&&v.target.tagName!=="TEXTAREA"){w.next=2;break}return w.abrupt("return");case 2:(_=v.keyCode||v.which)!==8&&_!==46||this.handleDelete();case 4:case"end":return w.stop()}},y,this)})),function(y){return r.apply(this,arguments)})}]);var r,o,s,u,d,f,g,m}(),Shape$1=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.show,f=d!==void 0&&d,g=r.enableReply,m=g===void 0||g;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).enableReply=m,o.hidden=!0,o.initial=!1,o.start=null,o.end=null,o.newStart=null,o.newEnd=null,o.svgElement=null,o.startCircle=null,o.endCircle=null,o.show=f,o.onMousedown=o.handleMouseDown.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var r=this.annotation,o=this.getActualRect(this.layer.viewport.scale),s=o.start,u=o.end;this.start=s,this.end=u;var d=this.calculate(s,u),f=(r.borderWidth||2)*this.layer.viewport.scale;r.borderColor||(r.borderColor=r.color||"#000000");var g,m=document.createElement("div");m.id=r.name,m.className="annotation",m.style.top=d.top+"px",m.style.left=d.left+"px",m.style.width=d.width+"px",m.style.height=d.height+"px",this.annotationContainer=m,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","0 0 ".concat(d.width," ").concat(d.height)),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),g=r.type==="square"?createSvg("rect",{x:f/2,y:f/2,width:"".concat(Math.abs(d.width-f),"px"),height:"".concat(Math.abs(d.height-f),"px"),stroke:r.borderColor,"stroke-width":f,"stroke-opacity":r.opacity||1,fill:r.fillColor?r.fillColor:"none","fill-opacity":r.opacity||1}):createSvg("ellipse",{cx:d.width/2,cy:d.height/2,rx:(d.width-f)/2,ry:(d.height-f)/2,stroke:r.borderColor,"stroke-width":f,"stroke-opacity":r.opacity||1,fill:r.fillColor?r.fillColor:"none","fill-opacity":r.opacity||1}),this.shapeElement=g,this.svgElement.append(this.shapeElement),this.annotationContainer.append(this.svgElement),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.deletetButton.style.left=d.left+d.width-30+"px",this.deletetButton.style.top=d.top+d.height+8+"px",this.replyButton=createElement("div",{width:"30px",height:"30px",background:"#DDE9FF",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.replyButton.style.left=d.left+d.width-65+"px",this.replyButton.style.top=d.top+d.height+8+"px";var y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.style.position="absolute",y.style.zIndex=1,y.style.left="".concat(d.left-7,"px"),y.style.top="".concat(d.top-7,"px"),y.style.width="".concat(d.width+14,"px"),y.style.height="".concat(d.height+14,"px"),this.outerLine=y,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:d.width+8,height:d.height+8,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:d.height/2+4}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:d.height+8}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:d.width/2+4,y:d.height+8}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:d.width+8,y:d.height+8}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:d.width+8,y:d.height/2+4}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:d.width+8,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:d.width/2+4,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine);var v=this.layer.documentViewer.isAnnotationPopup;v&&this.outerLineContainer.append(this.deletetButton),v&&this.enableReply&&this.outerLineContainer.append(this.replyButton),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,s=o.left,u=o.top,d=o.right,f=o.bottom;return{start:getActualPoint({x:s,y:u},r),end:getActualPoint({x:d,y:f},r)}}},{key:"rectCalc",value:function(r){var o=r.start,s=r.end;return{top:o.y<s.y?o.y:s.y,left:o.x<s.x?o.x:s.x,width:Math.abs(s.x-o.x),height:Math.abs(s.y-o.y)}}},{key:"calculate",value:function(r,o){var s=this.rectCalc({start:r,end:o}),u=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:s.top-u,left:s.left-u,width:s.width+2*u,height:s.height+2*u}}},{key:"getInitialPoint",value:function(){var r=this.layer.viewport.scale;return{start:{x:this.start.x/r,y:this.start.y/r},end:{x:this.end.x/r,y:this.end.y/r}}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(r){!this.hidden||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)||(this.hidden=!1,this.updateTool(),onClickOutside([this.svgElement,this.outerLine,this.deletetButton,this.replyButton,document.querySelector(".toggle-button")],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){var r,o,s;this.hidden=!0,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(s=this.outerLineContainer)===null||s===void 0||s.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation();var o=r.target.getAttribute("data-id"),s=this.layer.documentViewer.getScrollViewElement();this.scrollTop=s.scrollTop,this.scrollLeft=s.scrollLeft;var u=getClickPoint(r),d=u.pageX,f=u.pageY;this.startState={operator:o,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(Ve){return Ve.preventDefault()}),this.moving=!0;var o=getClickPoint(r),s=o.pageX,u=o.pageY,d=this.layer.documentViewer.getScrollViewElement(),f=d.scrollTop;s=s+d.scrollLeft-this.scrollLeft,u=u+f-this.scrollTop;var g=this.start,m=this.end,y=this.startState,v=this.layer.viewport,_=v.width,w=v.height;if(y.operator==="nw-resize"){var x=s-(y.clickX-this.start.x),k=u-(y.clickY-this.start.y);x=Math.min(m.x-5,x),x=Math.max(0,x),k=Math.min(m.y-5,k),k=Math.max(0,k),this.update({start:{x,y:k},end:m})}else if(y.operator==="w-resize"){var S=s-(y.clickX-this.start.x);S=Math.min(m.x-5,S),S=Math.max(0,S),this.update({start:{x:S,y:g.y},end:m})}else if(y.operator==="sw-resize"){var M=s-(y.clickX-this.start.x),E=u-(y.clickY-this.end.y);M=Math.min(m.x-5,M),M=Math.max(0,M),E=Math.min(w,E),E=Math.max(g.y+5,E),this.update({start:{x:M,y:g.y},end:{x:m.x,y:E}})}else if(y.operator==="s-resize"){var P=u-(y.clickY-this.end.y);P=Math.min(w,P),P=Math.max(g.y+5,P),this.update({start:g,end:{x:m.x,y:P}})}else if(y.operator==="se-resize"){var T=s-(y.clickX-this.end.x),D=u-(y.clickY-this.end.y);T=Math.min(_,T),T=Math.max(g.x+5,T),D=Math.min(w,D),D=Math.max(g.y+5,D),this.update({start:g,end:{x:T,y:D}})}else if(y.operator==="e-resize"){var F=s-(y.clickX-this.end.x);F=Math.min(_,F),F=Math.max(g.x+5,F),this.update({start:g,end:{x:F,y:m.y}})}else if(y.operator==="ne-resize"){var I=s-(y.clickX-this.end.x),N=u-(y.clickY-this.start.y);I=Math.min(_,I),I=Math.max(g.x+5,I),N=Math.min(m.y-5,N),N=Math.max(0,N),this.update({start:{x:g.x,y:N},end:{x:I,y:m.y}})}else if(y.operator==="n-resize"){var q=u-(y.clickY-this.start.y);q=Math.min(m.y-5,q),q=Math.max(0,q),this.update({start:{x:g.x,y:q},end:m})}else if(y.operator==="move"){var Y,Z,j,ne,le=this.layer.documentViewer,J=this.getMouseLocation(r),O=le.getSelectedPage(J,J);if(O.first&&O.first!==this.layer.page+1){var U=le.windowToPage(J,O.first,!1),W=Math.abs(g.x-m.x),H=Math.abs(g.y-m.y);if(le.pdfViewer.spreadMode===0&&le.pdfViewer.scrollMode===0)Y=s-(y.clickX-this.start.x),Z=O.first>this.layer.page+1?U.y:U.y-H,j=s-(y.clickX-this.end.x),ne=O.first>this.layer.page+1?U.y+H:U.y;else if(le.pdfViewer.spreadMode===0&&le.pdfViewer.scrollMode===1)Y=O.first>this.layer.page+1?U.x:U.x-W,Z=u-(y.clickY-this.start.y),j=O.first>this.layer.page+1?U.x+W:U.x,ne=u-(y.clickY-this.end.y);else if(le.pdfViewer.spreadMode===1&&le.pdfViewer.scrollMode===0){var X=Math.min(O.first,this.layer.page+1),Q=Math.max(O.first,this.layer.page+1);if(Q-X>2||X+1===Q&&X%2==0)return;X+1===Q?(Y=O.first>this.layer.page+1?U.x:U.x-W,Z=u-(y.clickY-this.start.y),j=O.first>this.layer.page+1?U.x+W:U.x,ne=u-(y.clickY-this.end.y)):X+2===Q&&(Y=s-(y.clickX-this.start.x),Z=O.first>this.layer.page+1?U.y:U.y-H,j=s-(y.clickX-this.end.x),ne=O.first>this.layer.page+1?U.y+H:U.y)}else if(le.pdfViewer.spreadMode===2&&le.pdfViewer.scrollMode===0){var fe=Math.min(O.first,this.layer.page+1),Se=Math.max(O.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&(fe!==1||Se!==2)&&Se%2==0||fe===1&&Se===3)return;fe+2===Se||fe===1&&Se===2?(Y=s-(y.clickX-this.start.x),Z=O.first>this.layer.page+1?U.y:U.y-H,j=s-(y.clickX-this.end.x),ne=O.first>this.layer.page+1?U.y+H:U.y):fe+1===Se&&(Y=O.first>this.layer.page+1?U.x:U.x-W,Z=u-(y.clickY-this.start.y),j=O.first>this.layer.page+1?U.x+W:U.x,ne=u-(y.clickY-this.end.y))}this.layer=le.pdfViewer._pages[O.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Pe=this.layer.div;Pe.append(this.annotationContainer),Pe.append(this.outerLineContainer)}else{Z=u-(y.clickY-this.start.y),Y=s-(y.clickX-this.start.x),j=s-(y.clickX-this.end.x),ne=u-(y.clickY-this.end.y);var $e=le.pageToWindow({x:Y,y:Z},this.layer.page+1,!1),Ie=le.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Ne=0,Be=0;u>y.clickY?Be=(Be=d.offsetHeight-(Ie.y-d.scrollTop-d.offsetTop))<100?5:0:u<y.clickY&&(Be=(Be=$e.y-d.scrollTop-d.offsetTop)<100?-5:0),s>y.clickX?Ne=(Ne=d.offsetWidth-(Ie.x-d.scrollLeft-d.offsetLeft))<100?5:0:s<y.clickX&&(Ne=(Ne=$e.x-d.scrollLeft-d.offsetLeft)<100?-5:0),(Ne||Be)&&(d.scrollTop+=Be,d.scrollLeft+=Ne);var be={width:Math.abs(g.x-m.x),height:Math.abs(g.y-m.y)};Y<j?(Y=Math.max(0,Y),Y=Math.min(_-be.width,Y),j=Math.max(be.width,j),j=Math.min(_,j)):(j=Math.max(0,j),j=Math.min(_-be.width,j),Y=Math.max(be.width,Y),Y=Math.min(_,Y)),Z<ne?(Z=Math.max(0,Z),Z=Math.min(w-be.height,Z),ne=Math.max(be.height,ne),ne=Math.min(w,ne)):(ne=Math.max(0,ne),ne=Math.min(w-be.height,ne),Z=Math.max(be.height,Z),Z=Math.min(w,Z))}this.update({start:{x:Y,y:Z},end:{x:j,y:ne}})}y.clickX=s,y.clickY=u}}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var o=this.annotation,s=this.getInitialPoint(),u=s.start,d=s.end,f={left:u.x,top:u.y,right:d.x,bottom:d.y};if(f!==o.rect||o.pageIndex!==this.layer.page)if(o.rect=f,o.pageIndex!==this.layer.page){var g={type:"delete",annotation:{operate:"del-annot",name:o.name,pageIndex:o.pageIndex,annotPtr:o.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",g);var m=Object.assign({},o);delete m.annotPtr,delete m.pagePtr,delete m.name,m.operate="add-annot",m.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:m}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else{var y={operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr,rect:f};!o.annotPtr&&(y.linePoints=[f.left,f.bottom,f.right,f.top]),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:y})}}}},{key:"update",value:function(r){var o=r.start,s=r.end,u=this.calculate(o,s);this.start=o,this.end=s;var d=(this.annotation.borderWidth||2)*this.layer.viewport.scale;this.annotationContainer.style.top=u.top+"px",this.annotationContainer.style.left=u.left+"px",this.annotationContainer.style.width=u.width+"px",this.annotationContainer.style.height=u.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(u.width," ").concat(u.height)),this.annotation.type==="square"?(this.shapeElement.setAttribute("width",u.width-d),this.shapeElement.setAttribute("height",u.height-d)):(this.shapeElement.setAttribute("cx",u.width/2),this.shapeElement.setAttribute("cy",u.height/2),this.shapeElement.setAttribute("rx",(u.width-d)/2),this.shapeElement.setAttribute("ry",(u.height-d)/2)),this.outerLine.style.left="".concat(u.left-7,"px"),this.outerLine.style.top="".concat(u.top-7,"px"),this.outerLine.style.width="".concat(u.width+14,"px"),this.outerLine.style.height="".concat(u.height+14,"px"),this.deletetButton.style.left=u.left+u.width-30+"px",this.deletetButton.style.top=u.top+u.height+8+"px",this.replyButton.style.left=u.left+u.width-65+"px",this.replyButton.style.top=u.top+u.height+8+"px",this.moveRect.setAttribute("width",u.width+8),this.moveRect.setAttribute("height",u.height+8),this.LeftRect.setAttribute("y",u.height/2+4),this.bottomLeftRect.setAttribute("y",u.height+8),this.bottomRect.setAttribute("x",u.width/2+4),this.bottomRect.setAttribute("y",u.height+8),this.bottomRightRect.setAttribute("x",u.width+8),this.bottomRightRect.setAttribute("y",u.height+8),this.rightRect.setAttribute("x",u.width+8),this.rightRect.setAttribute("y",u.height/2+4),this.topRightRect.setAttribute("x",u.width+8),this.topRect.setAttribute("x",u.width/2+4)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}}])}(),Ink=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.show,f=d!==void 0&&d,g=r.enableReply,m=g===void 0||g;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).enableReply=m,o.hidden=!0,o.initial=!1,o.start=null,o.end=null,o.rect=null,o.newStart=null,o.newEnd=null,o.svgElement=null,o.startCircle=null,o.endCircle=null,o.startState=null,o.show=f,o.onMousedown=o.handleMouseDown.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.onKeydown=o.handleKeydown.bind(o),o.inkPath=[],o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"formatePoint",value:function(r,o){var s=getActualPoint({x:r,y:o},this.layer.viewport.scale);return[s.x,s.y]}},{key:"rectCalc",value:function(r){var o=r.start,s=r.end;return{top:o.y<s.y?o.y:s.y,left:o.x<s.x?o.x:s.x,width:Math.abs(s.x-o.x),height:Math.abs(s.y-o.y)}}},{key:"calculate",value:function(r,o){var s=this.rectCalc({start:r,end:o});return{top:s.top,left:s.left,width:s.width,height:s.height}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(r){this.layer.tool&&r&&r.stopPropagation(),!this.hidden||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)||(this.hidden=!1,this.updateTool(),onClickOutside([this.svgElement,this.outerLine,this.deletetButton,this.replyButton,document.querySelector(".toggle-button")],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){var r,o,s;this.hidden=!0,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(s=this.outerLineContainer)===null||s===void 0||s.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation(),this.ratioRateX=this.rect.height/this.rect.width,this.ratioRateY=this.rect.width/this.rect.height;var o=r.target.getAttribute("data-id"),s=this.layer.documentViewer.getScrollViewElement();this.scrollTop=s.scrollTop,this.scrollLeft=s.scrollLeft;var u=getClickPoint(r),d=u.pageX,f=u.pageY;this.startState={operator:o,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(_e){return _e.preventDefault()}),this.moving=!0;var o=getClickPoint(r),s=o.pageX,u=o.pageY,d=this.layer.documentViewer.getScrollViewElement(),f=d.scrollTop;s=s+d.scrollLeft-this.scrollLeft,u=u+f-this.scrollTop;var g=this.start,m=this.end,y=this.startState,v=this.layer.viewport,_=v.width,w=v.height;if(y.operator==="nw-resize"){var x=s-(y.clickX-this.start.x),k=u-(y.clickY-this.start.y);if(x=Math.min(m.x-5,x),x=Math.max(0,x),k=Math.min(m.y-5,k),k=Math.max(0,k),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var S=(x-this.start.x)*this.ratioRateX;if((k=this.start.y+S)<0||x<0)return}this.update({start:{x,y:k},end:m})}else if(y.operator==="w-resize"){var M=s-(y.clickX-this.start.x);M=Math.min(m.x-5,M),M=Math.max(0,M);var E=g.y;if((r.shiftKey||r.type==="touchmove")&&(E=Math.max(w,E),E=Math.min(m.y-5,E),this.ratioRateX)){var P=(M-this.start.x)*this.ratioRateX;if((E=this.start.y+P)>=w||M<0)return}this.update({start:{x:M,y:E},end:m})}else if(y.operator==="sw-resize"){var T=s-(y.clickX-this.start.x),D=u-(y.clickY-this.end.y);if(T=Math.min(m.x-5,T),T=Math.max(0,T),D=Math.min(w,D),D=Math.max(g.y+5,D),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var F=(T-this.start.x)*this.ratioRateX;if((D=this.end.y-F)>=w||T<0)return}this.update({start:{x:T,y:g.y},end:{x:m.x,y:D}})}else if(y.operator==="s-resize"){var I=u-(y.clickY-this.end.y);if(I=Math.min(w,I),I=Math.max(g.y+5,I),r.shiftKey||r.type==="touchmove"){if(this.ratioRateX){var N=(I-this.end.y)*this.ratioRateY,q=this.end.x+N;if(q=Math.min(_,q),q=Math.max(g.x+5,q),I>=w||q>=_)return;this.update({start:g,end:{x:q,y:I}})}}else this.update({start:g,end:{x:m.x,y:I}})}else if(y.operator==="se-resize"){var Y=s-(y.clickX-this.end.x),Z=u-(y.clickY-this.end.y);if(Y=Math.min(_,Y),Y=Math.max(g.x+5,Y),Z=Math.min(w,Z),Z=Math.max(g.y+5,Z),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var j=(this.end.x-Y)*this.ratioRateX;if((Z=this.end.y-j)>=w||Y>=_)return}this.update({start:g,end:{x:Y,y:Z}})}else if(y.operator==="e-resize"){var ne=s-(y.clickX-this.end.x);if(ne=Math.min(_,ne),ne=Math.max(g.x+5,ne),r.shiftKey||r.type==="touchmove"){if(this.ratioRateX){var le=u-(y.clickY-this.end.y);le=Math.min(w,le),le=Math.max(g.y+5,le);var J=(this.end.x-ne)*this.ratioRateX;if((le=this.end.y-J)>=w||ne>=_)return;this.update({start:g,end:{x:ne,y:le}})}}else this.update({start:g,end:{x:ne,y:m.y}})}else if(y.operator==="ne-resize"){var O=s-(y.clickX-this.end.x),U=u-(y.clickY-this.start.y);if(O=Math.min(_,O),O=Math.max(g.x+5,O),U=Math.min(m.y-5,U),U=Math.max(0,U),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var W=(this.end.x-O)*this.ratioRateX;if((U=this.start.y+W)<=0||O>=_)return}this.update({start:{x:g.x,y:U},end:{x:O,y:m.y}})}else if(y.operator==="n-resize"){var H=u-(y.clickY-this.start.y);if(H=Math.min(m.y-5,H),H=Math.max(0,H),r.shiftKey||r.type==="touchmove"){if(this.ratioRateX){var X=(H-this.start.y)*this.ratioRateY,Q=this.end.x-X;if(Q=Math.min(_,Q),Q=Math.max(g.x+5,Q),H>=w||Q>=_)return;this.update({start:{x:g.x,y:H},end:{x:Q,y:m.y}})}}else this.update({start:{x:g.x,y:H},end:m})}else if(y.operator==="move"){var fe,Se,Pe,$e,Ie=this.layer.documentViewer,Ne=this.getMouseLocation(r),Be=Ie.getSelectedPage(Ne,Ne);if(Be.first&&Be.first!==this.layer.page+1){var be=Ie.windowToPage(Ne,Be.first,!1),Ve=Math.abs(g.x-m.x),De=Math.abs(g.y-m.y);if(Ie.pdfViewer.spreadMode===0&&Ie.pdfViewer.scrollMode===0)fe=s-(y.clickX-this.start.x),Se=Be.first>this.layer.page+1?be.y:be.y-De,Pe=s-(y.clickX-this.end.x),$e=Be.first>this.layer.page+1?be.y+De:be.y;else if(Ie.pdfViewer.spreadMode===0&&Ie.pdfViewer.scrollMode===1)fe=Be.first>this.layer.page+1?be.x:be.x-Ve,Se=u-(y.clickY-this.start.y),Pe=Be.first>this.layer.page+1?be.x+Ve:be.x,$e=u-(y.clickY-this.end.y);else if(Ie.pdfViewer.spreadMode===1&&Ie.pdfViewer.scrollMode===0){var ve=Math.min(Be.first,this.layer.page+1),ye=Math.max(Be.first,this.layer.page+1);if(ye-ve>2||ve+1===ye&&ve%2==0)return;ve+1===ye?(fe=Be.first>this.layer.page+1?be.x:be.x-Ve,Se=u-(y.clickY-this.start.y),Pe=Be.first>this.layer.page+1?be.x+Ve:be.x,$e=u-(y.clickY-this.end.y)):ve+2===ye&&(fe=s-(y.clickX-this.start.x),Se=Be.first>this.layer.page+1?be.y:be.y-De,Pe=s-(y.clickX-this.end.x),$e=Be.first>this.layer.page+1?be.y+De:be.y)}else if(Ie.pdfViewer.spreadMode===2&&Ie.pdfViewer.scrollMode===0){var we=Math.min(Be.first,this.layer.page+1),ke=Math.max(Be.first,this.layer.page+1);if(ke-we>2||we+1===ke&&(we!==1||ke!==2)&&ke%2==0||we===1&&ke===3)return;we+2===ke||we===1&&ke===2?(fe=s-(y.clickX-this.start.x),Se=Be.first>this.layer.page+1?be.y:be.y-De,Pe=s-(y.clickX-this.end.x),$e=Be.first>this.layer.page+1?be.y+De:be.y):we+1===ke&&(fe=Be.first>this.layer.page+1?be.x:be.x-Ve,Se=u-(y.clickY-this.start.y),Pe=Be.first>this.layer.page+1?be.x+Ve:be.x,$e=u-(y.clickY-this.end.y))}this.layer=Ie.pdfViewer._pages[Be.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Me=this.layer.div;Me.append(this.annotationContainer),Me.append(this.outerLineContainer)}else{fe=s-(y.clickX-g.x),Se=u-(y.clickY-g.y),Pe=s-(y.clickX-m.x),$e=u-(y.clickY-m.y);var Le=Ie.pageToWindow({x:fe,y:Se},this.layer.page+1,!1),Fe=Ie.pageToWindow({x:Pe,y:$e},this.layer.page+1,!1),ze=0,te=0;u>y.clickY?te=(te=d.offsetHeight-(Fe.y-d.scrollTop-d.offsetTop))<100?5:0:u<y.clickY&&(te=(te=Le.y-d.scrollTop-d.offsetTop)<100?-5:0),s>y.clickX?ze=(ze=d.offsetWidth-(Fe.x-d.scrollLeft-d.offsetLeft))<100?5:0:s<y.clickX&&(ze=(ze=Le.x-d.scrollLeft-d.offsetLeft)<100?-5:0),(ze||te)&&(d.scrollTop+=te,d.scrollLeft+=ze);var oe={width:Math.abs(g.x-m.x),height:Math.abs(g.y-m.y)};fe<Pe?(fe=Math.max(0,fe),fe=Math.min(_-oe.width,fe),Pe=Math.max(oe.width,Pe),Pe=Math.min(_,Pe)):(Pe=Math.max(0,Pe),Pe=Math.min(_-oe.width,Pe),fe=Math.max(oe.width,fe),fe=Math.min(_,fe)),Se<$e?(Se=Math.max(0,Se),Se=Math.min(w-oe.height,Se),$e=Math.max(oe.height,$e),$e=Math.min(w,$e)):($e=Math.max(0,$e),$e=Math.min(w-oe.height,$e),Se=Math.max(oe.height,Se),Se=Math.min(w,Se))}this.update({start:{x:fe,y:Se},end:{x:Pe,y:$e}})}y.clickX=s,y.clickY=u}}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleKeydown",value:function(r){}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,this.startState=null;var o=getInitialPoint(this.start,this.layer.viewport.scale),s=getInitialPoint(this.end,this.layer.viewport.scale),u={left:o.x,top:o.y,right:s.x,bottom:s.y},d=this.annotation;if(u!==d.rect||d.pageIndex!==this.layer.page){d.rect=u;for(var f=[],g=0;g<this.inkPath.length;g++){for(var m=[],y=0;y<this.inkPath[g].length;y++)m.push({PointX:this.inkPath[g][y].x/this.layer.viewport.scale+o.x,PointY:o.y+this.inkPath[g][y].y/this.layer.viewport.scale});f.push(m)}if(d.inkPointes=f,d.pageIndex!==this.layer.page){var v={type:"delete",annotation:{operate:"del-annot",name:d.name,pageIndex:d.pageIndex,annotPtr:d.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",v);var _=Object.assign({},d);delete _.annotPtr,delete _.pagePtr,delete _.name,_.operate="add-annot",_.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:_}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,inkPointes:f,rect:u}})}}}},{key:"handlePoint",value:function(r){var o=this.rect,s=getInitialPoint({x:r[0]+o.left,y:r[1]+o.top},this.layer.viewport.scale);return s.x+","+s.y}},{key:"update",value:function(r){var o=r.start,s=r.end,u=this.calculate(o,s);if(this.startState&&this.startState.operator!=="move")for(var d=u.width/this.rect.width,f=u.height/this.rect.height,g=0;g<this.inkPath.length;g++)for(var m=0;m<this.inkPath[g].length;m++)this.inkPath[g][m].x=d*this.inkPath[g][m].x,this.inkPath[g][m].y=f*this.inkPath[g][m].y;this.rect=u,this.start=o,this.end=s;var y=this.annotation,v=this.annotation.borderWidth*this.layer.viewport.scale;this.annotationContainer.style.top=u.top-v+"px",this.annotationContainer.style.left=u.left-v+"px",this.annotationContainer.style.width=u.width+2*v+"px",this.annotationContainer.style.height=u.height+2*v+"px",this.svgElement.setAttribute("viewBox","".concat(-v," ").concat(-v," ").concat(u.width+2*v," ").concat(u.height+2*v)),this.svgElement.innerHTML="";for(var _=0;_<this.inkPath.length;_++)if(this.inkPath[_].length>1){for(var w=document.createElementNS("http://www.w3.org/2000/svg","path"),x="M "+this.inkPath[_][0].x.toFixed(2)+" "+this.inkPath[_][0].y.toFixed(2),k=1;k<this.inkPath[_].length;k++)x=x+" L "+this.inkPath[_][k].x.toFixed(2)+" "+this.inkPath[_][k].y.toFixed(2);if(w.setAttribute("d",x),w.setAttribute("stroke",y.borderColor),w.setAttribute("stroke-width",v),w.setAttribute("stroke-opacity",y.opacity||1),w.setAttribute("fill","none"),w.setAttribute("fill-opacity",0),v<5){var S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("d",x),S.setAttribute("stroke",y.borderColor),S.setAttribute("stroke-width",v<5?5:v),S.setAttribute("stroke-opacity",0),S.setAttribute("fill","none"),S.setAttribute("fill-opacity",0),w.style.pointerEvents="none",this.svgElement.append(S)}this.svgElement.append(w)}else if(this.inkPath[_].length==1){var M=document.createElementNS("http://www.w3.org/2000/svg","circle");M.setAttribute("cx",this.inkPath[_][0].x.toFixed(2)),M.setAttribute("cy",this.inkPath[_][0].y.toFixed(2)),M.setAttribute("r",v/2),M.setAttribute("fill",y.borderColor),this.svgElement.append(M)}this.outerLine.style.left="".concat(u.left-7,"px"),this.outerLine.style.top="".concat(u.top-7,"px"),this.outerLine.style.width="".concat(u.width+14,"px"),this.outerLine.style.height="".concat(u.height+14,"px"),this.deletetButton.style.left=u.left+u.width-30+"px",this.deletetButton.style.top=u.top+u.height+8+"px",this.replyButton.style.left=u.left+u.width-65+"px",this.replyButton.style.top=u.top+u.height+8+"px",this.moveRect.setAttribute("width",u.width+8),this.moveRect.setAttribute("height",u.height+8),this.LeftRect.setAttribute("y",u.height/2+4),this.bottomLeftRect.setAttribute("y",u.height+8),this.bottomRect.setAttribute("x",u.width/2+4),this.bottomRect.setAttribute("y",u.height+8),this.bottomRightRect.setAttribute("x",u.width+8),this.bottomRightRect.setAttribute("y",u.height+8),this.rightRect.setAttribute("x",u.width+8),this.rightRect.setAttribute("y",u.height/2+4),this.topRightRect.setAttribute("x",u.width+8),this.topRect.setAttribute("x",u.width/2+4)}},{key:"render",value:function(){var r=this.annotation,o=r.rect,s=o.left,u=o.top,d=o.right,f=o.bottom;s=parseFloat(s*this.layer.viewport.scale),f=parseFloat(f*this.layer.viewport.scale),d=parseFloat(d*this.layer.viewport.scale);var g={left:s,top:u=parseFloat(u*this.layer.viewport.scale),bottom:f,right:d,width:d-s,height:f-u};this.rect=g,this.start={x:g.left,y:g.top},this.end={x:g.right,y:g.bottom},r.borderColor||(r.borderColor="#000000");for(var m=r.inkPointes,y=0;y<m.length;y++){for(var v=m[y],_=[],w=0;w<v.length;w++){var x=v[w],k=this.formatePoint(parseFloat(x.PointX),parseFloat(x.PointY));_.push({x:parseFloat(k[0].toFixed(2))-this.rect.left,y:parseFloat(k[1].toFixed(2))-this.rect.top})}_.length>0&&this.inkPath.push(_)}var S=this.annotation.borderWidth*this.layer.viewport.scale,M=document.createElement("div");M.id=r.name,M.className="annotation",M.style.top=g.top-S+"px",M.style.left=g.left-S+"px",M.style.width=g.width+2*S+"px",M.style.height=g.height+2*S+"px",this.annotationContainer=M,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(-S," ").concat(-S," ").concat(g.width+2*S," ").concat(g.height+2*S)),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this));for(var E=0;E<this.inkPath.length;E++)if(this.inkPath[E].length>1){for(var P=document.createElementNS("http://www.w3.org/2000/svg","path"),T="M "+this.inkPath[E][0].x.toFixed(2)+" "+this.inkPath[E][0].y.toFixed(2),D=1;D<this.inkPath[E].length;D++)T=T+" L "+this.inkPath[E][D].x.toFixed(2)+" "+this.inkPath[E][D].y.toFixed(2);if(P.setAttribute("d",T),P.setAttribute("stroke",r.borderColor),P.setAttribute("stroke-width",S),P.setAttribute("stroke-opacity",r.opacity||1),P.setAttribute("fill","none"),P.setAttribute("fill-opacity",0),S<5){var F=document.createElementNS("http://www.w3.org/2000/svg","path");F.setAttribute("d",T),F.setAttribute("stroke",r.borderColor),F.setAttribute("stroke-width",S<5?5:S),F.setAttribute("stroke-opacity",0),F.setAttribute("fill","none"),F.setAttribute("fill-opacity",0),P.style.pointerEvents="none",this.svgElement.append(F)}this.svgElement.append(P)}else if(this.inkPath[E].length==1){var I=document.createElementNS("http://www.w3.org/2000/svg","circle");I.setAttribute("cx",this.inkPath[E][0].x.toFixed(2)),I.setAttribute("cy",this.inkPath[E][0].y.toFixed(2)),I.setAttribute("r",S/2),I.setAttribute("fill",r.borderColor),this.svgElement.append(I)}this.annotationContainer.append(this.svgElement),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var N=g.left+g.width-30+"px",q=g.top+g.height+8+"px";this.deletetButton.style.left=N,this.deletetButton.style.top=q,this.replyButton=createElement("div",{width:"30px",height:"30px",background:"#DDE9FF",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.replyButton.style.left=g.left+g.width-65+"px",this.replyButton.style.top=g.top+g.height+8+"px";var Y=document.createElementNS("http://www.w3.org/2000/svg","svg");Y.style.position="absolute",Y.style.zIndex=1,Y.style.left="".concat(g.left-7,"px"),Y.style.top="".concat(g.top-7,"px"),Y.style.width="".concat(g.width+14,"px"),Y.style.height="".concat(g.height+14,"px"),this.outerLine=Y,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:g.width+8,height:g.height+8,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:g.height/2+4}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:g.height+8}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:g.width/2+4,y:g.height+8}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:g.width+8,y:g.height+8}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:g.width+8,y:g.height/2+4}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:g.width+8,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:g.width/2+4,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine);var Z=this.layer.documentViewer.isAnnotationPopup;Z&&this.outerLineContainer.append(this.deletetButton),Z&&this.enableReply&&this.outerLineContainer.append(this.replyButton),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}}])}(),Freetext$1=function(e){function n(r){var o,s=r.annotation,u=s===void 0?null:s,d=r.layer,f=r.show,g=f!==void 0&&f,m=r.enableReply,y=m===void 0||m;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:d}])).enableReply=y,o.hidden=!0,o.initial=!1,o.leftTop=null,o.rightBottom=null,o.newLeftTop=null,o.newRightBottom=null,o.startCircle=null,o.endCircle=null,o.show=g,o.onContainerClick=o.handleContainerClick.bind(o),o.onMousedown=o.handleMouseDown.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.onBlur=o.handleFreetextEditElementBlur.bind(o),o.onDbclick=o.handleElementDbClick.bind(o),o.handleStopPropagation=o.handleStopPropagation.bind(o),o.onPaste=o.handleFreetextEditElementPaste.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"setCss",value:function(r,o){if(r&&o)for(var s in o)r.style[s]=o[s]}},{key:"render",value:function(){var r=this.layer.viewport,o=r.width,s=r.height,u=this.annotation,d=this.getActualRect(this.layer.viewport.scale),f=d.leftTop,g=d.rightBottom;this.initialRect={width:Math.abs(f.x-g.x),height:Math.abs(f.y-g.y)},this.leftTop=f,this.rightBottom=g;var m=this.calculate(this.leftTop,this.rightBottom);u.color||(u.color="#000000"),u.fontSize||(u.fontSize=16);var y=document.createElement("div");y.className="annotation",this.setCss(y,{top:m.top-2+"px",left:m.left-4+"px"}),this.annotationContainer=y;var v=document.createElement("div");v.setAttribute("role","textbox"),v.setAttribute("contenteditable",!0),v.setAttribute("spellcheck",!1),v.className="freetext";var _=o-this.leftTop.x,w=s-this.leftTop.y,x=u.textAlignment||"left";this.setCss(v,{maxWidth:_+"px",maxHeight:w+"px",fontSize:u.fontSize+"px",color:u.color,textAlign:x,lineHeight:"1.2em",padding:"2px 4px",overflow:"auto",backgroundColor:u.bgColor?u.bgColor:"transparent","-webkit-user-select":"text"}),this.freetextEditElement=v;var k=document.createElement("div");if(k.className="freetext",this.setCss(k,{width:m.width+"px",height:m.height+"px",color:u.color,fontSize:u.fontSize+"px",textAlign:x,lineHeight:"1.2em",padding:"2px 4px",overflow:"hidden",backgroundColor:u.bgColor?u.bgColor:"transparent"}),u.contents)k.innerHTML=u.contents,v.innerHTML=u.contents;else if(u["contents-richtext"]){var S=new window.DOMParser().parseFromString(u["contents-richtext"],"text/xml");S.getElementsByTagName("parsererror").length>0?(k.innerHTML=u["contents-richtext"],v.innerHTML=u["contents-richtext"]):(k.innerHTML=S.firstElementChild.innerText,v.innerHTML=S.firstElementChild.innerText)}this.freetextElement=k,this.appendOrRemoveFreetextElement("append"),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.deletetButton.style.left=m.left+m.width-30+"px",this.deletetButton.style.top=m.top+m.height+12+"px",this.replyButton=createElement("div",{width:"30px",height:"30px",background:"#DDE9FF",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.replyButton.style.left=m.left+m.width-65+"px",this.replyButton.style.top=m.top+m.height+12+"px";var M=createSvg("svg",null,{position:"absolute",zIndex:1,left:"".concat(m.left-12,"px"),top:"".concat(m.top-9,"px"),width:"".concat(m.width+16,"px"),height:"".concat(m.height+15,"px")});this.outerLine=M,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:m.width+10,height:m.height+9,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:m.height/2+4}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:m.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width/2+5,y:m.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width+10,y:m.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width+10,y:m.height/2+4}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width+10,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:m.width/2+5,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine);var E=this.layer.documentViewer.isAnnotationPopup;E&&this.outerLineContainer.append(this.deletetButton),E&&this.enableReply&&this.outerLineContainer.append(this.replyButton),this.initial=!0,this.show&&!this.layer.addMode&&this.handleElementSelect()}},{key:"handleElementDbClick",value:function(){this.freetextEditElement&&(this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLine.removeEventListener("dblclick",this.onDbclick),this.outerLineContainer.remove(),this.appendOrRemoveFreetextElement("remove"),this.appendOrRemoveFreetextEditElement("append"))}},{key:"getFreetextRectPoint",value:function(){var r=this.freetextEditElement.getBoundingClientRect(),o=r.width,s=r.height,u=this.leftTop;this.rightBottom={x:u.x+o,y:u.y+s}}},{key:"getFreetextRect",value:function(){var r=this.layer.viewport.scale;this.getFreetextRectPoint();var o=getInitialPoint(this.leftTop,r),s=getInitialPoint(this.rightBottom,r);return{left:o.x,top:o.y,right:s.x,bottom:s.y}}},{key:"handleFreetextEditElementBlur",value:function(){var r=this.freetextEditElement;if(r&&r.innerText!==this.annotation.contents){var o=this.getFreetextRect(),s=this.annotation,u=getHtmlToText(r);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,contents:u,rect:o}}),this.update({leftTop:this.leftTop,rightBottom:this.rightBottom}),this.annotation.contents=u,this.freetextElement.innerText=u}this.appendOrRemoveFreetextEditElement("remove"),this.appendOrRemoveFreetextElement("append"),this.handleContainerClick()}},{key:"appendOrRemoveFreetextElement",value:function(r){var o=this.freetextElement;r==="append"?(o.addEventListener("click",this.onContainerClick),this.annotationContainer.append(o)):(o.removeEventListener("click",this.onContainerClick),o.remove())}},{key:"appendOrRemoveFreetextEditElement",value:function(r){var o=this.freetextEditElement;r==="append"?(o.addEventListener("blur",this.onBlur),o.addEventListener("click",this.handleStopPropagation),o.addEventListener("paste",this.onPaste),this.annotationContainer.append(o),o.focus(),keepLastIndex(o)):(o.removeEventListener("blur",this.onBlur),o.removeEventListener("click",this.handleStopPropagation),o.removeEventListener("paste",this.onPaste),o.remove())}},{key:"handleElementSelect",value:function(){this.hidden=!1,this.show&&(this.updateTool(),this.show=!1),onClickOutside([this.freetextElement,this.outerLine,this.deletetButton,this.replyButton,document.querySelector(".toggle-button")],this.handleOutside.bind(this))}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,s=o.left,u=o.top,d=o.right,f=o.bottom,g=getActualPoint({x:s,y:u},r),m=getActualPoint({x:d,y:f},r);return{leftTop:{x:Math.min(g.x,m.x),y:Math.min(g.y,m.y)},rightBottom:{x:Math.max(g.x,m.x),y:Math.max(g.y,m.y)}}}},{key:"rectCalc",value:function(r){var o=r.leftTop,s=r.rightBottom;return{top:o.y<s.y?o.y:s.y,left:o.x<s.x?o.x:s.x,width:Math.abs(s.x-o.x),height:Math.abs(s.y-o.y)}}},{key:"calculate",value:function(r,o){var s=this.rectCalc({leftTop:r,rightBottom:o});return{top:s.top,left:s.left,width:s.width,height:s.height}}},{key:"getInitialPoint",value:function(){var r=this.leftTop.x,o=this.leftTop.y,s=this.rightBottom.x,u=this.rightBottom.y,d=this.layer.viewport.scale;return{leftTop:{x:r/d,y:o/d},rightBottom:{x:s/d,y:u/d}}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleContainerClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.outerLineContainer.remove(),this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null);else{if(this.layer.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("dblclick",this.onDbclick),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleContainerClick",value:function(r){r&&r.stopPropagation(),!this.hidden||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)||(this.hidden=!1,this.updateTool(),onClickOutside([this.outerLine,this.freetextElement,this.deletetButton,this.replyButton,document.querySelector(".toggle-button")],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){var r,o,s,u;this.hidden=!0,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("dblclick",this.onDbclick),(u=this.outerLineContainer)===null||u===void 0||u.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleStopPropagation",value:function(r){r.stopPropagation()}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation();var o=r.target.getAttribute("data-id"),s=this.layer.documentViewer.getScrollViewElement();this.scrollTop=s.scrollTop,this.scrollLeft=s.scrollLeft;var u=getClickPoint(r),d=u.pageX,f=u.pageY;this.startState={operator:o,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var o=getClickPoint(r),s=o.pageX,u=o.pageY,d=this.layer.documentViewer.getScrollViewElement(),f=d.scrollTop;s=s+d.scrollLeft-this.scrollLeft,u=u+f-this.scrollTop;var g=this.leftTop,m=this.rightBottom,y=this.startState,v=this.layer.viewport,_=v.width,w=v.height,x=10,k=10;if(y.operator==="nw-resize"){var S=s-(y.clickX-g.x),M=u-(y.clickY-g.y);S=Math.min(m.x-x,S),S=Math.max(12,S),M=Math.min(m.y-k,M),M=Math.max(9,M),this.update({leftTop:{x:S,y:M},rightBottom:m})}else if(y.operator==="w-resize"){var E=s-(y.clickX-g.x);E=Math.min(m.x-x,E),E=Math.max(12,E),this.update({leftTop:{x:E,y:g.y},rightBottom:m})}else if(y.operator==="sw-resize"){var P=s-(y.clickX-g.x),T=u-(y.clickY-m.y);P=Math.min(m.x-x,P),P=Math.max(12,P),T=Math.min(w-6,T),T=Math.max(g.y+k,T),this.update({leftTop:{x:P,y:g.y},rightBottom:{x:m.x,y:T}})}else if(y.operator==="s-resize"){var D=u-(y.clickY-m.y);D=Math.min(w-6,D),D=Math.max(g.y+k,D),this.update({leftTop:g,rightBottom:{x:m.x,y:D}})}else if(y.operator==="se-resize"){var F=s-(y.clickX-m.x),I=u-(y.clickY-m.y);F=Math.min(_-4,F),F=Math.max(g.x+x,F),I=Math.min(w-6,I),I=Math.max(g.y+k,I),this.update({leftTop:g,rightBottom:{x:F,y:I}})}else if(y.operator==="e-resize"){var N=s-(y.clickX-m.x);N=Math.min(_-4,N),N=Math.max(g.x+x,N),this.update({leftTop:g,rightBottom:{x:N,y:m.y}})}else if(y.operator==="ne-resize"){var q=s-(y.clickX-m.x),Y=u-(y.clickY-g.y);q=Math.min(_-4,q),q=Math.max(g.x+x,q),Y=Math.min(m.y-k,Y),Y=Math.max(9,Y),this.update({leftTop:{x:g.x,y:Y},rightBottom:{x:q,y:m.y}})}else if(y.operator==="n-resize"){var Z=u-(y.clickY-g.y);Z=Math.min(m.y-k,Z),Z=Math.max(9,Z),this.update({leftTop:{x:g.x,y:Z},rightBottom:m})}else if(y.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(r),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(g.x-m.x),Q=Math.abs(g.y-m.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=s-(y.clickX-g.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=s-(y.clickX-m.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=u-(y.clickY-g.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=u-(y.clickY-m.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=u-(y.clickY-g.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=u-(y.clickY-m.y)):fe+2===Se&&(j=s-(y.clickX-g.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=s-(y.clickX-m.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=s-(y.clickX-g.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=s-(y.clickX-m.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=u-(y.clickY-g.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=u-(y.clickY-m.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=s-(y.clickX-g.x),ne=u-(y.clickY-g.y),le=s-(y.clickX-m.x),J=u-(y.clickY-m.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;u>y.clickY?Ve=(Ve=d.offsetHeight-(Be.y-d.scrollTop-d.offsetTop))<100?5:0:u<y.clickY&&(Ve=(Ve=Ne.y-d.scrollTop-d.offsetTop)<100?-5:0),s>y.clickX?be=(be=d.offsetWidth-(Be.x-d.scrollLeft-d.offsetLeft))<100?5:0:s<y.clickX&&(be=(be=Ne.x-d.scrollLeft-d.offsetLeft)<100?-5:0),(be||Ve)&&(d.scrollTop+=Ve,d.scrollLeft+=be);var De={width:Math.abs(j-le),height:Math.abs(J-ne)};j<le?(j=Math.max(12,j),j=Math.min(_-De.width-4,j),le=Math.max(De.width+12,le),le=Math.min(_-4,le)):(le=Math.max(4,le),le=Math.min(_-De.width-12,le),j=Math.max(De.width+4,j),j=Math.min(_-12,j)),J<ne?(J=Math.max(6,J),J=Math.min(w-De.height-9,J),ne=Math.max(De.height+6,ne),ne=Math.min(w-9,ne)):(ne=Math.max(9,ne),ne=Math.min(w-De.height-6,ne),J=Math.max(De.height+9,J),J=Math.min(w-6,J))}this.update({leftTop:{x:j,y:ne},rightBottom:{x:le,y:J}})}y.clickX=s,y.clickY=u}}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var o=this.annotation,s=this.getInitialPoint(),u=s.leftTop,d=s.rightBottom,f={left:u.x,top:u.y,right:d.x,bottom:d.y};if(f!==o.rect||o.pageIndex!==this.layer.page)if(o.rect=f,o.pageIndex!==this.layer.page){var g={type:"delete",annotation:{operate:"del-annot",name:o.name,pageIndex:o.pageIndex,annotPtr:o.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",g);var m=Object.assign({},o);delete m.annotPtr,delete m.pagePtr,delete m.name,m.operate="add-annot",m.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:m}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr,rect:f}})}}},{key:"update",value:function(r){var o=r.leftTop,s=r.rightBottom,u=this.layer.viewport,d=u.width,f=u.height,g=this.calculate(o,s);this.leftTop=o,this.rightBottom=s,this.setCss(this.annotationContainer,{top:g.top-2+"px",left:g.left-4+"px"});var m=d-o.x,y=f-o.y;this.setCss(this.freetextEditElement,{maxWidth:m+"px",maxHeight:y+"px"}),this.setCss(this.freetextElement,{width:g.width+"px",height:g.height+"px"}),this.setCss(this.outerLine,{left:"".concat(g.left-12,"px"),top:"".concat(g.top-9,"px"),width:"".concat(g.width+16,"px"),height:"".concat(g.height+15,"px")}),this.setCss(this.deletetButton,{left:g.left+g.width-30+"px",top:g.top+g.height+12+"px"}),this.setCss(this.replyButton,{left:g.left+g.width-65+"px",top:g.top+g.height+12+"px"}),this.moveRect.setAttribute("width",g.width+10),this.moveRect.setAttribute("height",g.height+9),this.LeftRect.setAttribute("y",g.height/2+4),this.bottomLeftRect.setAttribute("y",g.height+9),this.bottomRect.setAttribute("x",g.width/2+5),this.bottomRect.setAttribute("y",g.height+9),this.bottomRightRect.setAttribute("x",g.width+10),this.bottomRightRect.setAttribute("y",g.height+9),this.rightRect.setAttribute("x",g.width+10),this.rightRect.setAttribute("y",g.height/2+4),this.topRightRect.setAttribute("x",g.width+10),this.topRect.setAttribute("x",g.width/2+5)}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handleFreetextEditElementPaste",value:function(r){pastePlainText(r)}}])}(),Text$1=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.show,f=d!==void 0&&d,g=r.enableReply,m=g===void 0||g;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).enableReply=m,o.textNoteStr=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.39961 3.60004H21.5996V18H11.9996L5.99961 21.6V18H2.39961V3.60004Z" fill="currentColor"/>
      <rect x="5.99902" y="7.20001" width="7.2" height="1.8" fill="white"/>
      <rect x="5.99902" y="11.4" width="12" height="1.8" fill="white"/>
    </svg>`,o.deleteSvgStr='<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.5V4.5H19V5.5H16.5V18.5H3.5V5.5H1V4.5H6V1.5H14ZM4.5 5.5V17.5H15.5V5.5H4.5ZM13 2.5V4.5H7V2.5H13ZM8.5 8V15H7.5V8H8.5ZM12.5 15V8H11.5V15H12.5Z" fill="#333333"/>',o.hidden=!0,o.initial=!1,o.rect=null,o.start=null,o.end=null,o.newStart=null,o.newEnd=null,o.show=f,o.popShow=!1,o.onClick=o.handleClick.bind(o),o.onBlur=o.handleBlur.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.onMousedown=o.handleMouseDown.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.handleStopPropagation=o.handlestopPropagation.bind(o),o.onPaste=o.handlePaste.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){this.annotation.isHidden||(this.renderTextElement(),this.renderTextEditor(),this.layer.div.append(this.annotationContainer))}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r,o,s,u;this.handleClickOutside(),(r=this.textEditorContainer)===null||r===void 0||r.removeEventListener("click",this.handleStopPropagation),(o=this.textEditorContainer)===null||o===void 0||o.removeEventListener("paste",this.onPaste),(s=this.annotationContainer)===null||s===void 0||s.remove(),(u=this.textEditorContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handlestopPropagation",value:function(r){r.stopPropagation()}},{key:"handleBlur",value:function(){var r=this.annotation,o=getHtmlToText(this.textEditorElement);o!==r.contents&&(this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:r.name,pageIndex:this.layer.page,pagePtr:r.pagePtr,annotPtr:r.annotPtr,contents:o}}),r.contents=o),this.textEditorContainer.removeEventListener("click",this.handleStopPropagation),this.textEditorContainer.removeEventListener("paste",this.onPaste),this.textEditorContainer.remove()}},{key:"handleMouseDown",value:function(r){if((r.button===0||r.type!=="mousedown")&&!this.layer.addMode){this.layer.tool&&r.stopPropagation(),this.moving=!1;var o=this.layer.documentViewer.getScrollViewElement();this.scrollTop=o.scrollTop,this.scrollLeft=o.scrollLeft;var s=getClickPoint(r),u=s.pageX,d=s.pageY;this.startState={clickX:u,clickY:d},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(U){return U.preventDefault()});var o=getClickPoint(r),s=o.pageX,u=o.pageY,d=this.layer.documentViewer,f=d.getScrollViewElement(),g=f.scrollTop;if(s=s+f.scrollLeft-this.scrollLeft,u=u+g-this.scrollTop,s!==this.startState.clickX||u!==this.startState.clickY){this.moving=!0;var m,y,v,_,w=this.start,x=this.end,k=this.startState,S=this.layer.viewport,M=S.width,E=S.height,P=this.getMouseLocation(r),T=d.getSelectedPage(P,P);if(T.first&&T.first!==this.layer.page+1){var D=d.windowToPage(P,T.first,!1),F=Math.abs(w.x-x.x),I=Math.abs(w.y-x.y);if(d.pdfViewer.spreadMode===0&&d.pdfViewer.scrollMode===0)m=s-(k.clickX-this.start.x),y=T.first>this.layer.page+1?D.y:D.y-I,v=s-(k.clickX-this.end.x),_=T.first>this.layer.page+1?D.y+I:D.y;else if(d.pdfViewer.spreadMode===0&&d.pdfViewer.scrollMode===1)m=T.first>this.layer.page+1?D.x:D.x-F,y=u-(k.clickY-this.start.y),v=T.first>this.layer.page+1?D.x+F:D.x,_=u-(k.clickY-this.end.y);else if(d.pdfViewer.spreadMode===1&&d.pdfViewer.scrollMode===0){var N=Math.min(T.first,this.layer.page+1),q=Math.max(T.first,this.layer.page+1);if(q-N>2||N+1===q&&N%2==0)return;N+1===q?(m=T.first>this.layer.page+1?D.x:D.x-F,y=u-(k.clickY-this.start.y),v=T.first>this.layer.page+1?D.x+F:D.x,_=u-(k.clickY-this.end.y)):N+2===q&&(m=s-(k.clickX-this.start.x),y=T.first>this.layer.page+1?D.y:D.y-I,v=s-(k.clickX-this.end.x),_=T.first>this.layer.page+1?D.y+I:D.y)}else if(d.pdfViewer.spreadMode===2&&d.pdfViewer.scrollMode===0){var Y=Math.min(T.first,this.layer.page+1),Z=Math.max(T.first,this.layer.page+1);if(Z-Y>2||Y+1===Z&&(Y!==1||Z!==2)&&Z%2==0||Y===1&&Z===3)return;Y+2===Z||Y===1&&Z===2?(m=s-(k.clickX-this.start.x),y=T.first>this.layer.page+1?D.y:D.y-I,v=s-(k.clickX-this.end.x),_=T.first>this.layer.page+1?D.y+I:D.y):Y+1===Z&&(m=T.first>this.layer.page+1?D.x:D.x-F,y=u-(k.clickY-this.start.y),v=T.first>this.layer.page+1?D.x+F:D.x,_=u-(k.clickY-this.end.y))}this.layer=d.pdfViewer._pages[T.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.layer.div.append(this.annotationContainer)}else{m=s-(k.clickX-this.start.x),y=u-(k.clickY-this.start.y),v=s-(k.clickX-this.end.x),_=u-(k.clickY-this.end.y);var j=d.pageToWindow({x:m,y},this.layer.page+1,!1),ne=d.pageToWindow({x:v,y:_},this.layer.page+1,!1),le=0,J=0;u>k.clickY?J=(J=f.offsetHeight-(ne.y-f.scrollTop-f.offsetTop))<100?5:0:u<k.clickY&&(J=(J=j.y-f.scrollTop-f.offsetTop)<100?-5:0),s>k.clickX?le=(le=f.offsetWidth-(ne.x-f.scrollLeft-f.offsetLeft))<100?5:0:s<k.clickX&&(le=(le=j.x-f.scrollLeft-f.offsetLeft)<100?-5:0),(le||J)&&(f.scrollTop+=J,f.scrollLeft+=le);var O={width:Math.abs(w.x-x.x),height:Math.abs(w.y-x.y)};m<v?(m=Math.max(0,m),m=Math.min(M-O.width,m),v=Math.max(O.width,v),v=Math.min(M,v)):(v=Math.max(0,v),v=Math.min(M-O.width,v),m=Math.max(O.width,m),m=Math.min(M,m)),y<_?(y=Math.max(0,y),y=Math.min(E-O.height,y),_=Math.max(O.height,_),_=Math.min(E,_)):(_=Math.max(0,_),_=Math.min(E-O.height,_),y=Math.max(O.height,y),y=Math.min(E,y))}this.update({start:{x:m,y},end:{x:v,y:_}}),k.clickX=s,k.clickY=u}}}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.scrollLeft=0,this.scrollTop=0;var o=this.annotation,s=getInitialPoint(this.start,this.layer.viewport.scale),u=getInitialPoint(this.end,this.layer.viewport.scale),d={left:s.x,top:s.y,right:u.x,bottom:u.y};if(d!==o.rect||o.pageIndex!==this.layer.page)if(o.rect=d,o.pageIndex!==this.layer.page){var f={type:"delete",annotation:{operate:"del-annot",name:o.name,pageIndex:o.pageIndex,annotPtr:o.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",f);var g=Object.assign({},o);delete g.annotPtr,delete g.pagePtr,delete g.name,g.operate="add-annot",g.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g}),this.annotationContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr,rect:d}})}}},{key:"update",value:function(r){var o=r.start,s=r.end,u=this.rectCalc({start:o,end:s});this.start=o,this.end=s,this.annotationContainer.style.top=u.top+"px",this.annotationContainer.style.left=u.left+"px",this.textEditorContainer.style.top=u.top+28+"px",this.textEditorContainer.style.left=u.left+16+"px"}},{key:"rectCalc",value:function(r){var o=r.start,s=r.end;return{top:o.y<s.y?o.y:s.y,left:o.x<s.x?o.x:s.x,width:Math.abs(s.x-o.x),height:Math.abs(s.y-o.y)}}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,s=o.left,u=o.top,d=o.right,f=o.bottom;return{start:getActualPoint({x:s,y:u},r),end:getActualPoint({x:d,y:f},r)}}},{key:"handleClickOutside",value:function(r){r!==this.annotationContainer&&this.popShow&&(this.popShow=!1,this.annotationContainer.style.zIndex=2,this.handleBlur())}},{key:"setCss",value:function(r,o){if(r&&o)for(var s in o)r.style[s]=o[s]}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(r){this.layer.addMode||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)||(this.layer.tool&&r&&r.stopPropagation(),this.moving||(r&&this.layer.eventBus.dispatch("closeTextEditor",r.target.closest(".annotation.text")),this.popShow||(this.popShow=!0,this.layer.pageDiv.append(this.textEditorContainer),this.textEditorContainer.addEventListener("click",this.handleStopPropagation),this.textEditorContainer.addEventListener("paste",this.onPaste),this.textEditorElement.focus(),keepLastIndex(this.textEditorElement),onClickOutside([this.annotationContainer,this.textEditorContainer,document.querySelector(".toggle-button")],this.handleClickOutside.bind(this)))))}},{key:"updateTool",value:function(){if(this.popShow){if(this.layer.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}else this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null)}},{key:"renderTextElement",value:function(){var r=this.getActualRect(this.layer.viewport.scale),o=r.start,s=r.end;this.start=o,this.end=s;var u=this.annotation;u.color||(u.color="#FF0000");var d=this.rectCalc({start:o,end:s});this.rect=d;var f=document.createElement("div");f.id=u.name,f.className="annotation text",this.setCss(f,{position:"absolute",left:d.left+"px",top:d.top+"px",width:"24px",height:"24px",color:u.color,opacity:u.opacity||1}),f.innerHTML=this.textNoteStr,f.addEventListener("click",this.onClick),f.addEventListener("mousedown",this.onMousedown),f.addEventListener("touchstart",this.onMousedown),this.annotationContainer=f}},{key:"renderTextEditor",value:function(){var r=document.createElement("div");this.textEditorContainer=r,this.setCss(r,{position:"absolute",left:this.rect.left+16+"px",top:this.rect.top+28+"px",zIndex:2,border:"2px solid",borderColor:this.annotation.color,outline:"none",padding:"0 8px 28px",borderRadius:"4px",background:"#FFFFFF"}),this.textEditorContainer.className="text-editor-container";var o=document.createElement("div");o.className="text-title",o.innerText=this.layer.annotationStore.$t("header.note"),r.append(o);var s=document.createElement("div");if(s.setAttribute("role","textbox"),s.setAttribute("contenteditable",!0),s.setAttribute("spellcheck",!1),this.setCss(s,{width:"290px",height:"110px",fontSize:"16px",color:"#000",lineHeight:"1.2em",outline:"none",overflow:"auto",whiteSpace:"pre-wrap",textAlign:"left","-webkit-user-select":"text"}),s.className="text-editor",this.annotation.contents)s.innerHTML=this.annotation.contents;else if(this.annotation["contents-richtext"]){var u=new window.DOMParser().parseFromString(this.annotation["contents-richtext"],"text/xml");u.getElementsByTagName("parsererror").length>0?s.innerHTML=this.annotation["contents-richtext"]:s.innerHTML=u.firstElementChild.innerText}this.textEditorElement=s,r.append(s);var d=createSvg("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",class:"delete-button"},{width:"20px",height:"20px",position:"absolute",right:"10px",bottom:"10px"});d.innerHTML=this.deleteSvgStr,this.deletetButton=d,r.append(d),this.deletetButton.addEventListener("click",this.onDelete),this.layer.eventBus._on("closeTextEditor",this.handleClickOutside.bind(this)),this.replyButton=createElement("div",{position:"absolute",right:"40px",bottom:"10px",width:"20px",height:"20px"},{class:"reply-button"}),this.replyButton.innerHTML=this.replySvgStr,this.enableReply&&r.append(this.replyButton),this.replyButton.addEventListener("click",this.onOpenReply)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handlePaste",value:function(r){pastePlainText(r)}}])}(),Stamp=function(e){function n(o){var s,u=o.annotation,d=o.layer,f=o.show,g=f!==void 0&&f,m=o.enableReply,y=m===void 0||m;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:u,layer:d}])).enableReply=y,s.hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=g,s.ratio=window.devicePixelRatio||1,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.onOpenReply=s.openReply.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var s,u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F,I,N;return _regeneratorRuntime().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if((s=this.annotation).rect){q.next=17;break}return q.next=4,this.layer.messageHandler.sendWithPromise("GetAnnotRect",{pagePtr:s.pagePtr,annotPtr:s.annotPtr});case 4:return u=q.sent,d=this.layer.viewport.viewBox[2],f=this.layer.viewport.viewBox[3],g=u.right-u.left,m=u.bottom-u.top,y={left:(d-g)/2,top:(f-m)/2,right:(d+g)/2,bottom:(f+m)/2},q.next=16,this.layer.messageHandler.sendWithPromise("SetAnnotRect",{pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y});case 16:s.rect=y;case 17:if(v=this.getActualRect(this.layer.viewport.scale),_=v.start,w=v.end,this.start=_,this.end=w,x=this.calculate(_,w),this.ratioRate=x.height/x.width,(k=document.createElement("div")).id=s.name,k.className="annotation",k.style.top=x.top+"px",k.style.left=x.left+"px",k.style.width=x.width+"px",k.style.height=x.height+"px",k.style.fontSize="0",S=null,(S=document.createElement("img")).style.width="100%",S.style.height="100%",M="",!s.image){q.next=39;break}M=s.image,q.next=55;break;case 39:if(s.stampType!=="standard"&&s.stampType!=="image"&&s.stampType!=="text"){q.next=55;break}return E={width:parseInt(x.width*this.ratio+1),height:parseInt(x.height*this.ratio+1)},q.next=43,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:s.annotPtr,width:E.width,height:E.height});case 43:P=q.sent,(T=document.createElement("canvas")).style.width=E.width+"px",T.style.height=E.height+"px",T.width=E.width,T.height=E.height,(D=T.getContext("2d")).clearRect(0,0,T.width,T.height),(F=D.createImageData(E.width,E.height)).data.set(P),D.putImageData(F,0,0),M=T.toDataURL("image/png",1);case 55:s.imageBase64=M,S.src=M,this.imgEle=S,k.append(this.imgEle),this.imgEle.addEventListener("mousedown",this.handleClick.bind(this)),this.annotationContainer=k,this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.deletetButton.style.left=x.left+x.width-30+"px",this.deletetButton.style.top=x.top+x.height+8+"px",this.replyButton=createElement("div",{width:"30px",height:"30px",background:"#DDE9FF",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.replyButton.style.left=x.left+x.width-65+"px",this.replyButton.style.top=x.top+x.height+8+"px",(I=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",I.style.zIndex=1,I.style.left="".concat(x.left-7,"px"),I.style.top="".concat(x.top-7,"px"),I.style.width="".concat(x.width+14,"px"),I.style.height="".concat(x.height+14,"px"),this.outerLine=I,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:x.width+8,height:x.height+8,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:x.height+8}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:x.width+8,y:x.height+8}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:x.width+8,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.topRightRect),this.outerLineContainer.append(this.outerLine),(N=this.layer.documentViewer.isAnnotationPopup)&&this.outerLineContainer.append(this.deletetButton),N&&this.enableReply&&this.outerLineContainer.append(this.replyButton),this.initial=!0,this.layer.eventBus.dispatch("imageChange"),this.layer.annotationStore.creating=!1,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 100:case"end":return q.stop()}},o,this)})),function(){return r.apply(this,arguments)})},{key:"getActualRect",value:function(o){var s=this.annotation.rect,u=s.left,d=s.top,f=s.right,g=s.bottom;return{start:getActualPoint({x:u,y:d},o),end:getActualPoint({x:f,y:g},o)}}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s});return{top:u.top,left:u.left,width:u.width,height:u.height}}},{key:"getInitialPoint",value:function(){var o=this.layer.viewport.scale,s=this.start.x,u=this.start.y,d=this.end.x,f=this.end.y,g=this.layer.viewport;return g.width,g.height,g.rotation,{start:{x:s/o,y:u/o},end:{x:d/o,y:f/o}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.selectedElementName!==this.annotation.name){var o=this.annotation;this.layer.selectedElementName=o.name;var s=_objectSpread2$1({},o);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(o){this.layer.tool&&o&&o.preventDefault(),!this.hidden||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(o==null?void 0:o.target)||(this.hidden=!1,this.updateTool(),onClickOutside([this.annotationContainer,this.outerLine,this.deletetButton,this.replyButton,document.querySelector(".toggle-button")],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){var o,s,u;this.hidden=!0,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),(o=this.outerLine)===null||o===void 0||o.removeEventListener("mousedown",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("touchstart",this.onMousedown),(u=this.outerLineContainer)===null||u===void 0||u.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleMouseDown",value:function(o){if(o.button===0||o.type!=="mousedown"){this.layer.tool&&o.stopPropagation(),o.type==="touchstart"&&(document.querySelector(".document-container").addEventListener("scroll",function(m){return m.preventDefault()}),document.body.style.userSelect="none",document.getElementById("app").style.touchAction="none");var s=o.target.getAttribute("data-id"),u=this.layer.documentViewer.getScrollViewElement();this.scrollTop=u.scrollTop,this.scrollLeft=u.scrollLeft;var d=getClickPoint(o),f=d.pageX,g=d.pageY;this.startState={operator:s,clickX:f,clickY:g},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(o){if(o.button===0||o.type!=="mousemove"){this.layer.tool&&o.stopPropagation(),this.moving=!0;var s=getClickPoint(o),u=s.pageX,d=s.pageY,f=this.layer.documentViewer.getScrollViewElement(),g=f.scrollTop;u=u+f.scrollLeft-this.scrollLeft,d=d+g-this.scrollTop;var m=this.start,y=this.end,v=this.startState,_=this.layer.viewport,w=_.width,x=_.height;if(v.operator==="nw-resize"){var k=u-(v.clickX-this.start.x),S=d-(v.clickY-this.start.y);if(k=Math.min(y.x-5,k),k=Math.max(0,k),S=Math.min(y.y-5,S),S=Math.max(0,S),this.ratioRate){var M=(k-this.start.x)*this.ratioRate;if((S=this.start.y+M)<0||k<0)return}this.update({start:{x:k,y:S},end:y})}else if(v.operator==="sw-resize"){var E=u-(v.clickX-this.start.x),P=d-(v.clickY-this.end.y);if(E=Math.min(y.x-5,E),E=Math.max(0,E),P=Math.min(x,P),P=Math.max(m.y+5,P),this.ratioRate){var T=(E-this.start.x)*this.ratioRate;if((P=this.end.y-T)>=x||E<0)return}this.update({start:{x:E,y:m.y},end:{x:y.x,y:P}})}else if(v.operator==="se-resize"){var D=u-(v.clickX-this.end.x),F=d-(v.clickY-this.end.y);if(D=Math.min(w,D),D=Math.max(m.x+5,D),F=Math.min(x,F),F=Math.max(m.y+5,F),this.ratioRate){var I=(this.end.x-D)*this.ratioRate;if((F=this.end.y-I)>=x||D>=w)return}this.update({start:m,end:{x:D,y:F}})}else if(v.operator==="ne-resize"){var N=u-(v.clickX-this.end.x),q=d-(v.clickY-this.start.y);if(N=Math.min(w,N),N=Math.max(m.x+5,N),q=Math.min(y.y-5,q),q=Math.max(0,q),this.ratioRate){var Y=(this.end.x-N)*this.ratioRate;if((q=this.start.y+Y)<=0||N>=w)return}this.update({start:{x:m.x,y:q},end:{x:N,y:y.y}})}else if(v.operator==="move"){var Z,j,ne,le,J=this.layer.documentViewer,O=this.getMouseLocation(o),U=J.getSelectedPage(O,O);if(U.first&&U.first!==this.layer.page+1){var W=J.windowToPage(O,U.first,!1),H=Math.abs(m.x-y.x),X=Math.abs(m.y-y.y);if(J.pdfViewer.spreadMode===0&&J.pdfViewer.scrollMode===0)Z=u-(v.clickX-this.start.x),j=U.first>this.layer.page+1?W.y:W.y-X,ne=u-(v.clickX-this.end.x),le=U.first>this.layer.page+1?W.y+X:W.y;else if(J.pdfViewer.spreadMode===0&&J.pdfViewer.scrollMode===1)Z=U.first>this.layer.page+1?W.x:W.x-H,j=d-(v.clickY-this.start.y),ne=U.first>this.layer.page+1?W.x+H:W.x,le=d-(v.clickY-this.end.y);else if(J.pdfViewer.spreadMode===1&&J.pdfViewer.scrollMode===0){var Q=Math.min(U.first,this.layer.page+1),fe=Math.max(U.first,this.layer.page+1);if(fe-Q>2||Q+1===fe&&Q%2==0)return;Q+1===fe?(Z=U.first>this.layer.page+1?W.x:W.x-H,j=d-(v.clickY-this.start.y),ne=U.first>this.layer.page+1?W.x+H:W.x,le=d-(v.clickY-this.end.y)):Q+2===fe&&(Z=u-(v.clickX-this.start.x),j=U.first>this.layer.page+1?W.y:W.y-X,ne=u-(v.clickX-this.end.x),le=U.first>this.layer.page+1?W.y+X:W.y)}else if(J.pdfViewer.spreadMode===2&&J.pdfViewer.scrollMode===0){var Se=Math.min(U.first,this.layer.page+1),Pe=Math.max(U.first,this.layer.page+1);if(Pe-Se>2||Se+1===Pe&&(Se!==1||Pe!==2)&&Pe%2==0||Se===1&&Pe===3)return;Se+2===Pe||Se===1&&Pe===2?(Z=u-(v.clickX-this.start.x),j=U.first>this.layer.page+1?W.y:W.y-X,ne=u-(v.clickX-this.end.x),le=U.first>this.layer.page+1?W.y+X:W.y):Se+1===Pe&&(Z=U.first>this.layer.page+1?W.x:W.x-H,j=d-(v.clickY-this.start.y),ne=U.first>this.layer.page+1?W.x+H:W.x,le=d-(v.clickY-this.end.y))}this.layer=J.pdfViewer._pages[U.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var $e=this.layer.div;$e.append(this.annotationContainer),$e.append(this.outerLineContainer)}else{Z=u-(v.clickX-this.start.x),j=d-(v.clickY-this.start.y),ne=u-(v.clickX-this.end.x),le=d-(v.clickY-this.end.y);var Ie=J.pageToWindow({x:Z,y:j},this.layer.page+1,!1),Ne=J.pageToWindow({x:ne,y:le},this.layer.page+1,!1),Be=0,be=0;d>v.clickY?be=(be=f.offsetHeight-(Ne.y-f.scrollTop-f.offsetTop))<100?5:0:d<v.clickY&&(be=(be=Ie.y-f.scrollTop-f.offsetTop)<100?-5:0),u>v.clickX?Be=(Be=f.offsetWidth-(Ne.x-f.scrollLeft-f.offsetLeft))<100?5:0:u<v.clickX&&(Be=(Be=Ie.x-f.scrollLeft-f.offsetLeft)<100?-5:0),(Be||be)&&(f.scrollTop+=be,f.scrollLeft+=Be);var Ve={width:Math.abs(m.x-y.x),height:Math.abs(m.y-y.y)};Z<ne?(Z=Math.max(0,Z),Z=Math.min(w-Ve.width,Z),ne=Math.max(Ve.width,ne),ne=Math.min(w,ne)):(ne=Math.max(0,ne),ne=Math.min(w-Ve.width,ne),Z=Math.max(Ve.width,Z),Z=Math.min(w,Z)),j<le?(j=Math.max(0,j),j=Math.min(x-Ve.height,j),le=Math.max(Ve.height,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-Ve.height,le),j=Math.max(Ve.height,j),j=Math.min(x,j))}this.update({start:{x:Z,y:j},end:{x:ne,y:le}})}v.clickX=u,v.clickY=d}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var o;this.handleOutside(),(o=this.annotationContainer)===null||o===void 0||o.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(o){if(o.button===0||o.type!=="mouseup"){this.layer.tool&&o.stopPropagation(),o.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto",document.body.style.userSelect="auto",document.getElementById("app").style.touchAction="auto",document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,u=this.getInitialPoint(),d=u.start,f=u.end,g={left:d.x,top:d.y,right:f.x,bottom:f.y};if(g!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=g,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var y=Object.assign({},s);delete y.annotPtr,delete y.pagePtr,delete y.name,y.operate="add-annot",y.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:y}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:s.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rect:g}})}}},{key:"update",value:function(o){var s=o.start,u=o.end,d=this.calculate(s,u);this.start=s,this.end=u,this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.imgEle.style.width=d.width+"px",this.imgEle.style.height=d.height+"px",this.outerLine.style.left="".concat(d.left-7,"px"),this.outerLine.style.top="".concat(d.top-7,"px"),this.outerLine.style.width="".concat(d.width+14,"px"),this.outerLine.style.height="".concat(d.height+14,"px"),this.deletetButton.style.left=d.left+d.width-30+"px",this.deletetButton.style.top=d.top+d.height+8+"px",this.replyButton.style.left=d.left+d.width-65+"px",this.replyButton.style.top=d.top+d.height+8+"px",this.moveRect.setAttribute("width",d.width+8),this.moveRect.setAttribute("height",d.height+8),this.bottomLeftRect.setAttribute("y",d.height+8),this.bottomRightRect.setAttribute("x",d.width+8),this.bottomRightRect.setAttribute("y",d.height+8),this.topRightRect.setAttribute("x",d.width+8)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}}]);var r}(),Freetext=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.freetextElement=null,this.start=null,this.end=null,this.onClick=this.handleClick.bind(this),this.onBlur=this.handleBlur.bind(this),this.onPaste=this.handlePaste.bind(this),this.init()},[{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||this.reset(),this._tool=e)}},{key:"reset",value:function(){var e=this.freetextElement;this.layer.pageDiv.removeEventListener("click",this.onClick),e&&this.handleFreetext(),this.start=null,this.end=null}},{key:"init",value:function(){this.layer.pageDiv.removeEventListener("click",this.onClick),this.layer.pageDiv.addEventListener("click",this.onClick)}},{key:"getFreetextRectPoint",value:function(){var e=this.start,n=this.end;return{start:{x:e.x,y:e.y},end:{x:n.x,y:n.y}}}},{key:"getFreetextRect",value:function(){var e=this.layer.viewport.scale,n=this.getFreetextRectPoint(),r=getInitialPoint(n.start,e),o=getInitialPoint(n.end,e);return{left:r.x,top:r.y,right:o.x,bottom:o.y}}},{key:"handleFreetext",value:function(){var e=this.freetextElement;if(e.innerText){var n=e.getBoundingClientRect();this.end={x:this.start.x+n.width-8,y:this.start.y+n.height-8};var r=this.getFreetextRect(),o=getHtmlToText(e),s={operate:"add-annot",type:"freetext",pageIndex:this.layer.page,date:new Date,color:"#000000",fontSize:16,fontName:"Helvetica",opacity:1,textAlignment:"left",contents:o,rect:r};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:s})}this.layer.addMode=!1,e.removeEventListener("blur",this.onBlur),e.removeEventListener("paste",this.onPaste),e.remove(),this.freetextElement=null}},{key:"handleBlur",value:function(){this.handleFreetext()}},{key:"handleClick",value:function(e){if(!this.layer.selectedElementName){var n=this.freetextElement;n&&e.target===n||n||this.layer.selectedElementName||(this.layer.addMode=!0,this.renderFreetext(e))}}},{key:"setCss",value:function(e,n){if(e&&n)for(var r in n)e.style[r]=n[r]}},{key:"renderFreetext",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e);if(this.start=n,!this.freetextElement){var r=this.layer.viewport,o=r.width,s=r.height,u=o-this.start.x,d=s-this.start.y,f=document.createElement("div");f.setAttribute("role","textbox"),f.setAttribute("contenteditable",!0),f.setAttribute("spellcheck",!1),this.setCss(f,{position:"absolute",left:n.x-4+"px",top:n.y-4+"px",maxWidth:u+"px",maxHeight:d+"px",minWidth:"20px",fontSize:"16px",textAlign:"left",whiteSpace:"pre-wrap",color:"#000",lineHeight:"1.2em",padding:"3px",border:"1px solid #1460F3",overflow:"auto","-webkit-user-select":"text"}),f.className="freetext",f.addEventListener("blur",this.onBlur),f.addEventListener("paste",this.onPaste),this.freetextElement=f,this.layer.pageDiv.append(f),f.focus()}}},{key:"handlePaste",value:function(e){pastePlainText(e)}}])}();function $(e,n,r,o=s=>s){return e*o(.5-n*(.5-r))}function se(e){return[-e[0],-e[1]]}function l(e,n){return[e[0]+n[0],e[1]+n[1]]}function a(e,n){return[e[0]-n[0],e[1]-n[1]]}function b(e,n){return[e[0]*n,e[1]*n]}function he(e,n){return[e[0]/n,e[1]/n]}function R(e){return[e[1],-e[0]]}function B(e,n){return e[0]*n[0]+e[1]*n[1]}function ue(e,n){return e[0]===n[0]&&e[1]===n[1]}function ge(e){return Math.hypot(e[0],e[1])}function de(e){return e[0]*e[0]+e[1]*e[1]}function A(e,n){return de(a(e,n))}function G(e){return he(e,ge(e))}function ie(e,n){return Math.hypot(e[1]-n[1],e[0]-n[0])}function L(e,n,r){let o=Math.sin(r),s=Math.cos(r),u=e[0]-n[0],d=e[1]-n[1],f=u*o+d*s;return[u*s-d*o+n[0],f+n[1]]}function K(e,n,r){return l(e,b(a(n,e),r))}function ee(e,n,r){return l(e,b(n,r))}var{min:C,PI:xe}=Math,pe=.275,V=xe+1e-4;function ce(e,n={}){let{size:r=16,smoothing:o=.5,thinning:s=.5,simulatePressure:u=!0,easing:d=U=>U,start:f={},end:g={},last:m=!1}=n,{cap:y=!0,easing:v=U=>U*(2-U)}=f,{cap:_=!0,easing:w=U=>--U*U*U+1}=g;if(e.length===0||r<=0)return[];let x,k=e[e.length-1].runningLength,S=f.taper===!1?0:f.taper===!0?Math.max(r,k):f.taper,M=g.taper===!1?0:g.taper===!0?Math.max(r,k):g.taper,E=Math.pow(r*o,2),P=[],T=[],D=e.slice(0,10).reduce((U,W)=>{let H=W.pressure;if(u){let X=C(1,W.distance/r),Q=C(1,1-X);H=C(1,U+X*pe*(Q-U))}return(U+H)/2},e[0].pressure),F=$(r,s,e[e.length-1].pressure,d),I=e[0].vector,N=e[0].point,q=N,Y=N,Z=q,j=!1;for(let U=0;U<e.length;U++){let{pressure:W}=e[U],{point:H,vector:X,distance:Q,runningLength:fe}=e[U];if(U<e.length-1&&k-fe<3)continue;if(s){if(u){let be=C(1,Q/r),Ve=C(1,1-be);W=C(1,D+be*pe*(Ve-D))}F=$(r,s,W,d)}else F=r/2;x===void 0&&(x=F);let Se=fe<S?v(fe/S):1,Pe=k-fe<M?w((k-fe)/M):1;F=Math.max(.01,F*Math.min(Se,Pe));let $e=(U<e.length-1?e[U+1]:e[U]).vector,Ie=U<e.length-1?B(X,$e):1,Ne=Ie!==null&&Ie<0;if(B(X,I)<0&&!j||Ne){let be=b(R(I),F);for(let Ve=1/13,De=0;De<=1;De+=Ve)Y=L(a(H,be),H,V*De),P.push(Y),Z=L(l(H,be),H,V*-De),T.push(Z);N=Y,q=Z,Ne&&(j=!0);continue}if(j=!1,U===e.length-1){let be=b(R(X),F);P.push(a(H,be)),T.push(l(H,be));continue}let Be=b(R(K($e,X,Ie)),F);Y=a(H,Be),(U<=1||A(N,Y)>E)&&(P.push(Y),N=Y),Z=l(H,Be),(U<=1||A(q,Z)>E)&&(T.push(Z),q=Z),D=W,I=X}let ne=e[0].point.slice(0,2),le=e.length>1?e[e.length-1].point.slice(0,2):l(e[0].point,[1,1]),J=[],O=[];if(e.length===1){if(!S&&!M||m){let U=ee(ne,G(R(a(ne,le))),-(x||F)),W=[];for(let H=1/13,X=H;X<=1;X+=H)W.push(L(U,ne,2*V*X));return W}}else{if(!(S||M&&e.length===1))if(y)for(let W=1/13,H=W;H<=1;H+=W){let X=L(T[0],ne,V*H);J.push(X)}else{let W=a(P[0],T[0]),H=b(W,.5),X=b(W,.51);J.push(a(ne,H),a(ne,X),l(ne,X),l(ne,H))}let U=R(se(e[e.length-1].vector));if(M||S&&e.length===1)O.push(le);else if(_){let W=ee(le,U,F);for(let H=1/29,X=H;X<1;X+=H)O.push(L(W,le,3*V*X))}else O.push(l(le,b(U,F)),l(le,b(U,.99*F)),a(le,b(U,.99*F)),a(le,b(U,F)))}return P.concat(O,T.reverse(),J)}function me(e,n={}){var r;let{streamline:o=.5,size:s=16,last:u=!1}=n;if(e.length===0)return[];let d=.15+.85*(1-o),f=Array.isArray(e[0])?e:e.map(({x:w,y:x,pressure:k=.5})=>[w,x,k]);if(f.length===2){let w=f[1];f=f.slice(0,-1);for(let x=1;x<5;x++)f.push(K(f[0],w,x/4))}f.length===1&&(f=[...f,[...l(f[0],[1,1]),...f[0].slice(2)]]);let g=[{point:[f[0][0],f[0][1]],pressure:f[0][2]>=0?f[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],m=!1,y=0,v=g[0],_=f.length-1;for(let w=1;w<f.length;w++){let x=u&&w===_?f[w].slice(0,2):K(v.point,f[w],d);if(ue(v.point,x))continue;let k=ie(x,v.point);if(y+=k,w<_&&!m){if(y<s)continue;m=!0}v={point:x,pressure:f[w][2]>=0?f[w][2]:.5,vector:G(a(v.point,x)),distance:k,runningLength:y},g.push(v)}return g[0].vector=((r=g[1])==null?void 0:r.vector)||[0,0],g}function ae(e,n={}){return ce(me(e,n),n)}var PaintShape=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||this.reset(),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)}},{key:"checkSvgChild",value:function(e){switch(e){case"square":return"rect";case"circle":return"ellipse";case"ink":return"path";default:return"line"}}},{key:"handleMouseDown",value:function(e){if(!this.layer.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),s=Math.min(r.x,o.x),u=Math.min(r.y,o.y),d=Math.max(r.x,o.x),f=Math.max(r.y,o.y),g={left:s,top:u,right:d,bottom:f},m=this.color,y={operate:"add-annot",type:this.tool==="arrow"?"line":this.tool,pageIndex:this.layer.page,date:new Date,borderWidth:2,opacity:.8,borderColor:m,rect:g};if(this.tool==="arrow"&&(y.arrow=!0),y.type=="line"){var v=[r.x,r.y,o.x,o.y];y.linePoints=v,y.rect={left:s-6,top:u-6,right:d+6,bottom:f+6},this.tool==="arrow"&&(y.tail="OpenArrow",y.arrow=!0)}else if(this.tool==="ink"){var _=this.formatPath(),w=_.inkPointes,x=_.rect;y.rect=x,y.inkPointes=w}else{var k=[s,f,d,u];y.linePoints=k}this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:y})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height,f=this.layer.viewport.scale;if(r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x===this.initEndPoint.x&&(this.initEndPoint.x=this.initEndPoint.x+1),this.initStartPoint.y===this.initEndPoint.y&&(this.initEndPoint.y=this.initEndPoint.y+1),this.shapeEle){if(e.shiftKey&&(this.tool==="circle"||this.tool==="square")){var g=this.initStartPoint,m=this.initEndPoint,y=Math.abs(m.x-g.x),v=Math.abs(m.y-g.y),_=Math.min(y,v);g.x<m.x?m.x=g.x+_:m.x=g.x-_,g.y<m.y?m.y=g.y+_:m.y=g.y-_}var w=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;if(this.tool==="circle")x.setAttribute("cx",w.left+w.width/2),x.setAttribute("cy",w.top+w.height/2),x.setAttribute("rx",(w.width-1)/2),x.setAttribute("ry",(w.height-1)/2);else if(this.tool==="square")x.setAttribute("x",w.left+.5),x.setAttribute("y",w.top-.5),x.setAttribute("width","".concat(Math.abs(w.width-1),"px")),x.setAttribute("height","".concat(Math.abs(w.height-1),"px"));else if(this.tool==="line"||this.tool==="arrow"){if(x.setAttribute("x1",this.initStartPoint.x),x.setAttribute("y1",this.initStartPoint.y),x.setAttribute("x2",this.initEndPoint.x),x.setAttribute("y2",this.initEndPoint.y),this.tool==="arrow"){var k=this.layer.svgElement.querySelector("[tail]");if(k){var S=12*f,M=new ArrowHelper(this.initStartPoint,this.initEndPoint).getEndArrowPoints(30,S),E="";M.forEach(function(I){E.length>0&&(E+=" "),E+="".concat(I.x,",").concat(I.y)}),E.length>0&&k.setAttribute("points",E)}}}else if(this.tool==="ink"){this.path.push([r,o]);var P=this.getFreeDrawSvgPath();x.setAttribute("d",P)}}else{var T=createSvg(this.checkSvgChild(this.tool),{fill:"none",stroke:this.color,"stroke-width":2*f,"stroke-opacity":.8});if(this.tool==="arrow"){var D=12*f,F=new ArrowHelper(this.initStartPoint,this.initEndPoint).getEndArrow(30,D,!1);F&&(this.tail="OpenArrow",F.setAttribute("tail",""),F.setAttribute("stroke",this.color),F.setAttribute("stroke-width",2*f),F.setAttribute("fill","none"),F.setAttribute("stroke-opacity",.8),this.layer.svgElement.append(F))}this.shapeEle=T,this.layer.svgElement.append(this.shapeEle)}}},{key:"getFreeDrawSvgPath",value:function(){var e={simulatePressure:!1,size:1,thinning:0,smoothing:.3,streamline:.5,easing:function(n){return Math.sin(n*Math.PI/2)},last:!1};return getSvgPathFromStroke(ae(this.path,e))}},{key:"handlePoint",value:function(e){var n=getInitialPoint({x:e[0],y:e[1]},this.layer.viewport.scale);return{x:n.x,y:n.y}}},{key:"getRect",value:function(){var e=[],n=[];this.path.forEach(function(d){e.push(d[0]),n.push(d[1])});var r=Math.min.apply(Math,n),o=Math.min.apply(Math,e),s=Math.max.apply(Math,n),u=Math.max.apply(Math,e);return this.path=this.path.map(function(d){return[d[0]-o,d[1]-r]}),{left:o,top:r,bottom:s,right:u,width:u-o,height:s-r}}},{key:"formatPath",value:function(){for(var e=[],n=this.path.length,r=[],o=[],s=[],u=0;u<n;u++){var d=this.handlePoint(this.path[u]);r.push(d.x),o.push(d.y),e.push({PointX:d.x.toFixed(2),PointY:d.y.toFixed(2)})}return s.push(e),{inkPointes:s,rect:{left:Math.min.apply(Math,r),bottom:Math.max.apply(Math,o),right:Math.max.apply(Math,r),top:Math.min.apply(Math,o)}}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),Text=function(){return _createClass(function e(n){var r=n.tool,o=n.layer;_classCallCheck(this,e),this.textNoteStr=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.39961 3.60004H21.5996V18H11.9996L5.99961 21.6V18H2.39961V3.60004Z" fill="currentColor"/>
      <rect x="5.99902" y="7.20001" width="7.2" height="1.8" fill="white"/>
      <rect x="5.99902" y="11.4" width="12" height="1.8" fill="white"/>
    </svg>`,this.deleteSvgStr=`<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.5V4.5H19V5.5H16.5V18.5H3.5V5.5H1V4.5H6V1.5H14ZM4.5 5.5V17.5H15.5V5.5H4.5ZM13 2.5V4.5H7V2.5H13ZM8.5 8V15H7.5V8H8.5ZM12.5 15V8H11.5V15H12.5Z" fill="#333333"/>
    `,this.layer=o,this._tool=r,this.color="#FF0000",this.freetextElement=null,this.start=null,this.end=null,this.onClick=this.handleClick.bind(this),this.onBlur=this.handleBlur.bind(this),this.onPaste=this.handlePaste.bind(this),this.init()},[{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||this.reset(),this._tool=e)}},{key:"reset",value:function(){this.start=null,this.end=null,this.layer.pageDiv.removeEventListener("click",this.onClick);var e=this.textElement,n=this.textEditorElement;n&&(n.remove(),n.removeEventListener("blur",this.onBlur),n.removeEventListener("paste",this.onPaste),this.textEditorElement=null),e&&(e.remove(),this.textElement=null)}},{key:"init",value:function(){this.layer.pageDiv.removeEventListener("click",this.onClick),this.layer.pageDiv.addEventListener("click",this.onClick)}},{key:"getTextRect",value:function(){var e=this.layer.viewport.scale,n=getInitialPoint(this.start,e),r=getInitialPoint(this.end,e);return{left:n.x,top:n.y,right:r.x,bottom:r.y}}},{key:"handleText",value:function(){var e=this.textEditorElement;if(e.innerText){this.end={x:this.start.x+24,y:this.start.y-24};var n=this.getTextRect(),r=this.color,o=getHtmlToText(e),s={operate:"add-annot",type:"text",pageIndex:this.layer.page,date:new Date,color:r,opacity:1,contents:o,rect:n};this.layer.eventBus.dispatch("annotationChanged",{type:"add",annotation:s})}this.layer.addMode=!1,e.remove(),e.removeEventListener("blur",this.onBlur),e.removeEventListener("paste",this.onPaste),this.textElement.remove(),this.textElement=null,this.textEditorElement=null}},{key:"handleBlur",value:function(e){this.textEditorElement&&this.handleText(e)}},{key:"handleClick",value:function(e){this.textElement||this.layer.selectedElementName||(this.layer.addMode=!0,this.renderTextElement(e),this.layer.pageDiv.append(this.textElement),this.textEditorElement.focus())}},{key:"setTextEditor",value:function(){var e=document.createElement("div");this.textElementContainer=e,this.setCss(e,{position:"absolute",left:"16px",top:"28px",border:"2px solid #FF0000",outline:"none",padding:"0 8px 28px",borderRadius:"4px",background:"#FFFFFF",whiteSpace:"pre-wrap",textAlign:"left"});var n=document.createElement("div");n.className="text-title",n.innerText=this.layer.annotationStore.$t("header.note"),e.append(n);var r=document.createElement("div");r.setAttribute("role","textbox"),r.setAttribute("contenteditable",!0),r.setAttribute("spellcheck",!1),this.setCss(r,{width:"290px",height:"110px",fontSize:"16px",color:"#000",lineHeight:"1.2em",outline:"none",overflow:"auto","-webkit-user-select":"text"}),r.className="text-editor",this.textEditorElement=r,e.append(r),r.addEventListener("paste",this.onPaste),onClickOutside([this.textElementContainer,this.textElement],this.onBlur.bind(this))}},{key:"setCss",value:function(e,n){if(e&&n)for(var r in n)e.style[r]=n[r]}},{key:"renderTextElement",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e);this.start={x:n.x-12,y:n.y+12};var r=document.createElement("div");this.setCss(r,{position:"absolute",left:n.x-12+"px",top:n.y-12+"px",zIndex:6,color:"#FF0000"}),this.layer.eventBus.dispatch("textAdd",{left:n.x-12,top:n.y-12}),r.innerHTML=this.textNoteStr,r.className="text",this.textElement=r,this.setTextEditor(n),this.textElement.append(this.textElementContainer)}},{key:"handlePaste",value:function(e){pastePlainText(e)}}])}(),TextField=function(e){function n(s){var u,d=s.annotation,f=s.layer,g=s.show,m=g!==void 0&&g,y=s.highlight;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:d,layer:f}])).hidden=!0,u.initial=!1,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=m,u.highlight=y,u.onMousedown=u.handleMouseDown.bind(u),u.onMouseup=u.handleMouseUp.bind(u),u.onMousemove=u.handleMouseMove.bind(u),u.onDelete=u.handleDelete.bind(u),u.onBlur=u.handleBlur.bind(u),u.handlePropertyPanel=u.handlePropertyPanel.bind(u),u.setProperty=u.setProperty.bind(u),u.setHighlight=u.setHighlight.bind(u),u.render(),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight);var s=this.annotation;s.contents||(s.contents=""),"required"in s||(s.required=0),s.backgroundColor||(s.backgroundColor="transparent"),s.textAlignment||(s.textAlignment="left"),s.isBold&&s.isItalic?s.fontStyle="boldItalic":s.isBold?s.fontStyle="bold":s.isItalic?s.fontStyle="italic":s.fontStyle="normal";var u=this.getActualRect(this.layer.viewport.scale),d=u.start,f=u.end;this.start=d,this.end=f;var g,m=this.calculate(d,f),y=document.createElement("div");y.id=s.name,y.className="annotation",y.style.top=m.top+"px",y.style.left=m.left+"px",y.style.width=m.width+"px",y.style.height=m.height+"px",y.style.backgroundColor=this.highlight?"#4982E54D":"",y.style.overflow="hidden",this.annotationContainer=y,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),g=createElement("div",{left:0,top:0,width:"".concat(Math.abs(m.width),"px"),height:"".concat(Math.abs(m.height),"px"),position:"relative"}),this.shapeElement=g,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),this.setMultiLine(s.isMultiLine),this.shapeElement.append(this.textContainer),this.textContainer.addEventListener("blur",this.onBlur),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var v=m.left+m.width-30+"px",_=m.top+m.height+8+"px";this.deletetButton.style.left=v,this.deletetButton.style.top=_;var w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.style.position="absolute",w.style.zIndex=1,w.style.left="".concat(m.left-4,"px"),w.style.top="".concat(m.top-4,"px"),w.style.width="".concat(m.width+8,"px"),w.style.height="".concat(m.height+8,"px"),this.outerLine=w,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:m.width,height:m.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+1,y:m.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:m.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:m.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(s.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):s.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"getActualRect",value:function(s){var u=this.annotation.rect,d=u.left,f=u.top,g=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},s),end:getActualPoint({x:g,y:m},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u});this.initRect=d;var f=(this.annotation.borderWidth||1)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"getInitialPoint",value:function(){var s,u,d,f,g=this.layer.viewport.scale,m=this.start.x,y=this.start.y,v=this.end.x,_=this.end.y,w=this.layer.viewport,x=w.width,k=w.height,S=w.rotation;return S===0?(s=m/g,u=y/g,d=v/g,f=_/g):S===90?(s=y/g,u=m/g,d=_/g,f=v/g):S===180?(s=(x-m)/g,u=y/g,d=(x-v)/g,f=_/g):(s=(k-y)/g,u=(x-m)/g,d=(k-_)/g,f=(x-v)/g),{start:{x:s,y:u},end:{x:d,y:f}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var u=_objectSpread2$1({},s);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(s){var u=this;if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(s==null?void 0:s.target)))if(this.layer.documentViewer.toolMode==="form"){this.hidden=!1,this.updateTool(),document.getElementsByClassName("right-panel")[0].className.indexOf("closed")!==-1&&document.getElementById("propertyPanelButton").click();var d=[this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]];this.layer.eventBus._on("textfieldPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp(d,this.handleOutside.bind(this)),this.textContainer.style.pointerEvents="none",this.textContainer.style.cursor="pointer"}else setTimeout(function(){u.textContainer.focus(),u.textContainer.setSelectionRange(u.textContainer.value.length,u.textContainer.value.length)},0),this.textContainer.style.pointerEvents="auto",this.textContainer.style.cursor="text",this.textContainer.style.opacity="",this.imgEle.style.opacity=0}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(document.getElementById("propertyPanelButton").click(),this.layer.eventBus.dispatch("propertyChange",null)),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("textfieldPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleBlur",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,g,m,y,v,_,w,x=this;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:for(u=null,d=0,f=0,this.annotation.contents!==this.textContainer.value&&(this.annotation.contents=this.textContainer.value,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{type:"textfield",operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,contents:this.annotation.contents}}),this.getImage()),g=Object.values(this.layer.documentViewer.annotations).reduce(function(S,M){return S.concat(M)},[]),m=g.findIndex(function(S){return S.name===x.annotation.name}),y=m+1;y<g.length;y++)(v=g[y]).type!=="textfield"||v.contents||(this.annotation.contents&&!u&&(u=v),d++,v.required&&f++);for(_=0;_<m;_++)(w=g[_]).type!=="textfield"||w.contents||(!u&&(u=w),d++,w.required&&f++);this.layer.documentViewer.isFillConsecutively&&u&&this.layer.documentViewer.jumpToAnnotation(u),this.annotation.contents||(d++,this.annotation.required&&f++),this.layer.eventBus.dispatch("textfieldsFilledComplete",{unFilledAllNumber:d,unFilledNumber:f}),this.textContainer.style.pointerEvents="none",this.textContainer.style.cursor="pointer",this.textContainer.style.opacity=0,this.imgEle.style.opacity="";case 15:case"end":return k.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"handleMouseDown",value:function(s){this.layer.tool&&s.stopPropagation();var u=s.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(s),g=f.pageX,m=f.pageY;this.startState={operator:u,clickX:g,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(s){s.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,g=this.layer.documentViewer.getScrollViewElement(),m=g.scrollTop;d=d+g.scrollLeft-this.scrollLeft,f=f+m-this.scrollTop;var y=this.start,v=this.end,_=this.startState,w=this.layer.viewport,x=w.width,k=w.height;if(_.operator==="nw-resize"){var S=d-(_.clickX-this.start.x),M=f-(_.clickY-this.start.y);S=Math.min(v.x-5,S),S=Math.max(0,S),M=Math.min(v.y-5,M),M=Math.max(0,M),this.update({start:{x:S,y:M},end:v})}else if(_.operator==="w-resize"){var E=d-(_.clickX-this.start.x);E=Math.min(v.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:y.y},end:v})}else if(_.operator==="sw-resize"){var P=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);P=Math.min(v.x-5,P),P=Math.max(0,P),T=Math.min(k,T),T=Math.max(y.y+5,T),this.update({start:{x:P,y:y.y},end:{x:v.x,y:T}})}else if(_.operator==="s-resize"){var D=f-(_.clickY-this.end.y);D=Math.min(k,D),D=Math.max(y.y+5,D),this.update({start:y,end:{x:v.x,y:D}})}else if(_.operator==="se-resize"){var F=d-(_.clickX-this.end.x),I=f-(_.clickY-this.end.y);F=Math.min(x,F),F=Math.max(y.x+5,F),I=Math.min(k,I),I=Math.max(y.y+5,I),this.update({start:y,end:{x:F,y:I}})}else if(_.operator==="e-resize"){var N=d-(_.clickX-this.end.x);N=Math.min(x,N),N=Math.max(y.x+5,N),this.update({start:y,end:{x:N,y:v.y}})}else if(_.operator==="ne-resize"){var q=d-(_.clickX-this.end.x),Y=f-(_.clickY-this.start.y);q=Math.min(x,q),q=Math.max(y.x+5,q),Y=Math.min(v.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:y.x,y:Y},end:{x:q,y:v.y}})}else if(_.operator==="n-resize"){var Z=f-(_.clickY-this.start.y);Z=Math.min(v.y-5,Z),Z=Math.max(0,Z),this.update({start:{x:y.x,y:Z},end:v})}else if(_.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(s),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(y.x-v.x),Q=Math.abs(y.y-v.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y)):fe+2===Se&&(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=d-(_.clickX-this.start.x),ne=f-(_.clickY-this.start.y),le=d-(_.clickX-this.end.x),J=f-(_.clickY-this.end.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;f>_.clickY?Ve=(Ve=g.offsetHeight-(Be.y-g.scrollTop-g.offsetTop))<100?5:0:f<_.clickY&&(Ve=(Ve=Ne.y-g.scrollTop-g.offsetTop)<100?-5:0),d>_.clickX?be=(be=g.offsetWidth-(Be.x-g.scrollLeft-g.offsetLeft))<100?5:0:d<_.clickX&&(be=(be=Ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(be||Ve)&&(g.scrollTop+=Ve,g.scrollLeft+=be);var De={width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)};j<le?(j=Math.max(0,j),j=Math.min(x-De.width,j),le=Math.max(De.width,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-De.width,le),j=Math.max(De.width,j),j=Math.min(x,j)),ne<J?(ne=Math.max(0,ne),ne=Math.min(k-De.height,ne),J=Math.max(De.height,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-De.height,J),ne=Math.max(De.height,ne),ne=Math.min(k,ne))}this.update({start:{x:j,y:ne},end:{x:le,y:J}})}_.clickX=d,_.clickY=f}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",u)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(s){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var u=this.annotation,d=this.getInitialPoint(),f=d.start,g=d.end,m={left:f.x,top:f.y,right:g.x,bottom:g.y};if(m!==u.rect||u.pageIndex!==this.layer.page)if(u.rect=m,u.pageIndex!==this.layer.page){var y={type:"delete",annotation:{operate:"del-annot",name:u.name,pageIndex:u.pageIndex,annotPtr:u.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",y);var v=Object.assign({},u);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-form",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,rect:m}}),this.getImage(!0)}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.start=u,this.end=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.annotationContainer.style.width="".concat(f.width,"px"),this.annotationContainer.style.height="".concat(f.height,"px"),this.outerLine.style.left="".concat(f.left-4,"px"),this.outerLine.style.top="".concat(f.top-4,"px"),this.outerLine.style.width="".concat(f.width+8,"px"),this.outerLine.style.height="".concat(f.height+8,"px");var g=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width),this.moveRect.setAttribute("height",f.height),this.LeftRect.setAttribute("y",f.height/2+1),this.bottomLeftRect.setAttribute("y",f.height+1),this.bottomRect.setAttribute("x",f.width/2+1),this.bottomRect.setAttribute("y",f.height+1),this.bottomRightRect.setAttribute("x",f.width+1),this.bottomRightRect.setAttribute("y",f.height+1),this.rightRect.setAttribute("x",f.width+1),this.rightRect.setAttribute("y",f.height/2+1),this.topRightRect.setAttribute("x",f.width+1),this.topRect.setAttribute("x",f.width/2+1)}},{key:"handlePropertyPanel",value:function(s){var u=this;if(this.layer.annotationStore.selectedElementName===this.annotation.name){var d=this.annotation,f=0;for(var g in s)for(var m in this.annotation)if(m===g&&this.annotation[m]!==s[g]){if(s.contents!==""&&(this.annotation[m]=s[g],f++),g==="backgroundColor"&&(this.textContainer.style[g]=s[g]),g==="textAlignment"&&(this.textContainer.style.textAlign=s[g]),g==="fontSize"&&(this.textContainer.style.fontSize=s[g]+"px"),g==="color"&&(this.textContainer.style.color=s[g]),g==="fontName"&&(this.textContainer.style.fontFamily=s[g]),g==="fontStyle"){var y=s[g];y==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold",d.isBold=!0,d.isItalic=!0):y==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold",d.isBold=!0,d.isItalic=!1):y==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal",d.isBold=!1,d.isItalic=!0):(d.isItalic=!1,d.isBold=!1,this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}g==="contents"&&(this.textContainer.nodeName==="INPUT"?this.textContainer.value=s[g]:this.textContainer.innerHTML=this.annotation.contents),g==="isMultiLine"&&this.changeElementMultiLine(s[g])}if(f>0){var v={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr},_=["fontSize","fontName","color","fontStyle"].some(function(q){return s[q]});if(_){v.fontSize=d.fontSize,v.color=d.color;var w={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=d.fontName;d.isBold&&d.isItalic?v.fontName=w[x].boldItalic:d.isBold?v.fontName=w[x].bold:d.isItalic?v.fontName=w[x].italic:v.fontName=w[x]?w[x].normal:x,delete s.fontName}var k=Object.assign({},v,s),S=0,M=0;if("contents"in k&&k.contents){for(var E=Object.values(this.layer.documentViewer.annotations).reduce(function(q,Y){return q.concat(Y)},[]),P=E.findIndex(function(q){return q.name===u.annotation.name}),T=null,D=P+1;D<E.length;D++){var F=E[D];F.type!=="textfield"||F.contents||(!T&&(T=F),S++,F.required&&M++)}for(var I=0;I<P;I++){var N=E[I];N.type!=="textfield"||N.contents||(!T&&(T=N),S++,N.required&&M++)}this.layer.documentViewer.isFillConsecutively&&T&&this.layer.documentViewer.jumpToAnnotation(T)}"contents"in k&&(k.contents||(S++,this.annotation.required&&M++),this.layer.eventBus.dispatch("textfieldsFilledComplete",{unFilledAllNumber:S,unFilledNumber:M})),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:k}),this.getImage()}}}},{key:"changeElementMultiLine",value:function(s){this.textContainer.remove(),this.textContainer=null,this.setMultiLine(s),this.shapeElement.append(this.textContainer),this.textContainer.removeEventListener("blur",this.onBlur),this.textContainer.addEventListener("blur",this.onBlur)}},{key:"setMultiLine",value:function(s){var u=null;s?(u=createElement("textarea",{position:"absolute",left:0,top:0,width:"100%",height:"100%",outline:"none",borderColor:this.annotation.borderColor,borderStyle:this.annotation.borderStyle,borderWidth:this.annotation.borderWidth+"px",borderRadius:0,color:this.annotation.color,backgroundColor:this.annotation.backgroundColor,pointerEvents:"none",cursor:"pointer",resize:"none",overflowWrap:"break-word",textAlign:this.annotation.textAlignment,fontSize:this.annotation.fontSize||"12px",fontWeight:this.annotation.isBold?"bold":"normal",fontStyle:this.annotation.isItalic?"italic":"normal",fontFamily:this.annotation.fontName,opacity:0})).innerHTML=this.annotation.contents:u=createElement("input",{position:"absolute",left:0,top:0,width:"100%",height:"100%",outline:"none",borderColor:this.annotation.borderColor,borderStyle:this.annotation.borderStyle,borderWidth:this.annotation.borderWidth+"px",borderRadius:0,color:this.annotation.color,backgroundColor:this.annotation.backgroundColor,pointerEvents:"none",cursor:"pointer",textAlign:this.annotation.textAlignment,fontSize:this.annotation.fontSize||"12px",fontWeight:this.annotation.isBold?"bold":"normal",fontStyle:this.annotation.isItalic?"italic":"normal",fontFamily:this.annotation.fontName,opacity:0},{value:this.annotation.contents}),this.textContainer=u;var d=this.annotation.fontStyle;d==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold"):d==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold"):d==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal"):(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}},{key:"setProperty",value:function(s){if(s.name===this.annotation.name){for(var u in s)for(var d in this.annotation)if(d===u&&this.annotation[d]!==s[u]){if(s.contents!==""&&(this.annotation[d]=s[u],updatePropsNum++),u==="backgroundColor"&&(this.textContainer.style[u]=s[u]),u==="textAlignment"&&(this.textContainer.style.textAlign=s[u]),u==="fontSize"&&(this.textContainer.style.fontSize=s[u]+"px"),u==="color"&&(this.textContainer.style.color=s[u]),u==="fontName"&&(this.textContainer.style.fontFamily=s[u]),u==="fontStyle"){var f=s[u];f==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold",annotation.isBold=!0,annotation.isItalic=!0):f==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold",annotation.isBold=!0,annotation.isItalic=!1):f==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal",annotation.isBold=!1,annotation.isItalic=!0):(annotation.isItalic=!1,annotation.isBold=!1,this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}u==="contents"&&(this.textContainer.nodeName==="INPUT"?this.textContainer.value=s[u]:this.textContainer.innerHTML=this.annotation.contents),u==="isMultiLine"&&this.changeElementMultiLine(s[u])}var g={operate:"mod-form",pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr},m=["fontSize","fontName","color","fontStyle"].some(function(w){return s[w]});if(m){g.fontSize=annotation.fontSize,g.color=annotation.color;var y={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},v=annotation.fontName;annotation.isBold&&annotation.isItalic?g.fontName=y[v].boldItalic:annotation.isBold?g.fontName=y[v].bold:annotation.isItalic?g.fontName=y[v].italic:g.fontName=y[v]?y[v].normal:v,delete s.fontName}var _=Object.assign({},g,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:_}),this.getImage()}}},{key:"setHighlight",value:function(s){this.highlight=s,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.initRect,f={width:parseInt(d.width*this.layer.ratio),height:parseInt(d.height*this.layer.ratio)},k.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,width:f.width,height:f.height});case 4:g=k.sent,(m=document.createElement("canvas")).style.width=f.width+"px",m.style.height=f.height+"px",m.width=f.width,m.height=f.height,(y=m.getContext("2d")).clearRect(0,0,m.width,m.height),(v=y.createImageData(f.width,f.height)).data.set(g),y.putImageData(v,0,0),_=m.toDataURL("image/png",1),u&&(w=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(w.width,"px"),this.shapeElement.style.height="".concat(w.height,"px")),this.imgEle?this.imgEle.src=_:((x=document.createElement("img")).style.width="100%",x.style.height="100%",x.style.pointerEvents="none",x.style.display="block",x.src=_,this.imgEle=x,this.shapeElement.append(this.imgEle));case 18:case"end":return k.stop()}},s,this)})),function(s){return r.apply(this,arguments)})}]);var r,o}(),AddTextField=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initTextfieldName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initTextfieldName",this.initTextfieldName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initTextfieldName",this.initTextfieldName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={left:s.x,top:s.y,right:u.x,bottom:u.y},f={operate:"add-form",type:"textfield",pageIndex:this.layer.page,date:new Date,rect:d,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,textAlignment:"left",textFieldSpe:0,isMultiLine:!1};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute"});this.shapeEle=x,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(s,u){return s.concat(u)},[]).filter(function(s){return s.type==="textfield"}),r=function(){var s="Text Field"+(o+1);if(n.every(function(u){return u.fieldName!==s}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Text Field"+e}}])}(),CheckBox=function(e){function n(s){var u,d=s.annotation,f=s.layer,g=s.show,m=g!==void 0&&g,y=s.highlight;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:d,layer:f}])).hidden=!0,u.initial=!1,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=m,u.highlight=y,u.onMousedown=u.handleMouseDown.bind(u),u.onMouseup=u.handleMouseUp.bind(u),u.onMousemove=u.handleMouseMove.bind(u),u.onDelete=u.handleDelete.bind(u),u.handlePropertyPanel=u.handlePropertyPanel.bind(u),u.setProperty=u.setProperty.bind(u),u.setHighlight=u.setHighlight.bind(u),u.render(),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight),(u=this.annotation).fieldName||(u.fieldName="Check Box_"+u.date.toLocaleString()),d=this.getActualRect(this.layer.viewport.scale),f=d.start,g=d.end,this.start=f,this.end=g,m=this.calculate(f,g),(y=document.createElement("div")).id=u.name,y.className="annotation",y.style.top=m.top+"px",y.style.left=m.left+"px",y.style.width=m.width+"px",y.style.height=m.height+"px",y.style.backgroundColor=this.highlight?"#4982E54D":"",y.style.overflow="hidden",this.annotationContainer=y,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),v=createElement("div",{left:0,top:0,width:"".concat(Math.abs(m.width),"px"),height:"".concat(Math.abs(m.height),"px"),position:"relative"}),this.shapeElement=v,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),_=createElement("div",{position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",borderColor:u.borderColor,borderWidth:"1px"|u.borderWidth,borderStyle:u.borderStyle,backgroundColor:u.backgroundColor,opacity:0}),this.borderElement=_,w=createSvg("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none"},{width:"".concat(m.width/2,"px"),height:"".concat(m.height/2,"px")}),this.svgElement=w,x=createSvg("path",{d:"M14.0908 1.59619 L5.59625 10.0908 L1.00006 5.49457",stroke:"#43474D","stroke-width":"2"}),this.checkPath=x,k=createSvg("path",{d:"M0 7C0 3.13401 3.13401 0 7 0C10.866 0 14 3.13401 14 7C14 10.866 10.866 14 7 14C3.13401 14 0 10.866 0 7Z",fill:"#43474D"}),this.circlePath=k,S=createSvg("path",{d:"M6.00001 7.41421L10.1924 11.6066L11.6066 10.1924L7.41422 6L11.6066 1.80762L10.1924 0.393403L6.00001 4.58579L1.70711 0.292895L0.292897 1.70711L4.58579 6L0.292897 10.2929L1.70711 11.7071L6.00001 7.41421Z",fill:"#43474D","fill-rule":"evenodd","clip-rule":"evenodd"}),this.crossPath=S,M=createSvg("path",{d:"M0 7.07108L7.07107 8.99256e-06L14.1421 7.07108L7.07107 14.1421L0 7.07108Z",fill:"#43474D"}),this.diamondPath=M,E=createSvg("rect",{width:"12",height:"12",fill:"#43474D"}),this.squarePath=E,P=createSvg("path",{d:"M8 0L10.3794 4.7251L15.6085 5.52786L11.8499 9.2509L12.7023 14.4721L8 12.048L3.29772 14.4721L4.15012 9.2509L0.391548 5.52786L5.62065 4.7251L8 0Z",fill:"#43474D"}),this.starPath=P,this.setSelectedShape(u.checkStyle),u.isChecked===0&&(this.svgElement.style.display="none"),this.borderElement.append(this.svgElement),this.shapeElement.append(this.borderElement),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,T=m.left+m.width-30+"px",D=m.top+m.height+8+"px",this.deletetButton.style.left=T,this.deletetButton.style.top=D,(F=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",F.style.zIndex=1,F.style.left="".concat(m.left-4,"px"),F.style.top="".concat(m.top-4,"px"),F.style.width="".concat(m.width+8,"px"),F.style.height="".concat(m.height+8,"px"),this.outerLine=F,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:m.width,height:m.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+1,y:m.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:m.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:m.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(u.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):u.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 84:case"end":return I.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(s){var u=this.annotation.rect,d=u.left,f=u.top,g=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},s),end:getActualPoint({x:g,y:m},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u});this.initRect=d;var f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"getInitialPoint",value:function(){var s,u,d,f,g=this.layer.viewport.scale,m=this.start.x,y=this.start.y,v=this.end.x,_=this.end.y,w=this.layer.viewport,x=w.width,k=w.height,S=w.rotation;return S===0?(s=m/g,u=y/g,d=v/g,f=_/g):S===90?(s=y/g,u=m/g,d=_/g,f=v/g):S===180?(s=(x-m)/g,u=y/g,d=(x-v)/g,f=_/g):(s=(k-y)/g,u=(x-m)/g,d=(k-_)/g,f=(x-v)/g),{start:{x:s,y:u},end:{x:d,y:f}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var u=_objectSpread2$1({},s);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(s){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(s==null?void 0:s.target)))if(this.layer.documentViewer.toolMode==="form")this.hidden=!1,this.updateTool(),this.judgeCheckboxIsOne(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.layer.eventBus._on("checkboxPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else{this.annotation.isChecked=this.annotation.isChecked==0?1:0,this.annotation.isChecked==1?this.svgElement.style.display="block":this.svgElement.style.display="none";var u={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type,isChecked:this.annotation.isChecked};this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:u}),this.getImage()}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var s,u,d;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(s=this.outerLine)===null||s===void 0||s.removeEventListener("mousedown",this.onMousedown),(u=this.outerLine)===null||u===void 0||u.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("checkboxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(s){this.layer.tool&&s.stopPropagation();var u=s.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(s),g=f.pageX,m=f.pageY;this.startState={operator:u,clickX:g,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(s){s.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,g=this.layer.documentViewer.getScrollViewElement(),m=g.scrollTop;d=d+g.scrollLeft-this.scrollLeft,f=f+m-this.scrollTop;var y=this.start,v=this.end,_=this.startState,w=this.layer.viewport,x=w.width,k=w.height;if(_.operator==="nw-resize"){var S=d-(_.clickX-this.start.x),M=f-(_.clickY-this.start.y);S=Math.min(v.x-5,S),S=Math.max(0,S),M=Math.min(v.y-5,M),M=Math.max(0,M),this.update({start:{x:S,y:M},end:v})}else if(_.operator==="w-resize"){var E=d-(_.clickX-this.start.x);E=Math.min(v.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:y.y},end:v})}else if(_.operator==="sw-resize"){var P=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);P=Math.min(v.x-5,P),P=Math.max(0,P),T=Math.min(k,T),T=Math.max(y.y+5,T),this.update({start:{x:P,y:y.y},end:{x:v.x,y:T}})}else if(_.operator==="s-resize"){var D=f-(_.clickY-this.end.y);D=Math.min(k,D),D=Math.max(y.y+5,D),this.update({start:y,end:{x:v.x,y:D}})}else if(_.operator==="se-resize"){var F=d-(_.clickX-this.end.x),I=f-(_.clickY-this.end.y);F=Math.min(x,F),F=Math.max(y.x+5,F),I=Math.min(k,I),I=Math.max(y.y+5,I),this.update({start:y,end:{x:F,y:I}})}else if(_.operator==="e-resize"){var N=d-(_.clickX-this.end.x);N=Math.min(x,N),N=Math.max(y.x+5,N),this.update({start:y,end:{x:N,y:v.y}})}else if(_.operator==="ne-resize"){var q=d-(_.clickX-this.end.x),Y=f-(_.clickY-this.start.y);q=Math.min(x,q),q=Math.max(y.x+5,q),Y=Math.min(v.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:y.x,y:Y},end:{x:q,y:v.y}})}else if(_.operator==="n-resize"){var Z=f-(_.clickY-this.start.y);Z=Math.min(v.y-5,Z),Z=Math.max(0,Z),this.update({start:{x:y.x,y:Z},end:v})}else if(_.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(s),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(y.x-v.x),Q=Math.abs(y.y-v.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y)):fe+2===Se&&(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=d-(_.clickX-this.start.x),ne=f-(_.clickY-this.start.y),le=d-(_.clickX-this.end.x),J=f-(_.clickY-this.end.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;f>_.clickY?Ve=(Ve=g.offsetHeight-(Be.y-g.scrollTop-g.offsetTop))<100?5:0:f<_.clickY&&(Ve=(Ve=Ne.y-g.scrollTop-g.offsetTop)<100?-5:0),d>_.clickX?be=(be=g.offsetWidth-(Be.x-g.scrollLeft-g.offsetLeft))<100?5:0:d<_.clickX&&(be=(be=Ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(be||Ve)&&(g.scrollTop+=Ve,g.scrollLeft+=be);var De={width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)};j<le?(j=Math.max(0,j),j=Math.min(x-De.width,j),le=Math.max(De.width,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-De.width,le),j=Math.max(De.width,j),j=Math.min(x,j)),ne<J?(ne=Math.max(0,ne),ne=Math.min(k-De.height,ne),J=Math.max(De.height,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-De.height,J),ne=Math.max(De.height,ne),ne=Math.min(k,ne))}this.update({start:{x:j,y:ne},end:{x:le,y:J}})}_.clickX=d,_.clickY=f}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",u)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(s){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var u=this.annotation,d=this.getInitialPoint(),f=d.start,g=d.end,m={left:f.x,top:f.y,right:g.x,bottom:g.y};if(m!==u.rect||u.pageIndex!==this.layer.page)if(u.rect=m,u.pageIndex!==this.layer.page){var y={type:"delete",annotation:{operate:"del-annot",name:u.name,pageIndex:u.pageIndex,annotPtr:u.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",y);var v=Object.assign({},u);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-form",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,rect:m}}),this.getImage(!0)}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.start=u,this.end=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.annotationContainer.style.width="".concat(f.width,"px"),this.annotationContainer.style.height="".concat(f.height,"px"),this.outerLine.style.left="".concat(f.left-4,"px"),this.outerLine.style.top="".concat(f.top-4,"px"),this.outerLine.style.width="".concat(f.width+8,"px"),this.outerLine.style.height="".concat(f.height+8,"px");var g=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width),this.moveRect.setAttribute("height",f.height),this.LeftRect.setAttribute("y",f.height/2+1),this.bottomLeftRect.setAttribute("y",f.height+1),this.bottomRect.setAttribute("x",f.width/2+1),this.bottomRect.setAttribute("y",f.height+1),this.bottomRightRect.setAttribute("x",f.width+1),this.bottomRightRect.setAttribute("y",f.height+1),this.rightRect.setAttribute("x",f.width+1),this.rightRect.setAttribute("y",f.height/2+1),this.topRightRect.setAttribute("x",f.width+1),this.topRect.setAttribute("x",f.width/2+1),this.svgElement.style.width="".concat(f.width/2,"px"),this.svgElement.style.height="".concat(f.height/2,"px")}},{key:"handlePropertyPanel",value:function(s){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var u=0;for(var d in s)for(var f in this.annotation)f===d&&this.annotation[f]!==s[d]&&d!=="fieldName"&&(this.annotation[f]=s[d],u++,d==="backgroundColor"&&(this.borderElement.style[d]=s[d]),d==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(s[d])),d==="isChecked"&&(s[d]?this.svgElement.style.display="block":this.svgElement.style.display="none")),f===d&&this.annotation[f]!==s[d]&&d==="fieldName"&&(this.judgeCheckboxIsOne(s[d]),this.isOne&&(this.annotation[f]=s[d],u++));if(u>0){var g={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},m=Object.assign({},g,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:m}),this.getImage()}}}},{key:"setSelectedShape",value:function(s){s===1?(this.svgElement.setAttribute("width","14"),this.svgElement.setAttribute("height","14"),this.svgElement.setAttribute("viewBox","0 0 14 14"),this.svgElement.append(this.circlePath)):s===2?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.crossPath)):s===3?(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 15"),this.svgElement.append(this.diamondPath)):s===4?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.squarePath)):s===5?(this.svgElement.setAttribute("width","16"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 16 15"),this.svgElement.append(this.starPath)):(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 12"),this.svgElement.append(this.checkPath))}},{key:"setProperty",value:function(s){if(s.name===this.annotation.name){var u=this.annotation;for(var d in s)for(var f in u)f===d&&u[f]!==s[d]&&(u[f]=s[d],d==="backgroundColor"&&(this.borderElement.style[d]=s[d]),d==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(s[d])),d==="isChecked"&&(s[d]?this.svgElement.style.display="block":this.svgElement.style.display="none"));var g={operate:"mod-form",pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,type:this.annotation.type},m=Object.assign({},g,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:m}),this.getImage()}}},{key:"judgeCheckboxIsOne",value:function(s){var u=s!=null?s:this.annotation.fieldName,d=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(y,v){return y.concat(v)},[]);this.isOne=!0;var f,g=_createForOfIteratorHelper(d);try{for(g.s();!(f=g.n()).done;){var m=f.value;if(m.hasOwnProperty("fieldName")&&m.fieldName===u&&m.name!==this.annotation.name&&m.type==="checkbox"){this.isOne=!1;break}}}catch(y){g.e(y)}finally{g.f()}this.layer.eventBus.dispatch("judgeCheckboxIsOne",this.isOne)}},{key:"setHighlight",value:function(s){this.highlight=s,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.initRect,f={width:parseInt(d.width*this.layer.ratio),height:parseInt(d.height*this.layer.ratio)},k.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,width:f.width,height:f.height});case 4:g=k.sent,(m=document.createElement("canvas")).style.width=f.width+"px",m.style.height=f.height+"px",m.width=f.width,m.height=f.height,(y=m.getContext("2d")).clearRect(0,0,m.width,m.height),(v=y.createImageData(f.width,f.height)).data.set(g),y.putImageData(v,0,0),_=m.toDataURL("image/png",1),u&&(w=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(w.width,"px"),this.shapeElement.style.height="".concat(w.height,"px")),this.imgEle?this.imgEle.src=_:((x=document.createElement("img")).style.width="100%",x.style.height="100%",x.style.pointerEvents="none",x.style.position="absolute",x.style.display="block",x.src=_,this.imgEle=x,this.shapeElement.append(this.imgEle));case 18:case"end":return k.stop()}},s,this)})),function(s){return r.apply(this,arguments)})}]);var r,o}(),AddCheckBox=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initCheckboxName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initCheckboxName",this.initCheckboxName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initCheckboxName",this.initCheckboxName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={left:s.x,top:s.y,right:u.x,bottom:u.y},f={operate:"add-form",type:"checkbox",pageIndex:this.layer.page,date:new Date,rect:d,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,isChecked:0,checkStyle:0};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=x,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(s,u){return s.concat(u)},[]).filter(function(s){return s.type==="checkbox"}),r=function(){var s="Check Box"+(o+1);if(n.every(function(u){return u.fieldName!==s}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Check Box"+e}}])}(),RadioButton=function(e){function n(s){var u,d=s.annotation,f=s.layer,g=s.show,m=g!==void 0&&g,y=s.highlight;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:d,layer:f}])).hidden=!0,u.initial=!1,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=m,u.highlight=y,u.onMousedown=u.handleMouseDown.bind(u),u.onMouseup=u.handleMouseUp.bind(u),u.onMousemove=u.handleMouseMove.bind(u),u.onDelete=u.handleDelete.bind(u),u.handlePropertyPanel=u.handlePropertyPanel.bind(u),u.setProperty=u.setProperty.bind(u),u.setHighlight=u.setHighlight.bind(u),u.render(),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight),u=this.annotation,this.annotation.fieldName||(this.annotation.fieldName="Group_"+this.annotation.date.toLocaleString()),d=this.getActualRect(this.layer.viewport.scale),f=d.start,g=d.end,this.start=f,this.end=g,m=this.calculate(f,g),(y=document.createElement("div")).id=u.name,y.className="annotation",y.style.top=m.top+"px",y.style.left=m.left+"px",y.style.width=m.width+"px",y.style.height=m.height+"px",y.style.backgroundColor=this.highlight?"#4982E54D":"",y.style.overflow="hidden",this.annotationContainer=y,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),v=createElement("div",{left:0,top:0,width:"".concat(Math.abs(m.width),"px"),height:"".concat(Math.abs(m.height),"px"),position:"relative"}),this.shapeElement=v,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),_=createElement("div",{position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",borderColor:u.borderColor,borderWidth:"1px"|u.borderWidth,borderStyle:u.borderStyle,borderRadius:"100%",backgroundColor:u.backgroundColor,opacity:0}),this.borderElement=_,w=createSvg("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none"},{width:"".concat(m.width/2,"px"),height:"".concat(m.height/2,"px")}),this.svgElement=w,x=createSvg("path",{d:"M14.0908 1.59619 L5.59625 10.0908 L1.00006 5.49457",stroke:"#43474D","stroke-width":"2"}),this.checkPath=x,k=createSvg("path",{d:"M0 7C0 3.13401 3.13401 0 7 0C10.866 0 14 3.13401 14 7C14 10.866 10.866 14 7 14C3.13401 14 0 10.866 0 7Z",fill:"#43474D"}),this.circlePath=k,S=createSvg("path",{d:"M6.00001 7.41421L10.1924 11.6066L11.6066 10.1924L7.41422 6L11.6066 1.80762L10.1924 0.393403L6.00001 4.58579L1.70711 0.292895L0.292897 1.70711L4.58579 6L0.292897 10.2929L1.70711 11.7071L6.00001 7.41421Z",fill:"#43474D","fill-rule":"evenodd","clip-rule":"evenodd"}),this.crossPath=S,M=createSvg("path",{d:"M0 7.07108L7.07107 8.99256e-06L14.1421 7.07108L7.07107 14.1421L0 7.07108Z",fill:"#43474D"}),this.diamondPath=M,E=createSvg("rect",{width:"12",height:"12",fill:"#43474D"}),this.squarePath=E,P=createSvg("path",{d:"M8 0L10.3794 4.7251L15.6085 5.52786L11.8499 9.2509L12.7023 14.4721L8 12.048L3.29772 14.4721L4.15012 9.2509L0.391548 5.52786L5.62065 4.7251L8 0Z",fill:"#43474D"}),this.starPath=P,this.setSelectedShape(u.checkStyle),u.isChecked==0&&(this.svgElement.style.display="none"),this.borderElement.append(this.svgElement),this.shapeElement.append(this.borderElement),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,T=m.left+m.width-30+"px",D=m.top+m.height+8+"px",this.deletetButton.style.left=T,this.deletetButton.style.top=D,(F=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",F.style.zIndex=1,F.style.left="".concat(m.left-4,"px"),F.style.top="".concat(m.top-4,"px"),F.style.width="".concat(m.width+8,"px"),F.style.height="".concat(m.height+8,"px"),this.outerLine=F,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:m.width,height:m.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+1,y:m.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:m.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:m.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 84:case"end":return I.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(s){var u=this.annotation.rect,d=u.left,f=u.top,g=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},s),end:getActualPoint({x:g,y:m},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u});this.initRect=d;var f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"getInitialPoint",value:function(){var s,u,d,f,g=this.layer.viewport.scale,m=this.start.x,y=this.start.y,v=this.end.x,_=this.end.y,w=this.layer.viewport,x=w.width,k=w.height,S=w.rotation;return S===0?(s=m/g,u=y/g,d=v/g,f=_/g):S===90?(s=y/g,u=m/g,d=_/g,f=v/g):S===180?(s=(x-m)/g,u=y/g,d=(x-v)/g,f=_/g):(s=(k-y)/g,u=(x-m)/g,d=(k-_)/g,f=(x-v)/g),{start:{x:s,y:u},end:{x:d,y:f}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var u=_objectSpread2$1({},s);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(s){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(s==null?void 0:s.target)))if(this.layer.documentViewer.toolMode==="form")this.hidden=!1,this.updateTool(),this.judgeRadioBtnIsOne(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.layer.eventBus._on("radioButtonPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else{this.annotation.isChecked=this.annotation.isChecked==0?1:0,this.annotation.isChecked==0?this.svgElement.style.display="none":(this.svgElement.style.display="block",this.cancelSameGroupButton());var u={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type,isChecked:this.annotation.isChecked};this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:u}),this.getImage()}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var s,u,d;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(s=this.outerLine)===null||s===void 0||s.removeEventListener("mousedown",this.onMousedown),(u=this.outerLine)===null||u===void 0||u.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("radioButtonPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(s){this.layer.tool&&s.stopPropagation();var u=s.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(s),g=f.pageX,m=f.pageY;this.startState={operator:u,clickX:g,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(s){s.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,g=this.layer.documentViewer.getScrollViewElement(),m=g.scrollTop;d=d+g.scrollLeft-this.scrollLeft,f=f+m-this.scrollTop;var y=this.start,v=this.end,_=this.startState,w=this.layer.viewport,x=w.width,k=w.height;if(_.operator==="nw-resize"){var S=d-(_.clickX-this.start.x),M=f-(_.clickY-this.start.y);S=Math.min(v.x-5,S),S=Math.max(0,S),M=Math.min(v.y-5,M),M=Math.max(0,M),this.update({start:{x:S,y:M},end:v})}else if(_.operator==="w-resize"){var E=d-(_.clickX-this.start.x);E=Math.min(v.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:y.y},end:v})}else if(_.operator==="sw-resize"){var P=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);P=Math.min(v.x-5,P),P=Math.max(0,P),T=Math.min(k,T),T=Math.max(y.y+5,T),this.update({start:{x:P,y:y.y},end:{x:v.x,y:T}})}else if(_.operator==="s-resize"){var D=f-(_.clickY-this.end.y);D=Math.min(k,D),D=Math.max(y.y+5,D),this.update({start:y,end:{x:v.x,y:D}})}else if(_.operator==="se-resize"){var F=d-(_.clickX-this.end.x),I=f-(_.clickY-this.end.y);F=Math.min(x,F),F=Math.max(y.x+5,F),I=Math.min(k,I),I=Math.max(y.y+5,I),this.update({start:y,end:{x:F,y:I}})}else if(_.operator==="e-resize"){var N=d-(_.clickX-this.end.x);N=Math.min(x,N),N=Math.max(y.x+5,N),this.update({start:y,end:{x:N,y:v.y}})}else if(_.operator==="ne-resize"){var q=d-(_.clickX-this.end.x),Y=f-(_.clickY-this.start.y);q=Math.min(x,q),q=Math.max(y.x+5,q),Y=Math.min(v.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:y.x,y:Y},end:{x:q,y:v.y}})}else if(_.operator==="n-resize"){var Z=f-(_.clickY-this.start.y);Z=Math.min(v.y-5,Z),Z=Math.max(0,Z),this.update({start:{x:y.x,y:Z},end:v})}else if(_.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(s),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(y.x-v.x),Q=Math.abs(y.y-v.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y)):fe+2===Se&&(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=d-(_.clickX-this.start.x),ne=f-(_.clickY-this.start.y),le=d-(_.clickX-this.end.x),J=f-(_.clickY-this.end.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;f>_.clickY?Ve=(Ve=g.offsetHeight-(Be.y-g.scrollTop-g.offsetTop))<100?5:0:f<_.clickY&&(Ve=(Ve=Ne.y-g.scrollTop-g.offsetTop)<100?-5:0),d>_.clickX?be=(be=g.offsetWidth-(Be.x-g.scrollLeft-g.offsetLeft))<100?5:0:d<_.clickX&&(be=(be=Ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(be||Ve)&&(g.scrollTop+=Ve,g.scrollLeft+=be);var De={width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)};j<le?(j=Math.max(0,j),j=Math.min(x-De.width,j),le=Math.max(De.width,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-De.width,le),j=Math.max(De.width,j),j=Math.min(x,j)),ne<J?(ne=Math.max(0,ne),ne=Math.min(k-De.height,ne),J=Math.max(De.height,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-De.height,J),ne=Math.max(De.height,ne),ne=Math.min(k,ne))}this.update({start:{x:j,y:ne},end:{x:le,y:J}})}_.clickX=d,_.clickY=f}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",u)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(s){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var u=this.annotation,d=this.getInitialPoint(),f=d.start,g=d.end,m={left:f.x,top:f.y,right:g.x,bottom:g.y};if(m!==u.rect||u.pageIndex!==this.layer.page)if(u.rect=m,u.pageIndex!==this.layer.page){var y={type:"delete",annotation:{operate:"del-annot",name:u.name,pageIndex:u.pageIndex,annotPtr:u.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",y);var v=Object.assign({},u);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-form",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,rect:m}}),this.getImage(!0)}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.start=u,this.end=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.annotationContainer.style.width="".concat(f.width,"px"),this.annotationContainer.style.height="".concat(f.height,"px"),this.outerLine.style.left="".concat(f.left-4,"px"),this.outerLine.style.top="".concat(f.top-4,"px"),this.outerLine.style.width="".concat(f.width+8,"px"),this.outerLine.style.height="".concat(f.height+8,"px");var g=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width),this.moveRect.setAttribute("height",f.height),this.LeftRect.setAttribute("y",f.height/2+1),this.bottomLeftRect.setAttribute("y",f.height+1),this.bottomRect.setAttribute("x",f.width/2+1),this.bottomRect.setAttribute("y",f.height+1),this.bottomRightRect.setAttribute("x",f.width+1),this.bottomRightRect.setAttribute("y",f.height+1),this.rightRect.setAttribute("x",f.width+1),this.rightRect.setAttribute("y",f.height/2+1),this.topRightRect.setAttribute("x",f.width+1),this.topRect.setAttribute("x",f.width/2+1),this.svgElement.style.width="".concat(f.width/2,"px"),this.svgElement.style.height="".concat(f.height/2,"px")}},{key:"handlePropertyPanel",value:function(s){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var u=0;for(var d in s)for(var f in this.annotation)f===d&&this.annotation[f]!==s[d]&&(this.annotation[f]=s[d],u++,d==="backgroundColor"&&(this.borderElement.style[d]=s[d],s[d]===""&&(s.clearBackgroundColor=!0)),d==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(s[d])),d==="isChecked"&&(s[d]?(this.svgElement.style.display="block",this.cancelSameGroupButton()):this.svgElement.style.display="none"),d==="fieldName"&&this.judgeRadioBtnIsOne());if(u>0){var g={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},m=Object.assign({},g,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:m}),this.getImage()}}}},{key:"setSelectedShape",value:function(s){s===1?(this.svgElement.setAttribute("width","14"),this.svgElement.setAttribute("height","14"),this.svgElement.setAttribute("viewBox","0 0 14 14"),this.svgElement.append(this.circlePath)):s===2?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.crossPath)):s===3?(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 15"),this.svgElement.append(this.diamondPath)):s===4?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.squarePath)):s===5?(this.svgElement.setAttribute("width","16"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 16 15"),this.svgElement.append(this.starPath)):(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 12"),this.svgElement.append(this.checkPath))}},{key:"setProperty",value:function(s){if(s.name===this.annotation.name){for(var u in s)for(var d in this.annotation)d===u&&this.annotation[d]!==s[u]&&(this.annotation[d]=s[u],u==="backgroundColor"&&(this.borderElement.style[u]=s[u]),u==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(s[u])),u==="isChecked"&&(s[u]==0?this.svgElement.style.display="none":(this.svgElement.style.display="block",this.cancelSameGroupButton())),u==="fieldName"&&this.judgeRadioBtnIsOne());var f={operate:"mod-form",pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},g=Object.assign({},f,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:g}),this.getImage()}}},{key:"cancelSameGroupButton",value:function(){var s,u=this,d=_createForOfIteratorHelper(Object.values(this.layer.annotationStore.annotationsAll).reduce(function(g,m){return g.concat(m)},[]).filter(function(g){return g.fieldName===u.annotation.fieldName&&g.name!==u.annotation.name&&g.isChecked!=0&&g.type==="radiobutton"}));try{for(d.s();!(s=d.n()).done;){var f=s.value;this.layer.eventBus.dispatch("handleField",{id:f.name,key:"isChecked",value:0})}}catch(g){d.e(g)}finally{d.f()}}},{key:"judgeRadioBtnIsOne",value:function(){var s,u=!0,d=_createForOfIteratorHelper(Object.values(this.layer.annotationStore.annotationsAll).reduce(function(g,m){return g.concat(m)},[]));try{for(d.s();!(s=d.n()).done;){var f=s.value;if(f.hasOwnProperty("fieldName")&&f.fieldName===this.annotation.fieldName&&f.name!==this.annotation.name&&f.type==="radiobutton"){u=!1;break}}}catch(g){d.e(g)}finally{d.f()}this.layer.eventBus.dispatch("judgeRadioBtnIsOne",u)}},{key:"setHighlight",value:function(s){this.highlight=s,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.initRect,f={width:parseInt(d.width*this.layer.ratio+1),height:parseInt(d.height*this.layer.ratio+1)},k.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,width:f.width,height:f.height});case 4:g=k.sent,(m=document.createElement("canvas")).style.width=f.width+"px",m.style.height=f.height+"px",m.width=f.width,m.height=f.height,(y=m.getContext("2d")).clearRect(0,0,m.width,m.height),(v=y.createImageData(f.width,f.height)).data.set(g),y.putImageData(v,0,0),_=m.toDataURL("image/png",1),u&&(w=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(w.width,"px"),this.shapeElement.style.height="".concat(w.height,"px")),this.imgEle?this.imgEle.src=_:((x=document.createElement("img")).style.width="100%",x.style.height="100%",x.style.pointerEvents="none",x.style.display="block",x.src=_,this.imgEle=x,this.shapeElement.append(this.imgEle));case 18:case"end":return k.stop()}},s,this)})),function(s){return r.apply(this,arguments)})}]);var r,o}(),AddRadioButton=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initRadioButtonName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initRadioButtonName",this.initRadioButtonName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initRadioButtonName",this.initRadioButtonName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={left:s.x,top:s.y,right:u.x,bottom:u.y},f={operate:"add-form",type:"radiobutton",pageIndex:this.layer.page,date:new Date,rect:d,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,isChecked:0,checkStyle:1};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",borderRadius:"100%",position:"absolute"});this.shapeEle=x,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(s,u){return s.concat(u)},[]).filter(function(s){return s.type==="radiobutton"}),r=function(){var s="Group"+(o+1);if(n.every(function(u){return u.fieldName!==s}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Group"+e}}])}(),PushButton=function(e){function n(s){var u,d=s.annotation,f=s.layer,g=s.show,m=g!==void 0&&g,y=s.highlight;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:d,layer:f}])).hidden=!0,u.initial=!1,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=m,u.highlight=y,u.onMousedown=u.handleMouseDown.bind(u),u.onMouseup=u.handleMouseUp.bind(u),u.onMousemove=u.handleMouseMove.bind(u),u.onDelete=u.handleDelete.bind(u),u.handlePropertyPanel=u.handlePropertyPanel.bind(u),u.setProperty=u.setProperty.bind(u),u.setHighlight=u.setHighlight.bind(u),u.render(),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,g,m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight),u=this.annotation,this.annotation.backgroundColor||(this.annotation.backgroundColor="#1460F3"),u.isBold&&u.isItalic?u.fontStyle="boldItalic":u.isBold?u.fontStyle="bold":u.isItalic?u.fontStyle="italic":u.fontStyle="normal",d=this.getActualRect(this.layer.viewport.scale),f=d.start,g=d.end,this.start=f,this.end=g,m=this.calculate(f,g),(y=document.createElement("div")).id=u.name,y.className="annotation",y.style.top=m.top+"px",y.style.left=m.left+"px",y.style.width=m.width+"px",y.style.height=m.height+"px",y.style.backgroundColor=this.highlight?"#4982E54D":"",y.style.overflow="hidden",this.annotationContainer=y,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),v=createElement("div",{left:0,top:0,width:"".concat(Math.abs(m.width),"px"),height:"".concat(Math.abs(m.height),"px"),position:"relative"}),this.shapeElement=v,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),this.buttonContainer=createElement("a",{position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",outline:"none",borderColor:u.borderColor,borderWidth:(u.borderWidth||1)+"px",borderStyle:u.borderStyle||"solid",color:u.color,backgroundColor:u.backgroundColor,fontFamily:u.fontName,fontSize:u.fontSize||"12px",fontWeight:u.isBold?"bold":"normal",fontStyle:u.isItalic?"italic":"normal",overflow:"hidden",textDecoration:"none",opacity:0}),this.buttonContainer.innerHTML=u.title,this.shapeElement.append(this.buttonContainer),this.buttonContainer.addEventListener("blur",this.onBlur),this.annotation.url&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,_=m.left+m.width-30+"px",w=m.top+m.height+8+"px",this.deletetButton.style.left=_,this.deletetButton.style.top=w,(x=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",x.style.zIndex=1,x.style.left="".concat(m.left-8,"px"),x.style.top="".concat(m.top-8,"px"),x.style.width="".concat(m.width+16,"px"),x.style.height="".concat(m.height+16,"px"),this.outerLine=x,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:m.width+8,height:m.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+5,y:m.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:m.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:m.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+5,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 70:case"end":return k.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(s){var u=this.annotation.rect,d=u.left,f=u.top,g=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},s),end:getActualPoint({x:g,y:m},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u});this.initRect=d;var f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"getInitialPoint",value:function(){var s,u,d,f,g=this.layer.viewport.scale,m=this.start.x,y=this.start.y,v=this.end.x,_=this.end.y,w=this.layer.viewport,x=w.width,k=w.height,S=w.rotation;return S===0?(s=m/g,u=y/g,d=v/g,f=_/g):S===90?(s=y/g,u=m/g,d=_/g,f=v/g):S===180?(s=(x-m)/g,u=y/g,d=(x-v)/g,f=_/g):(s=(k-y)/g,u=(x-m)/g,d=(k-_)/g,f=(x-v)/g),{start:{x:s,y:u},end:{x:d,y:f}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var u=_objectSpread2$1({},s);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(s){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(s==null?void 0:s.target)))if(this.layer.documentViewer.toolMode==="form"){this.hidden=!1,this.updateTool(),document.getElementsByClassName("right-panel")[0].className.indexOf("closed")!==-1&&document.getElementById("propertyPanelButton").click();var u=[this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]];this.layer.eventBus._on("pushButtonPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp(u,this.handleOutside.bind(this))}else this.annotation.actionType==1&&this.annotation.destPage?this.layer.eventBus.dispatch("pageNumberChanged",this.annotation.destPage):this.annotation.actionType==6&&this.annotation.url&&this.buttonContainer.click()}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var s,u,d;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(document.getElementById("propertyPanelButton").click(),this.layer.eventBus.dispatch("propertyChange",null)),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(s=this.outerLine)===null||s===void 0||s.removeEventListener("mousedown",this.onMousedown),(u=this.outerLine)===null||u===void 0||u.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("pushButtonPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(s){this.layer.tool&&s.stopPropagation();var u=s.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(s),g=f.pageX,m=f.pageY;this.startState={operator:u,clickX:g,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(s){s.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,g=this.layer.documentViewer.getScrollViewElement(),m=g.scrollTop;d=d+g.scrollLeft-this.scrollLeft,f=f+m-this.scrollTop;var y=this.start,v=this.end,_=this.startState,w=this.layer.viewport,x=w.width,k=w.height;if(_.operator==="nw-resize"){var S=d-(_.clickX-this.start.x),M=f-(_.clickY-this.start.y);S=Math.min(v.x-5,S),S=Math.max(0,S),M=Math.min(v.y-5,M),M=Math.max(0,M),this.update({start:{x:S,y:M},end:v})}else if(_.operator==="w-resize"){var E=d-(_.clickX-this.start.x);E=Math.min(v.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:y.y},end:v})}else if(_.operator==="sw-resize"){var P=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);P=Math.min(v.x-5,P),P=Math.max(0,P),T=Math.min(k,T),T=Math.max(y.y+5,T),this.update({start:{x:P,y:y.y},end:{x:v.x,y:T}})}else if(_.operator==="s-resize"){var D=f-(_.clickY-this.end.y);D=Math.min(k,D),D=Math.max(y.y+5,D),this.update({start:y,end:{x:v.x,y:D}})}else if(_.operator==="se-resize"){var F=d-(_.clickX-this.end.x),I=f-(_.clickY-this.end.y);F=Math.min(x,F),F=Math.max(y.x+5,F),I=Math.min(k,I),I=Math.max(y.y+5,I),this.update({start:y,end:{x:F,y:I}})}else if(_.operator==="e-resize"){var N=d-(_.clickX-this.end.x);N=Math.min(x,N),N=Math.max(y.x+5,N),this.update({start:y,end:{x:N,y:v.y}})}else if(_.operator==="ne-resize"){var q=d-(_.clickX-this.end.x),Y=f-(_.clickY-this.start.y);q=Math.min(x,q),q=Math.max(y.x+5,q),Y=Math.min(v.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:y.x,y:Y},end:{x:q,y:v.y}})}else if(_.operator==="n-resize"){var Z=f-(_.clickY-this.start.y);Z=Math.min(v.y-5,Z),Z=Math.max(0,Z),this.update({start:{x:y.x,y:Z},end:v})}else if(_.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(s),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(y.x-v.x),Q=Math.abs(y.y-v.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y)):fe+2===Se&&(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=d-(_.clickX-this.start.x),ne=f-(_.clickY-this.start.y),le=d-(_.clickX-this.end.x),J=f-(_.clickY-this.end.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;f>_.clickY?Ve=(Ve=g.offsetHeight-(Be.y-g.scrollTop-g.offsetTop))<100?5:0:f<_.clickY&&(Ve=(Ve=Ne.y-g.scrollTop-g.offsetTop)<100?-5:0),d>_.clickX?be=(be=g.offsetWidth-(Be.x-g.scrollLeft-g.offsetLeft))<100?5:0:d<_.clickX&&(be=(be=Ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(be||Ve)&&(g.scrollTop+=Ve,g.scrollLeft+=be);var De={width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)};j<le?(j=Math.max(0,j),j=Math.min(x-De.width,j),le=Math.max(De.width,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-De.width,le),j=Math.max(De.width,j),j=Math.min(x,j)),ne<J?(ne=Math.max(0,ne),ne=Math.min(k-De.height,ne),J=Math.max(De.height,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-De.height,J),ne=Math.max(De.height,ne),ne=Math.min(k,ne))}this.update({start:{x:j,y:ne},end:{x:le,y:J}})}_.clickX=d,_.clickY=f}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",u)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(s){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var u=this.annotation,d=this.getInitialPoint(),f=d.start,g=d.end,m={left:f.x,top:f.y,right:g.x,bottom:g.y};if(m!==u.rect||u.pageIndex!==this.layer.page)if(u.rect=m,u.pageIndex!==this.layer.page){var y={type:"delete",annotation:{operate:"del-annot",name:u.name,pageIndex:u.pageIndex,annotPtr:u.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",y);var v=Object.assign({},u);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-form",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,rect:m}}),this.getImage(!0)}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.start=u,this.end=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.annotationContainer.style.width="".concat(f.width,"px"),this.annotationContainer.style.height="".concat(f.height,"px"),this.outerLine.style.left="".concat(f.left-8,"px"),this.outerLine.style.top="".concat(f.top-8,"px"),this.outerLine.style.width="".concat(f.width+16,"px"),this.outerLine.style.height="".concat(f.height+16,"px");var g=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width+9),this.moveRect.setAttribute("height",f.height+9),this.LeftRect.setAttribute("y",f.height/2+5),this.bottomLeftRect.setAttribute("y",f.height+9),this.bottomRect.setAttribute("x",f.width/2+5),this.bottomRect.setAttribute("y",f.height+9),this.bottomRightRect.setAttribute("x",f.width+9),this.bottomRightRect.setAttribute("y",f.height+9),this.rightRect.setAttribute("x",f.width+9),this.rightRect.setAttribute("y",f.height/2+5),this.topRightRect.setAttribute("x",f.width+9),this.topRect.setAttribute("x",f.width/2+5)}},{key:"handlePropertyPanel",value:function(s){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var u=this.annotation,d=0;for(var f in s)for(var g in this.annotation)if(g===f&&this.annotation[g]!==s[f]&&(this.annotation[g]=s[f],d++,f==="backgroundColor"&&(this.buttonContainer.style[f]=s[f],s[f]===""&&(s.clearBackgroundColor=!0)),f==="fontSize"&&(this.buttonContainer.style.fontSize=s[f]+"px"),f==="color"&&(this.buttonContainer.style.color=s[f]),f==="fontName"&&(this.buttonContainer.style.fontFamily=s[f]),f==="title"&&(this.buttonContainer.innerHTML=s[f]),f==="url"&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),f==="fontStyle")){var m=s[f];m==="boldItalic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="bold",u.isBold=!0,u.isItalic=!0):m==="bold"?(this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="bold",u.isBold=!0,u.isItalic=!1):m==="italic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="normal",u.isBold=!1,u.isItalic=!0):(u.isItalic=!1,u.isBold=!1,this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="normal")}if(d>0){var y={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,pageHeight:this.layer.viewport.rawDims.pageHeight};(s.destPage||s.url)&&this.annotation.actionType!=="0"&&(y.actionType=this.annotation.actionType);var v=["fontSize","fontName","color","fontStyle"].some(function(k){return s[k]});if(v){y.fontSize=u.fontSize,y.color=u.color;var _={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},w=u.fontName;u.isBold&&u.isItalic?y.fontName=_[w].boldItalic:u.isBold?y.fontName=_[w].bold:u.isItalic?y.fontName=_[w].italic:y.fontName=_[w]?_[w].normal:w,delete s.fontName}var x=Object.assign({},y,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:x}),this.getImage()}}}},{key:"setProperty",value:function(s){if(s.name===this.annotation.name){var u=this.annotation,d=0;for(var f in s)for(var g in this.annotation)if(g===f&&this.annotation[g]!==s[f]&&(this.annotation[g]=s[f],d++,f==="backgroundColor"&&(this.buttonContainer.style[f]=s[f],s[f]===""&&(s.clearBackgroundColor=!0)),f==="fontSize"&&(this.buttonContainer.style.fontSize=s[f]+"px"),f==="color"&&(this.buttonContainer.style.color=s[f]),f==="fontName"&&(this.buttonContainer.style.fontFamily=s[f]),f==="title"&&(this.buttonContainer.innerHTML=s[f]),f==="url"&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),f==="fontStyle")){var m=s[f];m==="boldItalic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="bold",u.isBold=!0,u.isItalic=!0):m==="bold"?(this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="bold",u.isBold=!0,u.isItalic=!1):m==="italic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="normal",u.isBold=!1,u.isItalic=!0):(u.isItalic=!1,u.isBold=!1,this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="normal")}if(d>0){var y={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,pageHeight:this.layer.viewport.rawDims.pageHeight};(s.destPage||s.url)&&this.annotation.actionType!=="0"&&(y.actionType=this.annotation.actionType);var v=["fontSize","fontName","color","fontStyle"].some(function(k){return s[k]});if(v){y.fontSize=u.fontSize,y.color=u.color;var _={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},w=u.fontName;u.isBold&&u.isItalic?y.fontName=_[w].boldItalic:u.isBold?y.fontName=_[w].bold:u.isItalic?y.fontName=_[w].italic:y.fontName=_[w]?_[w].normal:w,delete s.fontName}var x=Object.assign({},y,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:x}),this.getImage()}}}},{key:"setHighlight",value:function(s){this.highlight=s,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.initRect,f={width:parseInt(d.width*this.layer.ratio+1),height:parseInt(d.height*this.layer.ratio+1)},k.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,width:f.width,height:f.height});case 4:g=k.sent,(m=document.createElement("canvas")).style.width=f.width+"px",m.style.height=f.height+"px",m.width=f.width,m.height=f.height,(y=m.getContext("2d")).clearRect(0,0,m.width,m.height),(v=y.createImageData(f.width,f.height)).data.set(g),y.putImageData(v,0,0),_=m.toDataURL("image/png",1),u&&(w=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(w.width,"px"),this.shapeElement.style.height="".concat(w.height,"px")),this.imgEle?this.imgEle.src=_:((x=document.createElement("img")).style.width="100%",x.style.height="100%",x.style.pointerEvents="none",x.style.display="block",x.src=_,this.imgEle=x,this.shapeElement.append(this.imgEle));case 18:case"end":return k.stop()}},s,this)})),function(s){return r.apply(this,arguments)})}]);var r,o}(),AddPushButton=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.buttonEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initPushButtonName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initPushButtonName",this.initPushButtonName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.buttonEle&&this.buttonEle.remove(),this.buttonEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initPushButtonName",this.initPushButtonName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={left:s.x,top:s.y,right:u.x,bottom:u.y},f={operate:"add-form",type:"pushbutton",pageIndex:this.layer.page,date:new Date,rect:d,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,title:"OK",actionType:0,destPage:"",url:""};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f})}this.initStartPoint=null,this.initEndPoint=null,this.buttonEle&&this.buttonEle.remove(),this.buttonEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.buttonEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.buttonEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{display:"flex",alignItems:"center",justifyContent:"center",color:"#000000",fontSize:"14px",borderColor:"#001A4E",borderWidth:"1px",borderStyle:"solid",backgroundColor:"#DDE9FF",position:"absolute",fontFamily:"Helvetica",overflow:"hidden"});x.innerHTML="OK",this.buttonEle=x,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.buttonEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(s,u){return s.concat(u)},[]).filter(function(s){return s.type==="pushbutton"}),r=function(){var s="Button"+(o+1);if(n.every(function(u){return u.fieldName!==s}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Button"+e}}])}(),ListBox=function(e){function n(s){var u,d=s.annotation,f=s.layer,g=s.show,m=g!==void 0&&g,y=s.highlight;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:d,layer:f}])).hidden=!0,u.initial=!1,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=m,u.highlight=y,u.onMousedown=u.handleMouseDown.bind(u),u.onMouseup=u.handleMouseUp.bind(u),u.onMousemove=u.handleMouseMove.bind(u),u.onDelete=u.handleDelete.bind(u),u.setProperty=u.setProperty.bind(u),u.changeSelectAvailable=u.changeSelectAvailable.bind(u),u.handlePropertyPanel=u.handlePropertyPanel.bind(u),u.setHighlight=u.setHighlight.bind(u),u.render(),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,g,m,y,v,_,w,x,k,S,M;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("changeSelectAvailable",this.changeSelectAvailable),this.layer.eventBus._on("setHighlightForm",this.setHighlight),(u=this.annotation).items||(u.items=[]),u.fontName||(u.fontName="Helvetica"),u.isBold&&u.isItalic?u.fontStyle="boldItalic":u.isBold?u.fontStyle="bold":u.isItalic?u.fontStyle="italic":u.fontStyle="normal",this.annotation.selected||this.annotation.selected===0||(this.annotation.selected=null),d=this.getActualRect(this.layer.viewport.scale),f=d.start,g=d.end,this.start=f,this.end=g,m=this.calculate(f,g),(y=document.createElement("div")).id=u.name,y.className="annotation",y.style.top=m.top+"px",y.style.left=m.left+"px",y.style.width=m.width+"px",y.style.height=m.height+"px",y.style.backgroundColor=this.highlight?"#4982E54D":"",y.style.overflow="hidden",this.annotationContainer=y,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),v=createElement("div",{left:0,top:0,width:"".concat(Math.abs(m.width),"px"),height:"".concat(Math.abs(m.height),"px"),position:"relative"}),this.shapeElement=v,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),_=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderColor:u.borderColor,borderWidth:(u.borderWidth||1)+"px",borderStyle:u.borderStyle||"solid",backgroundColor:u.backgroundColor,fontSize:u.fontSize||"12px",fontWeight:u.isBold?"bold":"normal",fontStyle:u.isItalic?"italic":"normal",fontFamily:u.fontName,color:u.color||"#001A4E",overflow:"auto",opacity:0}),this.selectElement=_,this.shapeElement.append(this.selectElement),u.items&&u.items.length>0)for(w=0;w<u.items.length;w++)(x=createElement("div",{width:"100%",height:Math.round(20*this.layer.viewport.scale)+"px",lineHeight:Math.round(20*this.layer.viewport.scale)+"px",borderBottom:"1px solid #666666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},{class:"option"})).innerText=u.items[w].Value,this.annotation.selected===w&&(x.style.backgroundColor="#dcdcdc"),this.selectElement.appendChild(x);this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,k=m.left+m.width-30+"px",S=m.top+m.height+8+"px",this.deletetButton.style.left=k,this.deletetButton.style.top=S,(M=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",M.style.zIndex=1,M.style.left="".concat(m.left-8,"px"),M.style.top="".concat(m.top-8,"px"),M.style.width="".concat(m.width+16,"px"),M.style.height="".concat(m.height+16,"px"),this.outerLine=M,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:m.width+8,height:m.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+5,y:m.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:m.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:m.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+4,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 72:case"end":return E.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(s){var u=this.annotation.rect,d=u.left,f=u.top,g=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},s),end:getActualPoint({x:g,y:m},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u});this.initRect=d;var f=(this.annotation.borderWidth||1)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"getInitialPoint",value:function(){var s,u,d,f,g=this.layer.viewport.scale,m=this.start.x,y=this.start.y,v=this.end.x,_=this.end.y,w=this.layer.viewport,x=w.width,k=w.height,S=w.rotation;return S===0?(s=m/g,u=y/g,d=v/g,f=_/g):S===90?(s=y/g,u=m/g,d=_/g,f=v/g):S===180?(s=(x-m)/g,u=y/g,d=(x-v)/g,f=_/g):(s=(k-y)/g,u=(x-m)/g,d=(k-_)/g,f=(x-v)/g),{start:{x:s,y:u},end:{x:d,y:f}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var u=_objectSpread2$1({},s);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(s){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(s==null?void 0:s.target))){if(this.layer.documentViewer.toolMode==="form")this.hidden=!1,this.updateTool(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.layer.eventBus._on("listBoxPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else if(s.target&&s.target.className==="option"){for(var u=s.target.parentNode.children,d=0;d<u.length;d++)if(u[d]===s.target){this.annotation.selected=d;break}this.handleSelectItemBg()}}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var s,u,d;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(s=this.outerLine)===null||s===void 0||s.removeEventListener("mousedown",this.onMousedown),(u=this.outerLine)===null||u===void 0||u.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("listBoxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(s){this.layer.tool&&s.stopPropagation();var u=s.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(s),g=f.pageX,m=f.pageY;this.startState={operator:u,clickX:g,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(s){s.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,g=this.layer.documentViewer.getScrollViewElement(),m=g.scrollTop;d=d+g.scrollLeft-this.scrollLeft,f=f+m-this.scrollTop;var y=this.start,v=this.end,_=this.startState,w=this.layer.viewport,x=w.width,k=w.height;if(_.operator==="nw-resize"){var S=d-(_.clickX-this.start.x),M=f-(_.clickY-this.start.y);S=Math.min(v.x-5,S),S=Math.max(0,S),M=Math.min(v.y-5,M),M=Math.max(0,M),this.update({start:{x:S,y:M},end:v})}else if(_.operator==="w-resize"){var E=d-(_.clickX-this.start.x);E=Math.min(v.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:y.y},end:v})}else if(_.operator==="sw-resize"){var P=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);P=Math.min(v.x-5,P),P=Math.max(0,P),T=Math.min(k,T),T=Math.max(y.y+5,T),this.update({start:{x:P,y:y.y},end:{x:v.x,y:T}})}else if(_.operator==="s-resize"){var D=f-(_.clickY-this.end.y);D=Math.min(k,D),D=Math.max(y.y+5,D),this.update({start:y,end:{x:v.x,y:D}})}else if(_.operator==="se-resize"){var F=d-(_.clickX-this.end.x),I=f-(_.clickY-this.end.y);F=Math.min(x,F),F=Math.max(y.x+5,F),I=Math.min(k,I),I=Math.max(y.y+5,I),this.update({start:y,end:{x:F,y:I}})}else if(_.operator==="e-resize"){var N=d-(_.clickX-this.end.x);N=Math.min(x,N),N=Math.max(y.x+5,N),this.update({start:y,end:{x:N,y:v.y}})}else if(_.operator==="ne-resize"){var q=d-(_.clickX-this.end.x),Y=f-(_.clickY-this.start.y);q=Math.min(x,q),q=Math.max(y.x+5,q),Y=Math.min(v.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:y.x,y:Y},end:{x:q,y:v.y}})}else if(_.operator==="n-resize"){var Z=f-(_.clickY-this.start.y);Z=Math.min(v.y-5,Z),Z=Math.max(0,Z),this.update({start:{x:y.x,y:Z},end:v})}else if(_.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(s),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(y.x-v.x),Q=Math.abs(y.y-v.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y)):fe+2===Se&&(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=d-(_.clickX-this.start.x),ne=f-(_.clickY-this.start.y),le=d-(_.clickX-this.end.x),J=f-(_.clickY-this.end.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;f>_.clickY?Ve=(Ve=g.offsetHeight-(Be.y-g.scrollTop-g.offsetTop))<100?5:0:f<_.clickY&&(Ve=(Ve=Ne.y-g.scrollTop-g.offsetTop)<100?-5:0),d>_.clickX?be=(be=g.offsetWidth-(Be.x-g.scrollLeft-g.offsetLeft))<100?5:0:d<_.clickX&&(be=(be=Ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(be||Ve)&&(g.scrollTop+=Ve,g.scrollLeft+=be);var De={width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)};j<le?(j=Math.max(0,j),j=Math.min(x-De.width,j),le=Math.max(De.width,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-De.width,le),j=Math.max(De.width,j),j=Math.min(x,j)),ne<J?(ne=Math.max(0,ne),ne=Math.min(k-De.height,ne),J=Math.max(De.height,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-De.height,J),ne=Math.max(De.height,ne),ne=Math.min(k,ne))}this.update({start:{x:j,y:ne},end:{x:le,y:J}})}_.clickX=d,_.clickY=f}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),s||(u.type="empty"),this.layer.eventBus.dispatch("annotationChanged",u)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(s){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var u=this.annotation,d=this.getInitialPoint(),f=d.start,g=d.end,m={left:f.x,top:f.y,right:g.x,bottom:g.y};if(m!==u.rect||u.pageIndex!==this.layer.page)if(u.rect=m,u.pageIndex!==this.layer.page){var y={type:"delete",annotation:{operate:"del-annot",name:u.name,pageIndex:u.pageIndex,annotPtr:u.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",y);var v=Object.assign({},u);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-form",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,rect:m}}),this.getImage(!0)}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.start=u,this.end=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.annotationContainer.style.width="".concat(f.width,"px"),this.annotationContainer.style.height="".concat(f.height,"px"),this.outerLine.style.left="".concat(f.left-8,"px"),this.outerLine.style.top="".concat(f.top-8,"px"),this.outerLine.style.width="".concat(f.width+16,"px"),this.outerLine.style.height="".concat(f.height+16,"px");var g=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width+9),this.moveRect.setAttribute("height",f.height+9),this.LeftRect.setAttribute("y",f.height/2+5),this.bottomLeftRect.setAttribute("y",f.height+9),this.bottomRect.setAttribute("x",f.width/2+5),this.bottomRect.setAttribute("y",f.height+9),this.bottomRightRect.setAttribute("x",f.width+9),this.bottomRightRect.setAttribute("y",f.height+9),this.rightRect.setAttribute("x",f.width+9),this.rightRect.setAttribute("y",f.height/2+5),this.topRightRect.setAttribute("x",f.width+9),this.topRect.setAttribute("x",f.width/2+5)}},{key:"handlePropertyPanel",value:function(s){var u=this.annotation;if(this.layer.annotationStore.selectedElementName===u.name){var d=0;for(var f in s){for(var g in u)if(g===f&&this.annotation[g]!==s[f]&&f!=="items"&&(this.annotation[g]=s[f],d++,u[g]=s[f],f==="backgroundColor"&&(s[f]===""&&(s.clearBackgroundColor=!0),this.selectElement.style[f]=s[f]),f==="fontSize"&&(this.selectElement.style.fontSize=s[f]+"px"),f==="color"&&(this.selectElement.style.color=s[f]),f==="fontName"&&(this.selectElement.style.fontFamily=s[f]),f==="fontStyle")){var m=s[f];m==="boldItalic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="bold",u.isBold=!0,u.isItalic=!0):m==="bold"?(this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="bold",u.isBold=!0,u.isItalic=!1):m==="italic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="normal",u.isBold=!1,u.isItalic=!0):(u.isItalic=!1,u.isBold=!1,this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="normal")}if(f==="item"){if(u.items.includes(s.item)){delete s.item;continue}d++,u.items.push({Value:s.item,String:s.item});var y=createElement("div",{width:"100%",height:Math.round(20*this.layer.viewport.scale)+"px",lineHeight:Math.round(20*this.layer.viewport.scale)+"px",borderBottom:"1px solid #666666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},{class:"option"});y.value=s.item,y.innerHTML=s.item,this.selectElement.appendChild(y),s.item={value:s.item,index:u.items.length-1}}if(f==="deleteItemIndex"){d++;var v=s.deleteItemIndex;u.selected===s.deleteItemIndex&&(u.selected=null),u.items.splice(v,1),this.selectElement.children[v].remove()}if(f==="moveOption"){d++;var _=s.moveOption.fromIndex,w=s.moveOption.toIndex,x=u.items;_>w?x.splice(_-1,2,x[_],x[_-1]):x.splice(_,2,x[_+1],x[_]),s.moveOption.item={Value:x[w].Value,String:x[w].String};var k=this.selectElement.children[_];k.remove(),this.selectElement.insertBefore(k,this.selectElement.children[w])}}if(d>0){var S={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr};u.items.length||(s.clearOption=!0);var M=["fontSize","fontName","color","fontStyle"].some(function(D){return s[D]});if(M){S.fontSize=u.fontSize,S.color=u.color;var E={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},P=u.fontName;u.isBold&&u.isItalic?S.fontName=E[P].boldItalic:u.isBold?S.fontName=E[P].bold:u.isItalic?S.fontName=E[P].italic:S.fontName=E[P]?E[P].normal:P,delete s.fontName}var T=Object.assign({},S,s);!u.annotPtr&&(T.items=u.items),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:T}),this.getImage()}}}},{key:"setProperty",value:function(s){var u=this.annotation;if(s.name===u.name){for(var d in s)for(var f in u)f===d&&u[f]!==s[d]&&(u[f]=s[d],d==="backgroundColor"&&(this.selectElement.style[d]=s[d]));var g={operate:"mod-form",pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr},m=["fontSize","fontName","color","fontStyle"].some(function(w){return s[w]});if(m){g.fontSize=u.fontSize,g.color=u.color;var y={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},v=u.fontName;u.isBold&&u.isItalic?g.fontName=y[v].boldItalic:u.isBold?g.fontName=y[v].bold:u.isItalic?g.fontName=y[v].italic:g.fontName=y[v]?y[v].normal:v,delete s.fontName}var _=Object.assign({},g,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:_}),this.getImage()}}},{key:"changeSelectAvailable",value:function(){this.layer.documentViewer.toolMode==="form"?this.selectElement.style.pointerEvents="none":this.selectElement.style.pointerEvents=""}},{key:"handleSelectItemBg",value:function(){var s,u=_createForOfIteratorHelper(this.selectElement.children);try{for(u.s();!(s=u.n()).done;)s.value.style.backgroundColor="unset"}catch(d){u.e(d)}finally{u.f()}this.selectElement.children[this.annotation.selected]&&(this.selectElement.children[this.annotation.selected].style.backgroundColor="#dcdcdc"),this.setProperty({selected:this.annotation.selected,name:this.annotation.name})}},{key:"setHighlight",value:function(s){this.highlight=s,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.initRect,f={width:parseInt(d.width*this.layer.ratio+1),height:parseInt(d.height*this.layer.ratio+1)},k.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,width:f.width,height:f.height});case 4:g=k.sent,(m=document.createElement("canvas")).style.width=f.width+"px",m.style.height=f.height+"px",m.width=f.width,m.height=f.height,(y=m.getContext("2d")).clearRect(0,0,m.width,m.height),(v=y.createImageData(f.width,f.height)).data.set(g),y.putImageData(v,0,0),_=m.toDataURL("image/png",1),u&&(w=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(w.width,"px"),this.shapeElement.style.height="".concat(w.height,"px")),this.imgEle?this.imgEle.src=_:((x=document.createElement("img")).style.width="100%",x.style.height="100%",x.style.pointerEvents="none",x.style.display="block",x.src=_,this.imgEle=x,this.shapeElement.append(this.imgEle));case 18:case"end":return k.stop()}},s,this)})),function(s){return r.apply(this,arguments)})}]);var r,o}(),AddListBox=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initListboxName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initListboxName",this.initListboxName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initListboxName",this.initListboxName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={left:s.x,top:s.y,right:u.x,bottom:u.y},f={operate:"add-form",type:"listbox",pageIndex:this.layer.page,date:new Date,rect:d,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,items:[{Value:this.layer.annotationStore.$t("rightPanel.option")+"1",String:this.layer.annotationStore.$t("rightPanel.option")+"1"},{Value:this.layer.annotationStore.$t("rightPanel.option")+"2",String:this.layer.annotationStore.$t("rightPanel.option")+"2"}],selected:0};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=x,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(s,u){return s.concat(u)},[]).filter(function(s){return s.type==="listbox"}),r=function(){var s="List Box"+(o+1);if(n.every(function(u){return u.fieldName!==s}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="List Box"+e}}])}(),ComboBox=function(e){function n(s){var u,d=s.annotation,f=s.layer,g=s.show,m=g!==void 0&&g,y=s.highlight;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:d,layer:f}])).hidden=!0,u.initial=!1,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=m,u.highlight=y,u.onMousedown=u.handleMouseDown.bind(u),u.onMouseup=u.handleMouseUp.bind(u),u.onMousemove=u.handleMouseMove.bind(u),u.onDelete=u.handleDelete.bind(u),u.handlePropertyPanel=u.handlePropertyPanel.bind(u),u.setProperty=u.setProperty.bind(u),u.changeSelectAvailable=u.changeSelectAvailable.bind(u),u.setHighlight=u.setHighlight.bind(u),u.render(),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,g,m,y,v,_,w,x,k,S,M,E,P;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("changeSelectAvailable",this.changeSelectAvailable),this.layer.eventBus._on("setHighlightForm",this.setHighlight),(u=this.annotation).items||(u.items=[]),u.fontName||(u.fontName="Helvetica"),this.annotation.selected||this.annotation.selected===0||(this.annotation.selected=null),this.annotation.backgroundColor||(this.annotation.backgroundColor="transparent"),u.isBold&&u.isItalic?u.fontStyle="boldItalic":u.isBold?u.fontStyle="bold":u.isItalic?u.fontStyle="italic":u.fontStyle="normal",d=this.getActualRect(this.layer.viewport.scale),f=d.start,g=d.end,this.start=f,this.end=g,m=this.calculate(f,g),(y=document.createElement("div")).id=u.name,y.className="annotation",y.style.top=m.top+"px",y.style.left=m.left+"px",y.style.width=m.width+"px",y.style.height=m.height+"px",y.style.backgroundColor=this.highlight?"#4982E54D":"",y.style.overflow="hidden",this.annotationContainer=y,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),v=createElement("div",{left:0,top:0,width:"".concat(Math.abs(m.width),"px"),height:"".concat(Math.abs(m.height),"px"),position:"relative",overflow:"hidden"}),this.shapeElement=v,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),_=createElement("select",{position:"absolute",left:0,top:0,paddingLeft:"4px",width:"100%",height:"100%",borderColor:u.borderColor,borderWidth:(u.borderWidth||1)+"px",borderStyle:u.borderStyle||"solid",cursor:"pointer",webkitAppearance:"none",appearance:"none",backgroundColor:u.backgroundColor,fontSize:u.fontSize||"12px",fontFamily:u.fontName,color:u.color,fontWeight:u.isBold?"bold":"normal",fontStyle:u.isItalic?"italic":"normal",textOverflow:"ellipsis",whiteSpace:"nowrap",opacity:0}),this.layer.documentViewer.toolMode==="form"&&(_.style.pointerEvents="none"),this.selectElement=_,w=createSvg("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},{width:"".concat(m.height/2,"px"),height:"".concat(m.height/2,"px"),position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",opacity:0}),x=createSvg("path",{d:"M4 5.51025L8.0041 10.5L12 5.5L4 5.51025Z",fill:"#666"},{pointerEvents:"none"}),this.svgElement=w,this.svgElement.append(x),this.shapeElement.append(this.svgElement),this.shapeElement.append(this.selectElement),u.items&&u.items.length>0)for(k=0;k<u.items.length;k++)(S=createElement("option")).value=u.items[k].Value,S.innerHTML=u.items[k].Value,u.selected===k&&(S.selected=!0),this.selectElement.appendChild(S);this.selectElement.addEventListener("change",this.handleSelect.bind(this)),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,M=m.left+m.width-30+"px",E=m.top+m.height+8+"px",this.deletetButton.style.left=M,this.deletetButton.style.top=E,(P=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",P.style.zIndex=1,P.style.left="".concat(m.left-8,"px"),P.style.top="".concat(m.top-8,"px"),P.style.width="".concat(m.width+16,"px"),P.style.height="".concat(m.height+16,"px"),this.outerLine=P,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:m.width+8,height:m.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:m.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+5,y:m.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:m.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:m.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:m.width/2+4,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 80:case"end":return T.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(s){var u=this.annotation.rect,d=u.left,f=u.top,g=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},s),end:getActualPoint({x:g,y:m},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u});this.initRect=d;var f=(this.annotation.borderWidth||1)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"getInitialPoint",value:function(){var s,u,d,f,g=this.layer.viewport.scale,m=this.start.x,y=this.start.y,v=this.end.x,_=this.end.y,w=this.layer.viewport,x=w.width,k=w.height,S=w.rotation;return S===0?(s=m/g,u=y/g,d=v/g,f=_/g):S===90?(s=y/g,u=m/g,d=_/g,f=v/g):S===180?(s=(x-m)/g,u=y/g,d=(x-v)/g,f=_/g):(s=(k-y)/g,u=(x-m)/g,d=(k-_)/g,f=(x-v)/g),{start:{x:s,y:u},end:{x:d,y:f}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var u=_objectSpread2$1({},s);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(s){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(s==null?void 0:s.target)||this.layer.documentViewer.toolMode==="form"&&(this.hidden=!1,this.updateTool(),this.hidden||document.getElementsByClassName("right-panel")[0].className.indexOf("closed")===-1||document.getElementById("propertyPanelButton").click(),this.layer.eventBus._on("comboBoxPropertyPanelChanged",this.handlePropertyPanel),onClickOutsideUp([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("propertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this)))}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var s,u,d;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||document.getElementById("propertyPanelButton").click(),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(s=this.outerLine)===null||s===void 0||s.removeEventListener("mousedown",this.onMousedown),(u=this.outerLine)===null||u===void 0||u.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("comboBoxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(s){this.layer.tool&&s.stopPropagation();var u=s.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(s),g=f.pageX,m=f.pageY;this.startState={operator:u,clickX:g,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(s){s.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,g=this.layer.documentViewer.getScrollViewElement(),m=g.scrollTop;d=d+g.scrollLeft-this.scrollLeft,f=f+m-this.scrollTop;var y=this.start,v=this.end,_=this.startState,w=this.layer.viewport,x=w.width,k=w.height;if(_.operator==="nw-resize"){var S=d-(_.clickX-this.start.x),M=f-(_.clickY-this.start.y);S=Math.min(v.x-5,S),S=Math.max(0,S),M=Math.min(v.y-5,M),M=Math.max(0,M),this.update({start:{x:S,y:M},end:v})}else if(_.operator==="w-resize"){var E=d-(_.clickX-this.start.x);E=Math.min(v.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:y.y},end:v})}else if(_.operator==="sw-resize"){var P=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);P=Math.min(v.x-5,P),P=Math.max(0,P),T=Math.min(k,T),T=Math.max(y.y+5,T),this.update({start:{x:P,y:y.y},end:{x:v.x,y:T}})}else if(_.operator==="s-resize"){var D=f-(_.clickY-this.end.y);D=Math.min(k,D),D=Math.max(y.y+5,D),this.update({start:y,end:{x:v.x,y:D}})}else if(_.operator==="se-resize"){var F=d-(_.clickX-this.end.x),I=f-(_.clickY-this.end.y);F=Math.min(x,F),F=Math.max(y.x+5,F),I=Math.min(k,I),I=Math.max(y.y+5,I),this.update({start:y,end:{x:F,y:I}})}else if(_.operator==="e-resize"){var N=d-(_.clickX-this.end.x);N=Math.min(x,N),N=Math.max(y.x+5,N),this.update({start:y,end:{x:N,y:v.y}})}else if(_.operator==="ne-resize"){var q=d-(_.clickX-this.end.x),Y=f-(_.clickY-this.start.y);q=Math.min(x,q),q=Math.max(y.x+5,q),Y=Math.min(v.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:y.x,y:Y},end:{x:q,y:v.y}})}else if(_.operator==="n-resize"){var Z=f-(_.clickY-this.start.y);Z=Math.min(v.y-5,Z),Z=Math.max(0,Z),this.update({start:{x:y.x,y:Z},end:v})}else if(_.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(s),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(y.x-v.x),Q=Math.abs(y.y-v.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y)):fe+2===Se&&(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=d-(_.clickX-this.start.x),ne=f-(_.clickY-this.start.y),le=d-(_.clickX-this.end.x),J=f-(_.clickY-this.end.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;f>_.clickY?Ve=(Ve=g.offsetHeight-(Be.y-g.scrollTop-g.offsetTop))<100?5:0:f<_.clickY&&(Ve=(Ve=Ne.y-g.scrollTop-g.offsetTop)<100?-5:0),d>_.clickX?be=(be=g.offsetWidth-(Be.x-g.scrollLeft-g.offsetLeft))<100?5:0:d<_.clickX&&(be=(be=Ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(be||Ve)&&(g.scrollTop+=Ve,g.scrollLeft+=be);var De={width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)};j<le?(j=Math.max(0,j),j=Math.min(x-De.width,j),le=Math.max(De.width,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-De.width,le),j=Math.max(De.width,j),j=Math.min(x,j)),ne<J?(ne=Math.max(0,ne),ne=Math.min(k-De.height,ne),J=Math.max(De.height,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-De.height,J),ne=Math.max(De.height,ne),ne=Math.min(k,ne))}this.update({start:{x:j,y:ne},end:{x:le,y:J}})}_.clickX=d,_.clickY=f}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",u)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(s){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var u=this.annotation,d=this.getInitialPoint(),f=d.start,g=d.end,m={left:f.x,top:f.y,right:g.x,bottom:g.y};if(m!==u.rect||u.pageIndex!==this.layer.page)if(u.rect=m,u.pageIndex!==this.layer.page){var y={type:"delete",annotation:{operate:"del-annot",name:u.name,pageIndex:u.pageIndex,annotPtr:u.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",y);var v=Object.assign({},u);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-form",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,rect:m}}),this.getImage(!0)}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.start=u,this.end=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.annotationContainer.style.width="".concat(f.width,"px"),this.annotationContainer.style.height="".concat(f.height,"px"),this.outerLine.style.left="".concat(f.left-8,"px"),this.outerLine.style.top="".concat(f.top-8,"px"),this.outerLine.style.width="".concat(f.width+16,"px"),this.outerLine.style.height="".concat(f.height+16,"px");var g=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width+9),this.moveRect.setAttribute("height",f.height+9),this.LeftRect.setAttribute("y",f.height/2+5),this.bottomLeftRect.setAttribute("y",f.height+9),this.bottomRect.setAttribute("x",f.width/2+5),this.bottomRect.setAttribute("y",f.height+9),this.bottomRightRect.setAttribute("x",f.width+9),this.bottomRightRect.setAttribute("y",f.height+9),this.rightRect.setAttribute("x",f.width+9),this.rightRect.setAttribute("y",f.height/2+5),this.topRightRect.setAttribute("x",f.width+9),this.topRect.setAttribute("x",f.width/2+5),this.svgElement.style.width="".concat(f.height/2,"px"),this.svgElement.style.height="".concat(f.height/2,"px")}},{key:"handlePropertyPanel",value:function(s){var u=this.annotation;if(this.layer.annotationStore.selectedElementName===u.name){var d=0;for(var f in s){for(var g in u)if(g===f&&u[g]!==s[f]&&(d++,u[g]=s[f],f==="backgroundColor"&&(s[f]===""&&(s.clearBackgroundColor=!0),this.selectElement.style[f]=s[f]),f==="fontSize"&&(this.selectElement.style.fontSize=s[f]+"px"),f==="color"&&(this.selectElement.style.color=s[f]),f==="fontName"&&(this.selectElement.style.fontFamily=s[f]),f==="fontStyle")){var m=s[f];m==="boldItalic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="bold",u.isBold=!0,u.isItalic=!0):m==="bold"?(this.selectElement.style.fontWeight="bold",this.selectElement.style.fontStyle="normal",u.isBold=!0,u.isItalic=!1):m==="italic"?(this.selectElement.style.fontWeight="normal",this.selectElement.style.fontStyle="italic",u.isBold=!1,u.isItalic=!0):(u.isItalic=!1,u.isBold=!1,this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="normal")}if(f==="item"){if(u.items.includes(s.item)){delete s.item;continue}d++,u.items.push({Value:s.item,String:s.item});var y=createElement("option");y.value=s.item,y.innerHTML=s.item,this.selectElement.appendChild(y),s.item={value:s.item,index:u.items.length-1},s.selected=u.selected}if(f==="deleteItemIndex"){d++;var v=s.deleteItemIndex;u.selected===s.deleteItemIndex&&(u.selected=null),u.items.splice(v,1),this.selectElement.options[v].remove()}if(f==="moveOption"){d++;var _=s.moveOption.fromIndex,w=s.moveOption.toIndex,x=u.items;_>w?x.splice(_-1,2,x[_],x[_-1]):x.splice(_,2,x[_+1],x[_]),s.moveOption.item={Value:x[w].Value,String:x[w].String},s.selected=0,u.selected=0;var k=this.selectElement.options[_];k.remove(),this.selectElement.insertBefore(k,this.selectElement.options[w]),this.selectElement.selectedIndex=0}}if(d>0){var S={operate:"mod-form",name:u.name,pageIndex:this.layer.page,index:u.items.length-1,pagePtr:u.pagePtr,annotPtr:u.annotPtr};u.items.length||(s.clearOption=!0);var M=["fontSize","fontName","color","fontStyle"].some(function(D){return s[D]});if(M){S.fontSize=u.fontSize,S.color=u.color;var E={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},P=u.fontName;u.isBold&&u.isItalic?S.fontName=E[P].boldItalic:u.isBold?S.fontName=E[P].bold:u.isItalic?S.fontName=E[P].italic:S.fontName=E[P]?E[P].normal:P,delete s.fontName}var T=Object.assign({},S,s);!u.annotPtr&&(T.items=u.items),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:T}),this.getImage()}}}},{key:"setProperty",value:function(s){var u=this.annotation;if(s.name===u.name){for(var d in s)for(var f in u)f===d&&u[f]!==s[d]&&(u[f]=s[d],d==="backgroundColor"&&(this.selectElement.style[d]=s[d]));var g={operate:"mod-form",pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr},m=["fontSize","fontName","color","fontStyle"].some(function(w){return s[w]});if(m){g.fontSize=u.fontSize,g.color=u.color;var y={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},v=u.fontName;u.isBold&&u.isItalic?g.fontName=y[v].boldItalic:u.isBold?g.fontName=y[v].bold:u.isItalic?g.fontName=y[v].italic:g.fontName=y[v]?y[v].normal:v,delete s.fontName}var _=Object.assign({},g,s);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:_}),this.getImage()}}},{key:"changeSelectAvailable",value:function(){this.layer.documentViewer.toolMode==="form"?this.selectElement.style.pointerEvents="none":this.selectElement.style.pointerEvents=""}},{key:"handleSelect",value:function(){this.annotation.selected=this.selectElement.selectedIndex,this.setProperty({selected:this.annotation.selected,name:this.annotation.name})}},{key:"setHighlight",value:function(s){this.highlight=s,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return d=this.initRect,f={width:parseInt(d.width*this.layer.ratio+1),height:parseInt(d.height*this.layer.ratio+1)},k.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,width:f.width,height:f.height});case 4:g=k.sent,(m=document.createElement("canvas")).style.width=f.width+"px",m.style.height=f.height+"px",m.width=f.width,m.height=f.height,(y=m.getContext("2d")).clearRect(0,0,m.width,m.height),(v=y.createImageData(f.width,f.height)).data.set(g),y.putImageData(v,0,0),_=m.toDataURL("image/png",1),u&&(w=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(w.width,"px"),this.shapeElement.style.height="".concat(w.height,"px")),this.imgEle?this.imgEle.src=_:((x=document.createElement("img")).style.width="100%",x.style.height="100%",x.style.pointerEvents="none",x.style.display="block",x.src=_,this.imgEle=x,this.shapeElement.append(this.imgEle));case 18:case"end":return k.stop()}},s,this)})),function(s){return r.apply(this,arguments)})}]);var r,o}(),AddComboBox=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initComboboxName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initComboboxName",this.initComboboxName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initComboboxName",this.initComboboxName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={left:s.x,top:s.y,right:u.x,bottom:u.y},f={operate:"add-form",type:"combobox",pageIndex:this.layer.page,date:new Date,rect:d,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,items:[{Value:this.layer.annotationStore.$t("rightPanel.option")+"1",String:this.layer.annotationStore.$t("rightPanel.option")+"1"},{Value:this.layer.annotationStore.$t("rightPanel.option")+"2",String:this.layer.annotationStore.$t("rightPanel.option")+"2"}],selected:0};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=x,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(s,u){return s.concat(u)},[]).filter(function(s){return s.type==="combobox"}),r=function(){var s="Combo Box"+(o+1);if(n.every(function(u){return u.fieldName!==s}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Combo Box"+e}}])}(),MakupAnnotation=function(e){function n(o){var s,u=o.annotation,d=o.layer;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:u,layer:d}])).hidden=!0,s.markupContainer=null,s.outerLineContainer=null,s.ratio=window.devicePixelRatio||1,s.layer.pageViewer.canvas&&(s.ctx=s.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),s.lineWidth=2*s.layer.viewport.scale*s.ratio,s.onHandleClick=s.handleClick.bind(s),s.onDelete=s.handleDelete.bind(s),s.onOpenReply=s.openReply.bind(s),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var o=this.annotation,s=this.layer.viewport.scale,u=this.getActualRect(s),d=u.start,f=u.end,g=this.calculate(d,f);this.rect=g;var m=o.quadPoints;if(m){for(var y=[],v=0;v+3<m.length;v+=4){var _=parseInt(m[v].PointX*s,10),w=parseInt(m[v].PointY*s,10),x=parseInt(m[v+1].PointX*s,10),k=parseInt(m[v+2].PointY*s,10),S=Math.min(_,x),M=Math.max(_,x),E=Math.min(w,k),P=Math.max(w,k),T=parseInt(M-S),D=parseInt(P-E);y.push({left:S,top:E,width:T,height:D})}this.positionArray=y,this.ctx&&(this.ctx.globalCompositeOperation="multiply",this.renderCanvansRect(y),this.markupContainer.addEventListener("click",this.onHandleClick)),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container";var F=createSvg("svg");F.style.left=g.left-6+"px",F.style.top=g.top-6+"px",F.style.width=g.width+12+"px",F.style.height=g.height+12+"px";var I=createSvg("rect",{x:3,y:3,width:g.width+6,height:g.height+6,fill:"#ffffff","fill-opacity":0,"stroke-width":1,stroke:"#1460F3"});F.append(I);var N=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"});N.addEventListener("click",this.onDelete),N.innerHTML=this.deleteSvgStr,N.style.left=g.left+g.width-30+"px",N.style.top=g.top+g.height+8+"px",this.replyButton=createElement("div",{width:"30px",height:"30px",background:"#DDE9FF",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.replyButton.style.left=g.left+g.width-65+"px",this.replyButton.style.top=g.top+g.height+8+"px",this.deletetButton=N,this.outerLineContainer.append(F);var q=this.layer.documentViewer.isAnnotationPopup;q&&this.outerLineContainer.append(N),q&&this.enableReply&&this.outerLineContainer.append(this.replyButton)}}},{key:"getActualRect",value:function(o){var s=this.annotation.rect,u=s.left,d=s.top,f=s.right,g=s.bottom;return u=Math.min(u,f),u=Math.max(u,0),d=Math.min(d,g),d=Math.max(d,0),f=Math.max(u,f),f=Math.min(f,this.layer.viewport.rawDims.pageWidth),g=Math.max(d,g),g=Math.min(g,this.layer.viewport.rawDims.pageHeight),{start:getActualPoint({x:u,y:d},o),end:getActualPoint({x:f,y:g},o)}}},{key:"setCss",value:function(o,s){if(o&&s)for(var u in s)o.style[u]=s[u]}},{key:"rectCalc",value:function(o){var s=o.start,u=o.end;return{top:s.y<u.y?s.y:u.y,left:s.x<u.x?s.x:u.x,width:Math.abs(u.x-s.x),height:Math.abs(u.y-s.y)}}},{key:"calculate",value:function(o,s){var u=this.rectCalc({start:o,end:s});return{top:u.top-2,left:u.left-2,width:u.width+4,height:u.height+4}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(o){if(this.hidden&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(o==null?void 0:o.target)){this.hidden=!1,this.updateTool();var s=[this.markupContainer,this.outerLineContainer,this.deletetButton,this.replyButton],u=document.querySelector(".toggle-button");u&&s.push(u),onClickOutside(s,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){this.hidden=!0,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove()}},{key:"updateTool",value:function(){if(this.hidden)this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.selectedElementName!==this.annotation.name){var o=this.annotation;this.layer.selectedElementName=o.name;var s=_objectSpread2$1({},o);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s)}this.layer.div.append(this.outerLineContainer)}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s),this.layer.redrawMarkups({pageIndex:this.layer.page})}},{key:"delete",value:function(){var o;this.handleOutside(),(o=this.markupContainer)===null||o===void 0||o.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"renderCanvansRect",value:function(o){var s=document.createElement("div");s.className="markup";for(var u=0;u<o.length;u++){var d=o[u],f=document.createElement("div");this.setCss(f,{position:"absolute",top:d.top+"px",left:d.left+"px",width:d.width+"px",height:d.height+"px"}),s.append(f)}this.drawCanvas(o),this.layer.div.append(s),this.markupContainer=s}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"reRenderAfterContentEdit",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function o(s){var u,d,f,g,m,y,v,_;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(u=s.pagePtr,d=s.rect,f=this.rect,g=d,!(f.left>g.left+g.width||f.left+f.width<g.left||f.top>g.top+g.height||f.top+f.height<g.top)){w.next=5;break}return w.abrupt("return");case 5:if(m={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:parseInt(this.rect.left*this.ratio)+parseInt(this.rect.width*this.ratio),bottom:parseInt(this.rect.top*this.ratio)+parseInt(this.rect.height*this.ratio),width:parseInt(this.rect.width*this.ratio),height:parseInt(this.rect.height*this.ratio)},y=null,!this.layer.pageViewer.documentViewer.renderLayerPermission||!this.layer.pageViewer.documentViewer.layers.length){w.next=13;break}return w.next=10,this.layer.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:u,scale:this.layer.viewport.scale*this.ratio,top:m.top,left:m.left,right:m.right,bottom:m.bottom,ocgsPtr:_toConsumableArray$1(this.layer.documentViewer.ocgsPtr)});case 10:y=w.sent,w.next=16;break;case 13:return w.next=15,this.layer.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:u,scale:this.layer.viewport.scale*this.ratio,top:m.top,left:m.left,right:m.right,bottom:m.bottom});case 15:y=w.sent;case 16:v=y.imageArray,(_=this.ctx.createImageData(parseInt(m.width),parseInt(m.height))).data.set(v),this.ctx.clearRect(m.left,m.top,m.width,m.height),this.ctx.putImageData(_,m.left,m.top),this.drawCanvas(this.positionArray);case 22:case"end":return w.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"getIntersection",value:function(o,s){var u=Math.max(o.left,s.left),d=Math.min(o.left+o.width,s.right),f=Math.max(o.top,s.top),g=Math.min(o.top+o.height,s.bottom);return d>u&&g>f?{left:u,top:f,width:d-u,height:g-f}:null}}]);var r}(),TextHighlightAnnotation=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.enableReply,f=d===void 0||d;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).type="highlight",o.enableReply=f,o.hidden=!0,o.markupContainer=null,o.outerLineContainer=null,o.ratio=window.devicePixelRatio||1,o.layer.pageViewer.canvas&&(o.ctx=o.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),o.lineWidth=2*o.layer.viewport.scale*o.ratio,o.onHandleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,s=convertColorToRGB(o.color),u=s.R,d=s.G,f=s.B;this.ctx.fillStyle="rgba(".concat(u,", ").concat(d,", ").concat(f,", ").concat(o.opacity||1,")");for(var g=0;g<r.length;g++){var m=r[g];this.ctx.fillRect(m.left*this.ratio,m.top*this.ratio,m.width*this.ratio,m.height*this.ratio)}}}])}(),TextSquigglyAnnotation=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.enableReply,f=d===void 0||d;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).type="squiggly",o.enableReply=f,o.hidden=!0,o.markupContainer=null,o.outerLineContainer=null,o.ratio=window.devicePixelRatio||1,o.layer.pageViewer.canvas&&(o.ctx=o.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),o.lineWidth=2*o.layer.viewport.scale*o.ratio,o.onHandleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,s=3*this.layer.viewport.scale,u=20*this.layer.viewport.scale,d=convertColorToRGB(o.color),f=d.R,g=d.G,m=d.B;this.ctx.strokeStyle="rgba(".concat(f,", ").concat(g,", ").concat(m,", ").concat(o.opacity||1,")"),this.ctx.lineWidth=this.lineWidth;for(var y=0;y<r.length;y++){var v=r[y];this.ctx.beginPath();for(var _=v.left*this.ratio;_<=(v.left+v.width)*this.ratio;_++){var w=(v.top+v.height)*this.ratio+s*Math.sin(_/u*2*Math.PI);this.ctx.lineTo(_,w)}this.ctx.stroke()}}}])}(),TextStrikeoutAnnotation=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.enableReply,f=d===void 0||d;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).type="strikeout",o.enableReply=f,o.hidden=!0,o.markupContainer=null,o.outerLineContainer=null,o.ratio=window.devicePixelRatio||1,o.layer.pageViewer.canvas&&(o.ctx=o.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),o.lineWidth=2*o.layer.viewport.scale*o.ratio,o.onHandleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,s=convertColorToRGB(o.color),u=s.R,d=s.G,f=s.B;this.ctx.fillStyle="rgba(".concat(u,", ").concat(d,", ").concat(f,", ").concat(o.opacity||1,")");for(var g=0;g<r.length;g++){var m=r[g];this.ctx.fillRect(m.left*this.ratio,(m.top+m.height/2)*this.ratio,m.width*this.ratio,this.lineWidth)}}}])}(),TextUnderlineAnnotation=function(e){function n(r){var o,s=r.annotation,u=r.layer;return r.enableReply,_classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).type="underline",o.layer.pageViewer.canvas&&(o.ctx=o.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,s=convertColorToRGB(o.color),u=s.R,d=s.G,f=s.B;this.ctx.fillStyle="rgba(".concat(u,", ").concat(d,", ").concat(f,", ").concat(o.opacity||1,")");for(var g=0;g<r.length;g++){var m=r[g];this.ctx.fillRect(m.left*this.ratio,(m.top+m.height)*this.ratio,m.width*this.ratio,this.lineWidth)}}}])}(),PaintLink=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.linkEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),s={operate:"add-annot",type:"link",pageIndex:this.layer.page,date:new Date},u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},d={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y};s.rect=f,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:s})}this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.linkEle){var f=this.calculate(this.initStartPoint,this.initEndPoint),g=this.linkEle;g.style.top="".concat(f.top,"px"),g.style.left="".concat(f.left,"px"),g.style.width="".concat(Math.abs(f.width-1),"px"),g.style.height="".concat(Math.abs(f.height-1),"px")}else{var m=createElement("div",{display:"block",backgroundColor:"#93B9FD",opacity:"0.3",position:"absolute"});this.linkEle=m,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.linkEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),Link=function(e){function n(s){var u,d=s.annotation,f=s.layer,g=s.show,m=g!==void 0&&g,y=s.highlight;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:d,layer:f}])).hidden=!0,u.initial=!1,u.start=null,u.end=null,u.newStart=null,u.newEnd=null,u.startCircle=null,u.endCircle=null,u.show=m,u.highlight=y,u.onMousedown=u.handleMouseDown.bind(u),u.onMouseup=u.handleMouseUp.bind(u),u.onMousemove=u.handleMouseMove.bind(u),u.onDelete=u.handleDelete.bind(u),u.setHighlight=u.setHighlight.bind(u),u.render(),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var s;for(var u in this.layer.eventBus._on("linkPropertyPanelChanged",this.handlePropertyPanel.bind(this)),this.layer.eventBus._on("setProperty",this.setProperty.bind(this)),this.layer.eventBus._on("setHighlightLink",this.setHighlight),this.annotation)u==="background-color"&&(this.annotation.backgroundColor=this.annotation[u],delete this.annotation[u]),u==="OnActivation"&&(this.annotation[u].Action&&this.annotation[u].Action.Dest&&this.annotation[u].Action.Dest.XYZ?(this.annotation.destPage=(parseInt(this.annotation.OnActivation.Action.Dest.XYZ.Page)+1).toString(),this.annotation.url=""):this.annotation[u].Action&&this.annotation[u].Action.URI&&(this.annotation.url=this.annotation.OnActivation.Action.URI.URI,this.annotation.destPage=""),delete this.annotation[u]),u==="Dest"&&(this.annotation[u].XYZ&&this.annotation[u].XYZ.Page&&(this.annotation.destPage=(parseInt(this.annotation.Dest.XYZ.Page)+1).toString(),this.annotation.url=""),delete this.annotation[u]);if((s=this.annotation.url)===null||s===void 0||!s.startsWith("af://")){var d=this.annotation,f=this.getActualRect(this.layer.viewport.scale),g=f.start,m=f.end;this.start=g,this.end=m;var y,v=this.calculate(g,m),_=document.createElement("div");_.id=d.name,_.className="annotation",_.style.top=v.top+"px",_.style.left=v.left+"px",_.style.width=v.width+"px",_.style.height=v.height+"px",_.style.backgroundColor=this.highlight?"#93B9FD":"",_.style.opacity=.3,this.annotationContainer=_,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),y=createElement("div",{left:0,top:0,width:"".concat(Math.abs(v.width),"px"),height:"".concat(Math.abs(v.height),"px"),position:"relative"}),this.shapeElement=y,this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),this.buttonContainer=createElement("a",{display:"block",width:"100%",height:"100%",outline:"none"}),this.shapeElement.append(this.buttonContainer),this.buttonContainer.addEventListener("blur",this.onBlur),this.annotation.url&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var w=v.left+v.width-30+"px",x=v.top+v.height+8+"px";this.deletetButton.style.left=w,this.deletetButton.style.top=x;var k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.zIndex=1,k.style.left="".concat(v.left-8,"px"),k.style.top="".concat(v.top-8,"px"),k.style.width="".concat(v.width+16,"px"),k.style.height="".concat(v.height+16,"px"),this.outerLine=k,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:v.width+8,height:v.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:v.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+5,y:v.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+9,y:v.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+9,y:v.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:v.width/2+5,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.initial=!0,this.show&&this.handleClick()}}},{key:"getActualRect",value:function(s){var u=this.annotation.rect,d=u.left,f=u.top,g=u.right,m=u.bottom;return{start:getActualPoint({x:d,y:f},s),end:getActualPoint({x:g,y:m},s)}}},{key:"rectCalc",value:function(s){var u=s.start,d=s.end;return{top:u.y<d.y?u.y:d.y,left:u.x<d.x?u.x:d.x,width:Math.abs(d.x-u.x),height:Math.abs(d.y-u.y)}}},{key:"calculate",value:function(s,u){var d=this.rectCalc({start:s,end:u}),f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"getInitialPoint",value:function(){var s=this.layer.viewport.scale;return{start:{x:this.start.x/s,y:this.start.y/s},end:{x:this.end.x/s,y:this.end.y/s}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var u=_objectSpread2$1({},s);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("linkPanelChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(s){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(s==null?void 0:s.target)||this.layer.documentViewer.toolMode==="editor"||(this.layer.documentViewer.toolMode==="annotation"&&this.layer.tool==="link"?(this.hidden=!1,this.updateTool(),onClickOutside([this.annotationContainer,this.outerLine,this.deletetButton,document.getElementById("linkPanel")],this.handleOutside.bind(this))):this.annotation.destPage?this.layer.eventBus.dispatch("pageNumberChanged",this.annotation.destPage):this.annotation.url&&this.buttonContainer.click())}},{key:"handleOutside",value:function(){var s,u,d;if(this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("linkPanelChange",null),this.layer.annotationStore.selectedElementName=null),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(s=this.outerLine)===null||s===void 0||s.removeEventListener("mousedown",this.onMousedown),(u=this.outerLine)===null||u===void 0||u.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),!this.annotation.url&&!this.annotation.destPage){var f;(f=this.annotationContainer)===null||f===void 0||f.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name});var g={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(g.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",g)}this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleMouseDown",value:function(s){if(s.button===0||s.type!=="mousedown"){this.layer.tool&&s.stopPropagation();var u=s.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(s),g=f.pageX,m=f.pageY;this.startState={operator:u,clickX:g,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}}},{key:"handleMouseMove",value:function(s){if(s.button===0||s.type!=="mousemove"){s.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ve){return ve.preventDefault()}),this.moving=!0;var u=getClickPoint(s),d=u.pageX,f=u.pageY,g=this.layer.documentViewer.getScrollViewElement(),m=g.scrollTop;d=d+g.scrollLeft-this.scrollLeft,f=f+m-this.scrollTop;var y=this.start,v=this.end,_=this.startState,w=this.layer.viewport,x=w.width,k=w.height;if(_.operator==="nw-resize"){var S=d-(_.clickX-this.start.x),M=f-(_.clickY-this.start.y);S=Math.min(v.x-5,S),S=Math.max(0,S),M=Math.min(v.y-5,M),M=Math.max(0,M),this.update({start:{x:S,y:M},end:v})}else if(_.operator==="w-resize"){var E=d-(_.clickX-this.start.x);E=Math.min(v.x-5,E),E=Math.max(0,E),this.update({start:{x:E,y:y.y},end:v})}else if(_.operator==="sw-resize"){var P=d-(_.clickX-this.start.x),T=f-(_.clickY-this.end.y);P=Math.min(v.x-5,P),P=Math.max(0,P),T=Math.min(k,T),T=Math.max(y.y+5,T),this.update({start:{x:P,y:y.y},end:{x:v.x,y:T}})}else if(_.operator==="s-resize"){var D=f-(_.clickY-this.end.y);D=Math.min(k,D),D=Math.max(y.y+5,D),this.update({start:y,end:{x:v.x,y:D}})}else if(_.operator==="se-resize"){var F=d-(_.clickX-this.end.x),I=f-(_.clickY-this.end.y);F=Math.min(x,F),F=Math.max(y.x+5,F),I=Math.min(k,I),I=Math.max(y.y+5,I),this.update({start:y,end:{x:F,y:I}})}else if(_.operator==="e-resize"){var N=d-(_.clickX-this.end.x);N=Math.min(x,N),N=Math.max(y.x+5,N),this.update({start:y,end:{x:N,y:v.y}})}else if(_.operator==="ne-resize"){var q=d-(_.clickX-this.end.x),Y=f-(_.clickY-this.start.y);q=Math.min(x,q),q=Math.max(y.x+5,q),Y=Math.min(v.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:y.x,y:Y},end:{x:q,y:v.y}})}else if(_.operator==="n-resize"){var Z=f-(_.clickY-this.start.y);Z=Math.min(v.y-5,Z),Z=Math.max(0,Z),this.update({start:{x:y.x,y:Z},end:v})}else if(_.operator==="move"){var j,ne,le,J,O=this.layer.documentViewer,U=this.getMouseLocation(s),W=O.getSelectedPage(U,U);if(W.first&&W.first!==this.layer.page+1){var H=O.windowToPage(U,W.first,!1),X=Math.abs(y.x-v.x),Q=Math.abs(y.y-v.y);if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===0)j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y;else if(O.pdfViewer.spreadMode===0&&O.pdfViewer.scrollMode===1)j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y);else if(O.pdfViewer.spreadMode===1&&O.pdfViewer.scrollMode===0){var fe=Math.min(W.first,this.layer.page+1),Se=Math.max(W.first,this.layer.page+1);if(Se-fe>2||fe+1===Se&&fe%2==0)return;fe+1===Se?(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y)):fe+2===Se&&(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y)}else if(O.pdfViewer.spreadMode===2&&O.pdfViewer.scrollMode===0){var Pe=Math.min(W.first,this.layer.page+1),$e=Math.max(W.first,this.layer.page+1);if($e-Pe>2||Pe+1===$e&&(Pe!==1||$e!==2)&&$e%2==0||Pe===1&&$e===3)return;Pe+2===$e||Pe===1&&$e===2?(j=d-(_.clickX-this.start.x),ne=W.first>this.layer.page+1?H.y:H.y-Q,le=d-(_.clickX-this.end.x),J=W.first>this.layer.page+1?H.y+Q:H.y):Pe+1===$e&&(j=W.first>this.layer.page+1?H.x:H.x-X,ne=f-(_.clickY-this.start.y),le=W.first>this.layer.page+1?H.x+X:H.x,J=f-(_.clickY-this.end.y))}this.layer=O.pdfViewer._pages[W.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ie=this.layer.div;Ie.append(this.annotationContainer),Ie.append(this.outerLineContainer)}else{j=d-(_.clickX-this.start.x),ne=f-(_.clickY-this.start.y),le=d-(_.clickX-this.end.x),J=f-(_.clickY-this.end.y);var Ne=O.pageToWindow({x:j,y:ne},this.layer.page+1,!1),Be=O.pageToWindow({x:le,y:J},this.layer.page+1,!1),be=0,Ve=0;f>_.clickY?Ve=(Ve=g.offsetHeight-(Be.y-g.scrollTop-g.offsetTop))<100?5:0:f<_.clickY&&(Ve=(Ve=Ne.y-g.scrollTop-g.offsetTop)<100?-5:0),d>_.clickX?be=(be=g.offsetWidth-(Be.x-g.scrollLeft-g.offsetLeft))<100?5:0:d<_.clickX&&(be=(be=Ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(be||Ve)&&(g.scrollTop+=Ve,g.scrollLeft+=be);var De={width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)};j<le?(j=Math.max(0,j),j=Math.min(x-De.width,j),le=Math.max(De.width,le),le=Math.min(x,le)):(le=Math.max(0,le),le=Math.min(x-De.width,le),j=Math.max(De.width,j),j=Math.min(x,j)),ne<J?(ne=Math.max(0,ne),ne=Math.min(k-De.height,ne),J=Math.max(De.height,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-De.height,J),ne=Math.max(De.height,ne),ne=Math.min(k,ne))}this.update({start:{x:j,y:ne},end:{x:le,y:J}})}_.clickX=d,_.clickY=f}}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",u)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(s){if(s.button===0||s.type!=="mouseup"){this.layer.tool&&s.stopPropagation(),s.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var u=this.annotation,d=this.getInitialPoint(),f=d.start,g=d.end,m={left:f.x,top:f.y,right:g.x,bottom:g.y};if(m!==u.rect||u.pageIndex!==this.layer.page)if(u.rect=m,u.pageIndex!==this.layer.page){var y={type:"delete",annotation:{operate:"del-annot",name:u.name,pageIndex:u.pageIndex,annotPtr:u.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",y);var v=Object.assign({},u);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-annot",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,rect:m}})}}},{key:"update",value:function(s){var u=s.start,d=s.end,f=this.calculate(u,d);this.start=u,this.end=d,this.annotationContainer.style.top=f.top+"px",this.annotationContainer.style.left=f.left+"px",this.annotationContainer.style.width=f.width+"px",this.annotationContainer.style.height=f.height+"px",this.annotationContainer.style.width="".concat(f.width,"px"),this.annotationContainer.style.height="".concat(f.height,"px"),this.shapeElement.style.width="".concat(f.width,"px"),this.shapeElement.style.height="".concat(f.height,"px"),this.outerLine.style.left="".concat(f.left-8,"px"),this.outerLine.style.top="".concat(f.top-8,"px"),this.outerLine.style.width="".concat(f.width+16,"px"),this.outerLine.style.height="".concat(f.height+16,"px");var g=f.left+f.width-30+"px",m=f.top+f.height+8+"px";this.deletetButton.style.left=g,this.deletetButton.style.top=m,this.moveRect.setAttribute("width",f.width+9),this.moveRect.setAttribute("height",f.height+9),this.LeftRect.setAttribute("y",f.height/2+5),this.bottomLeftRect.setAttribute("y",f.height+9),this.bottomRect.setAttribute("x",f.width/2+5),this.bottomRect.setAttribute("y",f.height+9),this.bottomRightRect.setAttribute("x",f.width+9),this.bottomRightRect.setAttribute("y",f.height+9),this.rightRect.setAttribute("x",f.width+9),this.rightRect.setAttribute("y",f.height/2+5),this.topRightRect.setAttribute("x",f.width+9),this.topRect.setAttribute("x",f.width/2+5)}},{key:"handlePropertyPanel",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v;return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){_.next=2;break}return _.abrupt("return");case 2:for(g in d=this.annotation,f=0,u){for(m in d)m!==g||d[m]===u[g]||["url","destPage"].includes(g)||(d[m]=u[g],f++);g==="url"&&d[g]!==u[g]&&(this.buttonContainer.setAttribute("href",u[g]),this.buttonContainer.setAttribute("target","_blank"),d.destPage="",d.url=u[g],f++),g==="destPage"&&d[g]!==u[g]&&(d.url="",d.destPage=u[g],f++)}if(!(f>0)){_.next=10;break}return y={operate:"mod-annot",name:d.name,pageIndex:this.layer.page,pagePtr:d.pagePtr,annotPtr:d.annotPtr,url:d.url,destPage:d.destPage},v=Object.assign({},y,u),_.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:v});case 10:this.handleOutside();case 11:case"end":return _.stop()}},s,this)})),function(s){return o.apply(this,arguments)})},{key:"setProperty",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v;return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){_.next=2;break}return _.abrupt("return");case 2:for(g in d=this.annotation,f=0,u){for(m in d)m!==g||d[m]===u[g]||["url","destPage"].includes(g)||(d[m]=u[g],f++);g==="url"&&d[g]!==u[g]&&(this.buttonContainer.setAttribute("href",u[g]),this.buttonContainer.setAttribute("target","_blank"),d.destPage="",d.url=u[g],f++),g==="destPage"&&d[g]!==u[g]&&(d.url="",d.destPage=u[g],f++)}if(!(f>0)){_.next=10;break}return y={operate:"mod-annot",name:d.name,pageIndex:this.layer.page,pagePtr:d.pagePtr,annotPtr:d.annotPtr,url:d.url,destPage:d.destPage},v=Object.assign({},y,u),_.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:v});case 10:case"end":return _.stop()}},s,this)})),function(s){return r.apply(this,arguments)})},{key:"isURL",value:function(s){return/^(?:(?:https?|ftp):\/\/)?(?:www\.)?(?:[\w]+\.){1,3}(?:[a-z]{2,})?(?:\/[\w .-]*)*(?:\?[^\s]*)?$/.test(s)}},{key:"setHighlight",value:function(s){this.highlight=s,this.annotationContainer&&(this.annotationContainer.style.backgroundColor=this.highlight?"#93B9FD":"")}}]);var r,o}(),AddSignField=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initTextfieldName",this.initTextfieldName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName&&!document.getElementById("sign-image-save")){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={left:s.x,top:s.y,right:u.x,bottom:u.y},f={operate:"add-form",type:"signatureFields",pageIndex:this.layer.page,date:new Date,rect:d,isSigned:0},g=1;if(this.layer.annotationStore.annotationsAll)for(var m=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(_,w){return _.concat(w)},[]).filter(function(_){return _.type==="signatureFields"}),y=function(){var _="SignatureFormField"+(v+1);if(m.every(function(w){return w.fieldName!==_}))return g=v+1,1},v=0;v<=m.length&&!y();v++);f.fieldName="SignatureFormField"+g,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.tool==="signatureFields"&&document.getElementById("createSignFieldButton").click()}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height;if(this.layer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#93B9FD",opacity:"0.3",position:"absolute"});this.shapeEle=x,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),SignatureFields=function(e){function n(f){var g,m=f.annotation,y=f.layer;return _classCallCheck(this,n),(g=_callSuper(this,n,[{annotation:m,layer:y}])).hidden=!0,g.start=null,g.end=null,g.newStart=null,g.newEnd=null,g.startCircle=null,g.endCircle=null,g.ratio=window.devicePixelRatio||1,g.isDigital=!1,g.onMousedown=g.handleMouseDown.bind(g),g.onMouseup=g.handleMouseUp.bind(g),g.onMousemove=g.handleMouseMove.bind(g),g.onDelete=g.handleDelete.bind(g),g.render(),g}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function f(){var g,m,y,v,_,w,x,k,S,M,E,P,T,D,F;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:for(m in g=this.annotation,this.layer.eventBus._on("setProperty",this.setProperty.bind(this)),this.layer.eventBus._on("updateSignatureFieldAp",this.updateAp.bind(this)),g)m==="background-color"&&(g.backgroundColor=g[m],delete g[m]);return y=this.getActualRect(this.layer.viewport.scale),v=y.start,_=y.end,this.start=v,this.end=_,w=this.calculate(v,_),(x=document.createElement("div")).id=g.name,x.className="annotation",x.style.top=w.top+"px",x.style.left=w.left+"px",x.style.width=w.width+"px",x.style.height=w.height+"px",x.style.overflow="hidden",this.annotationContainer=x,k=createElement("div",{left:0,top:0,width:"".concat(Math.abs(w.width),"px"),height:"".concat(Math.abs(w.height),"px"),backgroundColor:"#93B9FD",opacity:"0.3",position:"relative"}),this.shapeElement=k,g.isSigned||g.isSignedDigitally||((S=createElement("div",{position:"absolute",left:0,top:0,width:"73px",height:"22px",backgroundColor:"#1460F3",fontSize:"12px",fontWeight:"600",color:"white",lineHeight:"22px",textAlign:"center",transformOrigin:"0 0"})).innerText="SIGN HERE",M=Math.min(w.width/73,w.height/22),S.style.transform=M<1?"scale(".concat(M,")"):"",this.tagElement=S),(E=this.layer.annotationStore.signatures.find(function(N){return N.signaturePtr===g.signaturePtr}))&&(this.isDigital=E.isDigital),I.next=24,this.getSignatureImage();case 24:P=I.sent,g.imageBase64=P,this.annotationContainer.append(this.shapeElement),!g.isSigned&&this.annotationContainer.append(this.tagElement),this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,T=w.left+w.width-30+"px",D=w.top+w.height+8+"px",this.deletetButton.style.left=T,this.deletetButton.style.top=D,(F=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",F.style.zIndex=1,F.style.left="".concat(w.left-8,"px"),F.style.top="".concat(w.top-8,"px"),F.style.width="".concat(w.width+16,"px"),F.style.height="".concat(w.height+16,"px"),this.outerLine=F,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:w.width+8,height:w.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:w.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:w.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:w.width/2+5,y:w.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:w.width+9,y:w.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:w.width+9,y:w.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:w.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:w.width/2+5,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 68:case"end":return I.stop()}},f,this)})),function(){return d.apply(this,arguments)})},{key:"getActualRect",value:function(f){var g=this.annotation.rect,m=g.left,y=g.top,v=g.right,_=g.bottom;return{start:getActualPoint({x:m,y},f),end:getActualPoint({x:v,y:_},f)}}},{key:"rectCalc",value:function(f){var g=f.start,m=f.end;return{top:g.y<m.y?g.y:m.y,left:g.x<m.x?g.x:m.x,width:Math.abs(m.x-g.x),height:Math.abs(m.y-g.y)}}},{key:"calculate",value:function(f,g){var m=this.rectCalc({start:f,end:g});this.initRect=m;var y=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:m.top-y,left:m.left-y,width:m.width+2*y,height:m.height+2*y}}},{key:"getInitialPoint",value:function(){var f=this.layer.viewport.scale;return{start:{x:this.start.x/f,y:this.start.y/f},end:{x:this.end.x/f,y:this.end.y/f}}}},{key:"updateTool",value:function(){if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var f=this.annotation;this.layer.annotationStore.selectedElementName=f.name;var g=_objectSpread2$1({},f);delete g.annotPtr,delete g.pagePtr,delete g.operate,delete g.targetPage,this.layer.eventBus.dispatch("annotationSelected",g)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(f){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(f==null?void 0:f.target)||this.layer.documentViewer.toolMode==="editor"||document.getElementById("sign-image-save")||this.isDigital||this.layer.pageDiv.querySelector(".annotationLayer svg").style.cursor==="crosshair"&&this.layer.documentViewer.toolMode!=="sign"||(this.layer.tool==="signatureFields"?(this.hidden=!1,this.updateTool(),onClickOutside([this.annotationContainer,this.outerLine,this.deletetButton],this.handleOutside.bind(this))):this.layer.eventBus.dispatch("openSelectSignTypeDialog",this.annotation))}},{key:"handleOutside",value:function(){var f,g,m;this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(f=this.outerLine)===null||f===void 0||f.removeEventListener("mousedown",this.onMousedown),(g=this.outerLine)===null||g===void 0||g.removeEventListener("touchstart",this.onMousedown),(m=this.outerLineContainer)===null||m===void 0||m.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleMouseDown",value:function(f){if(f.button===0||f.type!=="mousedown"){this.layer.tool&&f.stopPropagation();var g=f.target.getAttribute("data-id"),m=this.layer.documentViewer.getScrollViewElement();this.scrollTop=m.scrollTop,this.scrollLeft=m.scrollLeft;var y=getClickPoint(f),v=y.pageX,_=y.pageY;this.startState={operator:g,clickX:v,clickY:_},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(f){if(f.button===0||f.type!=="mousemove"){f.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ke){return ke.preventDefault()}),this.moving=!0;var g=getClickPoint(f),m=g.pageX,y=g.pageY,v=this.layer.documentViewer.getScrollViewElement(),_=v.scrollTop;m=m+v.scrollLeft-this.scrollLeft,y=y+_-this.scrollTop;var w=this.start,x=this.end,k=this.startState,S=this.layer.viewport,M=S.width,E=S.height;if(k.operator==="nw-resize"){var P=m-(k.clickX-this.start.x),T=y-(k.clickY-this.start.y);P=Math.min(x.x-5,P),P=Math.max(0,P),T=Math.min(x.y-5,T),T=Math.max(0,T),this.update({start:{x:P,y:T},end:x})}else if(k.operator==="w-resize"){var D=m-(k.clickX-this.start.x);D=Math.min(x.x-5,D),D=Math.max(0,D),this.update({start:{x:D,y:w.y},end:x})}else if(k.operator==="sw-resize"){var F=m-(k.clickX-this.start.x),I=y-(k.clickY-this.end.y);F=Math.min(x.x-5,F),F=Math.max(0,F),I=Math.min(E,I),I=Math.max(w.y+5,I),this.update({start:{x:F,y:w.y},end:{x:x.x,y:I}})}else if(k.operator==="s-resize"){var N=y-(k.clickY-this.end.y);N=Math.min(E,N),N=Math.max(w.y+5,N),this.update({start:w,end:{x:x.x,y:N}})}else if(k.operator==="se-resize"){var q=m-(k.clickX-this.end.x),Y=y-(k.clickY-this.end.y);q=Math.min(M,q),q=Math.max(w.x+5,q),Y=Math.min(E,Y),Y=Math.max(w.y+5,Y),this.update({start:w,end:{x:q,y:Y}})}else if(k.operator==="e-resize"){var Z=m-(k.clickX-this.end.x);Z=Math.min(M,Z),Z=Math.max(w.x+5,Z),this.update({start:w,end:{x:Z,y:x.y}})}else if(k.operator==="ne-resize"){var j=m-(k.clickX-this.end.x),ne=y-(k.clickY-this.start.y);j=Math.min(M,j),j=Math.max(w.x+5,j),ne=Math.min(x.y-5,ne),ne=Math.max(0,ne),this.update({start:{x:w.x,y:ne},end:{x:j,y:x.y}})}else if(k.operator==="n-resize"){var le=y-(k.clickY-this.start.y);le=Math.min(x.y-5,le),le=Math.max(0,le),this.update({start:{x:w.x,y:le},end:x})}else if(k.operator==="move"){var J,O,U,W,H=this.layer.documentViewer,X=this.getMouseLocation(f),Q=H.getSelectedPage(X,X);if(Q.first&&Q.first!==this.layer.page+1){var fe=H.windowToPage(X,Q.first,!1),Se=Math.abs(w.x-x.x),Pe=Math.abs(w.y-x.y);if(H.pdfViewer.spreadMode===0&&H.pdfViewer.scrollMode===0)J=m-(k.clickX-this.start.x),O=Q.first>this.layer.page+1?fe.y:fe.y-Pe,U=m-(k.clickX-this.end.x),W=Q.first>this.layer.page+1?fe.y+Pe:fe.y;else if(H.pdfViewer.spreadMode===0&&H.pdfViewer.scrollMode===1)J=Q.first>this.layer.page+1?fe.x:fe.x-Se,O=y-(k.clickY-this.start.y),U=Q.first>this.layer.page+1?fe.x+Se:fe.x,W=y-(k.clickY-this.end.y);else if(H.pdfViewer.spreadMode===1&&H.pdfViewer.scrollMode===0){var $e=Math.min(Q.first,this.layer.page+1),Ie=Math.max(Q.first,this.layer.page+1);if(Ie-$e>2||$e+1===Ie&&$e%2==0)return;$e+1===Ie?(J=Q.first>this.layer.page+1?fe.x:fe.x-Se,O=y-(k.clickY-this.start.y),U=Q.first>this.layer.page+1?fe.x+Se:fe.x,W=y-(k.clickY-this.end.y)):$e+2===Ie&&(J=m-(k.clickX-this.start.x),O=Q.first>this.layer.page+1?fe.y:fe.y-Pe,U=m-(k.clickX-this.end.x),W=Q.first>this.layer.page+1?fe.y+Pe:fe.y)}else if(H.pdfViewer.spreadMode===2&&H.pdfViewer.scrollMode===0){var Ne=Math.min(Q.first,this.layer.page+1),Be=Math.max(Q.first,this.layer.page+1);if(Be-Ne>2||Ne+1===Be&&(Ne!==1||Be!==2)&&Be%2==0||Ne===1&&Be===3)return;Ne+2===Be||Ne===1&&Be===2?(J=m-(k.clickX-this.start.x),O=Q.first>this.layer.page+1?fe.y:fe.y-Pe,U=m-(k.clickX-this.end.x),W=Q.first>this.layer.page+1?fe.y+Pe:fe.y):Ne+1===Be&&(J=Q.first>this.layer.page+1?fe.x:fe.x-Se,O=y-(k.clickY-this.start.y),U=Q.first>this.layer.page+1?fe.x+Se:fe.x,W=y-(k.clickY-this.end.y))}this.layer=H.pdfViewer._pages[Q.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var be=this.layer.div;be.append(this.annotationContainer),be.append(this.outerLineContainer)}else{J=m-(k.clickX-this.start.x),O=y-(k.clickY-this.start.y),U=m-(k.clickX-this.end.x),W=y-(k.clickY-this.end.y);var Ve=H.pageToWindow({x:J,y:O},this.layer.page+1,!1),De=H.pageToWindow({x:U,y:W},this.layer.page+1,!1),ve=0,ye=0;y>k.clickY?ye=(ye=v.offsetHeight-(De.y-v.scrollTop-v.offsetTop))<100?5:0:y<k.clickY&&(ye=(ye=Ve.y-v.scrollTop-v.offsetTop)<100?-5:0),m>k.clickX?ve=(ve=v.offsetWidth-(De.x-v.scrollLeft-v.offsetLeft))<100?5:0:m<k.clickX&&(ve=(ve=Ve.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(ve||ye)&&(v.scrollTop+=ye,v.scrollLeft+=ve);var we={width:Math.abs(w.x-x.x),height:Math.abs(w.y-x.y)};J<U?(J=Math.max(0,J),J=Math.min(M-we.width,J),U=Math.max(we.width,U),U=Math.min(M,U)):(U=Math.max(0,U),U=Math.min(M-we.width,U),J=Math.max(we.width,J),J=Math.min(M,J)),O<W?(O=Math.max(0,O),O=Math.min(E-we.height,O),W=Math.max(we.height,W),W=Math.min(E,W)):(W=Math.max(0,W),W=Math.min(E-we.height,W),O=Math.max(we.height,O),O=Math.min(E,O))}this.update({start:{x:J,y:O},end:{x:U,y:W}})}k.clickX=m,k.clickY=y}}},{key:"handleDelete",value:function(f){var g=f instanceof Event?f:null;if(g||!f||f.signaturePtr===this.annotation.signaturePtr){this.layer.tool&&g&&g.stopPropagation(),this.delete();var m={type:"delete",annotation:{type:this.annotation.type,operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(m.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",m)}}},{key:"delete",value:function(){var f;this.handleOutside(),(f=this.annotationContainer)===null||f===void 0||f.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(f){if(f.button===0||f.type!=="mouseup"){this.layer.tool&&f.stopPropagation(),f.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var g=this.annotation,m=this.getInitialPoint(),y=m.start,v=m.end,_={left:y.x,top:y.y,right:v.x,bottom:v.y};if(_!==g.rect||g.pageIndex!==this.layer.page)if(g.rect=_,g.pageIndex!==this.layer.page){var w={type:"delete",annotation:{type:g.type,operate:"del-annot",name:g.name,pageIndex:g.pageIndex,annotPtr:g.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",w);var x=Object.assign({},g);delete x.annotPtr,delete x.pagePtr,delete x.name,x.operate="add-form",x.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:x}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",type:g.type,name:g.name,pageIndex:this.layer.page,pagePtr:g.pagePtr,annotPtr:g.annotPtr,rect:_}})}}},{key:"update",value:function(f){var g=f.start,m=f.end,y=this.calculate(g,m);this.start=g,this.end=m,this.annotationContainer.style.top=y.top+"px",this.annotationContainer.style.left=y.left+"px",this.annotationContainer.style.width=y.width+"px",this.annotationContainer.style.height=y.height+"px",this.annotationContainer.style.width="".concat(y.width,"px"),this.annotationContainer.style.height="".concat(y.height,"px"),this.shapeElement.style.width="".concat(y.width,"px"),this.shapeElement.style.height="".concat(y.height,"px"),this.outerLine.style.left="".concat(y.left-8,"px"),this.outerLine.style.top="".concat(y.top-8,"px"),this.outerLine.style.width="".concat(y.width+16,"px"),this.outerLine.style.height="".concat(y.height+16,"px");var v=y.left+y.width-30+"px",_=y.top+y.height+8+"px";this.deletetButton.style.left=v,this.deletetButton.style.top=_,this.moveRect.setAttribute("width",y.width+9),this.moveRect.setAttribute("height",y.height+9),this.LeftRect.setAttribute("y",y.height/2+5),this.bottomLeftRect.setAttribute("y",y.height+9),this.bottomRect.setAttribute("x",y.width/2+5),this.bottomRect.setAttribute("y",y.height+9),this.bottomRightRect.setAttribute("x",y.width+9),this.bottomRightRect.setAttribute("y",y.height+9),this.rightRect.setAttribute("x",y.width+9),this.rightRect.setAttribute("y",y.height/2+5),this.topRightRect.setAttribute("x",y.width+9),this.topRect.setAttribute("x",y.width/2+5)}},{key:"handlePropertyPanel",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function f(g){var m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){k.next=2;break}return k.abrupt("return");case 2:for(v in m=this.annotation,y=0,g)for(_ in m)_===v&&m[_]!==g[v]&&(m[_]=g[v],y++);if(!(y>0)){k.next=10;break}return w={operate:"mod-form",type:m.type,name:m.name,pageIndex:this.layer.page,pagePtr:m.pagePtr,annotPtr:m.annotPtr,url:m.url,destPage:m.destPage},x=Object.assign({},w,g),k.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:x});case 10:this.handleOutside();case 11:case"end":return k.stop()}},f,this)})),function(f){return u.apply(this,arguments)})},{key:"setProperty",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function f(g){var m,y,v,_,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){k.next=2;break}return k.abrupt("return");case 2:for(v in m=this.annotation,y=0,g)for(_ in m)_===v&&m[_]!==g[v]&&(m[_]=g[v],y++);if(!(y>0)){k.next=10;break}return w={operate:"mod-form",type:m.type,name:m.name,pageIndex:this.layer.page,pagePtr:m.pagePtr,annotPtr:m.annotPtr,url:m.url,destPage:m.destPage},x=Object.assign({},w,g),k.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:x});case 10:case"end":return k.stop()}},f,this)})),function(f){return s.apply(this,arguments)})},{key:"getSignatureImage",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function f(){var g,m,y,v,_,w,x,k;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g=this.initRect,m={width:parseInt(g.width*this.ratio+1),height:parseInt(g.height*this.ratio+1)},S.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{annotPtr:this.annotation.annotPtr,width:m.width,height:m.height});case 4:return y=S.sent,(v=document.createElement("canvas")).style.width=m.width+"px",v.style.height=m.height+"px",v.width=m.width,v.height=m.height,(_=v.getContext("2d")).clearRect(0,0,v.width,v.height),(w=_.createImageData(m.width,m.height)).data.set(y),_.putImageData(w,0,0),x=v.toDataURL("image/png",1),this.imgEle?this.imgEle.src=x:((k=document.createElement("img")).style.width="100%",k.style.height="100%",k.style.pointerEvents="none",k.style.display="block",this.isDigital&&(this.annotationContainer.style.zIndex=1,this.shapeElement.style.pointerEvents="none"),this.shapeElement.style.position="absolute",k.src=x,this.imgEle=k,this.annotationContainer.append(this.imgEle)),S.abrupt("return",x);case 18:case"end":return S.stop()}},f,this)})),function(){return o.apply(this,arguments)})},{key:"updateAp",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function f(g){var m;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.annotation.annotPtr===g||this.annotation.signaturePtr===g){y.next=2;break}return y.abrupt("return");case 2:return this.isDigital=!1,this.annotation.isSigned=1,this.tagElement.remove(),y.next=7,this.getSignatureImage();case 7:m=y.sent,this.annotation.imageBase64=m;case 9:case"end":return y.stop()}},f,this)})),function(f){return r.apply(this,arguments)})}]);var r,o,s,u,d}(),PaintRedaction=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.layer;_classCallCheck(this,e),this.layer=s,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.linkEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName&&!this.layer.pageDiv.classList.contains("text")){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={rect:{left:s.x,top:s.y,right:u.x,bottom:u.y},operate:"add-annot",type:"redact",pageIndex:this.layer.page,date:new Date,erasure:this._tool==="remove"};this._tool==="redaction"&&(d.fillColor="rgb(0, 0, 0)"),this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d})}this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,s=this.layer.viewport,u=s.width,d=s.height,f=this.layer.viewport.scale;if(r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.linkEle){var g=this.calculate(this.initStartPoint,this.initEndPoint),m=this.linkEle;m.style.top="".concat(g.top,"px"),m.style.left="".concat(g.left,"px"),m.style.width="".concat(Math.abs(g.width-1),"px"),m.style.height="".concat(Math.abs(g.height-1),"px")}else{var y=createElement("div",{display:"block",border:"".concat(2*f,"px solid #FF0000"),position:"absolute"});this.linkEle=y,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.linkEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n});return{top:r.top,left:r.left,width:r.width,height:r.height}}}])}(),Redaction=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.show,f=d!==void 0&&d;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).hidden=!0,o.initial=!1,o.start=null,o.end=null,o.startCircle=null,o.endCircle=null,o.show=f,o.onMousedown=o.handleMouseDown.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onDelete=o.handleDelete.bind(o),o.onKeydown=o.handleKeyDown.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var r=this,o=this.annotation;if(o.hasOwnProperty("rect")){var s=this.getActualRect(this.layer.viewport.scale),u=s.start,d=s.end;this.start=u,this.end=d;var f=this.calculate(u,d),g=[];o.rects&&o.rects.length?o.rects.forEach(function(k){var S=r.getActualRect(r.layer.viewport.scale,k),M=S.start,E=S.end;g.push(r.calculate(M,E))}):g.push(f);var m=createElement("div",{left:f.left+"px",top:f.top+"px",width:"".concat(Math.abs(f.width),"px"),height:"".concat(Math.abs(f.height),"px")},{id:o.name,class:"annotation redact"});this.annotationContainer=m;var y=(o.borderWidth||2)*this.layer.viewport.scale,v=[];g.forEach(function(k){var S=createElement("div",{left:k.left-f.left-(o.erasure?y/2:y)+"px",top:k.top-f.top+"px",width:"".concat(Math.abs(k.width)+(o.erasure?y:2*y),"px"),height:"".concat(Math.abs(k.height),"px"),position:"absolute",border:"".concat(y,"px solid #FF0000"),transition:"none"});o.erasure&&(S.style.backgroundColor="rgba(255, 255, 255)"),v.push(S),r.annotationContainer.append(S)}),this.layer.div.append(this.annotationContainer),this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{width:"30px",height:"30px",zIndex:1}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var _=f.left+f.width-30+"px",w=f.top+f.height+8+"px";this.deletetButton.style.left=_,this.deletetButton.style.top=w;var x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.style.position="absolute",x.style.zIndex=1,x.style.left="".concat(f.left-8-(o.erasure?y/2:y),"px"),x.style.top="".concat(f.top-8,"px"),x.style.width="".concat(f.width+16+(o.erasure?y:2*y),"px"),x.style.height="".concat(f.height+16,"px"),this.outerLine=x,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:f.width+8+(o.erasure?y:2*y),height:f.height+8,x:4,y:4},{cursor:"pointer"}),this.outerLine.append(this.moveRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),o.erasure||(this.annotationContainer.addEventListener("mouseenter",function(){r.layer.pageDiv.classList.contains("selecting")||v.forEach(function(k){k.style.backgroundColor="#000000",k.style.border=""})}),this.annotationContainer.addEventListener("mouseleave",function(){v.forEach(function(k){k.style.backgroundColor="",k.style.border="".concat(y,"px solid #FF0000")})}),this.moveRect.addEventListener("mouseenter",function(){v.forEach(function(k){k.style.backgroundColor="#000000",k.style.border=""})}),this.moveRect.addEventListener("mouseleave",function(){v.forEach(function(k){k.style.backgroundColor="",k.style.border="2px solid #FF0000"})})),this.initial=!0}}},{key:"getActualRect",value:function(r,o){var s=o||this.annotation.rect,u=s.left,d=s.top,f=s.right,g=s.bottom;return{start:getActualPoint({x:u,y:d},r),end:getActualPoint({x:f,y:g},r)}}},{key:"rectCalc",value:function(r){var o=r.start,s=r.end;return{top:o.y<s.y?o.y:s.y,left:o.x<s.x?o.x:s.x,width:Math.abs(s.x-o.x),height:Math.abs(s.y-o.y)}}},{key:"calculate",value:function(r,o){var s=this.rectCalc({start:r,end:o});return{top:s.top,left:s.left,width:s.width,height:s.height}}},{key:"getInitialPoint",value:function(){var r=this.layer.viewport.scale;return{start:{x:this.start.x/r,y:this.start.y/r},end:{x:this.end.x/r,y:this.end.y/r}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.annotationStore.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown)}}},{key:"handleClick",value:function(){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||this.layer.documentViewer.toolMode==="editor"||this.layer.documentViewer.toolMode==="security"&&(this.hidden=!1,this.updateTool(),onClickOutside([this.annotationContainer,this.outerLine,this.deletetButton],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){var r,o,s;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.annotationStore.selectedElementName=null),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(s=this.outerLineContainer)===null||s===void 0||s.remove(),document.removeEventListener("keydown",this.onKeydown)}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation();var o=r.target.getAttribute("data-id"),s=getClickPoint(r),u=s.pageX,d=s.pageY;this.startState={operator:o,clickX:u,clickY:d},document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchend",this.onMouseup),this.handleClick()}}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchend",this.onMouseup);var o=getClickPoint(r),s=o.pageX,u=o.pageY;if(s!==this.startState.clickX||u!==this.startState.clickY){var d=this.annotation,f=this.getInitialPoint(),g=f.start,m=f.end,y={left:g.x,top:g.y,right:m.x,bottom:m.y};this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:d.name,pageIndex:this.layer.page,pagePtr:d.pagePtr,annotPtr:d.annotPtr,rect:y}})}}}},{key:"handleKeyDown",value:function(r){var o=r.keyCode||r.which;o!==8&&o!==46||this.handleDelete(r)}}])}(),Shape=function(e){function n(r){var o,s=r.annotation,u=r.layer,d=r.show,f=d!==void 0&&d,g=r.enableReply,m=g===void 0||g;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:u}])).enableReply=m,o.hidden=!0,o.initial=!1,o.start=null,o.end=null,o.newStart=null,o.newEnd=null,o.startCircle=null,o.endCircle=null,o.show=f,o.handleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var r=this.annotation,o=this.getActualRect(this.layer.viewport.scale),s=o.start,u=o.end;this.start=s,this.end=u;var d=this.calculate(s,u);r.borderWidth,this.layer.viewport.scale,r.borderColor||(r.borderColor="#000000");var f=document.createElement("div");f.id=r.name,f.className="annotation",f.style.top=d.top+"px",f.style.left=d.left+"px",f.style.width=d.width+"px",f.style.height=d.height+"px",f.style.border="1px solid "+r.borderColor,f.style.pointerEvents="auto",f.addEventListener("click",this.handleClick),this.annotationContainer=f,this.layer.div.append(this.annotationContainer),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"setCss",value:function(r,o){if(r&&o)for(var s in o)r.style[s]=o[s]}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,s=o.left,u=o.top,d=o.right,f=o.bottom;return{start:getActualPoint({x:s,y:u},r),end:getActualPoint({x:d,y:f},r)}}},{key:"rectCalc",value:function(r){var o=r.start,s=r.end;return{top:o.y<s.y?o.y:s.y,left:o.x<s.x?o.x:s.x,width:Math.abs(s.x-o.x),height:Math.abs(s.y-o.y)}}},{key:"calculate",value:function(r,o){var s=this.rectCalc({start:r,end:o}),u=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:s.top-u,left:s.left-u,width:s.width+2*u,height:s.height+2*u}}},{key:"getInitialPoint",value:function(){var r=this.layer.viewport.scale;return{start:{x:this.start.x/r,y:this.start.y/r},end:{x:this.end.x/r,y:this.end.y/r}}}},{key:"selectAnnotation",value:function(){this.layer.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null);else{if(this.layer.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.selectedElementName=r.name,this.setCss(this.annotationContainer,this.annotation.selectedStyle);var o=_objectSpread2$1({},r);delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(r){!this.hidden||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)||(this.hidden=!1,this.updateTool(),onClickOutside([this.annotationContainer,document.querySelector(".toggle-button")],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){this.hidden=!0,this.layer.selectedElementName===this.annotation.name&&(this.layer.selectedElementName=null),this.annotationContainer.remove(),this.annotationContainer=null,this.render(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}}])}(),Polygon=function(e){function n(y){var v,_=y.annotation,w=y.layer,x=y.show,k=x!==void 0&&x,S=y.enableReply,M=S===void 0||S;return _classCallCheck(this,n),(v=_callSuper(this,n,[{annotation:_,layer:w}])).enableReply=M,v.hidden=!0,v.initial=!1,v.start=null,v.end=null,v.newStart=null,v.newEnd=null,v.svgElement=null,v.startCircle=null,v.endCircle=null,v.show=k,v.ratio=window.devicePixelRatio||1,v.decimalPlaces=0,v.showPerimeter=!0,v.showArea=!0,v.isPopupShow=!1,v.onMousedown=v.handleMouseDown.bind(v),v.onMouseup=v.handleMouseUp.bind(v),v.onMousemove=v.handleMouseMove.bind(v),v.onDelete=v.handleDelete.bind(v),v.onOpenReply=v.openReply.bind(v),v.handlePropertyPanel=v.handlePropertyPanel.bind(v),v.onHandlePopup=v.handlePopup.bind(v),v.onKeydown=v.handleKeyDown.bind(v),v.render(),v}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var v,_,w,x,k,S,M,E,P,T,D,F,I;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if((v=this.annotation).showPerimeter!==void 0&&(this.showPerimeter=v.showPerimeter,delete v.showPerimeter),v.showArea!==void 0&&(this.showArea=v.showArea,delete v.showArea),v.fillColor||(v.fillColor=""),v.borderStyle||(v.borderStyle="solid"),v.contents){N.next=12;break}return N.next=8,this.getMeasureData();case 8:_=[],this.showPerimeter&&_.push(this.annotation.perimeter+this.annotation.scale.translateUnit),this.showArea&&_.push(this.annotation.area+this.annotation.scale.translateUnit+"\xB2"),v.contents=_.join(`
`);case 12:v.precision&&(v.precision>1&&(v.precision=Math.pow(10,-Math.floor(Math.log10(v.precision)))),this.decimalPlaces=((w=Math.abs(v.precision).toString().split(".")[1])===null||w===void 0?void 0:w.length)||0,v.area=this.formatValue(v.area),v.perimeter=this.formatValue(v.perimeter)),v.fontStyle||(v.fontStyle="regular"),x=this.layer.viewport.scale,k=this.getActualRect(x),S=k.start,M=k.end,this.start=S,this.end=M,E=this.calculate(S,M),this.rect=E,P=(v.borderWidth||2)*x,v.borderColor||(v.borderColor=v.color||"#FF0000"),(T=document.createElement("div")).id=v.name,T.className="annotation",T.style.top=E.top+"px",T.style.left=E.left+"px",T.style.width=E.width+"px",T.style.height=E.height+"px",this.annotationContainer=T,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","0 0 ".concat(E.width," ").concat(E.height)),this.svgElement.style.pointerEvents="all",this.svgElement.style.opacity=v.opacity,D="",F=Math.ceil(this.ratio*this.layer.viewport.scale),v.dashes.length===1||v.dashes.length===2&&v.dashes[0]===v.dashes[1]?D=Math.ceil(v.dashes[0]*F)+"":v.dashes.length>2&&(D=v.dashes.map(function(q){return Math.ceil(q*F)}).join(", ")),this.shapeElement=createSvg("rect",{x:P/2,y:P/2,width:"".concat(Math.abs(E.width-P),"px"),height:"".concat(Math.abs(E.height-P),"px"),stroke:v.borderColor,"stroke-width":P,"stroke-dasharray":D,fill:v.fillColor?v.fillColor:"none","fill-opacity":v.fillTransparency||1},{"stroke-linecap":"butt"}),this.svgElement.append(this.shapeElement),this.annotationContainer.append(this.svgElement),this.layer.div.append(this.annotationContainer),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),v.measure&&(this.textEle=createSvg("text",{fill:v.color||v.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":v.fontSize+"px"}),this.svgElement.append(this.textEle),this.showPerimeter&&(this.permiterTspan=createSvg("tspan",{x:(M.x-S.x)/2,y:(M.y-S.y)/2,dy:"0em"}),this.permiterTspan.textContent=v.perimeter+v.scale.translateUnit,this.textEle.appendChild(this.permiterTspan)),this.showArea&&(this.areaTspan=createSvg("tspan",{x:(M.x-S.x)/2,y:(M.y-S.y)/2,dy:"1em"}),this.areaTspan.textContent=v.area+v.scale.translateUnit+"\xB2",this.textEle.appendChild(this.areaTspan))),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",(I=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",I.style.zIndex=1,I.style.left="".concat(E.left-7,"px"),I.style.top="".concat(E.top-7,"px"),I.style.width="".concat(E.width+14,"px"),I.style.height="".concat(E.height+14,"px"),I.style.pointerEvents="all",this.outerLine=I,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"stroke-dasharray":"2","fill-opacity":0,width:E.width+8,height:E.height+8,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:E.height+8}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:E.width+8,y:E.height+8}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:E.width+8,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.topRightRect),this.outerLineContainer.append(this.outerLine),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 67:case"end":return N.stop()}},y,this)})),function(){return m.apply(this,arguments)})},{key:"getActualRect",value:function(y){var v=this.annotation.rect,_=v.left,w=v.top,x=v.right,k=v.bottom;return{start:getActualPoint({x:_,y:w},y),end:getActualPoint({x,y:k},y)}}},{key:"rectCalc",value:function(y){var v=y.start,_=y.end;return{top:v.y<_.y?v.y:_.y,left:v.x<_.x?v.x:_.x,width:Math.abs(_.x-v.x),height:Math.abs(_.y-v.y)}}},{key:"calculate",value:function(y,v){var _=this.rectCalc({start:y,end:v}),w=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:_.top-w,left:_.left-w,width:_.width+2*w,height:_.height+2*w}}},{key:"getInitialPoint",value:function(){var y=this.layer.viewport.scale;return{start:{x:this.start.x/y,y:this.start.y/y},end:{x:this.end.x/y,y:this.end.y/y}}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var y=this.annotation;this.layer.annotationStore.selectedElementName=y.name;var v=_objectSpread2$1({},y);delete v.annotPtr,delete v.pagePtr,delete v.operate,delete v.targetPage,this.layer.eventBus.dispatch("annotationSelected",v)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,perimeter:this.annotation.perimeter,area:this.annotation.area,showPerimeter:this.showPerimeter,showArea:this.showArea}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(y){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(y==null?void 0:y.target)){this.hidden=!1,this.updateTool(),this.annotation.measure&&(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)),document.addEventListener("keydown",this.onKeydown);var v=[this.svgElement,this.outerLine,document.querySelector(".toggle-button"),document.getElementById("propertyPanelButton"),document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];onClickOutsideUp(v,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var y,v,_;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),document.removeEventListener("keydown",this.onKeydown),(y=this.outerLine)===null||y===void 0||y.removeEventListener("mousedown",this.onMousedown),(v=this.outerLine)===null||v===void 0||v.removeEventListener("touchstart",this.onMousedown),(_=this.outerLineContainer)===null||_===void 0||_.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure&&(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup))}},{key:"handleMouseDown",value:function(y){if(y.button===0||y.type!=="mousedown"){this.layer.tool&&y.stopPropagation();var v=y.target.getAttribute("data-id"),_=this.layer.documentViewer.getScrollViewElement();this.scrollTop=_.scrollTop,this.scrollLeft=_.scrollLeft;var w=getClickPoint(y),x=w.pageX,k=w.pageY;this.startState={operator:v,clickX:x,clickY:k},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(y){if(y.button===0||y.type!=="mousemove"){this.hidePopup(),y.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var v=getClickPoint(y),_=v.pageX,w=v.pageY,x=this.layer.documentViewer.getScrollViewElement(),k=x.scrollTop;_=_+x.scrollLeft-this.scrollLeft,w=w+k-this.scrollTop;var S=this.start,M=this.end,E=this.startState,P=this.layer.viewport,T=P.width,D=P.height;if(E.operator==="nw-resize"){var F=_-(E.clickX-this.start.x),I=w-(E.clickY-this.start.y);F=Math.min(M.x-5,F),F=Math.max(0,F),I=Math.min(M.y-5,I),I=Math.max(0,I),this.update({start:{x:F,y:I},end:M})}else if(E.operator==="w-resize"){var N=_-(E.clickX-this.start.x);N=Math.min(M.x-5,N),N=Math.max(0,N),this.update({start:{x:N,y:S.y},end:M})}else if(E.operator==="sw-resize"){var q=_-(E.clickX-this.start.x),Y=w-(E.clickY-this.end.y);q=Math.min(M.x-5,q),q=Math.max(0,q),Y=Math.min(D,Y),Y=Math.max(S.y+5,Y),this.update({start:{x:q,y:S.y},end:{x:M.x,y:Y}})}else if(E.operator==="s-resize"){var Z=w-(E.clickY-this.end.y);Z=Math.min(D,Z),Z=Math.max(S.y+5,Z),this.update({start:S,end:{x:M.x,y:Z}})}else if(E.operator==="se-resize"){var j=_-(E.clickX-this.end.x),ne=w-(E.clickY-this.end.y);j=Math.min(T,j),j=Math.max(S.x+5,j),ne=Math.min(D,ne),ne=Math.max(S.y+5,ne),this.update({start:S,end:{x:j,y:ne}})}else if(E.operator==="e-resize"){var le=_-(E.clickX-this.end.x);le=Math.min(T,le),le=Math.max(S.x+5,le),this.update({start:S,end:{x:le,y:M.y}})}else if(E.operator==="ne-resize"){var J=_-(E.clickX-this.end.x),O=w-(E.clickY-this.start.y);J=Math.min(T,J),J=Math.max(S.x+5,J),O=Math.min(M.y-5,O),O=Math.max(0,O),this.update({start:{x:S.x,y:O},end:{x:J,y:M.y}})}else if(E.operator==="n-resize"){var U=w-(E.clickY-this.start.y);U=Math.min(M.y-5,U),U=Math.max(0,U),this.update({start:{x:S.x,y:U},end:M})}else if(E.operator==="move"){var W,H,X,Q,fe=this.layer.documentViewer,Se=this.getMouseLocation(y),Pe=fe.getSelectedPage(Se,Se);if(Pe.first&&Pe.first!==this.layer.page+1){var $e=fe.windowToPage(Se,Pe.first,!1),Ie=Math.abs(S.x-M.x),Ne=Math.abs(S.y-M.y);if(fe.pdfViewer.spreadMode===0&&fe.pdfViewer.scrollMode===0)W=_-(E.clickX-this.start.x),H=Pe.first>this.layer.page+1?$e.y:$e.y-Ne,X=_-(E.clickX-this.end.x),Q=Pe.first>this.layer.page+1?$e.y+Ne:$e.y;else if(fe.pdfViewer.spreadMode===0&&fe.pdfViewer.scrollMode===1)W=Pe.first>this.layer.page+1?$e.x:$e.x-Ie,H=w-(E.clickY-this.start.y),X=Pe.first>this.layer.page+1?$e.x+Ie:$e.x,Q=w-(E.clickY-this.end.y);else if(fe.pdfViewer.spreadMode===1&&fe.pdfViewer.scrollMode===0){var Be=Math.min(Pe.first,this.layer.page+1),be=Math.max(Pe.first,this.layer.page+1);if(be-Be>2||Be+1===be&&Be%2==0)return;Be+1===be?(W=Pe.first>this.layer.page+1?$e.x:$e.x-Ie,H=w-(E.clickY-this.start.y),X=Pe.first>this.layer.page+1?$e.x+Ie:$e.x,Q=w-(E.clickY-this.end.y)):Be+2===be&&(W=_-(E.clickX-this.start.x),H=Pe.first>this.layer.page+1?$e.y:$e.y-Ne,X=_-(E.clickX-this.end.x),Q=Pe.first>this.layer.page+1?$e.y+Ne:$e.y)}else if(fe.pdfViewer.spreadMode===2&&fe.pdfViewer.scrollMode===0){var Ve=Math.min(Pe.first,this.layer.page+1),De=Math.max(Pe.first,this.layer.page+1);if(De-Ve>2||Ve+1===De&&(Ve!==1||De!==2)&&De%2==0||Ve===1&&De===3)return;Ve+2===De||Ve===1&&De===2?(W=_-(E.clickX-this.start.x),H=Pe.first>this.layer.page+1?$e.y:$e.y-Ne,X=_-(E.clickX-this.end.x),Q=Pe.first>this.layer.page+1?$e.y+Ne:$e.y):Ve+1===De&&(W=Pe.first>this.layer.page+1?$e.x:$e.x-Ie,H=w-(E.clickY-this.start.y),X=Pe.first>this.layer.page+1?$e.x+Ie:$e.x,Q=w-(E.clickY-this.end.y))}this.layer=fe.pdfViewer._pages[Pe.first-1].compdfAnnotationLayer,this.annotationContainer.remove(),this.outerLineContainer.remove();var ve=this.layer.div;ve.append(this.annotationContainer),ve.append(this.outerLineContainer)}else{H=w-(E.clickY-this.start.y),W=_-(E.clickX-this.start.x),X=_-(E.clickX-this.end.x),Q=w-(E.clickY-this.end.y);var ye=fe.pageToWindow({x:W,y:H},this.layer.page+1,!1),we=fe.pageToWindow({x:X,y:Q},this.layer.page+1,!1),ke=0,Me=0;w>E.clickY?Me=(Me=x.offsetHeight-(we.y-x.scrollTop-x.offsetTop))<100?5:0:w<E.clickY&&(Me=(Me=ye.y-x.scrollTop-x.offsetTop)<100?-5:0),_>E.clickX?ke=(ke=x.offsetWidth-(we.x-x.scrollLeft-x.offsetLeft))<100?5:0:_<E.clickX&&(ke=(ke=ye.x-x.scrollLeft-x.offsetLeft)<100?-5:0),(ke||Me)&&(x.scrollTop+=Me,x.scrollLeft+=ke);var Le={width:Math.abs(S.x-M.x),height:Math.abs(S.y-M.y)};W<X?(W=Math.max(0,W),W=Math.min(T-Le.width,W),X=Math.max(Le.width,X),X=Math.min(T,X)):(X=Math.max(0,X),X=Math.min(T-Le.width,X),W=Math.max(Le.width,W),W=Math.min(T,W)),H<Q?(H=Math.max(0,H),H=Math.min(D-Le.height,H),Q=Math.max(Le.height,Q),Q=Math.min(D,Q)):(Q=Math.max(0,Q),Q=Math.min(D-Le.height,Q),H=Math.max(Le.height,H),H=Math.min(D,H))}this.update({start:{x:W,y:H},end:{x:X,y:Q}})}E.clickX=_,E.clickY=w}}},{key:"handleDelete",value:function(y){this.layer.tool&&y&&y.stopPropagation(),this.delete();var v={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(v.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",v)}},{key:"delete",value:function(){var y;this.handleOutside(),(y=this.annotationContainer)===null||y===void 0||y.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _,w,x,k,S,M,E,P,T,D,F;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(v.button===0||v.type!=="mouseup"){I.next=2;break}return I.abrupt("return");case 2:if(this.layer.tool&&v.stopPropagation(),v.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,_=this.annotation,w=this.getInitialPoint(),x=w.start,k=w.end,S={left:x.x,top:x.y,right:k.x,bottom:k.y},M=this.transformRect(S),E=[{x:M.left,y:M.top},{x:M.right,y:M.top},{x:M.right,y:M.bottom},{x:M.left,y:M.bottom}],S!==_.rect||_.pageIndex!==this.layer.page){I.next=18;break}return I.abrupt("return");case 18:if(_.rect=S,_.vertices=E,this.annotation.measure&&this.showPopup(),_.pageIndex===this.layer.page){I.next=40;break}return P={type:"delete",annotation:{operate:"del-annot",name:_.name,pageIndex:_.pageIndex,annotPtr:_.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",P),delete(T=Object.assign({},_)).annotPtr,delete T.pagePtr,delete T.name,T.operate="add-annot",T.pageIndex=this.layer.page,I.next=32,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(T);case 32:return D=I.sent,this.annotation=D[0],I.next=36,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 36:this.annotationContainer.remove(),this.outerLineContainer.remove(),I.next=43;break;case 40:return F={operate:"mod-annot",name:_.name,pageIndex:this.layer.page,pagePtr:_.pagePtr,annotPtr:_.annotPtr,rect:S,vertices:E},I.next=43,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(F);case 43:case"end":return I.stop()}},y,this)})),function(y){return g.apply(this,arguments)})},{key:"update",value:function(y){var v=y.start,_=y.end,w=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],x=this.calculate(v,_);this.rect=x,this.start=v,this.end=_;var k=(this.annotation.borderWidth||2)*this.layer.viewport.scale;this.annotationContainer.style.top=x.top+"px",this.annotationContainer.style.left=x.left+"px",this.annotationContainer.style.width=x.width+"px",this.annotationContainer.style.height=x.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(x.width," ").concat(x.height)),this.shapeElement.setAttribute("x",k/2),this.shapeElement.setAttribute("y",k/2),this.shapeElement.setAttribute("width",x.width-k),this.shapeElement.setAttribute("height",x.height-k),this.outerLine.style.left="".concat(x.left-7,"px"),this.outerLine.style.top="".concat(x.top-7,"px"),this.outerLine.style.width="".concat(x.width+14,"px"),this.outerLine.style.height="".concat(x.height+14,"px"),this.moveRect.setAttribute("width",x.width+8),this.moveRect.setAttribute("height",x.height+8),this.bottomLeftRect.setAttribute("y",x.height+8),this.bottomRightRect.setAttribute("x",x.width+8),this.bottomRightRect.setAttribute("y",x.height+8),this.topRightRect.setAttribute("x",x.width+8),this.annotation.measure&&w&&this.updateMeasure(v,_)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"updateMeasure",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function y(v,_){var w,x,k,S,M,E;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!this.startState||this.startState.operator==="move"){P.next=17;break}return w=this.getInitialPoint(),x={left:Math.min(w.start.x,w.end.x),top:Math.min(w.start.y,w.end.y),right:Math.max(w.start.x,w.end.x),bottom:Math.max(w.start.y,w.end.y)},k=this.transformRect(x),S=[{x:k.left,y:k.top},{x:k.right,y:k.top},{x:k.right,y:k.bottom},{x:k.left,y:k.bottom}],M={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:x,vertices:S},this.annotation.contents&&(M.contents=this.annotation.contents,M.labelPosition=this.annotation.labelPosition),this.annotation.rect=x,this.annotation.vertices=S,P.next=11,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(M);case 11:return P.next=13,this.getMeasureData();case 13:E=[],this.showPerimeter&&E.push(this.annotation.perimeter+this.annotation.scale.translateUnit),this.showArea&&E.push(this.annotation.area+this.annotation.scale.translateUnit+"\xB2"),this.annotation.contents=E.join(`
`);case 17:if(this.permiterTspan&&(this.permiterTspan.setAttribute("x",(_.x-v.x)/2),this.permiterTspan.setAttribute("y",(_.y-v.y)/2),this.permiterTspan.textContent=this.annotation.perimeter+this.annotation.scale.translateUnit),this.areaTspan&&(this.areaTspan.setAttribute("x",(_.x-v.x)/2),this.areaTspan.setAttribute("y",(_.y-v.y)/2),this.areaTspan.textContent=this.annotation.area+this.annotation.scale.translateUnit+"\xB2"),!this.startState||this.startState.operator!=="move"){P.next=21;break}return P.abrupt("return");case 21:this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,perimeter:this.annotation.perimeter,area:this.annotation.area});case 22:case"end":return P.stop()}},y,this)})),function(y,v){return f.apply(this,arguments)})},{key:"handlePropertyPanel",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _,w;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){x.next=2;break}return x.abrupt("return");case 2:_=0,x.t0=_regeneratorRuntime().keys(v);case 4:if((x.t1=x.t0()).done){x.next=12;break}return w=x.t1.value,x.t2=_,x.next=9,this.setCustomData(w,v[w],!0);case 9:_=x.t2+=x.sent,x.next=4;break;case 12:_>0&&this.sendData(v);case 13:case"end":return x.stop()}},y,this)})),function(y){return d.apply(this,arguments)})},{key:"setCustomData",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function y(v,_){var w,x,k,S,M,E,P=this,T=arguments;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(w=T.length>2&&T[2]!==void 0&&T[2],x=this.annotation,k=0,v!=="showPerimeter"||this.showPerimeter===_){D.next=7;break}return this.showPerimeter=_,_&&!this.permiterTspan?(this.permiterTspan=createSvg("tspan",{x:(this.end.x-this.start.x)/2,y:(this.end.y-this.start.y)/2,dy:"0em"}),this.permiterTspan.textContent=x.perimeter+x.scale.translateUnit,this.textEle.appendChild(this.permiterTspan)):this.permiterTspan&&(this.permiterTspan.remove(),this.permiterTspan=null),D.abrupt("return",0);case 7:if(v!=="showArea"||this.showArea===_){D.next=11;break}return this.showArea=_,_&&!this.areaTspan?(this.areaTspan=createSvg("tspan",{x:(this.end.x-this.start.x)/2,y:(this.end.y-this.start.y)/2,dy:"1em"}),this.areaTspan.textContent=x.area+x.scale.translateUnit+"\xB2",this.textEle.appendChild(this.areaTspan)):this.areaTspan&&(this.areaTspan.remove(),this.areaTspan=null),D.abrupt("return",0);case 11:S=_regeneratorRuntime().mark(function F(){var I,N,q,Y,Z,j,ne;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(E!==v||x[E]===_){le.next=29;break}if(x[E]=_,k=1,v==="borderColor"&&P.shapeElement.setAttribute("stroke",_),v==="fillColor"&&P.shapeElement.setAttribute("fill",_),v==="opacity"&&(P.svgElement.style.opacity=_,x.fillTransparency=_),v==="borderWidth"&&(P.shapeElement.setAttribute("stroke-width",_),P.update({start:P.start,end:P.end},!1),P.showPopup()),v==="borderStyle"&&(_==="solid"&&P.shapeElement.setAttribute("stroke-dasharray",""),_==="dashed"&&(I="",N=Math.ceil(P.ratio*P.layer.viewport.scale),x.dashes.length===1||x.dashes.length===2&&x.dashes[0]===x.dashes[1]?I=Math.ceil(x.dashes[0]*N)+"":x.dashes.length>2&&(I=x.dashes.map(function(J){return Math.ceil(J*N)}).join(", ")),P.shapeElement.setAttribute("stroke-dasharray",I))),v==="dashes"&&P.shapeElement.setAttribute("stroke-dasharray",Math.ceil(_[0]*P.ratio*P.layer.viewport.scale)),v==="color"&&P.textEle.setAttribute("fill",_),v==="fontSize"&&P.textEle.setAttribute("font-size",_),v==="fontName"&&(P.textEle.style.fontFamily=_),v==="fontStyle"&&((q=_)==="boldItalic"?(P.textEle.style.fontStyle="italic",P.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!0):q==="bold"?(P.textEle.style.fontStyle="normal",P.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!1):q==="italic"?(P.textEle.style.fontStyle="italic",P.textEle.style.fontWeight="normal",x.isBold=!1,x.isItalic=!0):(x.isItalic=!1,x.isBold=!1,P.textEle.style.fontStyle="normal",P.textEle.style.fontWeight="normal")),v==="contents"&&(P.areaTspan&&(P.areaTspan.remove(),P.areaTspan=null),P.permiterTspan.textContent=_),v!=="scale"&&v!=="precision"){le.next=29;break}return v==="precision"&&(P.decimalPlaces=((Y=Math.abs(x.precision).toString().split(".")[1])===null||Y===void 0?void 0:Y.length)||0),le.next=18,P.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1({rulerPtr:x.rulerPtr},v,_));case 18:return le.next=20,P.getMeasureData();case 20:return Z=[],P.showPerimeter&&P.permiterTspan&&(j=x.perimeter+x.scale.translateUnit,Z.push(j),P.permiterTspan.textContent=j),P.showArea&&P.areaTspan&&(ne=x.area+x.scale.translateUnit+"\xB2",Z.push(ne),P.areaTspan.textContent=ne),x.contents=Z.join(`
`),P.layer.annotationStore.selectedElementName!==P.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||P.layer.eventBus.dispatch("measurePropertyChange",P.annotation),le.next=27,P.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:x.annotPtr,contents:x.contents});case 27:return P.layer.eventBus.dispatch("updateMeasureData",{scale:x.scale,precision:x.precision,perimeter:x.perimeter,area:x.area}),le.abrupt("return",{v:0});case 29:case"end":return le.stop()}},F)}),D.t0=_regeneratorRuntime().keys(x);case 13:if((D.t1=D.t0()).done){D.next=21;break}return E=D.t1.value,D.delegateYield(S(),"t2",16);case 16:if(!(M=D.t2)){D.next=19;break}return D.abrupt("return",M.v);case 19:D.next=13;break;case 21:return!w&&this.sendData(_defineProperty$1({},v,_)),D.abrupt("return",k);case 23:case"end":return D.stop()}},y,this)})),function(y,v){return u.apply(this,arguments)})},{key:"sendData",value:function(y){var v=this.annotation,_={type:"polygon",pagePtr:v.pagePtr,annotPtr:v.annotPtr,rulerPtr:v.rulerPtr,pageIndex:v.pageIndex,contents:v.contents};if(["fontSize","fontName","color","fontStyle"].some(function(S){return y[S]})){_.fontSize=v.fontSize,_.color=v.color;var w={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=v.fontName;v.isBold&&v.isItalic?_.fontName=w[x].boldItalic:v.isBold?_.fontName=w[x].bold:v.isItalic?_.fontName=w[x].italic:_.fontName=w[x]?w[x].normal:x,delete y.fontName}y.dashes&&(y.dashes.length===1&&(y.dashes=new Array(2).fill(y.dashes[0])),_.borderStyle=v.borderStyle,_.borderWidth=v.borderWidth),y.borderStyle&&(_.dashes=y.borderStyle==="solid"?[]:v.dashes.length===1?new Array(2).fill(v.dashes[0]):v.dashes,_.borderWidth=v.borderWidth),y.opacity&&(_.fillTransparency=v.fillTransparency),y.fillColor&&(_.fillTransparency=v.fillTransparency);var k=Object.assign({},_,y);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(k)}},{key:"getMeasureData",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var v,_,w;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=this.annotation.rulerPtr,x.next=3,this.layer.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{rulerPtr:v,captionType:"area"});case 3:return _=x.sent,x.next=6,this.layer.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{rulerPtr:v,captionType:"length"});case 6:w=x.sent,this.annotation.area=this.formatValue(_),this.annotation.perimeter=this.formatValue(w);case 9:case"end":return x.stop()}},y,this)})),function(){return s.apply(this,arguments)})},{key:"showPopup",value:function(){var y=this.layer.div.getBoundingClientRect(),v=y.left+this.rect.left-7,_=this.rect.top+y.top-7,w={left:v,top:_,right:v+this.rect.width+14,bottom:_+this.rect.height+14};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:w}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:v==="delete"&&this.handleDelete(),v==="reply"&&this.openReply();case 2:case"end":return _.stop()}},y,this)})),function(y){return o.apply(this,arguments)})},{key:"transformRect",value:function(y){var v=this.layer.viewport,_=v.viewBox,w=v.rotation,x=_[2],k=_[3],S=w*Math.PI/180,M=x/2,E=k/2,P=y.left,T=y.top,D=y.right,F=y.bottom,I=Math.cos(S),N=Math.sin(S),q=function(j,ne){return{x:I*(j-M)-N*(ne-E)+M,y:N*(j-M)+I*(ne-E)+E}},Y=q(P,T),Z=q(D,F);return{left:Y.x,top:k-Y.y,right:Z.x,bottom:k-Z.y}}},{key:"formatValue",value:function(y){return y%1==0?y:Number(y.toFixed(this.decimalPlaces))}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function y(v){var _;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(v.target.tagName!=="INPUT"&&v.target.tagName!=="TEXTAREA"){w.next=2;break}return w.abrupt("return");case 2:(_=v.keyCode||v.which)!==8&&_!==46||this.handleDelete();case 4:case"end":return w.stop()}},y,this)})),function(y){return r.apply(this,arguments)})}]);var r,o,s,u,d,f,g,m}(),ComPDFAnnotationLayer=function(){return _createClass(function e(n){var r,o=n.documentViewer,s=n.annotationStore,u=n.pageViewer,d=n.messageHandler,f=n.pageDiv,g=n.pdfPage,m=n.annotations,y=m===void 0?null:m,v=n.annotationsAll,_=n.viewport,w=n.scale,x=n.pageIndex,k=n.eventBus,S=n.enableReply,M=S===void 0||S,E=n.$t;_classCallCheck(this,e),this.documentViewer=o,this.annotationStore=s,this.pageViewer=u,this.pageDiv=f,this.pdfPage=g,this.messageHandler=d,this.annotations=y||[],this.annotationsAll=v,this.viewport=_,this.annotationsArray=[],this.scale=w,this.eventBus=k,this.page=x,this.annotationStore.$t=E,this.enableReply=M,this._cancelled=!1,this.tool=u.tool||"",this.color=u.color||"",this.annotateManager=null,this.isDraging=!1,this.selectedElementName=null,this.addMode=!1,this.toolMode=u.toolMode||"",this.managerArray=["freetextManager","textManager","textFieldManager","checkBoxManager","radioButtonManager","pushButtonManager","listBoxManager","comboBoxManager","annotateManager","linkManager","signFieldManager","redactionManager"],this.ratio=window.devicePixelRatio||1,this.markupType=["highlight","underline","squiggly","strikeout"],this.pageViewer.canvas&&(this.ctx=this.pageViewer.canvas.getContext("2d")),this.onHandleTool=this.handleTool.bind(this),this.onHandleToolMode=this.handleToolMode.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onHandleAddSign=this.addSign.bind(this),this.onRedrawMarkups=this.redrawMarkups.bind(this),this.annotationStore.$t=E,this.enableReply=M,this.markupType=["highlight","underline","squiggly","strikeout"],this.ctx=(r=this.pageViewer.canvas)===null||r===void 0?void 0:r.getContext("2d")},[{key:"handleTool",value:function(e){var n=this,r=e.tool,o=e.color;if(this.tool=r,this.color=o,this.pageViewer.tool=r,this.pageViewer.color=o,this.svgElement||(this.destroy(),this.renderPaintScene()),r&&!this.markupType.includes(r)||document.querySelector(".document").classList.remove("annotation-edit"),(this.markupType.includes(r)||r==="cropPage"||r==="selectText")&&this.resetManagers(),this.markupType.includes(r)&&o&&this.svgElement.classList.add("point-none"),this.managerArray.forEach(function(s){n[s]&&(n[s].tool=n.tool,n[s].color=n.color)}),["line","arrow","circle","square","ink"].includes(r)&&o&&this.toolMode!=="measurement"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("annotateManager"),this.annotateManager)return void this.annotateManager.init();this.annotateManager=new PaintShape({tool:r,color:o,layer:this})}else if(r==="freetext"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("freetextManager"),this.freetextManager)return void this.freetextManager.init();this.freetextManager=new Freetext({tool:r,color:o,layer:this})}else if(r==="text"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("textManager"),this.textManager)return void this.textManager.init();this.textManager=new Text({tool:r,color:o,layer:this})}else if(r==="textfield"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("textFieldManager"),this.textFieldManager)return void this.textFieldManager.init();this.textFieldManager=new AddTextField({tool:r,color:o,layer:this})}else if(r==="checkbox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("checkBoxManager"),this.checkBoxManager)return void this.checkBoxManager.init();this.checkBoxManager=new AddCheckBox({tool:r,color:o,layer:this})}else if(r==="radiobutton"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("radioButtonManager"),this.radioButtonManager)return void this.radioButtonManager.init();this.radioButtonManager=new AddRadioButton({tool:r,color:o,layer:this})}else if(r==="pushbutton"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("pushButtonManager"),this.pushButtonManager)return void this.pushButtonManager.init();this.pushButtonManager=new AddPushButton({tool:r,color:o,layer:this})}else if(r==="combobox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("comboBoxManager"),this.comboBoxManager)return void this.comboBoxManager.init();this.comboBoxManager=new AddComboBox({tool:r,color:o,layer:this})}else if(r==="listbox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("listBoxManager"),this.listBoxManager)return void this.listBoxManager.init();this.listBoxManager=new AddListBox({tool:r,color:o,layer:this})}else if(r==="stamp")this.resetManagers();else if(r==="link"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("linkManager"),this.linkManager)return void this.linkManager.init();this.linkManager=new PaintLink({tool:r,color:o,layer:this})}else if(r==="signatureFields"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("signFieldManager"),this.signFieldManager)return void this.signFieldManager.init();this.signFieldManager=new AddSignField({tool:r,color:o,layer:this})}else if(r==="redaction"||r==="remove"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("redactionManager"),this.redactionManager)return void this.redactionManager.init();this.redactionManager=new PaintRedaction({tool:r,color:o,layer:this})}}},{key:"resetManagers",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Array.isArray(n)||(n=[n]),this.managerArray.filter(function(r){return!n.includes(r)}).forEach(function(r){e[r]&&e[r].reset()})}},{key:"render",value:function(e){var n=this;if(!this._cancelled){if(this.renderPaintScene(),this.eventBus._on("toolChanged",this.onHandleTool),this.eventBus._on("toolModeChanged",this.onHandleToolMode),this.eventBus._on("setDefaultSelect",this.onHandleDefaultSelect),this.eventBus._on("propertyPanelChanged",this.onHandlePropertyPanelChanged),this.eventBus._on("redrawMarkups",this.onRedrawMarkups),e){var r=e.clone({dontFlip:!0});this.viewport=r,this.scale=r.scale,this.managerArray.forEach(function(X){n[X]&&(n[X].viewport=r)})}if(this.div||this.renderContainer(),this.annotations&&this.annotations.length)for(var o=this.enableReply,s=0;s<this.annotations.length;s++){var u,d,f,g,m,y,v,_=this.annotations[s];if(_){if(_.type==="custom"){var w=new Shape({annotation:_,layer:this});this.annotationsArray.push(w)}else if(_.type==="highlight"){var x=new TextHighlightAnnotation({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(x)}else if(_.type==="squiggly"){var k=new TextSquigglyAnnotation({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(k)}else if(_.type==="strikeout"){var S=new TextStrikeoutAnnotation({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(S)}else if(_.type==="underline"){var M=new TextUnderlineAnnotation({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(M)}else if(_.type!=="line"||_.isDelete)if(["square","circle"].includes(_.type)&&!_.isDelete){var E=new Shape$1({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(E)}else if(_.type!=="polygon"||_.isDelete)if(_.type!=="ink"||_.isDelete){if(_.type==="freetext"&&!_.isDelete){var P=new Freetext$1({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(P)}}else{var T=new Ink({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(T)}else{var D=new Polygon({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(D)}else{var F=!0;if(_.tail||_.head){var I=["None","Unknown"];I.includes(_.tail)&&I.includes(_.head)?F=!0:(_.head&&_.head!=="OpenArrow"&&_.head!=="None"&&(F=!1),_.tail&&_.tail!=="OpenArrow"&&_.tail!=="None"&&(F=!1))}if(F){var N=new Line({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(N)}}if(_.type==="text"&&!_.isDelete){var q=new Text$1({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(q)}if((_.type==="stamp"||_.type==="image")&&!_.isDelete){var Y=new Stamp({annotation:_,layer:this,enableReply:o});this.annotationsArray.push(Y)}if(((u=_.type)===null||u===void 0?void 0:u.replace("-",""))==="textfield"&&!_.isDelete){var Z=new TextField({annotation:_,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(Z)}if(((d=_.type)===null||d===void 0?void 0:d.replace("-",""))==="checkbox"&&!_.isDelete){var j=new CheckBox({annotation:_,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(j)}if(((f=_.type)===null||f===void 0?void 0:f.replace("-",""))==="radiobutton"&&!_.isDelete){var ne=new RadioButton({annotation:_,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(ne)}if(((g=_.type)===null||g===void 0?void 0:g.replace("-",""))==="pushbutton"&&!_.isDelete){var le=new PushButton({annotation:_,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(le)}if(((m=_.type)===null||m===void 0?void 0:m.replace("-",""))==="listbox"&&!_.isDelete){var J=new ListBox({annotation:_,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(J)}if(((y=_.type)===null||y===void 0?void 0:y.replace("-",""))==="combobox"&&!_.isDelete){var O=new ComboBox({annotation:_,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(O)}if(((v=_.type)===null||v===void 0?void 0:v.replace("-",""))==="link"&&!_.isDelete){var U=new Link({annotation:_,layer:this,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(U)}if(_.type==="signatureFields"&&!_.isDelete){var W=new SignatureFields({annotation:_,layer:this});this.annotationsArray.push(W)}if(_.type==="redact"&&!_.isDelete){var H=new Redaction({annotation:_,layer:this});this.annotationsArray.push(H)}}}this.handleTool({tool:this.tool,color:this.color}),this.annotationStore.toSelectAnnotationName&&this.pageViewer.selectAnnotation(this.annotationStore.toSelectAnnotationName)}}},{key:"renderContainer",value:function(){var e=document.createElement("div");e.className="annotationContainer",this.scene.append(e),this.div=e}},{key:"emptyAnnotations",value:function(){for(var e=this.annotationsArray.length-1;e>=0;e--)this.annotationsArray[e].delete();this.annotationsArray=[]}},{key:"cancel",value:function(){this._cancelled=!0,this.destroy()}},{key:"destroy",value:function(){var e,n;this.svgElement||(this.svgElement=this.pageDiv.querySelector(".annotationLayer svg")),(e=this.svgElement)===null||e===void 0||e.remove(),this.div||(this.div=this.pageDiv.querySelector(".annotationContainer")),(n=this.div)===null||n===void 0||n.remove(),this.resetManagers(),this.svgElement=null,this.div=null,this.eventBus._off("toolChanged",this.onHandleTool),this.eventBus._off("toolModeChanged",this.onHandleToolMode),this.eventBus._off("setDefaultSelect",this.onHandleDefaultSelect),this.eventBus._off("propertyPanelChanged",this.onHandlePropertyPanelChanged),this.eventBus._off("redrawMarkups",this.onRedrawMarkups),this.annotationStore.notFirstRender=!0}},{key:"setSceneDimensions",value:function(e){if(e){var n=e.clone({dontFlip:!0});this.viewport=n,this.annotateManager&&(this.annotateManager.viewport=n)}if(this.svgElement){var r=this.viewport,o=this.scene;o.style.width=r.width+"px",o.style.height=r.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(r.width," ").concat(r.height))}}},{key:"renderPaintScene",value:function(){this.svgElement||(this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.scene=this.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.svgElement)),this.setSceneDimensions()}},{key:"renderAnnotation",value:function(e,n){this.div||this.renderContainer();var r=this.enableReply;if(e.type==="custom"){var o=new Shape({annotation:e,layer:this});this.annotationsArray.push(o)}else if(e.type==="highlight"){var s=new TextHighlightAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(s)}else if(e.type==="squiggly"){var u=new TextSquigglyAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(u)}else if(e.type==="strikeout"){var d=new TextStrikeoutAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(d)}else if(e.type==="underline"){var f=new TextUnderlineAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(f)}else if(e.type==="line"||e.type==="arrow"){var g=new Line({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(g)}else if(["square","circle"].includes(e.type)){var m=new Shape$1({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(m)}else if(e.type!=="polygon"||e.isDelete)if(e.type!=="ink"||e.isDelete)if(e.type!=="freetext"||e.isDelete)if(e.type!=="text"||e.isDelete)if(e.type!=="stamp"||e.isDelete)if(e.type!=="textfield"||e.isDelete)if(e.type!=="checkbox"||e.isDelete)if(e.type!=="radiobutton"||e.isDelete)if(e.type!=="pushbutton"||e.isDelete)if(e.type!=="listbox"||e.isDelete)if(e.type!=="combobox"||e.isDelete)if(e.type!=="link"||e.isDelete)if(e.type!=="signatureFields"||e.isDelete){if(e.type==="redact"&&!e.isDelete){var y=new Redaction({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(y)}}else{var v=new SignatureFields({annotation:e,show:n,layer:this});this.annotationsArray.push(v)}else{var _=new Link({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(_)}else{var w=new ComboBox({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(w)}else{var x=new ListBox({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(x)}else{var k=new PushButton({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(k)}else{var S=new RadioButton({annotation:e,show:n,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(S)}else{var M=new CheckBox({annotation:e,show:n,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(M)}else{var E=new TextField({annotation:e,show:n,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(E)}else{var P=new Stamp({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(P)}else{var T=new Text$1({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(T)}else{var D=new Freetext$1({annotation:e,layer:this,show:n,enableReply:r});this.annotationsArray.push(D)}else{var F=new Ink({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(F)}else{var I=new Polygon({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(I)}}},{key:"handleToolMode",value:function(e){this.toolMode=e,this.pageViewer.toolMode=e,this.eventBus.dispatch("changeSelectAvailable")}},{key:"handlePropertyPanelChanged",value:function(e){var n,r=this;if(this.annotations&&this.annotations.length){var o=this.annotations.find(function(u){return u.name===r.annotationStore.selectedElementName||u.name===r.selectedElementName});if(o){var s={textfield:"textfieldPropertyPanelChanged",checkbox:"checkboxPropertyPanelChanged",radiobutton:"radioButtonPropertyPanelChanged",pushbutton:"pushButtonPropertyPanelChanged",listbox:"listBoxPropertyPanelChanged",combobox:"comboBoxPropertyPanelChanged",link:"linkPropertyPanelChanged"}[(n=o.type)===null||n===void 0?void 0:n.replace("-","")];s?this.eventBus.dispatch(s,e):o.measure&&["line","polygon"].includes(o.type)&&this.eventBus.dispatch("measurePropertyPanelChanged",e)}}}},{key:"addSign",value:function(e){if(document.getElementsByClassName("sign-ink-save").length){var n=e instanceof PointerEvent;n&&this.eventBus.dispatch("getSignData",{page:this.page,viewport:this.viewport,clickX:e.offsetX,clickY:e.offsetY}),e&&e.page===this.page&&e.annotationData&&!n&&this.renderAnnotation(e.annotationData),this.pageDiv.removeEventListener("click",this.onHandleAddSign),this.eventBus.dispatch("initCursorStyle")}else this.pageDiv.removeEventListener("click",this.onHandleAddSign)}},{key:"redrawMarkups",value:function(e){var n=e.pageIndex,r=e.afterContentEdit,o=r!==void 0&&r,s=e.pagePtr,u=e.rect,d=e.isRestorePage,f=d===void 0||d;if(n===this.page){if(this.ctx.globalCompositeOperation="multiply",!o&&f){var g=Math.round(this.viewport.width*this.ratio),m=Math.round(this.viewport.height*this.ratio);this.ctx.clearRect(0,0,g,m),this.ctx.putImageData(this.pageViewer.baseImageData,0,0)}for(var y=0;y<this.annotationsArray.length;y++){var v=this.annotationsArray[y],_=v.annotation,w=v.positionArray;!_.isDelete&&this.markupType.includes(_.type)&&(o?v.reRenderAfterContentEdit:v.drawCanvas).call(v,o?{pagePtr:s,rect:u}:w)}}}},{key:"getAnnoationIndex",value:function(e){return this.annotationsArray.findIndex(function(n){return n.annotation.name===e.name})}},{key:"deleteAnnotationInLayer",value:function(e){var n=this.annotationsArray,r=this.getAnnoationIndex(e);r>-1&&n.splice(r,1)}},{key:"deleteAnnotation",value:function(e){var n=this.annotationsArray,r=this.getAnnoationIndex(e);r>-1&&n[r].handleDelete()}}])}(),toggleSelection$1=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(s){e.addRange(s)}),n&&n.focus()}},deselectCurrent$1=toggleSelection$1,clipboardToIE11Formatting$1={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage$1="Copy to clipboard: #{key}, Enter";function format$1(e){var n=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,n)}function copy$1(e,n){var r,o,s,u,d,f,g=!1;n||(n={}),r=n.debug||!1;try{if(s=deselectCurrent$1(),u=document.createRange(),d=document.getSelection(),(f=document.createElement("span")).textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(m){if(m.stopPropagation(),n.format)if(m.preventDefault(),m.clipboardData===void 0){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var y=clipboardToIE11Formatting$1[n.format]||clipboardToIE11Formatting$1.default;window.clipboardData.setData(y,e)}else m.clipboardData.clearData(),m.clipboardData.setData(n.format,e);n.onCopy&&(m.preventDefault(),n.onCopy(m.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),d.addRange(u),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");g=!0}catch(m){r&&console.error("unable to copy using execCommand: ",m),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",e),n.onCopy&&n.onCopy(window.clipboardData),g=!0}catch(y){r&&console.error("unable to copy using clipboardData: ",y),r&&console.error("falling back to prompt"),o=format$1("message"in n?n.message:defaultMessage$1),window.prompt(o,e)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),f&&document.body.removeChild(f),s()}return g}var copyToClipboard$1=copy$1,_editList=new WeakMap,TextEditor=function(){return _createClass(function Y(Z){var j=Z.eventBus,ne=Z.contentContainer,le=Z.container,J=Z.pagePtr,O=Z.editPagePtr,U=Z.editAreaPtr,W=Z.editAreaIndex,H=Z.viewport,X=Z.scale,Q=Z.messageHandler,fe=Z.newAdd,Se=Z.pageViewer,Pe=Z.hidden,$e=Z.isUpdate,Ie=$e!==void 0&&$e;_classCallCheck(this,Y),_classPrivateFieldInitSpec(this,_editList,[]),this.eventBus=j,this.contentContainer=ne,this.container=le,this.pagePtr=J,this.editPagePtr=O,this.editAreaPtr=U,this.editAreaIndex=W,this.viewport=H,this.scale=X,this.messageHandler=Q,this.newAdd=fe,this.pageViewer=Se,this.hidden=Pe,this.isUpdate=Ie,this.margin=5,this.type="text",this.frame=null,this.canvas=null,this.borderWidth=2,this.pointWidth=6,this.pointHeight=6,this.activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:0},this.selectedRects=null,this.selectedCharRange=null,this.entireCharRange=null,this.state=0,this.mouseDown=!1,this.moving=!1,this.ratio=window.devicePixelRatio||1,this.removed=!1,this.start=null,this.end=null,this.newStart=null,this.newEnd=null,this.offsetX=0,this.offsetY=0,this.startPoint=null,this.endPoint=null,this.composing=!1,this.needUndoRec=!1,this.isFirefox=navigator.userAgent.indexOf("Firefox")>-1,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.textInput=isMobileDevice$1||this.isFirefox?"input":"textInput",this.onClick=this.handleClick.bind(this),this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onBlur=this.handleBlur.bind(this),this.onKeydown=this.handleKeyDown.bind(this),this.onKeyup=this.handleKeyup.bind(this),this.onTextInput=this.handleTextInput.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onCompositionstart=this.handleCompositionstart.bind(this),this.onCompositionend=this.handleCompositionend.bind(this),this.onShowContentEditorType=this.handleShow.bind(this),this.onHandlePopup=this.handlePopup.bind(this),this.render()},[{key:"render",value:(q=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve;return _regeneratorRuntime().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return this.eventBus._on("textPropertyChanged",this.onHandlePropertyPanelChanged),this.eventBus._on("showContentEditorType",this.onShowContentEditorType),this.eventBus._on("contentEditorPopupClicked",this.onHandlePopup),De.next=5,this.getRect();case 5:return ne=this.margin,this.canvas=document.createElement("canvas"),this.canvas.width=(this.rect.width+2*(ne+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(ne+this.borderWidth))*this.ratio,le=createElement("div",{position:"absolute",left:this.rect.left-ne-this.borderWidth+"px",top:this.rect.top-ne-this.borderWidth+"px",width:this.rect.width+2*(ne+this.borderWidth)+"px",height:this.rect.height+2*(ne+this.borderWidth)+"px",display:this.hidden?"none":"block"},{class:"frame-container",index:this.editAreaIndex}),this.frameContainer=le,(Z=this.container)===null||Z===void 0||Z.append(this.frameContainer),this.frameContainer.appendChild(this.canvas),J=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderWidth:this.borderWidth+"px",borderColor:"#1460F3"},{class:"text-container"}),this.textContainer=J,(O=createElement("textarea",{position:"absolute",left:0,top:0,width:"100%",height:"100%",resize:"none",opacity:0,touchAction:"none"})).name="text-editor",this.textContainer.append(O),this.textarea=O,De.next=21,this.getText();case 21:if(U=De.sent,this.textarea.value=U,(j=this.frameContainer)===null||j===void 0||j.append(this.textContainer),this.textContainer.addEventListener(this.mousedown,this.onMousedown),this.textContainer.addEventListener(this.mouseup,this.onMouseup),isMobileDevice$1&&this.textarea.addEventListener("contextmenu",function(ve){return ve.preventDefault()}),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.outerLineContainer.style.position="absolute",W=this.getOutlineRect(this.rect),H=W.width,X=W.height,Q=W.innerWidth,fe=W.innerHeight,Se=W.left,Pe=W.top,$e=W.right,Ie=W.bottom,Ne=W.centerY,Be=W.centerX,be=this.rect,Ve=createSvg("svg",{class:"outerline"},{position:"absolute",left:be.left-ne-(this.pointWidth+this.borderWidth)/2+"px",top:be.top-ne-(this.pointHeight+this.borderWidth)/2+"px",width:H+"px",height:X+"px",zIndex:2}),this.outerLine=Ve,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":this.borderWidth,"fill-opacity":0,width:Q,height:fe,x:this.pointWidth/2,y:this.pointHeight/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Se,y:Pe}),this.LeftRect=createSvg("rect",{class:"w-resize resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Se,y:Ne}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Se,y:Ie}),this.bottomRect=createSvg("rect",{class:"s-resize resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Be,y:Ie}),this.bottomRightRect=createSvg("rect",{class:"se-resize resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:$e,y:Ie}),this.rightRect=createSvg("rect",{class:"e-resize resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:$e,y:Ne}),this.topRightRect=createSvg("rect",{class:"ne-resize resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:$e,y:Pe}),this.topRect=createSvg("rect",{class:"n-resize resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Be,y:Pe}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLine.addEventListener(this.mousedown,this.onMousedown),this.outerLine.addEventListener(this.mouseup,this.onMouseup),this.newAdd&&(this.goEditing(),this.addUndoHistory(),this.newAdd=!1),De.t0=this.isUpdate,!De.t0){De.next=60;break}return De.next=60,this.updateCanvas();case 60:case"end":return De.stop()}},Y,this)})),function(){return q.apply(this,arguments)})},{key:"getFrameContainerRect",value:function(){var Y=this.rect,Z=this.margin,j=this.borderWidth;return{left:Y.left-Z-j,top:Y.top-Z-j,width:Y.width+2*(Z+j),height:Y.height+2*(Z+j)}}},{key:"getOutlineRect",value:function(Y){var Z=this.margin,j=this.pointWidth,ne=this.pointHeight,le=this.borderWidth,J=Y.width+2*Z+j+le,O=Y.height+2*Z+ne+le;return{width:J,height:O,innerWidth:J-j,innerHeight:O-ne,left:0,top:0,right:J-j,bottom:O-ne,centerY:(O-ne)/2,centerX:(J-j)/2}}},{key:"getActualRect",value:function(Y,Z){var j=Z.left,ne=Z.top,le=Z.right,J=Z.bottom;return{start:getActualPoint({x:j,y:ne},Y),end:getActualPoint({x:le,y:J},Y)}}},{key:"rectCalc",value:function(Y,Z){return{top:Y.y<Z.y?Y.y:Z.y,left:Y.x<Z.x?Y.x:Z.x,width:Math.abs(Z.x-Y.x),height:Math.abs(Z.y-Y.y)}}},{key:"getInitialPoint",value:function(Y,Z){var j=this.scale;return{start:{x:Y.x/j,y:Y.y/j},end:{x:Z.x/j,y:Z.y/j}}}},{key:"handleMouseDown",value:function(Y){if(isMobileDevice$1&&Y.preventDefault(),Y.button!==2&&!this.hidden){if(this.state===1){var Z=Y.target.getAttribute("data-id"),j=getClickPoint(Y),ne=j.pageX,le=j.pageY;this.startState={operator:Z,clickX:ne,clickY:le},document.addEventListener(this.mousemove,this.onMousemove)}else if(this.state===2){if(isMobileDevice$1){var J=Y.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,O=Y.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top;this.startPoint={x:J/this.scale,y:O/this.scale}}else{var U=Y.offsetX,W=Y.offsetY;this.startPoint={x:(U+this.rect.left-this.margin-this.borderWidth)/this.scale,y:(W+this.rect.top-this.margin-this.borderWidth)/this.scale}}this.textContainer.addEventListener(this.mousemove,this.onMousemove)}document.addEventListener(this.mouseup,this.onMouseup),this.selectedCharRange=null,this.mouseMoved=!1,this.mouseDown=!0}}},{key:"handleMouseUp",value:(N=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye,we,ke,Me,Le,Fe,ze,te,oe,_e;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!Z||this.textContainer.contains(Z.target)||this.state!==0){Ce.next=2;break}return Ce.abrupt("return");case 2:if((j=this.contentContainer.getSelectedEditBox())===null||j===this||this.state!==0){Ce.next=5;break}return Ce.abrupt("return");case 5:if(document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.textContainer.removeEventListener(this.mousemove,this.onMousemove),Z&&Z.target!==this.textarea&&Z.target!==this.textContainer&&(isMobileDevice$1?(ne=Z.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,le=Z.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top):(ne=Z.offsetX,le=Z.offsetY),J=new MouseEvent(this.mouseup,{offsetX:ne,offsetY:le,type:Z.type,target:this.textarea}),this.textarea.dispatchEvent(J)),this.mouseDown){Ce.next=11;break}return Ce.abrupt("return");case 11:if(this.mouseDown=!1,this.moving=!1,this.textContainer.removeEventListener(this.mousemove,this.onMousemove),Z.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),O=!0,this.state===0&&(this.state=1,O=!1,this.getTextStyle(),this.contentContainer.setSelectedEditBox(this),this.eventBus.dispatch("changeRightPanelBtnDisabled",!1),this.eventBus.dispatch("contentBoxSelected",{type:"text",pageNumber:this.pageViewer.pageIndex+1})),this.state!==1){Ce.next=36;break}if(this.frameContainer.classList.remove("editing"),H={start:this.start,end:this.end},X={start:this.newStart,end:this.newEnd},Q=getClickPoint(Z),fe=Q.pageX,Se=Q.pageY,(fe!==((U=this.startState)===null||U===void 0?void 0:U.clickX)||Se!==((W=this.startState)===null||W===void 0?void 0:W.clickY))&&this.newStart&&this.newEnd&&(this.start=this.newStart,this.end=this.newEnd),this.container.append(this.outerLineContainer),!this.mouseMoved){Ce.next=34;break}return Pe=this.getInitialPoint(this.start,this.end),$e=Pe.start,Ie=Pe.end,Ne={left:$e.x,top:$e.y,right:Ie.x,bottom:Ie.y},Ce.next=29,this.messageHandler.sendWithPromise("SetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,rect:Ne});case 29:return this.needUndoRec=!0,Ce.next=32,this.updateCanvas({oldPoint:H,newPoint:X});case 32:Ce.next=35;break;case 34:!this.mouseMoved&&O&&(this.state=2,isMobileDevice$1||this.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!0}));case 35:this.showPopup();case 36:if(this.state!==2){Ce.next=65;break}return this.outerLineContainer.remove(),this.frameContainer.classList.add("editing"),isMobileDevice$1?(this.textarea.focus(),be=Z.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,Ve=Z.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top,Be={x:be/this.scale,y:Ve/this.scale}):(De=Z.offsetX,ve=Z.offsetY,Be={x:(De+this.rect.left-this.margin-this.borderWidth)/this.scale,y:(ve+this.rect.top-this.margin-this.borderWidth)/this.scale}),this.mouseMoved&&(Be=this.endPoint),this.startPoint||(this.startPoint=Be),Ce.next=44,this.getCharsRange(this.startPoint,Be);case 44:if(ye=Ce.sent,we=ye.start,ke=ye.end,this.activeCharPlace=ke,this.getTextStyle(),this.cursor?this.cursor.style.display="block":(Me=createSvg("svg",{class:"cursor-animation"},{position:"absolute",left:"-2px",top:"-2px",width:this.rect.width+2*(this.margin+this.borderWidth)+"px",height:this.rect.height+2*(this.margin+this.borderWidth)+"px"}),this.cursor=Me,this.textContainer.append(this.cursor)),this.updateCursorLine(),(this.selectedRects&&!this.mouseMoved||we.SectionIndex===ke.SectionIndex&&we.LineIndex===ke.LineIndex&&we.RunIndex===ke.RunIndex&&we.CharIndex===ke.CharIndex)&&this.clearSelectText(),!this.selectedRects){Ce.next=57;break}return Ce.next=55,this.getText();case 55:this.selectedText=Ce.sent,this.eventBus.dispatch("contentTextSelected",this.selectedText);case 57:this.textarea.focus(),this.textarea.addEventListener("blur",this.onBlur),this.textarea.addEventListener("keydown",this.onKeydown),this.textarea.addEventListener("keyup",this.onKeyup),this.textarea.addEventListener(this.textInput,this.onTextInput),(this.isFirefox||isMobileDevice$1)&&(this.textarea.addEventListener("compositionstart",this.onCompositionstart),this.textarea.addEventListener("compositionend",this.onCompositionend)),onClickOutsideUp([this.textContainer],this.handleTextOutside.bind(this)),this.hidePopup();case 65:this.frameContainer.classList.add("selected"),this.state!==1||this.mouseMoved||(Le=[this.textContainer,this.outerLine],(Fe=document.querySelector(".editor-panel"))&&Le.push(Fe),(ze=document.getElementById("propertyPanelButton"))&&Le.push(ze),(te=document.getElementById("undo"))&&Le.push(te),(oe=document.getElementById("redo"))&&Le.push(oe),(_e=document.querySelector(".content-editor-popup"))&&Le.push(_e),onClickOutsideUp(Le,this.handleOutside.bind(this)));case 67:case"end":return Ce.stop()}},Y,this)})),function(Y){return N.apply(this,arguments)})},{key:"handleMouseMove",value:(I=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye,we,ke,Me,Le,Fe,ze,te,oe,_e,Ce,Ee,Te,Re;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if((j=this.contentContainer.getSelectedEditBox())===null||j===this||this.state!==0){Oe.next=3;break}return Oe.abrupt("return");case 3:if(this.moving=!0,this.hidePopup(),Z.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(je){return je.preventDefault()}),this.state!==1){Oe.next=19;break}if(ne=getClickPoint(Z),le=ne.pageX,J=ne.pageY,O=this.start,U=this.end,W=this.startState){Oe.next=13;break}return Oe.abrupt("return");case 13:if(W.clickX!==le||W.clickY!==J){Oe.next=15;break}return Oe.abrupt("return");case 15:H=this.viewport,X=H.width,Q=H.height,W.operator==="nw-resize"?(fe=le-(W.clickX-this.start.x),Se=J-(W.clickY-this.start.y),fe=Math.min(U.x-5,fe),fe=Math.max(0,fe),Se=Math.min(U.y-5,Se),Se=Math.max(0,Se),this.updateOutline({start:{x:fe,y:Se},end:U})):W.operator==="w-resize"?(Pe=le-(W.clickX-this.start.x),Pe=Math.min(U.x-5,Pe),Pe=Math.max(0,Pe),this.updateOutline({start:{x:Pe,y:O.y},end:U})):W.operator==="sw-resize"?($e=le-(W.clickX-this.start.x),Ie=J-(W.clickY-this.end.y),$e=Math.min(U.x-5,$e),$e=Math.max(0,$e),Ie=Math.min(Q,Ie),Ie=Math.max(O.y+5,Ie),this.updateOutline({start:{x:$e,y:O.y},end:{x:U.x,y:Ie}})):W.operator==="s-resize"?(Ne=J-(W.clickY-this.end.y),Ne=Math.min(Q,Ne),Ne=Math.max(O.y+5,Ne),this.updateOutline({start:O,end:{x:U.x,y:Ne}})):W.operator==="se-resize"?(Be=le-(W.clickX-this.end.x),be=J-(W.clickY-this.end.y),Be=Math.min(X,Be),Be=Math.max(O.x+5,Be),be=Math.min(Q,be),be=Math.max(O.y+5,be),this.updateOutline({start:O,end:{x:Be,y:be}})):W.operator==="e-resize"?(Ve=le-(W.clickX-this.end.x),Ve=Math.min(X,Ve),Ve=Math.max(O.x+5,Ve),this.updateOutline({start:O,end:{x:Ve,y:U.y}})):W.operator==="ne-resize"?(De=le-(W.clickX-this.end.x),ve=J-(W.clickY-this.start.y),De=Math.min(X,De),De=Math.max(O.x+5,De),ve=Math.min(U.y-5,ve),ve=Math.max(0,ve),this.updateOutline({start:{x:O.x,y:ve},end:{x:De,y:U.y}})):W.operator==="n-resize"?(ye=J-(W.clickY-this.start.y),ye=Math.min(U.y-5,ye),ye=Math.max(0,ye),this.updateOutline({start:{x:O.x,y:ye},end:U})):W.operator==="move"&&(we=le-(W.clickX-this.start.x),ke=J-(W.clickY-this.start.y),Me=le-(W.clickX-this.end.x),Le=J-(W.clickY-this.end.y),Fe={width:Math.abs(O.x-U.x),height:Math.abs(O.y-U.y)},we<Me?(we=Math.max(0,we),we=Math.min(X-Fe.width,we),Me=Math.max(Fe.width,Me),Me=Math.min(X,Me)):(Me=Math.max(0,Me),Me=Math.min(X-Fe.width,Me),we=Math.max(Fe.width,we),we=Math.min(X,we)),ke<Le?(ke=Math.max(0,ke),ke=Math.min(Q-Fe.height,ke),Le=Math.max(Fe.height,Le),Le=Math.min(Q,Le)):(Le=Math.max(0,Le),Le=Math.min(Q-Fe.height,Le),ke=Math.max(Fe.height,ke),ke=Math.min(Q,ke)),this.updateOutline({start:{x:we,y:ke},end:{x:Me,y:Le}})),Oe.next=32;break;case 19:if(this.startPoint){Oe.next=21;break}return Oe.abrupt("return");case 21:return isMobileDevice$1?(te=Z.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,oe=Z.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top,ze={x:te/this.scale,y:oe/this.scale}):(_e=Z.offsetX,Ce=Z.offsetY,ze={x:(_e+this.rect.left-this.margin-this.borderWidth)/this.scale,y:(Ce+this.rect.top-this.margin-this.borderWidth)/this.scale}),this.endPoint=ze,Oe.next=25,this.getCharsRange(this.startPoint,ze);case 25:Ee=Oe.sent,Te=Ee.start,Re=Ee.end,this.activeCharPlace=Re,this.selectedCharRange={start:Te,end:Re},this.cursor.style.display="none",this.updateSelectedRect(!0);case 32:this.mouseMoved=!0;case 33:case"end":return Oe.stop()}},Y,this)})),function(Y){return I.apply(this,arguments)})},{key:"handleClick",value:function(){}},{key:"handleBlur",value:function(){}},{key:"handleTextOutside",value:function(){this.cursor&&(this.cursor.style.display="none")}},{key:"handleOutside",value:(F=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne=this;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(!this.moving){Be.next=14;break}return ne=[this.textContainer,this.outerLine],(le=document.querySelector(".editor-panel"))&&ne.push(le),(J=document.getElementById("propertyPanelButton"))&&ne.push(J),(O=document.getElementById("undo"))&&ne.push(O),(U=document.getElementById("redo"))&&ne.push(U),(W=document.querySelector(".content-editor-popup"))&&ne.push(W),onClickOutsideUp(ne,this.handleOutside.bind(this)),Be.abrupt("return");case 14:if(this.state=this.state===2?1:this.state===1?0:this.state,(Z=this.frameContainer)===null||Z===void 0||Z.classList.remove("editing"),this.clearSelectText(),(j=this.cursor)===null||j===void 0||j.remove(),this.cursor=null,this.state===0&&((H=this.frameContainer)===null||H===void 0||H.classList.remove("selected"),(X=this.outerLineContainer)===null||X===void 0||X.remove(),this.removed||this.contentContainer.setSelectedEditBox(null),setTimeout(function(){document.querySelector(".frame-container.selected")||(Ne.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!1}),Ne.eventBus.dispatch("changeRightPanelBtnDisabled",!0),Ne.eventBus.dispatch("contentBoxDeselected",{type:"text",pageNumber:Ne.pageViewer.pageIndex+1}))},1),this.hidePopup()),this.state!==1){Be.next=29;break}return Be.next=23,this.getText();case 23:if(Be.sent.length!==0){Be.next=27;break}return this.remove(),Be.abrupt("return");case 27:this.textContainer.removeEventListener(this.mousemove,this.onMousemove),this.hidden||(this.container.append(this.outerLineContainer),Q=[this.textContainer,this.outerLine],(fe=document.querySelector(".editor-panel"))&&Q.push(fe),(Se=document.getElementById("propertyPanelButton"))&&Q.push(Se),(Pe=document.getElementById("undo"))&&Q.push(Pe),($e=document.getElementById("redo"))&&Q.push($e),(Ie=document.querySelector(".content-editor-popup"))&&Q.push(Ie),onClickOutsideUp(Q,this.handleOutside.bind(this)),this.showPopup(!1));case 29:this.textarea.removeEventListener("blur",this.onBlur),this.textarea.removeEventListener("keydown",this.onKeydown),this.textarea.removeEventListener("keyup",this.onKeyup),this.textarea.removeEventListener(this.textInput,this.onTextInput),(this.isFirefox||isMobileDevice$1)&&(this.textarea.removeEventListener("compositionstart",this.onCompositionstart),this.textarea.removeEventListener("compositionend",this.onCompositionend));case 34:case"end":return Be.stop()}},Y,this)})),function(){return F.apply(this,arguments)})},{key:"handleKeyDown",value:(D=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne;return _regeneratorRuntime().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(j=Z.keyCode||Z.which,ne=[9,16,17,18,20,27,37,38,39,40,91,93],le=Z.ctrlKey||Z.altKey||Z.metaKey||ne.includes(j),this.isToolKey=le,this.state===2){Be.next=6;break}return Be.abrupt("return");case 6:if(j!==8&&j!==46){Be.next=37;break}if(this.activeCharPlace.SectionIndex!==0||this.activeCharPlace.LineIndex!==0||this.activeCharPlace.RunIndex!==0||this.activeCharPlace.CharIndex!==-1||this.selectedCharRange){Be.next=9;break}return Be.abrupt("return");case 9:if(J={},!this.selectedCharRange){Be.next=17;break}return Be.next=13,this.getCharPlace("DeleteChars");case 13:J=Be.sent,this.selectedCharRange=null,Be.next=26;break;case 17:if(j!==8){Be.next=23;break}return Be.next=20,this.getCharPlace("BackSpaceChar");case 20:J=Be.sent,Be.next=26;break;case 23:return Be.next=25,this.getCharPlace("DeleteChar");case 25:J=Be.sent;case 26:return this.activeCharPlace=J,this.needUndoRec=!0,Be.next=30,this.updateCanvas(null,!0);case 30:return this.clearSelectText(),this.updateCursorLine(),Be.next=34,this.getText();case 34:return O=Be.sent,this.textarea.value=O,Be.abrupt("return");case 37:if(!this.selectedCharRange||le){Be.next=47;break}return Be.next=40,this.getCharPlace("DeleteChars");case 40:return U=Be.sent,this.activeCharPlace=U,this.selectedCharRange=null,this.needUndoRec=!0,Be.next=46,this.updateCanvas(null,!0);case 46:this.updateCursorLine();case 47:if(this.isPasteKey=(Z.metaKey||Z.ctrlKey)&&Z.key.toLowerCase()==="v",j!==37){Be.next=55;break}return Be.next=51,this.getCharPlace("GetPrevCharPlace");case 51:W=Be.sent,this.activeCharPlace=W.start,Be.next=124;break;case 55:if(j!==38){Be.next=62;break}return Be.next=58,this.getCharPlace("GetUpCharPlace");case 58:H=Be.sent,this.activeCharPlace=H.start,Be.next=124;break;case 62:if(j!==39){Be.next=69;break}return Be.next=65,this.getCharPlace("GetNextCharPlace");case 65:X=Be.sent,this.activeCharPlace=X.start,Be.next=124;break;case 69:if(j!==40){Be.next=76;break}return Be.next=72,this.getCharPlace("GetDownCharPlace");case 72:Q=Be.sent,this.activeCharPlace=Q.start,Be.next=124;break;case 76:if(!Z.metaKey&&!Z.ctrlKey||Z.key.toLowerCase()!=="c"||!this.selectedCharRange){Be.next=84;break}return Be.next=79,this.getText();case 79:return this.selectedText=Be.sent,copyToClipboard$1(this.selectedText),Be.abrupt("return");case 84:if(!Z.metaKey&&!Z.ctrlKey||Z.key.toLowerCase()!=="x"||!this.selectedCharRange){Be.next=103;break}return Be.next=87,this.getText();case 87:return this.selectedText=Be.sent,copyToClipboard$1(this.selectedText),Be.next=91,this.getCharPlace("DeleteChars");case 91:return fe=Be.sent,this.activeCharPlace=fe,this.selectedCharRange=null,this.needUndoRec=!0,Be.next=97,this.getText();case 97:return Se=Be.sent,this.textarea.value=Se,Be.next=101,this.updateCanvas(null,!0);case 101:Be.next=124;break;case 103:if(!Z.metaKey&&!Z.ctrlKey||Z.key.toLowerCase()!=="a"){Be.next=123;break}return Be.next=106,this.getEntireCharPlace();case 106:return Pe=Be.sent,$e=Pe.start,Ie=Pe.end,this.selectedCharRange={start:$e,end:Ie},Be.next=112,this.getCharsRect($e,Ie);case 112:if((Ne=Be.sent)!=null&&Ne.length){Be.next=115;break}return Be.abrupt("return");case 115:return this.selectedRects=Ne,Be.next=118,this.getText();case 118:return this.selectedText=Be.sent,this.selectText(),Be.abrupt("return");case 123:return Be.abrupt("return");case 124:return this.clearSelectText(),this.updateCursorLine(),Be.next=128,this.getTextStyle();case 128:case"end":return Be.stop()}},Y,this)})),function(Y){return D.apply(this,arguments)})},{key:"handleKeyup",value:function(Y){this.textarea.setSelectionRange(0,0)}},{key:"handleTextInput",value:(T=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!this.isToolKey||this.isPasteKey){ne.next=2;break}return ne.abrupt("return");case 2:if(j=Z.data,!this.isFirefox&&!isMobileDevice$1){ne.next=10;break}if(Z.inputType!=="insertLineBreak"){ne.next=8;break}j=`
`,ne.next=10;break;case 8:if(!this.composing&&j!==null){ne.next=10;break}return ne.abrupt("return");case 10:if(_classPrivateFieldGet2(_editList,this).push(j),!(_classPrivateFieldGet2(_editList,this).length>1)){ne.next=13;break}return ne.abrupt("return");case 13:this.handleInsertText();case 14:case"end":return ne.stop()}},Y,this)})),function(Y){return T.apply(this,arguments)})},{key:"handleInsertText",value:(P=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.messageHandler.sendWithPromise("InsertText",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,text:_classPrivateFieldGet2(_editList,this)[0]});case 2:return Z=j.sent,this.activeCharPlace=Z,this.addUndoHistory(),this.updateCanvas(),this.updateCursorLine(),j.next=9,this.getTextStyle();case 9:if(_classPrivateFieldGet2(_editList,this).length&&_classPrivateFieldGet2(_editList,this).shift(),!(_classPrivateFieldGet2(_editList,this).length>0)){j.next=13;break}return j.next=13,this.handleInsertText();case 13:case"end":return j.stop()}},Y,this)})),function(){return P.apply(this,arguments)})},{key:"handleCompositionstart",value:function(){this.composing=!0}},{key:"handleCompositionend",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,this.messageHandler.sendWithPromise("InsertText",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,text:Z.data});case 2:j=ne.sent,this.activeCharPlace=j,this.needUndoRec=!0,this.updateCanvas(),this.updateCursorLine(),this.composing=!1;case 8:case"end":return ne.stop()}},Y,this)})),function(Y){return E.apply(this,arguments)})},{key:"getRect",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.messageHandler.sendWithPromise("GetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 2:this.frame=J.sent,Z=this.getActualRect(this.scale,this.frame),j=Z.start,ne=Z.end,this.start=j,this.end=ne,this.oldRect=this.rect||null,le=this.rectCalc(j,ne),this.rect=le;case 9:case"end":return J.stop()}},Y,this)})),function(){return M.apply(this,arguments)})},{key:"updateCanvas",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z,j,ne){var le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye,we,ke;return _regeneratorRuntime().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(this.removed){Me.next=3;break}return Me.next=3,this.getRect();case 3:if(le=this.margin,this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),J=this.getFrameContainerRect(),O=J.left,U=J.top,W=J.width,H=J.height,setCss(this.frameContainer,{left:O+"px",top:U+"px",width:W+"px",height:H+"px"})),Z?(X=Z.oldPoint,Q=Z.newPoint,fe=this.getEntireArea(X,Q),Se=this.getActualRect(this.scale,fe),Pe=Se.start,$e=Se.end,Ie=this.rectCalc(Pe,$e),Ne=this.rectCalc(X.start,X.end),Be=this.getEntireArea(Ne,this.rect),be={left:Be.left,top:Be.top,width:Be.right-Be.left,height:Be.bottom-Be.top},parseInt(Ie.left)===parseInt(Be.left)&&parseInt(Ie.top)===parseInt(Be.top)&&parseInt(Ie.width)===parseInt(Be.width)&&parseInt(Ie.height)===parseInt(Be.height)||(Ie=be),Ve={left:parseInt(Ie.left*this.ratio),top:parseInt(Ie.top*this.ratio),right:parseInt(Ie.left*this.ratio)+parseInt(Ie.width*this.ratio),bottom:parseInt(Ie.top*this.ratio)+parseInt(Ie.height*this.ratio),width:parseInt(Ie.width*this.ratio),height:parseInt(Ie.height*this.ratio)},this.imgRect=Ve,this.canvas.width=(this.rect.width+2*(le+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(le+this.borderWidth))*this.ratio):j?(De=this.getEntireArea(this.oldRect,this.rect),ve={left:parseInt(De.left*this.ratio),top:parseInt(De.top*this.ratio),right:parseInt(De.right*this.ratio),bottom:parseInt(De.bottom*this.ratio),width:parseInt(De.right*this.ratio)-parseInt(De.left*this.ratio),height:parseInt(De.bottom*this.ratio)-parseInt(De.top*this.ratio)},this.imgRect=ve,this.canvas.width=(this.rect.width+2*(le+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(le+this.borderWidth))*this.ratio):(ye={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:parseInt(this.rect.left*this.ratio)+parseInt(this.rect.width*this.ratio),bottom:parseInt(this.rect.top*this.ratio)+parseInt(this.rect.height*this.ratio),width:parseInt(this.rect.width*this.ratio),height:parseInt(this.rect.height*this.ratio)},this.imgRect=ye,this.canvas.width=ye.width+2*(le+this.borderWidth)*this.ratio,this.canvas.height=ye.height+2*(le+this.borderWidth)*this.ratio),!ne){Me.next=8;break}return Me.abrupt("return");case 8:if(we=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){Me.next=15;break}return Me.next=12,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 12:we=Me.sent,Me.next=18;break;case 15:return Me.next=17,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 17:we=Me.sent;case 18:ke=we.imageArray,this.imageArray=ke,this.drawCanvas(),this.saveEdit();case 22:case"end":return Me.stop()}},Y,this)})),function(Y,Z,j){return S.apply(this,arguments)})},{key:"drawCanvas",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.imgRect){if(this.pageViewer.canvas&&!Y){var Z=this.pageViewer.canvas.getContext("2d"),j=Z.createImageData(parseInt(this.imgRect.width),parseInt(this.imgRect.height));j.data.set(this.imageArray),Z.putImageData(j,this.imgRect.left,this.imgRect.top),this.eventBus.dispatch("redrawMarkups",{pageIndex:this.pageViewer.pageIndex,afterContentEdit:!0,rect:this.oldRect?this.getEntireArea(this.oldRect,this.rect):this.rect,pagePtr:this.pagePtr})}}else this.updateCanvas(null,null,Y)}},{key:"updateCursorLine",value:(k=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j,ne,le,J;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return Z&&(this.activeCharPlace=Z),O.next=3,this.messageHandler.sendWithPromise("GetTextCursorPoints",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 3:if(j=O.sent,this.cursor){O.next=6;break}return O.abrupt("return");case 6:ne=this.margin,le=this.borderWidth,this.cursor.innerHTML="",setCss(this.cursor,{width:this.rect.width+2*(ne+le)+"px",height:this.rect.height+2*(ne+le)+"px"}),J=createSvg("line",{x1:j.HighPointX*this.scale-this.rect.left+ne+le,x2:j.LowPointX*this.scale-this.rect.left+ne+le,y1:j.HighPointY*this.scale-this.rect.top+ne+le,y2:j.LowPointY*this.scale-this.rect.top+ne+le,stroke:"currentcolor"}),this.cursorLine=J,this.cursor.append(J);case 13:case"end":return O.stop()}},Y,this)})),function(Y){return k.apply(this,arguments)})},{key:"getTextStyle",value:(x=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le,J,O,U,W;return _regeneratorRuntime().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,this.messageHandler.sendWithPromise("GetTextStyle",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 2:return Z=H.sent,H.next=5,this.messageHandler.sendWithPromise("GetBaseFontName",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 5:return j=H.sent,H.next=8,this.messageHandler.sendWithPromise("GetLineLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 8:return ne=H.sent,H.next=11,this.messageHandler.sendWithPromise("GetSectionAfterLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 11:return le=H.sent,H.next=14,this.getEntireCharPlace();case 14:return J=this.selectedCharRange||this.entireCharRange,H.next=17,this.messageHandler.sendWithPromise("GetCharacterSpacing",{editAreaPtr:this.editAreaPtr,start:J.start,end:J.end});case 17:return O=H.sent,U={color:"rgb(".concat(Z.R,", ").concat(Z.G,", ").concat(Z.B,")"),opacity:Math.round(100*Z.Transparency),fontStyle:Z.IsBold&&Z.IsItalic?3:Z.IsBold||Z.IsItalic?Z.IsBold?1:2:0,fontSize:Math.round(Z.FontSize),fontFamily:j,lineSpacing:Math.round(10*ne)/10,paragraphSpacing:Math.round(10*le)/10,characterSpacing:Math.max(Math.round(10*O)/10,0)},this.textStyle=U,H.next=22,this.messageHandler.sendWithPromise("GetTextSectionAlignType",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 22:W=H.sent,this.eventBus.dispatch("contentPropertyChange",_objectSpread2$1(_objectSpread2$1({type:"text"},U),{},{alignType:W}));case 24:case"end":return H.stop()}},Y,this)})),function(){return x.apply(this,arguments)})},{key:"getCharPlace",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return j={editAreaPtr:this.editAreaPtr,char:this.activeCharPlace},Z==="DeleteChars"&&(j.start=this.selectedCharRange.start,j.end=this.selectedCharRange.end),ne.next=4,this.messageHandler.sendWithPromise(Z,j);case 4:return ne.abrupt("return",ne.sent);case 5:case"end":return ne.stop()}},Y,this)})),function(Y){return w.apply(this,arguments)})},{key:"getCharsRange",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z,j){return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,this.messageHandler.sendWithPromise("SelectCharsRangeAtPos",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,startPoint:Z,endPoint:j});case 2:return ne.abrupt("return",ne.sent);case 3:case"end":return ne.stop()}},Y,this)})),function(Y,Z){return _.apply(this,arguments)})},{key:"saveEdit",value:function(){this.messageHandler.sendWithPromise("EndEdit",this.editPagePtr),this.needUndoRec&&(this.addUndoHistory(),this.needUndoRec=!1)}},{key:"getText",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!this.selectedCharRange){le.next=7;break}return Z=this.selectedCharRange,j=Z.start,ne=Z.end,le.next=4,this.messageHandler.sendWithPromise("GetTextByRange",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,start:j,end:ne});case 4:case 9:return le.abrupt("return",le.sent);case 7:return le.next=9,this.messageHandler.sendWithPromise("GetText",this.editAreaPtr);case 10:case"end":return le.stop()}},Y,this)})),function(){return v.apply(this,arguments)})},{key:"updateOutline",value:function(Y){var Z=Y.start,j=Y.end,ne=this.rectCalc(Z,j);this.newStart=Z,this.newEnd=j;var le=this.getOutlineRect(ne),J=le.width,O=le.height,U=le.innerWidth,W=le.innerHeight,H=le.right,X=le.bottom,Q=le.centerY,fe=le.centerX;setCss(this.outerLine,{left:ne.left-this.margin-(this.pointWidth+this.borderWidth)/2+"px",top:ne.top-this.margin-(this.pointHeight+this.borderWidth)/2+"px",width:J+"px",height:O+"px"}),this.moveRect.setAttribute("width",U),this.moveRect.setAttribute("height",W),this.LeftRect.setAttribute("y",Q),this.bottomLeftRect.setAttribute("y",X),this.bottomRect.setAttribute("x",fe),this.bottomRect.setAttribute("y",X),this.bottomRightRect.setAttribute("x",H),this.bottomRightRect.setAttribute("y",X),this.rightRect.setAttribute("x",H),this.rightRect.setAttribute("y",Q),this.topRightRect.setAttribute("x",H),this.topRect.setAttribute("x",fe)}},{key:"getCharsRect",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z,j,ne){var le,J,O,U,W,H,X,Q;return _regeneratorRuntime().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(Z.SectionIndex!==j.SectionIndex||Z.LineIndex!==j.LineIndex||Z.RunIndex!==j.RunIndex||Z.CharIndex!==j.CharIndex){fe.next=2;break}return fe.abrupt("return");case 2:return fe.next=4,this.messageHandler.sendWithPromise("GetSelectLineRects",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,start:Z,end:j});case 4:for(le=fe.sent,J=[],O=0;O<le.length;O++)U={left:le[O].Left,top:le[O].Top,right:le[O].Right,bottom:le[O].Bottom},W=this.getActualRect(this.scale,U),H=W.start,X=W.end,ne||(this.start=H,this.end=X),Q=this.rectCalc(H,X,0),J.push(Q);return fe.abrupt("return",J);case 8:case"end":return fe.stop()}},Y,this)})),function(Y,Z,j){return y.apply(this,arguments)})},{key:"updateSelectedRect",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j,ne,le,J,O,U,W,H,X,Q,fe,Se;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(this.selectedCharRange){Pe.next=2;break}return Pe.abrupt("return");case 2:return le=this.selectedCharRange,J=le.start,O=le.end,Pe.next=5,this.getCharsRect(J,O);case 5:if((U=Pe.sent)!=null&&U.length){Pe.next=8;break}return Pe.abrupt("return");case 8:if(W=(j=this.selectedRects)===null||j===void 0?void 0:j[this.selectedRects.length-1],!Z||(W==null?void 0:W.left)!==U[0].left||(W==null?void 0:W.top)!==U[0].top||(W==null?void 0:W.width)!==U[0].width||(W==null?void 0:W.height)!==U[0].height){Pe.next=12;break}return this.selectedRects=U,Pe.abrupt("return");case 12:if(H=this.canvas.getContext("2d"),(ne=this.selectedRects)===null||ne===void 0||!ne.length){Pe.next=26;break}X=Math.max(this.selectedRects.length,U.length),Q=0;case 16:if(!(Q<X)){Pe.next=25;break}if(fe=this.selectedRects[Q],Se=U[Q],(fe==null?void 0:fe.left)!==(Se==null?void 0:Se.left)||(fe==null?void 0:fe.top)!==(Se==null?void 0:Se.top)||(fe==null?void 0:fe.width)!==(Se==null?void 0:Se.width)||(fe==null?void 0:fe.height)!==(Se==null?void 0:Se.height)){Pe.next=21;break}return Pe.abrupt("continue",22);case 21:H.clearRect(0,0,this.canvas.width,this.canvas.height);case 22:Q++,Pe.next=16;break;case 25:this.drawCanvas(!0);case 26:this.selectedRects=U,this.selectText(),this.updateCursorLine();case 29:case"end":return Pe.stop()}},Y,this)})),function(Y){return m.apply(this,arguments)})},{key:"selectText",value:function(){var Y;if((Y=this.selectedRects)!==null&&Y!==void 0&&Y.length){var Z=this.canvas.getContext("2d");Z.clearRect(0,0,this.canvas.width,this.canvas.height);var j,ne=this.margin,le=this.borderWidth,J=_createForOfIteratorHelper(this.selectedRects);try{for(J.s();!(j=J.n()).done;){var O=j.value;Z.beginPath(),Z.fillStyle="rgba(0, 117, 255, 0.3)",Z.fillRect((O.left-this.rect.left+ne+le)*this.ratio,(O.top-this.rect.top+ne+le)*this.ratio,O.width*this.ratio,O.height*this.ratio)}}catch(U){J.e(U)}finally{J.f()}}}},{key:"clearSelectText",value:function(){var Y;(Y=this.selectedRects)!==null&&Y!==void 0&&Y.length&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.updateCanvas()),this.selectedRects=null,this.selectedCharRange=null,this.selectedText=""}},{key:"handlePropertyPanelChanged",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j,ne,le,J;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this.state!==0){O.next=2;break}return O.abrupt("return");case 2:return j=!1,O.next=5,this.getEntireCharPlace();case 5:ne=this.selectedCharRange||this.entireCharRange,O.t0=_regeneratorRuntime().keys(Z);case 7:if((O.t1=O.t0()).done){O.next=70;break}if(le=O.t1.value,Z[le]!==this.textStyle[le]){O.next=11;break}return O.abrupt("continue",7);case 11:if(le!=="alignType"){O.next=19;break}if(this.selectedCharRange||this.state!==2){O.next=17;break}return O.next=15,this.messageHandler.sendWithPromise("SetTextAligningSection",{editAreaPtr:this.editAreaPtr,alignType:Z.alignType,char:this.activeCharPlace});case 15:O.next=19;break;case 17:return O.next=19,this.messageHandler.sendWithPromise("SetTextAligningRange",{editAreaPtr:this.editAreaPtr,alignType:Z.alignType,start:ne.start,end:ne.end});case 19:if(le!=="color"){O.next=22;break}return O.next=22,this.messageHandler.sendWithPromise("SetCharsFontColor",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,color:Z.color});case 22:if(le!=="opacity"){O.next=25;break}return O.next=25,this.messageHandler.sendWithPromise("SetCharsFontTransparency",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,opacity:Z.opacity/100});case 25:if(le!=="fontSize"){O.next=28;break}return O.next=28,this.messageHandler.sendWithPromise("SetCharsFontSize",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,fontSize:Z.fontSize});case 28:if(le!=="fontFamily"){O.next=31;break}return O.next=31,this.messageHandler.sendWithPromise("SetFontFromNativeTrueTypeFont",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,fontFamily:Z.fontFamily});case 31:if(le!=="fontStyle"){O.next=56;break}return J=Z.fontStyle,O.next=35,this.setCharsFontStyle("ClearCharsFontBold");case 35:return O.next=37,this.refreshSelectedRange();case 37:return O.next=39,this.setCharsFontStyle("ClearCharsFontItalic");case 39:return O.next=41,this.refreshSelectedRange();case 41:if(J!==1){O.next=46;break}return O.next=44,this.setCharsFontStyle("SetCharsFontBold");case 44:O.next=56;break;case 46:if(J!==2){O.next=51;break}return O.next=49,this.setCharsFontStyle("SetCharsFontItalic");case 49:O.next=56;break;case 51:if(J!==3){O.next=56;break}return O.next=54,this.setCharsFontStyle("SetCharsFontBold");case 54:return O.next=56,this.setCharsFontStyle("SetCharsFontItalic");case 56:if(le!=="lineSpacing"){O.next=59;break}return O.next=59,this.messageHandler.sendWithPromise("SetLineLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,spacing:Z.lineSpacing});case 59:if(le!=="paragraphSpacing"){O.next=62;break}return O.next=62,this.messageHandler.sendWithPromise("SetSectionAfterLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,spacing:Z.paragraphSpacing});case 62:if(le!=="characterSpacing"){O.next=65;break}return O.next=65,this.messageHandler.sendWithPromise("SetCharacterSpacing",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,spacing:Z.characterSpacing});case 65:this.textStyle[le]=Z[le],j=!0,this.needUndoRec=!0,O.next=7;break;case 70:if(j){O.next=72;break}return O.abrupt("return");case 72:return O.next=74,this.updateCanvas(null,!0);case 74:if(!this.selectedCharRange||this.state!==2){O.next=77;break}return O.next=77,this.refreshSelectedRange();case 77:this.state===2&&(this.updateSelectedRect(),this.updateCursorLine());case 78:case"end":return O.stop()}},Y,this)})),function(Y){return g.apply(this,arguments)})},{key:"setCharsFontStyle",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return j=this.selectedCharRange||this.entireCharRange,ne.next=3,this.messageHandler.sendWithPromise("SetCharsFontStyle",{editAreaPtr:this.editAreaPtr,start:j.start,end:j.end,fontStyle:Z});case 3:case"end":return ne.stop()}},Y,this)})),function(Y){return f.apply(this,arguments)})},{key:"hexToRgb",value:function(Y){return Y=(Y=Y.replace("#","")).length===3?Y.repeat(2):Y,{r:parseInt(Y.substr(0,2),16),g:parseInt(Y.substr(2,2),16),b:parseInt(Y.substr(4,2),16)}}},{key:"getEntireArea",value:function(Y,Z){var j=null;if("start"in Y&&"start"in Z){var ne=this.getInitialPoint(Y.start,Y.end),le=this.getInitialPoint(Z.start,Z.end);j={left:Math.min(ne.start.x,le.start.x),top:Math.min(ne.start.y,le.start.y),right:Math.max(ne.end.x,le.end.x),bottom:Math.max(ne.end.y,le.end.y)}}else"left"in Y&&"left"in Z&&(j={left:Math.min(Y.left,Z.left),top:Math.min(Y.top,Z.top),right:Math.max(Y.left+Y.width,Z.left+Z.width),bottom:Math.max(Y.top+Y.height,Z.top+Z.height)});return j}},{key:"goEditing",value:function(){this.state=2,this.eventBus.dispatch("changeRightPanelBtnDisabled",!1),this.contentContainer.setSelectedEditBox(this),this.frameContainer.classList.add("selected"),this.frameContainer.classList.add("editing"),this.activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:-1};var Y=createSvg("svg",{class:"cursor-animation"},{position:"absolute",left:0,top:0,width:"100%",height:"100%"});this.cursor=Y,this.textContainer.append(this.cursor),this.updateCursorLine(),this.textarea.focus(),this.textarea.addEventListener("blur",this.onBlur),this.textarea.addEventListener("keydown",this.onKeydown),this.textarea.addEventListener("keyup",this.onKeyup),this.textarea.addEventListener(this.textInput,this.onTextInput),(this.isFirefox||isMobileDevice$1)&&(this.textarea.addEventListener("compositionstart",this.onCompositionstart),this.textarea.addEventListener("compositionend",this.onCompositionend));var Z=[this.textContainer,this.outerLine],j=document.querySelector(".editor-panel");j&&Z.push(j);var ne=document.getElementById("propertyPanelButton");ne&&Z.push(ne);var le=document.getElementById("undo");le&&Z.push(le);var J=document.getElementById("redo");J&&Z.push(J);var O=document.querySelector(".content-editor-popup");O&&Z.push(O),onClickOutsideUp(Z,this.handleOutside.bind(this))}},{key:"remove",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){return _regeneratorRuntime().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return this.state=0,Z.next=3,this.handleOutside();case 3:return Z.next=5,this.outerLineContainer.remove();case 5:return this.frameContainer.remove(),this.frameContainer=null,this.contentContainer.setSelectedEditBox(null),this.removed=!0,Z.next=11,this.messageHandler.send("RemoveEditAreaByIndex",{editPagePtr:this.editPagePtr,editAreaIndex:this.editAreaIndex});case 11:this.needUndoRec=!0,this.updateCanvas(),this.contentContainer.removeEditor(this.editAreaIndex),this.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!1}),this.eventBus._off("textPropertyChanged",this.onHandlePropertyPanelChanged),this.eventBus._off("showContentEditorType",this.onShowContentEditorType),this.eventBus._off("contentEditorPopupClicked",this.onHandlePopup);case 18:case"end":return Z.stop()}},Y,this)})),function(){return d.apply(this,arguments)})},{key:"removeViewer",value:function(){var Y,Z;this.state=0,(Y=this.outerLineContainer)===null||Y===void 0||Y.remove(),(Z=this.frameContainer)===null||Z===void 0||Z.remove(),this.frameContainer=null,this.contentContainer.setSelectedEditBox(null),this.removed=!0,this.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!1})}},{key:"getEntireCharPlace",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,this.messageHandler.sendWithPromise("GetBeginAndEndCharPlace",this.editAreaPtr);case 2:return Z=le.sent,j=Z.start,ne=Z.end,this.entireCharRange={start:j,end:ne},le.abrupt("return",{start:j,end:ne});case 7:case"end":return le.stop()}},Y,this)})),function(){return u.apply(this,arguments)})},{key:"selectedAllText",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(this.state===1||this.state===2){J.next=2;break}return J.abrupt("return");case 2:return J.next=4,this.getEntireCharPlace();case 4:return Z=J.sent,j=Z.start,ne=Z.end,this.selectedCharRange={start:j,end:ne},J.next=10,this.getCharsRect(j,ne);case 10:if((le=J.sent)!=null&&le.length){J.next=13;break}return J.abrupt("return");case 13:return this.selectedRects=le,J.next=16,this.getText();case 16:this.selectedText=J.sent,this.selectText();case 18:case"end":return J.stop()}},Y,this)})),function(){return s.apply(this,arguments)})},{key:"handleShow",value:function(Y){Y==="image"?(this.hidden=!0,this.frameContainer&&(this.frameContainer.style.display="none"),this.state===1&&this.handleOutside()):(this.hidden=!1,this.frameContainer&&(this.frameContainer.style.display="block"))}},{key:"addUndoHistory",value:function(){this.contentContainer.handleOperateList({editPagePtr:this.editPagePtr,editAreaIndex:this.editAreaIndex,editAreaPtr:this.editAreaPtr,pageIndex:this.pageViewer.pageIndex})}},{key:"updateCanvasAfterUndoRedo",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le,J,O,U,W,H,X;return _regeneratorRuntime().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,this.getRect();case 2:if(Z=this.margin,this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),j=this.getFrameContainerRect(),ne=j.left,le=j.top,J=j.width,O=j.height,setCss(this.frameContainer,{left:ne+"px",top:le+"px",width:J+"px",height:O+"px"})),U=this.getEntireArea(this.oldRect,this.rect),W={left:parseInt(U.left*this.ratio),top:parseInt(U.top*this.ratio),right:parseInt(U.right*this.ratio),bottom:parseInt(U.bottom*this.ratio),width:parseInt(U.right*this.ratio)-parseInt(U.left*this.ratio),height:parseInt(U.bottom*this.ratio)-parseInt(U.top*this.ratio)},this.imgRect=W,this.canvas.width=(this.rect.width+2*(Z+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(Z+this.borderWidth))*this.ratio,H=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){Q.next=16;break}return Q.next=13,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 13:H=Q.sent,Q.next=19;break;case 16:return Q.next=18,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 18:H=Q.sent;case 19:X=H.imageArray,this.imageArray=X,this.drawCanvas(),this.saveEdit(),this.contentContainer.getSelectedEditBox()===this&&this.getTextStyle();case 24:case"end":return Q.stop()}},Y,this)})),function(){return o.apply(this,arguments)})},{key:"refreshSelectedRange",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return Z=this.selectedCharRange||this.entireCharRange,J.next=3,this.messageHandler.sendWithPromise("RefreshRange",{editAreaPtr:this.editAreaPtr,start:Z.start,end:Z.end});case 3:j=J.sent,ne=j.start,le=j.end,this.selectedCharRange?this.selectedCharRange={start:ne,end:le}:this.entireCharRange={start:ne,end:le},this.activeCharPlace.CharIndex===ne.CharIndex?this.activeCharPlace=ne:this.activeCharPlace=le;case 8:case"end":return J.stop()}},Y,this)})),function(){return r.apply(this,arguments)})},{key:"showPopup",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve=arguments;return _regeneratorRuntime().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(Z=!(Ve.length>0&&Ve[0]!==void 0)||Ve[0],j=this.container.getBoundingClientRect(),ne=j.left+this.rect.left-this.borderWidth-this.margin,le=this.rect.top+j.top-this.borderWidth-this.margin,J=ne+2*(this.borderWidth+this.margin)+this.rect.width,O=le+2*(this.borderWidth+this.margin)+this.rect.height,U={left:ne,top:le,right:J,bottom:O},this.eventBus.dispatch("showContentEditorPopup",{rect:U}),this.isPopupShow=!0,this.state!==1||!Z){De.next=27;break}if(W=[],De.t0=this.selectedCharRange,De.t0){De.next=16;break}return De.next=15,this.getEntireCharPlace();case 15:De.t0=De.sent;case 16:return H=De.t0,X=H.start,Q=H.end,De.next=21,this.getCharsRect(X,Q,!0);case 21:for(fe=De.sent,Se=0;Se<fe.length;Se++)Pe=fe[Se],$e=Pe.left,Ie=Pe.top,Ne=Pe.width,Be=Pe.height,W.push({left:$e,top:Ie,right:$e+Ne,bottom:Ie+Be});return De.next=25,this.getText();case 25:be=De.sent,this.eventBus.dispatch("contentSelected",{selectedText:be,pageNumber:this.pageViewer.pageIndex+1,textRects:W});case 27:case"end":return De.stop()}},Y,this)})),function(){return n.apply(this,arguments)})},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.eventBus.dispatch("showContentEditorPopup"))}},{key:"handlePopup",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Z){var j;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(this.state!==0){ne.next=2;break}return ne.abrupt("return");case 2:ne.t0=Z,ne.next=ne.t0==="copy"?5:ne.t0==="delete"?10:12;break;case 5:return ne.next=7,this.getText();case 7:return j=ne.sent,copyToClipboard$1(j),ne.abrupt("break",12);case 10:return this.remove(),ne.abrupt("break",12);case 12:case"end":return ne.stop()}},Y,this)})),function(Y){return e.apply(this,arguments)})}]);var e,n,r,o,s,u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F,I,N,q}(),ImageEditor=function(){return _createClass(function w(x){var k=x.eventBus,S=x.contentContainer,M=x.container,E=x.pagePtr,P=x.editPagePtr,T=x.editAreaPtr,D=x.editAreaIndex,F=x.viewport,I=x.scale,N=x.messageHandler,q=x.newAdd,Y=x.pageViewer,Z=x.$t,j=x.hidden;_classCallCheck(this,w),this.eventBus=k,this.contentContainer=S,this.container=M,this.pagePtr=E,this.editPagePtr=P,this.editAreaPtr=T,this.editAreaIndex=D,this.viewport=F,this.scale=I,this.messageHandler=N,this.newAdd=q,this.pageViewer=Y,this.$t=Z,this.hidden=j,this.type="image",this.deleteSvgStr=`<rect width="30" height="30" rx="2" fill="#DDE9FF"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M19 6.5V9.5H24V10.5H21.5V23.5H8.5V10.5H6V9.5H11V6.5H19ZM9.5 10.5V22.5H20.5V10.5H9.5ZM18 7.5V9.5H12V7.5H18ZM13.5 13V20H12.5V13H13.5ZM17.5 20V13H16.5V20H17.5Z" fill="#333333"/>`,this.frame=null,this.borderWidth=2,this.pointWidth=6,this.pointHeight=6,this.activeCharPlace=null,this.selectedRects=null,this.selectedCharRange=null,this.state=0,this.mouseDown=!1,this.moving=!1,this.ratio=window.devicePixelRatio||1,this.opacity=1,this.imageRatio=1,this.imageUrl=null,this.cropped=!1,this.removed=!1,this.listener=null,this.start=null,this.end=null,this.newStart=null,this.newEnd=null,this.needUndoRec=!1,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onDelete=this.handleDelete.bind(this),this.onShowContentEditorType=this.handleShow.bind(this),this.render()},[{key:"render",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,M,E,P;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return this.eventBus._on("imagePropertyChanged",this.onHandlePropertyPanelChanged),this.eventBus._on("showContentEditorType",this.onShowContentEditorType),T.next=4,this.updateCanvas();case 4:return T.next=6,this.messageHandler.sendWithPromise("GetImageTransparency",this.editAreaPtr);case 6:this.opacity=T.sent,(k=createElement("div",{position:"absolute",left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px",display:this.hidden?"none":"block"},{class:"frame-container",index:this.editAreaIndex})).classList.add("image"),this.frameContainer=k,(x=this.container)===null||x===void 0||x.append(this.frameContainer),S=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderWidth:this.borderWidth+"px",borderColor:"#1460F3",cursor:"default"},{class:"image-container"}),this.imageContainer=S,this.frameContainer.append(this.imageContainer),this.imageContainer.addEventListener(this.mousedown,this.onMousedown),this.imageContainer.addEventListener(this.mouseup,this.onMouseup),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.outerLineContainer.style.position="absolute",this.deletetButton=createSvg("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",class:"delete-button"},{position:"absolute",width:"30px",height:"30px",cursor:"pointer",zIndex:2}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,M=this.rect.left+this.rect.width-30+"px",E=this.rect.top+this.rect.height+8+"px",this.deletetButton.style.left=M,this.deletetButton.style.top=E,P=createSvg("svg",{class:"outerline"},{position:"absolute",left:this.rect.left-this.borderWidth+"px",top:this.rect.top-this.borderWidth+"px",width:this.rect.width+this.borderWidth+this.pointWidth/2+"px",height:this.rect.height+this.borderWidth+this.pointHeight/2+"px",zIndex:2}),this.outerLine=P,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":this.borderWidth,"fill-opacity":0,width:this.rect.width-this.borderWidth,height:this.rect.height-this.borderWidth,x:this.pointWidth/2,y:this.pointHeight/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.deletetButton),this.outerLine.addEventListener(this.mousedown,this.onMousedown),this.outerLine.addEventListener(this.mouseup,this.onMouseup),this.newAdd&&(this.goEditing(),this.addUndoHistory(),this.newAdd=!1),this.initial=!0;case 52:case"end":return T.stop()}},w,this)})),function(){return _.apply(this,arguments)})},{key:"getActualRect",value:function(w,x){var k=x.left,S=x.top,M=x.right,E=x.bottom;return{start:getActualPoint({x:k,y:S},w),end:getActualPoint({x:M,y:E},w)}}},{key:"rectCalc",value:function(w,x){return{top:w.y<x.y?w.y:x.y,left:w.x<x.x?w.x:x.x,width:Math.abs(x.x-w.x),height:Math.abs(x.y-w.y)}}},{key:"getInitialPoint",value:function(w,x){var k=this.scale;return{start:{x:w.x/k,y:w.y/k},end:{x:x.x/k,y:x.y/k}}}},{key:"handleMouseDown",value:function(w){if(w.preventDefault(),w.button!==2&&!this.hidden){if(this.state>0){var x=w.target.getAttribute("data-id"),k=getClickPoint(w),S=k.pageX,M=k.pageY;this.startState={operator:x,clickX:S,clickY:M},document.addEventListener(this.mousemove,this.onMousemove)}document.addEventListener(this.mouseup,this.onMouseup),this.selectedCharRange=null,this.mouseMoved=!1,this.mouseDown=!0}}},{key:"handleMouseUp",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J,O;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(this.frameContainer){U.next=2;break}return U.abrupt("return");case 2:if(!x||this.frameContainer.contains(x.target)||this.state!==0){U.next=4;break}return U.abrupt("return");case 4:if((k=this.contentContainer.getSelectedEditBox())===null||k===this||this.state!==0){U.next=7;break}return U.abrupt("return");case 7:if(document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.mouseDown){U.next=11;break}return U.abrupt("return");case 11:if(this.mouseDown=!1,this.moving=!1,this.frameContainer.classList.add("selected"),x.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),this.state!==0||this.imageUrl||this.updateOriginalImageUrl(),this.state===0||this.mouseMoved||this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!0,opacity:100*this.opacity}),this.state===0&&(this.state=1,this.contentContainer.setSelectedEditBox(this),this.container.append(this.outerLineContainer),this.eventBus.dispatch("changeRightPanelBtnDisabled",!1),this.eventBus.dispatch("contentBoxSelected",{type:"image",pageNumber:this.pageViewer.pageIndex+1})),!this.mouseMoved){U.next=31;break}return E={start:this.start,end:this.end},P={start:this.newStart,end:this.newEnd},T=getClickPoint(x),D=T.pageX,F=T.pageY,(D!==((S=this.startState)===null||S===void 0?void 0:S.clickX)||F!==((M=this.startState)===null||M===void 0?void 0:M.clickY))&&this.newStart&&this.newEnd&&(this.start=this.newStart,this.end=this.newEnd),I=this.getInitialPoint(this.start,this.end),N=I.start,q=I.end,Y={left:N.x,top:N.y,right:q.x,bottom:q.y},Z=this.cropped?"SetClipRect":"SetFrame",this.state===2&&(Z="CutWithRect",this.cropped=!0),U.next=29,this.messageHandler.sendWithPromise(Z,{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,rect:Y});case 29:this.needUndoRec=!0,this.updateCanvas({oldPoint:E,newPoint:P});case 31:j=[this.imageContainer,this.outerLine,this.deletetButton],(ne=document.querySelector(".editor-panel"))&&j.push(ne),(le=document.getElementById("propertyPanelButton"))&&j.push(le),(J=document.getElementById("undo"))&&j.push(J),(O=document.getElementById("redo"))&&j.push(O),this.listener&&document.removeEventListener(isMobileDevice$1?"touchend":"mouseup",this.listener),this.listener=onClickOutsideUp(j,this.handleOutside.bind(this));case 42:case"end":return U.stop()}},w,this)})),function(w){return v.apply(this,arguments)})},{key:"handleMouseMove",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye;return _regeneratorRuntime().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if((k=this.contentContainer.getSelectedEditBox())===null||k===this||this.state!==0){we.next=3;break}return we.abrupt("return");case 3:if(this.moving=!0,x.type==="touchmove"&&document.querySelector(".document-container").addEventListener("scroll",function(ke){return ke.preventDefault()}),S=getClickPoint(x),M=S.pageX,E=S.pageY,P=this.start,T=this.end,D=this.startState){we.next=11;break}return we.abrupt("return");case 11:if(D.clickX!==M||D.clickY!==E){we.next=13;break}return we.abrupt("return");case 13:if(F=this.viewport,I=F.width,N=F.height,D.operator!=="nw-resize"){we.next=30;break}if(q=M-(D.clickX-P.x),Y=E-(D.clickY-P.y),q=Math.min(T.x-2,q),q=Math.max(this.state===2?P.x:0,q),Y=Math.min(T.y-2,Y),Y=Math.max(this.state===2?P.y:0,Y),this.state!==1){we.next=27;break}if(Z=q-P.x,j=Z*this.imageRatio,!((Y=P.y+j)<0||q<0||Y>=T.y)){we.next=27;break}return we.abrupt("return");case 27:this.updateOutline({start:{x:q,y:Y},end:{x:T.x,y:T.y}}),we.next=117;break;case 30:if(D.operator!=="w-resize"){we.next=37;break}ne=M-(D.clickX-P.x),ne=Math.min(T.x-2,ne),ne=Math.max(this.state===2?P.x:7,ne),this.updateOutline({start:{x:ne,y:P.y},end:T}),we.next=117;break;case 37:if(D.operator!=="sw-resize"){we.next=53;break}if(le=M-(D.clickX-P.x),J=E-(D.clickY-T.y),le=Math.min(T.x-2,le),le=Math.max(this.state===2?P.x:0,le),J=Math.min(this.state===2?T.y:N,J),J=Math.max(P.y+2,J),this.state!==1){we.next=50;break}if(O=le-P.x,U=O*this.imageRatio,!((J=T.y-U)>=N||le<0||J<=P.y)){we.next=50;break}return we.abrupt("return");case 50:this.updateOutline({start:{x:le,y:P.y},end:{x:T.x,y:J}}),we.next=117;break;case 53:if(D.operator!=="s-resize"){we.next=60;break}W=E-(D.clickY-T.y),W=Math.min(this.state===2?T.y:N,W),W=Math.max(P.y+2,W),this.updateOutline({start:P,end:{x:T.x,y:W}}),we.next=117;break;case 60:if(D.operator!=="se-resize"){we.next=76;break}if(H=M-(D.clickX-T.x),X=E-(D.clickY-T.y),H=Math.min(this.state===2?T.x:I,H),H=Math.max(P.x+2,H),X=Math.min(this.state===2?T.y:N,X),X=Math.max(P.y+2,X),this.state!==1){we.next=73;break}if(Q=T.x-H,fe=Q*this.imageRatio,!((X=T.y-fe)>=N||H>=I||X-P.y<=0)){we.next=73;break}return we.abrupt("return");case 73:this.updateOutline({start:{x:P.x,y:P.y},end:{x:H,y:X}}),we.next=117;break;case 76:if(D.operator!=="e-resize"){we.next=83;break}Se=M-(D.clickX-T.x),Se=Math.min(this.state===2?T.x:I,Se),Se=Math.max(P.x+2,Se),this.updateOutline({start:P,end:{x:Se,y:T.y}}),we.next=117;break;case 83:if(D.operator!=="ne-resize"){we.next=99;break}if(Pe=M-(D.clickX-T.x),$e=E-(D.clickY-P.y),Pe=Math.min(this.state===2?T.x:I,Pe),Pe=Math.max(P.x+2,Pe),$e=Math.min(T.y-2,$e),$e=Math.max(this.state===2?P.y:0,$e),this.state!==1){we.next=96;break}if(Ie=T.x-Pe,Ne=Ie*this.imageRatio,!(($e=P.y+Ne)<=0||Pe>=I||T.y-$e<=0)){we.next=96;break}return we.abrupt("return");case 96:this.updateOutline({start:{x:P.x,y:$e},end:{x:Pe,y:T.y}}),we.next=117;break;case 99:if(D.operator!=="n-resize"){we.next=106;break}Be=E-(D.clickY-P.y),Be=Math.min(T.y-2,Be),Be=Math.max(this.state===2?P.y:0,Be),this.updateOutline({start:{x:P.x,y:Be},end:T}),we.next=117;break;case 106:if(D.operator!=="move"){we.next=117;break}if(this.state!==2){we.next=109;break}return we.abrupt("return");case 109:be=M-(D.clickX-P.x),Ve=E-(D.clickY-P.y),De=M-(D.clickX-T.x),ve=E-(D.clickY-T.y),ye={width:Math.abs(P.x-T.x),height:Math.abs(P.y-T.y)},be<De?(be=Math.max(this.state===2?P.x:0,be),be=Math.min(this.state===2?T.x-ye.width:I-ye.width,be),De=Math.max(this.state===2?P.x+ye.width:ye.width,De),De=Math.min(this.state===2?T.x:I,De)):(De=Math.max(this.state===2?P.x:0,De),De=Math.min(this.state===2?T.x-ye.width:I-ye.width,De),be=Math.max(this.state===2?P.x+ye.width:ye.width,be),be=Math.min(this.state===2?T.x:I,be)),Ve<ve?(Ve=Math.max(this.state===2?P.y:0,Ve),Ve=Math.min(this.state===2?T.y-ye.height:N-ye.height,Ve),ve=Math.max(this.state===2?P.y+ye.height:ye.height,ve),ve=Math.min(this.state===2?T.y:N,ve)):(ve=Math.max(this.state===2?P.y:0,ve),ve=Math.min(this.state===2?T.y-ye.height:N-ye.height,ve),Ve=Math.max(this.state===2?P.y+ye.height:ye.height,Ve),Ve=Math.min(this.state===2?T.y:N,Ve)),this.updateOutline({start:{x:be,y:Ve},end:{x:De,y:ve}});case 117:this.mouseMoved=!0;case 118:case"end":return we.stop()}},w,this)})),function(w){return y.apply(this,arguments)})},{key:"handleOutside",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,M,E,P,T,D=this;return _regeneratorRuntime().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!this.moving){F.next=12;break}return S=[this.imageContainer,this.outerLine,this.deletetButton],(M=document.querySelector(".editor-panel"))&&S.push(M),(E=document.getElementById("propertyPanelButton"))&&S.push(E),(P=document.getElementById("undo"))&&S.push(P),(T=document.getElementById("redo"))&&S.push(T),onClickOutsideUp(S,this.handleOutside.bind(this)),F.abrupt("return");case 12:this.state=0,this.imageUrl=null,this.removed||this.contentContainer.setSelectedEditBox(null),this.moveRect.style.cursor="all-scroll",this.updateRectStyle(),this.updateOutline({start:this.start,end:this.end}),(x=this.frameContainer)===null||x===void 0||x.classList.remove("editing"),(k=this.frameContainer)===null||k===void 0||k.classList.remove("selected"),this.outerLineContainer.remove(),this.outerLineContainer.append(this.deletetButton),setTimeout(function(){document.querySelector(".frame-container.selected")||(D.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1}),D.eventBus.dispatch("changeRightPanelBtnDisabled",!0),D.eventBus.dispatch("contentBoxDeselected",{type:"image",pageNumber:D.pageViewer.pageIndex+1}))},1);case 23:case"end":return F.stop()}},w,this)})),function(){return m.apply(this,arguments)})},{key:"getRect",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,M,E;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.cropped){P.next=4;break}return P.next=3,this.messageHandler.sendWithPromise("GetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 3:x=P.sent;case 4:return P.next=6,this.messageHandler.sendWithPromise("GetClipRect",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 6:this.frame=P.sent,!x||x.left===this.frame.left&&x.top===this.frame.top&&x.right===this.frame.right&&x.bottom===this.frame.bottom||(this.cropped=!0),k=this.getActualRect(this.scale,this.frame),S=k.start,M=k.end,this.start=S,this.end=M,this.oldRect=this.rect||null,E=this.rectCalc(S,M),this.rect=E,this.imageRatio=this.rect.height/this.rect.width;case 15:case"end":return P.stop()}},w,this)})),function(){return g.apply(this,arguments)})},{key:"updateCanvas",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function w(x,k){var S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this.removed){O.next=3;break}return O.next=3,this.getRect();case 3:if(this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),setCss(this.frameContainer,{left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"})),x?(S=x.oldPoint,M=x.newPoint,E=this.getEntireArea(S,M),P=this.getActualRect(this.scale,E),T=P.start,D=P.end,F=this.rectCalc(T,D),I=this.rectCalc(S.start,S.end),N=this.getEntireArea(I,this.rect),q={left:N.left,top:N.top,width:N.right-N.left,height:N.bottom-N.top},parseInt(F.left)===parseInt(N.left)&&parseInt(F.top)===parseInt(N.top)&&parseInt(F.width)===parseInt(N.width)&&parseInt(F.height)===parseInt(N.height)||(F=q),Y={left:parseInt(F.left*this.ratio),top:parseInt(F.top*this.ratio),right:Math.ceil((F.left+F.width)*this.ratio),bottom:Math.ceil((F.top+F.height)*this.ratio),width:Math.ceil(F.width*this.ratio),height:Math.ceil(F.height*this.ratio)},this.imgRect=Y):k?(Z=this.getEntireArea(this.oldRect,this.rect),j={left:parseInt(Z.left*this.ratio),top:parseInt(Z.top*this.ratio),right:parseInt(Z.right*this.ratio),bottom:parseInt(Z.bottom*this.ratio),width:parseInt(Z.right*this.ratio)-parseInt(Z.left*this.ratio),height:parseInt(Z.bottom*this.ratio)-parseInt(Z.top*this.ratio)},this.imgRect=j):(ne={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:parseInt(this.rect.left*this.ratio)+parseInt(this.rect.width*this.ratio),bottom:parseInt(this.rect.top*this.ratio)+parseInt(this.rect.height*this.ratio),width:parseInt(this.rect.width*this.ratio),height:parseInt(this.rect.height*this.ratio)},this.imgRect=ne),this.initial||this.newAdd){O.next=7;break}return O.abrupt("return");case 7:if(le=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){O.next=14;break}return O.next=11,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 11:le=O.sent,O.next=17;break;case 14:return O.next=16,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 16:le=O.sent;case 17:J=le.imageArray,this.imageArray=J,this.drawCanvas(),this.saveEdit();case 21:case"end":return O.stop()}},w,this)})),function(w,x){return f.apply(this,arguments)})},{key:"drawCanvas",value:function(){if(this.imgRect){if(this.pageViewer.canvas){var w=this.pageViewer.canvas.getContext("2d"),x=w.createImageData(parseInt(this.imgRect.right-this.imgRect.left),parseInt(this.imgRect.bottom-this.imgRect.top));x.data.set(this.imageArray),w.putImageData(x,this.imgRect.left,this.imgRect.top)}}else this.updateCanvas()}},{key:"saveEdit",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function w(){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.messageHandler.sendWithPromise("EndEdit",this.editPagePtr);case 2:this.needUndoRec&&(this.addUndoHistory(),this.needUndoRec=!1);case 3:case"end":return x.stop()}},w,this)})),function(){return d.apply(this,arguments)})},{key:"updateOutline",value:function(w){var x=w.start,k=w.end,S=this.rectCalc(x,k);this.newStart=x,this.newEnd=k,setCss(this.outerLine,{left:S.left-this.borderWidth+"px",top:S.top-this.borderWidth+"px",width:S.width+this.borderWidth+this.pointWidth/2+"px",height:S.height+this.borderWidth+this.pointHeight/2+"px"});var M=S.left+S.width-30+"px",E=S.top+S.height+8+"px";if(this.deletetButton.style.left=M,this.deletetButton.style.top=E,this.moveRect.setAttribute("width",S.width-this.borderWidth),this.moveRect.setAttribute("height",S.height-this.borderWidth),this.LeftRect.setAttribute("y",(S.height-this.pointHeight+this.borderWidth)/2),this.bottomRect.setAttribute("x",(S.width-this.pointWidth+this.borderWidth)/2),this.bottomRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.rightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2),this.rightRect.setAttribute("y",(S.height-this.pointHeight+this.borderWidth)/2),this.topRect.setAttribute("x",(S.width-this.pointWidth+this.borderWidth)/2),this.state===2){var P=15;this.LeftRect.setAttribute("y",(S.height-P+this.borderWidth)/2),this.topRect.setAttribute("x",(S.width-P+this.borderWidth)/2),this.rightRect.setAttribute("y",(S.height-P+this.borderWidth)/2),this.bottomRect.setAttribute("x",(S.width-P+this.borderWidth)/2),this.topRightRect.setAttribute("d","M".concat(S.width+this.borderWidth/2-P+this.pointWidth/2,",").concat(this.pointWidth/2," H").concat(S.width+this.borderWidth/2," V").concat(P)),this.bottomLeftRect.setAttribute("d","M".concat(this.pointWidth/2,",").concat(S.height+this.borderWidth/2-P+this.pointWidth/2," V").concat(S.height+this.borderWidth/2," H").concat(P)),this.bottomRightRect.setAttribute("d","M".concat(S.width+this.borderWidth/2,",").concat(S.height+this.borderWidth/2-P+this.pointWidth/2," V").concat(S.height+this.borderWidth/2," H").concat(S.width+this.borderWidth/2-P+this.pointWidth/2));var T=S.left-this.rect.left,D=S.top-this.rect.top,F=this.rect.left+this.rect.width-S.left-S.width,I=this.rect.top+this.rect.height-S.top-S.height;switch(this.startState.operator){case"sw-resize":this.frameContainer.style["box-shadow"]="inset ".concat(T,"px ").concat(-I,"px rgba(0, 0, 0, 0.5)");break;case"ne-resize":this.frameContainer.style["box-shadow"]="inset ".concat(-F,"px ").concat(D,"px rgba(0, 0, 0, 0.5)");break;case"nw-resize":case"n-resize":case"w-resize":this.frameContainer.style["box-shadow"]="inset ".concat(T,"px ").concat(D,"px rgba(0, 0, 0, 0.5)");break;case"se-resize":case"s-resize":case"e-resize":this.frameContainer.style["box-shadow"]="inset ".concat(-F,"px ").concat(-I,"px rgba(0, 0, 0, 0.5)")}}else this.bottomLeftRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.bottomRightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2),this.bottomRightRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.topRightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2)}},{key:"setProperty",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:S.t0=_regeneratorRuntime().keys(x);case 1:if((S.t1=S.t0()).done){S.next=25;break}if((k=S.t1.value)!=="alignType"){S.next=11;break}if(this.selectedCharRange){S.next=9;break}return S.next=7,this.messageHandler.sendWithPromise("SetTextAligningSection",{editAreaPtr:this.editAreaPtr,alignType:x.alignType,char:activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:-1}});case 7:S.next=11;break;case 9:return S.next=11,this.messageHandler.sendWithPromise("SetTextAligningRange",{editAreaPtr:this.editAreaPtr,alignType:x.alignType,start:this.selectedCharRange.start,end:this.selectedCharRange.end});case 11:if(this.selectedCharRange||k==="alignType"){S.next=14;break}return S.next=14,this.selectAllText();case 14:if(k!=="opacity"){S.next=17;break}return S.next=17,this.messageHandler.sendWithPromise("SetCharsFontTransparency",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,opacity:x.opacity/100});case 17:if(k!=="fontSize"){S.next=20;break}return S.next=20,this.messageHandler.sendWithPromise("SetCharsFontSize",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontSize:x.fontSize});case 20:if(k!=="fontFamily"){S.next=23;break}return S.next=23,this.messageHandler.sendWithPromise("SetFontFromNativeTrueTypeFont",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontFamily:x.fontFamily});case 23:S.next=1;break;case 25:return S.next=27,this.updateCanvas(null,!0);case 27:case"end":return S.stop()}},w,this)})),function(w){return u.apply(this,arguments)})},{key:"handlePropertyPanelChanged",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function w(x){var k,S=this;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.state!==0){M.next=2;break}return M.abrupt("return");case 2:M.t0=_regeneratorRuntime().keys(x);case 3:if((M.t1=M.t0()).done){M.next=48;break}if((k=M.t1.value)!=="rotate"){M.next=9;break}return M.next=8,this.messageHandler.sendWithPromise("RotateImage",{editAreaPtr:this.editAreaPtr,angle:x[k]});case 8:this.needUndoRec=!0;case 9:if(k!=="flip"){M.next=19;break}if(x[k]!=="x"){M.next=15;break}return M.next=13,this.messageHandler.sendWithPromise("HorizontalMirrorImage",this.editAreaPtr);case 13:M.next=18;break;case 15:if(x[k]!=="y"){M.next=18;break}return M.next=18,this.messageHandler.sendWithPromise("VerticalMirrorImage",this.editAreaPtr);case 18:this.needUndoRec=!0;case 19:if(k!=="opacity"){M.next=31;break}if(100*this.opacity!==x.opacity){M.next=22;break}return M.abrupt("return");case 22:return M.next=24,this.messageHandler.sendWithPromise("GetImageTransparency",this.editAreaPtr);case 24:if(100*M.sent!==x.opacity){M.next=27;break}return M.abrupt("return");case 27:return M.next=29,this.messageHandler.sendWithPromise("SetImageTransparency",{editAreaPtr:this.editAreaPtr,opacity:x.opacity/100});case 29:this.opacity=x.opacity/100,this.needUndoRec=!0;case 31:if(k!=="tool"||x.tool!=="replace"){M.next=34;break}return M.next=34,this.uploadFile().then(function(){var E=_asyncToGenerator(_regeneratorRuntime().mark(function P(T){var D,F,I,N,q,Y,Z,j,ne,le,J,O;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return D=T.imageBase64,F=T.width,I=T.height,N={top:S.frame.top,left:S.frame.left,width:S.frame.right-S.frame.left,height:S.frame.bottom-S.frame.top},(q=F/I)>N.width/N.height?(Y=N.width,Z=N.width/q):(Y=N.height*q,Z=N.height),j=(O={x:N.left+N.width/2,y:N.top+N.height/2}).x-Y/2,ne=O.x+Y/2,le=O.y+Z/2,J=O.y-Z/2,U.next=12,S.messageHandler.sendWithPromise("ReplaceImageAreaByStream",{pagePtr:S.pagePtr,editPagePtr:S.editPagePtr,editAreaPtr:S.editAreaPtr,rect:{left:j,right:ne,bottom:le,top:J},imageBase64:D});case 12:return S.editAreaPtr=U.sent,U.next=15,S.messageHandler.sendWithPromise("GetImageTransparency",S.editAreaPtr);case 15:S.opacity=U.sent,S.eventBus.dispatch("contentPropertyChange",{type:"image",opacity:100*S.opacity}),S.needUndoRec=!0,S.saveEdit();case 19:case"end":return U.stop()}},P)}));return function(P){return E.apply(this,arguments)}}()).catch(function(E){console.error(E)});case 34:if(k!=="tool"||x.tool!=="export"){M.next=37;break}return this.exportImage(this.imageUrl),M.abrupt("return");case 37:if(k!=="tool"||x.tool!=="crop"){M.next=46;break}if(this.state!==2){M.next=40;break}return M.abrupt("return");case 40:return this.state=2,this.frameContainer.classList.add("editing"),this.deletetButton.remove(),this.moveRect.style.cursor="auto",this.updateRectStyle(),M.abrupt("return");case 46:M.next=3;break;case 48:return M.next=50,this.updateCanvas(null,!0);case 50:this.updateOriginalImageUrl();case 51:case"end":return M.stop()}},w,this)})),function(w){return s.apply(this,arguments)})},{key:"getEntireArea",value:function(w,x){var k=null;if("start"in w&&"start"in x){var S=this.getInitialPoint(w.start,w.end),M=this.getInitialPoint(x.start,x.end);k={left:Math.min(S.start.x,M.start.x),top:Math.min(S.start.y,M.start.y),right:Math.max(S.end.x,M.end.x),bottom:Math.max(S.end.y,M.end.y)}}else"left"in w&&"left"in x&&(k={left:Math.min(w.left,x.left),top:Math.min(w.top,x.top),right:Math.max(w.left+w.width,x.left+x.width),bottom:Math.max(w.top+w.height,x.top+x.height)});return k}},{key:"goEditing",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,M,E;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:this.state=1,this.contentContainer.setSelectedEditBox(this),this.frameContainer.classList.add("selected"),this.container.append(this.outerLineContainer),this.imageUrl||this.updateOriginalImageUrl(),x=[this.imageContainer,this.outerLine,this.deletetButton],(k=document.querySelector(".editor-panel"))&&x.push(k),(S=document.getElementById("propertyPanelButton"))&&x.push(S),(M=document.getElementById("undo"))&&x.push(M),(E=document.getElementById("redo"))&&x.push(E),onClickOutsideUp(x,this.handleOutside.bind(this));case 15:case"end":return P.stop()}},w,this)})),function(){return o.apply(this,arguments)})},{key:"handleDelete",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function w(){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.handleOutside();case 2:return this.removed=!0,this.outerLineContainer.remove(),this.frameContainer.remove(),this.frameContainer=null,this.contentContainer.setSelectedEditBox(null),x.next=9,this.messageHandler.send("RemoveEditArea",{editPagePtr:this.editPagePtr,editAreaPtr:this.editAreaPtr});case 9:this.needUndoRec=!0,this.updateCanvas(),this.contentContainer.removeEditor(this.editAreaIndex),this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1});case 13:case"end":return x.stop()}},w,this)})),function(){return r.apply(this,arguments)})},{key:"remove",value:function(){this.handleDelete()}},{key:"removeViewer",value:function(){var w,x,k;this.state=0,this.removed=!0,(w=this.outerLineContainer)===null||w===void 0||w.remove(),(x=this.frameContainer)===null||x===void 0||x.remove(),this.frameContainer=null,(k=this.contentContainer)===null||k===void 0||k.setSelectedEditBox(null),this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1})}},{key:"uploadFile",value:function(){var w=this;return new Promise(function(x,k){var S=document.createElement("input");S.type="file",S.accept=".jpg, .jpeg, .png",S.onchange=function(){var M=S.files[0];if(M.size>2097152)return k(w.$t("editorPanel.maximum")),S.remove(),void window.$message.error(w.$t("editorPanel.maximum"),{duration:3e3});if(M){var E=new FileReader;E.onload=function(P){var T=new Image;T.onload=function(){x({imageBase64:P.target.result,width:T.width,height:T.height})},T.onerror=function(D){k(D)},T.src=P.target.result},E.onerror=function(P){k(P)},E.readAsDataURL(M),S.remove()}},S.click()})}},{key:"updateOriginalImageUrl",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,M,E,P;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.messageHandler.sendWithPromise("GetImageAreaSize",this.editAreaPtr);case 2:return x=T.sent,k=x.width,S=x.height,M=x.stride,T.next=8,this.messageHandler.sendWithPromise("ExtractOriginalImage",{editAreaPtr:this.editAreaPtr,width:k,height:S,stride:M});case 8:E=T.sent,P=E.imageArray,this.imageUrl=this.imageArrayToUrl(P,k,S),this.eventBus.dispatch("contentPropertyChange",{type:"image",imageUrl:this.imageUrl,opacity:100*this.opacity});case 12:case"end":return T.stop()}},w,this)})),function(){return n.apply(this,arguments)})},{key:"updateRectStyle",value:function(){if(this.topLeftRect.remove(),this.topRightRect.remove(),this.bottomLeftRect.remove(),this.bottomRightRect.remove(),this.state===2){var w=15;this.LeftRect.setAttribute("height",w),this.LeftRect.setAttribute("y",(this.rect.height-w+this.borderWidth)/2),this.LeftRect.style.cursor="e-resize",this.topRect.setAttribute("width",w),this.topRect.setAttribute("x",(this.rect.width-w+this.borderWidth)/2),this.topRect.style.cursor="s-resize",this.rightRect.setAttribute("height",w),this.rightRect.setAttribute("y",(this.rect.height-w+this.borderWidth)/2),this.rightRect.style.cursor="w-resize",this.bottomRect.setAttribute("width",w),this.bottomRect.setAttribute("x",(this.rect.width-w+this.borderWidth)/2),this.bottomRect.style.cursor="n-resize",this.topLeftRect=createSvg("path",{class:"nw-resize","data-id":"nw-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(w,",").concat(this.pointWidth/2," H").concat(this.pointWidth/2," V").concat(w)},{cursor:"se-resize"}),this.topRightRect=createSvg("path",{class:"ne-resize","data-id":"ne-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.rect.width+this.borderWidth/2-w+this.pointWidth/2,",").concat(this.pointWidth/2," H").concat(this.rect.width+this.borderWidth/2," V").concat(w)},{cursor:"sw-resize"}),this.bottomLeftRect=createSvg("path",{class:"sw-resize","data-id":"sw-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.pointWidth/2,",").concat(this.rect.height+this.borderWidth/2-w+this.pointWidth/2," V").concat(this.rect.height+this.borderWidth/2," H").concat(w)},{cursor:"ne-resize"}),this.bottomRightRect=createSvg("path",{class:"se-resize","data-id":"se-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.rect.width+this.borderWidth/2,",").concat(this.rect.height+this.borderWidth/2-w+this.pointWidth/2," V").concat(this.rect.height+this.borderWidth/2," H").concat(this.rect.width+this.borderWidth/2-w+this.pointWidth/2)},{cursor:"nw-resize"})}else this.LeftRect.setAttribute("height",this.pointHeight),this.LeftRect.style.cursor="w-resize",this.topRect.setAttribute("width",this.pointWidth),this.topRect.style.cursor="n-resize",this.rightRect.setAttribute("height",this.pointHeight),this.rightRect.style.cursor="e-resize",this.bottomRect.setAttribute("width",this.pointWidth),this.bottomRect.style.cursor="s-resize",this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:0}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2});this.outerLine.append(this.topLeftRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect)}},{key:"imageArrayToUrl",value:function(w,x,k){var S=document.createElement("canvas"),M=S.getContext("2d");S.width=x,S.height=k;var E=M.createImageData(x,k),P=new Uint8ClampedArray(w.buffer);E.data.set(P),M.putImageData(E,0,0);var T=S.toDataURL("image/png",1);return S.remove(),S=null,T}},{key:"exportImage",value:function(w,x){var k=document.createElement("a");k.href=w,k.download=x||"image",document.body.appendChild(k),k.click(),document.body.removeChild(k)}},{key:"handleShow",value:function(w){w==="text"?(this.hidden=!0,this.frameContainer&&(this.frameContainer.style.display="none"),this.state&&this.handleOutside()):(this.hidden=!1,this.frameContainer&&(this.frameContainer.style.display="block"))}},{key:"addUndoHistory",value:function(){this.contentContainer.handleOperateList({editPagePtr:this.editPagePtr,editAreaIndex:this.editAreaIndex,editAreaPtr:this.editAreaPtr,pageIndex:this.pageViewer.pageIndex})}},{key:"updateCanvasAfterUndoRedo",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,M,E;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.getRect();case 2:if(this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),setCss(this.frameContainer,{left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"})),x=this.getEntireArea(this.oldRect,this.rect),k={left:parseInt(x.left*this.ratio),top:parseInt(x.top*this.ratio),right:Math.ceil(x.right*this.ratio),bottom:Math.ceil(x.bottom*this.ratio),width:parseInt(x.right*this.ratio)-parseInt(x.left*this.ratio),height:parseInt(x.bottom*this.ratio)-parseInt(x.top*this.ratio)},this.imgRect=k,S=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){P.next=13;break}return P.next=10,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 10:S=P.sent,P.next=16;break;case 13:return P.next=15,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 15:S=P.sent;case 16:if(M=S.imageArray,this.imageArray=M,this.drawCanvas(),this.saveEdit(),this.contentContainer.getSelectedEditBox()!==this){P.next=27;break}return this.updateOriginalImageUrl(),P.next=24,this.messageHandler.sendWithPromise("GetImageTransparency",this.editAreaPtr);case 24:E=P.sent,this.opacity=Math.round(100*E)/100,this.eventBus.dispatch("contentPropertyChange",{type:"image",opacity:100*this.opacity});case 27:case"end":return P.stop()}},w,this)})),function(){return e.apply(this,arguments)})}]);var e,n,r,o,s,u,d,f,g,m,y,v,_}(),AddText=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.container,u=n.pageViewer,d=n.viewport,f=n.page,g=n.eventBus,m=n.contentContainer;_classCallCheck(this,e),this._tool=r,this.color=o,this.container=s,this.pageViewer=u,this.viewport=d,this.page=f,this.eventBus=g,this.contentContainer=m,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.container.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.container.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){var n=this.pageViewer.documentViewer.getContentEditManager();if((e.target.className||e.target.className.includes("contentContainer"))&&n.getSelectedEditBox()===null){var r=getAbsoluteCoordinate(this.container,e),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.pageViewer.viewport.scale),o=getInitialPoint(n,this.pageViewer.viewport.scale),s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},u={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},d={rect:{left:s.x,top:s.y,right:u.x,bottom:s.y+16},fontData:{fontName:"Helvetica",fontSize:14,r:0,g:0,b:0,opacity:1,isBold:0,italic:0},alignType:2};this.contentContainer.addTextEditor(d)}else{var f=getInitialPoint(e,this.pageViewer.viewport.scale),g={rect:{left:f.x,top:f.y,right:f.x+10,bottom:f.y+16},fontData:{fontName:"Helvetica",fontSize:14,r:0,g:0,b:0,opacity:1,isBold:0,italic:0},alignType:2};this.contentContainer.addTextEditor(g)}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,s=this.pageViewer.viewport,u=s.width,d=s.height;if(this.pageViewer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute","z-index":3},{class:"add-text"});this.shapeEle=x,this.container.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.pageViewer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),AddImage=function(){return _createClass(function e(n){var r=n.tool,o=n.color,s=n.container,u=n.pageViewer,d=n.viewport,f=n.rotation,g=n.page,m=n.eventBus,y=n.contentContainer,v=n.$t;_classCallCheck(this,e),this._tool=r,this.color=o,this.container=s,this.pageViewer=u,this.viewport=d,this.page=g,this.rotation=f,this.eventBus=m,this.contentContainer=y,this.$t=v,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.container.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.container.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){var n;if(this.pageViewer.documentViewer.getContentEditManager().getSelectedEditBox()===null&&(e.target.className||e.target.className.includes("contentContainer"))&&((n=e.target.className)===null||n===void 0||!n.includes("image-container"))){var r=getAbsoluteCoordinate(this.container,e),o=r.x,s=r.y;this.initStartPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this,n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.pageViewer.viewport.scale),s=getInitialPoint(r,this.pageViewer.viewport.scale),u={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},d={x:Math.max(o.x,s.x),y:Math.max(o.y,s.y)},f={left:u.x,top:u.y,right:d.x,bottom:d.y,width:d.x-u.x,height:d.y-u.y};this.uploadFile().then(function(w){var x,k,S=w.imageBase64,M=w.width/w.height;M>f.width/f.height?(x=f.width,k=f.width/M):(x=f.height*M,k=f.height);var E=f.left+f.width/2,P=f.top+f.height/2,T={left:E-x/2,top:P-k/2,right:E+x/2,bottom:P+k/2};e.contentContainer.addImageEditor({rect:T,imageBase64:S})}).catch(function(w){console.error(w)})}else{var g=getInitialPoint(n,this.pageViewer.viewport.scale),m=this.pageViewer.viewport.viewBox[2],y=this.pageViewer.viewport.viewBox[3],v=m/2,_=y/2;this.uploadFile().then(function(w){var x=w.imageBase64,k=w.width,S=w.height,M=k,E=S;if(k>v||S>_){var P=k/S;P>v/_?(M=v,E=v/P):(M=_*P,E=_)}var T=null;if((T=e.rotation/90%2>0?{left:g.x-E/2,top:g.y-M/2,right:g.x+E/2,bottom:g.y+M/2}:{left:g.x-M/2,top:g.y-E/2,right:g.x+M/2,bottom:g.y+E/2}).left<7){var D=7-T.left;T.left+=D,T.right+=D}if(T.top<7){var F=7-T.top;T.top+=F,T.bottom+=F}if(T.right>m){var I=T.right-m+7;T.right-=I,T.left-=I}if(T.bottom>y){var N=T.bottom-y+7;T.bottom-=N,T.top-=N}e.contentContainer.addImageEditor({rect:T,imageBase64:x})}).catch(function(w){console.error(w)})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,s=this.pageViewer.viewport,u=s.width,d=s.height;if(this.pageViewer.viewport.scale,r=Math.min(u,r),r=Math.max(0,r),o=Math.min(d,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var f=this.initStartPoint,g=this.initEndPoint,m=Math.abs(g.x-f.x),y=Math.abs(g.y-f.y),v=Math.min(m,y);f.x<g.x?g.x=f.x+v:g.x=f.x-v,f.y<g.y?g.y=f.y+v:g.y=f.y-v}var _=this.calculate(this.initStartPoint,this.initEndPoint),w=this.shapeEle;w.style.top="".concat(_.top,"px"),w.style.left="".concat(_.left,"px"),w.style.width="".concat(Math.abs(_.width-1),"px"),w.style.height="".concat(Math.abs(_.height-1),"px")}else{var x=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute","z-index":3},{class:"add-text"});this.shapeEle=x,this.container.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.pageViewer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"uploadFile",value:function(){var e=this;return new Promise(function(n,r){var o=document.createElement("input");o.type="file",o.accept=".jpg, .jpeg, .png",o.onchange=function(){var s=o.files[0];if(s.size>2097152)return r(e.$t("editorPanel.maximum")),o.remove(),void window.$message.error(e.$t("editorPanel.maximum"),{duration:3e3});if(s){var u=new FileReader;u.onload=function(d){var f=new Image;f.onload=function(){n({imageBase64:d.target.result,width:f.width,height:f.height})},f.onerror=function(g){r(g)},f.src=d.target.result},u.onerror=function(d){r(d)},u.readAsDataURL(s),o.remove()}},o.click()})}}])}(),ContentContainer=function(){return _createClass(function v(_){_classCallCheck(this,v),this.pageViewer=_.pageViewer,this.eventBus=_.eventBus,this.pageIndex=_.pageIndex,this.pagePtr=_.pagePtr,this.rotation=_.rotation,this.messageHandler=_.messageHandler,this.pageDiv=_.pageDiv,this.viewport=_.viewport,this.scale=_.scale,this.$t=_.$t,this.historyManager=_.contentEditHistoryManager,this.destroyed=!1,this.rendered=!1,this.isRendering=!1,this.frameEditorList=[],this.tool=this.pageViewer.tool||"",this.color=this.pageViewer.color||"",this.onHandleTool=this.handleTool.bind(this),this.onKeydown=this.handleKeyDown.bind(this)},[{key:"init",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function v(){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,this.update();case 2:return document.addEventListener("keydown",this.onKeydown),this.eventBus._on("toolChanged",this.onHandleTool),_.next=6,this.render();case 6:case"end":return _.stop()}},v,this)})),function(){return y.apply(this,arguments)})},{key:"update",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function v(){var _,w,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.messageHandler.sendWithPromise("InitEditPage",{pagePtr:this.pagePtr});case 2:return _=k.sent,w=_.editPagePtr,this.editPagePtr=w,k.next=7,this.messageHandler.sendWithPromise("BeginEdit",{editPagePtr:this.editPagePtr,type:3});case 7:if(!(x=k.sent)||!x.code){k.next=12;break}return this.eventBus.dispatch("message",{type:"ERROR",message:x.message}),console.log(x.message),k.abrupt("return",!1);case 12:this.tool=this.pageViewer.tool||"";case 13:case"end":return k.stop()}},v,this)})),function(){return m.apply(this,arguments)})},{key:"render",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function v(){var _,w,x,k,S,M,E;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!this.contentContainer){P.next=2;break}return P.abrupt("return");case 2:return _=this.isRendering,this.isRendering=!0,(w=document.createElement("div")).className="contentContainer",this.contentContainer=w,this.pageDiv.append(this.contentContainer),this.frameEditorList.forEach(function(T){T.removeViewer()}),this.frameEditorList.length=0,P.prev=10,P.next=13,this.messageHandler.sendWithPromise("GetEditAreaCount",this.editPagePtr);case 13:x=P.sent,k=0;case 15:if(!(k<x)){P.next=37;break}if(!_){P.next=18;break}return P.abrupt("break",37);case 18:return P.next=20,this.messageHandler.sendWithPromise("GetEditArea",{editPagePtr:this.editPagePtr,index:k});case 20:if(S=P.sent){P.next=23;break}return P.abrupt("continue",34);case 23:return P.next=25,this.messageHandler.sendWithPromise("IsTextArea",S);case 25:if(!P.sent){P.next=30;break}return M=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:S,editAreaIndex:k,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,hidden:this.tool==="addImage"}),this.frameEditorList.push(M),P.abrupt("continue",34);case 30:return P.next=32,this.messageHandler.sendWithPromise("IsImageArea",S);case 32:P.sent&&(E=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:S,editAreaIndex:k,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,$t:this.$t,hidden:this.tool==="addText"}),this.frameEditorList.push(E));case 34:k++,P.next=15;break;case 37:return P.prev=37,this.isRendering=!1,P.finish(37);case 40:this.tool==="addText"&&this.addTextManager(),this.tool==="addImage"&&this.addImageManager(),this.destroyed=!1,this.rendered=!0;case 44:case"end":return P.stop()}},v,this,[[10,,37,40]])})),function(){return g.apply(this,arguments)})},{key:"show",value:function(){this.contentContainer.style.display="block"}},{key:"hide",value:function(){this.contentContainer.style.display="none",this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset())}},{key:"cancel",value:function(){var v;!this.destroyed&&this.rendered&&((v=this.contentContainer)===null||v===void 0||v.remove(),this.contentContainer=null,this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()))}},{key:"destroy",value:function(){var v;!this.destroyed&&this.rendered&&((v=this.contentContainer)===null||v===void 0||v.remove(),this.contentContainer=null,this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()),this.destroyed=!0,this.eventBus._off("toolChanged",this.onHandleTool),document.removeEventListener("keydown",this.onKeydown),this.messageHandler.sendWithPromise("ClearEditPage",this.editPagePtr))}},{key:"handleTool",value:function(v){var _=v.tool,w=v.color;this.tool=_,this.color=w,this.textManager&&(this.textManager.tool=_,this.textManager.color=w),this.imageManager&&(this.imageManager.tool=_,this.imageManager.color=w),_==="addText"&&(this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()),this.addTextManager()),_==="addImage"&&(this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.addImageManager());var x={addText:"text",addImage:"image"},k=x[this.tool]?x[this.tool]:"";this.eventBus.dispatch("showContentEditorType",k)}},{key:"addTextManager",value:function(){this.textManager?this.textManager.init():this.textManager=new AddText({tool:this.tool,color:this.color,container:this.pageDiv,pageViewer:this.pageViewer,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,page:this.page,eventBus:this.eventBus,contentContainer:this})}},{key:"addImageManager",value:function(){this.imageManager?this.imageManager.init():this.imageManager=new AddImage({tool:this.tool,color:this.color,container:this.pageDiv,pageViewer:this.pageViewer,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,page:this.page,rotation:this.rotation,eventBus:this.eventBus,contentContainer:this,$t:this.$t})}},{key:"addTextEditor",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){var w,x,k,S,M;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return w=_.rect,x=_.fontData,k=_.alignType,E.next=3,this.messageHandler.sendWithPromise("CreateNewTextArea",{pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,rect:w,fontData:x,alignType:k});case 3:if(S=E.sent){E.next=6;break}return E.abrupt("return");case 6:M=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:S,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,newAdd:!0,pageViewer:this.pageViewer}),this.frameEditorList.push(M);case 8:case"end":return E.stop()}},v,this)})),function(v){return f.apply(this,arguments)})},{key:"addImageEditor",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){var w,x,k,S;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return w=_.rect,x=_.imageBase64,M.next=3,this.messageHandler.sendWithPromise("CreateNewImageAreaByStream",{pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,rect:w,imageBase64:x});case 3:if(k=M.sent){M.next=6;break}return M.abrupt("return");case 6:S=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:k,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,newAdd:!0,pageViewer:this.pageViewer,$t:this.$t}),this.frameEditorList.push(S);case 8:case"end":return M.stop()}},v,this)})),function(v){return d.apply(this,arguments)})},{key:"removeEditor",value:function(v){this.frameEditorList.splice(v,1),this.frameEditorList.forEach(function(_,w){return _.editAreaIndex=w})}},{key:"handleKeyDown",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){var w,x,k,S,M;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(w=this.getSelectedEditBox(),x=this.pageViewer.documentViewer,!_.metaKey&&!_.ctrlKey||_.key.toLowerCase()!=="v"||w&&w.state===2){E.next=11;break}if(x.page-1===this.pageIndex){E.next=6;break}return E.abrupt("return");case 6:return k=x.getContentEditManager(),E.next=9,k.pasteAreaInPage(x.page);case 9:E.next=17;break;case 11:if(!_.metaKey&&!_.ctrlKey||_.key.toLowerCase()!=="c"){E.next=17;break}if(!w||w.state!==1){E.next=17;break}return E.next=15,this.copyArea({editPagePtr:w.editPagePtr,editAreaPtr:w.editAreaPtr});case 15:S=E.sent,x.getContentEditManager().setCopyArea({editAreaInfoPtr:S,rect:w.frame});case 17:if(w&&w.state===1&&!document.querySelector(".n-color-picker-panel")&&_.target.className!=="n-input__input-el"){E.next=19;break}return E.abrupt("return");case 19:(M=_.keyCode||_.which)!==8&&M!==46||w.remove();case 21:case"end":return E.stop()}},v,this)})),function(v){return u.apply(this,arguments)})},{key:"copyArea",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){var w,x,k;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return w=_.editPagePtr,x=_.editAreaPtr,S.next=3,this.messageHandler.sendWithPromise("CopyArea",{editPagePtr:w,editAreaPtr:x});case 3:return k=S.sent,S.abrupt("return",k);case 5:case"end":return S.stop()}},v,this)})),function(v){return s.apply(this,arguments)})},{key:"getSelectedEditBox",value:function(){return this.pageViewer.documentViewer.getContentEditManager().getSelectedEditBox()}},{key:"setSelectedEditBox",value:function(v){this.pageViewer.documentViewer.getContentEditManager().setSelectedEditBox(v)}},{key:"handleResetOperate",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(_!=="undo"){w.next=6;break}return w.next=3,this.historyManager.undo();case 3:w.sent,w.next=10;break;case 6:if(_!=="redo"){w.next=10;break}return w.next=9,this.historyManager.redo();case 9:w.sent;case 10:case"end":return w.stop()}},v,this)})),function(v){return o.apply(this,arguments)})},{key:"handleOperateList",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.historyManager.canUndo(_);case 2:if(w.sent){w.next=5;break}return w.abrupt("return");case 5:this.eventBus.dispatch("undoRedoStatusChanged"),this.historyManager.undoList.push(_),this.historyManager.redoList.length=0,this.eventBus.dispatch("changeOperateList",{undoListLength:this.historyManager.undoList.length,redoListLength:this.historyManager.redoList.length}),this.eventBus.dispatch("isContentEditModyfied",!0);case 10:case"end":return w.stop()}},v,this)})),function(v){return r.apply(this,arguments)})},{key:"updateFrameEditor",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){var w,x,k,S,M,E,P,T;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(w=_.editAreaPtr,x=_.editCharPlace,!(k=this.frameEditorList.find(function(F){return F.editAreaPtr===w}))){D.next=6;break}return k.updateCanvasAfterUndoRedo(),k.type==="text"&&(x.CharIndex!==-1||x.LineIndex!==-1||x.RunIndex!==-1||x.SectionIndex!==-1)&&k.updateCursorLine(x),D.abrupt("return");case 6:return S=[],D.next=9,this.messageHandler.sendWithPromise("GetEditAreaCount",this.editPagePtr);case 9:M=D.sent,E=0;case 11:if(!(E<M)){D.next=32;break}return D.next=14,this.messageHandler.sendWithPromise("GetEditArea",{editPagePtr:this.editPagePtr,index:E});case 14:if(P=D.sent){D.next=17;break}return D.abrupt("continue",29);case 17:return T=void 0,D.next=20,this.messageHandler.sendWithPromise("IsTextArea",P);case 20:if(!D.sent){D.next=24;break}T=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:P,editAreaIndex:E,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,hidden:this.tool==="addImage",isUpdate:!0}),D.next=28;break;case 24:return D.next=26,this.messageHandler.sendWithPromise("IsImageArea",P);case 26:if(!D.sent){D.next=28;break}T=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:P,editAreaIndex:E,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,$t:this.$t,hidden:this.tool==="addText"});case 28:T&&S.push(T);case 29:E++,D.next=11;break;case 32:this.frameEditorList.forEach(function(){var F=_asyncToGenerator(_regeneratorRuntime().mark(function I(N){return _regeneratorRuntime().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,N.updateCanvas(null,!0);case 2:N.isPopupShow&&N.hidePopup(),N.removeViewer();case 4:case"end":return q.stop()}},I)}));return function(I){return F.apply(this,arguments)}}()),this.frameEditorList.length=0,this.frameEditorList=S;case 35:case"end":return D.stop()}},v,this)})),function(v){return n.apply(this,arguments)})},{key:"addEditArea",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function v(_){var w;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return w=null,x.next=3,this.messageHandler.sendWithPromise("IsTextArea",_);case 3:return x.sent&&(w=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:_,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,isUpdate:!0,hidden:this.tool==="addImage"})),x.next=7,this.messageHandler.sendWithPromise("IsImageArea",_);case 7:return x.sent&&(w=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:_,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,$t:this.$t,hidden:this.tool==="addText"})),w&&this.frameEditorList.push(w),x.abrupt("return",w);case 11:case"end":return x.stop()}},v,this)})),function(v){return e.apply(this,arguments)})}]);var e,n,r,o,s,u,d,f,g,m,y}(),_TextSelection_pagePtr,_TextSelection_textPtr;function __awaiter(e,n,r,o){return new(r||(r=Promise))(function(s,u){function d(m){try{g(o.next(m))}catch(y){u(y)}}function f(m){try{g(o.throw(m))}catch(y){u(y)}}function g(m){var y;m.done?s(m.value):(y=m.value,y instanceof r?y:new r(function(v){v(y)})).then(d,f)}g((o=o.apply(e,n||[])).next())})}function __classPrivateFieldGet(e,n,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!o:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:n.get(e)}function __classPrivateFieldSet(e,n,r,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!s:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(e,r):s?s.value=r:n.set(e,r),r}var markupType=isMobileDevice$1?["highlight","underline","squiggly","strikeout","selectText"]:["highlight","underline","squiggly","strikeout","","redaction","remove"],markupTypeNotNull=["highlight","underline","squiggly","strikeout","redaction","remove"],TextSelection=function(){return _createClass(function e(n){_classCallCheck(this,e),_TextSelection_pagePtr.set(this,void 0),_TextSelection_textPtr.set(this,void 0),this._tool=null,this.color=null,this.selecting=!1,this._selection=null,this.messageHandler=n.messageHandler,this.container=n.container||null,__classPrivateFieldSet(this,_TextSelection_textPtr,n.pagePtr.textPtr,"f"),__classPrivateFieldSet(this,_TextSelection_pagePtr,n.pagePtr.pagePtr,"f"),this.selected=n.selected,this.viewport=n.viewport,this.scale=n.scale,this.eventBus=n.eventBus,this.pageIndex=n.pageIndex,this.pageViewer=n.pageViewer,this.handleTool=this.handleTool.bind(this),this.handleToolMode=this.handleToolMode.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleDobuleClick=this.handleDobuleClick.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleTextPopup=this.handleTextPopup.bind(this),this.toolMode=n.toolMode,this.tool=n.tool,this.color=n.color,this.eventBus._on("toolChanged",this.handleTool),this.eventBus._on("toolModeChanged",this.handleToolMode),this.eventBus._on("textPopupClicked",this.handleTextPopup)},[{key:"handleToolMode",value:function(e){e!==this.toolMode&&(this.toolMode=e,document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("dblclick",this.handleDobuleClick),["view","annotation","security"].includes(this.toolMode)&&(document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("touchstart",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("dblclick",this.handleDobuleClick)))}},{key:"handleTool",value:function(e){var n=e.tool,r=e.color;this.tool=n,this.color=r,markupType.includes(this.tool)?(document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto"):(document.body.style.userSelect="none",document.body.style.webkitUserSelect="none")}},{key:"tool",get:function(){return this._tool},set:function(e){if(e!==this._tool||e===""){if(!markupType.includes(e)||this.toolMode==="editor")return document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("dblclick",this.handleDobuleClick),void(this._tool=e);markupType.includes(e)&&markupType.includes(this.tool)||(document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("touchstart",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("dblclick",this.handleDobuleClick)),this._tool=e}}},{key:"testPoint",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,s=n.width,u=n.height;return!(r<0||o<0||r>s||o>u)&&{x:r,y:o}}},{key:"handleKeyDown",value:function(e){var n;if(e.key.toLocaleLowerCase()==="c"&&(e.ctrlKey||e.metaKey)){var r=(n=this._selection)===null||n===void 0?void 0:n.textContent;r&&copyToClipboard$1(r)}}},{key:"handleMouseDown",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!this.isTargetInElement(e.target,".text-popup")){y.next=2;break}return y.abrupt("return");case 2:if(this.cleanSelection(),r=this.tool,!(o=document.querySelectorAll(".dialog")).length){y.next=13;break}s=0;case 7:if(!(s<o.length)){y.next=13;break}if(!o[s].contains(e.target)){y.next=10;break}return y.abrupt("return");case 10:s++,y.next=7;break;case 13:if(e.target.className==="annotationContainer"||!this.isTargetInElement(e.target,".annotationContainer")||this.isTargetInElement(e.target,".markup")){y.next=15;break}return y.abrupt("return");case 15:if(!this.isTargetInElement(e.target,".text-editor-container")){y.next=17;break}return y.abrupt("return");case 17:if(this.isTargetInElement(e.target,".document-container")||this.isTargetInElement(e.target,".compare-document-container")){y.next=19;break}return y.abrupt("return");case 19:if(markupType.includes(r)){y.next=21;break}return y.abrupt("return");case 21:if(u=this.testPoint(e)){y.next=24;break}return y.abrupt("return");case 24:return d=u.x,f=u.y,g=getInitialPoint({x:d,y:f},this.scale),this.startPoint=g,y.next=29,this.isTextAtPoint(g);case 29:m=y.sent,this.selecting=!!m,document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleMouseUp);case 33:case"end":return y.stop()}},n,this)}))}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m,y,v,_;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!this.isTargetInElement(e.target,".redaction-confirm-dialog")&&!this.isTargetInElement(e.target,".mask")){w.next=2;break}return w.abrupt("return");case 2:if((d=this.testPoint(e))&&!document.querySelector(".annotationContainer .outline-container")){w.next=6;break}return(r=this.container)===null||r===void 0||r.classList.remove("text"),w.abrupt("return");case 6:return f=d.x,g=d.y,m=getInitialPoint({x:f,y:g},this.scale),w.next=10,this.isTextAtPoint(m);case 10:if(y=w.sent,!(v=this.startPoint)||v.x!==m.x&&v.y!==m.y){w.next=14;break}return w.abrupt("return");case 14:if(!y){w.next=19;break}(o=this.container)===null||o===void 0||o.classList.add("text"),this.endPoint=m,w.next=21;break;case 19:return(s=this.container)===null||s===void 0||s.classList.remove("text"),w.abrupt("return");case 21:if(this.selecting){w.next=23;break}return w.abrupt("return");case 23:return(u=this.container)===null||u===void 0||u.classList.add("selecting"),w.next=26,this.messageHandler.sendWithPromise("GetCharsRangeAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),start:this.startPoint,end:this.endPoint});case 26:_=w.sent,this._selection=_,this.updateSelection();case 29:case"end":return w.stop()}},n,this)}))}},{key:"handleDobuleClick",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(e.stopPropagation(),e.preventDefault(),(o=this.testPoint(e))&&!document.querySelector(".annotationContainer .outline-container")){m.next=6;break}return(r=this.container)===null||r===void 0||r.classList.remove("text"),m.abrupt("return");case 6:return s=o.x,u=o.y,d=getInitialPoint({x:s,y:u},this.scale),m.next=10,this.isTextAtPoint(d);case 10:if(m.sent){m.next=13;break}return m.abrupt("return");case 13:return m.next=15,this.messageHandler.sendWithPromise("GetSelectionForWordAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),start:d,end:d});case 15:f=m.sent,this._selection=f,this.updateSelection(),this._selection&&this.textContainer&&["redaction","remove"].includes(this.tool)?(g={operate:"add-annot",type:"redact",pageIndex:this.pageIndex,date:new Date,rect:this.rect,rects:this.rects,color:this.color,erasure:this.tool==="remove",quadPoints:this.quadPoints,contents:this._selection.textContent||void 0},this.tool==="redaction"&&(g.fillColor="rgb(0, 0, 0)"),this.eventBus.dispatch("annotationChanged",{type:"add",annotation:g}),this.cleanSelection()):this._selection&&this.textContainer&&this.showTextPopup();case 19:case"end":return m.stop()}},n,this)}))}},{key:"handleMouseUp",value:function(){var e;if(this.selecting&&this._selection&&markupTypeNotNull.includes(this.tool)){var n={operate:"add-annot",type:this.tool,pageIndex:this.pageIndex,date:new Date,opacity:.5,quadPoints:this.quadPoints,rect:this.rect,color:this.color,contents:this._selection.textContent||void 0};this.tool!=="redaction"&&this.tool!=="remove"||(n.type="redact",n.rects=this.rects,n.erasure=this.tool==="remove",this.tool==="redaction"&&(n.fillColor="rgb(0, 0, 0)"),delete n.opacity),this.eventBus.dispatch("annotationChanged",{type:"add",annotation:n}),this.cleanSelection()}this.startPoint=null,this.endPoint=null,this.selecting=!1,(e=this.container)===null||e===void 0||e.classList.remove("selecting"),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleMouseUp),this._selection&&this.textContainer&&this.showTextPopup()}},{key:"updateSelection",value:function(){var e,n=this._selection.textRects;(e=this.textContainer)===null||e===void 0||(e.textContent="");for(var r=[],o=[],s=[],u=[],d=[],f=[],g=0;g<n.length;g++){var m=n[g],y=m.Left,v=m.Top,_=m.Right,w=m.Bottom,x={left:y*this.scale,top:v*this.scale,right:_*this.scale,bottom:w*this.scale};s.push(v),u.push(w),d.push(y),f.push(_);var k={PointX:y,PointY:v},S={PointX:_,PointY:v},M={PointX:y,PointY:w},E={PointX:_,PointY:w};o.push(k,S,M,E),r.push({top:v,left:y,right:_,bottom:w}),this.drawSelection(x)}this.quadPoints=o,this.rects=r;var P=Math.min.apply(Math,s),T=Math.max.apply(Math,u),D=Math.min.apply(Math,d),F=Math.max.apply(Math,f);this.rect={left:D,top:P,right:F,bottom:T}}},{key:"drawSelection",value:function(e){var n,r;this.textContainer||(this.textContainer=document.createElement("div"),this.textContainer.classList.add("text-container"),(n=this.container)===null||n===void 0||n.appendChild(this.textContainer));var o=e.left,s=e.top,u=e.right,d=e.bottom,f=document.createElement("div");f.classList.add("text-selection"),f.style.left="".concat(o,"px"),f.style.top="".concat(s,"px"),f.style.width="".concat(u-o,"px"),f.style.height="".concat(d-s,"px"),(r=this.textContainer)===null||r===void 0||r.appendChild(f)}},{key:"cleanSelection",value:function(){var e;(e=this.textContainer)===null||e===void 0||e.remove(),this.textContainer=null,this._selection=null,this.eventBus.dispatch("showTextPopup",{show:!1})}},{key:"destroy",value:function(){this.cleanSelection(),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleMouseUp),document.removeEventListener("dblclick",this.handleDobuleClick),this.eventBus._off("toolChanged",this.handleTool),this.eventBus._off("toolModeChanged",this.handleToolMode),this.eventBus._off("textPopupClicked",this.handleTextPopup)}},{key:"showTextPopup",value:function(){var e,n,r=this.container.getBoundingClientRect(),o={left:this.rect.left*this.scale+r.left,top:this.rect.top*this.scale+r.top,right:this.rect.right*this.scale+r.left,bottom:this.rect.bottom*this.scale+r.top};this.eventBus.dispatch("showTextPopup",{show:!0,rect:o,text:(e=this._selection)===null||e===void 0?void 0:e.textContent});for(var s=[],u=0;u<this._selection.textRects.length;u++){var d=this._selection.textRects[u],f=d.Left,g=d.Top,m=d.Right,y=d.Bottom;s.push({left:f,top:g,right:m,bottom:y})}var v={selectedText:(n=this._selection)===null||n===void 0?void 0:n.textContent,pageNumber:this.pageIndex+1,textRects:s};this.eventBus.dispatch("textSelected",v)}},{key:"handleTextPopup",value:function(e){var n;if(this._selection){var r=e.tool,o=e.color,s=(n=this._selection)===null||n===void 0?void 0:n.textContent;if(markupTypeNotNull.includes(r)){var u={operate:"add-annot",type:r,pageIndex:this.pageIndex,date:new Date,opacity:.5,quadPoints:this.quadPoints,rect:this.rect,color:o||"#ff0000",contents:s};this.eventBus.dispatch("annotationChanged",{type:"add",annotation:u}),this.cleanSelection(),this.endPoint=null}}}},{key:"isTargetInElement",value:function(e,n){var r=document.querySelector(n);return!(!r||!r.contains(e))}},{key:"isTextAtPoint",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.messageHandler.sendWithPromise("GetCharIndexAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),point:e});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}))}}])}();_TextSelection_pagePtr=new WeakMap,_TextSelection_textPtr=new WeakMap;var TextSearch=function(){return _createClass(function e(n){var r=n.container,o=n.viewport,s=n.scale,u=n.pageIndex,d=n.results;_classCallCheck(this,e),this.searchContainer=null,this.activeIndex=0,this.container=null,this.scale=0,this.pageIndex=0,this._searchResults=[],this.container=r,this.viewport=o,this.scale=s,this.pageIndex=u,this._searchResults=d,d&&d.length&&this.renderSearchResults()},[{key:"searchResults",get:function(){return this._searchResults},set:function(e){this._searchResults=e,this.renderSearchResults()}},{key:"setActiveSearchResult",value:function(e){var n=e.pageNum;e&&(this.searchContainer&&this.searchContainer.querySelectorAll(".searchItems")[e.pageSearchIndex].classList.add("selected"),this.activeIndex=n-1)}},{key:"clearActiveSearchResult",value:function(e){if(this.searchContainer){var n=e.pageSearchIndex;this.searchContainer.querySelectorAll(".searchItems")[n].classList.remove("selected")}}},{key:"renderSearchResults",value:function(){var e=this.scale;if(!this.searchContainer){var n=document.createElement("div");n.className="searchContainer",this.container.appendChild(n),this.searchContainer=n}this.searchContainer.textContent="";for(var r=0;r<this.searchResults.length;r++)if(this.searchResults[r].pageNum===this.pageIndex+1){var o=this.searchResults[r],s=document.createElement("div");s.className="searchItems";for(var u=0;u<o.quads.length;u++){var d=o.quads[u],f=d.left,g=d.top,m={left:f*e,top:g*e,width:d.right*e-f*e,height:d.bottom*e-g*e},y=document.createElement("div");y.className="highlight",y.style.position="absolute",y.style.left="".concat(m.left,"px"),y.style.top="".concat(m.top,"px"),y.style.width="".concat(m.width,"px"),y.style.height="".concat(m.height,"px"),s.appendChild(y)}this.searchContainer.appendChild(s)}}},{key:"destroy",value:function(){this.searchContainer&&(this.searchContainer.parentNode.removeChild(this.searchContainer),this.searchContainer=null)}}])}(),CropPage=function(){return _createClass(function n(r){var o=r.container,s=r.viewport,u=r.scale,d=r.pageIndex,f=r.pagePtr,g=r.eventBus,m=r.messageHandler,y=r.pageViewer,v=r.annotationStore;_classCallCheck(this,n),this.container=o,this.viewport=s,this.scale=u,this.pageIndex=d,this.pagePtr=f.pagePtr,this.eventBus=g,this.messageHandler=m,this.pageViewer=y,this.annotationStore=v,this.startPoint=null,this.endPoint=null,this.listener=null,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.onDrawMousedown=this.handleDrawMouseDown.bind(this),this.onDrawMouseup=this.handleDrawMouseUp.bind(this),this.onDrawMousemove=this.handleDrawMouseMove.bind(this),this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.handlePopup=this.handlePopup.bind(this)},[{key:"init",value:function(){var n=this;this.container.removeEventListener(this.mousedown,this.onDrawMousedown),this.container.addEventListener(this.mousedown,this.onDrawMousedown),setTimeout(function(){n.cropping||(n.container.style.cursor="crosshair"),n.container.style.touchAction="none"}),document.removeEventListener(this.mousemove,this.onDrawMousemove),document.removeEventListener(this.mouseup,this.onDrawMouseup)}},{key:"resetDraw",value:function(){this.startPoint=null,this.endPoint=null,this.container.style.cursor="auto",document.removeEventListener(this.mousemove,this.onDrawMousemove),document.removeEventListener(this.mouseup,this.onDrawMouseup),this.container.removeEventListener(this.mousedown,this.onDrawMousedown)}},{key:"reset",value:function(){this.startPoint=null,this.endPoint=null,this.cropContainer&&this.cropContainer.remove(),this.cropContainer=null,this.container.style.cursor="auto",this.container.style.touchAction="",document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.container.removeEventListener(this.mousedown,this.onDrawMousedown),this.eventBus.dispatch("snipSelected",{rect:null,pageNumber:0}),this.eventBus.dispatch("pageCropped",{rect:null,pageNumber:0}),this.eventBus._off("cropPagePopupClicked",this.handlePopup),this.cropping=!1,this.annotationStore.cropping=!1,document.removeEventListener(this.mousedown,this.listener)}},{key:"getMouseLocation",value:function(n){var r=this.pageViewer.documentViewer.getScrollViewElement(),o=r.scrollLeft||0,s=r.scrollTop||0,u=getClickPoint(n);return{x:u.pageX+o,y:u.pageY+s}}},{key:"handleDrawMouseDown",value:function(n){if(!this.annotationStore.cropping){var r=this.getMouseLocation(n),o=this.pageViewer.documentViewer.windowToPage({x:r.x,y:r.y},this.pageIndex+1),s=o.x,u=o.y;this.startPoint={x:s,y:u},document.addEventListener(this.mousemove,this.onDrawMousemove),document.addEventListener(this.mouseup,this.onDrawMouseup)}}},{key:"handleDrawMouseMove",value:function(n){var r=this.getMouseLocation(n),o=this.pageViewer.documentViewer.windowToPage({x:r.x,y:r.y},this.pageIndex+1),s=o.x,u=o.y,d=this.viewport.viewBox[2],f=this.viewport.viewBox[3];if(s=Math.min(d,s),s=Math.max(0,s),u=Math.min(f,u),u=Math.max(0,u),this.endPoint={x:s,y:u},this.startPoint.x!==this.endPoint.x&&this.startPoint.y!==this.endPoint.y)if(this.cropContainer){var g=this.rectCalc(this.startPoint,this.endPoint),m=this.cropContainer;m.style.top="".concat(g.top,"px"),m.style.left="".concat(g.left,"px"),m.style.width="".concat(Math.abs(g.width-1),"px"),m.style.height="".concat(Math.abs(g.height-1),"px")}else{var y=createElement("div",{position:"absolute",border:"1px solid #1460F3",cursor:"all-scroll",zIndex:2},{class:"crop-box","data-id":"move"});this.cropContainer=y,this.container.append(this.cropContainer)}}},{key:"handleDrawMouseUp",value:function(){var n=this.startPoint,r=this.endPoint;if(this.resetDraw(),!r||n.x===r.x||n.y===r.y)return this.container.style.cursor="crosshair",void this.container.addEventListener(this.mousedown,this.onDrawMousedown);var o={x:Math.min(n.x,r.x),y:Math.min(n.y,r.y)},s={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},u={left:o.x,top:o.y,right:s.x,bottom:s.y};this.rect=u,this.start=o,this.end=s,this.renderCropBox()}},{key:"rectCalc",value:function(n,r){var o=this.viewport.scale,s=(n.y<r.y?n.y:r.y)*o,u=(n.x<r.x?n.x:r.x)*o,d=(n.x>r.x?n.x:r.x)*o,f=(n.y>r.y?n.y:r.y)*o;return{top:s,left:u,right:d,bottom:f,width:d-u,height:f-s}}},{key:"renderCropBox",value:function(){var n=10;this.tl=createElement("div",{position:"absolute",top:"".concat(-5,"px"),left:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"nw-resize"},{class:"handle handle-tl","data-id":"nw-resize"}),this.tm=createElement("div",{position:"absolute",top:"".concat(-5,"px"),left:"50%",transform:"translateX(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"n-resize"},{class:"handle handle-tm","data-id":"n-resize"}),this.tr=createElement("div",{position:"absolute",top:"".concat(-5,"px"),right:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"ne-resize"},{class:"handle handle-tr","data-id":"ne-resize"}),this.mr=createElement("div",{position:"absolute",top:"50%",right:"".concat(-5,"px"),transform:"translateY(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"e-resize"},{class:"handle handle-mr","data-id":"e-resize"}),this.br=createElement("div",{position:"absolute",bottom:"".concat(-5,"px"),right:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"se-resize"},{class:"handle handle-br","data-id":"se-resize"}),this.bm=createElement("div",{position:"absolute",bottom:"".concat(-5,"px"),left:"50%",transform:"translateX(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"s-resize"},{class:"handle handle-bm","data-id":"s-resize"}),this.bl=createElement("div",{position:"absolute",bottom:"".concat(-5,"px"),left:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"sw-resize"},{class:"handle handle-bl","data-id":"sw-resize"}),this.ml=createElement("div",{position:"absolute",top:"50%",left:"".concat(-5,"px"),transform:"translateY(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"w-resize"},{class:"handle handle-ml","data-id":"w-resize"}),this.cropContainer.append(this.tl),this.cropContainer.append(this.tm),this.cropContainer.append(this.tr),this.cropContainer.append(this.mr),this.cropContainer.append(this.br),this.cropContainer.append(this.bm),this.cropContainer.append(this.bl),this.cropContainer.append(this.ml),this.cropContainer.addEventListener(this.mousedown,this.onMousedown),this.showPopup(this.rect),this.eventBus._on("cropPagePopupClicked",this.handlePopup),this.eventBus.dispatch("pageCropped",{rect:this.rect,pageNumber:this.pageIndex+1}),this.cropping=!0,this.annotationStore.cropping=!0,this.listener=onClickOutside([this.cropContainer],this.handleOutside.bind(this))}},{key:"handleMouseDown",value:function(n){var r=n.target.getAttribute("data-id"),o=this.getMouseLocation(n),s=this.pageViewer.documentViewer.windowToPage({x:o.x,y:o.y},this.pageIndex+1),u=s.x,d=s.y;this.startState={operator:r,x:u,y:d},document.addEventListener(this.mousemove,this.onMousemove),document.addEventListener(this.mouseup,this.onMouseup)}},{key:"handleMouseMove",value:function(n){n.type==="touchmove"&&(document.body.style.overscrollBehavior="none");var r=this.getMouseLocation(n),o=this.pageViewer.documentViewer.windowToPage({x:r.x,y:r.y},this.pageIndex+1),s=o.x,u=o.y,d=this.start,f=this.end,g=this.startState,m=this.viewport.viewBox[2],y=this.viewport.viewBox[3];if(g.operator==="nw-resize"){var v=s-(g.x-this.start.x),_=u-(g.y-this.start.y);v=Math.min(f.x-5,v),v=Math.max(0,v),_=Math.min(f.y-5,_),_=Math.max(0,_),this.update({start:{x:v,y:_},end:f})}else if(g.operator==="w-resize"){var w=s-(g.x-this.start.x);w=Math.min(f.x-5,w),w=Math.max(0,w),this.update({start:{x:w,y:d.y},end:f})}else if(g.operator==="sw-resize"){var x=s-(g.x-this.start.x),k=u-(g.y-this.end.y);x=Math.min(f.x-5,x),x=Math.max(0,x),k=Math.min(y,k),k=Math.max(d.y+5,k),this.update({start:{x,y:d.y},end:{x:f.x,y:k}})}else if(g.operator==="s-resize"){var S=u-(g.y-this.end.y);S=Math.min(y,S),S=Math.max(d.y+5,S),this.update({start:d,end:{x:f.x,y:S}})}else if(g.operator==="se-resize"){var M=(g.x,this.end.x),E=(g.y,this.end.y);M=Math.max(d.x+5,s),E=Math.max(d.y+5,u),this.update({start:d,end:{x:M,y:E}})}else if(g.operator==="e-resize"){var P=(g.x,this.end.x);P=Math.max(d.x+5,s),this.update({start:d,end:{x:P,y:f.y}})}else if(g.operator==="ne-resize"){var T=(g.x,this.end.x),D=(g.y,this.start.y);T=Math.max(d.x+5,s),Math.min(f.y-5,u),D=Math.max(0,u),this.update({start:{x:d.x,y:D},end:{x:T,y:f.y}})}else if(g.operator==="n-resize"){var F=(g.y,this.start.y);Math.min(f.y-5,u),F=Math.max(0,u),this.update({start:{x:d.x,y:F},end:f})}else if(g.operator==="move"){var I=s-(g.x-this.start.x),N=u-(g.y-this.start.y),q=s-(g.x-this.end.x),Y=u-(g.y-this.end.y),Z={width:Math.abs(d.x-f.x),height:Math.abs(d.y-f.y)};I<q?(I=Math.max(0,I),I=Math.min(m-Z.width,I),q=Math.max(Z.width,q),q=Math.min(m,q)):(q=Math.max(0,q),q=Math.min(m-Z.width,q),I=Math.max(Z.width,I),I=Math.min(m,I)),N<Y?(N=Math.max(0,N),N=Math.min(y-Z.height,N),Y=Math.max(Z.height,Y),Y=Math.min(y,Y)):(Y=Math.max(0,Y),Y=Math.min(y-Z.height,Y),N=Math.max(Z.height,N),N=Math.min(y,N)),this.update({start:{x:I,y:N},end:{x:q,y:Y}})}}},{key:"handleMouseUp",value:function(n){n.type==="touchend"&&(document.querySelector(".document-container").style.overflow="auto"),document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup);var r=getClickPoint(n),o=r.pageX,s=r.pageY;o!==this.startState.x||s!==this.startState.y?(this.start=this.newStart,this.end=this.newEnd,this.rect={left:this.start.x,top:this.start.y,right:this.end.x,bottom:this.end.y},this.showPopup(this.rect),this.eventBus.dispatch("pageCropped",{rect:this.rect,pageNumber:this.pageIndex+1})):this.showPopup(this.rect)}},{key:"update",value:function(n){var r=n.start,o=n.end,s=this.rectCalc(r,o);this.newStart=r,this.newEnd=o,this.cropContainer.style.top=s.top+"px",this.cropContainer.style.left=s.left+"px",this.cropContainer.style.width=s.width+"px",this.cropContainer.style.height=s.height+"px",this.cropContainer.style.width="".concat(s.width,"px"),this.cropContainer.style.height="".concat(s.height,"px"),this.showPopup({left:r.x,top:r.y,right:o.x,bottom:o.y})}},{key:"showPopup",value:function(n){this.eventBus.dispatch("snipSelected",{rect:n,pageNumber:this.pageIndex+1})}},{key:"handlePopup",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:r==="close"&&(this.reset(),this.init());case 1:case"end":return o.stop()}},n,this)})),function(n){return e.apply(this,arguments)})},{key:"draw",value:function(){document.removeEventListener(this.mousedown,this.listener);var n=this.viewport.scale,r=this.rect,o=r.left,s=r.top,u=r.right,d=r.bottom,f=createElement("div",{position:"absolute",border:"1px solid #1460F3",cursor:"all-scroll",top:"".concat(s*n,"px"),left:"".concat(o*n,"px"),width:"".concat((u-o)*n,"px"),height:"".concat((d-s)*n,"px"),zIndex:2},{class:"crop-box","data-id":"move"});this.cropContainer=f,this.container.append(this.cropContainer),this.renderCropBox()}},{key:"handleOutside",value:function(){this.reset(),this.init()}},{key:"updateInitialProps",value:function(){this.container=this.pageViewer.div,this.viewport=this.pageViewer.viewport,this.scale=this.pageViewer.scale,this.pageIndex=this.pageViewer.pageIndex,this.pagePtr=this.pageViewer.pagesPtr[this.pageViewer.pageIndex].pagePtr,this.eventBus=this.pageViewer.eventBus,this.messageHandler=this.pageViewer.messageHandler,this.annotationStore=this.pageViewer.annotationStore}}]);var e}(),Separation=function(){return _createClass(function e(n){_classCallCheck(this,e),this.iccData=null,this.isClearData=!1,this.latestRequestPoint=null,this.isRequestInProgress=!1,this.colorList=[],this.onMousemove=this.handleMouseMove.bind(this),this.onClick=this.handleClick.bind(this),this.onUpdateCanvas=this.updateCanvas.bind(this),this.documentViewer=n.documentViewer,this.container=n.container,this.pageViewer=n.pageViewer,this.pagePtr=n.pagePtr},[{key:"init",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.initColorsList();case 2:this.documentViewer.eventBus._on("updateSeparationView",this.onUpdateCanvas),document.addEventListener("mousemove",this.onMousemove);case 4:case"end":return n.stop()}},e,this)}))}},{key:"initColorsList",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o,s,u,d,f=this;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return n=this.documentViewer,r=n.messageHandler,o=n.doc,s=n.eventBus,u=n.colorFile,r.sendWithPromise("InitColorList",o),g.next=4,r.sendWithPromise("GetPDFSeparationColor",{pagePtr:this.pagePtr.pagePtr,fileData:u});case 4:return d=g.sent,this.pagePtr.sepColorPtr=d,g.next=8,r.sendWithPromise("GetColorsList",o);case 8:this.colorList=g.sent,s.dispatch("colorSeparationUpdate",this.colorList),!this.documentViewer.colorList.length&&this.colorList.length&&(this.documentViewer.colorList=this.colorList,setTimeout(function(){s.dispatch("colorSeparationAdded",f.colorList)},100));case 11:case"end":return g.stop()}},e,this)}))}},{key:"destroy",value:function(){this.documentViewer.eventBus._off("updateSeparationView",this.onUpdateCanvas),document.removeEventListener("mousemove",this.onMousemove)}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.documentViewer.doc===this.pagePtr.doc){d.next=2;break}return d.abrupt("return");case 2:if(this.testPoint(e)){d.next=7;break}return!this.isClearData&&this.documentViewer.eventBus.dispatch("colorSeparationUpdate",this.colorList),this.isClearData=!0,d.abrupt("return");case 7:if(r=getAbsoluteCoordinate(this.container,e),o=r.x,s=r.y,u=getInitialPoint({x:o,y:s},this.pageViewer.viewport.scale),this.latestRequestPoint=u,!this.isRequestInProgress){d.next=12;break}return d.abrupt("return");case 12:return d.next=14,this.processLatestRequest();case 14:case"end":return d.stop()}},n,this)}))}},{key:"handleClick",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=getAbsoluteCoordinate(this.container,e),o=r.x,s=r.y,getInitialPoint({x:o,y:s},this.pageViewer.viewport.scale);case 2:case"end":return u.stop()}},n,this)}))}},{key:"getSelectPointColor",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.documentViewer.messageHandler.sendWithPromise("GetSelectPointColor",{pagePtr:this.pagePtr.pagePtr,sepColorPtr:this.pagePtr.sepColorPtr,point:e});case 2:if(!(r=u.sent).length){u.next=12;break}return o=this.colorList.map(function(d){return Object.assign({},d)}),s=[],r.forEach(function(d){o[d.Index].intensity=d.ColorIntensity,s.push({name:o[d.Index].name,value:d.ColorIntensity})}),this.documentViewer.eventBus.dispatch("colorSeparationUpdate",o),this.isClearData=!1,u.abrupt("return",s);case 12:return this.isClearData||this.documentViewer.eventBus.dispatch("colorSeparationUpdate",this.colorList),this.isClearData=!0,u.abrupt("return",r);case 15:case"end":return u.stop()}},n,this)}))}},{key:"updateCanvas",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m,y,v,_;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(this.pageViewer.canvas){w.next=2;break}return w.abrupt("return");case 2:return o=window.devicePixelRatio||1,s=this.pageViewer.viewport,u=s.width,d=s.height,f=Math.round(u*o),g=Math.round(d*o),w.next=8,this.documentViewer.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:this.pagePtr.sepColorPtr,width:f,height:g,indexs:e});case 8:if(m=w.sent,y=m.imageArray,v=(r=this.pageViewer.canvas)===null||r===void 0?void 0:r.getContext("2d")){w.next=13;break}return w.abrupt("return");case 13:v.clearRect(0,0,f,g),(_=v.createImageData(f,g)).data.set(y),v.putImageData(_,0,0),this.documentViewer.eventBus.dispatch("redrawMarkups",{pageIndex:this.pageViewer.pageIndex,isRestorePage:!1}),this.documentViewer.eventBus.dispatch("finishUpdateSeparationView");case 19:case"end":return w.stop()}},n,this)}))}},{key:"testPoint",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,s=n.width,u=n.height;return!(r<0||o<0||r>s||o>u)&&{x:r,y:o}}},{key:"processLatestRequest",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n;return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.isRequestInProgress=!0,!(n=this.latestRequestPoint)){r.next=11;break}return r.prev=3,r.next=6,this.getSelectPointColor(n);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),console.error("\u8BF7\u6C42\u51FA\u9519:",r.t0);case 11:this.isRequestInProgress=!1;case 12:case"end":return r.stop()}},e,this,[[3,8]])}))}}])}();function convertFileToBuffer(e){return new Promise(function(n,r){var o=new FileReader;o.onload=function(){var s=new Uint8Array(o.result);n(s)},o.onerror=function(){r(o.error)},o.readAsArrayBuffer(e)})}var MAX_CANVAS_PIXELS=maxCanvasPixels,_previousRotation=new WeakMap,_useThumbnailCanvas=new WeakMap,_PDFPageView_brand=new WeakSet,PDFPageView=function(){return _createClass(function s(u){var d;_classCallCheck(this,s),_classPrivateMethodInitSpec(this,_PDFPageView_brand),_classPrivateFieldInitSpec(this,_previousRotation,null),_classPrivateFieldInitSpec(this,_useThumbnailCanvas,{initialOptionalContent:!0,regularAnnotations:!0}),_defineProperty$1(this,"_activeSearch",null),this.documentViewer=u.documentViewer,this._loadingId=null;var f=u.container,g=u.defaultViewport;this.id=u.id,this.pageIndex=u.pageIndex,this.renderingId="page"+this.id,this.layerProperties=u.layerProperties,this.doc=u.doc,this.messageHandler=u.messageHandler,this.pagesPtr=u.pagesPtr,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.annotationStore=u.annotationStore,this.tool="",this.color="",this.toolMode="",this.enableReply=u.enableReply,this.scale=u.scale||DEFAULT_SCALE,this.viewport=g,this.pdfPageRotate=g.rotation,this.hasRestrictedScaling=!1,this.textLayerMode=(d=u.textLayerMode)!==null&&d!==void 0?d:TextLayerMode.ENABLE,this.imageResourcesPath=u.imageResourcesPath||"",this.useOnlyCssZoom=u.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=!0,this.maxCanvasPixels=u.maxCanvasPixels||MAX_CANVAS_PIXELS,this.pageColors=u.pageColors||null,this.eventBus=u.eventBus,this._annotations=u.annotations,this._annotationsAll=u.annotationsAll,this.pagesPtr=u.pagesPtr,(typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || GENERIC"))&&(this.renderer=u.renderer||RendererType.CANVAS),this.l10n=u.l10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this._renderingState=RenderingStates$1.INITIAL,this.resume=null,this._renderError=null,this._annotationCanvasMap=null,this.annotationLayer=null,this.compdfAnnotationLayer=null,this.annotationEditorLayer=null,this.textSelect=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.contentContainer=null,this.textSelection=null,this.textSearch=null,this.searchResults=null,this.cropPage=null,this.separation=null;var m=document.createElement("div");m.className="page page-number"+this.id,m.setAttribute("data-page-number",this.id),m.setAttribute("role","region"),this.pagePressHandle=this.pagePressHandle.bind(this),m.addEventListener("click",this.pagePressHandle),this.div=m,_assertClassBrand(_PDFPageView_brand,this,_setDimensions).call(this),f==null||f.append(m),this.selected=u.selected,this.$t=u.$t,this.eventBus._on("toolChanged",this.handleTool.bind(this)),this.eventBus._on("toolModeChanged",this.handleToolMode.bind(this)),this.eventBus._on("search",this.handleSearch.bind(this)),this.mode=null,this.contentEditHistoryManager=u.contentEditHistoryManager,f==null||f.style.setProperty("--scale-factor",this.scale*PixelsPerInch.PDF_TO_CSS_UNITS)},[{key:"pagePressHandle",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F,I,N,q;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(d=u.currentTarget,f=this.id,g=this.pageIndex,f&&(m=document.getElementById("sign-image-save"))){if(y=m.getAttribute("src"),v=d.getBoundingClientRect(),_=m.getBoundingClientRect(),w=_.x-v.x,x=_.y-v.y,k=w+m.width,S=x+m.height,M=w/this.scale,E=x/this.scale,P=k/this.scale,T=S/this.scale,D=null,m.inkPath){for(F=[],I=0;I<m.inkPath.length;I++){for(N=[],q=0;q<m.inkPath[I].length;q++)N.push({PointX:m.inkPath[I][q].x/this.scale+M,PointY:E+m.inkPath[I][q].y/this.scale});F.push(N)}D={operate:"add-annot",type:"ink",pageIndex:g,inkPointes:F,rect:{left:M,top:E,right:P,bottom:T},targetPage:f,borderWidth:m.inkParam.width||1,borderColor:m.inkParam.color||"#000",date:new Date,name:v4()}}else D={operate:"add-annot",type:"stamp",stampType:"image",pageIndex:g,imageBase64:y,rect:{left:M,top:E,right:P,bottom:T},targetPage:f,date:new Date,name:v4()};D&&this.eventBus.dispatch("createSignature",D),m.remove(),document.querySelector(".content").onmousemove=null}case 4:case"end":return Y.stop()}},s,this)})),function(s){return o.apply(this,arguments)})},{key:"handleTool",value:function(s){var u=s.tool,d=s.color;this.cropPage&&(u==="cropPage"?this.cropPage.init():this.cropPage.reset()),this.compdfAnnotationLayer||(this.tool=u,this.color=d)}},{key:"handleToolMode",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(d=this.mode,this.mode=u,this.toolMode=u,!this.contentContainer){f.next=10;break}if(u!=="editor"){f.next=9;break}return f.next=7,this.contentContainer.init();case 7:f.next=10;break;case 9:this.contentContainer.destroy();case 10:this.separation&&(d!=="separation"&&u==="separation"?(this.separation.init(),document.querySelector(".document").classList.add("color-separation")):d==="separation"&&u!=="separation"&&(this.separation.destroy(),document.querySelector(".document").classList.remove("color-separation")));case 11:case"end":return f.stop()}},s,this)})),function(s){return r.apply(this,arguments)})},{key:"handleSearch",value:function(s){this.searchResults=s,this.textSearch&&(this.textSearch.searchResults=s)}},{key:"annotations",get:function(){return this._annotations},set:function(s){this._annotations=s,this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.annotations=this.annotations)}},{key:"annotationsAll",get:function(){return this._annotationsAll},set:function(s){this._annotationsAll=s,this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.annotationsAll=this.annotationsAll)}},{key:"renderingState",get:function(){return this._renderingState},set:function(s){var u=this;if(s!==this._renderingState)switch(this._renderingState=s,this._loadingId&&(clearTimeout(this._loadingId),this._loadingId=null),s){case RenderingStates$1.PAUSED:this.div.classList.remove("loading");break;case RenderingStates$1.RUNNING:this.div.classList.add("loadingIcon"),this._loadingId=setTimeout(function(){u.div.classList.add("loading"),u._loadingId=null},0);break;case RenderingStates$1.INITIAL:case RenderingStates$1.FINISHED:this.div.classList.remove("loadingIcon","loading")}}},{key:"selectedText",get:function(){if(!this.textSelection)return null;var s=this.textSelection._selection;return s?s.textContent:null}},{key:"selectedTextQuads",get:function(){var s=this.textSelection;return s&&s._selection?{textQuads:s.rects,rect:s.rect,pageIndex:this.pageIndex}:null}},{key:"setPdfPage",value:function(s){this.pdfPage=s,this.pdfPageRotate=s.rotate;var u=(this.rotation+this.pdfPageRotate)%360;this.viewport=s.getViewport({scale:this.scale*PixelsPerInch.PDF_TO_CSS_UNITS,rotation:u}),_assertClassBrand(_PDFPageView_brand,this,_setDimensions).call(this),this.reset()}},{key:"destroy",value:function(){var s;this.reset(),(s=this.pdfPage)===null||s===void 0||s.cleanup()}},{key:"clearSearchResults",value:function(){this.searchResults=null,this.textSearch&&this.textSearch.destroy()}},{key:"emptyAnnotations",value:function(){this.compdfAnnotationLayer&&this.compdfAnnotationLayer.emptyAnnotations()}},{key:"_renderAnnotationEditorLayer",value:function(){this.annotationEditorLayer.render(this.viewport,"display")}},{key:"selectAnnotation",value:function(s){var u=this;s.name&&(this.annotationStore.toSelectAnnotationName=s.name);var d=this.compdfAnnotationLayer;if(d){var f=d.annotationsArray,g=f.findIndex(function(y){return y.annotation.name===u.annotationStore.toSelectAnnotationName});if(d.selectedElementName){var m=f.findIndex(function(y){return y.annotation.name===d.selectedElementName});m>-1&&d.annotationsArray[m].handleOutside()}g>-1&&(d.annotationsArray[g].selectAnnotation(),this.annotationStore.toSelectAnnotationName=null)}}},{key:"renderPage",value:function(){var s=this;this.renderingState!==RenderingStates$1.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var u=this.div,d=this.viewport,f=this.pdfPage,g=this.annotations,m=this.annotationsAll;if(!f)throw this.renderingState=RenderingStates$1.FINISHED,new Error("pdfPage is not loaded");this.renderingState=RenderingStates$1.RUNNING;var y=document.createElement("div");y.classList.add("canvasWrapper"),u.append(y);var v=document.createElement("canvas");v.setAttribute("role","presentation"),v.hidden=!0;var _=!0;y.append(v),this.canvas=v;var w=window.devicePixelRatio||1;this.radio=w;var x=d.width,k=d.height,S=d.scale,M=Math.round(x*w),E=Math.round(k*w);v.width=M,v.height=E;var P=v.style;P.width=Math.round(x)+"px",P.height=Math.round(k)+"px",this.paintedViewportMap.set(v,d);var T=(this.renderTask=this.internalRenderTask({width:x,height:k,scale:S*w})).promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function D(){var F,I,N,q;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return _&&(v.hidden=!1,_=!1),Y.next=3,s.finishRenderTask();case 3:if(_assertClassBrand(_PDFPageView_brand,s,_renderTextLayer).call(s),s.annotationEditorLayer){Y.next=9;break}if(I=s.layerProperties(),N=I.annotationEditorUIManager,q=I.annotationStorage,N){Y.next=8;break}return Y.abrupt("return");case 8:s.annotationEditorLayer=new PDFAnnotationLayer({uiManager:N,annotationStorage:q,pageIndex:s.pageIndex,pageDiv:u,viewport:s.viewport,scale:s.scale,annotations:g,accessibilityManager:s._accessibilityManager});case 9:if(s._renderAnnotationEditorLayer(),s.compdfAnnotationLayer||(s.compdfAnnotationLayer=new ComPDFAnnotationLayer({annotationStore:s.annotationStore,messageHandler:s.messageHandler,pageViewer:s,annotations:g,annotationsAll:m,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:u,eventBus:s.eventBus,selected:s.selected,enableReply:s.enableReply,$t:s.$t})),s.compdfAnnotationLayer.render(s.viewport),s.contentContainer){Y.next=17;break}s.contentContainer=new ContentContainer({annotationStore:s.annotationStore,pageViewer:s,annotations:g,annotationsAll:m,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:u,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex].pagePtr,messageHandler:s.messageHandler,$t:s.$t,contentEditHistoryManager:s.contentEditHistoryManager}),s.mode==="editor"&&s.contentContainer.init(),Y.next=20;break;case 17:if(s.mode!=="editor"){Y.next=20;break}return Y.next=20,s.contentContainer.render();case 20:s.textSelection||(s.textSelection=new TextSelection({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:u,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s})),s.textSearch||(s.textSearch=new TextSearch({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:u,results:s.searchResults}),s._activeSearch&&s.textSearch.setActiveSearchResult(s._activeSearch)),(F=s.cropPage)!==null&&F!==void 0&&F.cropping&&s.cropPage.draw(),s.cropPage?s.cropPage.updateInitialProps():s.cropPage=new CropPage({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:u,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s,annotationStore:s.annotationStore}),s.tool==="cropPage"&&s.cropPage.init(),s.separation||(s.separation=new Separation({documentViewer:s.documentViewer,container:u,pagePtr:s.pagesPtr[s.pageIndex],pageViewer:s}),s.mode==="separation"&&s.separation.init());case 26:case"end":return Y.stop()}},D)})),function(D){return console.log(D),s.finishRenderTask(D)});return u.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),T}},{key:"internalRenderTask",value:function(s){var u=s.width,d=s.height,f=s.scale,g=this.renderTask;return g&&g.cancel(),g=this.render({width:u,height:d,scale:f})}},{key:"render",value:function(s){var u=this,d=s.width,f=s.height,g=s.scale,m=new PromiseExt;m.cancel=function(){m.reject("Cancel")};var y=this.canvas,v=this.pagesPtr,_=this.pageIndex;return this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:v[_].pagePtr,left:0,top:0,right:Math.round(d),bottom:Math.round(f),scale:g}).then(function(w){var x=y.getContext("2d");if(w&&w.code)return u.eventBus.dispatch("message",{type:"ERROR",message:w.message}),void console.log(w.message);var k=w.imageArray;x.clearRect(0,0,d,f);var S=x.createImageData(d,f);S.data.set(k),x.putImageData(S,0,0),u.baseImageData=S,m.resolve()}).catch(function(w){console.log(w)}),m}},{key:"finishRenderTask",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.renderTask=null,this._renderError=s,this.renderingState=RenderingStates$1.FINISHED,this._resetZoomLayer(!0),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),s)throw s}},{key:"_resetZoomLayer",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.zoomLayer){var u=this.zoomLayer.firstChild;this.paintedViewportMap.delete(u),u.width=0,u.height=0,s&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var s,u,d,f,g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=g.keepZoomLayer,y=m!==void 0&&m,v=g.keepAnnotationLayer,_=v!==void 0&&v,w=g.keepAnnotationEditorLayer,x=w!==void 0&&w,k=g.keepXfaLayer,S=k!==void 0&&k,M=g.keepTextLayer,E=M!==void 0&&M;this.cancelRendering({keepAnnotationLayer:_,keepAnnotationEditorLayer:x,keepXfaLayer:S,keepTextLayer:E}),this.renderingState=RenderingStates$1.INITIAL;for(var P,T=this.div,D=T.childNodes,F=y&&this.zoomLayer||null,I=_&&((s=this.annotationLayer)===null||s===void 0?void 0:s.div)||null,N=x&&((u=this.annotationEditorLayer)===null||u===void 0?void 0:u.div)||null,q=E&&((d=this.textLayer)===null||d===void 0?void 0:d.div)||null,Y=D.length-1;Y>=0;Y--){var Z=D[Y];switch(Z){case F:case q:case I:case N:continue}Z.remove()}T.removeAttribute("data-loaded"),I&&this.annotationLayer.hide(),N?this.annotationEditorLayer.hide():(P=this.annotationEditorLayer)===null||P===void 0||P.destroy(),q&&this.textLayer.hide(),(f=this.structTreeLayer)===null||f===void 0||f.hide(),F||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}},{key:"update",value:function(s){var u,d=s.scale,f=d===void 0?0:d,g=s.rotation,m=g===void 0?null:g,y=s.drawingDelay,v=y===void 0?-1:y;this.scale=f||this.scale,typeof m=="number"&&(this.rotation=m);var _=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*PixelsPerInch.PDF_TO_CSS_UNITS,rotation:_}),_assertClassBrand(_PDFPageView_brand,this,_setDimensions).call(this),(u=this.div.parentNode)===null||u===void 0||u.style.setProperty("--scale-factor",this.viewport.scale);var w=v>=0&&v<1e3;if(this.canvas){if(w||this.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)return w&&this.renderingState!==RenderingStates$1.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:v}),this.renderingState=RenderingStates$1.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!w,hideTextLayer:w}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError}),void this.reset({keepZoomLayer:!1,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}},{key:"cancelRendering",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=s.keepAnnotationLayer,d=u!==void 0&&u,f=s.keepAnnotationEditorLayer,g=f!==void 0&&f,m=s.cancelExtraDelay,y=m===void 0?0:m;this.paintTask&&(this.paintTask.cancel(y),this.paintTask=null),this.resume=null,this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationLayer||d&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.cancel(),this.compdfAnnotationLayer=null),!this.annotationEditorLayer||g&&this.annotationEditorLayer.div||(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.contentContainer&&this.contentContainer.cancel(),this.textSelection&&(this.textSelection.destroy(),this.textSelection=null),this.textSearch&&(this.textSearch.destroy(),this.textSearch=null),this.separation&&(this.separation.destroy(),this.separation=null)}},{key:"cssTransform",value:function(s){var u=s.target,d=s.redrawAnnotationEditorLayer,f=d!==void 0&&d,g=s.redrawTextLayer,m=g!==void 0&&g,y=s.hideTextLayer,v=y!==void 0&&y;if(u instanceof HTMLCanvasElement){if(!u.hasAttribute("zooming")){u.setAttribute("zooming",!0);var _=u.style;_.width=_.height=""}}else{var w=this.div,x=this.viewport,k=x.width,S=x.height;u.style.width=u.parentNode.style.width=w.style.width=Math.floor(k)+"px",u.style.height=u.parentNode.style.height=w.style.height=Math.floor(S)+"px"}var M,E=this.paintedViewportMap.get(u);if(this.viewport!==E){var P=this.viewport.rotation-E.rotation,T=Math.abs(P),D=1,F=1;if(T===90||T===270){var I=this.viewport,N=I.width,q=I.height;D=q/N,F=N/q}T!==0&&(u.style.transform="rotate(".concat(P,"deg) scale(").concat(D,", ").concat(F,")"))}f&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),this.textLayer&&(v?(this.textLayer.hide(),(M=this.structTreeLayer)===null||M===void 0||M.hide()):m&&_assertClassBrand(_PDFPageView_brand,this,_renderTextLayer).call(this))}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}},{key:"getPagePoint",value:function(s,u){return this.viewport.convertToPdfPoint(s,u)}},{key:"addTextEditor",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.contentContainer){y.next=5;break}return d=this.div,f=this.annotationStore,g=this.annotations,m=this.annotationsAll,this.contentContainer=new ContentContainer({annotationStore:f,pageViewer:this,annotations:g,annotationsAll:m,viewport:this.viewport,scale:this.scale,pageIndex:this.pageIndex,pageDiv:d,eventBus:this.eventBus,selected:this.selected,pagePtr:this.pagesPtr[this.pageIndex].pagePtr,rotation:this.pagesPtr[this.pageIndex].rotation,messageHandler:this.messageHandler,$t:this.$t,contentEditHistoryManager:this.contentEditHistoryManager}),y.next=5,this.contentContainer.init();case 5:this.contentContainer.addTextEditor(u);case 6:case"end":return y.stop()}},s,this)})),function(s){return n.apply(this,arguments)})},{key:"getEditAnnotation",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var u,d,f,g;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.contentContainer){m.next=5;break}return u=this.div,d=this.annotationStore,f=this.annotations,g=this.annotationsAll,this.contentContainer=new ContentContainer({annotationStore:d,pageViewer:this,annotations:f,annotationsAll:g,viewport:this.viewport,scale:this.scale,pageIndex:this.pageIndex,pageDiv:u,eventBus:this.eventBus,selected:this.selected,pagePtr:this.pagesPtr[this.pageIndex].pagePtr,rotation:this.pagesPtr[this.pageIndex].rotation,messageHandler:this.messageHandler,$t:this.$t,contentEditHistoryManager:this.contentEditHistoryManager}),m.next=5,this.contentContainer.init();case 5:return m.abrupt("return",this.contentContainer);case 6:case"end":return m.stop()}},s,this)})),function(){return e.apply(this,arguments)})},{key:"draw",value:function(){var s=this;this.renderingState!==RenderingStates$1.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var u=this.div,d=this.pdfPage,f=this.annotations,g=this.annotationsAll;if(!d)return this.renderingState=RenderingStates$1.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates$1.RUNNING;var m=document.createElement("div");m.classList.add("canvasWrapper"),u.append(m);var y=function(){var w=_asyncToGenerator(_regeneratorRuntime().mark(function x(){var k,S=arguments;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(k=S.length>0&&S[0]!==void 0?S[0]:null,v===s.paintTask&&(s.paintTask=null),!(k instanceof pdfExports.RenderingCancelledException)){M.next=5;break}return s._renderError=null,M.abrupt("return");case 5:if(s._renderError=k,s.renderingState=RenderingStates$1.FINISHED,s._resetZoomLayer(!0),_classPrivateFieldGet2(_useThumbnailCanvas,s).regularAnnotations=!v.separateAnnots,s.eventBus.dispatch("pagerendered",{source:s,pageNumber:s.id,cssTransform:!1,timestamp:performance.now(),error:s._renderError}),!k){M.next=12;break}throw k;case 12:case"end":return M.stop()}},x)}));return function(){return w.apply(this,arguments)}}(),v=this.paintOnCanvas(m);v.onRenderContinue=null,this.paintTask=v;var _=v.promise.then(function(){return y(null).then(_asyncToGenerator(_regeneratorRuntime().mark(function w(){var x,k,S,M;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(_assertClassBrand(_PDFPageView_brand,s,_renderTextLayer).call(s),s.annotationEditorLayer){E.next=6;break}if(k=s.layerProperties(),S=k.annotationEditorUIManager,M=k.annotationStorage,S){E.next=5;break}return E.abrupt("return");case 5:s.annotationEditorLayer=new PDFAnnotationLayer({uiManager:S,annotationStorage:M,pageIndex:s.pageIndex,pageDiv:u,viewport:s.viewport,scale:s.scale,annotations:f,accessibilityManager:s._accessibilityManager});case 6:if(s._renderAnnotationEditorLayer(),s.compdfAnnotationLayer?s.compdfAnnotationLayer.destroy():s.compdfAnnotationLayer=new ComPDFAnnotationLayer({documentViewer:s.documentViewer,annotationStore:s.annotationStore,messageHandler:s.messageHandler,pageViewer:s,annotations:f,annotationsAll:g,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:u,eventBus:s.eventBus,selected:s.selected,enableReply:s.enableReply,$t:s.$t}),s.compdfAnnotationLayer.render(s.viewport),s.contentContainer){E.next=14;break}s.contentContainer=new ContentContainer({annotationStore:s.annotationStore,pageViewer:s,annotations:f,annotationsAll:g,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:u,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex].pagePtr,rotation:s.pagesPtr[s.pageIndex].rotation,messageHandler:s.messageHandler,$t:s.$t,contentEditHistoryManager:s.contentEditHistoryManager}),s.mode==="editor"&&s.contentContainer.init(),E.next=17;break;case 14:if(s.mode!=="editor"){E.next=17;break}return E.next=17,s.contentContainer.render();case 17:if(!s.contentContainer||s.contentContainer.pagePtr===s.pagesPtr[s.pageIndex].pagePtr){E.next=21;break}return s.contentContainer.pagePtr=s.pagesPtr[s.pageIndex].pagePtr,E.next=21,s.contentContainer.update();case 21:s.textSelection||(s.textSelection=new TextSelection({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:u,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s})),s.textSearch||(s.textSearch=new TextSearch({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:u,results:s.searchResults}),s._activeSearch&&s.textSearch.setActiveSearchResult(s._activeSearch)),(x=s.cropPage)!==null&&x!==void 0&&x.cropping&&s.cropPage.draw(),s.cropPage?s.cropPage.updateInitialProps():s.cropPage=new CropPage({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:u,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s,annotationStore:s.annotationStore}),s.tool==="cropPage"&&s.cropPage.init();case 26:case"end":return E.stop()}},w)})))},function(w){return y(w)});return u.setAttribute("data-loaded",!0),_}},{key:"paintOnCanvas",value:function(s){var u=this,d=pdfExports.createPromiseCapability(),f={promise:d.promise,onRenderContinue:function(D){D()},cancel:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;T.cancel(D)},get separateAnnots(){return T.separateAnnots}},g=document.createElement("canvas");g.setAttribute("role","presentation"),g.hidden=!0;var m=!0,y=function(){m&&(g.hidden=!1,m=!1)};s.append(g),this.canvas=g;var v=g.getContext("2d"),_=window.devicePixelRatio||1;this.radio=_;var w=this.viewport,x=w.width,k=w.height,S=w.scale,M=Math.round(x*_),E=Math.round(k*_);g.width=M,g.height=E;var P=g.style;P.width=Math.round(x)+"px",P.height=Math.round(k)+"px",this.paintedViewportMap.set(g,w);var T=new PromiseExt;return T.cancel=function(){},T.resolve(),T.promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function D(){var F,I,N;return _regeneratorRuntime().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(F=null,u.separation){q.next=7;break}if(u.separation=new Separation({documentViewer:u.documentViewer,container:u.div,pagePtr:u.pagesPtr[u.pageIndex],pageViewer:u}),q.t0=u.mode==="separation",!q.t0){q.next=7;break}return q.next=7,u.separation.init();case 7:if(u.toolMode!=="separation"||!u.annotationStore.ignoreColors.length){q.next=13;break}return q.next=10,u.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:u.pagesPtr[u.pageIndex].sepColorPtr,x:0,y:0,width:M,height:E,indexs:u.annotationStore.ignoreColors});case 10:F=q.sent,q.next=22;break;case 13:if(!u.documentViewer.renderLayerPermission||!u.documentViewer.layers.length){q.next=19;break}return q.next=16,u.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:u.pagesPtr[u.pageIndex].pagePtr,left:0,top:0,right:Math.round(M),bottom:Math.round(E),scale:S*_,ocgsPtr:_toConsumableArray$1(u.documentViewer.ocgsPtr)});case 16:F=q.sent,q.next=22;break;case 19:return q.next=21,u.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:u.pagesPtr[u.pageIndex].pagePtr,left:0,top:0,right:Math.round(M),bottom:Math.round(E),scale:S*_});case 21:F=q.sent;case 22:if(!F||!F.code){q.next=26;break}return u.eventBus.dispatch("message",{type:"ERROR",message:F.message}),console.log(F.message),q.abrupt("return");case 26:I=F.imageArray,v.clearRect(0,0,M,E),(N=v.createImageData(M,E)).data.set(I),v.putImageData(N,0,0),u.baseImageData=N,y(),d.resolve();case 34:case"end":return q.stop()}},D)})),function(D){console.log(D),D instanceof pdfExports.RenderingCancelledException||y(),d.reject(D)}),f}},{key:"setActiveSearchResult",value:function(s){this._activeSearch=s,this.textSearch&&this.textSearch.setActiveSearchResult(s)}},{key:"clearActiveSearchResult",value:function(s){this._activeSearch=null,this.textSearch&&this.textSearch.clearActiveSearchResult(s)}},{key:"setPageLabel",value:function(s){this.pageLabel=typeof s=="string"?s:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"thumbnailCanvas",get:function(){return this.canvas}},{key:"fontFile",get:function(){return this._fontFile},set:function(s){this._fontFile=s}},{key:"redrawCanvas",value:function(){var s=this;this.renderingState=RenderingStates$1.RUNNING;var u=pdfExports.createPromiseCapability(),d={promise:u.promise,onRenderContinue:function(T){T()},cancel:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;P.cancel(T)},get separateAnnots(){return P.separateAnnots}},f=this.canvas;f.hidden=!0;var g=!0,m=function(){g&&(f.hidden=!1,g=!1)},y=f.getContext("2d"),v=window.devicePixelRatio||1;this.radio=v;var _=this.viewport,w=_.width,x=_.height,k=_.scale,S=Math.round(w*v),M=Math.round(x*v);f.width=S,f.height=M;var E=f.style;E.width=Math.round(w)+"px",E.height=Math.round(x)+"px",this.paintedViewportMap.set(f,_);var P=new PromiseExt;return P.cancel=function(){},P.resolve(),P.promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function T(){var D,F,I;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(D=null,s.toolMode!=="separation"||!s.annotationStore.ignoreColors.length){N.next=7;break}return N.next=4,s.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:s.pagesPtr[s.pageIndex].sepColorPtr,x:0,y:0,width:S,height:M,indexs:s.annotationStore.ignoreColors});case 4:D=N.sent,N.next=16;break;case 7:if(!s.documentViewer.renderLayerPermission||!s.documentViewer.layers.length){N.next=13;break}return N.next=10,s.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:s.pagesPtr[s.pageIndex].pagePtr,left:0,top:0,right:Math.round(S),bottom:Math.round(M),scale:k*v,ocgsPtr:_toConsumableArray$1(s.documentViewer.ocgsPtr)});case 10:D=N.sent,N.next=16;break;case 13:return N.next=15,s.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:s.pagesPtr[s.pageIndex].pagePtr,left:0,top:0,right:Math.round(S),bottom:Math.round(M),scale:k*v});case 15:D=N.sent;case 16:if(!D||!D.code){N.next=20;break}return s.eventBus.dispatch("message",{type:"ERROR",message:D.message}),console.log(D.message),N.abrupt("return");case 20:F=D.imageArray,y.clearRect(0,0,S,M),(I=y.createImageData(S,M)).data.set(F),y.putImageData(I,0,0),s.baseImageData=I,s.eventBus.dispatch("redrawMarkups",{pageIndex:s.pageIndex,isRestorePage:!1}),m(),u.resolve(),s.renderingState=RenderingStates$1.FINISHED;case 30:case"end":return N.stop()}},T)})),function(T){console.log(T),T instanceof pdfExports.RenderingCancelledException||m(),u.reject(T)}),d}}]);var e,n,r,o}();function _setDimensions(){var e=this.viewport;if(this.pdfPage){if(_classPrivateFieldGet2(_previousRotation,this)===e.rotation)return;_classPrivateFieldSet2(_previousRotation,this,e.rotation)}pdfExports.setLayerDimensions(this.div,e,!0,!1)}function _renderTextLayer(){return _renderTextLayer2.apply(this,arguments)}function _renderTextLayer2(){return(_renderTextLayer2=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var n,r,o,s,u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=this.pdfPage,r=this.textLayer,o=this.viewport,r){d.next=3;break}return d.abrupt("return");case 3:return s=null,d.prev=4,r.renderingDone||(u=n.streamTextContent({includeMarkedContent:!0}),r.setTextContentSource(u)),d.next=8,r.render(o);case 8:d.next=16;break;case 10:if(d.prev=10,d.t0=d.catch(4),!(d.t0 instanceof pdfExports.AbortException)){d.next=14;break}return d.abrupt("return");case 14:console.error('#renderTextLayer: "'.concat(d.t0,'".')),s=d.t0;case 16:this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:r.numTextDivs,error:s});case 17:case"end":return d.stop()}},e,this,[[4,10]])}))).apply(this,arguments)}var ContentEditHistoryManager=function(){return _createClass(function u(d){_classCallCheck(this,u),this.messageHandler=d.messageHandler,this.eventBus=d.eventBus,this.pdfViewer=d.pdfViewer,this.undoList=[],this.redoList=[],this.eventBus._on("toolModeChanged",this.handleToolMode.bind(this))},[{key:"canRedo",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function u(d){var f;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d){g.next=2;break}return g.abrupt("return",this.redoList.length>0);case 2:if(d.editPagePtr){g.next=4;break}return g.abrupt("return",!1);case 4:return g.next=6,this.messageHandler.sendWithPromise("CanRedo",d.editPagePtr);case 6:return f=g.sent,g.abrupt("return",!!f);case 8:case"end":return g.stop()}},u,this)})),function(u){return s.apply(this,arguments)})},{key:"canUndo",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(d){var f;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d){g.next=2;break}return g.abrupt("return",this.undoList.length>0);case 2:if(d.editPagePtr){g.next=4;break}return g.abrupt("return",!1);case 4:return g.next=6,this.messageHandler.sendWithPromise("CanUndo",d.editPagePtr);case 6:return f=g.sent,g.abrupt("return",!!f);case 8:case"end":return g.stop()}},u,this)})),function(u){return o.apply(this,arguments)})},{key:"redo",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var d,f;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.redoList.pop()){g.next=4;break}return console.warn("No actions to redo"),g.abrupt("return",!1);case 4:return g.next=6,this.messageHandler.sendWithPromise("Redo",d.editPagePtr);case 6:f=g.sent,this.undoList.push(d),this.updateView(d.pageIndex,f),this.eventBus.dispatch("undoRedoStatusChanged");case 10:case"end":return g.stop()}},u,this)})),function(){return r.apply(this,arguments)})},{key:"undo",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var d,f;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.undoList.pop()){g.next=4;break}return console.warn("No actions to undo"),g.abrupt("return",!1);case 4:return g.next=6,this.messageHandler.sendWithPromise("Undo",d.editPagePtr);case 6:return f=g.sent,g.next=9,this.canRedo(d);case 9:g.sent&&this.redoList.push(d),this.updateView(d.pageIndex,f),this.eventBus.dispatch("undoRedoStatusChanged");case 13:case"end":return g.stop()}},u,this)})),function(){return n.apply(this,arguments)})},{key:"updateView",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function u(d,f){return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.pdfViewer._pages[d].contentContainer.updateFrameEditor(f);case 2:this.eventBus.dispatch("changeOperateList",{undoListLength:this.undoList.length,redoListLength:this.redoList.length});case 3:case"end":return g.stop()}},u,this)})),function(u,d){return e.apply(this,arguments)})},{key:"handleToolMode",value:function(u){u!=="editor"&&(this.undoList.length||this.redoList.length)&&(this.undoList.length=0,this.redoList.length=0)}}]);var e,n,r,o,s}(),DistanceMeasurementCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.drawingPageIndex=-1,this.drawingLayer=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.startLineEle=null,this.endLineEle=null,this.startArrowEle=null,this.endArrowEle=null,this.startPerpendicularLine=null,this.endPerpendicularLine=null,this.annotation=null,this.onClick=this.handleClick.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.handleTool=this.handleTool.bind(this),this.documentViewer=n.documentViewer,this.tool=n.documentViewer.activeTool,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.measureType="distance",this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:1},this.defaultStyles={borderWidth:2,opacity:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],head:"OpenArrow",tail:"OpenArrow",fontName:"Helvetica",fontSize:14,fontStyle:"regular"},this.leaderLineDefaultOptions={leadLength:9,leadOffset:-9,leadExtension:6,labelPosition:"inside"},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.eventBus._on("toolChanged",this.handleTool)},[{key:"handleTool",value:function(e){var n=e.tool;e.color;var r=this.tool;this.tool=n,r==="line"&&this.tool!==r&&this.reset(),this.tool==="line"&&this.documentViewer.toolMode==="measurement"&&this.init()}},{key:"init",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),this.documentViewer.viewerContainer.addEventListener("click",this.onClick),this.documentViewer.viewerContainer.classList.add("annotation-edit")}},{key:"reset",value:function(){this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.startLineEle=null,this.endLineEle=null,this.startArrowEle=null,this.endArrowEle=null,this.startPerpendicularLine=null,this.endPerpendicularLine=null,this.documentViewer.viewerContainer.removeEventListener("click",this.onClick),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mousedown",this.onMousedown),this.documentViewer.viewerContainer.classList.remove("annotation-edit")}},{key:"handleClick",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m,y,v,_,w,x,k,S,M,E,P;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(s=this.getMouseLocation(e),u=this.documentViewer.getSelectedPage(s,s),!((d=u.first-1)<0)){T.next=5;break}return T.abrupt("return");case 5:if(!(this.annotationStore.selectedElementName&&this.drawingPageIndex<0)){T.next=7;break}return T.abrupt("return");case 7:if(f=this.documentViewer.pdfViewer._pages[d].compdfAnnotationLayer,g=getAbsoluteCoordinate(f.pageDiv,e),m=this.documentViewer.windowToPage(s,d+1),!(this.drawingPageIndex<0)){T.next=27;break}return this.drawingPageIndex=d,this.drawingLayer=f,this.drawingLayer.annotationStore.creating=!0,this.realStartPoint={x:g.x,y:g.y},this.oriStartPoint={x:m.x,y:m.y},y=this.oriStartPoint,v={left:y.x,top:y.y,right:y.x+1,bottom:y.y+1},(_=Object.assign(Object.assign({measure:1,operate:"add-annot",type:this.tool,measureType:this.measureType,pageIndex:d,date:new Date,rect:v},this.defaults),this.defaultStyles)).type=="line"&&(w=[y.x,y.y,y.x+1,y.y+1],_.linePoints=w,_=Object.assign(_,this.leaderLineDefaultOptions)),T.next=22,this.documentViewer.annotationManager.createMeasurementAnnotation(_);case 22:return x=T.sent,this.annotation=x[0],document.addEventListener("mousemove",this.onMousemove),this.updateMeasureData(),T.abrupt("return");case 27:if(this.drawingPageIndex=-1,this.drawingLayer.annotationStore.creating=!1,this.realEndPoint={x:g.x,y:g.y},this.oriEndPoint={x:m.x,y:m.y},!this.realEndPoint||((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y){T.next=48;break}if(k=Object.assign({},this.oriStartPoint),S=Object.assign({},this.oriEndPoint),this.oriStartPoint.y===this.oriEndPoint.y||this.oriStartPoint.x===this.oriEndPoint.x?(k.x=Math.min(this.oriEndPoint.x,this.oriStartPoint.x),k.y=Math.min(this.oriEndPoint.y,this.oriStartPoint.y),S.x=Math.max(this.oriEndPoint.x,this.oriStartPoint.x),S.y=Math.max(this.oriEndPoint.y,this.oriStartPoint.y)):this.oriStartPoint.y>this.oriEndPoint.y&&(k=this.oriEndPoint,S=this.oriStartPoint),k){T.next=37;break}return T.abrupt("return");case 37:return M={left:Math.min(k.x,S.x),top:Math.min(k.y,S.y),right:Math.max(k.x,S.x),bottom:Math.max(k.y,S.y)},E=[k.x,k.y,S.x,S.y],P={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:M,linePoints:E,labelPosition:this.annotation.labelPosition,contents:this.annotation.contents},this.annotation.rect=M,this.annotation.linePoints=E,T.next=44,this.documentViewer.annotationManager.editMeasurementAnnotation(P);case 44:return T.next=46,this.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 46:T.next=49;break;case 48:this.documentViewer.deleteAnnotations(this.annotation);case 49:this.annotation=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.startLineEle=null,this.endLineEle=null,this.startArrowEle=null,this.endArrowEle=null,this.startPerpendicularLine=null,this.endPerpendicularLine=null,f.svgElement.innerHTML="",document.removeEventListener("mousemove",this.onMousemove),this.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:this.documentViewer.annotations});case 63:case"end":return T.stop()}},n,this)}))}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!(this.drawingPageIndex<0)){le.next=2;break}return le.abrupt("return");case 2:return s=getAbsoluteCoordinate(this.drawingLayer.pageDiv,e),u=s.x,d=s.y,f=this.drawingLayer.viewport,g=f.width,m=f.height,y=f.scale,u=Math.max(0,Math.min(g,u)),d=Math.max(0,Math.min(m,d)),this.realEndPoint={x:u,y:d},((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&(this.realEndPoint.x+=1),((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y&&(this.realEndPoint.y+=1),v=getInitialPoint({x:u,y:d},y),this.oriEndPoint={x:v.x,y:v.y},_=Object.assign({},this.oriStartPoint),w=Object.assign({},this.oriEndPoint),this.oriStartPoint.y===this.oriEndPoint.y||this.oriStartPoint.x===this.oriEndPoint.x?(_.x=Math.min(this.oriEndPoint.x,this.oriStartPoint.x),_.y=Math.min(this.oriEndPoint.y,this.oriStartPoint.y),w.x=Math.max(this.oriEndPoint.x,this.oriStartPoint.x),w.y=Math.max(this.oriEndPoint.y,this.oriStartPoint.y)):this.oriStartPoint.y>this.oriEndPoint.y&&(_=this.oriEndPoint,w=this.oriStartPoint),x={left:Math.min(_.x,w.x),top:Math.min(_.y,w.y),right:Math.max(_.x,w.x),bottom:Math.max(_.y,w.y)},k=[_.x,_.y,w.x,w.y],S={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:x,linePoints:k},this.annotation.contents&&(S.contents=this.annotation.contents,S.labelPosition=this.annotation.labelPosition),this.annotation.rect=x,this.annotation.linePoints=k,le.next=22,this.documentViewer.annotationManager.editMeasurementAnnotation(S);case 22:return le.next=24,this.getMeasureData();case 24:M=le.sent,this.annotation.measureResult=M,this.annotation.contents=M+this.defaults.scale.translateUnit,this.startLineEle||(this.startLineEle=createSvg("line",{stroke:this.defaultStyles.borderColor,"stroke-width":2*y,"stroke-opacity":.8}),this.endLineEle=createSvg("line",{stroke:this.defaultStyles.borderColor,"stroke-width":2*y,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.endLineEle),this.drawingLayer.svgElement.append(this.startLineEle),this.startArrowEle=this.createArrow(this.realStartPoint,this.realEndPoint,!0),this.endArrowEle=this.createArrow(this.realStartPoint,this.realEndPoint,!1),this.textEle=createSvg("text",{fill:this.defaultStyles.color||this.defaultStyles.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":this.defaultStyles.fontSize+"px"}),this.drawingLayer.svgElement.append(this.textEle)),this.updateArrow(this.startArrowEle,this.realStartPoint,this.realEndPoint,!0),this.updateArrow(this.endArrowEle,this.realStartPoint,this.realEndPoint,!1),E={x:(this.realStartPoint.x+this.realEndPoint.x)/2,y:(this.realStartPoint.y+this.realEndPoint.y)/2},P=Math.atan2(this.realEndPoint.y-this.realStartPoint.y,this.realEndPoint.x-this.realStartPoint.x)/Math.PI*180,T=Math.abs(P)>90?P-180:P,D=Math.abs(P)>90?180-Math.abs(P):P,F=1*Math.abs(D).toFixed(this.decimalPlaces),this.annotation.angle=F,I=this.realEndPoint.x-this.realStartPoint.x,N=this.realEndPoint.y-this.realStartPoint.y,q=Math.sqrt(I*I+N*N),Y=I/q,Z=N/q,j=this.annotation.contents.length*this.annotation.fontSize*.65,ne=q>j?j:q,this.startLineEle.setAttribute("x1","".concat(this.realStartPoint.x)),this.startLineEle.setAttribute("y1","".concat(this.realStartPoint.y)),this.startLineEle.setAttribute("x2","".concat(this.realStartPoint.x+Y*(q/2-ne/2))),this.startLineEle.setAttribute("y2","".concat(this.realStartPoint.y+Z*(q/2-ne/2))),this.endLineEle.setAttribute("x1","".concat(this.realStartPoint.x+Y*(q/2+ne/2))),this.endLineEle.setAttribute("y1","".concat(this.realStartPoint.y+Z*(q/2+ne/2))),this.endLineEle.setAttribute("x2","".concat(this.realEndPoint.x)),this.endLineEle.setAttribute("y2","".concat(this.realEndPoint.y)),this.textEle.setAttribute("x",E.x),this.textEle.setAttribute("y",E.y),this.textEle.setAttribute("transform","rotate(".concat(T," ").concat(E.x," ").concat(E.y,")")),this.textEle.textContent=this.annotation.contents,this.updateMeasureData();case 58:case"end":return le.stop()}},n,this)}))}},{key:"createArrow",value:function(e,n){var r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=this.drawingLayer.viewport.scale,s=new ArrowHelper(e,n),u=r?s.getStartArrow(45,10*o,!1):s.getEndArrow(45,10*o,!1);return u&&(u.setAttribute("stroke","#FF0000"),u.setAttribute("stroke-width","".concat(2*o)),u.setAttribute("fill","none"),u.setAttribute("stroke-opacity","0.8"),this.drawingLayer.svgElement.append(u)),u}},{key:"updateArrow",value:function(e,n,r,o){if(e){var s=new ArrowHelper(n,r),u=o?s.getStartArrowPoints(45,10*this.drawingLayer.viewport.scale):s.getEndArrowPoints(45,10*this.drawingLayer.viewport.scale);if(u&&u.length){var d=u.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" ");e.setAttribute("points",d)}}}},{key:"updatePerpendicularLines",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:12,n=this.realEndPoint.x-this.realStartPoint.x,r=this.realEndPoint.y-this.realStartPoint.y,o=Math.sqrt(n*n+r*r);if(o!==0){var s=-(r/o),u=n/o,d=this.drawingLayer.viewport.scale,f=e*d/2,g={x:this.realStartPoint.x+s*f,y:this.realStartPoint.y+u*f},m={x:this.realStartPoint.x-s*f,y:this.realStartPoint.y-u*f},y={x:this.realEndPoint.x+s*f,y:this.realEndPoint.y+u*f},v={x:this.realEndPoint.x-s*f,y:this.realEndPoint.y-u*f};this.startPerpendicularLine?(this.startPerpendicularLine.setAttribute("x1",g.x),this.startPerpendicularLine.setAttribute("y1",g.y),this.startPerpendicularLine.setAttribute("x2",m.x),this.startPerpendicularLine.setAttribute("y2",m.y)):(this.startPerpendicularLine=createSvg("line",{x1:g.x,y1:g.y,x2:m.x,y2:m.y,stroke:"#FF0000","stroke-width":2*d,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.startPerpendicularLine)),this.endPerpendicularLine?(this.endPerpendicularLine.setAttribute("x1",y.x),this.endPerpendicularLine.setAttribute("y1",y.y),this.endPerpendicularLine.setAttribute("x2",v.x),this.endPerpendicularLine.setAttribute("y2",v.y)):(this.endPerpendicularLine=createSvg("line",{x1:y.x,y1:y.y,x2:v.x,y2:v.y,stroke:"#FF0000","stroke-width":2*d,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.endPerpendicularLine))}}},{key:"destroy",value:function(){this.reset(),this.eventBus._off("toolChanged",this.handleTool)}},{key:"getMouseLocation",value:function(e){var n,r=this.documentViewer.getScrollViewElement(),o=((n=document.querySelector(".document-container"))===null||n===void 0?void 0:n.style.marginLeft)||0;o=parseFloat(o);var s=r.scrollLeft||0,u=r.scrollTop||0,d=getClickPoint(e);return{x:d.pageX+s-o,y:d.pageY+u}}},{key:"getLeaderLineDefaultOptions",value:function(){return this.leaderLineDefaultOptions}},{key:"getMeasureData",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o,s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n=this.annotation,r=n.annotPtr,o=n.rulerPtr,u.next=3,this.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{annotPtr:r,rulerPtr:o});case 3:if((s=u.sent)%1!=0){u.next=8;break}return u.abrupt("return",s);case 8:return u.abrupt("return",s.toFixed(this.decimalPlaces));case 9:case"end":return u.stop()}},e,this)}))}},{key:"updateMeasureData",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(n=0,r=0,!this.annotation.rulerPtr||!this.oriEndPoint){s.next=11;break}return s.next=5,this.documentViewer.messageHandler.sendWithPromise("GetFactor",this.annotation.rulerPtr);case 5:o=s.sent,n=(Math.abs(this.oriEndPoint.x-this.oriStartPoint.x)*o).toFixed(this.decimalPlaces),r=(Math.abs(this.oriEndPoint.y-this.oriStartPoint.y)*o).toFixed(this.decimalPlaces),this.annotation.factor=o,this.annotation.X=n,this.annotation.Y=r;case 11:this.documentViewer.eventBus.dispatch("updateMeasureData",{scale:this.defaults.scale,precision:this.defaults.precision,length:this.annotation.measureResult||0,angle:this.annotation.angle||0,X:n,Y:r});case 12:case"end":return s.stop()}},e,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s=this;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(Object.entries(e).forEach(function(d){var f=_slicedToArray(d,2),g=f[0],m=f[1];Object.entries(s.defaults).forEach(function(y){var v,_=_slicedToArray(y,2),w=_[0],x=_[1];g===w&&x!==m&&(s.defaults[w]=m,w==="precision"&&(s.decimalPlaces=((v=m.toString().split(".")[1])===null||v===void 0?void 0:v.length)||0))})}),!this.annotationStore.selectedElementName){u.next=3;break}return u.abrupt("return");case 3:if(r={scale:this.defaults.scale,precision:this.defaults.precision,length:0,angle:0,X:0,Y:0},!this.annotation){u.next=11;break}return u.next=7,this.getMeasureData();case 7:o=u.sent,this.annotation.measureResult=o,this.annotation.contents=o+this.defaults.scale.translateUnit,r.measureResult=o;case 11:this.documentViewer.eventBus.dispatch("updateMeasureData",r);case 12:case"end":return u.stop()}},n,this)}))}}])}(),AreaMeasurementCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.drawingPageIndex=-1,this.drawingLayer=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.shapeEle=null,this.textEle=null,this.annotation=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.handleTool=this.handleTool.bind(this),this.documentViewer=n.documentViewer,this.tool=n.documentViewer.activeTool,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.measureType="area",this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:1},this.defaultStyles={borderWidth:2,opacity:1,fillTransparency:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fontName:"Helvetica",fontSize:14,fontStyle:"regular",labelPosition:"inside"},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.showPerimeter=!0,this.showArea=!0,this.eventBus._on("toolChanged",this.handleTool)},[{key:"handleTool",value:function(e){var n=e.tool;e.color;var r=this.tool;this.tool=n,r==="rectangle"&&this.tool!==r&&this.reset(),this.tool==="rectangle"&&this.documentViewer.toolMode==="measurement"&&this.init()}},{key:"init",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.addEventListener("mousedown",this.onMousedown),this.documentViewer.viewerContainer.classList.add("annotation-edit")}},{key:"reset",value:function(){this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.shapeEle=null,this.textEle=null,document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),this.documentViewer.viewerContainer.classList.remove("annotation-edit")}},{key:"handleMouseDown",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(e.target.className==="annotationContainer"){y.next=2;break}return y.abrupt("return");case 2:if(r=this.getMouseLocation(e),o=this.documentViewer.getSelectedPage(r,r),!((s=o.first-1)<0)){y.next=7;break}return y.abrupt("return");case 7:if(!(this.annotationStore.selectedElementName&&this.drawingPageIndex<0)){y.next=9;break}return y.abrupt("return");case 9:return u=this.documentViewer.pdfViewer._pages[s].compdfAnnotationLayer,d=getAbsoluteCoordinate(u.pageDiv,e),f=this.documentViewer.windowToPage(r,s+1),this.drawingPageIndex=s,this.drawingLayer=u,this.realStartPoint={x:d.x,y:d.y},this.oriStartPoint={x:f.x,y:f.y},this.oriStartPoint,g=Object.assign(Object.assign({measure:1,operate:"add-annot",type:"polygon",measureType:this.measureType,pageIndex:s,date:new Date},this.defaults),this.defaultStyles),y.next=20,this.documentViewer.annotationManager.createMeasurementAnnotation(g);case 20:m=y.sent,this.annotation=m[0],document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),this.updateMeasureData();case 25:case"end":return y.stop()}},n,this)}))}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D;return _regeneratorRuntime().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(this.drawingPageIndex<0)){F.next=2;break}return F.abrupt("return");case 2:return s=getAbsoluteCoordinate(this.drawingLayer.pageDiv,e),u=s.x,d=s.y,f=this.drawingLayer.viewport,g=f.width,m=f.height,y=f.scale,u=Math.max(0,Math.min(g,u)),d=Math.max(0,Math.min(m,d)),this.realEndPoint={x:u,y:d},((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&(this.realEndPoint.x+=1),((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y&&(this.realEndPoint.y+=1),v=getInitialPoint({x:u,y:d},y),this.oriEndPoint={x:v.x,y:v.y},_=this.oriStartPoint,w=this.oriEndPoint,x={left:Math.min(_.x,w.x),top:Math.min(_.y,w.y),right:Math.max(_.x,w.x),bottom:Math.max(_.y,w.y)},k=this.transformRect(x,this.drawingLayer.viewport),S=[{x:k.left,y:k.top},{x:k.right,y:k.top},{x:k.right,y:k.bottom},{x:k.left,y:k.bottom}],M={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:x,vertices:S},this.annotation.contents&&(M.contents=this.annotation.contents,M.labelPosition=this.annotation.labelPosition),this.annotation.rect=x,this.annotation.vertices=S,F.next=22,this.documentViewer.annotationManager.editMeasurementAnnotation(M);case 22:return F.next=24,this.getMeasureData();case 24:E=[],this.showPerimeter&&E.push(this.annotation.perimeter+this.defaults.scale.translateUnit),this.showArea&&E.push(this.annotation.area+this.defaults.scale.translateUnit+"\xB2"),this.annotation.contents=E.join(`
`),this.shapeEle||(this.shapeEle=createSvg("rect",{fill:"none",stroke:this.defaultStyles.borderColor,"stroke-width":2*y,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.shapeEle)),this.textEle||(this.textEle=createSvg("text",{fill:this.defaultStyles.color||this.defaultStyles.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":this.defaultStyles.fontSize+"px"}),this.drawingLayer.svgElement.append(this.textEle)),P={x:(this.realStartPoint.x+this.realEndPoint.x)/2-this.annotation.borderWidth,y:(this.realStartPoint.y+this.realEndPoint.y)/2-this.annotation.borderWidth},this.shapeEle.setAttribute("x",Math.min(this.realStartPoint.x,this.realEndPoint.x)-this.annotation.borderWidth),this.shapeEle.setAttribute("y",Math.min(this.realStartPoint.y,this.realEndPoint.y)-this.annotation.borderWidth),this.shapeEle.setAttribute("width","".concat(Math.abs(this.realEndPoint.x-this.realStartPoint.x)+2*this.annotation.borderWidth,"px")),this.shapeEle.setAttribute("height","".concat(Math.abs(this.realEndPoint.y-this.realStartPoint.y)+2*this.annotation.borderWidth,"px")),this.textEle.textContent="",this.showPerimeter&&((T=createSvg("tspan",{x:P.x,y:P.y,dy:"0em"})).textContent=this.annotation.perimeter+this.defaults.scale.translateUnit,this.textEle.appendChild(T)),this.showArea&&((D=createSvg("tspan",{x:P.x,y:P.y,dy:"1em"})).textContent=this.annotation.area+this.defaults.scale.translateUnit+"\xB2",this.textEle.appendChild(D)),this.updateMeasureData();case 39:case"end":return F.stop()}},n,this)}))}},{key:"handleMouseUp",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g,m,y,v,_,w,x,k,S,M;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(s=getAbsoluteCoordinate(this.drawingLayer.pageDiv,e),u=s.x,d=s.y,f=this.drawingLayer.viewport,g=f.width,m=f.height,y=f.scale,u=Math.max(0,Math.min(g,u)),d=Math.max(0,Math.min(m,d)),this.realEndPoint={x:u,y:d},this.drawingPageIndex=-1,v=getInitialPoint({x:u,y:d},y),this.oriEndPoint={x:v.x,y:v.y},!this.realEndPoint||((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x||((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y){E.next=30;break}if(_=this.oriStartPoint,w=this.oriEndPoint,_){E.next=13;break}return E.abrupt("return");case 13:return x={left:Math.min(_.x,w.x),top:Math.min(_.y,w.y),right:Math.max(_.x,w.x),bottom:Math.max(_.y,w.y)},k=this.transformRect(x,this.drawingLayer.viewport),S=[{x:k.left,y:k.top},{x:k.right,y:k.top},{x:k.right,y:k.bottom},{x:k.left,y:k.bottom}],M={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:x,vertices:S,labelPosition:this.annotation.labelPosition,contents:this.annotation.contents},this.annotation.rect=x,this.annotation.vertices=S,this.annotation.showPerimeter=this.showPerimeter,this.annotation.showArea=this.showArea,E.next=23,this.documentViewer.messageHandler.sendWithPromise("GetFactor",this.annotation.rulerPtr);case 23:return this.annotation.factor=E.sent,E.next=26,this.documentViewer.annotationManager.editMeasurementAnnotation(M);case 26:return E.next=28,this.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 28:E.next=31;break;case 30:this.documentViewer.deleteAnnotations(this.annotation);case 31:this.annotation=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.shapeEle=null,this.textEle=null,this.drawingLayer.svgElement.innerHTML="",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),this.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:this.documentViewer.annotations});case 42:case"end":return E.stop()}},n,this)}))}},{key:"destroy",value:function(){this.reset(),this.eventBus._off("toolChanged",this.handleTool)}},{key:"getMouseLocation",value:function(e){var n,r=this.documentViewer.getScrollViewElement(),o=((n=document.querySelector(".document-container"))===null||n===void 0?void 0:n.style.marginLeft)||0;o=parseFloat(o);var s=r.scrollLeft||0,u=r.scrollTop||0,d=getClickPoint(e);return{x:d.pageX+s-o,y:d.pageY+u}}},{key:"getMeasureData",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o,s,u=this;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return n=this.annotation.rulerPtr,d.next=3,this.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{rulerPtr:n,captionType:"area"});case 3:return r=d.sent,d.next=6,this.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{rulerPtr:n,captionType:"length"});case 6:o=d.sent,s=function(f){return f%1==0?f:Number(f.toFixed(u.decimalPlaces))},this.annotation.area=s(r),this.annotation.perimeter=s(o);case 10:case"end":return d.stop()}},e,this)}))}},{key:"updateMeasureData",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.documentViewer.eventBus.dispatch("updateMeasureData",{scale:this.defaults.scale,precision:this.defaults.precision,perimeter:this.annotation.perimeter||0,area:this.annotation.area||0});case 1:case"end":return n.stop()}},e,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f=this;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(e.showPerimeter===void 0&&e.showArea===void 0||(this.showPerimeter=(r=e.showPerimeter)!==null&&r!==void 0?r:this.showPerimeter,this.showArea=(o=e.showArea)!==null&&o!==void 0?o:this.showArea),Object.entries(e).forEach(function(m){var y=_slicedToArray(m,2),v=y[0],_=y[1];Object.entries(f.defaults).forEach(function(w){var x,k=_slicedToArray(w,2),S=k[0],M=k[1];v!==S||M===_||["showPerimeter","showArea"].includes(v)||(f.defaults[S]=_,S==="precision"&&(f.decimalPlaces=((x=_.toString().split(".")[1])===null||x===void 0?void 0:x.length)||0))})}),!this.annotationStore.selectedElementName){g.next=4;break}return g.abrupt("return");case 4:if(s={scale:this.defaults.scale,precision:this.defaults.precision,perimeter:0,area:0},!this.annotation){g.next=17;break}return g.next=8,this.getMeasureData();case 8:if(u=[],this.showPerimeter&&u.push(this.annotation.perimeter+this.defaults.scale.translateUnit),this.showArea&&u.push(this.annotation.area+this.defaults.scale.translateUnit+"\xB2"),this.annotation.contents=u.join(`
`),!this.annotation.rulerPtr||!this.oriEndPoint){g.next=17;break}return g.next=15,this.documentViewer.messageHandler.sendWithPromise("GetFactor",this.annotation.rulerPtr);case 15:d=g.sent,this.annotation.factor=d;case 17:this.documentViewer.eventBus.dispatch("updateMeasureData",s);case 18:case"end":return g.stop()}},n,this)}))}},{key:"transformRect",value:function(e,n){var r=n.viewBox,o=n.rotation,s=r[2],u=r[3],d=o*Math.PI/180,f=s/2,g=u/2,m=e.left,y=e.top,v=e.right,_=e.bottom,w=Math.cos(d),x=Math.sin(d),k=function(E,P){return{x:w*(E-f)-x*(P-g)+f,y:x*(E-f)+w*(P-g)+g}},S=k(m,y),M=k(v,_);return{left:S.x,top:u-S.y,right:M.x,bottom:u-M.y}}}])}(),DEFAULT_CACHE_SIZE=3,ENABLE_PERMISSIONS_CLASS="enablePermissions",PagesCountLimit={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function isValidAnnotationEditorMode(e){return Object.values(pdfExports.AnnotationEditorType).includes(e)&&e!==pdfExports.AnnotationEditorType.DISABLE}var _buf=new WeakMap,_size=new WeakMap,_PDFPageViewBuffer_brand=new WeakSet,PDFPageViewBuffer=function(){return _createClass(function e(n){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFPageViewBuffer_brand),_classPrivateFieldInitSpec(this,_buf,new Set),_classPrivateFieldInitSpec(this,_size,0),_classPrivateFieldSet2(_size,this,n)},[{key:"push",value:function(e){var n=_classPrivateFieldGet2(_buf,this);n.has(e)&&n.delete(e),n.add(e),n.size>_classPrivateFieldGet2(_size,this)&&_assertClassBrand(_PDFPageViewBuffer_brand,this,_destroyFirstView).call(this)}},{key:"resize",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_classPrivateFieldSet2(_size,this,e);var r=_classPrivateFieldGet2(_buf,this);if(n){var o,s=r.size,u=1,d=_createForOfIteratorHelper(r);try{for(d.s();!(o=d.n()).done;){var f=o.value;if(n.has(f.id)&&(r.delete(f),r.add(f)),++u>s)break}}catch(g){d.e(g)}finally{d.f()}}for(;r.size>_classPrivateFieldGet2(_size,this);)_assertClassBrand(_PDFPageViewBuffer_brand,this,_destroyFirstView).call(this)}},{key:"has",value:function(e){return _classPrivateFieldGet2(_buf,this).has(e)}},{key:Symbol.iterator,value:function(){return _classPrivateFieldGet2(_buf,this).keys()}}])}();function _destroyFirstView(){var e=_classPrivateFieldGet2(_buf,this).keys().next().value;e==null||e.destroy(),_classPrivateFieldGet2(_buf,this).delete(e)}var _buffer=new WeakMap,_enablePermissions=new WeakMap,_scrollModePageState=new WeakMap,_onVisibilityChange=new WeakMap,_scaleTimeoutId=new WeakMap,_renderedPagesView=new WeakMap,_rendering=new WeakMap,_cacheTask=new WeakMap,_PDFViewer_brand=new WeakSet,PDFViewer=function(){return _createClass(function o(s){var u,d,f,g,m;if(_classCallCheck(this,o),_classPrivateMethodInitSpec(this,_PDFViewer_brand),_classPrivateFieldInitSpec(this,_buffer,null),_classPrivateFieldInitSpec(this,_enablePermissions,!1),_classPrivateFieldInitSpec(this,_scrollModePageState,null),_classPrivateFieldInitSpec(this,_onVisibilityChange,null),_classPrivateFieldInitSpec(this,_scaleTimeoutId,null),_classPrivateFieldInitSpec(this,_renderedPagesView,[]),_classPrivateFieldInitSpec(this,_rendering,!1),_classPrivateFieldInitSpec(this,_cacheTask,[]),this.documentViewer=s.documentViewer,this.eventBus=s.eventBus,this._annotationEditorUIManager=null,this.container=s.container,this.viewer=s.viewer||s.container.firstElementChild,this.annotationStore=s.annotationStore,this.messageHandler=s.messageHandler,this.exitPresentationMode=!1,((u=this.container)===null||u===void 0?void 0:u.tagName)!=="DIV"||((d=this.viewer)===null||d===void 0?void 0:d.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");this.linkService=s.linkService,this.removePageBorders=!1,this.textLayerMode=(f=s.textLayerMode)!==null&&f!==void 0?f:TextLayerMode.ENABLE,this._annotationEditorMode=(g=s.annotationEditorMode)!==null&&g!==void 0?g:pdfExports.AnnotationEditorType.NONE,this.imageResourcesPath=s.imageResourcesPath||"",this.enablePrintAutoRotate=s.enablePrintAutoRotate||!1,this.renderer=s.renderer||RendererType.CANVAS,this.useOnlyCssZoom=s.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=(m=s.isOffscreenCanvasSupported)===null||m===void 0||m,this.maxCanvasPixels=maxCanvasPixels,_classPrivateFieldSet2(_enablePermissions,this,s.enablePermissions||!1),this.pageColors=s.pageColors||null,this.$t=s.$t,this.doc=s.doc,this.messageHandler=s.messageHandler,this._fontFile=null,this.contentEditHistoryManager=null,this.distanceMeasurementCreateTool=null,this.areaMeasurementCreateTool=null,!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.renderingQueue=s.renderingQueue,this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")},[{key:"pagesCount",get:function(){return this._pages.length}},{key:"getPageView",value:function(o){return this._pages[o]}},{key:"pageViewsReady",get:function(){return!!this._pagesCapability.settled&&this._pages.every(function(o){return o==null?void 0:o.pdfPage})}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(o){if(!Number.isInteger(o))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(o,!0)||console.error('currentPageNumber: "'.concat(o,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function(o){var s,u,d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this._currentPageNumber===o)return d&&this._resetCurrentPageView(),!0;if(!(0<o&&o<=this.pagesCount))return!1;var f=this._currentPageNumber;return this._currentPageNumber=o,this.eventBus.dispatch("onPageNumberUpdated",{source:this,pageNumber:o,pageLabel:(s=(u=this._pageLabels)===null||u===void 0?void 0:u[o-1])!==null&&s!==void 0?s:null,previous:f}),d&&this._resetCurrentPageView(),!0}},{key:"currentPageLabel",get:function(){var o,s;return(o=(s=this._pageLabels)===null||s===void 0?void 0:s[this._currentPageNumber-1])!==null&&o!==void 0?o:null},set:function(o){if(this.pdfDocument){var s=0|o;if(this._pageLabels){var u=this._pageLabels.indexOf(o);u>=0&&(s=u+1)}this._setCurrentPageNumber(s,!0)||console.error('currentPageLabel: "'.concat(o,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return this._currentScale!==UNKNOWN_SCALE?this._currentScale:DEFAULT_SCALE},set:function(o){if(isNaN(o))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(o,{noScroll:!1})}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(o){this.pdfDocument&&this._setScale(o,{noScroll:!1,drawingDelay:400})}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(o){if(!isValidRotation(o))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&((o%=360)<0&&(o+=360),this._pagesRotation!==o)){this._pagesRotation=o;var s=this._currentPageNumber;this.refresh(!0,{rotation:o}),this._currentScaleValue&&this._setScale(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:o,pageNumber:s})}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"setDocument",value:function(o,s,u,d){var f=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this._annotationEditorUIManager&&(this._annotationEditorUIManager.destroy(),this._annotationEditorUIManager=null)),this.pdfDocument=o,o){var g=o.numPages,m=o.getPage(1),y=o.getOptionalContentConfig(),v=_classPrivateFieldGet2(_enablePermissions,this)?o.getPermissions():Promise.resolve();if(g>PagesCountLimit.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var _=this._scrollMode=ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:_})}this._pagesCapability.promise.then(function(){f.eventBus.dispatch("pagesloaded",{source:f,pagesCount:g})},function(){}),this._onBeforeDraw=function(w){f._pages[w.pageNumber-1]},this._onAfterDraw=function(w){w.cssTransform||f._onePageRenderedCapability.settled||(f._onePageRenderedCapability.resolve({timestamp:w.timestamp}),f.eventBus._off("pagerendered",f._onAfterDraw),f._onAfterDraw=null,_classPrivateFieldGet2(_onVisibilityChange,f)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,f)),_classPrivateFieldSet2(_onVisibilityChange,f,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([m,v]).then(function(w){var x=_slicedToArray(w,2),k=x[0],S=x[1];if(o===f.pdfDocument){f._firstPageCapability.resolve(k),f._optionalContentConfigPromise=y;var M=_assertClassBrand(_PDFViewer_brand,f,_initializePermissions).call(f,S),E=M.annotationEditorMode,P=M.textLayerMode;if(E!==pdfExports.AnnotationEditorType.DISABLE){var T=E;o.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):isValidAnnotationEditorMode(T)?(f._annotationEditorUIManager=new pdfExports.AnnotationEditorUIManager(f.container,f.eventBus,o==null?void 0:o.annotationStorage),T!==pdfExports.AnnotationEditorType.NONE&&f._annotationEditorUIManager.updateMode(T)):console.error("Invalid AnnotationEditor mode: ".concat(T))}var D=_assertClassBrand(_PDFViewer_brand,f,_layerProperties).bind(f),F=f._scrollMode===ScrollMode.PAGE?null:f.viewer,I=f.currentScale,N=k.getViewport({scale:I*PixelsPerInch.PDF_TO_CSS_UNITS});N.rotation!==0&&(N.rotation=0),f.viewer.style.setProperty("--scale-factor",N.scale),f.contentEditHistoryManager=new ContentEditHistoryManager({messageHandler:f.messageHandler,eventBus:f.eventBus,pdfViewer:f}),f.distanceMeasurementCreateTool=new DistanceMeasurementCreateTool({documentViewer:f.documentViewer,annotationStore:f.annotationStore}),f.areaMeasurementCreateTool=new AreaMeasurementCreateTool({documentViewer:f.documentViewer,annotationStore:f.annotationStore});for(var q=1;q<=g;++q){var Y=q-1,Z=new PDFPageView(_defineProperty$1(_defineProperty$1(_defineProperty$1({documentViewer:f.documentViewer,container:F,eventBus:f.eventBus,id:q,pageIndex:Y,scale:I,messageHandler:f.messageHandler,annotationStore:f.annotationStore,annotations:s&&s[Y]||null,annotationsAll:s,pagesPtr:u,defaultViewport:N.clone(),optionalContentConfigPromise:y,renderingQueue:f.renderingQueue,textLayerMode:P,imageResourcesPath:f.imageResourcesPath,renderer:typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || GENERIC")?f.renderer:null,useOnlyCssZoom:f.useOnlyCssZoom,isOffscreenCanvasSupported:f.isOffscreenCanvasSupported,maxCanvasPixels:f.maxCanvasPixels,pageColors:f.pageColors,layerProperties:D,l10n:f.l10n,$t:f.$t,doc:f.doc},"messageHandler",f.messageHandler),"contentEditHistoryManager",f.contentEditHistoryManager),"enableReply",d));f._pages.push(Z)}var j=f._pages[0];j&&(j.setPdfPage(k),f.linkService.cachePageRef(1,k.ref)),f._scrollMode===ScrollMode.PAGE?_assertClassBrand(_PDFViewer_brand,f,_ensurePageViewVisible).call(f):f._spreadMode!==SpreadMode.NONE&&f._updateSpreadMode(),_assertClassBrand(_PDFViewer_brand,f,_onePageRenderedOrForceFetch).call(f).then(_asyncToGenerator(_regeneratorRuntime().mark(function ne(){var le,J,O;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(f._annotationEditorUIManager&&f.eventBus.dispatch("annotationeditormodechanged",{source:f,mode:f._annotationEditorMode}),!(o.loadingParams.disableAutoFetch||g>PagesCountLimit.FORCE_LAZY_PAGE_INIT)){U.next=4;break}return f._pagesCapability.resolve(),U.abrupt("return");case 4:if(!((le=g-1)<=0)){U.next=8;break}return f._pagesCapability.resolve(),U.abrupt("return");case 8:J=_regeneratorRuntime().mark(function W(H){var X;return _regeneratorRuntime().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(X=o.getPage(H).then(function(fe){var Se=f._pages[H-1];Se.pdfPage||Se.setPdfPage(fe),f.linkService.cachePageRef(H,fe.ref),--le==0&&f._pagesCapability.resolve()},function(fe){console.error("Unable to get page ".concat(H," to initialize viewer"),fe),--le==0&&f._pagesCapability.resolve()}),H%PagesCountLimit.PAUSE_EAGER_PAGE_INIT!=0){Q.next=4;break}return Q.next=4,X;case 4:case"end":return Q.stop()}},W)}),O=2;case 10:if(!(O<=g)){U.next=15;break}return U.delegateYield(J(O),"t0",12);case 12:++O,U.next=10;break;case 15:case"end":return U.stop()}},ne)}))),f.eventBus.dispatch("pagesinit",{source:f}),o.getMetadata().then(function(ne){var le=ne.info;o===f.pdfDocument&&le.Language&&(f.viewer.lang=le.Language)})}}).catch(function(w){console.error("Unable to initialize viewer",w),f._pagesCapability.reject(w)})}}},{key:"setPageLabels",value:function(o){if(this.pdfDocument){o?Array.isArray(o)&&this.pdfDocument.numPages===o.length?this._pageLabels=o:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var s=0,u=this._pages.length;s<u;s++){var d,f;this._pages[s].setPageLabel((d=(f=this._pageLabels)===null||f===void 0?void 0:f[s])!==null&&d!==void 0?d:null)}}}},{key:"renderAnnotation",value:function(o,s){var u=this._pages[o.pageIndex];u&&u.compdfAnnotationLayer&&(u.textSelection&&u.textSelection.cleanSelection(),u.compdfAnnotationLayer.renderAnnotation(o,s))}},{key:"deleteAnnotations",value:function(o){for(var s=Array.isArray(o)?o:[o],u=0;u<s.length;u++){var d=s[u],f=d.pageIndex,g=this._pages[f];g&&g.compdfAnnotationLayer&&g.compdfAnnotationLayer.deleteAnnotation(d)}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_classPrivateFieldSet2(_buffer,this,new PDFPageViewBuffer(DEFAULT_CACHE_SIZE)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=pdfExports.createPromiseCapability(),this._onePageRenderedCapability=pdfExports.createPromiseCapability(),this._pagesCapability=pdfExports.createPromiseCapability(),this._scrollMode=ScrollMode.VERTICAL,this._previousScrollMode=ScrollMode.UNKNOWN,this._spreadMode=SpreadMode.NONE,this.contentEditHistoryManager=null,_classPrivateFieldSet2(_scrollModePageState,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),_classPrivateFieldGet2(_onVisibilityChange,this)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,this)),_classPrivateFieldSet2(_onVisibilityChange,this,null)),this.distanceMeasurementCreateTool&&(this.distanceMeasurementCreateTool.destroy(),this.distanceMeasurementCreateTool=null),this.areaMeasurementCreateTool&&(this.areaMeasurementCreateTool.destroy(),this.areaMeasurementCreateTool=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(ENABLE_PERMISSIONS_CLASS)}},{key:"_scrollUpdate",value:function(){this.pagesCount!==0&&this.update()}},{key:"_scrollIntoView",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(o){var u=o.div,d=o.id;if(this._currentPageNumber!==d&&this._setCurrentPageNumber(d),this._scrollMode===ScrollMode.PAGE&&(_assertClassBrand(_PDFViewer_brand,this,_ensurePageViewVisible).call(this),this.update()),!s&&!this.isInPresentationMode){var f=u.offsetLeft+u.clientLeft,g=f+u.clientWidth,m=this.container,y=m.scrollLeft,v=m.clientWidth;(this._scrollMode===ScrollMode.HORIZONTAL||f<y||g>y+v)&&(s={left:0,top:0})}scrollIntoView(u,s),!this._currentScaleValue&&this._location&&(this._location=null)}}},{key:"_setScaleUpdatePages",value:function(o,s,u){var d=this,f=u.noScroll,g=f!==void 0&&f,m=u.preset,y=m!==void 0&&m,v=u.drawingDelay,_=v===void 0?-1:v;if(this._currentScaleValue=s.toString(),_assertClassBrand(_PDFViewer_brand,this,_isSameScale).call(this,o))y&&this.eventBus.dispatch("scalechanging",{source:this,scale:o,presetValue:s});else{this.viewer.style.setProperty("--scale-factor",o*PixelsPerInch.PDF_TO_CSS_UNITS);var w=_>=0&&_<1e3;if(this.refresh(!0,{scale:o,drawingDelay:w?_:-1}),w&&_classPrivateFieldSet2(_scaleTimeoutId,this,setTimeout(function(){_classPrivateFieldSet2(_scaleTimeoutId,d,null),d.refresh(),d.exitPresentationMode=!1},_)),this._currentScale=o,!g){var x,k=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(k=this._location.pageNumber,x=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:k,destArray:x,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:o,presetValue:y?s:void 0})}}},{key:"_pageWidthScaleFactor",get:function(){return this._spreadMode!==SpreadMode.NONE&&this._scrollMode!==ScrollMode.HORIZONTAL?2:1}},{key:"_setScale",value:function(o,s){var u=parseFloat(o);if(u>0)s.preset=!1,this._setScaleUpdatePages(u,o,s);else{var d=this._pages[this._currentPageNumber-1];if(!d)return;var f=SCROLLBAR_PADDING,g=VERTICAL_PADDING;if(this.isInPresentationMode)f=g=4,this._spreadMode!==SpreadMode.NONE&&(f*=2);else if(this.removePageBorders)f=g=0;else if(this._scrollMode===ScrollMode.HORIZONTAL){var m=[g,f];f=m[0],g=m[1]}var y=(this.container.clientWidth-f)/d.width*d.scale/this._pageWidthScaleFactor,v=(this.container.clientHeight-g)/d.height*d.scale;switch(o){case"page-actual":u=1;break;case"page-width":u=y;break;case"page-height":u=v;break;case"page-fit":u=Math.min(y,v);break;case"auto":var _=isPortraitOrientation(d)?y:Math.min(v,y);u=Math.min(MAX_AUTO_SCALE,_);break;default:return void console.error('_setScale: "'.concat(o,'" is an unknown zoom value.'))}s.preset=!0,this._setScaleUpdatePages(u,o,s)}}},{key:"_resetCurrentPageView",value:function(){var o=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._scrollIntoView(o)}},{key:"pageLabelToPageNumber",value:function(o){if(!this._pageLabels)return null;var s=this._pageLabels.indexOf(o);return s<0?null:s+1}},{key:"scrollPageIntoView",value:function(o){var s=o.pageNumber,u=o.destArray,d=u===void 0?null:u,f=o.allowNegativeOffset,g=f!==void 0&&f,m=o.ignoreDestinationZoom,y=m!==void 0&&m;if(this.pdfDocument&&(!this._pages||this._pages.length)){var v=Number.isInteger(s)&&this._pages[s-1];if(v)if(!this.isInPresentationMode&&d){var _,w,x=0,k=0,S=0,M=0,E=v.rotation%180!=0,P=(E?v.height:v.width)/v.scale/PixelsPerInch.PDF_TO_CSS_UNITS,T=(E?v.width:v.height)/v.scale/PixelsPerInch.PDF_TO_CSS_UNITS,D=0;switch(d[1].name){case"XYZ":x=d[2],k=d[3],D=d[4],x=x!==null?x:0,k=k!==null?k:T;break;case"Fit":case"FitB":D="page-fit";break;case"FitH":case"FitBH":D="page-width",(k=d[2])===null&&this._location?(x=this._location.left,k=this._location.top):(typeof k!="number"||k<0)&&(k=T);break;case"FitV":case"FitBV":x=d[2],S=P,M=T,D="page-height";break;case"FitR":x=d[2],k=d[3],S=d[4]-x,M=d[5]-k;var F=this.removePageBorders?0:SCROLLBAR_PADDING,I=this.removePageBorders?0:VERTICAL_PADDING;_=(this.container.clientWidth-F)/S/PixelsPerInch.PDF_TO_CSS_UNITS,w=(this.container.clientHeight-I)/M/PixelsPerInch.PDF_TO_CSS_UNITS,D=Math.min(Math.abs(_),Math.abs(w));break;default:return void console.error('scrollPageIntoView: "'.concat(d[1].name,'" is not a valid destination type.'))}if(y||(D&&D!==this._currentScale?this.currentScaleValue=D:this._currentScale===UNKNOWN_SCALE&&(this.currentScaleValue=DEFAULT_SCALE_VALUE)),D!=="page-fit"||d[4]){var N=[v.viewport.convertToViewportPoint(x,k),v.viewport.convertToViewportPoint(x+S,k+M)],q=Math.min(N[0][0],N[1][0]),Y=Math.min(N[0][1],N[1][1]);g||(q=Math.max(q,0),Y=Math.max(Y,0)),this._scrollIntoView(v,{left:q,top:Y})}else this._scrollIntoView(v)}else this._setCurrentPageNumber(s,!0);else console.error('scrollPageIntoView: "'.concat(s,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(o){var s=this._currentScale,u=this._currentScaleValue,d=parseFloat(u)===s?Math.round(1e4*s)/100:u,f=o.id,g=this._pages[f-1],m=this.container,y=g.getPagePoint(m.scrollLeft-o.x,m.scrollTop-o.y),v=Math.round(y[0]),_=Math.round(y[1]),w="#page=".concat(f);this.isInPresentationMode||(w+="&zoom=".concat(d,",").concat(v,",").concat(_)),this._location={pageNumber:f,scale:d,top:_,left:v,rotation:this._pagesRotation,pdfOpenParams:w}}},{key:"cleanupPages",value:function(){var o=this._getVisiblePages(),s=o.views;if(s.length!==0){for(var u=0;u<_classPrivateFieldGet2(_renderedPagesView,this).length;u++){var d=_classPrivateFieldGet2(_renderedPagesView,this)[u];o.ids.has(d.id)||d.destroy()}var f,g=this._spreadMode===SpreadMode.NONE&&(this._scrollMode===ScrollMode.PAGE||this._scrollMode===ScrollMode.VERTICAL),m=this._currentPageNumber,y=!1,v=_createForOfIteratorHelper(s);try{for(v.s();!(f=v.n()).done;){var _=f.value;if(_.percent<100)break;if(_.id===m&&g){y=!0;break}}}catch(w){v.e(w)}finally{v.f()}this._setCurrentPageNumber(y?m:s[0].id),this._updateLocation(o.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"update",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var s,u;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(_classPrivateFieldGet2(_scaleTimeoutId,this)===null||this.isInPresentationMode||this.exitPresentationMode||(clearTimeout(_classPrivateFieldGet2(_scaleTimeoutId,this)),_classPrivateFieldSet2(_scaleTimeoutId,this,null)),s=this._getVisiblePages(),s.views.length!==0){d.next=5;break}return d.abrupt("return");case 5:return u=DEFAULT_CACHE_SIZE,_classPrivateFieldGet2(_buffer,this).resize(u,s.ids),d.next=9,this.forceRendering(s);case 9:this.cleanupPages();case 10:case"end":return d.stop()}},o,this)})),function(){return r.apply(this,arguments)})},{key:"containsElement",value:function(o){return this.container.contains(o)}},{key:"focus",value:function(){this.container.focus()}},{key:"_isContainerRtl",get:function(){return getComputedStyle(this.container).direction==="rtl"}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getVisiblePages",value:function(){var o=this._scrollMode===ScrollMode.PAGE?_classPrivateFieldGet2(_scrollModePageState,this).pages:this._pages,s=this._scrollMode===ScrollMode.HORIZONTAL,u=s&&this._isContainerRtl;return getVisibleElements({scrollEl:this.container,views:o,sortByVisibility:!0,horizontal:s,rtl:u})}},{key:"isPageVisible",value:function(o){return!!this.pdfDocument&&(Number.isInteger(o)&&o>0&&o<=this.pagesCount?this._getVisiblePages().ids.has(o):(console.error('isPageVisible: "'.concat(o,'" is not a valid page.')),!1))}},{key:"isPageCached",value:function(o){if(!this.pdfDocument)return!1;if(!(Number.isInteger(o)&&o>0&&o<=this.pagesCount))return console.error('isPageCached: "'.concat(o,'" is not a valid page.')),!1;var s=this._pages[o-1];return _classPrivateFieldGet2(_buffer,this).has(s)}},{key:"cleanup",value:function(){var o,s=_createForOfIteratorHelper(this._pages);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.renderingState!==RenderingStates$1.FINISHED&&u.reset()}}catch(d){s.e(d)}finally{s.f()}}},{key:"_cancelRendering",value:function(){var o,s=_createForOfIteratorHelper(this._pages);try{for(s.s();!(o=s.n()).done;){var u,d=o.value;(u=d.contentContainer)===null||u===void 0||u.destroy(),d.contentContainer=null,d.cancelRendering()}}catch(f){s.e(f)}finally{s.f()}}},{key:"forceRendering",value:function(){var o=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){var d,f,g,m,y,v=this;return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(d=u||this._getVisiblePages(),!_classPrivateFieldGet2(_rendering,this)){_.next=4;break}return _classPrivateFieldGet2(_cacheTask,this).push({visiblePages:d}),_.abrupt("return");case 4:_classPrivateFieldSet2(_rendering,this,!0),f=[],g=_regeneratorRuntime().mark(function w(){var x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if((x=d.views[m].view).renderingState!==RenderingStates$1.FINISHED||!x.canvas){k.next=5;break}return k.abrupt("return",1);case 5:x.renderingState===RenderingStates$1.FINISHED&&x.reset();case 6:return k.next=8,_assertClassBrand(_PDFViewer_brand,v,_ensurePdfPageLoaded$1).call(v,x).then(function(){f.push(x.draw()),_classPrivateFieldGet2(_renderedPagesView,v).push(x)});case 8:case"end":return k.stop()}},w)}),m=0;case 8:if(!(m<d.views.length)){_.next=15;break}return _.delegateYield(g(),"t0",10);case 10:if(!_.t0){_.next=12;break}return _.abrupt("continue",12);case 12:m++,_.next=8;break;case 15:return _.next=17,Promise.all(f);case 17:if(_classPrivateFieldSet2(_rendering,this,!1),!_classPrivateFieldGet2(_cacheTask,this).length){_.next=24;break}return y=_classPrivateFieldGet2(_cacheTask,this).pop(),_classPrivateFieldSet2(_cacheTask,this,[]),_.next=23,this.forceRendering(y.visiblePages);case 23:return _.abrupt("return",!0);case 24:return _.abrupt("return",!1);case 25:case"end":return _.stop()}},s,this)}));return function(s){return o.apply(this,arguments)}}()},{key:"hasEqualPageSizes",get:function(){for(var o=this._pages[0],s=1,u=this._pages.length;s<u;++s){var d=this._pages[s];if(d.width!==o.width||d.height!==o.height)return!1}return!0}},{key:"getPagesOverview",value:function(){var o=this;return this._pages.map(function(s){var u=s.pdfPage.getViewport({scale:1});return!o.enablePrintAutoRotate||isPortraitOrientation(u)?{width:u.width,height:u.height,rotation:u.rotation}:{width:u.height,height:u.width,rotation:(u.rotation-90)%360}})}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)},set:function(o){if(!(o instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(o));this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=o,this.refresh(!1,{optionalContentConfigPromise:o}))}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(o){if(this._scrollMode!==o){if(!isValidScrollMode(o))throw new Error("Invalid scroll mode: ".concat(o));this.pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=o,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:o}),this._updateScrollMode(this._currentPageNumber))}}},{key:"_updateScrollMode",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=this._scrollMode,u=this.viewer;u.classList.toggle("scrollHorizontal",s===ScrollMode.HORIZONTAL),u.classList.toggle("scrollWrapped",s===ScrollMode.WRAPPED),this.pdfDocument&&o&&(s===ScrollMode.PAGE?_assertClassBrand(_PDFViewer_brand,this,_ensurePageViewVisible).call(this):this._previousScrollMode===ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(o,!0),this.update())}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(o){if(this._spreadMode!==o){if(!isValidSpreadMode(o))throw new Error("Invalid spread mode: ".concat(o));this._spreadMode=o,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:o}),this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.pdfDocument){var s=this.viewer,u=this._pages;if(this._scrollMode===ScrollMode.PAGE)_assertClassBrand(_PDFViewer_brand,this,_ensurePageViewVisible).call(this);else if(s.textContent="",this._spreadMode===SpreadMode.NONE){var d,f=_createForOfIteratorHelper(this._pages);try{for(f.s();!(d=f.n()).done;){var g=d.value;s.append(g.div)}}catch(w){f.e(w)}finally{f.f()}}else for(var m=this._spreadMode-1,y=null,v=0,_=u.length;v<_;++v)y===null?((y=document.createElement("div")).className="spread",s.append(y)):v%2===m&&(y=y.cloneNode(!1),s.append(y)),y.append(u[v].div);o&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(o,!0),this.update())}}},{key:"_getPageAdvance",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];switch(this._scrollMode){case ScrollMode.WRAPPED:var u,d=this._getVisiblePages().views,f=new Map,g=_createForOfIteratorHelper(d);try{for(g.s();!(u=g.n()).done;){var m=u.value,y=m.id,v=m.y,_=m.percent,w=m.widthPercent;if(!(_===0||w<100)){var x=f.get(v);x||f.set(v,x||(x=[])),x.push(y)}}}catch(Q){g.e(Q)}finally{g.f()}var k,S=_createForOfIteratorHelper(f.values());try{for(S.s();!(k=S.n()).done;){var M=k.value,E=M.indexOf(o);if(E!==-1){var P=M.length;if(P===1)break;if(s)for(var T=E-1;T>=0;T--){var D=M[T],F=M[T+1]-1;if(D<F)return o-F}else for(var I=E+1,N=P;I<N;I++){var q=M[I],Y=M[I-1]+1;if(q>Y)return Y-o}if(s){var Z=M[0];if(Z<o)return o-Z+1}else{var j=M[P-1];if(j>o)return j-o+1}break}}}catch(Q){S.e(Q)}finally{S.f()}break;case ScrollMode.HORIZONTAL:break;case ScrollMode.PAGE:case ScrollMode.VERTICAL:if(this._spreadMode===SpreadMode.NONE)break;var ne=this._spreadMode-1;if(s&&o%2!==ne||!s&&o%2===ne)break;var le,J=s?o-1:o+1,O=_createForOfIteratorHelper(this._getVisiblePages().views);try{for(O.s();!(le=O.n()).done;){var U=le.value,W=U.id,H=U.percent,X=U.widthPercent;if(W===J){if(H>0&&X===100)return 2;break}}}catch(Q){O.e(Q)}finally{O.f()}}return 1}},{key:"nextPage",value:function(){var o=this._currentPageNumber,s=this.pagesCount;if(o>=s)return!1;var u=this._getPageAdvance(o,!1)||1;return this.currentPageNumber=Math.min(o+u,s),!0}},{key:"previousPage",value:function(){var o=this._currentPageNumber;if(o<=1)return!1;var s=this._getPageAdvance(o,!0)||1;return this.currentPageNumber=Math.max(o-s,1),!0}},{key:"increaseScale",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof o=="number"&&(console.error("The `increaseScale` method-signature was updated, please use an object instead."),o={steps:o}),this.pdfDocument){o||(o=Object.create(null));var s=this._currentScale;if(o.scaleFactor>1)s=Math.min(MAX_SCALE,Math.round(s*o.scaleFactor*100)/100);else{var u,d=(u=o.steps)!==null&&u!==void 0?u:1;do s=(s*DEFAULT_SCALE_DELTA).toFixed(2),s=Math.ceil(10*s)/10,s=Math.min(MAX_SCALE,s);while(--d>0&&s<MAX_SCALE)}o.noScroll=!0,this._setScale(s,o),_classPrivateFieldSet2(_rendering,this,!1)}}},{key:"decreaseScale",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof o=="number"&&(console.error("The `decreaseScale` method-signature was updated, please use an object instead."),o={steps:o}),this.pdfDocument){o||(o=Object.create(null));var s=this._currentScale;if(o.scaleFactor>0&&o.scaleFactor<1)s=Math.max(MIN_SCALE,Math.round(s*o.scaleFactor*100)/100);else{var u,d=(u=o.steps)!==null&&u!==void 0?u:1;do s=(s/DEFAULT_SCALE_DELTA).toFixed(2),s=Math.floor(10*s)/10,s=Math.max(MIN_SCALE,s);while(--d>0&&s>MIN_SCALE)}o.noScroll=!0,this._setScale(s,o),_classPrivateFieldSet2(_rendering,this,!1)}}},{key:"resize",value:function(o){this._setScale(o,{noScroll:!1,drawingDelay:400}),_classPrivateFieldSet2(_rendering,this,!1)}},{key:"annotationEditorMode",get:function(){return this._annotationEditorUIManager?this._annotationEditorMode:pdfExports.AnnotationEditorType.DISABLE},set:function(o){if(!this._annotationEditorUIManager)throw new Error("The AnnotationEditor is not enabled.");if(this._annotationEditorMode!==o){if(!isValidAnnotationEditorMode(o))throw new Error("Invalid AnnotationEditor mode: ".concat(o));this.pdfDocument&&(this._annotationEditorMode=o,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:o}),this._annotationEditorUIManager.updateMode(o))}}},{key:"refresh",value:function(){var o=arguments.length>0&&arguments[0]!==void 0&&arguments[0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object.create(null);if(this.pdfDocument){var u,d=_createForOfIteratorHelper(this._pages);try{for(d.s();!(u=d.n()).done;)u.value.update(s)}catch(f){d.e(f)}finally{d.f()}_classPrivateFieldGet2(_scaleTimeoutId,this)===null||this.isInPresentationMode||this.exitPresentationMode||(clearTimeout(_classPrivateFieldGet2(_scaleTimeoutId,this)),_classPrivateFieldSet2(_scaleTimeoutId,this,null)),o||this.update()}}},{key:"setFontFile",value:function(o){var s,u=_createForOfIteratorHelper(this._pages);try{for(u.s();!(s=u.n()).done;)s.value.fontFile=o}catch(d){u.e(d)}finally{u.f()}}},{key:"refreshCanvas",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((s=this._getVisiblePages()).views.length!==0){u.next=3;break}return u.abrupt("return");case 3:return u.next=5,this.renderCanvas(s);case 5:case"end":return u.stop()}},o,this)})),function(){return n.apply(this,arguments)})},{key:"renderCanvas",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function o(s){var u,d,f,g,m;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(u=s||this._getVisiblePages(),!_classPrivateFieldGet2(_rendering,this)){y.next=4;break}return _classPrivateFieldGet2(_cacheTask,this).push({visiblePages:u}),y.abrupt("return");case 4:for(_classPrivateFieldSet2(_rendering,this,!0),d=[],f=0;f<u.views.length;f++)g=u.views[f].view,d.push(g.redrawCanvas());return y.next=9,Promise.all(d);case 9:if(_classPrivateFieldSet2(_rendering,this,!1),!_classPrivateFieldGet2(_cacheTask,this).length){y.next=16;break}return m=_classPrivateFieldGet2(_cacheTask,this).pop(),_classPrivateFieldSet2(_cacheTask,this,[]),y.next=15,this.renderCanvas(m.visiblePages);case 15:return y.abrupt("return",!0);case 16:return y.abrupt("return",!1);case 17:case"end":return y.stop()}},o,this)})),function(o){return e.apply(this,arguments)})}]);var e,n,r}();function _layerProperties(){var e=this;return{get annotationEditorUIManager(){return e._annotationEditorUIManager},get annotationStorage(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.annotationStorage},get fieldObjectsPromise(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.getFieldObjects()},get hasJSActionsPromise(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.hasJSActions()},get linkService(){return e.linkService}}}function _initializePermissions(e){var n={annotationEditorMode:this._annotationEditorMode,textLayerMode:this.textLayerMode};return e&&(e.includes(pdfExports.PermissionFlag.COPY)||this.viewer.classList.add(ENABLE_PERMISSIONS_CLASS),e.includes(pdfExports.PermissionFlag.MODIFY_CONTENTS)||(n.annotationEditorMode=pdfExports.AnnotationEditorType.DISABLE),e.includes(pdfExports.PermissionFlag.MODIFY_ANNOTATIONS)||e.includes(pdfExports.PermissionFlag.FILL_INTERACTIVE_FORMS)||(n.annotationMode=pdfExports.AnnotationMode.ENABLE)),n}function _onePageRenderedOrForceFetch(){var e=this;if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();var n=new Promise(function(r){_classPrivateFieldSet2(_onVisibilityChange,e,function(){document.visibilityState==="hidden"&&(r(),document.removeEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,e)),_classPrivateFieldSet2(_onVisibilityChange,e,null))}),document.addEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,e))});return Promise.race([this._onePageRenderedCapability.promise,n])}function _ensurePageViewVisible(){if(this._scrollMode!==ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var e=this._currentPageNumber,n=_classPrivateFieldGet2(_scrollModePageState,this),r=this.viewer;if(r.textContent="",n.pages.length=0,this._spreadMode!==SpreadMode.NONE||this.isInPresentationMode){var o=new Set,s=this._spreadMode-1;s===-1?o.add(e-1):e%2!==s?(o.add(e-1),o.add(e)):(o.add(e-2),o.add(e-1));var u=document.createElement("div");u.className="spread",this.isInPresentationMode;var d,f=_createForOfIteratorHelper(o);try{for(f.s();!(d=f.n()).done;){var g=d.value,m=this._pages[g];m&&(u.append(m.div),n.pages.push(m))}}catch(v){f.e(v)}finally{f.f()}r.append(u)}else{var y=this._pages[e-1];r.append(y.div),n.pages.push(y)}n.scrollDown=e>=n.previousPageNumber,n.previousPageNumber=e}function _isSameScale(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}function _ensurePdfPageLoaded$1(e){return _ensurePdfPageLoaded2$1.apply(this,arguments)}function _ensurePdfPageLoaded2$1(){return(_ensurePdfPageLoaded2$1=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r,o,s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!n.pdfPage){u.next=2;break}return u.abrupt("return",n.pdfPage);case 2:return u.prev=2,u.next=5,this.pdfDocument.getPage(n.id);case 5:return s=u.sent,n.pdfPage||n.setPdfPage(s),(r=(o=this.linkService)._cachedPageNumber)!==null&&r!==void 0&&r.call(o,s.ref)||this.linkService.cachePageRef(n.id,s.ref),u.abrupt("return",s);case 11:return u.prev=11,u.t0=u.catch(2),console.error("Unable to get page for page view",u.t0),u.abrupt("return",null);case 15:case"end":return u.stop()}},e,this,[[2,11]])}))).apply(this,arguments)}var DRAW_UPSCALE_FACTOR=2,MAX_NUM_SCALING_STEPS=3,THUMBNAIL_CANVAS_BORDER_WIDTH=1,THUMBNAIL_WIDTH=120,TempImageFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getCanvas",value:function(n,r){var o=_assertClassBrand(e,this,_tempCanvas)._||(_tempCanvas._=_assertClassBrand(e,this,document.createElement("canvas")));o.width=n,o.height=r;var s=o.getContext("2d",{alpha:!1});return s.save(),s.fillStyle="rgb(255, 255, 255)",s.fillRect(0,0,n,r),s.restore(),[o,o.getContext("2d")]}},{key:"destroyCanvas",value:function(){var n=_assertClassBrand(e,this,_tempCanvas)._;n&&(n.width=0,n.height=0),_tempCanvas._=_assertClassBrand(e,this,null)}}])}(),_tempCanvas={_:null},PDFThumbnailView=function(){return _createClass(function e(n){var r=n.container,o=n.id,s=n.defaultViewport,u=n.linkService,d=n.renderingQueue,f=n.pageColors;_classCallCheck(this,e),this.id=o,this.renderingId="thumbnail"+o,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=s,this.pdfPageRotate=s.rotation,this.pageColors=f||null,this.linkService=u,this.renderingQueue=d,this.renderTask=null,this.renderingState=RenderingStates$1.INITIAL,this.resume=null;var g=this.viewport.width,m=g/this.viewport.height;this.canvasWidth=THUMBNAIL_WIDTH,this.canvasHeight=this.canvasWidth/m|0,this.scale=this.canvasWidth/g;var y=document.createElement("div");y.onclick=function(){return u.goToPage(o),isMobile$1&&window.instances.UI.closeElement("leftPanel"),!1},this.anchor=y;var v=document.createElement("div");v.className="thumbnail",v.setAttribute("data-page-number",this.id),this.div=v;var _=document.createElement("div");_.className="thumbnailSelectionRing";var w=2*THUMBNAIL_CANVAS_BORDER_WIDTH;_.style.width=this.canvasWidth+w+"px",_.style.height=this.canvasHeight+w+"px",this.ring=_,v.append(_);var x=document.createElement("div");x.className="box-thumbnail",x.textContent=this.id,v.append(x),y.append(v),r.append(y)},[{key:"setPdfPage",value:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var n=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:n}),this.reset()}},{key:"reset",value:function(){this.cancelRendering(),this.renderingState=RenderingStates$1.INITIAL;var e=this.viewport.width,n=e/this.viewport.height;this.canvasHeight=this.canvasWidth/n|0,this.scale=this.canvasWidth/e,this.div.removeAttribute("data-loaded");var r=this.ring;r.textContent="";var o=2*THUMBNAIL_CANVAS_BORDER_WIDTH;r.style.width=this.canvasWidth+o+"px",r.style.height=this.canvasHeight+o+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)}},{key:"update",value:function(e){var n=e.rotation,r=n===void 0?null:n;typeof r=="number"&&(this.rotation=r);var o=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:o}),this.reset()}},{key:"cancelRendering",value:function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}},{key:"_getPageDrawContext",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=document.createElement("canvas"),r=n.getContext("2d",{alpha:!1}),o=new OutputScale;return n.width=e*this.canvasWidth*o.sx|0,n.height=e*this.canvasHeight*o.sy|0,{ctx:r,canvas:n,transform:o.scaled?[o.sx,0,0,o.sy,0,0]:null}}},{key:"_convertCanvasToImage",value:function(e){if(this.renderingState!==RenderingStates$1.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");var n=this._reduceImage(e),r=document.createElement("img");r.className="thumbnailImage",this._thumbPageCanvas.then(function(o){r.setAttribute("aria-label",o)}),r.style.width=this.canvasWidth+"px",r.style.height=this.canvasHeight+"px",r.src=n.toDataURL(),this.image=r,this.div.setAttribute("data-loaded",!0),this.ring.append(r),n.width=0,n.height=0}},{key:"draw",value:function(){var e=this;if(this.renderingState!==RenderingStates$1.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();var n=this.pdfPage;if(!n)return this.renderingState=RenderingStates$1.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates$1.RUNNING;var r=function(){var m=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var v,_=arguments;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(v=_.length>0&&_[0]!==void 0?_[0]:null,f===e.renderTask&&(e.renderTask=null),!(v instanceof pdfExports.RenderingCancelledException)){w.next=4;break}return w.abrupt("return");case 4:if(e.renderingState=RenderingStates$1.FINISHED,e._convertCanvasToImage(u),!v){w.next=8;break}throw v;case 8:case"end":return w.stop()}},y)}));return function(){return m.apply(this,arguments)}}(),o=this._getPageDrawContext(DRAW_UPSCALE_FACTOR),s=o.ctx,u=o.canvas,d={canvasContext:s,transform:o.transform,viewport:this.viewport.clone({scale:DRAW_UPSCALE_FACTOR*this.scale}),pageColors:this.pageColors},f=this.renderTask=n.render(d);f.onContinue=function(m){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=RenderingStates$1.PAUSED,void(e.resume=function(){e.renderingState=RenderingStates$1.RUNNING,m()});m()};var g=f.promise.then(function(){return r(null)},function(m){return r(m)});return g.finally(function(){var m;u.width=0,u.height=0,e.linkService.isPageCached(e.id)||(m=e.pdfPage)===null||m===void 0||m.cleanup()}),g}},{key:"setImage",value:function(e){if(this.renderingState===RenderingStates$1.INITIAL){var n=e.thumbnailCanvas,r=e.pdfPage,o=e.scale;n&&(this.pdfPage||this.setPdfPage(r),o<this.scale||(this.renderingState=RenderingStates$1.FINISHED,this._convertCanvasToImage(n)))}}},{key:"_reduceImage",value:function(e){var n=this._getPageDrawContext(),r=n.ctx,o=n.canvas;if(e.width<=2*o.width)return r.drawImage(e,0,0,e.width,e.height,0,0,o.width,o.height),o;for(var s=o.width<<MAX_NUM_SCALING_STEPS,u=o.height<<MAX_NUM_SCALING_STEPS,d=_slicedToArray(TempImageFactory.getCanvas(s,u),2),f=d[0],g=d[1];s>e.width||u>e.height;)s>>=1,u>>=1;for(g.drawImage(e,0,0,e.width,e.height,0,0,s,u);s>2*o.width;)g.drawImage(f,0,0,s,u,0,0,s>>1,u>>1),s>>=1,u>>=1;return r.drawImage(f,0,0,s,u,0,0,o.width,o.height),o}},{key:"_thumbPageTitle",get:function(){var e;return Promise.resolve("Page ".concat((e=this.pageLabel)!==null&&e!==void 0?e:this.id))}},{key:"_thumbPageCanvas",get:function(){var e;return Promise.resolve("Thumbnail of Page ".concat((e=this.pageLabel)!==null&&e!==void 0?e:this.id))}},{key:"setPageLabel",value:function(e){var n=this;this.pageLabel=typeof e=="string"?e:null,this._thumbPageTitle.then(function(r){n.anchor.title=r}),this.renderingState===RenderingStates$1.FINISHED&&this._thumbPageCanvas.then(function(r){var o;(o=n.image)===null||o===void 0||o.setAttribute("aria-label",r)})}}])}(),THUMBNAIL_SCROLL_MARGIN=-19,THUMBNAIL_SELECTED_CLASS="selected",_PDFThumbnailViewer_brand=new WeakSet,PDFThumbnailViewer=function(){return _createClass(function e(n){var r=n.container,o=n.renderingQueue,s=n.linkService;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFThumbnailViewer_brand),this.container=r,this.linkService=s,this.renderingQueue=o,this.pageColors=null,typeof PDFJSDev<"u"&&PDFJSDev.test("MOZCENTRAL")||!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()},[{key:"_scrollUpdated",value:function(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function(e){return this._thumbnails[e]}},{key:"_getVisibleThumbs",value:function(){return getVisibleElements({scrollEl:this.container,views:this._thumbnails})}},{key:"scrollThumbnailIntoView",value:function(e){if(this.pdfDocument){var n=this._thumbnails[e-1];if(n){e!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(THUMBNAIL_SELECTED_CLASS),n.div.classList.add(THUMBNAIL_SELECTED_CLASS));var r=this._getVisibleThumbs(),o=r.first,s=r.last,u=r.views;if(u.length>0){var d=!1;if(e<=o.id||e>=s.id)d=!0;else{var f,g=_createForOfIteratorHelper(u);try{for(g.s();!(f=g.n()).done;){var m=f.value,y=m.id,v=m.percent;if(y===e){d=v<100;break}}}catch(_){g.e(_)}finally{g.f()}}this._scrollUpdated(),d&&scrollIntoView(n.div,{top:THUMBNAIL_SCROLL_MARGIN})}this._currentPageNumber=e}else console.warn('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(e){if(!isValidRotation(e))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==e){this._pagesRotation=e;var n,r={rotation:e},o=_createForOfIteratorHelper(this._thumbnails);try{for(o.s();!(n=o.n()).done;)n.value.update(r)}catch(s){o.e(s)}finally{o.f()}}}},{key:"cleanup",value:function(){var e,n=_createForOfIteratorHelper(this._thumbnails);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.renderingState!==RenderingStates$1.FINISHED&&r.reset()}}catch(o){n.e(o)}finally{n.f()}TempImageFactory.destroyCanvas()}},{key:"_resetView",value:function(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}},{key:"setDocument",value:function(e){var n=this;this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=e,e&&e.getPage(1).then(function(r){for(var o,s=e.numPages,u=r.getViewport({scale:1}),d=1;d<=s;++d){var f=new PDFThumbnailView({container:n.container,id:d,defaultViewport:u.clone(),linkService:n.linkService,renderingQueue:n.renderingQueue,pageColors:n.pageColors});n._thumbnails.push(f)}(o=n._thumbnails[0])===null||o===void 0||o.setPdfPage(r),n._thumbnails[n._currentPageNumber-1].div.classList.add(THUMBNAIL_SELECTED_CLASS)}).catch(function(r){console.error("Unable to initialize thumbnail viewer",r)})}},{key:"_cancelRendering",value:function(){var e,n=_createForOfIteratorHelper(this._thumbnails);try{for(n.s();!(e=n.n()).done;)e.value.cancelRendering()}catch(r){n.e(r)}finally{n.f()}}},{key:"setPageLabels",value:function(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var n=0,r=this._thumbnails.length;n<r;n++){var o,s;this._thumbnails[n].setPageLabel((o=(s=this._pageLabels)===null||s===void 0?void 0:s[n])!==null&&o!==void 0?o:null)}}}},{key:"forceRendering",value:function(){var e=this,n=this._getVisibleThumbs(),r=_assertClassBrand(_PDFThumbnailViewer_brand,this,_getScrollAhead).call(this,n),o=this.renderingQueue.getHighestPriority(n,this._thumbnails,r);return!!o&&(_assertClassBrand(_PDFThumbnailViewer_brand,this,_ensurePdfPageLoaded).call(this,o).then(function(){e.renderingQueue.renderView(o)}),!0)}}])}();function _ensurePdfPageLoaded(e){return _ensurePdfPageLoaded2.apply(this,arguments)}function _ensurePdfPageLoaded2(){return(_ensurePdfPageLoaded2=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!n.pdfPage){o.next=2;break}return o.abrupt("return",n.pdfPage);case 2:return o.prev=2,o.next=5,this.pdfDocument.getPage(n.id);case 5:return r=o.sent,n.pdfPage||n.setPdfPage(r),o.abrupt("return",r);case 10:return o.prev=10,o.t0=o.catch(2),console.error("Unable to get page for thumb view",o.t0),o.abrupt("return",null);case 14:case"end":return o.stop()}},e,this,[[2,10]])}))).apply(this,arguments)}function _getScrollAhead(e){var n,r;return((n=e.first)===null||n===void 0?void 0:n.id)===1||((r=e.last)===null||r===void 0?void 0:r.id)!==this._thumbnails.length&&this.scroll.down}var CLEANUP_TIMEOUT=3e4,PDFRenderingQueue=function(){return _createClass(function n(){_classCallCheck(this,n),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1},[{key:"setViewer",value:function(n){this.pdfViewer=n}},{key:"setThumbnailViewer",value:function(n){this.pdfThumbnailViewer=n}},{key:"isHighestPriority",value:function(n){return this.highestPriorityPage===n.renderingId}},{key:"hasViewer",value:function(){return!!this.pdfViewer}},{key:"renderHighestPriority",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){var o;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),s.next=3,this.pdfViewer.forceRendering(r);case 3:if(!s.sent){s.next=5;break}return s.abrupt("return");case 5:if(!this.isThumbnailViewEnabled||(o=this.pdfThumbnailViewer)===null||o===void 0||!o.forceRendering()){s.next=7;break}return s.abrupt("return");case 7:if(!this.printing){s.next=9;break}return s.abrupt("return");case 9:this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT));case 10:case"end":return s.stop()}},n,this)})),function(n){return e.apply(this,arguments)})},{key:"getHighestPriority",value:function(n,r,o){var s=arguments.length>3&&arguments[3]!==void 0&&arguments[3],u=n.views,d=u.length;if(d===0)return null;for(var f=0;f<d;f++){var g=u[f].view;if(!this.isViewFinished(g))return g}var m=n.first.id,y=n.last.id;if(y-m+1>d)for(var v=n.ids,_=1,w=y-m;_<w;_++){var x=o?m+_:y-_;if(!v.has(x)){var k=r[x-1];if(!this.isViewFinished(k))return k}}var S=o?y:m-2,M=r[S];return M&&!this.isViewFinished(M)||s&&(M=r[S+=o?1:-1])&&!this.isViewFinished(M)?M:null}},{key:"isViewFinished",value:function(n){return n.renderingState===RenderingStates.FINISHED}},{key:"renderView",value:function(n){var r=this;switch(n.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=n.renderingId,n.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=n.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=n.renderingId,n.draw().finally(function(){r.renderHighestPriority()})}return!0}}]);var e}(),UI_NOTIFICATION_CLASS="pdfSidebarNotification",_PDFSidebar_brand=new WeakSet,PDFSidebar=function(){return _createClass(function e(n){var r=n.elements,o=n.pdfViewer,s=n.pdfThumbnailViewer,u=n.eventBus,d=n.l10n;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFSidebar_brand),this.isOpen=!1,this.active=SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.pdfViewer=o,this.pdfThumbnailViewer=s,this.outerContainer=r.outerContainer,this.sidebarContainer=r.sidebarContainer,this.toggleButton=r.toggleButton,this.thumbnailButton=r.thumbnailButton,this.outlineButton=r.outlineButton,this.attachmentsButton=r.attachmentsButton,this.layersButton=r.layersButton,this.thumbnailView=r.thumbnailView,this.outlineView=r.outlineView,this.attachmentsView=r.attachmentsView,this.layersView=r.layersView,this._outlineOptionsContainer=r.outlineOptionsContainer,this._currentOutlineItemButton=r.currentOutlineItemButton,this.eventBus=u,this.l10n=d,this.eventBus._on("pagesloaded",function(){})},[{key:"reset",value:function(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,_assertClassBrand(_PDFSidebar_brand,this,_hideUINotification).call(this,!0),this.switchView(SidebarView.THUMBS)}},{key:"visibleView",get:function(){return this.isOpen?this.active:SidebarView.NONE}},{key:"setInitialView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SidebarView.NONE;this.isInitialViewSet||(this.isInitialViewSet=!0,e!==SidebarView.NONE&&e!==SidebarView.UNKNOWN?(this.switchView(e,!0),this.isInitialEventDispatched||_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this)):_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this))}},{key:"switchView",value:function(e){var n,r,o,s,u,d,f,g,m,y,v,_,w,x=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=e!==this.active,S=!1;switch(e){case SidebarView.NONE:return void(this.isOpen&&this.close());case SidebarView.THUMBS:this.isOpen&&k&&(S=!0);break;case SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case SidebarView.OUTLINE:case SidebarView.LAYERS:break;default:return void console.error('PDFSidebar.switchView: "'.concat(e,'" is not a valid view.'))}this.active=e;var M=e===SidebarView.THUMBS,E=e===SidebarView.OUTLINE,P=e===SidebarView.ATTACHMENTS,T=e===SidebarView.LAYERS;(n=this.thumbnailButton)===null||n===void 0||n.classList.toggle("toggled",M),(r=this.outlineButton)===null||r===void 0||r.classList.toggle("toggled",E),(o=this.attachmentsButton)===null||o===void 0||o.classList.toggle("toggled",P),(s=this.layersButton)===null||s===void 0||s.classList.toggle("toggled",T),(u=this.thumbnailButton)===null||u===void 0||u.setAttribute("aria-checked",M),(d=this.outlineButton)===null||d===void 0||d.setAttribute("aria-checked",E),(f=this.attachmentsButton)===null||f===void 0||f.setAttribute("aria-checked",P),(g=this.layersButton)===null||g===void 0||g.setAttribute("aria-checked",T),(m=this.thumbnailView)===null||m===void 0||m.classList.toggle("hidden",!M),(y=this.outlineView)===null||y===void 0||y.classList.toggle("hidden",!E),(v=this.attachmentsView)===null||v===void 0||v.classList.toggle("hidden",!P),(_=this.layersView)===null||_===void 0||_.classList.toggle("hidden",!T),(w=this._outlineOptionsContainer)===null||w===void 0||w.classList.toggle("hidden",!E),!x||this.isOpen?(S&&(_assertClassBrand(_PDFSidebar_brand,this,_updateThumbnailViewer).call(this),_assertClassBrand(_PDFSidebar_brand,this,_forceRendering).call(this)),k&&_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this)):this.open()}},{key:"open",value:function(){var e,n,r;this.isOpen||(this.isOpen=!0,(e=this.toggleButton)===null||e===void 0||e.classList.add("toggled"),(n=this.toggleButton)===null||n===void 0||n.setAttribute("aria-expanded","true"),(r=this.outerContainer)===null||r===void 0||r.classList.add("sidebarMoving","sidebarOpen"),this.active===SidebarView.THUMBS&&_assertClassBrand(_PDFSidebar_brand,this,_updateThumbnailViewer).call(this),_assertClassBrand(_PDFSidebar_brand,this,_forceRendering).call(this),_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this),_assertClassBrand(_PDFSidebar_brand,this,_hideUINotification).call(this))}},{key:"close",value:function(){var e,n,r,o;this.isOpen&&(this.isOpen=!1,(e=this.toggleButton)===null||e===void 0||e.classList.remove("toggled"),(n=this.toggleButton)===null||n===void 0||n.setAttribute("aria-expanded","false"),(r=this.outerContainer)===null||r===void 0||r.classList.add("sidebarMoving"),(o=this.outerContainer)===null||o===void 0||o.classList.remove("sidebarOpen"),_assertClassBrand(_PDFSidebar_brand,this,_forceRendering).call(this),_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this))}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}}])}();function _dispatchEvent$1(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}function _forceRendering(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}function _updateThumbnailViewer(){for(var e=this.pdfViewer,n=this.pdfThumbnailViewer,r=e.pagesCount,o=0;o<r;o++){var s=e.getPageView(o);(s==null?void 0:s.renderingState)===RenderingStates$1.FINISHED&&n.getThumbnail(o).setImage(s)}n.scrollThumbnailIntoView(e.currentPageNumber)}function _hideUINotification(){var e,n,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(this.isOpen||r)&&((e=this.toggleButton)===null||e===void 0||e.classList.remove(UI_NOTIFICATION_CLASS)),r&&((n=this.toggleButton)===null||n===void 0||n.setAttribute("data-l10n-id","toggle_sidebar"))}function _download(e,n){var r=document.createElement("a");if(!r.click)throw new Error('DownloadManager: "a.click()" is not supported.');r.href=e,r.target="_parent","download"in r&&(r.download=n),(document.body||document.documentElement).append(r),r.click(),r.remove()}var _openBlobUrls=new WeakMap,DownloadManager=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_openBlobUrls,new WeakMap)},[{key:"downloadUrl",value:function(e,n){pdfExports.createValidAbsoluteUrl(e,"http://example.com")?_download(e+"#pdfjs.action=download",n):console.error("downloadUrl - not a valid URL: ".concat(e))}},{key:"downloadData",value:function(e,n,r){_download(URL.createObjectURL(new Blob([e],{type:r})),n)}},{key:"openOrDownloadData",value:function(e,n,r){var o=pdfExports.isPdfFile(r),s=o?"application/pdf":"";if(o){var u,d=_classPrivateFieldGet2(_openBlobUrls,this).get(e);d||(d=URL.createObjectURL(new Blob([n],{type:s})),_classPrivateFieldGet2(_openBlobUrls,this).set(e,d)),typeof PDFJSDev>"u"||PDFJSDev.test("GENERIC")?u="?file="+encodeURIComponent(d+"#"+r):PDFJSDev.test("CHROME")&&(u=chrome.runtime.getURL("/content/web/viewer.html")+"?file="+encodeURIComponent(d+"#"+r));try{return window.open(u),!0}catch(f){console.error("openOrDownloadData: ".concat(f)),URL.revokeObjectURL(d),_classPrivateFieldGet2(_openBlobUrls,this).delete(e)}}return this.downloadData(n,r,s),!1}},{key:"download",value:function(e,n,r){_download(URL.createObjectURL(e),r)}}])}(),DefaultExternalServices=function(){return _createClass(function e(){throw _classCallCheck(this,e),new Error("Cannot initialize DefaultExternalServices.")},null,[{key:"updateFindControlState",value:function(e){}},{key:"updateFindMatchesCount",value:function(e){}},{key:"initPassiveLoading",value:function(e){}},{key:"reportTelemetry",value:function(e){}},{key:"createDownloadManager",value:function(){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function(e){throw new Error("Not implemented: createL10n")}},{key:"createScripting",value:function(e){throw new Error("Not implemented: createScripting")}},{key:"supportsIntegratedFind",get:function(){return shadow(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function(){return shadow(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function(){return shadow(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function(){return shadow(this,"isInAutomation",!1)}},{key:"updateEditorStates",value:function(e){throw new Error("Not implemented: updateEditorStates")}}])}(),GenericExternalServices=function(e){function n(){return _classCallCheck(this,n),_callSuper(this,n,arguments)}return _inherits(n,DefaultExternalServices),_createClass(n,null,[{key:"createDownloadManager",value:function(){return new DownloadManager}}])}(),CSS_CLASS_GRAB="grab-to-pan-grab",_GrabToPan_brand=new WeakSet,GrabToPan=function(){return _createClass(function e(n){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_GrabToPan_brand),this.element=n.element,this.document=n.element.ownerDocument,typeof n.ignoreTarget=="function"&&(this.ignoreTarget=n.ignoreTarget),this.onActiveChanged=n.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=_assertClassBrand(_GrabToPan_brand,this,_onMouseDown).bind(this),this._onMouseMove=_assertClassBrand(_GrabToPan_brand,this,_onMouseMove).bind(this),this._endPan=_assertClassBrand(_GrabToPan_brand,this,_endPan).bind(this),(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"},[{key:"activate",value:function(){var e;this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(CSS_CLASS_GRAB),(e=this.onActiveChanged)===null||e===void 0||e.call(this,!0))}},{key:"deactivate",value:function(){var e;this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(CSS_CLASS_GRAB),(e=this.onActiveChanged)===null||e===void 0||e.call(this,!1))}},{key:"toggle",value:function(){this.active?this.deactivate():this.activate()}},{key:"ignoreTarget",value:function(e){return e.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}])}();function _onMouseDown(e){if(e.button===0&&!this.ignoreTarget(e.target)){if(e.originalTarget)try{e.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=e.clientX,this.clientYStart=e.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),e.preventDefault(),e.stopPropagation();var n=document.activeElement;n&&!n.contains(e.target)&&n.blur()}}function _onMouseMove(e){if(this.element.removeEventListener("scroll",this._endPan,!0),1&e.buttons){var n=e.clientX-this.clientXStart,r=e.clientY-this.clientYStart,o=this.scrollTopStart-r,s=this.scrollLeftStart-n;this.element.scrollTo?this.element.scrollTo({top:o,left:s,behavior:"instant"}):(this.element.scrollTop=o,this.element.scrollLeft=s),this.overlay.parentNode||document.body.append(this.overlay)}else this._endPan()}function _endPan(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}var CursorTool={SELECT:0,HAND:1,ZOOM:2},_PDFCursorTools_brand=new WeakSet,PDFCursorTools=function(){return _createClass(function e(n){var r=this,o=n.container,s=n.eventBus,u=n.cursorToolOnLoad,d=u===void 0?CursorTool.SELECT:u;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFCursorTools_brand),this.container=o,this.eventBus=s,this.active=CursorTool.SELECT,this.previouslyActive=null,this.handTool=new GrabToPan({element:this.container}),_assertClassBrand(_PDFCursorTools_brand,this,_addEventListeners).call(this),Promise.resolve().then(function(){r.switchTool(d)})},[{key:"activeTool",get:function(){return this.active}},{key:"switchTool",value:function(e){var n=this;if(this.previouslyActive===null&&e!==this.active){var r=function(){switch(n.active){case CursorTool.SELECT:break;case CursorTool.HAND:n.handTool.deactivate()}};switch(e){case CursorTool.SELECT:r();break;case CursorTool.HAND:r(),this.handTool.activate();break;case CursorTool.ZOOM:default:return void console.error('switchTool: "'.concat(e,'" is an unsupported value.'))}this.active=e,_assertClassBrand(_PDFCursorTools_brand,this,_dispatchEvent$2).call(this)}}}])}();function _dispatchEvent$2(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}function _addEventListeners(){var e=this;this.eventBus._on("switchcursortool",function(u){e.switchTool(u.tool)});var n=pdfExports.AnnotationEditorType.NONE,r=PresentationModeState.NORMAL,o=function(){var u,d=e.active;e.switchTool(CursorTool.SELECT),(u=e.previouslyActive)!==null&&u!==void 0||(e.previouslyActive=d)},s=function(){var u=e.previouslyActive;u!==null&&n===pdfExports.AnnotationEditorType.NONE&&r===PresentationModeState.NORMAL&&(e.previouslyActive=null,e.switchTool(u))};this.eventBus._on("secondarytoolbarreset",function(u){e.previouslyActive!==null&&(n=pdfExports.AnnotationEditorType.NONE,r=PresentationModeState.NORMAL,s())}),this.eventBus._on("annotationeditormodechanged",function(u){var d=u.mode;n=d,d===pdfExports.AnnotationEditorType.NONE?s():o()}),this.eventBus._on("presentationmodechanged",function(u){var d=u.state;r=d,d===PresentationModeState.NORMAL?s():d===PresentationModeState.FULLSCREEN&&o()})}var DELAY_BEFORE_HIDING_CONTROLS=3e3,ACTIVE_SELECTOR="pdfPresentationMode",CONTROLS_SELECTOR="pdfPresentationModeControls",MOUSE_SCROLL_COOLDOWN_TIME=50,PAGE_SWITCH_THRESHOLD=.1,SWIPE_MIN_DISTANCE_THRESHOLD=50,SWIPE_ANGLE_THRESHOLD=Math.PI/6,_state=new WeakMap,_args=new WeakMap,_PDFPresentationMode_brand=new WeakSet,PDFPresentationMode=function(){return _createClass(function n(r){var o=r.container,s=r.pdfViewer,u=r.eventBus;_classCallCheck(this,n),_classPrivateMethodInitSpec(this,_PDFPresentationMode_brand),_classPrivateFieldInitSpec(this,_state,PresentationModeState.UNKNOWN),_classPrivateFieldInitSpec(this,_args,null),this.container=o,this.pdfViewer=s,this.eventBus=u,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null},[{key:"request",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r,o,s;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(r=this.container,o=this.pdfViewer,!this.active&&o.pagesCount){u.next=3;break}return u.abrupt("return",!1);case 3:return _assertClassBrand(_PDFPresentationMode_brand,this,_addFullscreenChangeListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_notifyStateChange).call(this,PresentationModeState.CHANGING),s=null,r.webkitRequestFullScreen?s=r.webkitRequestFullScreen():r.mozRequestFullScreen?s=r.mozRequestFullScreen():r.requestFullscreen&&(s=r.requestFullscreen()),_classPrivateFieldSet2(_args,this,{pageNumber:o.currentPageNumber,scaleValue:o.currentScaleValue,scrollMode:o.scrollMode,spreadMode:null,annotationEditorMode:null}),o.spreadMode===SpreadMode.NONE||o.pageViewsReady&&o.hasEqualPageSizes||(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),_classPrivateFieldGet2(_args,this).spreadMode=o.spreadMode),o.annotationEditorMode!==pdfExports.AnnotationEditorType.DISABLE&&(_classPrivateFieldGet2(_args,this).annotationEditorMode=o.annotationEditorMode),u.prev=10,u.next=13,s;case 13:return o.focus(),u.abrupt("return",!0);case 17:u.prev=17,u.t0=u.catch(10),_assertClassBrand(_PDFPresentationMode_brand,this,_removeFullscreenChangeListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_notifyStateChange).call(this,PresentationModeState.NORMAL);case 21:return u.abrupt("return",!1);case 22:case"end":return u.stop()}},n,this,[[10,17]])})),function(){return e.apply(this,arguments)})},{key:"active",get:function(){return _classPrivateFieldGet2(_state,this)===PresentationModeState.CHANGING||_classPrivateFieldGet2(_state,this)===PresentationModeState.FULLSCREEN}}]);var e}();function _mouseWheel(e){if(this.active){e.preventDefault();var n=normalizeWheelEventDelta(e),r=Date.now(),o=this.mouseScrollTimeStamp;if(!(r>o&&r-o<MOUSE_SCROLL_COOLDOWN_TIME)&&((this.mouseScrollDelta>0&&n<0||this.mouseScrollDelta<0&&n>0)&&_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).call(this),this.mouseScrollDelta+=n,Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD)){var s=this.mouseScrollDelta;_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).call(this),(s>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=r)}}}function _notifyStateChange(e){_classPrivateFieldSet2(_state,this,e),this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})}function _enter(){var e=this;_assertClassBrand(_PDFPresentationMode_brand,this,_notifyStateChange).call(this,PresentationModeState.FULLSCREEN),this.container.classList.add(ACTIVE_SELECTOR),setTimeout(function(){e.pdfViewer.scrollMode=ScrollMode.PAGE,_classPrivateFieldGet2(_args,e).spreadMode!==null&&(e.pdfViewer.spreadMode=SpreadMode.NONE),e.pdfViewer.currentPageNumber=_classPrivateFieldGet2(_args,e).pageNumber,e.pdfViewer.currentScaleValue="page-fit",_classPrivateFieldGet2(_args,e).annotationEditorMode!==null&&(e.pdfViewer.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},0),_assertClassBrand(_PDFPresentationMode_brand,this,_addWindowListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_showControls).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()}function _exit(){var e=this,n=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR),setTimeout(function(){_assertClassBrand(_PDFPresentationMode_brand,e,_removeFullscreenChangeListeners).call(e),_assertClassBrand(_PDFPresentationMode_brand,e,_notifyStateChange).call(e,PresentationModeState.NORMAL),e.pdfViewer.scrollMode=_classPrivateFieldGet2(_args,e).scrollMode,_classPrivateFieldGet2(_args,e).spreadMode!==null&&(e.pdfViewer.spreadMode=_classPrivateFieldGet2(_args,e).spreadMode),e.pdfViewer.exitPresentationMode=!0,e.pdfViewer.currentPageNumber=n,e.pdfViewer.currentScaleValue=_classPrivateFieldGet2(_args,e).scaleValue,_classPrivateFieldGet2(_args,e).annotationEditorMode!==null&&(e.pdfViewer.annotationEditorMode=_classPrivateFieldGet2(_args,e).annotationEditorMode),_classPrivateFieldSet2(_args,e,null)},0),_assertClassBrand(_PDFPresentationMode_brand,this,_removeWindowListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_hideControls).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).call(this),this.contextMenuOpen=!1}function _mouseDown(e){var n;if(this.contextMenuOpen)return this.contextMenuOpen=!1,void e.preventDefault();e.button===0&&(e.target.href&&(n=e.target.parentNode)!==null&&n!==void 0&&n.hasAttribute("data-internal-link")||(e.preventDefault(),e.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))}function _contextMenu(){this.contextMenuOpen=!0}function _showControls(){var e=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(CONTROLS_SELECTOR),this.controlsTimeout=setTimeout(function(){e.container.classList.remove(CONTROLS_SELECTOR),delete e.controlsTimeout},DELAY_BEFORE_HIDING_CONTROLS)}function _hideControls(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout)}function _resetMouseScrollState(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}function _touchSwipe(e){if(this.active)if(e.touches.length>1)this.touchSwipeState=null;else switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=e.touches[0].pageX,this.touchSwipeState.endY=e.touches[0].pageY,e.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;var n=0,r=this.touchSwipeState.endX-this.touchSwipeState.startX,o=this.touchSwipeState.endY-this.touchSwipeState.startY,s=Math.abs(Math.atan2(o,r));Math.abs(r)>SWIPE_MIN_DISTANCE_THRESHOLD&&(s<=SWIPE_ANGLE_THRESHOLD||s>=Math.PI-SWIPE_ANGLE_THRESHOLD)?n=r:Math.abs(o)>SWIPE_MIN_DISTANCE_THRESHOLD&&Math.abs(s-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(n=o),n>0?this.pdfViewer.previousPage():n<0&&this.pdfViewer.nextPage()}}function _addWindowListeners(){this.showControlsBind=_assertClassBrand(_PDFPresentationMode_brand,this,_showControls).bind(this),this.mouseDownBind=_assertClassBrand(_PDFPresentationMode_brand,this,_mouseDown).bind(this),this.mouseWheelBind=_assertClassBrand(_PDFPresentationMode_brand,this,_mouseWheel).bind(this),this.resetMouseScrollStateBind=_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).bind(this),this.contextMenuBind=_assertClassBrand(_PDFPresentationMode_brand,this,_contextMenu).bind(this),this.touchSwipeBind=_assertClassBrand(_PDFPresentationMode_brand,this,_touchSwipe).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)}function _removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind}function _fullscreenChange(){document.fullscreenElement?_assertClassBrand(_PDFPresentationMode_brand,this,_enter).call(this):_assertClassBrand(_PDFPresentationMode_brand,this,_exit).call(this)}function _addFullscreenChangeListeners(){this.fullscreenChangeBind=_assertClassBrand(_PDFPresentationMode_brand,this,_fullscreenChange).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind),window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind)}function _removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind}var annotationStore={selectedName:null,annotationsAll:null,notFirstRender:!1,creating:!1,fileData:null,$t:null,signatures:[],highlightLink:!0,highlightForm:!0,annotationStore:null,cropping:!1,ocgsPtr:null,ignoreColors:[]},Signatures=function(){return _createClass(function r(o){var s=o.pdfViewer,u=o.eventBus,d=o.type;_classCallCheck(this,r),this.pdfViewer=s,this.eventBus=u,this.type=d,this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.inkPadding={x:10,y:10},this.strokeWidth=5,this.strokColor="#000",this.onMousedown=this.handleMouseDown.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onHandleGetSignData=this.getData.bind(this),this.onHandleInitCursorStyle=this.initCursorStyle.bind(this),this.init()},[{key:"init",value:function(){var r=document.getElementById("digitalTrackpadCanvas"),o=document.getElementById("electronicTrackpadCanvas");this.canvas=this.type?r:o,this.ctx=this.canvas.getContext("2d"),this.canvas.style.cursor="crosshair",this.canvas.addEventListener("mousedown",this.onMousedown),this.canvas.addEventListener("touchstart",this.onMousedown),this.eventBus._on("getSignData",this.onHandleGetSignData),this.eventBus._on("initCursorStyle",this.onHandleInitCursorStyle)}},{key:"handleMouseDown",value:function(r){if(!r.changedTouches||r.changedTouches.length===1){var o,s,u=r.clientX||r.changedTouches[0].clientX,d=r.clientY||r.changedTouches[0].clientY;isMobile$1&&this.type?(o=d-this.canvas.getBoundingClientRect().top,s=this.canvas.height-(u-this.canvas.getBoundingClientRect().left)):(o=u-this.canvas.getBoundingClientRect().left,s=d-this.canvas.getBoundingClientRect().top),this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.strokColor,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.currentPath.length>0&&(this.inkPath.push(this.currentPath),this.currentPath=[]),this.ctx.beginPath(),this.ctx.moveTo(o,s),this.mousedown=!0,this.pressPoint={x:o,y:s},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){var o,s,u=r.clientX||r.changedTouches[0].clientX,d=r.clientY||r.changedTouches[0].clientY;if(isMobile$1&&this.type?(o=d-this.canvas.getBoundingClientRect().top,s=this.canvas.height-(u-this.canvas.getBoundingClientRect().left)):(o=u-this.canvas.getBoundingClientRect().left,s=d-this.canvas.getBoundingClientRect().top),!(o>this.canvas.width||s>this.canvas.height||o<0||s<0)){var f=!0;this.mousedown&&this.pressPoint&&o==this.pressPoint.x&&s==this.pressPoint.y&&(f=!1),f&&(this.ctx.lineTo(o,s),this.ctx.stroke(),this.path.push([o,s]),this.currentPath.push({x:o,y:s}))}}},{key:"handleMouseUp",value:function(){document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.mousedown=!1,this.pressPoint={x:-1,y:-1};var r=this.getRect();this.rect=r,this.currentPath.length>0&&(this.inkPath.push(this.currentPath),this.currentPath=[])}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.initCursorStyle()}},{key:"reset",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.onMousedown=null,this.onMousemove=null,this.onMouseup=null,this.onHandleGetSignData=null,this.onHandleInitCursorStyle=null}},{key:"getRect",value:function(){var r=[],o=[];this.path.forEach(function(g){r.push(g[0]),o.push(g[1])});var s=Math.min.apply(Math,o),u=Math.min.apply(Math,r),d=Math.max.apply(Math,o),f=Math.max.apply(Math,r);return{left:u,top:s,bottom:d,right:f,width:f-u,height:d-s}}},{key:"getImageBase64",value:function(){var r=null;if(this.path.length!==0){var o=this.getInkPathData();r=o.toDataURL("image/png"),o||(r=(o=this.paintFinalCanvas()).toDataURL("image/jpeg"))}return r}},{key:"toImage",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function r(o){var s,u,d,f,g,m,y,v,_;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:s=o.annotation,u=o.imageBase64,d=s.annotPtr,f=s.rect,g=s.pagePtr,m=null,this.path.length!==0&&(y=this.getInkPathData(),v=y.toDataURL("image/png"),y||(y=this.paintFinalCanvas(),v=y.toDataURL("image/jpeg")),m=v),this.dataURL=m||u,_=m?this.dataURLToArrayBuffer(m):null,d&&(_||u)&&!this.type&&this.eventBus.dispatch("updateSignatureAp",{type:this.type,annotPtr:d,pagePtr:g,rect:f,imageArray:_,imageBase64:u,annotation:s});case 7:case"end":return w.stop()}},r,this)})),function(r){return n.apply(this,arguments)})},{key:"getData",value:function(r){if(this.path.length!==0){this.layerData=r;var o={operate:"add-annot",type:"image",pageIndex:this.layerData.page+1,imageBase64:this.dataURL,date:new Date},s=this.formatPath();s.path;var u=s.rect;o.rect=u,this.eventBus.dispatch("createSignature",o)}}},{key:"calcInkPath",value:function(){if(this.inkPath.length>0){for(var r=0;r<this.inkPath.length;r++)for(var o=0;o<this.inkPath[r].length;o++)isNaN(this.areaBound[0])?(this.areaBound[0]=this.inkPath[r][o].x,this.areaBound[1]=this.inkPath[r][o].y,this.areaBound[2]=this.inkPath[r][o].x,this.areaBound[3]=this.inkPath[r][o].y):(this.areaBound[0]>this.inkPath[r][o].x&&(this.areaBound[0]=this.inkPath[r][o].x),this.areaBound[1]>this.inkPath[r][o].y&&(this.areaBound[1]=this.inkPath[r][o].y),this.areaBound[2]<this.inkPath[r][o].x&&(this.areaBound[2]=this.inkPath[r][o].x),this.areaBound[3]<this.inkPath[r][o].y&&(this.areaBound[3]=this.inkPath[r][o].y));if(!isNaN(this.areaBound[0]))for(var s={x:this.inkPadding.x-this.areaBound[0],y:this.inkPadding.y-this.areaBound[1]},u=0;u<this.inkPath.length;u++)for(var d=0;d<this.inkPath[u].length;d++)this.inkPath[u][d].x=this.inkPath[u][d].x+s.x,this.inkPath[u][d].y=this.inkPath[u][d].y+s.y}}},{key:"getInkPathData",value:function(){if(this.calcInkPath(),!isNaN(this.areaBound[0])){var r=document.createElement("canvas"),o=r.getContext("2d");r.width=this.areaBound[2]-this.areaBound[0]+2*this.inkPadding.x,r.height=this.areaBound[3]-this.areaBound[1]+2*this.inkPadding.y,o.strokeStyle=this.strokColor,o.lineWidth=this.strokeWidth;for(var s=0;s<this.inkPath.length;s++)if(this.inkPath[s].length==1&&(o.beginPath(),o.fillStyle=this.strokColor,o.ellipse(this.inkPath[s][0].x,this.inkPath[s][0].y,this.strokeWidth/2,this.strokeWidth/2,0,0,360,!1),o.fill(),o.closePath()),this.inkPath[s].length>1){o.beginPath(),o.moveTo(this.inkPath[s][0].x,this.inkPath[s][0].y);for(var u=1;u<this.inkPath[s].length;u++)o.lineTo(this.inkPath[s][u].x,this.inkPath[s][u].y);o.stroke(),o.closePath()}return r}return null}},{key:"formatPath",value:function(){for(var r="",o=this.path.length,s=[],u=[],d=0;d<o;d+=2){var f=this.handlePoint(this.path[d]);if(s.push(f.x),u.push(f.y),r+=f.x.toFixed(2)+","+f.y.toFixed(2),d+1<o){var g=this.handlePoint(this.path[d]);s.push(g.x),u.push(g.y),r+=";"+g.x.toFixed(2)+","+g.y.toFixed(2),d+2<o&&(r+=";")}}var m=Math.min.apply(Math,s),y=Math.min.apply(Math,u),v=Math.max.apply(Math,s),_=Math.max.apply(Math,u);return{path:r,rect:"".concat(m,",").concat(y,",").concat(v,",").concat(_)}}},{key:"handlePoint",value:function(r){var o=getInitialPoint({x:r[0]+this.layerData.clickX-this.rect.width/2,y:r[1]+this.layerData.clickY-this.rect.height/2},this.layerData.viewport.scale);return{x:o.x,y:o.y}}},{key:"initCursorStyle",value:function(){this.img&&this.img.remove()}},{key:"paintFinalCanvas",value:function(){var r=document.createElement("canvas"),o=r.getContext("2d");return r.width=this.rect.width,r.height=this.rect.height,o.fillStyle="white",o.fillRect(0,0,r.width,r.height),o.lineWidth=3,o.strokeStyle="black",o.drawImage(this.canvas,this.rect.left,this.rect.top,r.width,r.height,0,0,r.width,r.height),r}},{key:"update",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function r(o){var s,u,d,f;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!this.type){g.next=3;break}return g.next=3,this.toImage(o);case 3:if(s=o.width,u=o.color,s&&(this.strokeWidth=s),u&&(this.strokColor=u),this.inkPath){for(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.strokColor,d=0;d<this.inkPath.length;d++)if(this.inkPath[d].length==1&&(this.ctx.beginPath(),this.ctx.fillStyle=this.strokColor,this.ctx.ellipse(this.inkPath[d][0].x,this.inkPath[d][0].y,this.strokeWidth/2,this.strokeWidth/2,0,0,360,!1),this.ctx.fill(),this.ctx.closePath()),this.inkPath[d].length>1){for(this.ctx.beginPath(),this.ctx.moveTo(this.inkPath[d][0].x,this.inkPath[d][0].y),f=1;f<this.inkPath[d].length;f++)this.ctx.lineTo(this.inkPath[d][f].x,this.inkPath[d][f].y);this.ctx.stroke(),this.ctx.closePath()}}case 7:case"end":return g.stop()}},r,this)})),function(r){return e.apply(this,arguments)})},{key:"dataURLToArrayBuffer",value:function(r){var o=atob(r.split(",")[1]);r.split(";")[0].split(":")[1];for(var s=new ArrayBuffer(o.length),u=new Uint8Array(s),d=0;d<o.length;d++)u[d]=o.charCodeAt(d);return u}},{key:"updateSignature",value:function(r){}}]);var e,n}(),MessageHandler=function(){return _createClass(function e(n,r,o){var s=this;_classCallCheck(this,e),this.sourceName=n,this.targetName=r,this.comObj=o,this.callbackId=1,this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(u){var d=u.data;if(d.targetName===s.sourceName)if(d.callback){var f=d.callbackId,g=s.callbackCapabilities[f];if(!g)throw new Error("Cannot resolve callback ".concat(f));if(delete s.callbackCapabilities[f],d.callback!=="resolve")throw console.log({data:{action:d.data.action,data:d.data.data},message:d.reason&&d.reason.message}),new Error("Unexpected callback case");g.resolve(d.data)}else{var m=s.actionHandler[d.action];if(!m)throw new Error("Unknown action from worker: ".concat(d.action));if(d.callbackId){var y=s.sourceName,v=d.sourceName;new Promise(function(_){_(m(d.data))}).then(function(_){o.postMessage({sourceName:y,targetName:v,callback:"resolve",callbackId:d.callbackId,data:_})},function(_){o.postMessage({data:d,sourceName:y,targetName:v,callback:"reject",callbackId:d.callbackId,reason:_})})}else m(d.data)}},o.addEventListener("message",this._onComObjOnMessage)},[{key:"on",value:function(e,n){var r=this.actionHandler;if(r[e])throw new Error('There is already an actionName called "'.concat(e,'"'));r[e]=n}},{key:"send",value:function(e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n})}},{key:"sendWithPromise",value:function(e,n){var r=this.callbackId++,o=new PromiseExt;this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:n})}catch(s){o.reject(s)}return o.promise}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}])}(),jszip_minExports={},jszip_min={get exports(){return jszip_minExports},set exports(e){jszip_minExports=e}};jszip_min.exports=function e(n,r,o){function s(f,g){if(!r[f]){if(!n[f]){var m=typeof commonjsRequire=="function"&&commonjsRequire;if(!g&&m)return m(f,!0);if(u)return u(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var v=r[f]={exports:{}};n[f][0].call(v.exports,function(_){return s(n[f][1][_]||_)},v,v.exports,e,n,r,o)}return r[f].exports}for(var u=typeof commonjsRequire=="function"&&commonjsRequire,d=0;d<o.length;d++)s(o[d]);return s}({1:[function(e,n,r){var o=e("./utils"),s=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(d){for(var f,g,m,y,v,_,w,x=[],k=0,S=d.length,M=S,E=o.getTypeOf(d)!=="string";k<d.length;)M=S-k,m=E?(f=d[k++],g=k<S?d[k++]:0,k<S?d[k++]:0):(f=d.charCodeAt(k++),g=k<S?d.charCodeAt(k++):0,k<S?d.charCodeAt(k++):0),y=f>>2,v=(3&f)<<4|g>>4,_=1<M?(15&g)<<2|m>>6:64,w=2<M?63&m:64,x.push(u.charAt(y)+u.charAt(v)+u.charAt(_)+u.charAt(w));return x.join("")},r.decode=function(d){var f,g,m,y,v,_,w=0,x=0,k="data:";if(d.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var S,M=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===u.charAt(64)&&M--,d.charAt(d.length-2)===u.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|M):new Array(0|M);w<d.length;)f=u.indexOf(d.charAt(w++))<<2|(y=u.indexOf(d.charAt(w++)))>>4,g=(15&y)<<4|(v=u.indexOf(d.charAt(w++)))>>2,m=(3&v)<<6|(_=u.indexOf(d.charAt(w++))),S[x++]=f,v!==64&&(S[x++]=g),_!==64&&(S[x++]=m);return S}},{"./support":30,"./utils":32}],2:[function(e,n,r){var o=e("./external"),s=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),d=e("./stream/DataLengthProbe");function f(g,m,y,v,_){this.compressedSize=g,this.uncompressedSize=m,this.crc32=y,this.compression=v,this.compressedContent=_}f.prototype={getContentWorker:function(){var g=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return g.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(g,m,y){return g.pipe(new u).pipe(new d("uncompressedSize")).pipe(m.compressWorker(y)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,r){var o=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,r){var o=e("./utils"),s=function(){for(var u,d=[],f=0;f<256;f++){u=f;for(var g=0;g<8;g++)u=1&u?3988292384^u>>>1:u>>>1;d[f]=u}return d}();n.exports=function(u,d){return u!==void 0&&u.length?o.getTypeOf(u)!=="string"?function(f,g,m,y){var v=s,_=y+m;f^=-1;for(var w=y;w<_;w++)f=f>>>8^v[255&(f^g[w])];return~f}(0|d,u,u.length,0):function(f,g,m,y){var v=s,_=y+m;f^=-1;for(var w=y;w<_;w++)f=f>>>8^v[255&(f^g.charCodeAt(w))];return~f}(0|d,u,u.length,0):0}},{"./utils":32}],5:[function(e,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,n,r){var o=null;o=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:o}},{lie:37}],7:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=e("pako"),u=e("./utils"),d=e("./stream/GenericWorker"),f=o?"uint8array":"array";function g(m,y){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=y,this.meta={}}r.magic="\b\0",u.inherits(g,d),g.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,m.data),!1)},g.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(y){m.push({data:y,meta:m.meta})}},r.compressWorker=function(m){return new g("Deflate",m)},r.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,r){function o(v,_){var w,x="";for(w=0;w<_;w++)x+=String.fromCharCode(255&v),v>>>=8;return x}function s(v,_,w,x,k,S){var M,E,P=v.file,T=v.compression,D=S!==f.utf8encode,F=u.transformTo("string",S(P.name)),I=u.transformTo("string",f.utf8encode(P.name)),N=P.comment,q=u.transformTo("string",S(N)),Y=u.transformTo("string",f.utf8encode(N)),Z=I.length!==P.name.length,j=Y.length!==N.length,ne="",le="",J="",O=P.dir,U=P.date,W={crc32:0,compressedSize:0,uncompressedSize:0};_&&!w||(W.crc32=v.crc32,W.compressedSize=v.compressedSize,W.uncompressedSize=v.uncompressedSize);var H=0;_&&(H|=8),D||!Z&&!j||(H|=2048);var X=0,Q=0;O&&(X|=16),k==="UNIX"?(Q=798,X|=function(Se,Pe){var $e=Se;return Se||($e=Pe?16893:33204),(65535&$e)<<16}(P.unixPermissions,O)):(Q=20,X|=function(Se){return 63&(Se||0)}(P.dosPermissions)),M=U.getUTCHours(),M<<=6,M|=U.getUTCMinutes(),M<<=5,M|=U.getUTCSeconds()/2,E=U.getUTCFullYear()-1980,E<<=4,E|=U.getUTCMonth()+1,E<<=5,E|=U.getUTCDate(),Z&&(le=o(1,1)+o(g(F),4)+I,ne+="up"+o(le.length,2)+le),j&&(J=o(1,1)+o(g(q),4)+Y,ne+="uc"+o(J.length,2)+J);var fe="";return fe+=`
\0`,fe+=o(H,2),fe+=T.magic,fe+=o(M,2),fe+=o(E,2),fe+=o(W.crc32,4),fe+=o(W.compressedSize,4),fe+=o(W.uncompressedSize,4),fe+=o(F.length,2),fe+=o(ne.length,2),{fileRecord:m.LOCAL_FILE_HEADER+fe+F+ne,dirRecord:m.CENTRAL_FILE_HEADER+o(Q,2)+fe+o(q.length,2)+"\0\0\0\0"+o(X,4)+o(x,4)+F+ne+q}}var u=e("../utils"),d=e("../stream/GenericWorker"),f=e("../utf8"),g=e("../crc32"),m=e("../signature");function y(v,_,w,x){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=w,this.encodeFileName=x,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(y,d),y.prototype.push=function(v){var _=v.meta.percent||0,w=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,d.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:w?(_+100*(w-x-1))/w:100}}))},y.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var _=this.streamFiles&&!v.file.dir;if(_){var w=s(v,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(v){this.accumulate=!1;var _=this.streamFiles&&!v.file.dir,w=s(v,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),_)this.push({data:function(x){return m.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var v=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var w=this.bytesWritten-v,x=function(k,S,M,E,P){var T=u.transformTo("string",P(E));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(k,2)+o(k,2)+o(S,4)+o(M,4)+o(T.length,2)+T}(this.dirRecords.length,w,v,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(v){this._sources.push(v);var _=this;return v.on("data",function(w){_.processChunk(w)}),v.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),v.on("error",function(w){_.error(w)}),this},y.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(v){var _=this._sources;if(!d.prototype.error.call(this,v))return!1;for(var w=0;w<_.length;w++)try{_[w].error(v)}catch{}return!0},y.prototype.lock=function(){d.prototype.lock.call(this);for(var v=this._sources,_=0;_<v.length;_++)v[_].lock()},n.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,r){var o=e("../compressions"),s=e("./ZipFileWorker");r.generateWorker=function(u,d,f){var g=new s(d.streamFiles,f,d.platform,d.encodeFileName),m=0;try{u.forEach(function(y,v){m++;var _=function(S,M){var E=S||M,P=o[E];if(!P)throw new Error(E+" is not a valid compression method !");return P}(v.options.compression,d.compression),w=v.options.compressionOptions||d.compressionOptions||{},x=v.dir,k=v.date;v._compressWorker(_,w).withStreamInfo("file",{name:y,dir:x,date:k,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(g)}),g.entriesCount=m}catch(y){g.error(y)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var u in this)typeof this[u]!="function"&&(s[u]=this[u]);return s}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(s,u){return new o().loadAsync(s,u)},o.external=e("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,r){var o=e("./utils"),s=e("./external"),u=e("./utf8"),d=e("./zipEntries"),f=e("./stream/Crc32Probe"),g=e("./nodejsUtils");function m(y){return new s.Promise(function(v,_){var w=y.decompressed.getContentWorker().pipe(new f);w.on("error",function(x){_(x)}).on("end",function(){w.streamInfo.crc32!==y.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}n.exports=function(y,v){var _=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),g.isNode&&g.isStream(y)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",y,!0,v.optimizedBinaryString,v.base64).then(function(w){var x=new d(v);return x.load(w),x}).then(function(w){var x=[s.Promise.resolve(w)],k=w.files;if(v.checkCRC32)for(var S=0;S<k.length;S++)x.push(m(k[S]));return s.Promise.all(x)}).then(function(w){for(var x=w.shift(),k=x.files,S=0;S<k.length;S++){var M=k[S],E=M.fileNameStr,P=o.resolve(M.fileNameStr);_.file(P,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:v.createFolders}),M.dir||(_.file(P).unsafeOriginalName=E)}return x.zipComment.length&&(_.comment=x.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,r){var o=e("../utils"),s=e("../stream/GenericWorker");function u(d,f){s.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(u,s),u.prototype._bindStream=function(d){var f=this;(this._stream=d).pause(),d.on("data",function(g){f.push({data:g,meta:{percent:0}})}).on("error",function(g){f.isPaused?this.generatedError=g:f.error(g)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,r){var o=e("readable-stream").Readable;function s(u,d,f){o.call(this,d),this._helper=u;var g=this;u.on("data",function(m,y){g.push(m)||g._helper.pause(),f&&f(y)}).on("error",function(m){g.emit("error",m)}).on("end",function(){g.push(null)})}e("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,n,r){function o(P,T,D){var F,I=u.getTypeOf(T),N=u.extend(D||{},g);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(P=k(P)),N.createFolders&&(F=x(P))&&S.call(this,F,!0);var q=I==="string"&&N.binary===!1&&N.base64===!1;D&&D.binary!==void 0||(N.binary=!q),(T instanceof m&&T.uncompressedSize===0||N.dir||!T||T.length===0)&&(N.base64=!1,N.binary=!0,T="",N.compression="STORE",I="string");var Y=null;Y=T instanceof m||T instanceof d?T:_.isNode&&_.isStream(T)?new w(P,T):u.prepareContent(P,T,N.binary,N.optimizedBinaryString,N.base64);var Z=new y(P,Y,N);this.files[P]=Z}var s=e("./utf8"),u=e("./utils"),d=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),g=e("./defaults"),m=e("./compressedObject"),y=e("./zipObject"),v=e("./generate"),_=e("./nodejsUtils"),w=e("./nodejs/NodejsStreamInputAdapter"),x=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var T=P.lastIndexOf("/");return 0<T?P.substring(0,T):""},k=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},S=function(P,T){return T=T!==void 0?T:g.createFolders,P=k(P),this.files[P]||o.call(this,P,null,{dir:!0,createFolders:T}),this.files[P]};function M(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var T,D,F;for(T in this.files)F=this.files[T],(D=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&P(D,F)},filter:function(P){var T=[];return this.forEach(function(D,F){P(D,F)&&T.push(F)}),T},file:function(P,T,D){if(arguments.length!==1)return P=this.root+P,o.call(this,P,T,D),this;if(M(P)){var F=P;return this.filter(function(N,q){return!q.dir&&F.test(N)})}var I=this.files[this.root+P];return I&&!I.dir?I:null},folder:function(P){if(!P)return this;if(M(P))return this.filter(function(I,N){return N.dir&&P.test(I)});var T=this.root+P,D=S.call(this,T),F=this.clone();return F.root=D.name,F},remove:function(P){P=this.root+P;var T=this.files[P];if(T||(P.slice(-1)!=="/"&&(P+="/"),T=this.files[P]),T&&!T.dir)delete this.files[P];else for(var D=this.filter(function(I,N){return N.name.slice(0,P.length)===P}),F=0;F<D.length;F++)delete this.files[D[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var T,D={};try{if((D=u.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");u.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var F=D.comment||this.comment||"";T=v.generateWorker(this,D,F)}catch(I){(T=new d("error")).error(I)}return new f(T,D.type||"string",D.mimeType)},generateAsync:function(P,T){return this.generateInternalStream(P).accumulate(T)},generateNodeStream:function(P,T){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(T)}};n.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,r){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,r){var o=e("./DataReader");function s(u){o.call(this,u);for(var d=0;d<this.data.length;d++)u[d]=255&u[d]}e("../utils").inherits(s,o),s.prototype.byteAt=function(u){return this.data[this.zero+u]},s.prototype.lastIndexOfSignature=function(u){for(var d=u.charCodeAt(0),f=u.charCodeAt(1),g=u.charCodeAt(2),m=u.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===d&&this.data[y+1]===f&&this.data[y+2]===g&&this.data[y+3]===m)return y-this.zero;return-1},s.prototype.readAndCheckSignature=function(u){var d=u.charCodeAt(0),f=u.charCodeAt(1),g=u.charCodeAt(2),m=u.charCodeAt(3),y=this.readData(4);return d===y[0]&&f===y[1]&&g===y[2]&&m===y[3]},s.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,n,r){var o=e("../utils");function s(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var d,f=0;for(this.checkOffset(u),d=this.index+u-1;d>=this.index;d--)f=(f<<8)+this.byteAt(d);return this.index+=u,f},readString:function(u){return o.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},n.exports=s},{"../utils":32}],19:[function(e,n,r){var o=e("./Uint8ArrayReader");function s(u){o.call(this,u)}e("../utils").inherits(s,o),s.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,r){var o=e("./DataReader");function s(u){o.call(this,u)}e("../utils").inherits(s,o),s.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},s.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},s.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},s.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,n,r){var o=e("./ArrayReader");function s(u){o.call(this,u)}e("../utils").inherits(s,o),s.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,r){var o=e("../utils"),s=e("../support"),u=e("./ArrayReader"),d=e("./StringReader"),f=e("./NodeBufferReader"),g=e("./Uint8ArrayReader");n.exports=function(m){var y=o.getTypeOf(m);return o.checkSupport(y),y!=="string"||s.uint8array?y==="nodebuffer"?new f(m):s.uint8array?new g(o.transformTo("uint8array",m)):new u(o.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,r){var o=e("./GenericWorker"),s=e("../utils");function u(d){o.call(this,"ConvertWorker to "+d),this.destType=d}s.inherits(u,o),u.prototype.processChunk=function(d){this.push({data:s.transformTo(this.destType,d.data),meta:d.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,r){var o=e("./GenericWorker"),s=e("../crc32");function u(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,o),u.prototype.processChunk=function(d){this.streamInfo.crc32=s(d.data,this.streamInfo.crc32||0),this.push(d)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function u(d){s.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}o.inherits(u,s),u.prototype.processChunk=function(d){if(d){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+d.data.length}s.prototype.processChunk.call(this,d)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,r){var o=e("../utils"),s=e("./GenericWorker");function u(d){s.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(g){f.dataIsReady=!0,f.data=g,f.max=g&&g.length||0,f.type=o.getTypeOf(g),f.isPaused||f._tickAndRepeat()},function(g){f.error(g)})}o.inherits(u,s),u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,f);break;case"uint8array":d=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":d=this.data.slice(this.index,f)}return this.index=f,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,r){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,u){return this._listeners[s].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,u){if(this._listeners[s])for(var d=0;d<this._listeners[s].length;d++)this._listeners[s][d].call(this,u)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var u=this;return s.on("data",function(d){u.processChunk(d)}),s.on("end",function(){u.end()}),s.on("error",function(d){u.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,u){return this.extraStreamInfo[s]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=o},{}],29:[function(e,n,r){var o=e("../utils"),s=e("./ConvertWorker"),u=e("./GenericWorker"),d=e("../base64"),f=e("../support"),g=e("../external"),m=null;if(f.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(_,w){return new g.Promise(function(x,k){var S=[],M=_._internalType,E=_._outputType,P=_._mimeType;_.on("data",function(T,D){S.push(T),w&&w(D)}).on("error",function(T){S=[],k(T)}).on("end",function(){try{var T=function(D,F,I){switch(D){case"blob":return o.newBlob(o.transformTo("arraybuffer",F),I);case"base64":return d.encode(F);default:return o.transformTo(D,F)}}(E,function(D,F){var I,N=0,q=null,Y=0;for(I=0;I<F.length;I++)Y+=F[I].length;switch(D){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(q=new Uint8Array(Y),I=0;I<F.length;I++)q.set(F[I],N),N+=F[I].length;return q;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+D+"'")}}(M,S),P);x(T)}catch(D){k(D)}S=[]}).resume()})}function v(_,w,x){var k=w;switch(w){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=w,this._mimeType=x,o.checkSupport(k),this._worker=_.pipe(new s(k)),_.lock()}catch(S){this._worker=new u("error"),this._worker.error(S)}}v.prototype={accumulate:function(_){return y(this,_)},on:function(_,w){var x=this;return _==="data"?this._worker.on(_,function(k){w.call(x,k.data,k.meta)}):this._worker.on(_,function(){o.delay(w,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},_)}},n.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),r.blob=s.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,r){for(var o=e("./utils"),s=e("./support"),u=e("./nodejsUtils"),d=e("./stream/GenericWorker"),f=new Array(256),g=0;g<256;g++)f[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function y(){d.call(this,"utf-8 encode")}f[254]=f[254]=1,r.utf8encode=function(v){return s.nodebuffer?u.newBufferFrom(v,"utf-8"):function(_){var w,x,k,S,M,E=_.length,P=0;for(S=0;S<E;S++)(64512&(x=_.charCodeAt(S)))==55296&&S+1<E&&(64512&(k=_.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(k-56320),S++),P+=x<128?1:x<2048?2:x<65536?3:4;for(w=s.uint8array?new Uint8Array(P):new Array(P),S=M=0;M<P;S++)(64512&(x=_.charCodeAt(S)))==55296&&S+1<E&&(64512&(k=_.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(k-56320),S++),x<128?w[M++]=x:(x<2048?w[M++]=192|x>>>6:(x<65536?w[M++]=224|x>>>12:(w[M++]=240|x>>>18,w[M++]=128|x>>>12&63),w[M++]=128|x>>>6&63),w[M++]=128|63&x);return w}(v)},r.utf8decode=function(v){return s.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):function(_){var w,x,k,S,M=_.length,E=new Array(2*M);for(w=x=0;w<M;)if((k=_[w++])<128)E[x++]=k;else if(4<(S=f[k]))E[x++]=65533,w+=S-1;else{for(k&=S===2?31:S===3?15:7;1<S&&w<M;)k=k<<6|63&_[w++],S--;1<S?E[x++]=65533:k<65536?E[x++]=k:(k-=65536,E[x++]=55296|k>>10&1023,E[x++]=56320|1023&k)}return E.length!==x&&(E.subarray?E=E.subarray(0,x):E.length=x),o.applyFromCharCode(E)}(v=o.transformTo(s.uint8array?"uint8array":"array",v))},o.inherits(m,d),m.prototype.processChunk=function(v){var _=o.transformTo(s.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var w=_;(_=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),_.set(w,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var x=function(S,M){var E;for((M=M||S.length)>S.length&&(M=S.length),E=M-1;0<=E&&(192&S[E])==128;)E--;return E<0||E===0?M:E+f[S[E]]>M?E:M}(_),k=_;x!==_.length&&(s.uint8array?(k=_.subarray(0,x),this.leftOver=_.subarray(x,_.length)):(k=_.slice(0,x),this.leftOver=_.slice(x,_.length))),this.push({data:r.utf8decode(k),meta:v.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=m,o.inherits(y,d),y.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,r){var o=e("./support"),s=e("./base64"),u=e("./nodejsUtils"),d=e("./external");function f(w){return w}function g(w,x){for(var k=0;k<w.length;++k)x[k]=255&w.charCodeAt(k);return x}e("setimmediate"),r.newBlob=function(w,x){r.checkSupport("blob");try{return new Blob([w],{type:x})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(w),k.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(w,x,k){var S=[],M=0,E=w.length;if(E<=k)return String.fromCharCode.apply(null,w);for(;M<E;)x==="array"||x==="nodebuffer"?S.push(String.fromCharCode.apply(null,w.slice(M,Math.min(M+k,E)))):S.push(String.fromCharCode.apply(null,w.subarray(M,Math.min(M+k,E)))),M+=k;return S.join("")},stringifyByChar:function(w){for(var x="",k=0;k<w.length;k++)x+=String.fromCharCode(w[k]);return x},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}}()}};function y(w){var x=65536,k=r.getTypeOf(w),S=!0;if(k==="uint8array"?S=m.applyCanBeUsed.uint8array:k==="nodebuffer"&&(S=m.applyCanBeUsed.nodebuffer),S)for(;1<x;)try{return m.stringifyByChunk(w,k,x)}catch{x=Math.floor(x/2)}return m.stringifyByChar(w)}function v(w,x){for(var k=0;k<w.length;k++)x[k]=w[k];return x}r.applyFromCharCode=y;var _={};_.string={string:f,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return _.string.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:function(w){return g(w,u.allocBuffer(w.length))}},_.array={string:y,array:f,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(w)}},_.arraybuffer={string:function(w){return y(new Uint8Array(w))},array:function(w){return v(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:f,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(new Uint8Array(w))}},_.uint8array={string:y,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:f,nodebuffer:function(w){return u.newBufferFrom(w)}},_.nodebuffer={string:y,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return _.nodebuffer.uint8array(w).buffer},uint8array:function(w){return v(w,new Uint8Array(w.length))},nodebuffer:f},r.transformTo=function(w,x){if(x=x||"",!w)return x;r.checkSupport(w);var k=r.getTypeOf(x);return _[k][w](x)},r.resolve=function(w){for(var x=w.split("/"),k=[],S=0;S<x.length;S++){var M=x[S];M==="."||M===""&&S!==0&&S!==x.length-1||(M===".."?k.pop():k.push(M))}return k.join("/")},r.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":o.nodebuffer&&u.isBuffer(w)?"nodebuffer":o.uint8array&&w instanceof Uint8Array?"uint8array":o.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(w){if(!o[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(w){var x,k,S="";for(k=0;k<(w||"").length;k++)S+="\\x"+((x=w.charCodeAt(k))<16?"0":"")+x.toString(16).toUpperCase();return S},r.delay=function(w,x,k){setImmediate(function(){w.apply(k||null,x||[])})},r.inherits=function(w,x){function k(){}k.prototype=x.prototype,w.prototype=new k},r.extend=function(){var w,x,k={};for(w=0;w<arguments.length;w++)for(x in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],x)&&k[x]===void 0&&(k[x]=arguments[w][x]);return k},r.prepareContent=function(w,x,k,S,M){return d.Promise.resolve(x).then(function(E){return o.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new d.Promise(function(P,T){var D=new FileReader;D.onload=function(F){P(F.target.result)},D.onerror=function(F){T(F.target.error)},D.readAsArrayBuffer(E)}):E}).then(function(E){var P=r.getTypeOf(E);return P?(P==="arraybuffer"?E=r.transformTo("uint8array",E):P==="string"&&(M?E=s.decode(E):k&&S!==!0&&(E=function(T){return g(T,o.uint8array?new Uint8Array(T.length):new Array(T.length))}(E))),E):d.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),u=e("./signature"),d=e("./zipEntry"),f=e("./support");function g(m){this.files=[],this.loadOptions=m}g.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(y)+", expected "+s.pretty(m)+")")}},isSignature:function(m,y){var v=this.reader.index;this.reader.setIndex(m);var _=this.reader.readString(4)===y;return this.reader.setIndex(v),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=f.uint8array?"uint8array":"array",v=s.transformTo(y,m);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,y,v,_=this.zip64EndOfCentralSize-44;0<_;)m=this.reader.readInt(2),y=this.reader.readInt(4),v=this.reader.readData(y),this.zip64ExtensibleData[m]={id:m,length:y,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,y;for(m=0;m<this.files.length;m++)y=this.files[m],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var y=m;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var _=y-v;if(0<_)this.isSignature(y,u.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(m){this.reader=o(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,r){var o=e("./reader/readerFor"),s=e("./utils"),u=e("./compressedObject"),d=e("./crc32"),f=e("./utf8"),g=e("./compressions"),m=e("./support");function y(v,_){this.options=v,this.loadOptions=_}y.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(v){var _,w;if(v.skip(22),this.fileNameLength=v.readInt(2),w=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(x){for(var k in g)if(Object.prototype.hasOwnProperty.call(g,k)&&g[k].magic===x)return g[k];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,_,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var _=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(_),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var _,w,x,k=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<k;)_=v.readInt(2),w=v.readInt(2),x=v.readData(w),this.extraFields[_]={id:_,length:w,value:x};v.setIndex(k)},handleUTF8:function(){var v=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var w=s.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var k=s.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var _=o(v.value);return _.readInt(1)!==1||d(this.fileName)!==_.readInt(4)?null:f.utf8decode(_.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var _=o(v.value);return _.readInt(1)!==1||d(this.fileComment)!==_.readInt(4)?null:f.utf8decode(_.readData(v.length-5))}return null}},n.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,r){function o(_,w,x){this.name=_,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=w,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),d=e("./utf8"),f=e("./compressedObject"),g=e("./stream/GenericWorker");o.prototype={internalStream:function(_){var w=null,x="string";try{if(!_)throw new Error("No output type specified.");var k=(x=_.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),w=this._decompressWorker();var S=!this._dataBinary;S&&!k&&(w=w.pipe(new d.Utf8EncodeWorker)),!S&&k&&(w=w.pipe(new d.Utf8DecodeWorker))}catch(M){(w=new g("error")).error(M)}return new s(w,x,"")},async:function(_,w){return this.internalStream(_).accumulate(w)},nodeStream:function(_,w){return this.internalStream(_||"nodebuffer").toNodejsStream(w)},_compressWorker:function(_,w){if(this._data instanceof f&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new d.Utf8EncodeWorker)),f.createWorkerFrom(x,_,w)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof g?this._data:new u(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<m.length;v++)o.prototype[m[v]]=y;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(o){var s,u,d=o.MutationObserver||o.WebKitMutationObserver;if(d){var f=0,g=new d(_),m=o.document.createTextNode("");g.observe(m,{characterData:!0}),s=function(){m.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var w=o.document.createElement("script");w.onreadystatechange=function(){_(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},o.document.documentElement.appendChild(w)}:function(){setTimeout(_,0)};else{var y=new o.MessageChannel;y.port1.onmessage=_,s=function(){y.port2.postMessage(0)}}var v=[];function _(){var w,x;u=!0;for(var k=v.length;k;){for(x=v,v=[],w=-1;++w<k;)x[w]();k=v.length}u=!1}n.exports=function(w){v.push(w)!==1||u||s()}}).call(this,commonjsGlobal$1!==void 0?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,r){var o=e("immediate");function s(){}var u={},d=["REJECTED"],f=["FULFILLED"],g=["PENDING"];function m(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,k!==s&&w(this,k)}function y(k,S,M){this.promise=k,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function v(k,S,M){o(function(){var E;try{E=S(M)}catch(P){return u.reject(k,P)}E===k?u.reject(k,new TypeError("Cannot resolve promise with itself")):u.resolve(k,E)})}function _(k){var S=k&&k.then;if(k&&(_typeof$1(k)=="object"||typeof k=="function")&&typeof S=="function")return function(){S.apply(k,arguments)}}function w(k,S){var M=!1;function E(D){M||(M=!0,u.reject(k,D))}function P(D){M||(M=!0,u.resolve(k,D))}var T=x(function(){S(P,E)});T.status==="error"&&E(T.value)}function x(k,S){var M={};try{M.value=k(S),M.status="success"}catch(E){M.status="error",M.value=E}return M}(n.exports=m).prototype.finally=function(k){if(typeof k!="function")return this;var S=this.constructor;return this.then(function(M){return S.resolve(k()).then(function(){return M})},function(M){return S.resolve(k()).then(function(){throw M})})},m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,S){if(typeof k!="function"&&this.state===f||typeof S!="function"&&this.state===d)return this;var M=new this.constructor(s);return this.state!==g?v(M,this.state===f?k:S,this.outcome):this.queue.push(new y(M,k,S)),M},y.prototype.callFulfilled=function(k){u.resolve(this.promise,k)},y.prototype.otherCallFulfilled=function(k){v(this.promise,this.onFulfilled,k)},y.prototype.callRejected=function(k){u.reject(this.promise,k)},y.prototype.otherCallRejected=function(k){v(this.promise,this.onRejected,k)},u.resolve=function(k,S){var M=x(_,S);if(M.status==="error")return u.reject(k,M.value);var E=M.value;if(E)w(k,E);else{k.state=f,k.outcome=S;for(var P=-1,T=k.queue.length;++P<T;)k.queue[P].callFulfilled(S)}return k},u.reject=function(k,S){k.state=d,k.outcome=S;for(var M=-1,E=k.queue.length;++M<E;)k.queue[M].callRejected(S);return k},m.resolve=function(k){return k instanceof this?k:u.resolve(new this(s),k)},m.reject=function(k){var S=new this(s);return u.reject(S,k)},m.all=function(k){var S=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=k.length,E=!1;if(!M)return this.resolve([]);for(var P=new Array(M),T=0,D=-1,F=new this(s);++D<M;)I(k[D],D);return F;function I(N,q){S.resolve(N).then(function(Y){P[q]=Y,++T!==M||E||(E=!0,u.resolve(F,P))},function(Y){E||(E=!0,u.reject(F,Y))})}},m.race=function(k){var S=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=k.length,E=!1;if(!M)return this.resolve([]);for(var P,T=-1,D=new this(s);++T<M;)P=k[T],S.resolve(P).then(function(F){E||(E=!0,u.resolve(D,F))},function(F){E||(E=!0,u.reject(D,F))});return D}},{immediate:36}],38:[function(e,n,r){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,r){var o=e("./zlib/deflate"),s=e("./utils/common"),u=e("./utils/strings"),d=e("./zlib/messages"),f=e("./zlib/zstream"),g=Object.prototype.toString,m=0,y=-1,v=0,_=8;function w(k){if(!(this instanceof w))return new w(k);this.options=s.assign({level:y,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},k||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var M=o.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(M!==m)throw new Error(d[M]);if(S.header&&o.deflateSetHeader(this.strm,S.header),S.dictionary){var E;if(E=typeof S.dictionary=="string"?u.string2buf(S.dictionary):g.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(M=o.deflateSetDictionary(this.strm,E))!==m)throw new Error(d[M]);this._dict_set=!0}}function x(k,S){var M=new w(S);if(M.push(k,!0),M.err)throw M.msg||d[M.err];return M.result}w.prototype.push=function(k,S){var M,E,P=this.strm,T=this.options.chunkSize;if(this.ended)return!1;E=S===~~S?S:S===!0?4:0,typeof k=="string"?P.input=u.string2buf(k):g.call(k)==="[object ArrayBuffer]"?P.input=new Uint8Array(k):P.input=k,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new s.Buf8(T),P.next_out=0,P.avail_out=T),(M=o.deflate(P,E))!==1&&M!==m)return this.onEnd(M),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(s.shrinkBuf(P.output,P.next_out))):this.onData(s.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&M!==1);return E===4?(M=o.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===m):E!==2||(this.onEnd(m),!(P.avail_out=0))},w.prototype.onData=function(k){this.chunks.push(k)},w.prototype.onEnd=function(k){k===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},r.Deflate=w,r.deflate=x,r.deflateRaw=function(k,S){return(S=S||{}).raw=!0,x(k,S)},r.gzip=function(k,S){return(S=S||{}).gzip=!0,x(k,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,r){var o=e("./zlib/inflate"),s=e("./utils/common"),u=e("./utils/strings"),d=e("./zlib/constants"),f=e("./zlib/messages"),g=e("./zlib/zstream"),m=e("./zlib/gzheader"),y=Object.prototype.toString;function v(w){if(!(this instanceof v))return new v(w);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},w||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||w&&w.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var k=o.inflateInit2(this.strm,x.windowBits);if(k!==d.Z_OK)throw new Error(f[k]);this.header=new m,o.inflateGetHeader(this.strm,this.header)}function _(w,x){var k=new v(x);if(k.push(w,!0),k.err)throw k.msg||f[k.err];return k.result}v.prototype.push=function(w,x){var k,S,M,E,P,T,D=this.strm,F=this.options.chunkSize,I=this.options.dictionary,N=!1;if(this.ended)return!1;S=x===~~x?x:x===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof w=="string"?D.input=u.binstring2buf(w):y.call(w)==="[object ArrayBuffer]"?D.input=new Uint8Array(w):D.input=w,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new s.Buf8(F),D.next_out=0,D.avail_out=F),(k=o.inflate(D,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&I&&(T=typeof I=="string"?u.string2buf(I):y.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,k=o.inflateSetDictionary(this.strm,T)),k===d.Z_BUF_ERROR&&N===!0&&(k=d.Z_OK,N=!1),k!==d.Z_STREAM_END&&k!==d.Z_OK)return this.onEnd(k),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&k!==d.Z_STREAM_END&&(D.avail_in!==0||S!==d.Z_FINISH&&S!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=u.utf8border(D.output,D.next_out),E=D.next_out-M,P=u.buf2string(D.output,M),D.next_out=E,D.avail_out=F-E,E&&s.arraySet(D.output,D.output,M,E,0),this.onData(P)):this.onData(s.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(N=!0)}while((0<D.avail_in||D.avail_out===0)&&k!==d.Z_STREAM_END);return k===d.Z_STREAM_END&&(S=d.Z_FINISH),S===d.Z_FINISH?(k=o.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===d.Z_OK):S!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(D.avail_out=0))},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},r.Inflate=v,r.inflate=_,r.inflateRaw=function(w,x){return(x=x||{}).raw=!0,_(w,x)},r.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var g=f.shift();if(g){if(_typeof$1(g)!="object")throw new TypeError(g+"must be non-object");for(var m in g)g.hasOwnProperty(m)&&(d[m]=g[m])}}return d},r.shrinkBuf=function(d,f){return d.length===f?d:d.subarray?d.subarray(0,f):(d.length=f,d)};var s={arraySet:function(d,f,g,m,y){if(f.subarray&&d.subarray)d.set(f.subarray(g,g+m),y);else for(var v=0;v<m;v++)d[y+v]=f[g+v]},flattenChunks:function(d){var f,g,m,y,v,_;for(f=m=0,g=d.length;f<g;f++)m+=d[f].length;for(_=new Uint8Array(m),f=y=0,g=d.length;f<g;f++)v=d[f],_.set(v,y),y+=v.length;return _}},u={arraySet:function(d,f,g,m,y){for(var v=0;v<m;v++)d[y+v]=f[g+v]},flattenChunks:function(d){return[].concat.apply([],d)}};r.setTyped=function(d){d?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(o)},{}],42:[function(e,n,r){var o=e("./common"),s=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var d=new o.Buf8(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function g(m,y){if(y<65537&&(m.subarray&&u||!m.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(m,y));for(var v="",_=0;_<y;_++)v+=String.fromCharCode(m[_]);return v}d[254]=d[254]=1,r.string2buf=function(m){var y,v,_,w,x,k=m.length,S=0;for(w=0;w<k;w++)(64512&(v=m.charCodeAt(w)))==55296&&w+1<k&&(64512&(_=m.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),w++),S+=v<128?1:v<2048?2:v<65536?3:4;for(y=new o.Buf8(S),w=x=0;x<S;w++)(64512&(v=m.charCodeAt(w)))==55296&&w+1<k&&(64512&(_=m.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),w++),v<128?y[x++]=v:(v<2048?y[x++]=192|v>>>6:(v<65536?y[x++]=224|v>>>12:(y[x++]=240|v>>>18,y[x++]=128|v>>>12&63),y[x++]=128|v>>>6&63),y[x++]=128|63&v);return y},r.buf2binstring=function(m){return g(m,m.length)},r.binstring2buf=function(m){for(var y=new o.Buf8(m.length),v=0,_=y.length;v<_;v++)y[v]=m.charCodeAt(v);return y},r.buf2string=function(m,y){var v,_,w,x,k=y||m.length,S=new Array(2*k);for(v=_=0;v<k;)if((w=m[v++])<128)S[_++]=w;else if(4<(x=d[w]))S[_++]=65533,v+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&v<k;)w=w<<6|63&m[v++],x--;1<x?S[_++]=65533:w<65536?S[_++]=w:(w-=65536,S[_++]=55296|w>>10&1023,S[_++]=56320|1023&w)}return g(S,_)},r.utf8border=function(m,y){var v;for((y=y||m.length)>m.length&&(y=m.length),v=y-1;0<=v&&(192&m[v])==128;)v--;return v<0||v===0?y:v+d[m[v]]>y?v:y}},{"./common":41}],43:[function(e,n,r){n.exports=function(o,s,u,d){for(var f=65535&o,g=o>>>16&65535,m=0;u!==0;){for(u-=m=2e3<u?2e3:u;g=g+(f=f+s[d++]|0)|0,--m;);f%=65521,g%=65521}return f|g<<16}},{}],44:[function(e,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,r){var o=function(){for(var s,u=[],d=0;d<256;d++){s=d;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[d]=s}return u}();n.exports=function(s,u,d,f){var g=o,m=f+d;s^=-1;for(var y=f;y<m;y++)s=s>>>8^g[255&(s^u[y])];return~s}},{}],46:[function(e,n,r){var o,s=e("../utils/common"),u=e("./trees"),d=e("./adler32"),f=e("./crc32"),g=e("./messages"),m=0,y=4,v=0,_=-2,w=-1,x=4,k=2,S=8,M=9,E=286,P=30,T=19,D=2*E+1,F=15,I=3,N=258,q=N+I+1,Y=42,Z=113,j=1,ne=2,le=3,J=4;function O(ve,ye){return ve.msg=g[ye],ye}function U(ve){return(ve<<1)-(4<ve?9:0)}function W(ve){for(var ye=ve.length;0<=--ye;)ve[ye]=0}function H(ve){var ye=ve.state,we=ye.pending;we>ve.avail_out&&(we=ve.avail_out),we!==0&&(s.arraySet(ve.output,ye.pending_buf,ye.pending_out,we,ve.next_out),ve.next_out+=we,ye.pending_out+=we,ve.total_out+=we,ve.avail_out-=we,ye.pending-=we,ye.pending===0&&(ye.pending_out=0))}function X(ve,ye){u._tr_flush_block(ve,0<=ve.block_start?ve.block_start:-1,ve.strstart-ve.block_start,ye),ve.block_start=ve.strstart,H(ve.strm)}function Q(ve,ye){ve.pending_buf[ve.pending++]=ye}function fe(ve,ye){ve.pending_buf[ve.pending++]=ye>>>8&255,ve.pending_buf[ve.pending++]=255&ye}function Se(ve,ye){var we,ke,Me=ve.max_chain_length,Le=ve.strstart,Fe=ve.prev_length,ze=ve.nice_match,te=ve.strstart>ve.w_size-q?ve.strstart-(ve.w_size-q):0,oe=ve.window,_e=ve.w_mask,Ce=ve.prev,Ee=ve.strstart+N,Te=oe[Le+Fe-1],Re=oe[Le+Fe];ve.prev_length>=ve.good_match&&(Me>>=2),ze>ve.lookahead&&(ze=ve.lookahead);do if(oe[(we=ye)+Fe]===Re&&oe[we+Fe-1]===Te&&oe[we]===oe[Le]&&oe[++we]===oe[Le+1]){Le+=2,we++;do;while(oe[++Le]===oe[++we]&&oe[++Le]===oe[++we]&&oe[++Le]===oe[++we]&&oe[++Le]===oe[++we]&&oe[++Le]===oe[++we]&&oe[++Le]===oe[++we]&&oe[++Le]===oe[++we]&&oe[++Le]===oe[++we]&&Le<Ee);if(ke=N-(Ee-Le),Le=Ee-N,Fe<ke){if(ve.match_start=ye,ze<=(Fe=ke))break;Te=oe[Le+Fe-1],Re=oe[Le+Fe]}}while((ye=Ce[ye&_e])>te&&--Me!=0);return Fe<=ve.lookahead?Fe:ve.lookahead}function Pe(ve){var ye,we,ke,Me,Le,Fe,ze,te,oe,_e,Ce=ve.w_size;do{if(Me=ve.window_size-ve.lookahead-ve.strstart,ve.strstart>=Ce+(Ce-q)){for(s.arraySet(ve.window,ve.window,Ce,Ce,0),ve.match_start-=Ce,ve.strstart-=Ce,ve.block_start-=Ce,ye=we=ve.hash_size;ke=ve.head[--ye],ve.head[ye]=Ce<=ke?ke-Ce:0,--we;);for(ye=we=Ce;ke=ve.prev[--ye],ve.prev[ye]=Ce<=ke?ke-Ce:0,--we;);Me+=Ce}if(ve.strm.avail_in===0)break;if(Fe=ve.strm,ze=ve.window,te=ve.strstart+ve.lookahead,_e=void 0,(oe=Me)<(_e=Fe.avail_in)&&(_e=oe),we=_e===0?0:(Fe.avail_in-=_e,s.arraySet(ze,Fe.input,Fe.next_in,_e,te),Fe.state.wrap===1?Fe.adler=d(Fe.adler,ze,_e,te):Fe.state.wrap===2&&(Fe.adler=f(Fe.adler,ze,_e,te)),Fe.next_in+=_e,Fe.total_in+=_e,_e),ve.lookahead+=we,ve.lookahead+ve.insert>=I)for(Le=ve.strstart-ve.insert,ve.ins_h=ve.window[Le],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[Le+1])&ve.hash_mask;ve.insert&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[Le+I-1])&ve.hash_mask,ve.prev[Le&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=Le,Le++,ve.insert--,!(ve.lookahead+ve.insert<I)););}while(ve.lookahead<q&&ve.strm.avail_in!==0)}function $e(ve,ye){for(var we,ke;;){if(ve.lookahead<q){if(Pe(ve),ve.lookahead<q&&ye===m)return j;if(ve.lookahead===0)break}if(we=0,ve.lookahead>=I&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+I-1])&ve.hash_mask,we=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),we!==0&&ve.strstart-we<=ve.w_size-q&&(ve.match_length=Se(ve,we)),ve.match_length>=I)if(ke=u._tr_tally(ve,ve.strstart-ve.match_start,ve.match_length-I),ve.lookahead-=ve.match_length,ve.match_length<=ve.max_lazy_match&&ve.lookahead>=I){for(ve.match_length--;ve.strstart++,ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+I-1])&ve.hash_mask,we=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart,--ve.match_length!=0;);ve.strstart++}else ve.strstart+=ve.match_length,ve.match_length=0,ve.ins_h=ve.window[ve.strstart],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+1])&ve.hash_mask;else ke=u._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++;if(ke&&(X(ve,!1),ve.strm.avail_out===0))return j}return ve.insert=ve.strstart<I-1?ve.strstart:I-1,ye===y?(X(ve,!0),ve.strm.avail_out===0?le:J):ve.last_lit&&(X(ve,!1),ve.strm.avail_out===0)?j:ne}function Ie(ve,ye){for(var we,ke,Me;;){if(ve.lookahead<q){if(Pe(ve),ve.lookahead<q&&ye===m)return j;if(ve.lookahead===0)break}if(we=0,ve.lookahead>=I&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+I-1])&ve.hash_mask,we=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),ve.prev_length=ve.match_length,ve.prev_match=ve.match_start,ve.match_length=I-1,we!==0&&ve.prev_length<ve.max_lazy_match&&ve.strstart-we<=ve.w_size-q&&(ve.match_length=Se(ve,we),ve.match_length<=5&&(ve.strategy===1||ve.match_length===I&&4096<ve.strstart-ve.match_start)&&(ve.match_length=I-1)),ve.prev_length>=I&&ve.match_length<=ve.prev_length){for(Me=ve.strstart+ve.lookahead-I,ke=u._tr_tally(ve,ve.strstart-1-ve.prev_match,ve.prev_length-I),ve.lookahead-=ve.prev_length-1,ve.prev_length-=2;++ve.strstart<=Me&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+I-1])&ve.hash_mask,we=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),--ve.prev_length!=0;);if(ve.match_available=0,ve.match_length=I-1,ve.strstart++,ke&&(X(ve,!1),ve.strm.avail_out===0))return j}else if(ve.match_available){if((ke=u._tr_tally(ve,0,ve.window[ve.strstart-1]))&&X(ve,!1),ve.strstart++,ve.lookahead--,ve.strm.avail_out===0)return j}else ve.match_available=1,ve.strstart++,ve.lookahead--}return ve.match_available&&(ke=u._tr_tally(ve,0,ve.window[ve.strstart-1]),ve.match_available=0),ve.insert=ve.strstart<I-1?ve.strstart:I-1,ye===y?(X(ve,!0),ve.strm.avail_out===0?le:J):ve.last_lit&&(X(ve,!1),ve.strm.avail_out===0)?j:ne}function Ne(ve,ye,we,ke,Me){this.good_length=ve,this.max_lazy=ye,this.nice_length=we,this.max_chain=ke,this.func=Me}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*D),this.dyn_dtree=new s.Buf16(2*(2*P+1)),this.bl_tree=new s.Buf16(2*(2*T+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(F+1),this.heap=new s.Buf16(2*E+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*E+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(ve){var ye;return ve&&ve.state?(ve.total_in=ve.total_out=0,ve.data_type=k,(ye=ve.state).pending=0,ye.pending_out=0,ye.wrap<0&&(ye.wrap=-ye.wrap),ye.status=ye.wrap?Y:Z,ve.adler=ye.wrap===2?0:1,ye.last_flush=m,u._tr_init(ye),v):O(ve,_)}function Ve(ve){var ye=be(ve);return ye===v&&function(we){we.window_size=2*we.w_size,W(we.head),we.max_lazy_match=o[we.level].max_lazy,we.good_match=o[we.level].good_length,we.nice_match=o[we.level].nice_length,we.max_chain_length=o[we.level].max_chain,we.strstart=0,we.block_start=0,we.lookahead=0,we.insert=0,we.match_length=we.prev_length=I-1,we.match_available=0,we.ins_h=0}(ve.state),ye}function De(ve,ye,we,ke,Me,Le){if(!ve)return _;var Fe=1;if(ye===w&&(ye=6),ke<0?(Fe=0,ke=-ke):15<ke&&(Fe=2,ke-=16),Me<1||M<Me||we!==S||ke<8||15<ke||ye<0||9<ye||Le<0||x<Le)return O(ve,_);ke===8&&(ke=9);var ze=new Be;return(ve.state=ze).strm=ve,ze.wrap=Fe,ze.gzhead=null,ze.w_bits=ke,ze.w_size=1<<ze.w_bits,ze.w_mask=ze.w_size-1,ze.hash_bits=Me+7,ze.hash_size=1<<ze.hash_bits,ze.hash_mask=ze.hash_size-1,ze.hash_shift=~~((ze.hash_bits+I-1)/I),ze.window=new s.Buf8(2*ze.w_size),ze.head=new s.Buf16(ze.hash_size),ze.prev=new s.Buf16(ze.w_size),ze.lit_bufsize=1<<Me+6,ze.pending_buf_size=4*ze.lit_bufsize,ze.pending_buf=new s.Buf8(ze.pending_buf_size),ze.d_buf=1*ze.lit_bufsize,ze.l_buf=3*ze.lit_bufsize,ze.level=ye,ze.strategy=Le,ze.method=we,Ve(ve)}o=[new Ne(0,0,0,0,function(ve,ye){var we=65535;for(we>ve.pending_buf_size-5&&(we=ve.pending_buf_size-5);;){if(ve.lookahead<=1){if(Pe(ve),ve.lookahead===0&&ye===m)return j;if(ve.lookahead===0)break}ve.strstart+=ve.lookahead,ve.lookahead=0;var ke=ve.block_start+we;if((ve.strstart===0||ve.strstart>=ke)&&(ve.lookahead=ve.strstart-ke,ve.strstart=ke,X(ve,!1),ve.strm.avail_out===0)||ve.strstart-ve.block_start>=ve.w_size-q&&(X(ve,!1),ve.strm.avail_out===0))return j}return ve.insert=0,ye===y?(X(ve,!0),ve.strm.avail_out===0?le:J):(ve.strstart>ve.block_start&&(X(ve,!1),ve.strm.avail_out),j)}),new Ne(4,4,8,4,$e),new Ne(4,5,16,8,$e),new Ne(4,6,32,32,$e),new Ne(4,4,16,16,Ie),new Ne(8,16,32,32,Ie),new Ne(8,16,128,128,Ie),new Ne(8,32,128,256,Ie),new Ne(32,128,258,1024,Ie),new Ne(32,258,258,4096,Ie)],r.deflateInit=function(ve,ye){return De(ve,ye,S,15,8,0)},r.deflateInit2=De,r.deflateReset=Ve,r.deflateResetKeep=be,r.deflateSetHeader=function(ve,ye){return ve&&ve.state?ve.state.wrap!==2?_:(ve.state.gzhead=ye,v):_},r.deflate=function(ve,ye){var we,ke,Me,Le;if(!ve||!ve.state||5<ye||ye<0)return ve?O(ve,_):_;if(ke=ve.state,!ve.output||!ve.input&&ve.avail_in!==0||ke.status===666&&ye!==y)return O(ve,ve.avail_out===0?-5:_);if(ke.strm=ve,we=ke.last_flush,ke.last_flush=ye,ke.status===Y)if(ke.wrap===2)ve.adler=0,Q(ke,31),Q(ke,139),Q(ke,8),ke.gzhead?(Q(ke,(ke.gzhead.text?1:0)+(ke.gzhead.hcrc?2:0)+(ke.gzhead.extra?4:0)+(ke.gzhead.name?8:0)+(ke.gzhead.comment?16:0)),Q(ke,255&ke.gzhead.time),Q(ke,ke.gzhead.time>>8&255),Q(ke,ke.gzhead.time>>16&255),Q(ke,ke.gzhead.time>>24&255),Q(ke,ke.level===9?2:2<=ke.strategy||ke.level<2?4:0),Q(ke,255&ke.gzhead.os),ke.gzhead.extra&&ke.gzhead.extra.length&&(Q(ke,255&ke.gzhead.extra.length),Q(ke,ke.gzhead.extra.length>>8&255)),ke.gzhead.hcrc&&(ve.adler=f(ve.adler,ke.pending_buf,ke.pending,0)),ke.gzindex=0,ke.status=69):(Q(ke,0),Q(ke,0),Q(ke,0),Q(ke,0),Q(ke,0),Q(ke,ke.level===9?2:2<=ke.strategy||ke.level<2?4:0),Q(ke,3),ke.status=Z);else{var Fe=S+(ke.w_bits-8<<4)<<8;Fe|=(2<=ke.strategy||ke.level<2?0:ke.level<6?1:ke.level===6?2:3)<<6,ke.strstart!==0&&(Fe|=32),Fe+=31-Fe%31,ke.status=Z,fe(ke,Fe),ke.strstart!==0&&(fe(ke,ve.adler>>>16),fe(ke,65535&ve.adler)),ve.adler=1}if(ke.status===69)if(ke.gzhead.extra){for(Me=ke.pending;ke.gzindex<(65535&ke.gzhead.extra.length)&&(ke.pending!==ke.pending_buf_size||(ke.gzhead.hcrc&&ke.pending>Me&&(ve.adler=f(ve.adler,ke.pending_buf,ke.pending-Me,Me)),H(ve),Me=ke.pending,ke.pending!==ke.pending_buf_size));)Q(ke,255&ke.gzhead.extra[ke.gzindex]),ke.gzindex++;ke.gzhead.hcrc&&ke.pending>Me&&(ve.adler=f(ve.adler,ke.pending_buf,ke.pending-Me,Me)),ke.gzindex===ke.gzhead.extra.length&&(ke.gzindex=0,ke.status=73)}else ke.status=73;if(ke.status===73)if(ke.gzhead.name){Me=ke.pending;do{if(ke.pending===ke.pending_buf_size&&(ke.gzhead.hcrc&&ke.pending>Me&&(ve.adler=f(ve.adler,ke.pending_buf,ke.pending-Me,Me)),H(ve),Me=ke.pending,ke.pending===ke.pending_buf_size)){Le=1;break}Le=ke.gzindex<ke.gzhead.name.length?255&ke.gzhead.name.charCodeAt(ke.gzindex++):0,Q(ke,Le)}while(Le!==0);ke.gzhead.hcrc&&ke.pending>Me&&(ve.adler=f(ve.adler,ke.pending_buf,ke.pending-Me,Me)),Le===0&&(ke.gzindex=0,ke.status=91)}else ke.status=91;if(ke.status===91)if(ke.gzhead.comment){Me=ke.pending;do{if(ke.pending===ke.pending_buf_size&&(ke.gzhead.hcrc&&ke.pending>Me&&(ve.adler=f(ve.adler,ke.pending_buf,ke.pending-Me,Me)),H(ve),Me=ke.pending,ke.pending===ke.pending_buf_size)){Le=1;break}Le=ke.gzindex<ke.gzhead.comment.length?255&ke.gzhead.comment.charCodeAt(ke.gzindex++):0,Q(ke,Le)}while(Le!==0);ke.gzhead.hcrc&&ke.pending>Me&&(ve.adler=f(ve.adler,ke.pending_buf,ke.pending-Me,Me)),Le===0&&(ke.status=103)}else ke.status=103;if(ke.status===103&&(ke.gzhead.hcrc?(ke.pending+2>ke.pending_buf_size&&H(ve),ke.pending+2<=ke.pending_buf_size&&(Q(ke,255&ve.adler),Q(ke,ve.adler>>8&255),ve.adler=0,ke.status=Z)):ke.status=Z),ke.pending!==0){if(H(ve),ve.avail_out===0)return ke.last_flush=-1,v}else if(ve.avail_in===0&&U(ye)<=U(we)&&ye!==y)return O(ve,-5);if(ke.status===666&&ve.avail_in!==0)return O(ve,-5);if(ve.avail_in!==0||ke.lookahead!==0||ye!==m&&ke.status!==666){var ze=ke.strategy===2?function(te,oe){for(var _e;;){if(te.lookahead===0&&(Pe(te),te.lookahead===0)){if(oe===m)return j;break}if(te.match_length=0,_e=u._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++,_e&&(X(te,!1),te.strm.avail_out===0))return j}return te.insert=0,oe===y?(X(te,!0),te.strm.avail_out===0?le:J):te.last_lit&&(X(te,!1),te.strm.avail_out===0)?j:ne}(ke,ye):ke.strategy===3?function(te,oe){for(var _e,Ce,Ee,Te,Re=te.window;;){if(te.lookahead<=N){if(Pe(te),te.lookahead<=N&&oe===m)return j;if(te.lookahead===0)break}if(te.match_length=0,te.lookahead>=I&&0<te.strstart&&(Ce=Re[Ee=te.strstart-1])===Re[++Ee]&&Ce===Re[++Ee]&&Ce===Re[++Ee]){Te=te.strstart+N;do;while(Ce===Re[++Ee]&&Ce===Re[++Ee]&&Ce===Re[++Ee]&&Ce===Re[++Ee]&&Ce===Re[++Ee]&&Ce===Re[++Ee]&&Ce===Re[++Ee]&&Ce===Re[++Ee]&&Ee<Te);te.match_length=N-(Te-Ee),te.match_length>te.lookahead&&(te.match_length=te.lookahead)}if(te.match_length>=I?(_e=u._tr_tally(te,1,te.match_length-I),te.lookahead-=te.match_length,te.strstart+=te.match_length,te.match_length=0):(_e=u._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++),_e&&(X(te,!1),te.strm.avail_out===0))return j}return te.insert=0,oe===y?(X(te,!0),te.strm.avail_out===0?le:J):te.last_lit&&(X(te,!1),te.strm.avail_out===0)?j:ne}(ke,ye):o[ke.level].func(ke,ye);if(ze!==le&&ze!==J||(ke.status=666),ze===j||ze===le)return ve.avail_out===0&&(ke.last_flush=-1),v;if(ze===ne&&(ye===1?u._tr_align(ke):ye!==5&&(u._tr_stored_block(ke,0,0,!1),ye===3&&(W(ke.head),ke.lookahead===0&&(ke.strstart=0,ke.block_start=0,ke.insert=0))),H(ve),ve.avail_out===0))return ke.last_flush=-1,v}return ye!==y?v:ke.wrap<=0?1:(ke.wrap===2?(Q(ke,255&ve.adler),Q(ke,ve.adler>>8&255),Q(ke,ve.adler>>16&255),Q(ke,ve.adler>>24&255),Q(ke,255&ve.total_in),Q(ke,ve.total_in>>8&255),Q(ke,ve.total_in>>16&255),Q(ke,ve.total_in>>24&255)):(fe(ke,ve.adler>>>16),fe(ke,65535&ve.adler)),H(ve),0<ke.wrap&&(ke.wrap=-ke.wrap),ke.pending!==0?v:1)},r.deflateEnd=function(ve){var ye;return ve&&ve.state?(ye=ve.state.status)!==Y&&ye!==69&&ye!==73&&ye!==91&&ye!==103&&ye!==Z&&ye!==666?O(ve,_):(ve.state=null,ye===Z?O(ve,-3):v):_},r.deflateSetDictionary=function(ve,ye){var we,ke,Me,Le,Fe,ze,te,oe,_e=ye.length;if(!ve||!ve.state||(Le=(we=ve.state).wrap)===2||Le===1&&we.status!==Y||we.lookahead)return _;for(Le===1&&(ve.adler=d(ve.adler,ye,_e,0)),we.wrap=0,_e>=we.w_size&&(Le===0&&(W(we.head),we.strstart=0,we.block_start=0,we.insert=0),oe=new s.Buf8(we.w_size),s.arraySet(oe,ye,_e-we.w_size,we.w_size,0),ye=oe,_e=we.w_size),Fe=ve.avail_in,ze=ve.next_in,te=ve.input,ve.avail_in=_e,ve.next_in=0,ve.input=ye,Pe(we);we.lookahead>=I;){for(ke=we.strstart,Me=we.lookahead-(I-1);we.ins_h=(we.ins_h<<we.hash_shift^we.window[ke+I-1])&we.hash_mask,we.prev[ke&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=ke,ke++,--Me;);we.strstart=ke,we.lookahead=I-1,Pe(we)}return we.strstart+=we.lookahead,we.block_start=we.strstart,we.insert=we.lookahead,we.lookahead=0,we.match_length=we.prev_length=I-1,we.match_available=0,ve.next_in=ze,ve.input=te,ve.avail_in=Fe,we.wrap=Le,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,r){n.exports=function(o,s){var u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne;u=o.state,d=o.next_in,j=o.input,f=d+(o.avail_in-5),g=o.next_out,ne=o.output,m=g-(s-o.avail_out),y=g+(o.avail_out-257),v=u.dmax,_=u.wsize,w=u.whave,x=u.wnext,k=u.window,S=u.hold,M=u.bits,E=u.lencode,P=u.distcode,T=(1<<u.lenbits)-1,D=(1<<u.distbits)-1;e:do{M<15&&(S+=j[d++]<<M,M+=8,S+=j[d++]<<M,M+=8),F=E[S&T];t:for(;;){if(S>>>=I=F>>>24,M-=I,(I=F>>>16&255)==0)ne[g++]=65535&F;else{if(!(16&I)){if(!(64&I)){F=E[(65535&F)+(S&(1<<I)-1)];continue t}if(32&I){u.mode=12;break e}o.msg="invalid literal/length code",u.mode=30;break e}N=65535&F,(I&=15)&&(M<I&&(S+=j[d++]<<M,M+=8),N+=S&(1<<I)-1,S>>>=I,M-=I),M<15&&(S+=j[d++]<<M,M+=8,S+=j[d++]<<M,M+=8),F=P[S&D];n:for(;;){if(S>>>=I=F>>>24,M-=I,!(16&(I=F>>>16&255))){if(!(64&I)){F=P[(65535&F)+(S&(1<<I)-1)];continue n}o.msg="invalid distance code",u.mode=30;break e}if(q=65535&F,M<(I&=15)&&(S+=j[d++]<<M,(M+=8)<I&&(S+=j[d++]<<M,M+=8)),v<(q+=S&(1<<I)-1)){o.msg="invalid distance too far back",u.mode=30;break e}if(S>>>=I,M-=I,(I=g-m)<q){if(w<(I=q-I)&&u.sane){o.msg="invalid distance too far back",u.mode=30;break e}if(Z=k,(Y=0)===x){if(Y+=_-I,I<N){for(N-=I;ne[g++]=k[Y++],--I;);Y=g-q,Z=ne}}else if(x<I){if(Y+=_+x-I,(I-=x)<N){for(N-=I;ne[g++]=k[Y++],--I;);if(Y=0,x<N){for(N-=I=x;ne[g++]=k[Y++],--I;);Y=g-q,Z=ne}}}else if(Y+=x-I,I<N){for(N-=I;ne[g++]=k[Y++],--I;);Y=g-q,Z=ne}for(;2<N;)ne[g++]=Z[Y++],ne[g++]=Z[Y++],ne[g++]=Z[Y++],N-=3;N&&(ne[g++]=Z[Y++],1<N&&(ne[g++]=Z[Y++]))}else{for(Y=g-q;ne[g++]=ne[Y++],ne[g++]=ne[Y++],ne[g++]=ne[Y++],2<(N-=3););N&&(ne[g++]=ne[Y++],1<N&&(ne[g++]=ne[Y++]))}break}}break}}while(d<f&&g<y);d-=N=M>>3,S&=(1<<(M-=N<<3))-1,o.next_in=d,o.next_out=g,o.avail_in=d<f?f-d+5:5-(d-f),o.avail_out=g<y?y-g+257:257-(g-y),u.hold=S,u.bits=M}},{}],49:[function(e,n,r){var o=e("../utils/common"),s=e("./adler32"),u=e("./crc32"),d=e("./inffast"),f=e("./inftrees"),g=1,m=2,y=0,v=-2,_=1,w=852,x=592;function k(Y){return(Y>>>24&255)+(Y>>>8&65280)+((65280&Y)<<8)+((255&Y)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(Y){var Z;return Y&&Y.state?(Z=Y.state,Y.total_in=Y.total_out=Z.total=0,Y.msg="",Z.wrap&&(Y.adler=1&Z.wrap),Z.mode=_,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new o.Buf32(w),Z.distcode=Z.distdyn=new o.Buf32(x),Z.sane=1,Z.back=-1,y):v}function E(Y){var Z;return Y&&Y.state?((Z=Y.state).wsize=0,Z.whave=0,Z.wnext=0,M(Y)):v}function P(Y,Z){var j,ne;return Y&&Y.state?(ne=Y.state,Z<0?(j=0,Z=-Z):(j=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?v:(ne.window!==null&&ne.wbits!==Z&&(ne.window=null),ne.wrap=j,ne.wbits=Z,E(Y))):v}function T(Y,Z){var j,ne;return Y?(ne=new S,(Y.state=ne).window=null,(j=P(Y,Z))!==y&&(Y.state=null),j):v}var D,F,I=!0;function N(Y){if(I){var Z;for(D=new o.Buf32(512),F=new o.Buf32(32),Z=0;Z<144;)Y.lens[Z++]=8;for(;Z<256;)Y.lens[Z++]=9;for(;Z<280;)Y.lens[Z++]=7;for(;Z<288;)Y.lens[Z++]=8;for(f(g,Y.lens,0,288,D,0,Y.work,{bits:9}),Z=0;Z<32;)Y.lens[Z++]=5;f(m,Y.lens,0,32,F,0,Y.work,{bits:5}),I=!1}Y.lencode=D,Y.lenbits=9,Y.distcode=F,Y.distbits=5}function q(Y,Z,j,ne){var le,J=Y.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new o.Buf8(J.wsize)),ne>=J.wsize?(o.arraySet(J.window,Z,j-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):(ne<(le=J.wsize-J.wnext)&&(le=ne),o.arraySet(J.window,Z,j-ne,le,J.wnext),(ne-=le)?(o.arraySet(J.window,Z,j-ne,ne,0),J.wnext=ne,J.whave=J.wsize):(J.wnext+=le,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=le))),0}r.inflateReset=E,r.inflateReset2=P,r.inflateResetKeep=M,r.inflateInit=function(Y){return T(Y,15)},r.inflateInit2=T,r.inflate=function(Y,Z){var j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye,we,ke,Me=0,Le=new o.Buf8(4),Fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&Y.avail_in!==0)return v;(j=Y.state).mode===12&&(j.mode=13),O=Y.next_out,le=Y.output,W=Y.avail_out,J=Y.next_in,ne=Y.input,U=Y.avail_in,H=j.hold,X=j.bits,Q=U,fe=W,ye=y;e:for(;;)switch(j.mode){case _:if(j.wrap===0){j.mode=13;break}for(;X<16;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(2&j.wrap&&H===35615){Le[j.check=0]=255&H,Le[1]=H>>>8&255,j.check=u(j.check,Le,2,0),X=H=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&H)<<8)+(H>>8))%31){Y.msg="incorrect header check",j.mode=30;break}if((15&H)!=8){Y.msg="unknown compression method",j.mode=30;break}if(X-=4,ve=8+(15&(H>>>=4)),j.wbits===0)j.wbits=ve;else if(ve>j.wbits){Y.msg="invalid window size",j.mode=30;break}j.dmax=1<<ve,Y.adler=j.check=1,j.mode=512&H?10:12,X=H=0;break;case 2:for(;X<16;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(j.flags=H,(255&j.flags)!=8){Y.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){Y.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=H>>8&1),512&j.flags&&(Le[0]=255&H,Le[1]=H>>>8&255,j.check=u(j.check,Le,2,0)),X=H=0,j.mode=3;case 3:for(;X<32;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}j.head&&(j.head.time=H),512&j.flags&&(Le[0]=255&H,Le[1]=H>>>8&255,Le[2]=H>>>16&255,Le[3]=H>>>24&255,j.check=u(j.check,Le,4,0)),X=H=0,j.mode=4;case 4:for(;X<16;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}j.head&&(j.head.xflags=255&H,j.head.os=H>>8),512&j.flags&&(Le[0]=255&H,Le[1]=H>>>8&255,j.check=u(j.check,Le,2,0)),X=H=0,j.mode=5;case 5:if(1024&j.flags){for(;X<16;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}j.length=H,j.head&&(j.head.extra_len=H),512&j.flags&&(Le[0]=255&H,Le[1]=H>>>8&255,j.check=u(j.check,Le,2,0)),X=H=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(U<(Se=j.length)&&(Se=U),Se&&(j.head&&(ve=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),o.arraySet(j.head.extra,ne,J,Se,ve)),512&j.flags&&(j.check=u(j.check,ne,Se,J)),U-=Se,J+=Se,j.length-=Se),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(U===0)break e;for(Se=0;ve=ne[J+Se++],j.head&&ve&&j.length<65536&&(j.head.name+=String.fromCharCode(ve)),ve&&Se<U;);if(512&j.flags&&(j.check=u(j.check,ne,Se,J)),U-=Se,J+=Se,ve)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(U===0)break e;for(Se=0;ve=ne[J+Se++],j.head&&ve&&j.length<65536&&(j.head.comment+=String.fromCharCode(ve)),ve&&Se<U;);if(512&j.flags&&(j.check=u(j.check,ne,Se,J)),U-=Se,J+=Se,ve)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;X<16;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(H!==(65535&j.check)){Y.msg="header crc mismatch",j.mode=30;break}X=H=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),Y.adler=j.check=0,j.mode=12;break;case 10:for(;X<32;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}Y.adler=j.check=k(H),X=H=0,j.mode=11;case 11:if(j.havedict===0)return Y.next_out=O,Y.avail_out=W,Y.next_in=J,Y.avail_in=U,j.hold=H,j.bits=X,2;Y.adler=j.check=1,j.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(j.last){H>>>=7&X,X-=7&X,j.mode=27;break}for(;X<3;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}switch(j.last=1&H,X-=1,3&(H>>>=1)){case 0:j.mode=14;break;case 1:if(N(j),j.mode=20,Z!==6)break;H>>>=2,X-=2;break e;case 2:j.mode=17;break;case 3:Y.msg="invalid block type",j.mode=30}H>>>=2,X-=2;break;case 14:for(H>>>=7&X,X-=7&X;X<32;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if((65535&H)!=(H>>>16^65535)){Y.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&H,X=H=0,j.mode=15,Z===6)break e;case 15:j.mode=16;case 16:if(Se=j.length){if(U<Se&&(Se=U),W<Se&&(Se=W),Se===0)break e;o.arraySet(le,ne,J,Se,O),U-=Se,J+=Se,W-=Se,O+=Se,j.length-=Se;break}j.mode=12;break;case 17:for(;X<14;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(j.nlen=257+(31&H),H>>>=5,X-=5,j.ndist=1+(31&H),H>>>=5,X-=5,j.ncode=4+(15&H),H>>>=4,X-=4,286<j.nlen||30<j.ndist){Y.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;X<3;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}j.lens[Fe[j.have++]]=7&H,H>>>=3,X-=3}for(;j.have<19;)j.lens[Fe[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,we={bits:j.lenbits},ye=f(0,j.lens,0,19,j.lencode,0,j.work,we),j.lenbits=we.bits,ye){Y.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;Ne=(Me=j.lencode[H&(1<<j.lenbits)-1])>>>16&255,Be=65535&Me,!((Ie=Me>>>24)<=X);){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(Be<16)H>>>=Ie,X-=Ie,j.lens[j.have++]=Be;else{if(Be===16){for(ke=Ie+2;X<ke;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(H>>>=Ie,X-=Ie,j.have===0){Y.msg="invalid bit length repeat",j.mode=30;break}ve=j.lens[j.have-1],Se=3+(3&H),H>>>=2,X-=2}else if(Be===17){for(ke=Ie+3;X<ke;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}X-=Ie,ve=0,Se=3+(7&(H>>>=Ie)),H>>>=3,X-=3}else{for(ke=Ie+7;X<ke;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}X-=Ie,ve=0,Se=11+(127&(H>>>=Ie)),H>>>=7,X-=7}if(j.have+Se>j.nlen+j.ndist){Y.msg="invalid bit length repeat",j.mode=30;break}for(;Se--;)j.lens[j.have++]=ve}}if(j.mode===30)break;if(j.lens[256]===0){Y.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,we={bits:j.lenbits},ye=f(g,j.lens,0,j.nlen,j.lencode,0,j.work,we),j.lenbits=we.bits,ye){Y.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,we={bits:j.distbits},ye=f(m,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,we),j.distbits=we.bits,ye){Y.msg="invalid distances set",j.mode=30;break}if(j.mode=20,Z===6)break e;case 20:j.mode=21;case 21:if(6<=U&&258<=W){Y.next_out=O,Y.avail_out=W,Y.next_in=J,Y.avail_in=U,j.hold=H,j.bits=X,d(Y,fe),O=Y.next_out,le=Y.output,W=Y.avail_out,J=Y.next_in,ne=Y.input,U=Y.avail_in,H=j.hold,X=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;Ne=(Me=j.lencode[H&(1<<j.lenbits)-1])>>>16&255,Be=65535&Me,!((Ie=Me>>>24)<=X);){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(Ne&&!(240&Ne)){for(be=Ie,Ve=Ne,De=Be;Ne=(Me=j.lencode[De+((H&(1<<be+Ve)-1)>>be)])>>>16&255,Be=65535&Me,!(be+(Ie=Me>>>24)<=X);){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}H>>>=be,X-=be,j.back+=be}if(H>>>=Ie,X-=Ie,j.back+=Ie,j.length=Be,Ne===0){j.mode=26;break}if(32&Ne){j.back=-1,j.mode=12;break}if(64&Ne){Y.msg="invalid literal/length code",j.mode=30;break}j.extra=15&Ne,j.mode=22;case 22:if(j.extra){for(ke=j.extra;X<ke;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}j.length+=H&(1<<j.extra)-1,H>>>=j.extra,X-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;Ne=(Me=j.distcode[H&(1<<j.distbits)-1])>>>16&255,Be=65535&Me,!((Ie=Me>>>24)<=X);){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(!(240&Ne)){for(be=Ie,Ve=Ne,De=Be;Ne=(Me=j.distcode[De+((H&(1<<be+Ve)-1)>>be)])>>>16&255,Be=65535&Me,!(be+(Ie=Me>>>24)<=X);){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}H>>>=be,X-=be,j.back+=be}if(H>>>=Ie,X-=Ie,j.back+=Ie,64&Ne){Y.msg="invalid distance code",j.mode=30;break}j.offset=Be,j.extra=15&Ne,j.mode=24;case 24:if(j.extra){for(ke=j.extra;X<ke;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}j.offset+=H&(1<<j.extra)-1,H>>>=j.extra,X-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){Y.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(W===0)break e;if(Se=fe-W,j.offset>Se){if((Se=j.offset-Se)>j.whave&&j.sane){Y.msg="invalid distance too far back",j.mode=30;break}Pe=Se>j.wnext?(Se-=j.wnext,j.wsize-Se):j.wnext-Se,Se>j.length&&(Se=j.length),$e=j.window}else $e=le,Pe=O-j.offset,Se=j.length;for(W<Se&&(Se=W),W-=Se,j.length-=Se;le[O++]=$e[Pe++],--Se;);j.length===0&&(j.mode=21);break;case 26:if(W===0)break e;le[O++]=j.length,W--,j.mode=21;break;case 27:if(j.wrap){for(;X<32;){if(U===0)break e;U--,H|=ne[J++]<<X,X+=8}if(fe-=W,Y.total_out+=fe,j.total+=fe,fe&&(Y.adler=j.check=j.flags?u(j.check,le,fe,O-fe):s(j.check,le,fe,O-fe)),fe=W,(j.flags?H:k(H))!==j.check){Y.msg="incorrect data check",j.mode=30;break}X=H=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;X<32;){if(U===0)break e;U--,H+=ne[J++]<<X,X+=8}if(H!==(4294967295&j.total)){Y.msg="incorrect length check",j.mode=30;break}X=H=0}j.mode=29;case 29:ye=1;break e;case 30:ye=-3;break e;case 31:return-4;default:return v}return Y.next_out=O,Y.avail_out=W,Y.next_in=J,Y.avail_in=U,j.hold=H,j.bits=X,(j.wsize||fe!==Y.avail_out&&j.mode<30&&(j.mode<27||Z!==4))&&q(Y,Y.output,Y.next_out,fe-Y.avail_out)?(j.mode=31,-4):(Q-=Y.avail_in,fe-=Y.avail_out,Y.total_in+=Q,Y.total_out+=fe,j.total+=fe,j.wrap&&fe&&(Y.adler=j.check=j.flags?u(j.check,le,fe,Y.next_out-fe):s(j.check,le,fe,Y.next_out-fe)),Y.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(Q==0&&fe===0||Z===4)&&ye===y&&(ye=-5),ye)},r.inflateEnd=function(Y){if(!Y||!Y.state)return v;var Z=Y.state;return Z.window&&(Z.window=null),Y.state=null,y},r.inflateGetHeader=function(Y,Z){var j;return Y&&Y.state&&2&(j=Y.state).wrap?((j.head=Z).done=!1,y):v},r.inflateSetDictionary=function(Y,Z){var j,ne=Z.length;return Y&&Y.state?(j=Y.state).wrap!==0&&j.mode!==11?v:j.mode===11&&s(1,Z,ne,0)!==j.check?-3:q(Y,Z,ne,ne)?(j.mode=31,-4):(j.havedict=1,y):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,r){var o=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(g,m,y,v,_,w,x,k){var S,M,E,P,T,D,F,I,N,q=k.bits,Y=0,Z=0,j=0,ne=0,le=0,J=0,O=0,U=0,W=0,H=0,X=null,Q=0,fe=new o.Buf16(16),Se=new o.Buf16(16),Pe=null,$e=0;for(Y=0;Y<=15;Y++)fe[Y]=0;for(Z=0;Z<v;Z++)fe[m[y+Z]]++;for(le=q,ne=15;1<=ne&&fe[ne]===0;ne--);if(ne<le&&(le=ne),ne===0)return _[w++]=20971520,_[w++]=20971520,k.bits=1,0;for(j=1;j<ne&&fe[j]===0;j++);for(le<j&&(le=j),Y=U=1;Y<=15;Y++)if(U<<=1,(U-=fe[Y])<0)return-1;if(0<U&&(g===0||ne!==1))return-1;for(Se[1]=0,Y=1;Y<15;Y++)Se[Y+1]=Se[Y]+fe[Y];for(Z=0;Z<v;Z++)m[y+Z]!==0&&(x[Se[m[y+Z]]++]=Z);if(D=g===0?(X=Pe=x,19):g===1?(X=s,Q-=257,Pe=u,$e-=257,256):(X=d,Pe=f,-1),Y=j,T=w,O=Z=H=0,E=-1,P=(W=1<<(J=le))-1,g===1&&852<W||g===2&&592<W)return 1;for(;;){for(F=Y-O,N=x[Z]<D?(I=0,x[Z]):x[Z]>D?(I=Pe[$e+x[Z]],X[Q+x[Z]]):(I=96,0),S=1<<Y-O,j=M=1<<J;_[T+(H>>O)+(M-=S)]=F<<24|I<<16|N,M!==0;);for(S=1<<Y-1;H&S;)S>>=1;if(S!==0?(H&=S-1,H+=S):H=0,Z++,--fe[Y]==0){if(Y===ne)break;Y=m[y+x[Z]]}if(le<Y&&(H&P)!==E){for(O===0&&(O=le),T+=j,U=1<<(J=Y-O);J+O<ne&&!((U-=fe[J+O])<=0);)J++,U<<=1;if(W+=1<<J,g===1&&852<W||g===2&&592<W)return 1;_[E=H&P]=le<<24|J<<16|T-w}}return H!==0&&(_[T+H]=Y-O<<24|64<<16),k.bits=le,0}},{"../utils/common":41}],51:[function(e,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,r){var o=e("../utils/common"),s=0,u=1;function d(Me){for(var Le=Me.length;0<=--Le;)Me[Le]=0}var f=0,g=29,m=256,y=m+1+g,v=30,_=19,w=2*y+1,x=15,k=16,S=7,M=256,E=16,P=17,T=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(y+2));d(q);var Y=new Array(2*v);d(Y);var Z=new Array(512);d(Z);var j=new Array(256);d(j);var ne=new Array(g);d(ne);var le,J,O,U=new Array(v);function W(Me,Le,Fe,ze,te){this.static_tree=Me,this.extra_bits=Le,this.extra_base=Fe,this.elems=ze,this.max_length=te,this.has_stree=Me&&Me.length}function H(Me,Le){this.dyn_tree=Me,this.max_code=0,this.stat_desc=Le}function X(Me){return Me<256?Z[Me]:Z[256+(Me>>>7)]}function Q(Me,Le){Me.pending_buf[Me.pending++]=255&Le,Me.pending_buf[Me.pending++]=Le>>>8&255}function fe(Me,Le,Fe){Me.bi_valid>k-Fe?(Me.bi_buf|=Le<<Me.bi_valid&65535,Q(Me,Me.bi_buf),Me.bi_buf=Le>>k-Me.bi_valid,Me.bi_valid+=Fe-k):(Me.bi_buf|=Le<<Me.bi_valid&65535,Me.bi_valid+=Fe)}function Se(Me,Le,Fe){fe(Me,Fe[2*Le],Fe[2*Le+1])}function Pe(Me,Le){for(var Fe=0;Fe|=1&Me,Me>>>=1,Fe<<=1,0<--Le;);return Fe>>>1}function $e(Me,Le,Fe){var ze,te,oe=new Array(x+1),_e=0;for(ze=1;ze<=x;ze++)oe[ze]=_e=_e+Fe[ze-1]<<1;for(te=0;te<=Le;te++){var Ce=Me[2*te+1];Ce!==0&&(Me[2*te]=Pe(oe[Ce]++,Ce))}}function Ie(Me){var Le;for(Le=0;Le<y;Le++)Me.dyn_ltree[2*Le]=0;for(Le=0;Le<v;Le++)Me.dyn_dtree[2*Le]=0;for(Le=0;Le<_;Le++)Me.bl_tree[2*Le]=0;Me.dyn_ltree[2*M]=1,Me.opt_len=Me.static_len=0,Me.last_lit=Me.matches=0}function Ne(Me){8<Me.bi_valid?Q(Me,Me.bi_buf):0<Me.bi_valid&&(Me.pending_buf[Me.pending++]=Me.bi_buf),Me.bi_buf=0,Me.bi_valid=0}function Be(Me,Le,Fe,ze){var te=2*Le,oe=2*Fe;return Me[te]<Me[oe]||Me[te]===Me[oe]&&ze[Le]<=ze[Fe]}function be(Me,Le,Fe){for(var ze=Me.heap[Fe],te=Fe<<1;te<=Me.heap_len&&(te<Me.heap_len&&Be(Le,Me.heap[te+1],Me.heap[te],Me.depth)&&te++,!Be(Le,ze,Me.heap[te],Me.depth));)Me.heap[Fe]=Me.heap[te],Fe=te,te<<=1;Me.heap[Fe]=ze}function Ve(Me,Le,Fe){var ze,te,oe,_e,Ce=0;if(Me.last_lit!==0)for(;ze=Me.pending_buf[Me.d_buf+2*Ce]<<8|Me.pending_buf[Me.d_buf+2*Ce+1],te=Me.pending_buf[Me.l_buf+Ce],Ce++,ze===0?Se(Me,te,Le):(Se(Me,(oe=j[te])+m+1,Le),(_e=D[oe])!==0&&fe(Me,te-=ne[oe],_e),Se(Me,oe=X(--ze),Fe),(_e=F[oe])!==0&&fe(Me,ze-=U[oe],_e)),Ce<Me.last_lit;);Se(Me,M,Le)}function De(Me,Le){var Fe,ze,te,oe=Le.dyn_tree,_e=Le.stat_desc.static_tree,Ce=Le.stat_desc.has_stree,Ee=Le.stat_desc.elems,Te=-1;for(Me.heap_len=0,Me.heap_max=w,Fe=0;Fe<Ee;Fe++)oe[2*Fe]!==0?(Me.heap[++Me.heap_len]=Te=Fe,Me.depth[Fe]=0):oe[2*Fe+1]=0;for(;Me.heap_len<2;)oe[2*(te=Me.heap[++Me.heap_len]=Te<2?++Te:0)]=1,Me.depth[te]=0,Me.opt_len--,Ce&&(Me.static_len-=_e[2*te+1]);for(Le.max_code=Te,Fe=Me.heap_len>>1;1<=Fe;Fe--)be(Me,oe,Fe);for(te=Ee;Fe=Me.heap[1],Me.heap[1]=Me.heap[Me.heap_len--],be(Me,oe,1),ze=Me.heap[1],Me.heap[--Me.heap_max]=Fe,Me.heap[--Me.heap_max]=ze,oe[2*te]=oe[2*Fe]+oe[2*ze],Me.depth[te]=(Me.depth[Fe]>=Me.depth[ze]?Me.depth[Fe]:Me.depth[ze])+1,oe[2*Fe+1]=oe[2*ze+1]=te,Me.heap[1]=te++,be(Me,oe,1),2<=Me.heap_len;);Me.heap[--Me.heap_max]=Me.heap[1],function(Re,Oe){var je,We,Ze,Xe,Ge,Qe,rt=Oe.dyn_tree,dt=Oe.max_code,qe=Oe.stat_desc.static_tree,He=Oe.stat_desc.has_stree,Ke=Oe.stat_desc.extra_bits,ot=Oe.stat_desc.extra_base,at=Oe.stat_desc.max_length,et=0;for(Xe=0;Xe<=x;Xe++)Re.bl_count[Xe]=0;for(rt[2*Re.heap[Re.heap_max]+1]=0,je=Re.heap_max+1;je<w;je++)at<(Xe=rt[2*rt[2*(We=Re.heap[je])+1]+1]+1)&&(Xe=at,et++),rt[2*We+1]=Xe,dt<We||(Re.bl_count[Xe]++,Ge=0,ot<=We&&(Ge=Ke[We-ot]),Qe=rt[2*We],Re.opt_len+=Qe*(Xe+Ge),He&&(Re.static_len+=Qe*(qe[2*We+1]+Ge)));if(et!==0){do{for(Xe=at-1;Re.bl_count[Xe]===0;)Xe--;Re.bl_count[Xe]--,Re.bl_count[Xe+1]+=2,Re.bl_count[at]--,et-=2}while(0<et);for(Xe=at;Xe!==0;Xe--)for(We=Re.bl_count[Xe];We!==0;)dt<(Ze=Re.heap[--je])||(rt[2*Ze+1]!==Xe&&(Re.opt_len+=(Xe-rt[2*Ze+1])*rt[2*Ze],rt[2*Ze+1]=Xe),We--)}}(Me,Le),$e(oe,Te,Me.bl_count)}function ve(Me,Le,Fe){var ze,te,oe=-1,_e=Le[1],Ce=0,Ee=7,Te=4;for(_e===0&&(Ee=138,Te=3),Le[2*(Fe+1)+1]=65535,ze=0;ze<=Fe;ze++)te=_e,_e=Le[2*(ze+1)+1],++Ce<Ee&&te===_e||(Ce<Te?Me.bl_tree[2*te]+=Ce:te!==0?(te!==oe&&Me.bl_tree[2*te]++,Me.bl_tree[2*E]++):Ce<=10?Me.bl_tree[2*P]++:Me.bl_tree[2*T]++,oe=te,Te=(Ce=0)===_e?(Ee=138,3):te===_e?(Ee=6,3):(Ee=7,4))}function ye(Me,Le,Fe){var ze,te,oe=-1,_e=Le[1],Ce=0,Ee=7,Te=4;for(_e===0&&(Ee=138,Te=3),ze=0;ze<=Fe;ze++)if(te=_e,_e=Le[2*(ze+1)+1],!(++Ce<Ee&&te===_e)){if(Ce<Te)for(;Se(Me,te,Me.bl_tree),--Ce!=0;);else te!==0?(te!==oe&&(Se(Me,te,Me.bl_tree),Ce--),Se(Me,E,Me.bl_tree),fe(Me,Ce-3,2)):Ce<=10?(Se(Me,P,Me.bl_tree),fe(Me,Ce-3,3)):(Se(Me,T,Me.bl_tree),fe(Me,Ce-11,7));oe=te,Te=(Ce=0)===_e?(Ee=138,3):te===_e?(Ee=6,3):(Ee=7,4)}}d(U);var we=!1;function ke(Me,Le,Fe,ze){fe(Me,(f<<1)+(ze?1:0),3),function(te,oe,_e,Ce){Ne(te),Ce&&(Q(te,_e),Q(te,~_e)),o.arraySet(te.pending_buf,te.window,oe,_e,te.pending),te.pending+=_e}(Me,Le,Fe,!0)}r._tr_init=function(Me){we||(function(){var Le,Fe,ze,te,oe,_e=new Array(x+1);for(te=ze=0;te<g-1;te++)for(ne[te]=ze,Le=0;Le<1<<D[te];Le++)j[ze++]=te;for(j[ze-1]=te,te=oe=0;te<16;te++)for(U[te]=oe,Le=0;Le<1<<F[te];Le++)Z[oe++]=te;for(oe>>=7;te<v;te++)for(U[te]=oe<<7,Le=0;Le<1<<F[te]-7;Le++)Z[256+oe++]=te;for(Fe=0;Fe<=x;Fe++)_e[Fe]=0;for(Le=0;Le<=143;)q[2*Le+1]=8,Le++,_e[8]++;for(;Le<=255;)q[2*Le+1]=9,Le++,_e[9]++;for(;Le<=279;)q[2*Le+1]=7,Le++,_e[7]++;for(;Le<=287;)q[2*Le+1]=8,Le++,_e[8]++;for($e(q,y+1,_e),Le=0;Le<v;Le++)Y[2*Le+1]=5,Y[2*Le]=Pe(Le,5);le=new W(q,D,m+1,y,x),J=new W(Y,F,0,v,x),O=new W(new Array(0),I,0,_,S)}(),we=!0),Me.l_desc=new H(Me.dyn_ltree,le),Me.d_desc=new H(Me.dyn_dtree,J),Me.bl_desc=new H(Me.bl_tree,O),Me.bi_buf=0,Me.bi_valid=0,Ie(Me)},r._tr_stored_block=ke,r._tr_flush_block=function(Me,Le,Fe,ze){var te,oe,_e=0;0<Me.level?(Me.strm.data_type===2&&(Me.strm.data_type=function(Ce){var Ee,Te=4093624447;for(Ee=0;Ee<=31;Ee++,Te>>>=1)if(1&Te&&Ce.dyn_ltree[2*Ee]!==0)return s;if(Ce.dyn_ltree[18]!==0||Ce.dyn_ltree[20]!==0||Ce.dyn_ltree[26]!==0)return u;for(Ee=32;Ee<m;Ee++)if(Ce.dyn_ltree[2*Ee]!==0)return u;return s}(Me)),De(Me,Me.l_desc),De(Me,Me.d_desc),_e=function(Ce){var Ee;for(ve(Ce,Ce.dyn_ltree,Ce.l_desc.max_code),ve(Ce,Ce.dyn_dtree,Ce.d_desc.max_code),De(Ce,Ce.bl_desc),Ee=_-1;3<=Ee&&Ce.bl_tree[2*N[Ee]+1]===0;Ee--);return Ce.opt_len+=3*(Ee+1)+5+5+4,Ee}(Me),te=Me.opt_len+3+7>>>3,(oe=Me.static_len+3+7>>>3)<=te&&(te=oe)):te=oe=Fe+5,Fe+4<=te&&Le!==-1?ke(Me,Le,Fe,ze):Me.strategy===4||oe===te?(fe(Me,2+(ze?1:0),3),Ve(Me,q,Y)):(fe(Me,4+(ze?1:0),3),function(Ce,Ee,Te,Re){var Oe;for(fe(Ce,Ee-257,5),fe(Ce,Te-1,5),fe(Ce,Re-4,4),Oe=0;Oe<Re;Oe++)fe(Ce,Ce.bl_tree[2*N[Oe]+1],3);ye(Ce,Ce.dyn_ltree,Ee-1),ye(Ce,Ce.dyn_dtree,Te-1)}(Me,Me.l_desc.max_code+1,Me.d_desc.max_code+1,_e+1),Ve(Me,Me.dyn_ltree,Me.dyn_dtree)),Ie(Me),ze&&Ne(Me)},r._tr_tally=function(Me,Le,Fe){return Me.pending_buf[Me.d_buf+2*Me.last_lit]=Le>>>8&255,Me.pending_buf[Me.d_buf+2*Me.last_lit+1]=255&Le,Me.pending_buf[Me.l_buf+Me.last_lit]=255&Fe,Me.last_lit++,Le===0?Me.dyn_ltree[2*Fe]++:(Me.matches++,Le--,Me.dyn_ltree[2*(j[Fe]+m+1)]++,Me.dyn_dtree[2*X(Le)]++),Me.last_lit===Me.lit_bufsize-1},r._tr_align=function(Me){fe(Me,2,3),Se(Me,M,q),function(Le){Le.bi_valid===16?(Q(Le,Le.bi_buf),Le.bi_buf=0,Le.bi_valid=0):8<=Le.bi_valid&&(Le.pending_buf[Le.pending++]=255&Le.bi_buf,Le.bi_buf>>=8,Le.bi_valid-=8)}(Me)}},{"../utils/common":41}],53:[function(e,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(o){(function(s,u){if(!s.setImmediate){var d,f,g,m,y=1,v={},_=!1,w=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,d={}.toString.call(s.process)==="[object process]"?function(E){process.nextTick(function(){S(E)})}:function(){if(s.postMessage&&!s.importScripts){var E=!0,P=s.onmessage;return s.onmessage=function(){E=!1},s.postMessage("","*"),s.onmessage=P,E}}()?(m="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",M,!1):s.attachEvent("onmessage",M),function(E){s.postMessage(m+E,"*")}):s.MessageChannel?((g=new MessageChannel).port1.onmessage=function(E){S(E.data)},function(E){g.port2.postMessage(E)}):w&&"onreadystatechange"in w.createElement("script")?(f=w.documentElement,function(E){var P=w.createElement("script");P.onreadystatechange=function(){S(E),P.onreadystatechange=null,f.removeChild(P),P=null},f.appendChild(P)}):function(E){setTimeout(S,0,E)},x.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var P=new Array(arguments.length-1),T=0;T<P.length;T++)P[T]=arguments[T+1];var D={callback:E,args:P};return v[y]=D,d(y),y++},x.clearImmediate=k}function k(E){delete v[E]}function S(E){if(_)setTimeout(S,0,E);else{var P=v[E];if(P){_=!0;try{(function(T){var D=T.callback,F=T.args;switch(F.length){case 0:D();break;case 1:D(F[0]);break;case 2:D(F[0],F[1]);break;case 3:D(F[0],F[1],F[2]);break;default:D.apply(u,F)}})(P)}finally{k(E),_=!1}}}}function M(E){E.source===s&&typeof E.data=="string"&&E.data.indexOf(m)===0&&S(+E.data.slice(m.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,commonjsGlobal$1!==void 0?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10);var JSZip=jszip_minExports,Outline=function(){return _createClass(function e(n){_classCallCheck(this,e),this.doc=n.doc,this.messageHandler=n.messageHandler,this.outline=n.outline,this.index=n.index,this.children=n.children||[],this.parent=n.parent},[{key:"pageNumber",get:function(){return this.outline.pageNumber}},{key:"title",get:function(){return this.outline.title}},{key:"level",get:function(){return this.outline.level}},{key:"getOutline",value:function(){return this.outline}}])}(),ContentEditManager=function(){return _createClass(function u(d){_classCallCheck(this,u),this.documentViewer=d,this.editAreaInfoPtr=null,this.selectedEditBox=null},[{key:"startContentEditMode",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function u(){return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:this.documentViewer.setToolMode("editor");case 1:case"end":return d.stop()}},u,this)})),function(){return s.apply(this,arguments)})},{key:"endContentEditMode",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:this.documentViewer.setToolMode("view");case 1:case"end":return d.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"getSelectedEditBox",value:function(){return this.selectedEditBox}},{key:"setSelectedEditBox",value:function(u){this.selectedEditBox=u}},{key:"getCopyArea",value:function(){return this.editAreaInfo}},{key:"setCopyArea",value:function(u){this.editAreaInfo=u}},{key:"pasteAreaInPage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(d,f){var g,m,y,v,_,w,x,k;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(f){S.next=5;break}if(g=this.getCopyArea()){S.next=4;break}return S.abrupt("return");case 4:f={rect:g.rect,editAreaInfoPtr:g.editAreaInfoPtr};case 5:if(m=this.documentViewer,y=d-1,v=m.pdfViewer._pages[y],_=v.contentContainer,w=_&&_.editPagePtr){S.next=15;break}return S.next=13,v.getEditAnnotation();case 13:_=S.sent,w=_.editPagePtr;case 15:return S.next=17,m.messageHandler.sendWithPromise("PasteArea",{pagePtr:m.pagesPtr[y].pagePtr,editPagePtr:w,pageIndex:y,editAreaInfoPtr:f.editAreaInfoPtr,rect:f.rect});case 17:return x=S.sent,S.next=20,_.addEditArea(x);case 20:k=S.sent,_.handleOperateList({editPagePtr:w,editAreaIndex:k.editAreaIndex,editAreaPtr:x,pageIndex:y});case 22:case"end":return S.stop()}},u,this)})),function(u,d){return r.apply(this,arguments)})},{key:"getSelectedText",value:function(u){var d=this.documentViewer;if(u&&(u<1||u>d.pagesCount))return"";var f=d.pdfViewer._pages,g="";if(u)g+=this.getPageSelectedText(u);else for(var m=0;m<f.length;m++)f[m].contentContainer&&(g+=this.getPageSelectedText(m+1));return g}},{key:"getPageSelectedText",value:function(u){if(!u)return"";var d=u-1,f=this.documentViewer.pdfViewer._pages[d].contentContainer;if(!f)return"";for(var g=f.frameEditorList,m="",y=0;y<g.length;y++){var v=g[y];v.type==="text"&&v.selectedCharRange&&(m+=v.selectedText)}return m}},{key:"selectedEditBoxText",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((d=this.getSelectedEditBox())&&d.type==="text"){f.next=3;break}return f.abrupt("return");case 3:if(f.t0=d.selectedAllText,!f.t0){f.next=7;break}return f.next=7,d.selectedAllText();case 7:case"end":return f.stop()}},u,this)})),function(){return n.apply(this,arguments)})},{key:"getEditBoxSelectedText",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var d,f;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.getSelectedEditBox()){g.next=3;break}return g.abrupt("return");case 3:if(d.selectedCharRange){g.next=5;break}return g.abrupt("return","");case 5:return g.next=7,d.getText();case 7:return f=g.sent,g.abrupt("return",f);case 9:case"end":return g.stop()}},u,this)})),function(){return e.apply(this,arguments)})}]);var e,n,r,o,s}(),AnnotationManager=function(){return _createClass(function e(n){_classCallCheck(this,e),this.documentViewer=n},[{key:"createMeasurementAnnotation",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,s,u,d,f,g;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:this.documentViewer.annotationHistory.push(e),Array.isArray(e)||(e=[e]),o=0;case 3:if(!(o<e.length)){m.next=27;break}if(s=e[o],!(Number(s.pageIndex)+1>this.documentViewer.pagesCount)){m.next=7;break}return m.abrupt("continue",24);case 7:return!s.operate&&(s.operate="add-annot"),!s.author&&(s.author=this.documentViewer.annotator),(r=this.documentViewer).annotations||(r.annotations={}),this.documentViewer.pushAnnotations(s),u=this.documentViewer.pagesPtr[s.pageIndex].pagePtr,m.next=14,this.documentViewer.messageHandler.sendWithPromise("CreateMeasurementAnnotation",{doc:this.documentViewer.doc,pagePtr:u,annotation:s});case 14:if(!(d=m.sent)||!d.code){m.next=19;break}return this.documentViewer.eventBus.dispatch("message",{type:"ERROR",message:d.message}),console.log(d.message),m.abrupt("return",d);case 19:f=d.annotPtr,g=d.rulerPtr,s.doc=this.documentViewer.doc,s.pagePtr=u,s.annotPtr=f,s.rulerPtr=g;case 24:o++,m.next=3;break;case 27:return m.abrupt("return",e);case 28:case"end":return m.stop()}},n,this)}))}},{key:"editMeasurementAnnotation",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,this.documentViewer.messageHandler.sendWithPromise("EditMeasurementAnnotation",e);case 4:case"end":return r.stop()}},n,this)}))}},{key:"drawAnnotationsFromList",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)this.documentViewer.pdfViewer&&this.documentViewer.pdfViewer.renderAnnotation(e[r],n)}}])}();pdfExports.GlobalWorkerOptions.workerSrc="./lib/pdf.worker.min.js";var CMAP_URL="./cmaps/",_ComPDFKitViewer_brand=new WeakSet,ComPDFKitViewer=function(){return _createClass(function te(oe){_classCallCheck(this,te),_classPrivateMethodInitSpec(this,_ComPDFKitViewer_brand),_defineProperty$1(this,"_pwd",""),_defineProperty$1(this,"_oldPwd",""),_defineProperty$1(this,"_textSearch",null),_defineProperty$1(this,"_activeSearchIndex",0),_defineProperty$1(this,"_fileList",null),this.config=oe,this.viewerContainer=null,this.pdfLoadingTask=null,this.printService=null,this.pdfSidebar=null,this.pdfOutlineViewer=null,this.outlines=[],this.pdfLayerViewer=null,this.pdfDocument=null,this.downloadComplete=!1,this.isInitialViewSet=!1,this.pdfLinkService=null,this.externalServices=GenericExternalServices,this.percent=0,this.pageChangedCallback=null,this.scaleChangedCallback=null,this.annotationsNumChangedCallback=null,this.distanceChangedCallback=null,this.verified=!1,this.isFillConsecutively=!1,this._license="",this._token=null,this._pdfId=null,this.annotations=null,this.annotationHistory=[],this._annotationMode=0,this._boundEvents=Object.create(null),this._title=document.title,this.activeTool="",this.color="color",this.pagesPtr=[],this.saveAction=null,this.enableReply=!0,this.isAnnotationPopup=!0,this.enableDefaultFont=!1,this.enableCustomFont=!1,this.fontsJson=null,this.webFontURL="https://www.compdf.com/fonts/",this.optionUrl={baseUrl:"https://wms.compdf.com",verifyUrl:"/api/license/verify/v1",webviewBaseUrl:"https://web-viewer-backend.compdf.com",uploadUrl:"/web-viewer/annotate/openPdfToAnnotate",editUrl:"/web-viewer/annotate/edit",saveUrl:"/web-viewer/annotate/save",flattenUrl:"/web-viewer/annotate/saveAndFlatten",uploadAnnotationsUrl:"/web-viewer/annotate/importAnnotateToPdf",downloadAnnotation:"/web-viewer/annotate/exportAnnotate",compareUrl:"/web-viewer/annotate/pdfCompare"},this.eventBus=new EventBus,this.toolMode="",this.$t=oe.$t,this.fontFileInited=!1,this.contentEditAnnotationsManager={},this.initWorker(),this.annotator="Guest",this.isAnnotationModified=!1,this.isContentEditModyfied=!1,this.redactionList=[],this.layers=[],this.ocgsPtr=null,this.isRenderAnnotations=!1,this.colorList=[],this.renderLayerPermission=!1},[{key:"pagesCount",get:function(){return this.doc?this._pagesCount:0}},{key:"annotationsCount",get:function(){return this.pdfViewer.annotationStorage?this.pdfViewer.annotationStorage.size:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(te){this.pdfViewer.currentPageNumber=te}},{key:"currentPageNumber",get:function(){return this.pdfViewer.currentPageNumber}},{key:"scale",get:function(){return this.pdfViewer.currentScale}},{key:"isDocumentModified",get:function(){return this.isAnnotationModified||this.isContentEditModyfied}},{key:"getPageWidth",value:function(te){return this.pagesPtr[te-1].width}},{key:"getPageHeight",value:function(te){return this.pagesPtr[te-1].height}},{key:"initWorker",value:function(){var te=new PDFWorker;this.worker=te;var oe=te.messageHandler;this.messageHandler=oe}},{key:"_decrypt",value:function(te){var oe=new JSEncrypt;oe.setPrivateKey(`MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCb9LJZzBAOR3YDT0/rLqY1pCu6
    ge7lb0aU4k/aTnxSz10t/JUUtGMvQ2tBy36hjwulouM6xoFSm8gnjovALuVpTltRPPEfN+uX6AVy
    Wa58TsS2+Q9JRPHJlOb4sDEriUnzLtonahqF/S/EiijMAkNc2b1KNNUb2bDNmLi6YvT7d1sh3iIf
    kTggsyt3UVUjh2exEVpb8Ww4grmLJjFssi5nZksLDhlA0MUr4dPmIcDl0RlIwHTsxrJbewnX7kNd
    MsSvCxYV1EtmBx9KRCu8ON2bRwKaaWd7fAT9yZWYpjQmbZ5A4CAqDcEAlW8RrhMv0FNKVn1/GMVu
    DC/PsWTyI1fJAgMBAAECggEAazkHThmwiEC1cH0dEzLVb1faALbIitHAkygtgognjb+n7rATx1Jm
    Rt5xZaEFBQqWFWEyHPzRePxF1nx4tL8JVydaPTZLCQ2nWp9Y70+dWTXGpY4C5nsSSWeojR6GD8qq
    Hxn9PtACQFDcgKIEfo6nxbSmIdjFFArNNe1kRDE5AZHtZi7Q6JDRewp6mESrSGED1JodQ4xJoEZl
    1HPvMTxcGGQk/8EZOWXaGvGuBEfIMc33g61YxxhWXb6Rf7x8QKpa2cRLbqN+74wdiWyQUAcSjZSi
    LzeY0a4h7DKkhBEHWXT4svrXsF1RjMRpTi8amxNgUP7RSSTiF9iT6fpGpnwWKQKBgQDsP18lwMjl
    blt8mKqrL9SKVMoOLKUaci9WNV14qEUgNp/RIqjflS0wasbRo7suix2Cwd58ZVAmueuH5W9ZM9NP
    A9RP5vnm8fqfqMZIq+Z7ORhry5QpGlOo0tKkik716kTRXl5w3O/YcR8wBZ7Xzwh467OYcRMNnr2i
    8F5eT4Ny5wKBgQCo/sQrc4KqsYwdWWZW+O92jIylxgtCQsZNg1cXql91IuB3lx1HnDaN/R2MeCkp
    ok+hYXWB0848321x+vYdL9ivLUrnHpNoycFEuhqNTYbyZWnq1tKPz9RDhPIwEmlQVW3dU9hWEjF5
    6sa4NXP7/lSiYaQe0FS4BYQ7KCwahxw5zwKBgQCyCYv92oxLguBFRJQR0EjfOsjO58xA4t5TnIHl
    hQIbJa9JH1KetEBK5Z0Rrc9JYyOJP+sYWg2OMbyTPE+urMTJHjypPosEBUX3fmx3pbxbDosd6Vyt
    oR588uw1fdnFr5fPJMwNSCMkPRPgz8uGHYrn/dDpyAUw1XlaSsUDU+7e7wKBgDHCej6VD3d1Od12
    cmTPfar5bXxuWOhUwxEVyDImr17NOyzbaPqp64JZcjbnNq+UpD/Pc4sbs5FG9HHoREmJyhKikniF
    D0B+j5LN/X13w3FiHRLR2EQSHN0YqzsuYKYP0X6m7n9BciIE2ChrTNB5LbB2cZ3FF/zrWukURhA1
    kkEPAoGBAIpoB6ehuqTn7cisbXjaLqwzX35y50+KED2TamB1FkTjfU5YPsSnKBX9CfCeEd+yr08r
    mecHPUYVj5SpLlcpzx+n7taJCzNJ4SuE186qwHR+MGAS3reXsz5l5GVu7WSH2uKZ7OuXnzCJC4/r
    dx/f2C0wOi6fdC46fAZVACROoV9T`);for(var _e=Base64.decode(te),Ce=_e.length,Ee="",Te=0;Te<Ce;){var Re=Base64.encode(_e.substr(Te,256));Ee+=oe.decrypt(Re),Te+=256}return Ee||!1}},{key:"_verifyLicense",value:(ze=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te;return _regeneratorRuntime().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return _e=window.location.hostname.split(".").slice(-2).join("."),Ce=_e,Ee=this.messageHandler,Re.next=5,Ee.sendWithPromise("InitConfig",{license:oe,appId:Ce});case 5:return Te=Re.sent,Re.abrupt("return",Te);case 7:case"end":return Re.stop()}},te,this)})),function(te){return ze.apply(this,arguments)})},{key:"_twoStepVerification",value:(Fe=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe=this;return _regeneratorRuntime().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,this._verifyLicense(oe);case 2:if(_e=je.sent,Ce=oe,!_e.code){je.next=16;break}return Ee=window.location.hostname.split(".").slice(-2).join("."),Te=CryptoJS.MD5("".concat(oe,"7").concat(Ee,"compdfkitonlinelicense")).toString(),Re={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license:Ce,platform:7,app_id:Ee,signature:Te})},je.next=10,fetch(this.optionUrl.baseUrl+this.optionUrl.verifyUrl,Re).then(function(We){return We.json()}).then(function(We){if(We.code===200){var Ze=Oe._decrypt(We.license);return Ze||(Oe.eventBus.dispatch("message",{type:"ERROR",message:"Invalid License"}),console.log("Invalid License"),!1)}return Oe.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),!1}).catch(function(We){return Oe.eventBus.dispatch("message",{type:"ERROR",message:"Network Error"}),console.log({error:!0,message:We.message}),!1});case 10:if(Ce=je.sent){je.next=13;break}return je.abrupt("return",!1);case 13:return je.next=15,this._verifyLicense(Ce);case 15:_e=je.sent;case 16:if(_e.code){je.next=21;break}return this._license=Ce,je.abrupt("return",!0);case 21:return this.eventBus.dispatch("message",{type:"ERROR",message:_e.message}),console.log(_e.message),je.abrupt("return",!1);case 24:case"end":return je.stop()}},te,this)})),function(te){return Fe.apply(this,arguments)})},{key:"initConfig",value:(Le=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re=this;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(oe.license){Oe.next=4;break}return this.eventBus.dispatch("message",{type:"ERROR",message:"License code not exists"}),console.log("License code not exists"),Oe.abrupt("return",!1);case 4:return this.license=oe.license,Oe.prev=5,Oe.next=8,this.worker.promise;case 8:Oe.next=14;break;case 10:return Oe.prev=10,Oe.t0=Oe.catch(5),console.log(Oe.t0),Oe.abrupt("return");case 14:if(oe.webviewerServer==="Server"&&(this.webviewerServer=!0),"enableDefaultFont"in oe&&(this.enableDefaultFont=oe.enableDefaultFont),"enableReply"in oe&&(this.enableReply=oe.enableReply),"isAnnotationPopup"in oe&&(this.isAnnotationPopup=oe.isAnnotationPopup),oe.enableCustomFont&&(this.enableCustomFont=!0),oe.webFontURL&&(this.enableCustomFont=!0,this.webFontURL=oe.webFontURL.endsWith("/")?oe.webFontURL:oe.webFontURL+"/"),this.webviewerServer||!this.enableCustomFont){Oe.next=45;break}return _e=this.webFontURL,Oe.next=24,fetch(_e+"fonts.json");case 24:if(!(Ce=Oe.sent).ok){Oe.next=31;break}return Oe.next=28,Ce.json();case 28:this.fontsJson=Oe.sent,Oe.next=32;break;case 31:console.error("Invalid webFontURL");case 32:if(!(this.fontsJson&&this.fontsJson[0].filePath&&this.fontsJson[0].filePath.endsWith("brotli"))){Oe.next=44;break}return Oe.next=35,fetch(_e+"font.ff");case 35:if(!(Ee=Oe.sent).ok){Oe.next=43;break}return Oe.next=39,Ee.arrayBuffer();case 39:Te=Oe.sent,this._fileList=new Uint8Array(Te),Oe.next=44;break;case 43:console.error("Invalid webFontURL");case 44:this.messageHandler.on("LoadFont",function(je){var We=je.fontFamily;Re.eventBus.dispatch("LoadFont",{fontFamily:We})});case 45:oe.autoJumpNextSign&&(this.autoJumpNextSign=oe.autoJumpNextSign),oe.isRenderAnnotations&&(this.isRenderAnnotations=oe.isRenderAnnotations),oe.renderLayerPermission&&(this.renderLayerPermission=oe.renderLayerPermission),this.initColorFile(oe.colorFile);case 49:case"end":return Oe.stop()}},te,this,[[5,10]])})),function(te){return Le.apply(this,arguments)})},{key:"initializeViewer",value:function(te){var oe=te.container,_e=te.viewer,Ce=te.thumbnailView,Ee=te.annotationView,Te=te.findbarView,Re=te.toggleButton;this._initializeViewerComponents({container:oe,viewer:_e,thumbnailView:Ce,annotationView:Ee,findbarView:Te,toggleButton:Re}),this.initBindEvents(),Ce&&Ee&&(this.bindEvents(),this.bindWindowEvents())}},{key:"setTool",value:function(te){var oe=te.tool,_e=te.color;this.activeTool=oe,this.color=_e,this.eventBus.dispatch("toolChanged",{tool:oe,color:_e})}},{key:"initAnnotations",value:function(te){for(var oe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],_e=0;_e<te.length;_e++){var Ce=this.handleAnnotations(te[_e],!0);if(Ce&&Ce.code)return!1;oe&&this.pdfViewer.renderAnnotation(te[_e])}this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations})}},{key:"handleAnnotations",value:(Me=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe=arguments;return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(_e=Qe.length>1&&Qe[1]!==void 0&&Qe[1],this.annotations||(this.annotations={}),!_e){rt.next=6;break}this.initAddAnnotations(oe),rt.next=39;break;case 6:if(!(Number(oe.pageIndex)+1>this.pagesCount)){rt.next=8;break}return rt.abrupt("return");case 8:if(this.pushAnnotations(oe),this.webviewerServer&&oe.type!=="stamp"){rt.next=39;break}if("destPage"in oe&&(oe.doc=this.doc,oe.pageHeight=this.pagesPtr[oe.pageIndex].height),oe.type!=="custom"){rt.next=13;break}return rt.abrupt("return");case 13:return Ce=this.pagesPtr[oe.pageIndex].pagePtr,rt.next=16,this.messageHandler.sendWithPromise("CreateAnnotation",{doc:this.doc,pagePtr:Ce,annotation:oe});case 16:if(!(Ee=rt.sent)||!Ee.code){rt.next=21;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ee.message}),console.log(Ee.message),rt.abrupt("return",Ee);case 21:if(Te=Ee.annotPtr,oe.pagePtr=Ce,oe.annotPtr=Te,oe.rect||!this.webviewerServer){rt.next=39;break}return rt.next=27,this.messageHandler.sendWithPromise("GetAnnotRect",{pagePtr:Ce,annotPtr:Te});case 27:Re=rt.sent,Oe=this.pdfViewer.getPageView(oe.pageIndex),je=Oe.viewport.viewBox[2],We=Oe.viewport.viewBox[3],Ze=Re.right-Re.left,Xe=Re.bottom-Re.top,Ge={left:(je-Ze)/2,top:(We-Xe)/2,right:(je+Ze)/2,bottom:(We+Xe)/2},oe.rect=Ge;case 39:case"end":return rt.stop()}},te,this)})),function(te){return Me.apply(this,arguments)})},{key:"initAddAnnotations",value:function(te){var oe=te.pageIndex,_e=this.annotations;_e[oe]||(_e[oe]=[]),te.index!==void 0?_e[oe][te.index]=te:_e[oe].push(te),annotationStore.annotationsAll||(annotationStore.annotationsAll=_e)}},{key:"pushAnnotations",value:function(te){var oe=te.pageIndex,_e=this.annotations;_e[oe]||(_e[oe]=[],this.pdfViewer._pages[oe].annotations=_e[oe]),annotationStore.annotationsAll||(annotationStore.annotationsAll=_e),_e[oe].push(te)}},{key:"addAnnotations",value:function(te){var oe=this;(Array.isArray(te)?te:[te]).forEach(function(_e){oe.handleAnnotationChange({type:"add",annotation:_e})})}},{key:"delAnnotations",value:(ke=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te;return _regeneratorRuntime().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:_e=Array.isArray(oe)?oe:[oe],Ce=_createForOfIteratorHelper(_e),Re.prev=2,Ce.s();case 4:if((Ee=Ce.n()).done){Re.next=10;break}return Te=Ee.value,Re.next=8,this.handleAnnotationChange({type:"delete",annotation:Te});case 8:Re.next=4;break;case 10:Re.next=15;break;case 12:Re.prev=12,Re.t0=Re.catch(2),Ce.e(Re.t0);case 15:return Re.prev=15,Ce.f(),Re.finish(15);case 18:case"end":return Re.stop()}},te,this,[[2,12,15,18]])})),function(te){return ke.apply(this,arguments)})},{key:"deleteAnnotations",value:(we=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re=this;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:oe||(oe=Object.values(this.annotations).reduce(function(je,We){return je.concat(We)},[])),_e=Array.isArray(oe)?oe:[oe],Ce=_regeneratorRuntime().mark(function je(We){var Ze,Xe,Ge,Qe;return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(Re.annotations[_e[We].pageIndex]){rt.next=2;break}return rt.abrupt("return",0);case 2:if((Xe=Re.annotations[_e[We].pageIndex].findIndex(function(dt){return(dt==null?void 0:dt.name)===_e[We].name}))!==-1){rt.next=5;break}return rt.abrupt("return",0);case 5:if(Ge=Re.annotations[_e[We].pageIndex][Xe],Qe=null,(Ze=Ge.replies)===null||Ze===void 0||!Ze.length){rt.next=13;break}return rt.next=10,Re.messageHandler.sendWithPromise("RemoveFromPageIncludeReplyAnnot",{pagePtr:Ge.pagePtr,annotPtr:Ge.annotPtr});case 10:Qe=rt.sent,rt.next=16;break;case 13:return rt.next=15,Re.messageHandler.sendWithPromise("RemoveAnnot",{annotPtr:Ge.annotPtr});case 15:Qe=rt.sent;case 16:if(!Qe||!Qe.code){rt.next=20;break}return Re.eventBus.dispatch("message",{type:"ERROR",message:Qe.message}),console.log(Qe.message),rt.abrupt("return",{v:void 0});case 20:Re.annotations[_e[We].pageIndex].splice(Xe,1),Re.pdfViewer.deleteAnnotations(Ge),Re.eventBus.dispatch("annotationChange",{type:"delete",annotation:Ge}),Re.eventBus.dispatch("annotationUpdated",{annotations:Re.annotations}),Re.isAnnotationModified=!0;case 25:case"end":return rt.stop()}},je)}),Te=0;case 4:if(!(Te<_e.length)){Oe.next=14;break}return Oe.delegateYield(Ce(Te),"t0",6);case 6:if((Ee=Oe.t0)!==0){Oe.next=9;break}return Oe.abrupt("continue",11);case 9:if(!Ee){Oe.next=11;break}return Oe.abrupt("return",Ee.v);case 11:Te++,Oe.next=4;break;case 14:case"end":return Oe.stop()}},te,this)})),function(te){return we.apply(this,arguments)})},{key:"addEvent",value:function(te,oe){this.eventBus._on(te,oe)}},{key:"removeEvent",value:function(te,oe){this.eventBus._off(te,oe)}},{key:"loadDocument",value:(ye=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je=this,We=arguments;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(_e=We.length>1&&We[1]!==void 0?We[1]:{},this.verified){Ze.next=6;break}return Ze.next=4,this._twoStepVerification(this.license);case 4:Ce=Ze.sent,this.verified=Ce;case 6:if(this.verified){Ze.next=8;break}return Ze.abrupt("return",{verified:this.verified});case 8:if(!this.pdfLoadingTask){Ze.next=11;break}return Ze.next=11,this.close();case 11:return _e.annotations&&parseAnnotationFromXml(_e.annotations),this.info=_e.info||null,this.pageChangedCallback=_e.pageChangedCallback||this.pageChangedCallback,this.scaleChangedCallback=_e.scaleChangedCallback||this.scaleChangedCallback,this.annotationsNumChangedCallback=_e.annotationsNumChangedCallback||this.annotationsNumChangedCallback,this.distanceChangedCallback=_e.distanceChangedCallback||this.distanceChangedCallback,this.annotations=null,annotationStore.annotationsAll=null,annotationStore.signatures=null,annotationStore.selectedName=null,this.ocgsPtr=null,annotationStore.ignoreColors=[],this.fontFileInited=!1,this.saveAction=_e.saveAction||null,this.isAnnotationModified=!1,this.isContentEditModyfied=!1,this.colorList=[],Ee={cMapUrl:CMAP_URL,cMapPacked:!0,enableXfa:!0},typeof oe=="string"?Ee.url=oe:oe&&"byteLength"in oe?Ee.data=oe:oe.url&&oe.originalUrl&&(Ee.url=oe.url),Ee.password=_e.password||"",this._pwd=Ee.password,Te=pdfExports.getDocument(Ee),this.pdfLoadingTask=Te,this._docName=_e.filename||pdfExports.getPdfFilenameFromUrl(Ee.url),Re=function(Xe){return je._pwd=Xe},Oe=function(Xe,Ge){je._oldPwd&&_e.notUpdatePwd?(Re(je._oldPwd),Xe(je._oldPwd),Te.onPassword=null):_e.pwd?(Re(_e.pwd),Xe(_e.pwd),Te.onPassword=null):(je.passwordPrompt.setUpdateCallback(Xe,Ge,Re),je.passwordPrompt.open())},Te.onPassword=Oe,Te.onProgress=function(Xe){var Ge=Xe.loaded,Qe=Xe.total;(_e.progress||je.progress).call(je,Ge/Qe)},Ze.abrupt("return",Te.promise.then(function(){var Xe=_asyncToGenerator(_regeneratorRuntime().mark(function Ge(Qe){return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=2,Qe.getData().then(function(){var dt=_asyncToGenerator(_regeneratorRuntime().mark(function qe(He){var Ke,ot,at,et,Je,nt;return _regeneratorRuntime().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return je.pdfDocument=Qe,_e.notUpdatePwd||(je._oldPwd=je._pwd),Ke=new Uint8Array(He),it.next=5,je.messageHandler.sendWithPromise("LoadFile",{doc:je.doc,pagesPtr:je.pagesPtr,buffer:Ke,webFontURL:je.webFontURL,fileList:je._fileList,fontsJson:je.fontsJson,enableDefaultFont:je.enableDefaultFont});case 5:return ot=it.sent,je.doc=ot,it.next=9,je.messageHandler.sendWithPromise("LoadDocumentByStream",{doc:je.doc,fileId:0,length:Ke.length,password:je._pwd});case 9:return it.sent,je.contentEditAnnotationsManager.addTextEditor=function(ht){var lt=ht.pageNumber;if(lt>je.pagesCount||lt<1)throw new Error({message:"Invalid pageNumber"});je.toolMode!=="editor"&&je.setToolMode("editor"),je.currentPageNumber!==lt&&je.pdfViewer.scrollPageIntoView({pageNumber:lt});var ft=lt-1,mt=je.pdfViewer._pages[ft];mt&&mt.addTextEditor(ht)},je.contentEditAnnotationsManager.getEditAnnotation=function(){var ht=_asyncToGenerator(_regeneratorRuntime().mark(function lt(ft){var mt,Ct,_t;return _regeneratorRuntime().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(!(ft>je.pagesCount||ft<1)){wt.next=2;break}throw new Error({message:"Invalid pageNumber"});case 2:if(je.toolMode!=="editor"&&je.setToolMode("editor"),je.currentPageNumber!==ft&&je.pdfViewer.scrollPageIntoView({pageNumber:ft}),mt=ft-1,!(Ct=je.pdfViewer._pages[mt])){wt.next=11;break}return wt.next=9,Ct.getEditAnnotation();case 9:return _t=wt.sent,wt.abrupt("return",_t);case 11:case"end":return wt.stop()}},lt)}));return function(lt){return ht.apply(this,arguments)}}(),at=null,it.next=15,je.initPage();case 15:if(!je.webviewerServer){it.next=27;break}return je.controller&&(je.controller.abort(),je.controller=null),(et=new FormData).append("file",new Blob([He],{type:"application/pdf"}),je._docName),et.append("password",je._pwd),je.controller=new AbortController,Je=je.controller.signal,nt={method:"POST",headers:{Authorization:je._token},signal:Je,body:et},it.next=25,fetch(je.optionUrl.webviewBaseUrl+je.optionUrl.uploadUrl,nt).then(function(ht){return ht.json()}).then(function(ht){if(ht.code==="200"){var lt=ht.data;je._pdfId=lt.pdfId;var ft=lt.annotateJson&&lt.annotateJson;at=je.convertAnnotation(ft)}else ht.code}).catch(function(ht){if(ht.name!=="AbortError")return console.log(ht),{error:!0,message:ht.message}});case 25:it.next=35;break;case 27:if(je.isRenderAnnotations){it.next=33;break}return it.next=30,je.getAnnotations();case 30:at=it.sent,it.next=35;break;case 33:return it.next=35,je.getSignatures();case 35:at&&je.initAnnotations(at);case 36:case"end":return it.stop()}},qe)}));return function(qe){return dt.apply(this,arguments)}}());case 2:return rt.next=4,je.load(Qe);case 4:return rt.abrupt("return",{pwd:je._pwd,verified:je.verified});case 5:case"end":return rt.stop()}},Ge)}));return function(Ge){return Xe.apply(this,arguments)}}(),function(Xe){if(Te===je.pdfLoadingTask){var Ge="loading_error";if(Xe instanceof pdfExports.InvalidPDFException)return Ge="invalid_file_error",console.warn("Invalid or corrupted PDF file."),new Promise(function(Qe,rt){rt("invalid_file_error")});if(Xe instanceof pdfExports.MissingPDFException)Ge="missing_file_error",console.warn("Missing PDF file.");else if(Xe instanceof pdfExports.UnexpectedResponseException)Ge="unexpected_response_error",console.warn("Unexpected server response.");else if(Xe){if(Xe.message==="No password given")return Ge="no_password_given",console.warn("No password given."),new Promise(function(Qe,rt){rt("no_password_given")});if(Xe.message==="Incorrect Password")return new Promise(function(Qe,rt){rt("incorrect_password")})}throw new Error(Ge)}}));case 40:case"end":return Ze.stop()}},te,this)})),function(te){return ye.apply(this,arguments)})},{key:"getSelectedText",value:function(te){if(te){var oe=this.pdfViewer._pages[te-1];if(oe)return oe.selectedText}return this.pdfViewer._pages.map(function(_e){return _e.selectedText}).filter(function(_e){return _e!==null}).join(`
`)}},{key:"getSelectedTextQuads",value:function(te){if(te){var oe=this.pdfViewer._pages[te-1];if(oe)return oe.selectedTextQuads}var _e=this.pdfViewer._pages.map(function(Ce){return Ce.selectedTextQuads}).filter(function(Ce){return Ce!==null});return _e.length?_e:null}},{key:"convertAnnotation",value:function(te){var oe=[];for(var _e in te){var Ce=te[_e];Array.isArray(Ce)||(Ce=[Ce]);for(var Ee=0;Ee<Ce.length;Ee++){!Ce[Ee].type&&(Ce[Ee].type=_e);var Te=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatAnnotation).call(this,Ce[Ee]);oe.push(Te)}}return oe}},{key:"getWebFontNameList",value:(ve=_asyncToGenerator(_regeneratorRuntime().mark(function te(){return _regeneratorRuntime().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,this.messageHandler.sendWithPromise("GetWebFontNameList");case 2:return oe.abrupt("return",oe.sent);case 3:case"end":return oe.stop()}},te,this)})),function(){return ve.apply(this,arguments)})},{key:"getOutlines",value:function(){if(this.outlines)return this.outlines}},{key:"scrollPageIntoView",value:function(te){te.pageNumber}},{key:"search",value:(De=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.messageHandler.sendWithPromise("Search",{pagesPtr:this.pagesPtr,value:oe});case 2:if(!(_e=Ee.sent)||!_e.code){Ee.next=7;break}return this.eventBus.dispatch("message",{type:"ERROR",message:_e.message}),console.log(_e.message),Ee.abrupt("return");case 7:return Ce=_e.searchResults,this.searchResults=Ce,this.eventBus.dispatch("search",Ce),Ce.length?this.setActiveSearchResult():(this.clearSearchResults(),this._activeSearchIndex=0),Ee.abrupt("return",Ce);case 12:case"end":return Ee.stop()}},te,this)})),function(te){return De.apply(this,arguments)})},{key:"setActiveSearchResult",value:function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.searchResults){var _e=te||this.searchResults[0],Ce=_e.quads[0],Ee=Ce.left*this.scale,Te=Ce.top*this.scale,Re=this.pdfViewer._pages[_e.pageNum-1];if(this.pdfViewer.currentPageNumber=_e.pageNum,scrollIntoView(Re.div,{left:Ee,top:Te}),te){var Oe=this.searchResults[this._activeSearchIndex];this.pdfViewer._pages[Oe.pageNum-1].clearActiveSearchResult(Oe),Re.setActiveSearchResult(te),this._activeSearchIndex=oe}else Re.setActiveSearchResult(_e),this._activeSearchIndex=0}}},{key:"clearSearchResults",value:function(){if(this.searchResults&&this.pdfViewer&&this.pdfViewer._pages&&this.pdfViewer._pages.length){for(var te=0;te<this.pdfViewer._pages.length;te++)this.pdfViewer._pages[te].clearSearchResults();this.searchResults=null}}},{key:"initPage",value:(Ve=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.messageHandler.sendWithPromise("GetPageCount",{doc:this.doc});case 2:oe=Te.sent,this._pagesCount=oe,this.pagesPtr=[],_e=0;case 6:if(!(_e<oe)){Te.next=17;break}return Te.next=9,this.messageHandler.sendWithPromise("GetPageSize",{doc:this.doc,pageIndex:_e});case 9:return Ce=Te.sent,Te.next=12,this.messageHandler.sendWithPromise("InitText",{pagePtr:Ce.pagePtr});case 12:Ee=Te.sent,this.pagesPtr.push({doc:this.doc,pagePtr:Ce.pagePtr,textPtr:Ee,width:Ce.width,height:Ce.height,rotation:Ce.rotation});case 14:_e++,Te.next=6;break;case 17:case"end":return Te.stop()}},te,this)})),function(){return Ve.apply(this,arguments)})},{key:"getAnnotations",value:(be=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe;return _regeneratorRuntime().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ge.next=2,this.getSignatures();case 2:oe=Ge.sent,_e=[],Ce=this.pagesPtr,Ee=0;case 6:if(!(Ee<this.pagesCount)){Ge.next=38;break}return Te=Ce[Ee],Ge.next=10,this.messageHandler.sendWithPromise("InitAnnot",{pageIndex:Ee,pagePtr:Te.pagePtr});case 10:Re=Ge.sent,Oe=0;case 12:if(!(Oe<Re.annotCount)){Ge.next=35;break}if(je=Re.annotations[Oe],We=je.type,Ze=AnnotationTypeString[We],je.pageIndex=Ee,je.type=Ze,Xe=null,Ze!=="widget"){Ge.next=25;break}return Ge.next=22,this.messageHandler.sendWithPromise("GetWidgetAnnotation",{doc:this.doc,annotPtr:je.annotPtr,pagePtr:je.pagePtr,typeInt:We,signaturePtrList:oe});case 22:Xe=Ge.sent,Ge.next=30;break;case 25:return Ge.next=27,this.messageHandler.sendWithPromise("GetAnnotation",{doc:this.doc,annotPtr:je.annotPtr,pagePtr:je.pagePtr,typeInt:We,scale:this.scale});case 27:(Xe=Ge.sent)&&Xe.replies&&Xe.replies.length&&Xe.replies.forEach(function(Qe){return Qe.name=v4()}),je.type!=="polygon"||Xe.measure||(je.type="square");case 30:Object.assign(je,Xe),_e.push(je);case 32:Oe++,Ge.next=12;break;case 35:Ee++,Ge.next=6;break;case 38:return this.pdfViewer.pagesPtr=this.pagesPtr,Ge.abrupt("return",_e);case 40:case"end":return Ge.stop()}},te,this)})),function(){return be.apply(this,arguments)})},{key:"reRenderAnnotations",value:(Be=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge;return _regeneratorRuntime().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Qe.next=2,this.getSignatures();case 2:oe=Qe.sent,this.annotations=null,_e=[],Ce=this.pagesPtr,Ee=0;case 7:if(!(Ee<Ce.length)){Qe.next=39;break}return Te=Ce[Ee],Qe.next=11,this.messageHandler.sendWithPromise("InitAnnot",{pageIndex:Ee,pagePtr:Te.pagePtr});case 11:Re=Qe.sent,Oe=0;case 13:if(!(Oe<Re.annotCount)){Qe.next=36;break}if(je=Re.annotations[Oe],We=je.type,Ze=AnnotationTypeString[We],je.pageIndex=Ee,je.type=Ze,Xe=null,Ze!=="widget"){Qe.next=26;break}return Qe.next=23,this.messageHandler.sendWithPromise("GetWidgetAnnotation",{doc:this.doc,annotPtr:je.annotPtr,pagePtr:je.pagePtr,typeInt:We,signaturePtrList:oe});case 23:Xe=Qe.sent,Qe.next=31;break;case 26:return Qe.next=28,this.messageHandler.sendWithPromise("GetAnnotation",{doc:this.doc,annotPtr:je.annotPtr,pagePtr:je.pagePtr,typeInt:We,scale:this.scale});case 28:(Xe=Qe.sent)&&Xe.replies&&Xe.replies.length&&Xe.replies.forEach(function(rt){return rt.name=v4()}),je.type!=="polygon"||Xe.measure||(je.type="square");case 31:Object.assign(je,Xe),_e.push(je);case 33:Oe++,Qe.next=13;break;case 36:Ee++,Qe.next=7;break;case 39:for(Ge=0;Ge<_e.length;Ge++)this.annotations||(this.annotations={}),this.pushAnnotations(_e[Ge]),this.pdfViewer.renderAnnotation(_e[Ge]);this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations});case 41:case"end":return Qe.stop()}},te,this)})),function(){return Be.apply(this,arguments)})},{key:"supportsFullscreen",get:function(){return shadow$1(this,"supportsFullscreen",document.webkitFullscreenEnabled||document.mozFullscreenEnabled||document.fullscreenEnabled)}},{key:"removeAllAnnotations",value:function(){this.pdfViewer.annotationStorage&&this.pdfViewer.annotationStorage.cleanup()}},{key:"importAnnotations",value:(Ne=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re=this;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,new Promise(function(je){var We=new FileReader;We.onload=function(Ze){var Xe=Ze.target.result;je(Xe)},Re.webviewerServer?We.readAsText(oe):We.readAsArrayBuffer(oe)});case 2:if(_e=Oe.sent,!this.webviewerServer){Oe.next=11;break}return(Ce=new FormData).append("xfdfFile",oe),Ce.append("pdfId",this._pdfId),Oe.next=9,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.uploadAnnotationsUrl,{method:"POST",headers:{Authorization:this._token},body:Ce}).then(function(je){return je.json()}).then(function(je){if(je.code==="200"){var We=je.data;Re._pdfId=We.pdfId;var Ze=We.annotateJson,Xe=Re.convertAnnotation(Ze);Xe&&(Re.annotations=null,Re.initAnnotations(Xe,!0))}}).catch(function(je){if(je.name!=="AbortError")return console.log(je),{error:!0,message:je.message}});case 9:Oe.next=21;break;case 11:return Ee=new Uint8Array(_e),Oe.next=14,this.messageHandler.sendWithPromise("XFDFImportAnnotations",{doc:this.doc,xfdfBuffer:Ee});case 14:if(!(Te=Oe.sent)||!Te.code){Oe.next=19;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Te.message}),console.log(Te.message),Oe.abrupt("return",!1);case 19:this.emptyAnnotations(),this.reRenderAnnotations();case 21:case"end":return Oe.stop()}},te,this)})),function(te){return Ne.apply(this,arguments)})},{key:"saveAnnotations",value:function(){if(this.pdfDocument&&this.info){var te,oe=[],_e=_createForOfIteratorHelper(this.pdfViewer.annotationStorage._storage);try{for(_e.s();!(te=_e.n()).done;){var Ce=_slicedToArray(te.value,2),Ee=(Ce[0],Ce[1]);oe.push(Ee.annotationObj)}}catch(Te){_e.e(Te)}finally{_e.f()}this.uploadAnnotations({append_objects:oe,tid:this.info.tid})}}},{key:"initApiUrl",value:function(te){this.optionUrl=te}},{key:"setPassword",value:function(te){if(this.webviewerServer){var oe={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:[{operate:"set-password",userPassword:te}]})};return fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,oe).then(function(_e){return _e.json()}).then(function(_e){return _e.code==="200"}).catch(function(_e){return console.log(_e),!1})}return this.saveAction="set",this._pwd=te,!0}},{key:"removePassword",value:function(){if(this.webviewerServer){var te={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:[{operate:"remove-password"}]})};return fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,te).then(function(oe){return oe.json()}).then(function(oe){return oe.code==="200"}).catch(function(oe){return console.log(oe),!1})}return this._pwd&&(this.saveAction="remove",this._pwd=""),!0}},{key:"getOptionUrl",value:function(){return this.optionUrl}},{key:"uploadAnnotations",value:function(te){var oe={method:"POST",headers:{Accept:"application/json","Content-type":"application/json"}};te.append_objects.length&&(oe.body=JSON.stringify(te),fetch(this.optionUrl.baseUrl+this.optionUrl.saveAnnotations+"?f="+this.info.token,oe).then(function(_e){return _e.json()}).then(function(_e){return _e}).catch(function(_e){return{error:!0,message:_e.message}}))}},{key:"toggleSidebar",value:function(){this.pdfSidebar.toggle()}},{key:"load",value:(Ie=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je=this;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return this.pdfLinkService.setDocument(oe),(_e=this.pdfViewer).setDocument(oe,this.annotations,this.pagesPtr,this.enableReply),Ce=_e.firstPagePromise,_e.onePageRendered,_e.pagesPromise,oe.getDownloadInfo().then(function(Ze){var Xe=Ze.length;je._contentLength=Xe,je.downloadComplete=!0}),this.pdfThumbnailViewer&&this.pdfThumbnailViewer.setDocument(oe),Ee=this.doc,Te=this.messageHandler,We.next=10,Te.sendWithPromise("GetOutlines",{doc:Ee});case 10:if(Re=We.sent,Oe=function(Ze,Xe,Ge){var Qe=new Outline({outline:Ze,index:Xe,doc:Ee,messageHandler:Te,parent:Ge});return Ze.children.forEach(function(rt,dt){Qe.children.push(Oe(rt,dt,Qe))}),Qe},Re.forEach(function(Ze,Xe){var Ge=Oe(Ze,Xe,null);je.outlines.push(Ge)}),We.t0=this.renderLayerPermission,!We.t0){We.next=17;break}return We.next=17,this.getLayers();case 17:Ce.then(function(Ze){je.setInitialView(null,{rotation:null,sidebarView:0,scrollMode:-1,spreadMode:-1}),je.eventBus.dispatch("documentloaded",{source:je})}),this.eventBus.dispatch("documentinit",{source:this});case 19:case"end":return We.stop()}},te,this)})),function(te){return Ie.apply(this,arguments)})},{key:"initBindEvents",value:function(){var te=this.eventBus;this._boundEvents,te._on("scalechanging",this.webViewerScaleChanging.bind(this))}},{key:"bindEvents",value:function(){var te=this.eventBus;this._boundEvents,te._on("resize",this.webViewerResize.bind(this)),te._on("pagerendered",this.webViewerPageRendered.bind(this)),te._on("updateviewarea",this.webViewerUpdateViewarea.bind(this)),te._on("onPageNumberUpdated",this.webViewerPageChanging.bind(this)),te._on("rotationchanging",this.webViewerRotationChanging.bind(this)),te._on("sidebarviewchanged",this.webViewerSidebarViewChanged.bind(this)),te._on("presentationmodechanged",this.webViewerPresentationModeChanged.bind(this)),te._on("presentationmode",this.webViewerPresentationMode.bind(this)),te._on("nextpage",this.webViewerNextPage.bind(this)),te._on("previouspage",this.webViewerPreviousPage.bind(this)),te._on("zoomin",this.webViewerZoomIn.bind(this)),te._on("zoomout",this.webViewerZoomOut.bind(this)),te._on("pagenumberchanged",this.webViewerPageNumberChanged.bind(this)),te._on("scalechanged",this.webViewerScaleChanged.bind(this)),te._on("rotatecw",this.webViewerRotateCw.bind(this)),te._on("rotateccw",this.webViewerRotateCcw.bind(this)),te._on("switchscrollmode",this.webViewerSwitchScrollMode.bind(this)),te._on("scrollmodechanged",this.webViewerScrollModeChanged.bind(this)),te._on("switchspreadmode",this.webViewerSwitchSpreadMode.bind(this)),te._on("spreadmodechanged",this.webViewerSpreadModeChanged.bind(this)),te._on("findfromurlhash",this.webViewerFindFromUrlHash.bind(this)),te._on("updatefindmatchescount",this.webViewerUpdateFindMatchesCount.bind(this)),te._on("updatefindcontrolstate",this.webViewerUpdateFindControlState.bind(this)),te._on("fileinputchange",this.webViewerFileInputChange.bind(this)),te._on("openfile",this.webViewerOpenFile.bind(this)),te._on("switchannotationeditormode",this.webViewerSwitchAnnotationEditorMode.bind(this)),te._on("annotationsCountChanged",this.webViewerAnnotationsCountChanged.bind(this)),te._on("distanceChanged",this.webViewerDistanceChanged.bind(this)),te._on("annotationChanged",this.handleAnnotationChange.bind(this)),te._on("createSignature",this.handleCreateSignature.bind(this)),te._on("handleField",this.handleField.bind(this)),te._on("pageNumberChanged",this.pageNumberChanged.bind(this)),te._on("updateSignatureAp",this.updateSignatureAp.bind(this)),te._on("isContentEditModyfied",this.setContentEditModyfied.bind(this))}},{key:"bindWindowEvents",value:function(){var te=this.eventBus,oe=this._boundEvents;oe.windowResize=function(){te.dispatch("resize",{source:window})},oe.windowHashChange=function(){te.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},oe.windowUpdateFromSandbox=function(_e){te.dispatch("updatefromsandbox",{source:window,detail:_e.detail})},window.addEventListener("resize",oe.windowResize),window.addEventListener("hashchange",oe.windowHashChange),window.addEventListener("updatefromsandbox",oe.windowUpdateFromSandbox)}},{key:"close",value:($e=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee,Te;return _regeneratorRuntime().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(this.pdfLoadingTask){Re.next=2;break}return Re.abrupt("return");case 2:return Ee=[],this.doc&&Ee.push(this.messageHandler.sendWithPromise("ClearDocument",this.doc)),Ee.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(Te=this.pdfThumbnailViewer)===null||Te===void 0||Te.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null)),this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.saveAction=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,(oe=this.pdfSidebar)===null||oe===void 0||oe.reset(),(_e=this.pdfOutlineViewer)===null||_e===void 0||_e.reset(),(Ce=this.pdfAttachmentViewer)===null||Ce===void 0||Ce.reset(),this.outlines=[],this._pwd="",this._pdfId=null,this.annotations=null,this.doc=null,this.layers=[],this.ocgsPtr=null,Re.next=31,Promise.all(Ee);case 31:case"end":return Re.stop()}},te,this)})),function(){return $e.apply(this,arguments)})},{key:"handleInk",value:function(te){var oe=JSON.parse(JSON.stringify(te)),_e="",Ce=[];Array.isArray(oe.inklist)?Ce=oe.inklist:Ce.push(oe.inklist);for(var Ee=0;Ee<Ce.length;Ee++)_e=_e+Ce[Ee].replaceAll(";",",")+"//";return oe.inklist=_e,oe}},{key:"handleAnnotationChange",value:(Pe=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He,Ke,ot,at,et,Je,nt,it,ht;return _regeneratorRuntime().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(_e=oe.annotation,this.annotationHistory.push(_e),Ce=[],Ee=null,Te=["textfield","checkbox","radiobutton","listbox","combobox","pushbutton","signatureFields"],Re=["highlight","underline","strikeout","squiggly"],oe.type!=="add"){lt.next=31;break}Array.isArray(_e)||(_e=[_e]),Oe=_e.length,je=0;case 10:if(!(je<Oe)){lt.next=29;break}if(!(Number(_e[je].pageIndex)+1>this.pagesCount)){lt.next=13;break}return lt.abrupt("continue",26);case 13:if(Te.includes(_e[je].type)?_e[je].operate="add-form":(_e[je].operate="add-annot",_e[je].author=this.annotator),Re.includes(_e[je].type)&&(We=[],!_e[je].quadPoints[0].PointX&&!_e[je].quadPoints[0].PointY)){for(Ze=0;Ze<_e[je].quadPoints.length;Ze++)Xe=_e[je].quadPoints[Ze],Ge=Xe.left,Qe=Xe.top,rt=Xe.right,dt=Xe.bottom,We.push({PointX:Ge,PointY:Qe}),We.push({PointX:rt,PointY:Qe}),We.push({PointX:Ge,PointY:dt}),We.push({PointX:rt,PointY:dt});_e[je].quadPoints=We}return lt.next=17,this.handleAnnotations(_e[je]);case 17:if(!(qe=lt.sent)||!qe.code){lt.next=20;break}return lt.abrupt("return",!1);case 20:this.pdfViewer&&this.pdfViewer.renderAnnotation(_e[je],!!oe.show),_e[je].targetPage=1*_e[je].pageIndex+1,(He=JSON.parse(JSON.stringify(_e[je]))).inklist&&(He=this.handleInk(He)),Ce.push(He),_e[je].type==="redact"&&this.redactionList.push(_e[je]);case 26:je++,lt.next=10;break;case 29:lt.next=76;break;case 31:if(Ke=this.annotations[_e.pageIndex]){lt.next=34;break}return lt.abrupt("return");case 34:if((ot=findIndex(_e.name,Ke))!==-1){lt.next=37;break}return lt.abrupt("return");case 37:if(Ee=Ke[ot],this.webviewerServer&&(_e.index=ot),oe.type!=="delete"){lt.next=61;break}if(this.webviewerServer){lt.next=56;break}if(et=Ke[ot],Je=null,(at=et.replies)===null||at===void 0||!at.length){lt.next=49;break}return lt.next=46,this.messageHandler.sendWithPromise("RemoveFromPageIncludeReplyAnnot",{pagePtr:et.pagePtr,annotPtr:_e.annotPtr});case 46:Je=lt.sent,lt.next=52;break;case 49:return lt.next=51,this.messageHandler.sendWithPromise("RemoveAnnot",{annotPtr:_e.annotPtr});case 51:Je=lt.sent;case 52:if(!Je||!Je.code){lt.next=56;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Je.message}),console.log(Je.message),lt.abrupt("return");case 56:Ke.splice(ot,1),Ke.length||delete this.annotations[_e.pageIndex],this.redactionList=this.redactionList.filter(function(ft){return ft.name!==_e.name}),lt.next=72;break;case 61:if(this.webviewerServer){lt.next=70;break}return _e.doc=this.doc,lt.next=65,this.messageHandler.sendWithPromise("EditAnnotation",{annotation:_e});case 65:if(!(nt=lt.sent)||!nt.code){lt.next=70;break}return this.eventBus.dispatch("message",{type:"ERROR",message:nt.message}),console.log(nt.message),lt.abrupt("return",!1);case 70:it=Ke[ot],Ke[ot]=_objectSpread2$1(_objectSpread2$1({},it),_e);case 72:_e.targetPage=_e.pageIndex+1,(ht=_e).inklist&&(ht=this.handleInk(ht)),Ce.push(ht);case 76:if(this.eventBus.dispatch("annotationChange",{type:oe.type,annotation:oe.type==="add"?oe.annotation:Ee}),this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations}),!this.webviewerServer){lt.next=82;break}return _assertClassBrand(_ComPDFKitViewer_brand,this,_convertAnnotationsForBackend).call(this,Ce),lt.next=82,_assertClassBrand(_ComPDFKitViewer_brand,this,_postAnnotations).call(this,Ce);case 82:return this.eventBus.dispatch("redactAnnotationChanged",this.redactionList.length),this.isAnnotationModified=!0,lt.abrupt("return",!0);case 85:case"end":return lt.stop()}},te,this)})),function(te){return Pe.apply(this,arguments)})},{key:"emptyAnnotations",value:function(){var te=this.annotations;if(this.annotations)for(var oe in te)this.pdfViewer._pages[oe].emptyAnnotations()}},{key:"handleCreateSignature",value:function(te){this.eventBus.dispatch("annotationChanged",{type:"add",annotation:te})}},{key:"webViewerDistanceChanged",value:function(te){this.distanceChangedCallback(te.distance)}},{key:"progress",value:function(te){if(!this.downloadComplete){var oe=Math.round(100*te);oe<=this.percent||(this.percent=oe)}}},{key:"flattenPdf",value:(Se=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!this._token||!this._pdfId){Ee.next=5;break}return oe={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId})},Ee.abrupt("return",fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.flattenUrl,oe).then(function(){var Te=_asyncToGenerator(_regeneratorRuntime().mark(function Re(Oe){var je;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!Oe.headers.get("content-type").startsWith("application/json")){We.next=8;break}return We.next=4,Oe.json();case 4:return je=We.sent,We.abrupt("return",Promise.reject(je));case 8:return We.abrupt("return",Oe.blob());case 9:case"end":return We.stop()}},Re)}));return function(Re){return Te.apply(this,arguments)}}()).then(function(Te){return Te}).catch(function(Te){return console.log(Te),!1}));case 5:return Ee.next=7,this.messageHandler.sendWithPromise("FlattenPage",{doc:this.doc,pagesPtr:this.pagesPtr,saveType:2,password:this._pwd,oldPassword:this._oldPwd});case 7:if(!(_e=Ee.sent)||!_e.code){Ee.next=12;break}return this.eventBus.dispatch("message",{type:"ERROR",message:_e.message}),console.log(_e.message),Ee.abrupt("return",!1);case 12:return Ce=_e.blobData,Ee.abrupt("return",Ce);case 14:case"end":return Ee.stop()}},te,this)})),function(){return Se.apply(this,arguments)})},{key:"flattenPdfDownload",value:(fe=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe;return _regeneratorRuntime().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.flattenPdf();case 2:if(!(oe=_e.sent)){_e.next=8;break}return FileSaver_minExports.saveAs(oe,this._docName),_e.abrupt("return",!0);case 8:return _e.abrupt("return",!1);case 9:case"end":return _e.stop()}},te,this)})),function(){return fe.apply(this,arguments)})},{key:"loadCertificates",value:(Q=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.messageHandler.sendWithPromise("LoadCertificates",oe);case 2:return _e=Ce.sent,Ce.abrupt("return",_e);case 4:case"end":return Ce.stop()}},te,this)})),function(te){return Q.apply(this,arguments)})},{key:"download",value:(X=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee,Te,Re,Oe=this,je=arguments;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(oe=je.length>0&&je[0]!==void 0&&je[0],Ce=je.length>2?je[2]:void 0,!(_e=je.length>1?je[1]:void 0)){We.next=7;break}_e.forEach(function(Ze){FileSaver_minExports.saveAs(Ze.url,Ze.fileName)}),We.next=19;break;case 7:if(!this._token||!this._pdfId){We.next=12;break}return Ee={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId})},We.abrupt("return",fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.saveUrl,Ee).then(function(){var Ze=_asyncToGenerator(_regeneratorRuntime().mark(function Xe(Ge){var Qe;return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(!Ge.headers.get("content-type").startsWith("application/json")){rt.next=8;break}return rt.next=4,Ge.json();case 4:return Qe=rt.sent,rt.abrupt("return",Promise.reject(Qe));case 8:return rt.abrupt("return",Ge.blob());case 9:case"end":return rt.stop()}},Xe)}));return function(Xe){return Ze.apply(this,arguments)}}()).then(function(Ze){return oe&&FileSaver_minExports.saveAs(Ze,Oe._docName),Ze}).catch(function(Ze){return console.log(Ze),!1}));case 12:return Te={set:2,remove:3}[this.saveAction]||1,We.next=16,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:this.doc,saveType:Ce||Te,password:this._pwd,oldPassword:this._oldPwd});case 16:return Re=We.sent,oe&&FileSaver_minExports.saveAs(Re,this._docName),We.abrupt("return",Re);case 19:case"end":return We.stop()}},te,this)})),function(){return X.apply(this,arguments)})},{key:"exportXfdf",value:(H=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee,Te,Re=arguments;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(oe=Re.length>0&&Re[0]!==void 0&&Re[0],_e="",!this.webviewerServer){Oe.next=8;break}return Oe.next=5,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.downloadAnnotation+"?pdfId="+this._pdfId,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this._token}}).then(function(){var je=_asyncToGenerator(_regeneratorRuntime().mark(function We(Ze){var Xe;return _regeneratorRuntime().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:if(!Ze.headers.get("content-type").startsWith("application/json")){Ge.next=8;break}return Ge.next=4,Ze.json();case 4:return Xe=Ge.sent,Ge.abrupt("return",Promise.reject(Xe));case 8:return Ge.abrupt("return",Ze.text());case 9:case"end":return Ge.stop()}},We)}));return function(We){return je.apply(this,arguments)}}()).then(function(je){return je}).catch(function(je){return console.log(je),!1});case 5:_e=Oe.sent,Oe.next=16;break;case 8:return Oe.next=10,this.messageHandler.sendWithPromise("XFDFExportAnnotations",{doc:this.doc});case 10:if(!(Ce=Oe.sent)||!Ce.code){Oe.next=15;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ce.message}),console.log(Ce.message),Oe.abrupt("return",!1);case 15:_e=Ce.Content;case 16:if(!oe){Oe.next=23;break}return Ee=this._docName.replace(/\.pdf$/,".xfdf"),Te=new Blob([_e],{type:"application/xfdf"}),FileSaver_minExports.saveAs(Te,Ee),Oe.abrupt("return",!0);case 23:return Oe.abrupt("return",_e);case 24:case"end":return Oe.stop()}},te,this)})),function(){return H.apply(this,arguments)})},{key:"getScrollViewElement",value:function(){return this.scrollContainer}},{key:"getViewerElement",value:function(){return this.viewerContainer}},{key:"getSelectedPage",value:function(te,oe){for(var _e=null,Ce=null,Ee=0;Ee<this.pagesCount;Ee++){var Te,Re=this.pdfViewer._pages[Ee].div,Oe=Re.offsetLeft,je=Oe+Re.clientWidth,We=Re.offsetTop+((Te=Re.offsetParent)===null||Te===void 0?void 0:Te.offsetTop),Ze=We+Re.clientHeight;if(_e===null&&te.x<=je&&te.x>=Oe&&te.y<=Ze&&te.y>=We&&(_e=Ee+1),Ce===null&&oe.x<=je&&oe.x>=Oe&&oe.y<=Ze&&oe.y>=We&&(Ce=Ee+1),_e!==null&&Ce!==null)break}if(_e>Ce){var Xe=[Ce,_e];_e=Xe[0],Ce=Xe[1]}return{first:_e,last:Ce}}},{key:"pageToWindow",value:function(te,oe){var _e,Ce=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(oe>this.page&&oe<1)return null;var Ee=this.pdfViewer._pages[oe-1].div,Te=Ee.offsetLeft,Re=Ee.offsetTop+((_e=Ee.offsetParent)===null||_e===void 0?void 0:_e.offsetTop),Oe=this.scale;return{x:(Ce?te.x*Oe:te.x)+Te,y:(Ce?te.y*Oe:te.y)+Re}}},{key:"windowToPage",value:function(te,oe){var _e,Ce=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(oe>this.page&&oe<1)return null;var Ee=this.pdfViewer._pages[oe-1].div,Te=Ee.offsetLeft,Re=Ee.offsetTop+((_e=Ee.offsetParent)===null||_e===void 0?void 0:_e.offsetTop),Oe=this.scale;return{pageNumber:oe,x:Ce?(te.x-Te)/Oe:te.x-Te,y:Ce?(te.y-Re)/Oe:te.y-Re}}},{key:"_initializeViewerComponents",value:function(te){var oe=te.container,_e=te.viewer,Ce=te.thumbnailView,Ee=te.annotationView,Te=te.toggleButton;this.scrollContainer=oe;var Re=this;this.scrollContainer.addEventListener("click",function(We){Re.eventBus.dispatch("click",We)}),this.scrollContainer.addEventListener("mousemove",function(We){Re.eventBus.dispatch("mouseMove",We)}),this.viewerContainer=_e;var Oe=new PDFRenderingQueue;Oe.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=Oe;var je=new PDFLinkService;this.pdfLinkService=je,this.pdfViewer=new PDFViewer({container:oe,viewer:_e,documentViewer:this,messageHandler:this.messageHandler,annotationStore,tool:{tool:this.activeTool,color:this.color},annotationView:Ee,renderingQueue:Oe,linkService:je,renderer:"canvas",textLayerMode:1,enablePrintAutoRotate:!0,eventBus:this.eventBus,$t:this.$t,doc:this.doc}),Oe.setViewer(this.pdfViewer),je.setViewer(this.pdfViewer),Ce&&(this.pdfThumbnailViewer=new PDFThumbnailViewer({container:Ce,renderingQueue:Oe,linkService:je}),Oe.setThumbnailViewer(this.pdfThumbnailViewer)),this.pdfCursorTools=new PDFCursorTools({container:oe,eventBus:this.eventBus,cursorToolOnLoad:0}),this.supportsFullscreen&&(this.pdfPresentationMode=new PDFPresentationMode({container:oe,pdfViewer:this.pdfViewer,eventBus:this.eventBus})),this.passwordPrompt=new PasswordPrompt({dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel"),$t:this.$t}),this.pdfSidebar=new PDFSidebar({elements:{toggleButton:Te},pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:this.eventBus}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.contentEditManager=new ContentEditManager(this),this.annotationManager=new AnnotationManager(this)}},{key:"setInitialView",value:function(te){var oe,_e=this,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ce.rotation,Ce.sidebarView;var Ee,Te,Re=Ce.scrollMode,Oe=Ce.spreadMode;this.isInitialViewSet=!0,Te=Oe,isValidScrollMode(Ee=Re)&&(_e.pdfViewer.scrollMode=Ee),isValidSpreadMode(Te)&&(_e.pdfViewer.spreadMode=Te),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=DEFAULT_SCALE_VALUE),this.pdfViewer.forceRendering(),!((oe=this.pdfSidebar)===null||oe===void 0)&&oe.isOpen&&this.pdfThumbnailViewer.forceRendering()}},{key:"requestFullScreenMode",value:function(){var te;(te=this.pdfPresentationMode)===null||te===void 0||te.request()}},{key:"_cleanup",value:function(){var te;this.pdfDocument&&(this.pdfViewer.cleanup(),(te=this.pdfThumbnailViewer)===null||te===void 0||te.cleanup(),this.pdfDocument.cleanup(this.pdfViewer.renderer==="svg"))}},{key:"cleanup",value:function(){this._cleanup()}},{key:"zoomIn",value:function(te){if(!this.pdfViewer.isInPresentationMode){var oe=this.page;this.pdfViewer.increaseScale({drawingDelay:400}),this.page=oe}}},{key:"zoomOut",value:function(te){if(!this.pdfViewer.isInPresentationMode){var oe=this.page;this.pdfViewer.decreaseScale({drawingDelay:400}),this.page=oe}}},{key:"nextPage",value:function(){return this.pdfViewer.nextPage()}},{key:"previousPage",value:function(){return this.pdfViewer.previousPage()}},{key:"pageNumberChanged",value:function(te){te!==""&&this.pdfLinkService.goToPage(te),te!==this.pdfViewer.currentPageNumber.toString()&&te!==this.pdfViewer.currentPageLabel&&this.toolbar&&this.toolbar.setPageNumber(pdfViewer.currentPageNumber,pdfViewer.currentPageLabel)}},{key:"scrollTo",value:function(te){var oe=te.left,_e=te.top;scrollIntoView(this.viewerContainer,{left:oe,top:_e})}},{key:"scrollToPercent",value:function(te){var oe=te.left,_e=te.top,Ce=(this.scrollContainer.scrollHeight-this.scrollContainer.clientHeight)*_e/100,Ee=(this.scrollContainer.scrollWidth-this.scrollContainer.clientWidth)*oe/100;this.scrollTo({top:Ce,left:Ee})}},{key:"webViewerAnnotationsCountChanged",value:function(te){this.annotationsNumChangedCallback(te.annotationsCount)}},{key:"forceRendering",value:function(){this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}},{key:"webViewerResize",value:function(){var te=this.pdfDocument,oe=this.pdfViewer;if((!this.pdfRenderingQueue.printing||!window.matchMedia("print").matches)&&te){var _e=oe.currentScaleValue;_e!=="auto"&&_e!=="page-fit"&&_e!=="page-width"||oe.resize(_e)}}},{key:"webViewerPageRendered",value:function(te){var oe,_e=te.pageNumber;if(te.error,((oe=this.pdfSidebar)===null||oe===void 0?void 0:oe.visibleView)===SidebarView.THUMBS){var Ce=this.pdfViewer.getPageView(_e-1),Ee=this.pdfThumbnailViewer.getThumbnail(_e-1);Ce&&Ee&&Ee.setImage(Ce)}}},{key:"annotationMode",get:function(){return this._annotationMode},set:function(te){this._annotationMode=te}},{key:"webViewerSwitchAnnotationEditorMode",value:function(te){this.pdfViewer.annotationEditorMode=te.mode}},{key:"switchTool",value:function(te){this.pdfCursorTools.switchTool(te)}},{key:"webViewerUpdateViewarea",value:function(te){var oe,_e=te.location;this.isInitialViewSet&&((oe=this.store)===null||oe===void 0||oe.setMultiple({page:_e.pageNumber,zoom:_e.scale,scrollLeft:_e.left,scrollTop:_e.top,rotation:_e.rotation}).catch(function(){})),this._textSearch&&this._textSearch.updateMatch()}},{key:"webViewerScrollModeChanged",value:function(te){var oe;this.isInitialViewSet&&!this.pdfViewer.isInPresentationMode&&((oe=this.store)===null||oe===void 0||oe.set("scrollMode",te.mode).catch(function(){}))}},{key:"webViewerScaleChanging",value:function(te){this.scaleChangedCallback&&this.scaleChangedCallback(te.scale)}},{key:"webViewerRotationChanging",value:function(te){this.pdfThumbnailViewer.pagesRotation=te.pagesRotation,this.forceRendering(),this.pdfViewer.currentPageNumber=te.pageNumber}},{key:"webViewerPageChanging",value:function(te){var oe,_e=te.pageNumber;return te.pageLabel,((oe=this.pdfSidebar)===null||oe===void 0?void 0:oe.visibleView)===SidebarView.THUMBS&&this.pdfThumbnailViewer.scrollThumbnailIntoView(_e),this.pageChangedCallback(this.page),_e}},{key:"webViewerSidebarViewChanged",value:function(te){var oe,_e=te.view;this.pdfRenderingQueue.isThumbnailViewEnabled=_e===SidebarView.THUMBS,this.isInitialViewSet&&((oe=this.store)===null||oe===void 0||oe.set("sidebarView",_e).catch(function(){}))}},{key:"selectAnnotation",value:function(te){var oe=te.pageIndex,_e=this.pdfViewer._pages[oe];_e&&_e.selectAnnotation(te)}},{key:"enableFillConsecutively",value:function(){this.isFillConsecutively=!0}},{key:"disableFillConsecutively",value:function(){this.isFillConsecutively=!1}},{key:"jumpToAnnotation",value:function(te){var oe=te.rect,_e=te.pageIndex,Ce=oe.left*this.scale,Ee=oe.top*this.scale-(te.type==="text"?34:10);scrollIntoView(this.pdfViewer._pages[_e].div,{left:Ce,top:Ee})}},{key:"enableAnnotationPopup",value:function(){this.isAnnotationPopup=!0}},{key:"disableAnnotationPopup",value:function(){this.isAnnotationPopup=!1}},{key:"webViewerPageMode",value:function(te){var oe,_e=te.mode;switch(_e){case"thumbs":oe=SidebarView.THUMBS;break;case"bookmarks":case"outline":oe=SidebarView.OUTLINE;break;case"attachments":oe=SidebarView.ATTACHMENTS;break;case"layers":oe=SidebarView.LAYERS;break;case"none":oe=SidebarView.NONE;break;default:return void console.error('Invalid "pagemode" hash parameter: '+_e)}this.pdfSidebar.switchView(oe,!0)}},{key:"webViewerNamedAction",value:(W=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:Ce.t0=oe.action,Ce.next=Ce.t0==="GoToPage"?3:Ce.t0==="Print"?5:Ce.t0==="SaveAs"?12:14;break;case 3:return this.appConfig.toolbar.pageNumber.select(),Ce.abrupt("break",14);case 5:return Ce.next=7,this.printPages();case 7:if((_e=Ce.sent).length){Ce.next=10;break}return Ce.abrupt("return",!1);case 10:return this.printDocument(_e),Ce.abrupt("return",!0);case 12:return this.downloadOrSave(),Ce.abrupt("break",14);case 14:case"end":return Ce.stop()}},te,this)})),function(te){return W.apply(this,arguments)})},{key:"triggerPrinting",value:function(te){var oe=te instanceof Blob?URL.createObjectURL(te):te;oe=decodeURIComponent(oe),printJS({url:oe,printable:oe,type:"pdf",showModal:!1})}},{key:"webViewerPresentationModeChanged",value:function(te){this.pdfViewer.presentationModeState=te.state}},{key:"webViewerPresentationMode",value:function(){this.requestPresentationMode()}},{key:"webViewerNextPage",value:function(){this.pdfViewer.nextPage()}},{key:"webViewerPreviousPage",value:function(){this.pdfViewer.previousPage()}},{key:"webViewerZoomIn",value:function(){this.zoomIn()}},{key:"webViewerZoomOut",value:function(){this.zoomOut()}},{key:"webViewerPageNumberChanged",value:function(te){var oe=this.pdfViewer;te.value!==""&&this.pdfLinkService.goToPage(te.value),te.value!==oe.currentPageNumber.toString()&&te.value!==oe.currentPageLabel&&this.toolbar.setPageNumber(oe.currentPageNumber,oe.currentPageLabel)}},{key:"webViewerScaleChanged",value:function(te){var oe=this.page;this.pdfViewer.currentScaleValue=te,this.page=oe}},{key:"webViewerRotateCw",value:function(){this.rotatePages(90)}},{key:"webViewerRotateCcw",value:function(){this.rotatePages(-90)}},{key:"webViewerSwitchScrollMode",value:function(te){this.pdfViewer.scrollMode=te}},{key:"webViewerSwitchSpreadMode",value:function(te){this.pdfViewer.spreadMode=te}},{key:"rotatePages",value:(U=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe,_e){var Ce,Ee=this;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(Ce=null,oe.forEach(function(){var Re=_asyncToGenerator(_regeneratorRuntime().mark(function Oe(je){return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!Ce||!Ce.code){We.next=2;break}return We.abrupt("return");case 2:if(!(je>=Ee.pagesCount||je<0)){We.next=4;break}return We.abrupt("return");case 4:return We.next=6,Ee.messageHandler.sendWithPromise("RotatePage",{pagePtr:Ee.pagesPtr[je].pagePtr,rotation:_e});case 6:Ce=We.sent;case 7:case"end":return We.stop()}},Oe)}));return function(Oe){return Re.apply(this,arguments)}}()),!Ce||!Ce.code){Te.next=6;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ce.message}),console.log(Ce.message),Te.abrupt("return",!1);case 6:return Te.next=8,this.updatePages();case 8:case"end":return Te.stop()}},te,this)})),function(te,oe){return U.apply(this,arguments)})},{key:"webViewerSpreadModeChanged",value:function(te){var oe;this.isInitialViewSet&&!this.pdfViewer.isInPresentationMode&&((oe=this.store)===null||oe===void 0||oe.set("spreadMode",te.mode).catch(function(){}))}},{key:"webViewerFindFromUrlHash",value:function(te){this.eventBus.dispatch("find",{source:te.source,type:"",query:te.query,phraseSearch:te.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}},{key:"webViewerUpdateFindMatchesCount",value:function(te){var oe=te.matchesCount;this.supportsIntegratedFind?this.externalServices.updateFindMatchesCount(oe):this.findBar.updateResultsCount(oe)}},{key:"webViewerUpdateFindControlState",value:function(te){var oe=te.state,_e=te.previous,Ce=te.matchesCount,Ee=te.rawQuery;this.supportsIntegratedFind?this.externalServices.updateFindControlState({result:oe,findPrevious:_e,matchesCount:Ce,rawQuery:Ee}):this.findBar.updateUIState(oe,_e,Ce)}},{key:"webViewerFileInputChange",value:function(te){var oe;if((oe=this.pdfViewer)===null||oe===void 0||!oe.isInPresentationMode){var _e=te.fileInput.files[0],Ce=URL.createObjectURL(_e);_e.name&&(Ce={url:Ce,originalUrl:_e.name}),this.open(Ce)}}},{key:"webViewerOpenFile",value:function(te){this.appConfig.openFileInput.click()}},{key:"setToolMode",value:(O=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(!isMobileDevice$1||oe!=="separation"){Oe.next=3;break}return console.warn("This feature is not available for Mobile, please access on PC for the best experience"),Oe.abrupt("return");case 3:if(_e=this.toolMode,this.toolMode=oe,oe==="editor"&&this.fontFileInited,["redaction","remove"].includes(this.activeTool)&&this.toolMode!=="security"&&(this.redactionList.length&&this.applyRedactions(),this.setTool({color:"",tool:""})),this.eventBus.dispatch("toolModeChanged",oe),_e!=="editor"||this.toolMode==="editor"){Oe.next=11;break}return Oe.next=11,this.updateTextPtr();case 11:_e!=="editor"&&this.toolMode==="editor"&&this.contentEditManager&&this.contentEditManager.getSelectedEditBox()&&this.contentEditManager.setSelectedEditBox(null),_e==="separation"&&this.toolMode!=="separation"&&(this.colorList.length=0,annotationStore.ignoreColors.length=0,this.pdfViewer.refreshCanvas()),Oe.t0=_regeneratorRuntime().keys(this.annotations);case 14:if((Oe.t1=Oe.t0()).done){Oe.next=28;break}Ce=Oe.t1.value,Ee=0;case 17:if(!(Ee<this.annotations[Ce].length)){Oe.next=26;break}if(Te=this.annotations[Ce][Ee]){Oe.next=21;break}return Oe.abrupt("continue",23);case 21:(Re=document.getElementById(Te.name))&&(this.toolMode!=="form"?Te.isHidden==1?(Re.style.display="none",Re.style.pointerEvents="none"):Te.isHidden==0&&(Re.style.display="",Re.style.pointerEvents=""):(Re.style.display="",Re.style.pointerEvents=""));case 23:Ee++,Oe.next=17;break;case 26:Oe.next=14;break;case 28:case"end":return Oe.stop()}},te,this)})),function(te){return O.apply(this,arguments)})},{key:"updateTextPtr",value:(J=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee=this;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.messageHandler.sendWithPromise("ClearPage",{doc:this.doc});case 2:oe=0;case 3:if(!(oe<this.pagesCount)){Te.next=17;break}return Te.next=6,this.messageHandler.sendWithPromise("ClearText",{textPtr:this.pagesPtr[oe].textPtr});case 6:return Te.next=8,this.messageHandler.sendWithPromise("GetPageSize",{doc:this.doc,pageIndex:oe});case 8:return _e=Te.sent,Te.next=11,this.messageHandler.sendWithPromise("InitText",{pagePtr:_e.pagePtr});case 11:Ce=Te.sent,this.pagesPtr[oe].textPtr=Ce,this.pagesPtr[oe].pagePtr=_e.pagePtr;case 14:oe++,Te.next=3;break;case 17:return this.pdfViewer.pagesPtr=this.pagesPtr,this.pdfViewer._pages.forEach(function(Re){Re.pagePtr=Ee.pagesPtr[Re.pageIndex].pagePtr}),this.pdfViewer.refresh(),Te.abrupt("return",new Promise(function(Re){var Oe=function(){Ee.eventBus._off("pagerendered",Oe),Re()};Ee.eventBus._on("pagerendered",Oe)}));case 21:case"end":return Te.stop()}},te,this)})),function(){return J.apply(this,arguments)})},{key:"setPropertyPanel",value:function(te){this.eventBus.dispatch("propertyPanelChanged",te)}},{key:"setContentEditorProperty",value:function(te,oe){te==="text"?this.eventBus.dispatch("textPropertyChanged",oe):te==="image"&&this.eventBus.dispatch("imagePropertyChanged",oe)}},{key:"setInitProperty",value:function(){this.activeTool==="textfield"?this.eventBus.dispatch("initTextfieldName"):this.activeTool==="checkbox"?this.eventBus.dispatch("initCheckboxName"):this.activeTool==="radiobutton"?this.eventBus.dispatch("initRadioButtonName"):this.activeTool==="pushbutton"&&this.eventBus.dispatch("initPushButtonName")}},{key:"handleField",value:function(te){var oe=te.id,_e=te.key,Ce=te.value;if(oe&&annotationStore.annotationsAll){var Ee=Object.values(annotationStore.annotationsAll).reduce(function(Re,Oe){return Re.concat(Oe)},[]).find(function(Re){return Re.name===oe});if(_e&&(Ce||Ce===0)){var Te={name:oe};Te[_e]=Ce,this.eventBus.dispatch("setProperty",Te)}return Ee}}},{key:"handleSign",value:(le=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe;return _regeneratorRuntime().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(_e=oe.type,Ce=_e===void 0?0:_e,Ee=oe.flag,Te=oe.param,Ee!=="create"||this.Signatures||(this.Signatures=new Signatures({pdfViewer:this.pdfViewer,eventBus:this.eventBus,type:Ce})),Ee!=="save"||!Ce){je.next=6;break}return Re=oe.pkcs12Buffer,Oe=oe.password,je.next=6,this.updateSignatureAp(_objectSpread2$1({type:Ce,annotPtr:Te.annotation.annotPtr,pkcs12Buffer:Re,password:Oe},Te));case 6:if(this.Signatures){je.next=8;break}return je.abrupt("return");case 8:if(Ee!=="clear"&&Ee!=="create"||this.Signatures.clear(),Ee==="save"&&this.Signatures.toImage(Te),Ee==="reset"&&(this.Signatures.reset(),this.Signatures=null),Ee==="update"&&this.Signatures.update(Te),Ee!=="image"){je.next=14;break}return je.abrupt("return",this.Signatures.getImageBase64(Te));case 14:case"end":return je.stop()}},te,this)})),function(te){return le.apply(this,arguments)})},{key:"handleStamp",value:(ne=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He,Ke,ot;return _regeneratorRuntime().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(oe){at.next=2;break}return at.abrupt("return");case 2:if(_e=oe.stampContainer,Ce=oe.page,Ee=this.pdfViewer.getPageView(Ce-1),Te=null,Re=null,Ee&&_e&&(Oe=Ee.viewport.viewBox[2],je=Ee.viewport.viewBox[3],We=_e.width,Ze=_e.height,Te={left:(Oe-We)/2,top:(je-Ze)/2,right:(Oe+We)/2,bottom:(je+Ze)/2}),oe.stampType==="standard"&&(Re={operate:"add-annot",type:"stamp",pageIndex:Ce-1,rect:Te,stampColor:"white",date:new Date,stampType:"standard",contents:_e.alt}),oe.stampType==="dynamic"&&(Re={operate:"add-annot",type:"stamp",date:new Date,pageIndex:Ce-1,contents:oe.text,time:oe.time,stampColor:oe.color,stampType:"text"}),Re.stampShape=0,Re.rect){at.next=28;break}return at.next=14,this.messageHandler.sendWithPromise("GetStampRect",{doc:this.doc,pagePtr:this.pagesPtr[Ce-1].pagePtr,annotation:Re});case 14:if(!(Xe=at.sent)||!Xe.code){at.next=19;break}return this.eventBus.dispatch("message",{type:"ERROR",message:result.message}),console.log(result.message),at.abrupt("return",!1);case 19:Ge=Ee.viewport.viewBox[2],Qe=Ee.viewport.viewBox[3],rt=Xe.right-Xe.left,dt=Xe.bottom-Xe.top,qe=(Ge-rt)/2,He=(Qe-dt)/2,Ke=(Ge+rt)/2,ot=(Qe+dt)/2,Re.rect={left:qe,right:Ke,top:He,bottom:ot};case 28:this.eventBus.dispatch("annotationChanged",{type:"add",annotation:Re});case 29:case"end":return at.stop()}},te,this)})),function(te){return ne.apply(this,arguments)})},{key:"compare",value:(j=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.messageHandler.sendWithPromise("CompareDocument",{data:oe});case 2:if(!(_e=Ce.sent)||!_e.code){Ce.next=7;break}return this.eventBus.dispatch("message",{type:"ERROR",message:_e.message}),console.log(_e.message),Ce.abrupt("return",!1);case 7:if(oe.type!==1){Ce.next=11;break}return Ce.abrupt("return",[{filename:oe.leftFile.name.replace(/(\.pdf)/,"_".concat(this.$t("compare.byComPDFKit"),".pdf")),url:URL.createObjectURL(_e.oldDocument)},{filename:oe.rightFile.name.replace(/(\.pdf)/,"_".concat(this.$t("compare.byComPDFKit"),".pdf")),url:URL.createObjectURL(_e.newDocument)},{filename:this.$t("compare.byComPDFKit")+".pdf",url:URL.createObjectURL(_e.blobData)}]);case 11:if(oe.type!==2){Ce.next=13;break}return Ce.abrupt("return",{filename:this._docName,url:URL.createObjectURL(_e.blobData)});case 13:case"end":return Ce.stop()}},te,this)})),function(te){return j.apply(this,arguments)})},{key:"checkPassword",value:(Z=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe=this,je=arguments;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return _e=je.length>1&&je[1]!==void 0&&je[1],Ce={cMapUrl:CMAP_URL,cMapPacked:!0,enableXfa:!0},typeof oe=="string"?Ce.url=oe:oe&&"byteLength"in oe?Ce.data=oe:oe.url&&oe.originalUrl&&(Ce.url=oe.url),Ee=pdfExports.getDocument(Ce),this.pdfLoadingTask=Ee,Te="",Re=function(Ze){return Te=Ze},Ee.onPassword=function(Ze,Xe){Oe.passwordPrompt.setUpdateCallback(Ze,Xe,Re),Oe.passwordPrompt.open()},We.next=10,Ee.promise.then(function(){return Te&&!_e&&(Oe._pwd=Te),Te}).catch(function(Ze){return!1});case 10:return We.abrupt("return",We.sent);case 11:case"end":return We.stop()}},te,this)})),function(te){return Z.apply(this,arguments)})},{key:"handleCreateStatus",value:function(te){var oe=te.bool,_e=te.fileData;annotationStore.creating=oe,annotationStore.fileData=_e}},{key:"initFontFile",value:(Y=_asyncToGenerator(_regeneratorRuntime().mark(function te(){return _regeneratorRuntime().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:try{this.pdfViewer.setFontFile(this._fileList),this.fontFileInited=!0}catch(_e){console.log(_e)}case 1:case"end":return oe.stop()}},te,this)})),function(){return Y.apply(this,arguments)})},{key:"getPages",value:(q=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te;return _regeneratorRuntime().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,this.messageHandler.sendWithPromise("GetPageCount",{doc:oe});case 2:_e=Re.sent,Ce=[],Ee=0;case 5:if(!(Ee<_e)){Re.next=13;break}return Re.next=8,this.messageHandler.sendWithPromise("GetPageSize",{doc:oe,pageIndex:Ee});case 8:Te=Re.sent,Ce.push({pagePtr:Te.pagePtr,width:Te.width,height:Te.height});case 10:Ee++,Re.next=5;break;case 13:return Re.abrupt("return",Ce);case 14:case"end":return Re.stop()}},te,this)})),function(te){return q.apply(this,arguments)})},{key:"getMinRadioSize",value:function(te,oe,_e){var Ce=Math.min(_e.width/te,_e.height/oe);return{width:te*Ce,height:oe*Ce}}},{key:"getDocEditorPages",value:(N=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He,Ke,ot,at,et,Je,nt,it,ht=arguments;return _regeneratorRuntime().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(_e=ht.length>1&&ht[1]!==void 0?ht[1]:0,Ce=ht.length>2&&ht[2]!==void 0?ht[2]:null,this.docEditorCopy){lt.next=10;break}return lt.next=5,this.messageHandler.sendWithPromise("createEditorDoc",{doc:this.doc,password:this._oldPwd||this._pwd});case 5:return Ee=lt.sent,lt.next=8,this.getPages(Ee);case 8:Te=lt.sent,this.docEditorCopy={doc:Ee,pages:Te};case 10:Re=this.docEditorCopy.pages,Oe=window.devicePixelRatio||1,je=[],We=[],Ze=0;case 15:if(!(Ze<(Ce!=null?Ce:Re.length))){lt.next=49;break}if(this.toolMode==="document"){lt.next=18;break}return lt.abrupt("break",49);case 18:return Xe=Re[Ze+_e],Ge=je.pop()||document.createElement("canvas"),Qe=We.pop()||Ge.getContext("2d",{alpha:!1}),rt=this.getMinRadioSize(Xe.width,Xe.height,oe),dt=rt.width,qe=rt.height,He=Math.round(dt*Oe),Ke=Math.round(qe*Oe),lt.next=26,this.messageHandler.sendWithPromise("RenderPageBitmap",{pagePtr:Xe.pagePtr,x:0,y:0,width:He,height:Ke});case 26:if(!(ot=lt.sent)||!ot.code){lt.next=31;break}return this.eventBus.dispatch("message",{type:"ERROR",message:ot.message}),console.log(ot.message),lt.abrupt("return");case 31:at=ot.imageArray,Ge.width=He,Ge.height=Ke,et=Qe.createImageData(Ge.width,Ge.height),Je=new Uint8ClampedArray(at.buffer),et.data.set(Je),Qe.putImageData(et,0,0),nt=Ge.toDataURL("image/png",1),it={type:"page",img:nt,size:{width:Xe.width,height:Xe.height},rotation:0},this.eventBus.dispatch("getDocEditorPages",{index:Ze+_e,pageData:it}),Ge.width=0,Ge.height=0,Qe.clearRect(0,0,He,Ke),je.push(Ge),We.push(Qe);case 46:Ze++,lt.next=15;break;case 49:je.forEach(function(ft){return URL.revokeObjectURL(ft.toDataURL())}),je.length=0,We.length=0;case 52:case"end":return lt.stop()}},te,this)})),function(te){return N.apply(this,arguments)})},{key:"updatePages",value:(I=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e;return _regeneratorRuntime().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:this.doc,saveType:2,password:this._oldPwd,oldPassword:this._oldPwd});case 2:return oe=Ce.sent,_e=this.saveAction,Ce.next=6,this.loadDocument(URL.createObjectURL(oe),{filename:this._docName,notUpdatePwd:!0,saveAction:_e});case 6:this.eventBus.dispatch("onPagesUpdated");case 7:case"end":return Ce.stop()}},te,this)})),function(){return I.apply(this,arguments)})},{key:"insertBlankPage",value:(F=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce,Ee,Te,Re=arguments;return _regeneratorRuntime().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(_e=Re.length>1&&Re[1]!==void 0?Re[1]:595,Ce=Re.length>2&&Re[2]!==void 0?Re[2]:842,!((oe=Re.length>0&&Re[0]!==void 0?Re[0]:0)>this.pagesCount||oe<0)){Oe.next=5;break}return Oe.abrupt("return");case 5:return Oe.next=7,this.messageHandler.sendWithPromise("InsertPage",{doc:this.doc,index:oe,width:_e,height:Ce});case 7:if(!(Ee=Oe.sent)||!Ee.code){Oe.next=12;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ee.message}),console.log(Ee.message),Oe.abrupt("return",!1);case 12:if(Te=Ee.status){Oe.next=16;break}return console.warn("insert page",Te),Oe.abrupt("return",!1);case 16:return Oe.next=18,this.updatePages();case 18:case"end":return Oe.stop()}},te,this)})),function(){return F.apply(this,arguments)})},{key:"insertPages",value:(D=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je=arguments;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(_e=je.length>1&&je[1]!==void 0?je[1]:0,Ce=je.length>2&&je[2]!==void 0?je[2]:[0],Ee=je.length>3&&je[3]!==void 0?je[3]:"",!(!oe||_e>=this.pagesCount||_e<0)){We.next=5;break}return We.abrupt("return");case 5:if(Te=null,!Array.isArray(Ce)){We.next=10;break}Te=Ce.join(","),We.next=15;break;case 10:if(Ce!=="all"){We.next=14;break}Te="all",We.next=15;break;case 14:return We.abrupt("return");case 15:return We.next=17,this.messageHandler.sendWithPromise("ImportPagesAtIndex",{doc:this.doc,file:oe,range:Te,index:_e,password:Ee});case 17:if(!(Re=We.sent)||!Re.code){We.next=22;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Re.message}),console.log(Re.message),We.abrupt("return",!1);case 22:if(Oe=Re.status){We.next=26;break}return console.warn("insert pdf",Oe),We.abrupt("return",!1);case 26:return We.next=28,this.updatePages();case 28:case"end":return We.stop()}},te,this)})),function(te){return D.apply(this,arguments)})},{key:"removePages",value:(T=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce=this;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(oe.sort(function(Te,Re){return Re-Te}),_e=null,oe.forEach(function(){var Te=_asyncToGenerator(_regeneratorRuntime().mark(function Re(Oe){var je;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!_e||!_e.code){We.next=2;break}return We.abrupt("return");case 2:if(!(Oe>=Ce.pagesCount||Oe<0)){We.next=4;break}return We.abrupt("return");case 4:return We.next=6,Ce.messageHandler.sendWithPromise("RemovePage",{doc:Ce.doc,index:Oe});case 6:_e=We.sent,(je=_e.status)||console.warn("delete",je);case 9:case"end":return We.stop()}},Re)}));return function(Re){return Te.apply(this,arguments)}}()),!_e||!_e.code){Ee.next=7;break}return this.eventBus.dispatch("message",{type:"ERROR",message:_e.message}),console.log(_e.message),Ee.abrupt("return",!1);case 7:return Ee.next=9,this.updatePages();case 9:case"end":return Ee.stop()}},te,this)})),function(te){return T.apply(this,arguments)})},{key:"copyPages",value:(P=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce=this;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(oe.sort(function(Te,Re){return Re-Te}),_e=null,oe.forEach(function(){var Te=_asyncToGenerator(_regeneratorRuntime().mark(function Re(Oe){var je;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!_e||!_e.code){We.next=2;break}return We.abrupt("return");case 2:if(!(Oe>=Ce.pagesCount||Oe<0)){We.next=4;break}return We.abrupt("return");case 4:return We.next=6,Ce.messageHandler.sendWithPromise("CopyPage",{doc:Ce.doc,index:Oe});case 6:_e=We.sent,(je=_e.status)||console.warn("copy",je);case 9:case"end":return We.stop()}},Re)}));return function(Re){return Te.apply(this,arguments)}}()),!_e||!_e.code){Ee.next=7;break}return this.eventBus.dispatch("message",{type:"ERROR",message:_e.message}),console.log(_e.message),Ee.abrupt("return",!1);case 7:return Ee.next=9,this.updatePages();case 9:case"end":return Ee.stop()}},te,this)})),function(te){return P.apply(this,arguments)})},{key:"extractPages",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return _e=oe.join(","),Te.next=3,this.messageHandler.sendWithPromise("ExtractPage",{doc:this.doc,range:_e});case 3:if(!(Ce=Te.sent)||!Ce.code){Te.next=8;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ce.message}),console.log(Ce.message),Te.abrupt("return",!1);case 8:if(Ee=Ce.blobDataList){Te.next=12;break}return console.warn("extract",0),Te.abrupt("return",!1);case 12:return Te.abrupt("return",Ee[0]);case 13:case"end":return Te.stop()}},te,this)})),function(te){return E.apply(this,arguments)})},{key:"movePages",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe,_e){var Ce,Ee,Te,Re,Oe,je;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:oe.sort(function(Ze,Xe){return Ze-Xe}),_e=Math.min(this.pagesCount,_e),_e=Math.max(0,_e),Ce=0;case 4:if(!(Ce<oe.length)){We.next=23;break}if(Ee=void 0,Te=void 0,!(oe[Ce]>=this.pagesCount||oe[Ce]<0)){We.next=8;break}return We.abrupt("continue",20);case 8:if(oe[Ce]===_e)Ee=oe[Ce],Te=_e;else if(oe[Ce]>_e)if(Ee=oe[Ce],oe.includes(_e))for(Te=_e,Re=0;Re<oe.length;Re++)oe[Re]===Te&&Ee!==Te&&Te++;else Te=_e;else Ee=oe[Ce]-Ce,Te=_e-1;if(!oe.includes(Ee)||!oe.includes(Te)||Ee!==Te){We.next=11;break}return We.abrupt("continue",20);case 11:return We.next=13,this.messageHandler.sendWithPromise("MovePage",{doc:this.doc,index:Ee,targetIndex:Te});case 13:if(!(Oe=We.sent)||!Oe.code){We.next=18;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Oe.message}),console.log(Oe.message),We.abrupt("return",!1);case 18:(je=Oe.status)||console.warn("move",je);case 20:Ce++,We.next=4;break;case 23:return We.next=25,this.updatePages();case 25:case"end":return We.stop()}},te,this)})),function(te,oe){return M.apply(this,arguments)})},{key:"saveDocumentEdit",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He,Ke,ot,at,et=this;return _regeneratorRuntime().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(_e=this.docEditorCopy.doc,Ce=function(){var nt=_asyncToGenerator(_regeneratorRuntime().mark(function it(){return _regeneratorRuntime().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,et.messageHandler.sendWithPromise("ClearDocument",_e);case 2:et.docEditorCopy=null;case 3:case"end":return ht.stop()}},it)}));return function(){return nt.apply(this,arguments)}}(),Ee=null,_typeof$1(oe)==="object"){Je.next=20;break}if(oe!=="cancel"){Je.next=8;break}return Je.next=7,Ce();case 7:return Je.abrupt("return");case 8:return this.saveAction==="remove"&&(this._pwd=""),Je.next=11,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:_e,saveType:this.saveAction==="remove"?3:2,password:this._pwd,oldPassword:this._oldPwd});case 11:if(Te=Je.sent,Re=this._docName,oe!=="saveAs"){Je.next=15;break}return Je.abrupt("return",{blobData:Te,filename:Re});case 15:return Oe=URL.createObjectURL(Te),this.saveAction==="set"&&this._oldPwd!==this._pwd&&(this._oldPwd=this._pwd),Je.next=19,Ce();case 19:return Je.abrupt("return",Oe);case 20:if(oe.type!=="insert"){Je.next=48;break}if(!oe.file){Je.next=39;break}return Je.next=24,this.messageHandler.sendWithPromise("ImportPagesAtIndex",{doc:_e,file:oe.file,range:oe.range,index:oe.pageIndex,password:oe.password});case 24:if(!(je=Je.sent)||!je.code){Je.next=29;break}return this.eventBus.dispatch("message",{type:"ERROR",message:je.message}),console.log(je.message),Je.abrupt("return",!1);case 29:if(We=je.status){Je.next=33;break}return console.warn("insert pdf",We),Je.abrupt("return",!1);case 33:return Je.next=35,this.getPages(_e);case 35:return this.docEditorCopy.pages=Je.sent,Je.abrupt("return",this.docEditorCopy.pages.length);case 39:return Je.next=41,this.messageHandler.sendWithPromise("InsertPage",{doc:_e,index:oe.pageIndex,width:oe.size.width,height:oe.size.height});case 41:if(!(Ze=Je.sent)||!Ze.code){Je.next=46;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ze.message}),console.log(Ze.message),Je.abrupt("return",!1);case 46:(Xe=Ze.status)||console.warn("insert page",Xe);case 48:if(oe.type==="delete"&&oe.selectedPageIndexArray.forEach(function(){var nt=_asyncToGenerator(_regeneratorRuntime().mark(function it(ht){var lt;return _regeneratorRuntime().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(!Ee||!Ee.code){ft.next=2;break}return ft.abrupt("return");case 2:return ft.next=4,et.messageHandler.sendWithPromise("RemovePage",{doc:_e,index:ht});case 4:if(!(Ee=ft.sent)||!Ee.code){ft.next=9;break}return et.eventBus.dispatch("message",{type:"ERROR",message:Ee.message}),console.log(Ee.message),ft.abrupt("return");case 9:(lt=Ee.status)||console.warn("delete",lt);case 11:case"end":return ft.stop()}},it)}));return function(it){return nt.apply(this,arguments)}}()),oe.type==="rotate"&&oe.selectedPageIndexArray.forEach(function(){var nt=_asyncToGenerator(_regeneratorRuntime().mark(function it(ht){return _regeneratorRuntime().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(!Ee||!Ee.code){lt.next=2;break}return lt.abrupt("return");case 2:return lt.next=4,et.messageHandler.sendWithPromise("RotatePage",{pagePtr:et.docEditorCopy.pages[ht].pagePtr,rotation:oe.rotation});case 4:if(!(Ee=lt.sent)||!Ee.code){lt.next=9;break}return et.eventBus.dispatch("message",{type:"ERROR",message:Ee.message}),console.log(Ee.message),lt.abrupt("return");case 9:case"end":return lt.stop()}},it)}));return function(it){return nt.apply(this,arguments)}}()),oe.type==="copy"&&oe.selectedPageIndexArray.forEach(function(){var nt=_asyncToGenerator(_regeneratorRuntime().mark(function it(ht){var lt;return _regeneratorRuntime().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(!Ee||!Ee.code){ft.next=2;break}return ft.abrupt("return");case 2:return ft.next=4,et.messageHandler.sendWithPromise("CopyPage",{doc:_e,index:ht});case 4:if(!(Ee=ft.sent)||!Ee.code){ft.next=9;break}return et.eventBus.dispatch("message",{type:"ERROR",message:Ee.message}),console.log(Ee.message),ft.abrupt("return",!1);case 9:(lt=Ee.status)||console.warn("copy",lt);case 11:case"end":return ft.stop()}},it)}));return function(it){return nt.apply(this,arguments)}}()),oe.type!=="extract"){Je.next=63;break}return Je.next=54,this.messageHandler.sendWithPromise("ExtractPage",{doc:_e,range:oe.range,separateFile:oe.separateFile});case 54:if(!(Ge=Je.sent)||!Ge.code){Je.next=59;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ge.message}),console.log(Ge.message),Je.abrupt("return",!1);case 59:if((Qe=Ge.blobDataList)||console.warn("extract",!1),oe.separateFile){for(rt=new JSZip,dt=[],qe=0;qe<Qe.length;qe++)He=Qe[qe],dt.push({blobData:He.blobData,filename:He.name+".pdf"});dt.forEach(function(nt){rt.file(nt.filename,nt.blobData,{binary:!0})}),rt.generateAsync({type:"blob"}).then(function(nt){FileSaver_minExports.saveAs(nt,"extracted documents.zip")})}else Ke=this._docName,FileSaver_minExports.saveAs(Qe[0],Ke);return Je.abrupt("return");case 63:if(oe.type!=="move"){Je.next=73;break}return Je.next=66,this.messageHandler.sendWithPromise("MovePage",{doc:_e,index:oe.pageIndex,targetIndex:oe.targetPageIndex});case 66:if(!(ot=Je.sent)||!ot.code){Je.next=71;break}return this.eventBus.dispatch("message",{type:"ERROR",message:ot.message}),console.log(ot.message),Je.abrupt("return",!1);case 71:(at=ot.status)||console.warn("move",at);case 73:if(!Ee||!Ee.code){Je.next=77;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ee.message}),console.log(Ee.message),Je.abrupt("return",!1);case 77:return Je.next=79,this.getPages(_e);case 79:this.docEditorCopy.pages=Je.sent;case 80:case"end":return Je.stop()}},te,this)})),function(te){return S.apply(this,arguments)})},{key:"addEditorImage",value:function(te){if(te){var oe=te.imageBase64,_e=te.width,Ce=te.height,Ee=te.pageNum,Te=this.pdfViewer.getPageView(Ee-1);if(Te){var Re=this.getAreaToPageRect(_e,Ce,Ee);Te.contentContainer.addImageEditor({rect:Re,imageBase64:oe})}}}},{key:"addAnnotationImage",value:function(te){if(te){var oe=te.imageBase64,_e=te.width,Ce=te.height,Ee=te.pageNum,Te={operate:"add-annot",type:"stamp",stampType:"image",pageIndex:Ee-1,imageBase64:oe,rect:this.getAreaToPageRect(_e,Ce,Ee),targetPage:Ee,date:new Date,name:v4()};this.addAnnotations(Te)}}},{key:"getAreaToPageRect",value:function(te,oe,_e){var Ce=this.pdfViewer.getPageView(_e-1);if(Ce){var Ee,Te,Re=.9*Ce.viewport.viewBox[2],Oe=.9*Ce.viewport.viewBox[3],je=te/oe;je>Re/Oe?(Ee=Re,Te=Re/je):(Ee=Oe*je,Te=Oe);var We=Math.min(Re,Ee),Ze=Math.min(Oe,Te);return{left:(Re-We)/2+.1*Ce.viewport.viewBox[2],top:(Oe-Ze)/2+.1*Ce.viewport.viewBox[3],right:(Re+We)/2,bottom:(Oe+Ze)/2}}}},{key:"getSignature",value:(k=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze;return _regeneratorRuntime().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return _e=window.devicePixelRatio||1,Ce=oe.rect,Ee=parseInt(Ce.width*_e),Te=parseInt(Ce.height*_e),Ce.width=Ee,Ce.height=Te,Xe.next=8,this.messageHandler.sendWithPromise("CreateSignatureAP",{rect:Ce,content:oe.content,text:oe.text?oe.text:"",isContentAlginLeft:!!oe.isContentAlginLeft&&oe.isContentAlginLeft,isDrawOnlyContent:!!oe.isDrawOnlyContent&&oe.isDrawOnlyContent,isDrowLogo:!!oe.isDrowLogo&&oe.isDrowLogo,logoBase64:oe.logoBase64?oe.logoBase64:"",imageBase64:oe.imageBase64?oe.imageBase64:""});case 8:return Re=Xe.sent,(Oe=document.createElement("canvas")).style.width=Ee+"px",Oe.style.height=Te+"px",Oe.width=Ee,Oe.height=Te,(je=Oe.getContext("2d")).clearRect(0,0,Oe.width,Oe.height),(We=je.createImageData(Ee,Te)).data.set(Re),je.putImageData(We,0,0),Ze=Oe.toDataURL("image/png",1),Xe.abrupt("return",Ze);case 21:case"end":return Xe.stop()}},te,this)})),function(te){return k.apply(this,arguments)})},{key:"deleteSignature",value:(x=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){return _regeneratorRuntime().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return this.messageHandler.sendWithPromise("RemoveSignature",{doc:this.doc,signaturePtr:oe.signaturePtr}),this.eventBus.dispatch("updateSignatureFieldAp",oe.signaturePtr),annotationStore.signatures.splice(oe.index,1),_e.next=5,this.getSignatures();case 5:case"end":return _e.stop()}},te,this)})),function(te){return x.apply(this,arguments)})},{key:"getSignatures",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.messageHandler.sendWithPromise("GetSignatures",{doc:this.doc});case 2:return oe=Ee.sent,_e=oe.signatures,Ce=oe.signaturePtrList,annotationStore.signatures=_e,this.eventBus.dispatch("getSignatures",annotationStore.signatures),Ee.abrupt("return",Ce);case 8:case"end":return Ee.stop()}},te,this)})),function(){return w.apply(this,arguments)})},{key:"addToTrustedCertificateLists",value:(_=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return _e=annotationStore.signatures[oe].signerList[0].signerPtr,Ee.next=3,this.messageHandler.sendWithPromise("AddToTrustedCertificates",{signerPtr:_e});case 3:return Ce=Ee.sent,annotationStore.signatures[oe].signerList[0].isCertTrusted=!!Ce,this.eventBus.dispatch("getSignatures",annotationStore.signatures),Ee.abrupt("return",Ce);case 7:case"end":return Ee.stop()}},te,this)})),function(te){return _.apply(this,arguments)})},{key:"updateSignatureAp",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He,Ke,ot,at,et,Je,nt,it,ht,lt;return _regeneratorRuntime().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(_e=oe.type,Ce=oe.pagePtr,Ee=oe.rect,Te=oe.annotPtr,Re=oe.imageArray,Oe=oe.imageBase64,je=oe.annotation,this.autoJumpNextSign&&Object.values(this.annotations).findIndex(function(mt){return mt.name===je.name}),!_e){ft.next=17;break}return We=oe.content,Ze=oe.isDrawOnlyContent,Xe=Ze!==void 0&&Ze,Ge=oe.isDrowLogo,Qe=Ge!==void 0&&Ge,rt=oe.isContentAlginLeft,dt=oe.text,qe=oe.logoBase64,He=oe.pkcs12Buffer,Ke=oe.password,ft.next=6,this.messageHandler.sendWithPromise("UpdateDigitalSignAp",{doc:this.doc,annotPtr:Te,content:We,isDrawOnlyContent:Xe,isDrowLogo:Qe,isContentAlginLeft:rt,text:dt,logoBase64:qe,imageBase64:Oe,pkcs12Buffer:He,password:Ke});case 6:return ot=ft.sent,at=URL.createObjectURL(ot),et=this._docName,Je=this.page,ft.next=12,this.loadDocument(at,{filename:et,notUpdatePwd:!0});case 12:this.page=Je,this.eventBus.dispatch("onPagesUpdated",{pageNumber:Je}),URL.revokeObjectURL(ot),ft.next=20;break;case 17:return ft.next=19,this.messageHandler.sendWithPromise("UpdateSignatureAP",{doc:this.doc,annotPtr:Te,pagePtr:Ce,rect:Ee,imageArray:Re,imageBase64:Oe});case 19:this.eventBus.dispatch("updateSignatureFieldAp",Te);case 20:nt=Object.values(this.annotations).reduce(function(mt,Ct){return mt.concat(Ct)},[]).filter(function(mt){return mt.type==="signatureFields"}),it=nt.filter(function(mt){return mt.type==="signatureFields"&&!mt.isSigned&&!mt.isSignedDigitally}),this.eventBus.dispatch("signedComplete",{unSignedNumber:it.length}),this.autoJumpNextSign&&(ht=it.findIndex(function(mt){return mt.name===je.name}),(lt=it[ht+1])&&this.jumpToAnnotation(lt));case 24:case"end":return ft.stop()}},te,this)})),function(te){return v.apply(this,arguments)})},{key:"verifySignature",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function te(){return _regeneratorRuntime().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,this.getSignatures();case 2:case"end":return oe.stop()}},te,this)})),function(){return y.apply(this,arguments)})},{key:"handleReplyAnnotation",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He,Ke,ot,at,et,Je,nt,it,ht,lt,ft,mt,Ct;return _regeneratorRuntime().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(_e=oe.type,Ce=oe.annotation,Ee=oe.reply,Te=oe.reviewAnnotState,Re=oe.markedAnnotState,Oe=Ce.pagePtr,je=Ce.annotPtr,We=this.annotations[Ce.pageIndex].find(function(wt){return(wt==null?void 0:wt.name)===Ce.name})){_t.next=5;break}return _t.abrupt("return");case 5:if(Ze=[],_e!=="add"){_t.next=46;break}if(!Ee){_t.next=30;break}if(Ee.name=v4(),this.webviewerServer){_t.next=23;break}return _t.next=12,this.messageHandler.sendWithPromise("CreateReplyAnnotation",{pagePtr:Oe,annotPtr:je,reply:Ee});case 12:return _t.next=14,this.messageHandler.sendWithPromise("GetReplyAnnotation",{pagePtr:Oe,annotPtr:je});case 14:Xe=_t.sent,Ge=Xe.replies,Qe=Xe.markedAnnotState,rt=Xe.reviewAnnotState,Ge.length&&(Ge.forEach(function(wt){return wt.name=v4()}),We.replies=Ge),rt&&(We.reviewAnnotState=rt),Qe&&(We.markedAnnotState=Qe),_t.next=30;break;case 23:dt=this.annotations[Ce.pageIndex],qe=findIndex(We.name,dt),We.index=qe,Ze.push({operate:"add-annot",type:"reply",pageIndex:We.pageIndex,title:Ee.author,content:Ee.contents,date:Ee.date,index:We.index}),We.replies||(We.replies=[]),We.replies.push(Ee),dt.push(Ee);case 30:if(!Te&&!Re){_t.next=44;break}if(this.webviewerServer){_t.next=38;break}return _t.next=34,this.messageHandler.sendWithPromise("CreateReplyStateAnnotation",{pagePtr:Oe,annotPtr:je,state:Te||Re});case 34:He=_t.sent,Re?We.markedAnnotState=He:We.reviewAnnotState=He,_t.next=44;break;case 38:Ke=this.annotations[Ce.pageIndex],ot=findIndex(We.name,Ke),at={operate:"mod-annot",index:ot,pageIndex:We.pageIndex,targetPage:We.pageIndex+1},Re&&(We.markedAnnotState=Re,at.markedAnnotState=Re),Te&&(We.reviewAnnotState=Te,at.reviewAnnotState=Te),Ze.push(at);case 44:_t.next=86;break;case 46:if(_e!=="delete"){_t.next=63;break}if(this.webviewerServer){_t.next=54;break}return _t.next=50,this.messageHandler.sendWithPromise("RemoveAnnot",{annotPtr:Ee.annotPtr});case 50:We.replies=We.replies.filter(function(wt){return wt.name!==Ee.name}),We.replies.forEach(function(wt){wt.index>Ee.index&&wt.index--}),_t.next=61;break;case 54:Ze.push({operate:"del-annot",index:We.index,repliesIndex:Ee.index,pageIndex:Ee.pageIndex,targetPage:Ee.pageIndex+1}),et=findIndex(Ee.name,We.replies),We.replies.splice(et,1),We.replies.map(function(wt,kt){return wt.index=kt}),Je=this.annotations[Ce.pageIndex],(nt=findIndex(Ee.name,Je))>-1&&Je.splice(nt,1);case 61:_t.next=86;break;case 63:if(_e!=="edit"){_t.next=86;break}if(!Re&&!Te){_t.next=81;break}if(this.webviewerServer){_t.next=73;break}return _t.next=68,this.messageHandler.sendWithPromise("SetState",{reviewAnnotState:Te,markedAnnotState:Re});case 68:it=_t.sent,Re&&(We.markedAnnotState=it),Te&&(We.reviewAnnotState=it),_t.next=79;break;case 73:ht=this.annotations[Ce.pageIndex],lt=findIndex(We.name,ht),ft={operate:"mod-annot",index:lt,pageIndex:We.pageIndex,targetPage:We.pageIndex+1},Re&&(We.markedAnnotState=Re,ft.markedAnnotState=Re),Te&&(We.reviewAnnotState=Te,ft.reviewAnnotState=Te),Ze.push(ft);case 79:_t.next=86;break;case 81:this.webviewerServer||this.messageHandler.sendWithPromise("EditReplyAnnotation",{reply:Ee}),mt=We.replies.findIndex(function(wt){return wt.name===Ee.name}),Ct=We.replies[mt],We.replies[mt]=_objectSpread2$1(_objectSpread2$1({},Ct),Ee),this.webviewerServer&&(Ze.push({operate:"mod-annot",index:We.index,repliesIndex:Ee.index,pageIndex:Ee.pageIndex,targetPage:Ee.pageIndex+1,content:Ee.contents,date:new Date,author:this.annotator}),this.annotations[Ce.pageIndex].find(function(wt){return(wt==null?void 0:wt.name)===Ct.name}).contents=Ee.contents);case 86:this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations}),this.webviewerServer&&(_assertClassBrand(_ComPDFKitViewer_brand,this,_convertAnnotationsForBackend).call(this,Ze),_assertClassBrand(_ComPDFKitViewer_brand,this,_postAnnotations).call(this,Ze)),this.isAnnotationModified=!0;case 89:case"end":return _t.stop()}},te,this)})),function(te){return m.apply(this,arguments)})},{key:"addReplyAnnotation",value:function(te,oe){this.handleReplyAnnotation({type:"add",annotation:[te],reply:[oe]})}},{key:"delReplyAnnotation",value:function(te){this.handleReplyAnnotation({type:"delete",reply:[te]})}},{key:"editReplyAnnotation",value:function(te,oe){this.handleReplyAnnotation({type:"edit",annotation:[te],reply:[oe]})}},{key:"setAnnotationState",value:function(te){var oe=te.annotation,_e=te.reviewAnnotState,Ce=te.markedAnnotState;Ce?this.handleReplyAnnotation({type:"edit",annotation:oe,markedAnnotState:Ce}):_e&&this.handleReplyAnnotation({type:"edit",annotation:oe,reviewAnnotState:_e})}},{key:"setHighlightLink",value:function(te){annotationStore.highlightLink=te,this.eventBus.dispatch("setHighlightLink",te)}},{key:"jumpToTheFirstUnfilledTextfield",value:function(){for(var te=Object.values(this.annotations).reduce(function(Ce,Ee){return Ce.concat(Ee)},[]),oe=0;oe<te.length;oe++){var _e=te[oe];if(_e.type==="textfield"&&!_e.contents){this.jumpToAnnotation(_e);break}}}},{key:"jumpToTheFirstUnSigned",value:function(){var te=Object.values(this.annotations).reduce(function(oe,_e){return oe.concat(_e)},[]).filter(function(oe){return oe.type==="signatureFields"&&!oe.isSigned&&!oe.isSignedDigitally});te.length&&this.jumpToAnnotation(te[0])}},{key:"getUnfilledTextfieldNumber",value:function(){for(var te=this.annotations?Object.values(this.annotations).reduce(function(Te,Re){return Te.concat(Re)},[]):[],oe=0,_e=0,Ce=0;Ce<te.length;Ce++){var Ee=te[Ce];Ee.type!=="textfield"||Ee.contents||(oe++,Ee.required&&_e++)}return{unFilledAllNumber:oe,unFilledNumber:_e}}},{key:"getUnSignedNumber",value:function(){return{unSignedNumber:Object.values(this.annotations).reduce(function(te,oe){return te.concat(oe)},[]).filter(function(te){return te.type==="signatureFields"}).filter(function(te){return te.type==="signatureFields"&&!te.isSigned&&!te.isSignedDigitally}).length}}},{key:"setHighlightForm",value:function(te){annotationStore.highlightForm=te,this.eventBus.dispatch("setHighlightForm",te)}},{key:"setAnnotator",value:function(te){this.annotator=te}},{key:"handlePopup",value:function(te){var oe=te.type,_e=te.tool,Ce={text:"textPopupClicked",cropPage:"cropPagePopupClicked",contentEditor:"contentEditorPopupClicked",measurement:"measurementPopupClicked"}[oe];Ce&&this.eventBus.dispatch(Ce,_e)}},{key:"getCropedPageImage",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe,_e){var Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!(!oe||oe<1||oe>this.pagesCount)){Ke.next=2;break}return Ke.abrupt("return",null);case 2:if(_e){Ke.next=7;break}if((Ce=this.pdfViewer._pages[oe-1])&&Ce.cropPage&&Ce.cropPage.rect){Ke.next=6;break}return Ke.abrupt("return",null);case 6:_e=Ce.cropPage.rect;case 7:if(Te=(Ee=_e).left,Re=Ee.right,Oe=Ee.bottom,je=Ee.top,We=window.devicePixelRatio||1,Ze=this.scale*We,Xe=parseInt(Te*Ze),Ge=parseInt(Re*Ze),Qe=parseInt(Oe*Ze),rt=parseInt(je*Ze),dt=null,!this.renderLayerPermission||!this.layers.length){Ke.next=21;break}return Ke.next=18,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagesPtr[oe-1].pagePtr,left:Xe,right:Ge,bottom:Qe,top:rt,scale:Ze,ocgsPtr:_toConsumableArray$1(this.ocgsPtr),flag:1,form:1});case 18:dt=Ke.sent,Ke.next=24;break;case 21:return Ke.next=23,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagesPtr[oe-1].pagePtr,scale:Ze,left:Xe,right:Ge,bottom:Qe,top:rt,flag:1,form:1});case 23:dt=Ke.sent;case 24:if(!dt||!dt.code){Ke.next=28;break}return console.log(dt.message),alert(dt.message),Ke.abrupt("return",!1);case 28:return qe=dt.imageArray,He=this.imageArrayToUrl(qe,Ge-Xe,Qe-rt),Ke.abrupt("return",He);case 31:case"end":return Ke.stop()}},te,this)})),function(te,oe){return g.apply(this,arguments)})},{key:"imageArrayToUrl",value:function(te,oe,_e){var Ce=document.createElement("canvas"),Ee=Ce.getContext("2d");Ce.width=oe,Ce.height=_e;var Te=Ee.createImageData(oe,_e),Re=new Uint8ClampedArray(te.buffer);Te.data.set(Re),Ee.putImageData(Te,0,0);var Oe=Ce.toDataURL("image/png",1);return Ce.remove(),Ce=null,Oe}},{key:"resetOperate",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:_e=oe.operation,Ce=oe.pageNumber,this.pdfViewer._pages[Ce-1].contentContainer.handleResetOperate(_e);case 2:case"end":return Ee.stop()}},te,this)})),function(te){return f.apply(this,arguments)})},{key:"getContentEditManager",value:function(){return this.contentEditManager}},{key:"getContentEditHistoryManager",value:function(){return this.pdfViewer.contentEditHistoryManager}},{key:"setContentEditModyfied",value:function(te){this.isContentEditModyfied=te}},{key:"applyRedactions",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe=this;return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(oe){rt.next=6;break}return rt.next=3,this.delAnnotations(this.redactionList);case 3:return this.redactionList.length=0,this.pdfViewer.refresh(),rt.abrupt("return");case 6:if(oe!=="all"){rt.next=13;break}return _e=_toConsumableArray$1(this.redactionList),rt.next=10,this.delAnnotations(this.redactionList);case 10:this.redactionList.length=0,rt.next=15;break;case 13:Ce=Array.isArray(oe)?oe:[oe],_e=Ce;case 15:Ee=_createForOfIteratorHelper(_e.filter(function(dt){return!dt.erasure})),rt.prev=16,Ee.s();case 18:if((Te=Ee.n()).done){rt.next=24;break}return Re=Te.value,rt.next=22,this.messageHandler.sendWithPromise("ApplyRedaction",{annotPtr:Re.annotPtr});case 22:rt.next=18;break;case 24:rt.next=29;break;case 26:rt.prev=26,rt.t0=rt.catch(16),Ee.e(rt.t0);case 29:return rt.prev=29,Ee.f(),rt.finish(29);case 32:Oe=_createForOfIteratorHelper(_e.filter(function(dt){return dt.erasure})),rt.prev=33,Oe.s();case 35:if((je=Oe.n()).done){rt.next=61;break}if(!(We=je.value).rects||!We.rects.length){rt.next=57;break}Ze=_createForOfIteratorHelper(We.rects),rt.prev=39,Ze.s();case 41:if((Xe=Ze.n()).done){rt.next=47;break}return Ge=Xe.value,rt.next=45,this.messageHandler.sendWithPromise("ErasureRedactionFromRect",{pagePtr:We.pagePtr,rect:Ge});case 45:rt.next=41;break;case 47:rt.next=52;break;case 49:rt.prev=49,rt.t1=rt.catch(39),Ze.e(rt.t1);case 52:return rt.prev=52,Ze.f(),rt.finish(52);case 55:rt.next=59;break;case 57:return rt.next=59,this.messageHandler.sendWithPromise("ErasureRedactionFromRect",{pagePtr:We.pagePtr,rect:We.rect});case 59:rt.next=35;break;case 61:rt.next=66;break;case 63:rt.prev=63,rt.t2=rt.catch(33),Oe.e(rt.t2);case 66:return rt.prev=66,Oe.f(),rt.finish(66);case 69:return rt.next=71,this.updateTextPtr();case 71:return this.emptyAnnotations(),this.reRenderAnnotations(),rt.abrupt("return",new Promise(function(dt){var qe=function(){Qe.eventBus._off("annotationUpdated",qe),Qe.pdfViewer.refresh(),dt()};Qe.eventBus._on("annotationUpdated",qe)}));case 74:case"end":return rt.stop()}},te,this,[[16,26,29,32],[33,63,66,69],[39,49,52,55]])})),function(te){return d.apply(this,arguments)})},{key:"setAutoJumpNextSign",value:function(te){this.autoJumpNextSign=te}},{key:"getLayers",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function te(){var oe,_e,Ce;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.messageHandler.sendWithPromise("GetLayers",this.doc);case 2:return oe=Ee.sent,_e=oe.layers,Ce=oe.ocgsPtr,this.layers=_e,this.ocgsPtr=new Set(Ce),this.eventBus.dispatch("getLayers",_e),Ee.abrupt("return",this.layers);case 9:case"end":return Ee.stop()}},te,this)})),function(){return u.apply(this,arguments)})},{key:"setLayers",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe=this;return _regeneratorRuntime().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:_e=Array.isArray(oe)?oe:[oe],Ce=this.ocgsPtr,Ee=_toConsumableArray$1(Ce),Te=!1,Re=!1,Oe=function(Qe,rt){var dt,qe=_createForOfIteratorHelper(rt);try{for(qe.s();!(dt=qe.n()).done;){var He=dt.value;if(He.node===Qe)return He;var Ke=Oe(Qe,He.children);if(Ke)return Ke}}catch(ot){qe.e(ot)}finally{qe.f()}return null},je=_createForOfIteratorHelper(_e),Ge.prev=7,Ze=_regeneratorRuntime().mark(function Qe(){var rt,dt;return _regeneratorRuntime().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(rt=We.value,dt=Oe(rt.node,Xe.layers),rt.hasOwnProperty("visible")&&(dt.visible=rt.visible?1:0,rt.visible?Ce.add(rt.ocg):Ce.delete(rt.ocg),Ce.has(0)&&Ce.delete(0),delete rt.visible,Re=!0),!["name","defaultVisible","isLocked","printState","exportState"].some(function(He){return!!rt.hasOwnProperty(He)&&(dt[He]=rt[He],!0)})){qe.next=9;break}return qe.next=8,Xe.messageHandler.sendWithPromise("SetLayer",rt);case 8:Te=!0;case 9:case"end":return qe.stop()}},Qe)}),je.s();case 10:if((We=je.n()).done){Ge.next=14;break}return Ge.delegateYield(Ze(),"t0",12);case 12:Ge.next=10;break;case 14:Ge.next=19;break;case 16:Ge.prev=16,Ge.t1=Ge.catch(7),je.e(Ge.t1);case 19:return Ge.prev=19,je.f(),Ge.finish(19);case 22:if(Re&&!Te||Ee.length!==Ce.size||!Ee.every(function(Qe){return Ce.has(Qe)})){Ge.next=24;break}return Ge.abrupt("return");case 24:this.pdfViewer.refreshCanvas();case 25:case"end":return Ge.stop()}},te,this,[[7,16,19,22]])})),function(te){return s.apply(this,arguments)})},{key:"exportLayers",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je=arguments;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(_e=je.length>1&&je[1]!==void 0&&je[1],Ce=Array.isArray(oe)?oe:[oe],oe||(Ce=this.layers.filter(function(Ze){return Ze.visible===1&&Ze.exportState!==1||Ze.exportState===0}).map(function(Ze){return Ze.ocg})),Ce.length){We.next=5;break}return We.abrupt("return",!1);case 5:return We.next=7,this.messageHandler.sendWithPromise("ExportLayers",{doc:this.doc,ocgsPtr:Ce});case 7:if(!(Ee=We.sent)||!Ee.code){We.next=12;break}return console.log(Ee.message),alert(Ee.message),We.abrupt("return",!1);case 12:if(Ee){We.next=15;break}return console.warn("export",0),We.abrupt("return",!1);case 15:if(!_e){We.next=22;break}return Te=this._docName,Ce.length===1&&(Oe=(Re=function(Ze,Xe){var Ge,Qe=_createForOfIteratorHelper(Xe);try{for(Qe.s();!(Ge=Qe.n()).done;){var rt=Ge.value;if(rt.ocg===Ze)return rt;var dt=Re(Ze,rt.children);if(dt)return dt}}catch(qe){Qe.e(qe)}finally{Qe.f()}return null})(Ce[0],this.layers))&&(Te=Oe.name),FileSaver_minExports.saveAs(Ee,Te),We.abrupt("return",!0);case 22:return We.abrupt("return",Ee);case 23:case"end":return We.stop()}},te,this)})),function(te){return o.apply(this,arguments)})},{key:"initColorFile",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce;return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!oe){Ee.next=4;break}_e=convertFileToBuffer(oe),Ee.next=10;break;case 4:return Ee.next=6,fetch("./lib/CMYK/CoatedFOGRA39.icc");case 6:return Ce=Ee.sent,Ee.next=9,Ce.arrayBuffer();case 9:_e=Ee.sent;case 10:if(_e){Ee.next=13;break}return console.error("Invalid File"),Ee.abrupt("return");case 13:this.colorFile=_e;case 14:case"end":return Ee.stop()}},te,this)})),function(te){return r.apply(this,arguments)})},{key:"updateViewWithColorIndex",value:function(te){var oe=this;return annotationStore.ignoreColors=te,this.eventBus.dispatch("updateSeparationView",te),new Promise(function(_e){var Ce=function(){oe.eventBus._off("finishUpdateSeparationView",Ce),_e()};oe.eventBus._on("finishUpdateSeparationView",Ce)})}},{key:"enableColorSeparations",value:function(te){var oe=this;if(this.toolMode==="separation"){var _e=Array.isArray(te)?te:[te],Ce=[];_e.forEach(function(Te){var Re=oe.colorList.find(function(Oe){return Oe.name===Te});Re&&Ce.push(Re.index)});var Ee=annotationStore.ignoreColors.filter(function(Te){return!Ce.includes(Te)});this.updateViewWithColorIndex(Ee),this.eventBus.dispatch("ignoreColorsUpdate",Ee)}else console.warn("Color separation not enabled.")}},{key:"disableColorSeparations",value:function(te){var oe=this;if(this.toolMode==="separation"){var _e=Array.isArray(te)?te:[te],Ce=[];_e.forEach(function(Ee){var Te=oe.colorList.find(function(Re){return Re.name===Ee});Te&&Ce.push(Te.index)}),Ce.length?(this.updateViewWithColorIndex(Ce),this.eventBus.dispatch("ignoreColorsUpdate",Ce)):console.warn("Invalid color.")}else console.warn("Color separation not enabled.")}},{key:"getColorSeparationsAtPoint",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe,_e,Ce){return _regeneratorRuntime().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(this.toolMode==="separation"){Ee.next=2;break}return Ee.abrupt("return");case 2:return Ee.next=4,this.pdfViewer._pages[oe-1].separation.getSelectPointColor({x:_e,y:Ce});case 4:return Ee.abrupt("return",Ee.sent);case 5:case"end":return Ee.stop()}},te,this)})),function(te,oe,_e){return n.apply(this,arguments)})},{key:"printPages",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function te(oe){var _e,Ce,Ee,Te,Re,Oe,je,We,Ze,Xe,Ge,Qe,rt,dt,qe,He,Ke,ot;return _regeneratorRuntime().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:_e=[],Ce=isNaN(Number(oe))?window.devicePixelRatio||1:Number(oe),Ee=2500,Te=new Set,this.layers.forEach(function(et){et.printState===0?Te.add(et.ocg):et.printState===1?Te.delete(et.ocg):et.visible?Te.add(et.ocg):Te.delete(et.ocg)}),Re=0;case 6:if(!(Re<this.pdfViewer._pages.length)){at.next=46;break}if(Oe=document.createElement("canvas"),je=Oe.getContext("2d"),We=this.pagesPtr[Re],Ze=We.width,Xe=We.height,Ge=1,(Qe=Math.sqrt(Ze*Xe))>Ee&&(Ge=Ee/Qe),rt=Ce*Ge,dt=Math.round(Ze*rt),qe=Math.round(Xe*rt),Oe.width=dt,Oe.height=qe,He=null,this.toolMode!=="separation"||!annotationStore.ignoreColors.length){at.next=25;break}return at.next=22,this.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:this.pagesPtr[Re].sepColorPtr,x:0,y:0,width:dt,height:qe,indexs:annotationStore.ignoreColors,flag:1});case 22:He=at.sent,at.next=34;break;case 25:if(!this.renderLayerPermission||!this.layers.length){at.next=31;break}return at.next=28,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagesPtr[Re].pagePtr,left:0,top:0,right:dt,bottom:qe,scale:rt,ocgsPtr:_toConsumableArray$1(Te),flag:1,form:1});case 28:He=at.sent,at.next=34;break;case 31:return at.next=33,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagesPtr[Re].pagePtr,left:0,top:0,right:dt,bottom:qe,scale:rt,flag:1,form:1});case 33:He=at.sent;case 34:if(!He||!He.code){at.next=37;break}return console.log(He.message),at.abrupt("continue",43);case 37:Ke=He.imageArray,je.clearRect(0,0,dt,qe),(ot=je.createImageData(dt,qe)).data.set(Ke),je.putImageData(ot,0,0),_e[Re]=Oe.toDataURL("image/png");case 43:Re++,at.next=6;break;case 46:return at.abrupt("return",_e);case 47:case"end":return at.stop()}},te,this)})),function(te){return e.apply(this,arguments)})},{key:"printDocument",value:function(te){var oe=this,_e=this.buildPrintContent(te),Ce=window.parent.document.title,Ee=function(){window.parent.document.title=oe._docName},Te=function(){window.parent.document.title=Ce},Re=document.createElement("iframe");Re.style.display="none",document.body.appendChild(Re),Re.contentDocument.open(),Re.contentDocument.write(_e),Re.contentDocument.close(),Re.onload=function(){Re.contentWindow.focus(),Re.contentWindow.addEventListener("beforeprint",Ee,{once:!0}),Re.contentWindow.addEventListener("afterprint",Te,{once:!0}),Re.contentWindow.print(),setTimeout(function(){document.body.removeChild(Re)},500)}}},{key:"buildPrintContent",value:function(te){var oe=`
      <html>
        <head>
          <style>
            @media print {
              @page {
                margin: 0;
                padding: 0;
              }

              body {
                height: 100%;
                display: block! important;
                overflow: visible !important;
                margin: 0 !important;
                padding: 0 !important;
              }

              .page__container img {
                display: block !important;
                max-width: 100%;
                max-height: 100%;
                height: 100%;
                width: 100%;
                object-fit: contain;
                page-break-after: always;
                padding: 0;
                margin: 0;
              }
            }
          </style>
        </head>
        <body>
          <div class="page__container">
    `;return te.forEach(function(_e,Ce){oe+='<img src="'.concat(_e,'" alt="Page ').concat(Ce+1,'">')}),oe+="</div></body></html>"}},{key:"setMeasurementDefaults",value:function(te){if(this.pdfViewer.distanceMeasurementCreateTool.setDefaults(te),this.pdfViewer.areaMeasurementCreateTool.setDefaults(te),annotationStore.annotationsAll){var oe=Object.values(annotationStore.annotationsAll).reduce(function(_e,Ce){return _e.concat(Ce)},[]).find(function(_e){return _e.name===annotationStore.selectedElementName});oe&&["line","polygon"].includes(oe.type)&&oe.measure&&this.eventBus.dispatch("measurePropertyPanelChanged",te)}}}]);var e,n,r,o,s,u,d,f,g,m,y,v,_,w,x,k,S,M,E,P,T,D,F,I,N,q,Y,Z,j,ne,le,J,O,U,W,H,X,Q,fe,Se,Pe,$e,Ie,Ne,Be,be,Ve,De,ve,ye,we,ke,Me,Le,Fe,ze}();function _formatRect(e){var n,r=e.page;if((n=this.pagesPtr[r])!==null&&n!==void 0&&n.height){var o=this.pagesPtr[r].height,s=e.rect.split(",");return{left:round(s[0],2),bottom:round(o-Number(s[1]),2),right:round(s[2],2),top:round(o-Number(s[3]),2)}}}function _formatCoords(e){var n,r=[],o=e.page;if((n=this.pagesPtr[o])!==null&&n!==void 0&&n.height){for(var s=this.pagesPtr[o].height,u=e.coords.split(","),d=0;d+7<u.length;d+=8){var f=round(u[d],2),g=round(s-Number(u[d+1]),2),m=round(u[d+2],2);round(s-Number(u[d+3]),2),round(u[d+4],2);var y=round(s-Number(u[d+5]),2);round(u[d+6],2),round(s-Number(u[d+7]),2);var v=Math.min(f,m),_=Math.max(f,m),w=Math.min(g,y),x=Math.max(g,y);r.push({PointX:v,PointY:w}),r.push({PointX:_,PointY:w}),r.push({PointX:v,PointY:x}),r.push({PointX:_,PointY:x})}return r}}function _formatLinePoints(e){var n,r=e.page;if((n=this.pagesPtr[r])!==null&&n!==void 0&&n.height){var o=this.pagesPtr[r].height,s=[],u=e.start.split(","),d=e.end.split(",");return s.push(round(u[0],2)),s.push(round(o-Number(u[1]),2)),s.push(round(d[0],2)),s.push(round(o-Number(d[1]),2)),s}}function _formatInkPointes(e){var n,r=e.page;if((n=this.pagesPtr[r])!==null&&n!==void 0&&n.height){var o=this.pagesPtr[r].height,s=[],u=e.inklist.gesture;Array.isArray(u)||(u=[u]);for(var d=0;d<u.length;d++){u[d][u[d].length-1]===";"&&(u[d]=u[d].slice(0,u[d].length-1));var f=u[d].split(";").map(function(g){var m=g.split(",");return{PointX:round(m[0],2),PointY:round(o-Number(m[1]),2)}});s.push(f)}return s}}function _formatAnnotation(e){var n,r={};switch(r.type=e.type,e.rect&&(r.rect=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatRect).call(this,e)),r.date=parseAdobePDFTimestamp(e.creationdate),r.pageIndex=Number(e.page),r.index=Number(e.index),r.contents=e.content||"",r.opacity=round(e.opacity,2)||1,e.mainName&&(r.mainName=e.mainName),e.replies&&(r.replies=e.replies),(e.markedAnnotState||e.markedAnnotState===0)&&(r.markedAnnotState=AnnotationStateString[e.markedAnnotState]),(e.reviewAnnotState||e.reviewAnnotState===0)&&(r.reviewAnnotState=AnnotationStateString[e.reviewAnnotState]),r.name=e.name||v4(),e.type){case"freetext":var o=e.textStyle.fontName;if(o=o[0].toUpperCase()+o.slice(1),r.fontName=o,r.fontSize=round(e.textStyle.fontSize,0),r.color=e.textStyle.fontColor,r.textAlignment=e.justification,r.contents=e["contents-richtext"]||e.content,e["contents-richtext"]){var s=new DOMParser().parseFromString(e["contents-richtext"],"text/xml");s.getElementsByTagName("parsererror").length>0?r.contents=e["contents-richtext"]:r.contents=s.firstElementChild.innerText}break;case"text":r.color=e.color,r.isHidden=e.isHidden||e.flags&&e.flags==="invisible"?1:0;break;case"highlight":case"underline":case"strikeout":case"squiggly":r.color=e.color,r.quadPoints=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatCoords).call(this,e);break;case"line":r.linePoints=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatLinePoints).call(this,e),r.tail=e.tail,r.head=e.head,r.borderColor=e.color,r.borderWidth=round(e.width,2);break;case"square":case"circle":r.borderColor=e.color,r.borderWidth=round(e.width,2),e["interior-opacity"]&&(r.fillTransparency=round(e["interior-opacity"],2)),e["interior-color"]&&(r.fillColor=e["interior-color"]);break;case"ink":r.borderColor=e.color,r.borderWidth=round(e.width,2),r.inkPointes=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatInkPointes).call(this,e);break;case"link":e.Dest&&e.Dest.XYZ?(r.destPage=Number(e.Dest.XYZ.Page)+1,r.url=""):e.OnActivation&&e.OnActivation.Action.URI&&(r.url=e.OnActivation.Action.URI.URI,r.destPage="");break;case"stamp":r.contents=e.icon,e.image&&(r.image=e.image),r.stampType=e["stamp-type"];break;case"textfield":e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]);var u=e.textStyle.fontName;r.isBold=/bold/i.test(u),r.isItalic=/(oblique|italic)/i.test(u),r.fontName=u.split("-")[0],r.fontSize=round(e.textStyle.fontSize,0),r.color=e.textStyle.fontColor,r.textAlignment=e.textStyle.alignment,r.contents=e.value,r.fieldName=e.fieldname,r.isMultiLine=e.textStyle.multiLine==="true"?1:0,r.isHidden=e.flags&&e.flags!=="invisible"?0:1;break;case"checkbox":case"radiobutton":e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]),r.fieldName=e.fieldname,r.isHidden=e.flags&&e.flags!=="invisible"?0:1,r.isChecked=e.value==="Yes"?1:0,r.checkStyle=Number(e.styleCA);break;case"combobox":case"listbox":if(e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]),r.fieldName=e.fieldname,e.textStyle&&e.textStyle.fontName){var d=e.textStyle.fontName;d=d[0].toUpperCase()+d.slice(1),r.fontName=d,r.fontSize=round(e.textStyle.fontSize,0)}r.color=e.textStyle.fontColor,r.isBold=e.textStyle.blod==="true",r.isItalic=e.textStyle.italic==="true",r.isMultiLine=e.textStyle.multiLine==="true"?1:0,r.isHidden=e.flags||e.flags!=="invisible"?0:1,r.items=_assertClassBrand(_ComPDFKitViewer_brand,this,_getItems).call(this,e),r.selected=round(e.select,0)-1;break;case"pushbutton":var f=e.OnActivation&&e.OnActivation.Action;if(f&&f.URI?(r.url=f.URI.URI,r.destPage="",r.actionType=6):f&&f.Dest&&f.Dest.XYZ&&(r.destPage=Number(f.Dest.XYZ.Page)+1,r.url="",r.actionType=1),e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]),r.fieldName=e.fieldname,e.textStyle.fontName){var g=e.textStyle.fontName;g=g[0].toUpperCase()+g.slice(1),r.fontName=g}else r.fontName="Helvetica";r.fontSize=round(e.textStyle.fontSize,0),r.color=e.textStyle.fontColor,r.isBold=e.textStyle.blod==="true",r.isItalic=e.textStyle.italic==="true",r.title=e.styleCA,r.isHidden=e.flags||e.flags!=="invisible"?0:1}if((n=r.replies)!==null&&n!==void 0&&n.length){var m,y=_createForOfIteratorHelper(r.replies);try{for(y.s();!(m=y.n()).done;){var v=m.value;v.name=v.name||v4(),v.mainName=v.mainName||r.name,v.contents=v.content,delete v.content,v.date=parseAdobePDFTimestamp(e.recentlyModifyDate||e.date||e.creationdate),v.pageIndex=Number(e.page),delete v.page}}catch(_){y.e(_)}finally{y.f()}}return r}function _getItems(e){for(var n=[],r=e.opt,o=0;o<r.length;o++)n.push({Value:r[o].value,String:r[o].key});return n}function _convertAnnotationsForBackend(e){for(var n=0;n<e.length;n++){var r=e[n],o=this.pagesPtr[r.pageIndex].height;switch(r.type){case"text":r.borderColor=r.color,r.fillTransparency=1,delete r.color;break;case"freetext":r.fillColor=r.bgColor,r.textColor=r.color,delete r.color,delete r.bgColor;break;case"highlight":case"underline":case"strikeout":case"squiggly":r.borderColor=r.color,delete r.color;break;case"square":case"circle":if(r.arrow=!1,!r.linePoints){var s=r.rect,u=s.left,d=s.top,f=s.right,g=s.bottom;r.linePoints=[u,g,f,d]}r.opacity||r.opacity===0||(r.transparency=1);break;case"line":r.tail==="OpenArrow"||r.arrow?r.arrow=!0:r.arrow=!1;break;case"stamp":r.stampType==="standard"?r.standardStampType=r.contents:r.stampType==="text"?(r.textStampFirststring=r.contents,r.textStampSecondstring=r.time,r.textStampColor=r.stampColor,r.textStampShape=r.stampShape,delete r.time,delete r.stampColor,delete r.stampShape):r.stampType==="image"&&(r.type="image",delete r.annotPtr,delete r.imageData,delete r.pagePtr),delete r.contents;break;case"textfield":r.type="text-field",r.color&&(r.textColor=r.color),r.textAlignment&&(r.alignment=ALIGNMAP[r.textAlignment]||0),r.format="0",delete r.color,delete r.textAlignment;break;case"checkbox":r.type="check-box";break;case"radiobutton":r.type="radio-button";break;case"listbox":r.type="list-box",r.color&&(r.textColor=r.color),"selected"in r&&(r.selecte=r.selected),delete r.selected,delete r.color;break;case"combobox":r.type="combo-box",r.color&&(r.textColor=r.color),delete r.color;break;case"pushbutton":r.type="push-button",r.color&&(r.textColor=r.color),"destPage"in r&&(r.destPage=r.destPage-1),delete r.color;break;case"reply":r.page=r.pageIndex,r.targetPage=r.pageIndex+1,delete r.pageIndex}for(var m in r.operate==="mod-form"&&(r.color&&(r.textColor=r.color),"destPage"in r&&(r.destPage=r.destPage-1),delete r.color),r)switch(m){case"index":r.index+=1;break;case"rect":r.rect=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatRectForBackend).call(this,r.rect,r.pageIndex);break;case"linePoints":r.linePoints=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatLinePointsForBackend).call(this,r.linePoints,r.pageIndex);break;case"borderWidth":r.lineWidth=r.borderWidth,delete r.borderWidth;break;case"isChecked":r.select=r.isChecked,delete r.isChecked;break;case"checkStyle":r.style=r.checkStyle,delete r.checkStyle;break;case"selected":r.selecte=r.selected,delete r.selected;break;case"items":for(var y=r.items,v="",_=0;_<y.length;_++)_===0?v=y[_].Value:v+=",".concat(y[_].Value);r.options=v,delete r.items;break;case"textAlignment":r.textAlignment&&(r.alignment=ALIGNMAP[r.textAlignment]||0),delete r.textAlignment;break;case"contents":r.content=r.contents,delete r.contents;break;case"opacity":r.transparency=r.opacity,delete r.opacity;break;case"quadPoints":for(var w=r.quadPoints,x="",k=0;k<w.length;k++)x+=k===0?w[k].PointX:",".concat(w[k].PointX),x+=",".concat(o-w[k].PointY);r.quadPoints=x;break;case"inkPointes":for(var S=r.inkPointes,M="",E=0;E<S.length;E++){for(var P=S[E],T=0;T+1<P.length;T+=2)M+=T===0?P[T].PointX:",".concat(P[T].PointX),M+=",".concat(o-P[T+1].PointY);M+="//"}delete r.inkPointes,r.inklist=M;break;case"title":r.operate.indexOf("form")>-1&&(r.title&&(r.value=r.title),delete r.title);break;case"replies":var D,F=_createForOfIteratorHelper(r.replies);try{for(F.s();!(D=F.n()).done;){var I=D.value;I.page=I.pageIndex,I.targetPage=I.pageIndex+1,delete I.pageIndex}}catch(N){F.e(N)}finally{F.f()}break;case"markedAnnotState":r.markedAnnotState=AnnotationState[r.markedAnnotState];break;case"reviewAnnotState":r.reviewAnnotState=AnnotationState[r.reviewAnnotState];break;case"repliesIndex":r.repliesIndex+=1}}}function _formatRectForBackend(e,n){var r;if((r=this.pagesPtr[n])!==null&&r!==void 0&&r.height){var o=this.pagesPtr[n].height,s=e.left,u=e.top,d=e.right,f=o-u,g=o-e.bottom;return"".concat(s,",").concat(g,",").concat(d,",").concat(f)}}function _formatLinePointsForBackend(e,n){var r;if((r=this.pagesPtr[n])!==null&&r!==void 0&&r.height){var o=this.pagesPtr[n].height,s=o-e[1],u=o-e[3];return"".concat(e[0],",").concat(s,",").concat(e[2],",").concat(u)}}function _postAnnotations(e){return _postAnnotations2.apply(this,arguments)}function _postAnnotations2(){return(_postAnnotations2=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:n})},o.next=3,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,r).then(function(s){return s.json()}).then(function(s){return s.code==="200"}).catch(function(s){return console.log(s)});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},e,this)}))).apply(this,arguments)}var PDFWorker=function(){return _createClass(function e(){_classCallCheck(this,e),_defineProperty$1(this,"destroyed",!1),this._promiseCapability=new PromiseExt,this._messageHandler=null,this._webWorker=null,this._initialize()},[{key:"_initialize",value:function(){var e=this;try{var n=new Worker("./lib/PDFWorker.js"),r=new MessageHandler("main","worker",n);this._messageHandler=r;var o=function(){n.removeEventListener("error",s),r.destroy(),n.terminate(),e.destroyed?e._promiseCapability.reject(new Error("Worker was destroyed")):console.error("The worker has been disabled.")},s=function(){e._webWorker||o()};n.addEventListener("error",s),r.on("test",function(d){n.removeEventListener("error",s),e.destroyed?o():d&&(e._messageHandler=r,e._webWorker=n,e._promiseCapability.resolve(!0))}),r.on("ready",function(d){if(n.removeEventListener("error",s),e.destroyed)o();else try{u(),r.send("Ready",!0)}catch{console.error("The worker has been disabled.")}});var u=function(){var d=new Uint8Array;r.send("test",d)};u()}catch(d){console.log(d),console.log("The worker has been disabled.")}}},{key:"promise",get:function(){return this._promiseCapability.promise}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}])}();const documentViewerMap=new Map,setDocumentViewer=(e,n,r)=>{if(n)documentViewerMap.set(e,n);else{const o=new ComPDFKitViewer(r);documentViewerMap.set(e,o)}},deleteDocumentViewer=e=>{documentViewerMap.delete(e)},getDocumentViewer=(e=1)=>documentViewerMap.get(e),getDocumentViewers=()=>Array.from(documentViewerMap.values()),loadDocument=(e,n,r)=>core.getDocumentViewer(r).loadDocument(e,n),initializeViewer=({container:e,viewer:n,thumbnailView:r,annotationView:o,outlineView:s,toggleButton:u},d)=>core.getDocumentViewer(d).initializeViewer({container:e,viewer:n,thumbnailView:r,annotationView:o,outlineView:s,toggleButton:u}),toggleSidebar=()=>core.getDocumentViewer().toggleSidebar(),getPagesCount=()=>core.getDocumentViewer().pagesCount,nextPage=()=>core.getDocumentViewer().nextPage(),previousPage=()=>core.getDocumentViewer().previousPage(),getCurrentPage=()=>core.getDocumentViewer().page,rotateClockwise=()=>core.getDocumentViewer().webViewerRotateCw(),rotateCounterclockwise=()=>core.getDocumentViewer().webViewerRotateCcw(),zoomIn=e=>core.getDocumentViewer(e).zoomIn(),zoomOut=e=>core.getDocumentViewer(e).zoomOut(),pageNumberChanged=e=>core.getDocumentViewer().pageNumberChanged(e.value),scaleChanged=(e,n)=>core.getDocumentViewer(n).webViewerScaleChanged(e),getScale=()=>core.getDocumentViewer().scale,switchAnnotationEditorMode=e=>core.getDocumentViewer().webViewerSwitchAnnotationEditorMode({mode:e}),switchTool=e=>core.getDocumentViewer().switchTool(e),requestFullScreenMode=()=>core.getDocumentViewer().requestFullScreenMode(),saveAnnotations=()=>core.getDocumentViewer().saveAnnotations(),removeAllAnnotations=()=>core.getDocumentViewer().removeAllAnnotations(),getOptionUrl=()=>core.getDocumentViewer().getOptionUrl(),importAnnotations=e=>core.getDocumentViewer().importAnnotations(e),switchSpreadMode=e=>core.getDocumentViewer().webViewerSwitchSpreadMode(e),webViewerNamedAction=(e,n)=>core.getDocumentViewer().webViewerNamedAction({action:e,close:n}),switchScrollMode=e=>core.getDocumentViewer().webViewerSwitchScrollMode(e),initConfig=(e,n=1)=>core.getDocumentViewer(n).initConfig(e),download=(e=!0,n)=>core.getDocumentViewer().download(e,n),addEvent=(e,n)=>core.getDocumentViewer().addEvent(e,n),removeEvent=(e,n)=>core.getDocumentViewer().removeEvent(e,n),setTool=({tool:e,color:n})=>core.getDocumentViewer().setTool({tool:e,color:n}),exportXfdf=(e=!1)=>core.getDocumentViewer().exportXfdf(e),webViewerPageMode=e=>core.getDocumentViewer().webViewerPageMode({mode:e}),setToolMode=e=>core.getDocumentViewer().setToolMode(e),setPropertyPanel=e=>core.getDocumentViewer().setPropertyPanel(e),setInitProperty=()=>core.getDocumentViewer().setInitProperty(),setDefaultSelect=e=>core.getDocumentViewer().setDefaultSelect(e),handleField=(e,n,r)=>core.getDocumentViewer().handleField(e,n,r),handleSign=e=>core.getDocumentViewer().handleSign(e),handleStamp=e=>core.getDocumentViewer().handleStamp(e),flattenPdfDownload=e=>core.getDocumentViewer().flattenPdfDownload(e),compare=e=>core.getDocumentViewer().compare(e),setPassword=e=>core.getDocumentViewer().setPassword(e),removePassword=()=>core.getDocumentViewer().removePassword(),checkPassword=(e,n)=>core.getDocumentViewer().checkPassword(e,n),handleCreateStatus=({bool:e,fileData:n})=>core.getDocumentViewer().handleCreateStatus({bool:e,fileData:n}),triggerPrinting=e=>core.getDocumentViewer().triggerPrinting(e),setContentEditorProperty=(e,n)=>core.getDocumentViewer().setContentEditorProperty(e,n),getOutlines=()=>core.getDocumentViewer().getOutlines(),search=(e,n)=>core.getDocumentViewer(1).search(e),setActiveSearchResult=(e,n,r)=>core.getDocumentViewer(1).setActiveSearchResult(e,n),clearSearchResults=e=>core.getDocumentViewer(1).clearSearchResults(),init=(e=1)=>core.getDocumentViewer(e).init(),getSelectedText=()=>core.getDocumentViewer().getSelectedText(),getDocEditorPages=(e,n,r)=>core.getDocumentViewer().getDocEditorPages(e,n,r),saveDocumentEdit=e=>core.getDocumentViewer().saveDocumentEdit(e),getScrollViewElement=(e=1)=>core.getDocumentViewer(e).getScrollViewElement(),getSelectedPage=(e,n,r=1)=>core.getDocumentViewer(r).getSelectedPage(e,n),pageToWindow=(e,n=1,r=1)=>core.getDocumentViewer(r).pageToWindow(e,n),windowToPage=(e,n=1,r=1)=>core.getDocumentViewer(r).windowToPage(e,n),addEditorImage=e=>core.getDocumentViewer().addEditorImage(e),flattenPdf=e=>core.getDocumentViewer().flattenPdf(e),getSignature=e=>core.getDocumentViewer().getSignature(e),deleteSignature=e=>core.getDocumentViewer().deleteSignature(e),loadCertificates=e=>core.getDocumentViewer().loadCertificates(e),addToTrustedCertificateLists=e=>core.getDocumentViewer().addToTrustedCertificateLists(e),verifySignature=()=>core.getDocumentViewer().verifySignature(),handleReplyAnnotation=e=>core.getDocumentViewer().handleReplyAnnotation(e),setHighlightLink=e=>core.getDocumentViewer().setHighlightLink(e),setHighlightForm=e=>core.getDocumentViewer().setHighlightForm(e),setAnnotator$1=e=>core.getDocumentViewer().setAnnotator(e),selectAnnotation=e=>core.getDocumentViewer().selectAnnotation(e),jumpToAnnotation=e=>core.getDocumentViewer().jumpToAnnotation(e),getCropedPageImage=e=>core.getDocumentViewer().getCropedPageImage(e),resetOperate=e=>core.getDocumentViewer().resetOperate(e),eventBus=()=>core.getDocumentViewer().eventBus,handlePopup=e=>core.getDocumentViewer().handlePopup(e),addAnnotationImage=e=>core.getDocumentViewer().addAnnotationImage(e),applyRedactions=e=>core.getDocumentViewer().applyRedactions(e),setAutoJumpNextSign$1=e=>core.getDocumentViewer().setAutoJumpNextSign(e),enableFillConsecutively=e=>core.getDocumentViewer().enableFillConsecutively(e),disableFillConsecutively=e=>core.getDocumentViewer().disableFillConsecutively(),setLayers=e=>core.getDocumentViewer().setLayers(e),exportLayers=(e,n)=>core.getDocumentViewer().exportLayers(e,n),updateViewWithColorIndex=e=>core.getDocumentViewer().updateViewWithColorIndex(e),setMeasurementDefaults=e=>core.getDocumentViewer().setMeasurementDefaults(e),core={getDocumentViewer,setDocumentViewer,getDocumentViewers,deleteDocumentViewer,loadDocument,initializeViewer,toggleSidebar,getPagesCount,nextPage,previousPage,getCurrentPage,rotateClockwise,rotateCounterclockwise,zoomIn,zoomOut,pageNumberChanged,scaleChanged,getScale,switchAnnotationEditorMode,switchTool,requestFullScreenMode,saveAnnotations,removeAllAnnotations,getOptionUrl,importAnnotations,switchSpreadMode,webViewerNamedAction,switchScrollMode,initConfig,download,addEvent,removeEvent,setTool,exportXfdf,webViewerPageMode,setToolMode,setPropertyPanel,setInitProperty,setDefaultSelect,handleField,handleSign,handleStamp,flattenPdfDownload,compare,setPassword,removePassword,checkPassword,handleCreateStatus,triggerPrinting,setContentEditorProperty,getOutlines,search,setActiveSearchResult,clearSearchResults,init,getSelectedText,getDocEditorPages,saveDocumentEdit,getScrollViewElement,getSelectedPage,pageToWindow,windowToPage,addEditorImage,flattenPdf,getSignature,deleteSignature,loadCertificates,addToTrustedCertificateLists,verifySignature,handleReplyAnnotation,setHighlightLink,setHighlightForm,setAnnotator:setAnnotator$1,selectAnnotation,jumpToAnnotation,getCropedPageImage,resetOperate,eventBus,handlePopup,addAnnotationImage,applyRedactions,setAutoJumpNextSign:setAutoJumpNextSign$1,enableFillConsecutively,disableFillConsecutively,setLayers,exportLayers,updateViewWithColorIndex,setMeasurementDefaults},isMobile=window.innerWidth<640;navigator.userAgent.indexOf("Edge")>-1;navigator.userAgent.indexOf("Edg/")>-1;navigator.userAgent.indexOf("Trident/7.0")>-1;navigator.userAgent.toLowerCase().indexOf("firefox")>-1;const checkForIOS13=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIOS=window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||checkForIOS13,isAndroid=window.navigator.userAgent.match(/Android/i),isMobileDevice=isIOS||isAndroid||window.navigator.userAgent.match(/webOS|BlackBerry|IEMobile|Opera Mini/i);navigator.appVersion.indexOf("Mac")>-1;navigator.appVersion.indexOf("Windows")>-1;(function(){const e=window.navigator.userAgent.match(/OPR/),n=window.navigator.userAgent.match(/Maxthon/),r=window.navigator.userAgent.match(/Edge/);return window.navigator.userAgent.match(/Chrome\/(.*?) /)&&!e&&!n&&!r})();/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/^((?!chrome|android).)*$/.test(navigator.userAgent);window.navigator.userAgent.match(/CriOS\/(.*?) /);window.navigator.userAgent.match(/(FxiOS)\/(.*?) /);const useViewerStore=defineStore({id:"viewer",state:()=>({language:"en",fullMode:!1,currentPage:0,searchStatus:!1,scale:"",oldScale:"",newScale:"",themeMode:"Light",pageMode:0,webviewerMode:"Standalone",scrollMode:"Vertical",pageLabels:[],zoomLevel:["auto","page-fit",.5,1,1.25,1.5,2,2.5],activeTab:0,activeStickNote:!1,activeActiveMeasure:!1,activeHand:!1,license:null,verified:!1,annotation:{isAnnotationExport:!0,isAnnotationImport:!0},activeElements:{leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1,linkPanel:!1,compareSettingDialog:!1,settingsDialog:!1,setPasswordModal:!1,signCreatePanel:!1,digitalSignCreatePanel:!1,downloadSettingDialog:!1,printSettingDialog:!1,contentEditorPanel:!1,contentEditorPreventDialog:!1,docEditorPreventDialog:!1,insertPageSettingDialog:!1,deletePageDialog:!1,extractPageSettingDialog:!1,movePageSettingDialog:!1,selectSignTypeDialog:!1,signatureAppearanceDialog:!1,signatureDetailsDialog:!1,certificateViewerDialog:!1,deleteSignatureDialog:!1,addDigitalFileDialog:!1,layerPropertyDialog:!1,colorSeparationPanel:!1,unsupportedMobileDialog:!1,redactionTipDialog:!1,measurementSettingsDialog:!1,measurePanel:!1},digitalSignature:{preview:null},activeElementsTab:{leftPanel:"THUMBS",rightPanel:"GENERAL",stampPanel:"STANDARD",signPanel:"keyboard"},disabledElements:{header:{disabled:!1},pageNavOverlay:{disabled:!1},thumbnails:{disabled:!1},layers:{disabled:!1},outlines:{disabled:!1},annotation:{disabled:!1},signature:{disabled:!1},search:{disabled:!1}},headers:[{type:"toggleElementButton",img:"icon-header-sidebar-line",element:"leftPanel",dataElement:"leftPanelButton",title:"Left Panel",class:"toggle-button"},{type:"divider",hidden:["small-mobile"]},{type:"pageDisplayButton",dataElement:"pageDisplayButton",element:"pageDisplayButton",title:"Page Display"},{type:"fullScreenButton",dataElement:"fullScreenButton",element:"fullScreenButton",title:"Full Screen"},{type:"handToolButton",dataElement:"handToolButton",element:"handToolButton",title:"Pan Tool"},{type:"cropPageButton",dataElement:"cropPageButton",element:"cropPageButton"},{type:"divider",hidden:["small-mobile"]},{type:"zoomOverlay",dataElement:"zoomOverlayButton",element:"zoomOverlay",hiddenOnMobileDevice:!0},{type:"divider",hidden:["small-mobile"]},{type:"themeMode",dataElement:"themeMode",element:"themeMode"},{type:"stickyNoteButton",dataElement:"stickyNoteButton",element:"stickyNoteButton"},{type:"compareButton",dataElement:"compareButton",element:"compareButton",hidden:!0},{type:"saveButton",dataElement:"saveButton",element:"saveButton",hidden:!0},{type:"selectTools",dataElement:"selectTools"},{type:"openFileButton",dataElement:"openFileButton",element:"openFileButton",title:"Open File"}],rightHeaders:[{type:"openFileButton",dataElement:"openFileButton",element:"openFileButton",title:"Open File"},{type:"searchButton",dataElement:"searchButton",element:"searchButton",title:"Search"},{type:"toggleRightPanelButton",img:"icon-header-sidebar-line",element:"rightPanel",dataElement:"rightPanelButton",title:"Right Panel",id:"propertyPanelButton"},{type:"pageModeButton",dataElement:"pageModeButton",element:"pageModeButton"},{type:"downloadButton",dataElement:"downloadButton",element:"downloadButton",title:"Download"},{type:"flattenButton",dataElement:"flattenButton",element:"flattenButton",title:"Save as Flattened PDF"},{type:"printButton",dataElement:"printButton",element:"printButton",title:"Print"},{type:"themeMode",dataElement:"themeMode",element:"themeMode"},{type:"settingButton",dataElement:"settingButton",element:"settingButton",title:"Setting"}],toolMode:"view",tools:[{element:"view",dataElement:"toolMenu-View"},{element:"annotation",dataElement:"toolMenu-Annotation"},{element:"form",dataElement:"toolMenu-Form"},{element:"measurement",dataElement:"toolMenu-Measurement"},{element:"sign",dataElement:"toolMenu-Sign"},{element:"security",dataElement:"toolMenu-Security"},{element:"compare",dataElement:"toolMenu-Compare"},{element:"editor",dataElement:"toolMenu-Editor"},{element:"document",dataElement:"toolMenu-Document"},{element:"separation",dataElement:"toolMenu-Separation"}],toolItems:{annotation:[{type:"note",dataElement:"note"},{type:"ink",dataElement:"ink"},{type:"highlight",dataElement:"highlight"},{type:"underline",dataElement:"underline"},{type:"strikeout",dataElement:"strikeout"},{type:"squiggly",dataElement:"squiggly"},{type:"circle",dataElement:"circle"},{type:"square",dataElement:"square"},{type:"arrow",dataElement:"arrow"},{type:"line",dataElement:"line"},{type:"freetext",dataElement:"freetext"},{type:"stamp",dataElement:"stamp"},{type:"image",dataElement:"image"},{type:"link",dataElement:"link"}],form:[{type:"textFieldButton",dataElement:"textFieldButton",element:"textFieldButton",title:"Form Field"},{type:"checkBoxButton",dataElement:"checkBoxButton",element:"checkBoxButton",title:"Check Box"},{type:"radioButton",dataElement:"radioButton",element:"radioButton",title:"Radio Button"},{type:"listBox",dataElement:"listBox",element:"listBox",title:"List Box"},{type:"comboBox",dataElement:"comboBox",element:"comboBox",title:"Combo Box"},{type:"pushButton",dataElement:"pushButton",element:"pushButton",title:"Push Button"}],security:[{type:"securityToolbar",dataElement:"securityToolbar",element:"securityToolbar",title:"Security"},{type:"watermarkSelect",dataElement:"watermarkSelect",element:"watermarkSelect",title:"Watermark"},{type:"redaction",dataElement:"redaction"},{type:"remove",dataElement:"remove"}],compare:[{type:"comparedToolbar"}],editor:[{type:"addText",dataElement:"addText",element:"addText",title:"header.addText"},{type:"addImage",dataElement:"addImage",element:"addImage",title:"header.addImage"},{type:"divider"},{type:"undo",dataElement:"undo",element:"undo",title:"header.undo"},{type:"redo",dataElement:"redo",element:"redo",title:"header.redo"}],sign:[{type:"signatureToolBar"}],measurement:[{type:"line",dataElement:"measureLine",element:"measureLine",title:"header.measureLine"},{type:"rectangle",dataElement:"measureRectangle",element:"measureRectangle",title:"header.measureRectangle"}]},customFonts:[{fontFamily:"Helvetica",fontName:"Helvetica"},{fontFamily:"Courier",fontName:"Courier"},{fontFamily:"Times-Roman",fontName:"Times-Roman"}],signatureDialogTabs:["trackpad","keyboard","image"],signatureDialogProperties:{keyboard:{colors:[{type:"color",value:"rgb(0, 0, 0)"},{type:"color",value:"rgb(255, 0, 0)"},{type:"color",value:"rgb(45, 119, 250)"}],enableCustomColor:!0,fonts:["Arial","Courier New","Times New Roman"]},trackpad:{enableLineWidth:!0,lineWidth:5,colors:[{type:"color",value:"rgb(0, 0, 0)"},{type:"color",value:"rgb(255, 0, 0)"},{type:"color",value:"rgb(45, 119, 250)"}],enableCustomColor:!0}},downloading:!1,downloadError:"",popoverChanged:!1,compareStatus:"",upload:!0,uploadLoading:!1,compareMode:"content",contentEditorType:"text",signatureVerify:0,selectedSignatureField:null,disableSignatureTool:!1,textPopup:[{type:"copy",dataElement:"copyTextButton"},{type:"highlight",dataElement:"highlightButton"},{type:"underline",dataElement:"underlineButton"},{type:"strikeout",dataElement:"strikeoutButton"},{type:"squiggly",dataElement:"squigglyButton"}],cropPagePopup:[{type:"cropPage",dataElement:"cropDownloadButton"},{type:"close",dataElement:"exitCroppingButton"}],contentEditorPopup:[{type:"copy",dataElement:"copyTextButton"},{type:"delete",dataElement:"deleteButton"},{type:"property",dataElement:"propertyButton"}],measurementPopup:[{type:"reply",dataElement:"replyButton"},{type:"property",dataElement:"measurePropertyButton"},{type:"settings",dataElement:"measureSettingsButton"},{type:"delete",dataElement:"deleteMeasurementButton"}],isDisabledHeader:!1,rightPanelButtonDisabled:!0,redactionConfirmDialog:-1,commonLoading:!1,customLoading:null}),getters:{getLanguage(){return this.language},getFullMode(){return this.fullMode},getCurrentPage(){return this.currentPage},getThemeMode(){return this.themeMode},getPageMode(){return this.pageMode},getScrollMode(){return this.scrollMode},getWebviewerMode(){return this.webviewerMode},getActiveHeaderItems(){return this.headers},getActiveRightHeaderItems(){return this.rightHeaders},isElementOpen:e=>n=>e.activeElements[n],getActiveElementTab:e=>n=>e.activeElementsTab[n],getScale(){return Math.round(this.scale*100)},getOldScale(){return Math.round(this.oldScale*100)},getNewScale(){return Math.round(this.newScale*100)},getActiveStickNote(){return this.activeStickNote},getActiveMeasure(){return this.activeActiveMeasure},getActiveHand(){return this.activeHand},getSearchStatus(){return this.searchStatus},getToolMode(){return this.toolMode},getTools(){return this.tools},getToolItems(){return this.toolItems},getDownloading(){return this.downloading},getDownloadError(){return this.downloadError},getPopoverChanged(){return this.popoverChanged},getCompareStatus(){return this.compareStatus},getUpload(){return this.upload},getUploadLoading(){return this.uploadLoading},getCompareMode(){return this.compareMode},getLicense(){return this.license},getVerified(){return this.verified},getContentEditorType(){return this.contentEditorType},getSignatureVerify(){return this.signatureVerify},getSelectedSignatureField(){return this.selectedSignatureField},getDigitalSignaturePreview(){return this.digitalSignature.preview},getCertSubject(){return this.digitalSignature.certSubject},getPopupItems(e){return n=>e[n]},getDisabledHeader(){return this.isDisabledHeader},getDisabledElementsObj:e=>e.disabledElements,getDisabledElements:e=>n=>{var r;return(r=e.disabledElements[n])==null?void 0:r.disabled},getRightPanelButtonDisabled(){return this.rightPanelButtonDisabled},getCustomFonts(){return this.customFonts},getRedactionConfirmDialog(){return this.redactionConfirmDialog},getCommonLoading(){return this.commonLoading},getSignatureDialogTabs(){return this.signatureDialogTabs},getSignatureDialogProperties(){return this.signatureDialogProperties},getCustomLoading(){return this.customLoading},isAnnotationExport(){return this.annotation.isAnnotationExport},isAnnotationImport(){return this.annotation.isAnnotationImport},getDisableSignatureTool(){return this.disableSignatureTool}},actions:{resetSetting(){this.fullMode=!1,this.currentPage=0,this.scale="",this.themeMode="Light",this.pageMode=0,this.scrollMode="Vertical",this.activeTab=0,this.searchStatus=!1,this.activeElements={leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1,linkPanel:!1,compareSettingDialog:!1,settingsDialog:!1,contentEditorPreventDialog:!1,docEditorPreventDialog:!1,setPasswordModal:!1,signCreatePanel:!1,digitalSignCreatePanel:!1,downloadSettingDialog:!1,printSettingDialog:!1,contentEditorPanel:!1,insertPageSettingDialog:!1,deletePageDialog:!1,extractPageSettingDialog:!1,movePageSettingDialog:!1,selectSignTypeDialog:!1,signatureAppearanceDialog:!1,signatureDetailsDialog:!1,certificateViewerDialog:!1,deleteSignatureDialog:!1,addDigitalFileDialog:!1,colorSeparationPanel:!1,redactionTipDialog:!1,measurementSettingsDialog:!1,measurePanel:!1},this.activeElementsTab={leftPanel:"THUMBS",rightPanel:"GENERAL",stampPanel:"STANDARD",signPanel:"trackpad"},this.signatureVerify=0},resetPanels(){this.activeElements.leftPanel&&this.closeElement("leftPanel"),this.searchStatus=!1,this.activeElements={leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1}},setLanguage(e){this.language=e},setLicense(e){this.license=e},setVerified(e){this.verified=e},setFullMode(e){return this.fullMode=e},setCurrentPage(e){this.currentPage=e},setThemeMode(e){this.themeMode=e},setPageMode(e){this.pageMode=e},setScrollMode(e){this.scrollMode=e},setWebviewerMode(e){this.webviewerMode=e},setCurrentScale(e){this.scale=e},setOldCurrentScale(e){this.oldScale=e},setNewCurrentScale(e){this.newScale=e},openElement(e){this.activeElements[e]||(this.activeElements[e]=!0,e==="leftPanel"&&core.toggleSidebar())},closeElement(e){!this.activeElements[e]||(this.activeElements[e]=!1,e==="leftPanel"&&core.toggleSidebar()&&setTimeout(()=>core.webViewerPageMode("none"),0))},toggleElement(e){this.activeElements[e]?this.closeElement(e):this.openElement(e)},setActiveElementTab(e,n){this.activeElementsTab[e]=n;const r={THUMBS:"thumbs",OUTLINE:"outline"};r[n]&&setTimeout(()=>core.webViewerPageMode(r[n]),0)},toggleActiveStickNote(){this.activeStickNote=!this.activeStickNote},closeActiveStickNote(){this.activeStickNote=!1},toggleActiveMeasure(){this.activeActiveMeasure=!this.activeActiveMeasure},closeActiveMeasure(){this.activeActiveMeasure=!1},toggleActiveHand(e){this.activeHand=e},closeActiveHand(){this.activeHand=!1},setSearchStatus(e){this.searchStatus=e},setActiveToolMode(e){if(isMobileDevice&&e==="separation"){this.activeElements.unsupportedMobileDialog=!0;return}this.toolMode=e,this.activeElements.stampPanel=!1,this.activeElements.linkPanel=!1,this.activeElements.contentEditorPanel=!1,this.activeElements.measurePanel=!1,core.setToolMode(e)},setDownloading(e){this.downloading=e},setDownloadError(e){this.downloadError=e},setActiveSignWay(e){this.activeElementsTab.signPanel=e},setPopoverChanged(e){this.popoverChanged=e},setCompareStatus(e){this.compareStatus=e},setUpload(e){this.upload=e},setUploadLoading(e){this.uploadLoading=e},setCompareMode(e){this.compareMode=e},setContentEditorType(e){this.contentEditorType=e},setSignatureVerify(e){this.signatureVerify=e},setSelectedSignatureField(e){this.selectedSignatureField=e},setDigitalSignaturePreview(e){this.digitalSignature.preview=e},setCertSubject(e){this.digitalSignature.certSubject=e},dispatch(e){return this[e]},getState(e){return e?this.$state[e]:this.$state},setDisableHeader(e){this.isDisabledHeader=e},setDisabledElements(e){const n=this.disabledElements;e in n?n[e].disabled=!0:n[e]={disabled:!0}},setEnabledElements(e){const n=this.disabledElements;e in n?n[e].disabled=!1:n[e]={disabled:!1}},setRightPanelButtonDisabled(e){this.rightPanelButtonDisabled=e},setCustomFonts(e){typeof e=="string"&&(e=[{fontName:e,fontFamily:e}]);for(let n=0;n<e.length;n++){let r=e[n];typeof r=="string"&&(r={fontFamily:r,fontName:r}),this.customFonts.some(o=>o.fontName===r.fontName&&o.fontFamily===r.fontFamily)||this.customFonts.push(r)}},setRedactionConfirmDialog(e){this.redactionConfirmDialog=e},setCommonLoading(e){this.commonLoading=Boolean(e)},setSignatureDialogTabs(e){this.signatureDialogTabs=e},setSignatureDialogProperties(e,n){const r={...this.signatureDialogProperties[e],...n};this.signatureDialogProperties[e]=r},setCustomLoading(e){this.customLoading=e},setAnnotationExport(e){this.annotation.isAnnotationExport=e},setAnnotationImport(e){this.annotation.isAnnotationImport=e},setDisableSignatureTool(e){this.disableSignatureTool=e}}}),type=["ink","line","square","circle","freetext","text","highlight","underline","squiggly","strikeout","image","stamp","polygon"],useDocumentStore=defineStore({id:"document",state:()=>({totalPages:0,loadingProgress:0,annotationsCount:0,info:null,optionUrl:null,markupTool:"highlight",highlight:{color:"#FFEC66"},underline:{color:"#FF0000"},squiggly:{color:"#FF0000"},strikeout:{color:"#FF0000"},shapeTool:"square",square:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},circle:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},arrow:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},line:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},ink:{color:"#FF0000",opacity:"0.8",stroke:"2pt"},freetext:{color:"#000000"},text:{color:"#FF0000"},activeTool:"",annotations:null,textfield:{color:"#DDE9FF"},checkbox:{color:"#DDE9FF",borderColor:"#43474D"},radiobutton:{color:"#DDE9FF",borderColor:"#43474D"},listbox:{color:"#DDE9FF",borderColor:"#43474D"},combobox:{color:"#DDE9FF",borderColor:"#43474D"},pushbutton:{color:"#DDE9FF",borderColor:"#43474D"},link:{color:"#DDE9FF"},signatureFields:{color:"#DDE9FF"},redaction:{color:"#000000"},remove:{color:"#FF0000"},propertyPanel:{fieldName:"",isHidden:"0",title:"",backgroundColor:"#DDE9FF",color:"#000000",fontName:"Helvetica",fontStyle:"normal",fontSize:"14",textAlignment:"0",contents:"",isMultiLine:!1,project:"",projectList:"",checkStyle:0,isChecked:"",actionType:"0",text:"OK",url:"",destPage:"",items:[],item:null,deleteItemIndex:null,moveOption:null},compareFiles:{oldFile:null,oldFilePassword:"",newFile:null,newFilePassword:""},compareSettings:{oldFileColor:"#FBBDBF",newFileColor:"#93B9FD"},currentPdfData:null,fileHasPwd:!1,pwd:null,compareResult:null,outlines:[],activeOutlineId:null,searchResults:[],docEditorOperationList:[],signatures:[],selectedSignature:null,trustedCertificateLists:[],author:"ComPDFKit",annotator:"Guest",highlightLink:!0,highlightForm:!0,redactionPrompted:!1,autoJumpNextSign:!1,disableDigitalSignature:!1,disableElectronicSignature:!1,layers:[],selectedLayer:null,firstEnterRedactionTool:"",measure:{scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:1}}),getters:{getTotalPages(){return this.totalPages},getLoadingProgress(){return this.loadingProgress},getAnnotationsCount(){return this.annotationsCount+" annotation"+(this.annotationsCount>1?"s":"")},getMeasure(){return this.measure},getPrecision(){return this.measure.precision===1?.1:.01},getInfo(){return this.info},getOptionUrl(){return this.optionUrl},getMarkupToolState(){return this.markupTool},getLineType(){return this.line.type},getActiveToolColor(){if(this.activeTool)return this[this.activeTool].color},getActiveTool(){return this.activeTool},getShapeToolState(){return this.shapeTool},getAllAnnotations(){const e={annotations:{},annotationsCount:0},n=this.annotations;for(const r in n){const o=n[r],s=o.length;if(s)for(let u=0;u<s;u++){const d=o[u];if(!!o[u]){if(d&&d.type==="line"&&(d.tail||d.head)&&!(d.tail==="None"&&d.head==="None")){if(d.head&&d.head!=="OpenArrow"&&d.head!=="None"&&d.head!=="Unknown"||d.tail&&d.tail!=="OpenArrow"&&d.tail!=="None"&&d.tail!=="Unknown")continue}type.includes(d.type)&&!d.mainName&&(e.annotations[r]||(e.annotations[r]={pageAnnotationsCount:0,annotations:[]}),e.annotations[r].pageAnnotationsCount++,e.annotationsCount++,e.annotations[r].annotations.push(d))}}}return e},getAnnotations(e){return this.annotations&&this.annotations[e]},getCompareFile(e){return n=>e.compareFiles[n]},getCompareFiles(){return this.compareFiles},getCompareSetting(e){return n=>e.compareSettings[n]},getCurrentPdfData(){return this.currentPdfData},getFilehasPwd(){return this.fileHasPwd},getPassword(){return this.pwd},getCompareResult(){return this.compareResult},getOutlines(){return this.outlines},getActiveOutlineId(){return this.activeOutlineId},getSearchResults(){return this.searchResults},getDocEditorOperationList(){return this.docEditorOperationList},getSignatures(){return this.signatures},getSelectedSignature(){return this.selectedSignature},getPkcs12(){return this.pkcs12},getTrustedCertificateLists(){return this.trustedCertificateLists},getAuthor(){return this.author},getAnnotator(){return this.annotator},getHighlightLink(){return this.highlightLink},getHighlightForm(){return this.highlightForm},getRedactionPrompted(){return this.redactionPrompted},getAutoJumpNextSign(){return this.autoJumpNextSign},getDisableDigitalSignature(){return this.disableDigitalSignature},getDisableElectronicSignature(){return this.disableElectronicSignature},getLayers(){return this.layers},getSelectedLayer(){return this.selectedLayer},getFirstEnterRedactionTool(){return this.firstEnterRedactionTool}},actions:{resetSetting(){this.totalPages=0,this.loadingProgress=0,this.annotationsCount=0,this.annotations=null,this.outlines=[],this.activeOutlineId=null,this.searchResults=[],this.docEditorOperationList=[],this.signatures=[],this.layers=[]},setTotalPages(e){this.totalPages=e},setLoadingProgress(e){this.loadingProgress=e},setAnnotationsCount(e){this.annotationsCount=e},setOptionUrl(e){this.optionUrl=e},setToken(e){this.info=e},setDistance(e){this.measure.distance=Math.round(e*10)/10},setMarkupToolState(e){this.markupTool=e},setMarkupToolColor(e){this[this.markupTool]=e},setShapeToolState(e){this.shapeTool=e},setLineType(e){this.line.type=e},setLineColor(e){this.line.color=e},setActiveTool(e){this.activeTool=e},setActiveToolColor(e){this.activeTool&&(this[this.activeTool].color=e,core.setTool({tool:this.activeTool,color:e}))},setToolState(e){var n;this.activeTool===e||!e?(this.activeTool="",core.setTool({tool:"",color:""})):(this.activeTool=e,core.setTool({tool:e,color:((n=this[e])==null?void 0:n.color)||""}),(this.activeTool==="textfield"||this.activeTool==="checkbox"||this.activeTool==="radiobutton"||this.activeTool==="pushbutton")&&core.setInitProperty())},initAnnotations(e){this.annotations=null,this.annotations=e},setAnnotations(e,n){const r=this.annotations;if(n==="add")r[e[page]]||(r[page]=[]),r[page].push(e);else{const o=r[e[page]],s=o.findIndex(u=>u.index===e.index);n==="delete"?o[s].isDelete=!0:o[s]={...o[s],...e}}},setPropertyPanel(e){let n={};for(const r in e)for(const o in this.propertyPanel)r===o&&(n[o]=e[r]);core.setPropertyPanel(n)},setCompareFiles(e,n){this.compareFiles[e]=n},initCompareFiles(){this.compareFiles.oldFile=null,this.compareFiles.oldFilePassword="",this.compareFiles.newFile=null,this.compareFiles.newFilePassword=""},setCompareSetting(e,n){this.compareSettings[e]=n},initCompareSetting(){this.compareSettings={oldFileColor:"#FBBDBF",newFileColor:"#93B9FD"}},setCurrentPdfData(e,n){e&&n?(this.currentPdfData||(this.currentPdfData={}),this.currentPdfData.pdf=e,this.currentPdfData.options=n):e?this.currentPdfData.pdf=e:this.currentPdfData=null},setFileHasPwd(e){this.fileHasPwd=e},setPassword(e){this.pwd=e},setCompareResult(e){this.compareResult=e},setOutline(e){this.outlines=e},setActiveOutlineId(e){this.activeOutlineId=e},setSearchResults(e){this.searchResults=e},setDocEditorOperationList(e){e==="reset"?this.docEditorOperationList=[]:e&&this.docEditorOperationList.push(e)},setSelectedSignature(e){this.selectedSignature=e},initSignatures(e){this.signatures=e.filter(n=>n.signerList.length>0)},setPkcs12(e){this.pkcs12=e},setTrustedCertificateLists(e){this.trustedCertificateLists.push(e)},setAuthor(e){this.author=e},setAnnotator(e){this.annotator=e,core.setAnnotator(e)},setHighlightLink(e){this.highlightLink=e,core.setHighlightLink(e)},setHighlightForm(e){this.highlightForm=e,core.setHighlightForm(e)},dispatch(e){return this[e]},getState(e){return e?this.$state[e]:this.$state},setRedactionPrompted(e){this.redactionPrompted=e},setAutoJumpNextSign(e){this.autoJumpNextSign=e,core.setAutoJumpNextSign(e)},setDisableDigitalSignature(e){this.disableDigitalSignature=e},setDisableElectronicSignature(e){this.disableElectronicSignature=e},setLayers(e){this.layers=e},setSelectedLayer(e){this.selectedLayer=e},setFirstEnterRedactionTool(e){this.firstEnterRedactionTool=e}}}),MessageError=""+new URL("icon-message-error.c91684dd.svg",import.meta.url).href,uploadFile=e=>new Promise((n,r)=>{const o=document.createElement("input");o.type="file",o.style.display="none",o.accept=e,o.onchange=()=>{o.files&&(n(o.files[0]),o.remove())},document.body.appendChild(o),o.click()}),hslToRgb=(e,n,r)=>{let o,s,u;if(n===0)o=s=u=r;else{const d=function(y,v,_){return _<0&&(_+=1),_>1&&(_-=1),_<.16666666666666666?y+(v-y)*6*_:_<.5?v:_<.6666666666666666?y+(v-y)*(.6666666666666666-_)*6:y},f=r<.5?r*(1+n):r+n-r*n,g=2*r-f;o=Math.round(d(g,f,e+1/3)*255),s=Math.round(d(g,f,e)*255),u=Math.round(d(g,f,e-1/3)*255)}return{R:o,G:s,B:u}},convertColor=e=>{if(!e)return null;if(e.startsWith("#")){const n=e.slice(1).match(/.{2}/g);if(n)return{R:parseInt(n[0],16),G:parseInt(n[1],16),B:parseInt(n[2],16)}}if(e.startsWith("rgb")){const n=e.match(/\d+/g);if(n&&n.length===3)return{R:parseInt(n[0]),G:parseInt(n[1]),B:parseInt(n[2])}}if(e.startsWith("hsl")){const n=e.match(/(\d+),\s*(\d+%),\s*(\d+%)/);if(n){const[r,o,s]=[parseInt(n[1]),parseInt(n[2])/100,parseInt(n[3])/100],{R:u,G:d,B:f}=hslToRgb(r/360,o,s);return{R:u,G:d,B:f}}}},areColorsSimilar=(e,n,r=10)=>{const o=convertColor(e),s=convertColor(n);if(!o||!s)return!1;const u=Math.abs(o.R-s.R),d=Math.abs(o.G-s.G),f=Math.abs(o.B-s.B);return u<=r&&d<=r&&f<=r},SignCreatePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$3o={class:"signatures-popup"},_hoisted_2$_={class:"sign-popup-header"},_hoisted_3$K=["onClick"],_hoisted_4$D=["width","height"],_hoisted_5$w={class:"keyboard-paint"},_hoisted_6$s=["placeholder"],_hoisted_7$n={class:"image-paint"},_hoisted_8$k={key:0,class:"property-container"},_hoisted_9$f={class:"width-tool"},_hoisted_10$d={key:0},_hoisted_11$d={class:"font-tool"},_hoisted_12$d={key:0},_hoisted_13$d=["value"],_hoisted_14$d={class:"color-tool"},_hoisted_15$d={key:0},_hoisted_16$d={class:"colors-container"},_hoisted_17$a=["onClick"],_hoisted_18$a={key:0,class:"color-picker"},_hoisted_19$a={class:"buttons-container"},_hoisted_20$a={class:"right-btns"},_sfc_main$3Q={__name:"SignCreatePanel",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=useDocumentStore(),s=computed(()=>r.isElementOpen("signCreatePanel")),u=computed(()=>r.getActiveElementTab("signPanel")),d=computed(()=>r.getToolMode),f=computed(()=>r.getSignatureDialogTabs),g=computed(()=>r.getSignatureDialogProperties),m=computed(()=>o.getActiveTool),y=computed(()=>o.getDisableDigitalSignature),v=computed(()=>o.getDisableElectronicSignature),_=ref(""),w=ref(""),x=ref(g.value.trackpad.lineWidth||5),k=ref(g.value[u.value].colors[0].value||"#000000"),S=ref(g.value.keyboard.fonts[0]||"Courier New"),M=ref(),E=ref(578),P=ref(270),T=ref("rgb(0, 0, 0)");watch(()=>g.value.keyboard.fonts,(O,U)=>{S.value=O[0]||"Courier New"}),watch(()=>d.value,(O,U)=>{if(!(U==="sign"&&O==="view")&&O!==U){const W=document.getElementById("sign-image-save");W&&W.remove()}}),watch(()=>x.value,(O,U)=>{const W=/^\d+$/;O!==""&&(O>10||O<=0||!W.test(O))&&(x.value=U),u.value==="trackpad"&&core.handleSign({flag:"update",param:{width:x.value,color:k.value}})}),watch(()=>k.value,(O,U)=>{if(core.handleSign({flag:"update",param:{width:x.value,color:k.value}}),u.value==="keyboard"){T.value=k.value;let W=document.querySelector(".keyboard-paint input");W&&(W.style.color=k.value)}}),watch(()=>s.value,(O,U)=>{O&&(isMobile&&nextTick(()=>{const{clientWidth:W,clientHeight:H}=M.value;W&&E.value!==W&&(E.value=W),H&&P.value!==H&&(P.value=H)}),r.setActiveSignWay("keyboard"),_.value="",core.handleSign({flag:"create"}))});const D=O=>{u.value!==O&&(r.setActiveSignWay(O),I(),N())},F=O=>{r.toggleElement("signCreatePanel"),core.handleSign({flag:"reset"}),u.value!=="trackpad"&&I(),N(),document.body.style.overflow="",!m.value&&O==="cancel"&&y.value&&v.value&&r.openElement("selectSignTypeDialog")},I=()=>{if(u.value==="keyboard"&&(_.value=""),u.value==="image"||m.value==="image"){w.value="";let O=document.querySelector(".image-paint"),U=document.querySelector(".image-paint input"),W=document.querySelector(".image-paint a"),H=document.querySelector(".image-paint img");O&&(H&&(O.removeChild(H),U.value=""),W&&(W.style.display="block"))}u.value==="trackpad"&&core.handleSign({flag:"clear"})},N=()=>{const O=g.value.trackpad.lineWidth||5,U=["trackpad","keyboard"].includes(u.value)&&g.value[u.value].colors[0].value||"#000000",W=g.value.keyboard.fonts[0]||"Courier New";k.value!==U&&(k.value=U),S.value!==W&&(S.value=W),x.value!==O&&(x.value=O,core.handleSign({flag:"update",param:{width:x.value,color:k.value}}))},q=O=>{let U=O.target.files[0];if(U.size>1024*1024){window.$message.error(n.$t("signatures.uploadError"),{duration:5e3,icon:()=>h$1("img",{src:MessageError})}),O.target.value="";return}d.value==="annotation"&&(o.setToolState("image"),core.handleCreateStatus({bool:!0,fileData:U}));const W=new FileReader;W.readAsDataURL(U),W.onload=function(){w.value=W.result;let H=document.querySelector(".image-paint"),X=document.querySelector(".image-paint a");if(H){let Q=document.createElement("img");Q.setAttribute("src",w.value),Q.style.maxHeight=220+"px",Q.style.maxWidth=568+"px",X.style.display="none",H.append(Q)}if(m.value==="image"){const Q=new Image;Q.onload=function(){Z()},Q.src=w.value}}},Y=O=>{d.value==="annotation"&&o.setToolState("image")},Z=()=>{let O="",U=0,W=0;const H=r.getSelectedSignatureField;if((u.value==="image"&&w.value!==""||m.value==="image"&&w.value!=="")&&(O=w.value),u.value==="keyboard"&&_.value!==""){let X=document.createElement("canvas"),Q=document.createElement("canvas"),fe=X.getContext("2d");fe.font="46px "+S.value;let Se=fe.measureText(_.value).width;Q.width=Se,Q.height=60,fe=Q.getContext("2d"),fe.font="46px "+S.value,fe.fillStyle=k.value,fe.fillText(_.value,0,50),U=Se,W=60,O=Q.toDataURL()}if(O){let X=document.querySelector(".content");if(X&&m.value==="image"){let Q=document.getElementById("sign-image-save");Q||(Q=document.createElement("img"),Q.style.position="absolute",Q.style.zIndex=10,Q.style.pointerEvents="none",Q.style.maxHeight="220px",Q.style.maxWidth="568px",Q.style.border="2px solid blue",Q.style.cursor="crosshair",Q.id="sign-image-save"),Q.setAttribute("src",O),Q.style.left="50%",Q.style.top="50%",Q.style.display="hidden",X.append(Q),Q.offsetWidth>0&&Q.offsetHeight>0&&(U=Q.offsetWidth,W=Q.offsetHeight);let fe=Math.min(parseInt(U/2),568/2),Se=Math.min(parseInt(W/2),220/2);Q.style.left="calc(50% -"+fe+")",Q.style.top="calc(50% -"+Se+")",Q.style.display="block",X.onmousemove=function(Pe){Q.style.left=Pe.clientX-fe+"px",Q.style.top=Pe.clientY-Se+"px"}}else core.handleSign({flag:"save",param:{imageBase64:O,annotation:toRaw(H)}})}u.value==="trackpad"&&core.handleSign({flag:"save",param:{width:x.value,color:k.value,annotation:toRaw(H)}}),m.value==="image"?I():F()},j=O=>{O.target.value||(x.value=1)},ne=O=>{k.value=O},le=O=>{areColorsSimilar(O,k.value)||ne(O)},J=O=>{T.value=O};return(O,U)=>{const W=__unplugin_components_1$e;return openBlock(),createElementBlock("div",_hoisted_1$3o,[createBaseVNode("div",_hoisted_2$_,[(openBlock(!0),createElementBlock(Fragment,null,renderList(f.value,(H,X)=>(openBlock(),createElementBlock("div",{key:X,onClick:Q=>D(H),class:normalizeClass({active:u.value===H})},toDisplayString$1(O.$t("signatures."+H)),11,_hoisted_3$K))),128))]),createBaseVNode("div",{class:normalizeClass({mobile:unref(isMobile)})},[createBaseVNode("div",{class:"paint-container",ref_key:"paintContainer",ref:M},[withDirectives(createBaseVNode("canvas",{id:"electronicTrackpadCanvas",width:E.value,height:P.value},null,8,_hoisted_4$D),[[vShow,u.value==="trackpad"]]),withDirectives(createBaseVNode("div",_hoisted_5$w,[withDirectives(createBaseVNode("input",{type:"text",placeholder:O.$t("signatures.signHere"),"onUpdate:modelValue":U[0]||(U[0]=H=>_.value=H),name:"signature",style:normalizeStyle({fontFamily:S.value})},null,12,_hoisted_6$s),[[vModelText,_.value]])],512),[[vShow,u.value==="keyboard"]]),withDirectives(createBaseVNode("div",_hoisted_7$n,[createBaseVNode("a",null,[createTextVNode(toDisplayString$1(O.$t("signatures.selectFile")),1),createBaseVNode("input",{type:"file",id:"signImageInput",onChange:q,accept:".png, .jpg, .jpeg",onClick:Y,name:"signature"},null,32)])],512),[[vShow,u.value==="image"]])],512),["trackpad","keyboard"].includes(u.value)?(openBlock(),createElementBlock("div",_hoisted_8$k,[withDirectives(createBaseVNode("div",_hoisted_9$f,[unref(isMobile)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_10$d,toDisplayString$1(O.$t("signatures.lineWidth")),1)),createVNode(unref(NSlider),{value:x.value,"onUpdate:value":U[1]||(U[1]=H=>x.value=H),step:1,max:10,min:1,class:"width-slider"},{thumb:withCtx(()=>[createVNode(W)]),_:1},8,["value"]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":U[2]||(U[2]=H=>x.value=H),type:"text",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:j,name:"signature"},null,544),[[vModelText,x.value]])],512),[[vShow,u.value==="trackpad"&&g.value.trackpad.enableLineWidth]]),withDirectives(createBaseVNode("div",_hoisted_11$d,[unref(isMobile)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_12$d,toDisplayString$1(O.$t("font")),1)),withDirectives(createBaseVNode("select",{id:"fontFamily","onUpdate:modelValue":U[3]||(U[3]=H=>S.value=H)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value.keyboard.fonts,(H,X)=>(openBlock(),createElementBlock("option",{value:H,key:X},toDisplayString$1(H),9,_hoisted_13$d))),128))],512),[[vModelSelect,S.value]])],512),[[vShow,u.value==="keyboard"]]),withDirectives(createBaseVNode("div",_hoisted_14$d,[unref(isMobile)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_15$d,toDisplayString$1(O.$t("color")),1)),createBaseVNode("div",_hoisted_16$d,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value[u.value].colors,(H,X)=>(openBlock(),createElementBlock("span",{class:"cell-container",key:X},[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(k.value,H.value)}]),onClick:Q=>ne(H.value)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${H.value}`)},null,4)],10,_hoisted_17$a)]))),128)),g.value[u.value].enableCustomColor?(openBlock(),createElementBlock("div",_hoisted_18$a,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:T.value})},null,4),createVNode(unref(NColorPicker),{to:".signatures-popup",onComplete:le,"onUpdate:value":J,value:T.value,"show-alpha":!1},{label:withCtx(()=>U[5]||(U[5]=[createBaseVNode("img",{src:_imports_0$1,alt:"colorPicker"},null,-1)])),_:1},8,["value"])])):createCommentVNode("",!0)])],512),[[vShow,u.value==="trackpad"||u.value==="keyboard"]])])):createCommentVNode("",!0)],2),createBaseVNode("div",_hoisted_19$a,[createBaseVNode("div",{class:normalizeClass(["clear",{button:!unref(isMobile)}]),onClick:I},toDisplayString$1(O.$t("signatures.clear")),3),createBaseVNode("div",_hoisted_20$a,[createBaseVNode("div",{class:"button",onClick:U[4]||(U[4]=H=>F("cancel"))},toDisplayString$1(O.$t("cancel")),1),createBaseVNode("div",{class:"button blue",onClick:Z},toDisplayString$1(O.$t("signatures.save")),1)])])])}}},_sfc_main$3P={},_hoisted_1$3n={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3n,n[0]||(n[0]=[createBaseVNode("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:"#FF5050",stroke:"#FF5050","stroke-linejoin":"round"},null,-1),createBaseVNode("path",{d:"M30 18L18 30",stroke:"white","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),createBaseVNode("path",{d:"M18 18L30 30",stroke:"white","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_15$1=_export_sfc(_sfc_main$3P,[["render",_sfc_render$2f]]),Button_vue_vue_type_style_index_0_lang="",_hoisted_1$3m=["disabled","title"],_sfc_main$3O={__name:"Button",props:{title:String,isActive:Boolean,disabled:Boolean||void 0,className:String,mediaQueryClassName:String,img:String,onClick:Function},setup(e){var o;const n=s=>{s==null||s.stopPropagation(),s==null||s.preventDefault()},r=(o=e.img)==null?void 0:o.trim().startsWith("data:");return e.img&&!r&&(!e.img.includes(".")||e.img.startsWith("<svg")),(s,u)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["button",{active:e.isActive,disabled:e.disabled,[e.mediaQueryClassName]:e.mediaQueryClassName,[e.className]:e.className}]),onClick:u[0]||(u[0]=d=>e.disabled||!e.onClick?n():e.onClick(d)),onDblclick:u[1]||(u[1]=d=>e.disabled?n:s.onDoubleClick),onMouseup:u[2]||(u[2]=d=>e.disabled?n:s.onDoubleClick),disabled:e.disabled,title:e.title},[renderSlot(s.$slots,"default")],42,_hoisted_1$3m))}},_sfc_main$3N={},_hoisted_1$3l={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3l,n[0]||(n[0]=[createBaseVNode("path",{d:"M13 1L1 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),createBaseVNode("path",{d:"M1 1L13 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_13$3=_export_sfc(_sfc_main$3N,[["render",_sfc_render$2e]]),_sfc_main$3M={},_hoisted_1$3k={width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3k,n[0]||(n[0]=[createStaticVNode('<circle cx="47.0455" cy="16.3636" r="2.04545" fill="white"></circle><circle cx="53.1819" cy="32.0454" r="2.72727" fill="white"></circle><circle cx="47.0453" cy="47.0456" r="3.40909" fill="white"></circle><circle cx="31.3639" cy="53.8636" r="4.09091" fill="white"></circle><circle cx="15.6819" cy="47.7273" r="4.77273" fill="white"></circle><circle cx="9.54537" cy="32.0454" r="5.45455" fill="white"></circle><circle cx="15.6818" cy="17.0455" r="6.13636" fill="white"></circle><circle cx="31.3636" cy="9.54548" r="6.81818" fill="white"></circle>',8)]))}const __unplugin_components_12$3=_export_sfc(_sfc_main$3M,[["render",_sfc_render$2d]]),_sfc_main$3L={},_hoisted_1$3j={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3j,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.0596 5.90881L11.9398 6.72441L8.24969 10.707L4.55957 6.72441L5.4398 5.90881L8.24969 8.94096L11.0596 5.90881Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$z=_export_sfc(_sfc_main$3L,[["render",_sfc_render$2c]]),_hoisted_1$3i={class:"colors-container"},_hoisted_2$Z={class:"cell-container"},_hoisted_3$J={class:"cell-container"},_hoisted_4$C={class:"cell-container"},_hoisted_5$v={class:"cell-container"},_hoisted_6$r={class:"cell-container"},_hoisted_7$m={class:"cell-container"},_hoisted_8$j={class:"color-picker"},_sfc_main$3K={__name:"ColorContainer",props:["propertyColor"],emits:["setActiveColor"],setup(e,{emit:n}){const r=n,o=ref("rgb(0, 0, 0)"),s=f=>{r("setActiveColor",f)},u=f=>{areColorsSimilar(f,e.propertyColor)||s(f)},d=f=>{o.value=f};return(f,g)=>(openBlock(),createElementBlock("div",_hoisted_1$3i,[createBaseVNode("span",_hoisted_2$Z,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(255, 0, 0)")}]),onClick:g[0]||(g[0]=m=>s("rgb(255, 0, 0)"))},g[6]||(g[6]=[createBaseVNode("span",{class:"cell red"},null,-1)]),2)]),createBaseVNode("span",_hoisted_3$J,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(255, 236, 102)")}]),onClick:g[1]||(g[1]=m=>s("rgb(255, 236, 102)"))},g[7]||(g[7]=[createBaseVNode("span",{class:"cell yellow"},null,-1)]),2)]),createBaseVNode("span",_hoisted_4$C,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(45, 119, 250)")}]),onClick:g[2]||(g[2]=m=>s("rgb(45, 119, 250)"))},g[8]||(g[8]=[createBaseVNode("span",{class:"cell blue"},null,-1)]),2)]),unref(isMobileDevice)?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_5$v,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(255, 246, 179)")}]),onClick:g[3]||(g[3]=m=>s("rgb(255, 246, 179)"))},g[9]||(g[9]=[createBaseVNode("span",{class:"cell",style:{background:"rgb(255, 246, 179)"}},null,-1)]),2)]),createBaseVNode("span",_hoisted_6$r,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(254, 191, 191)")}]),onClick:g[4]||(g[4]=m=>s("rgb(254, 191, 191)"))},g[10]||(g[10]=[createBaseVNode("span",{class:"cell",style:{background:"rgb(254, 191, 191)"}},null,-1)]),2)]),createBaseVNode("span",_hoisted_7$m,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(100, 188, 56)")}]),onClick:g[5]||(g[5]=m=>s("rgb(100, 188, 56)"))},g[11]||(g[11]=[createBaseVNode("span",{class:"cell",style:{background:"rgb(100, 188, 56)"}},null,-1)]),2)])],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_8$j,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:o.value})},null,4),createVNode(unref(NColorPicker),{to:".measure-panel",onComplete:u,"onUpdate:value":d,value:o.value,"show-alpha":!1},{label:withCtx(()=>g[12]||(g[12]=[createBaseVNode("img",{src:_imports_0$1,alt:"colorPicker"},null,-1)])),_:1},8,["value"])])]))}},MeasurePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$3h={class:"sidebar-title"},_hoisted_2$Y={class:"edit-container"},_hoisted_3$I={key:0,class:"color"},_hoisted_4$B={class:"color-title subtitle"},_hoisted_5$u={class:"color"},_hoisted_6$q={class:"color-title subtitle"},_hoisted_7$l={class:"border-width"},_hoisted_8$i={class:"subtitle"},_hoisted_9$e={class:"tool"},_hoisted_10$c={class:"opacity"},_hoisted_11$c={class:"subtitle"},_hoisted_12$c={class:"tool"},_hoisted_13$c={class:"line-style"},_hoisted_14$c={class:"line-style-title subtitle"},_hoisted_15$c={class:"block"},_hoisted_16$c={class:"line-select"},_hoisted_17$9={class:"solid"},_hoisted_18$9={class:"line-select"},_hoisted_19$9={class:"solid"},_hoisted_20$9={key:1,class:"arrow-style"},_hoisted_21$8={class:"subtitle"},_hoisted_22$8={class:"content-block"},_hoisted_23$8={class:"color"},_hoisted_24$8={class:"color-title subtitle"},_hoisted_25$6={class:"text"},_hoisted_26$6={class:"text-title subtitle"},_hoisted_27$6={class:"content-block"},_hoisted_28$6={class:"note"},_hoisted_29$5={class:"subtitle"},_sfc_main$3J={__name:"MeasurePanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("measurePanel")),o=computed(()=>n.getCustomFonts),u=getCurrentInstance().appContext.app.config.globalProperties.$t;let d=reactive({type:"",fillColor:"rgb(0, 0, 0)",borderColor:"rgb(0, 0, 0)",opacity:100,borderStyle:"solid",dashes:2,borderWidth:2,head:"OpenArrow",tail:"OpenArrow",color:"rgb(0, 0, 0)",fontName:"Helvetica",fontStyle:"regular",fontSize:14,contents:""}),f=ref(`${d.opacity}%`);const m=[25,50,75,100].map(J=>({label:`${J}%`,value:`${J}%`,class:"edit-select"}));let y=ref(`${d.borderWidth} pt`);const _=[2,4,6,8,10].map(J=>({label:`${J} pt`,value:`${J} pt`,class:"edit-select"})),w=J=>{const O=J.fontFamily;n.setCustomFonts(O)};core.addEvent("LoadFont",w),watch(()=>o.value,(J,O)=>{k.value=x(J)},{deep:!0});const x=J=>{if(J.length)return J.map(O=>({label:O.fontFamily,value:O.fontName,class:"edit-select"}))},k=ref([]);k.value=x(o.value);const S=computed(()=>[{label:u("regular"),value:"regular",class:"edit-select"},{label:u("bold"),value:"bold",class:"edit-select"},{label:u("boldOblique"),value:"boldItalic",class:"edit-select"},{label:u("oblique"),value:"italic",class:"edit-select"}]),M=[6,8,10,12,14,16,20,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72],E=M.map(J=>({label:`${J} pt`,value:J,class:"edit-select"})),P=[{label:"\u2212",value:"",class:"edit-select"},{label:"\u2190",value:"OpenArrow",class:"edit-select"}],T=[{label:"\u2212",value:"",class:"edit-select"},{label:"\u2192",value:"OpenArrow",class:"edit-select"}];watch(()=>r.value,(J,O)=>{J&&n.closeElement("pageModePanel")});const D=()=>{core.setPropertyPanel({opacity:d.opacity/100})},F=()=>{core.setPropertyPanel({borderWidth:d.borderWidth})};watch(()=>d.fontName,(J,O)=>{core.setPropertyPanel({fontName:J})}),watch(()=>d.fontStyle,(J,O)=>{core.setPropertyPanel({fontStyle:J})}),watch(()=>d.opacity,(J,O)=>{f.value=J+"%"}),watch(()=>d.borderWidth,(J,O)=>{y.value=J+" pt"}),watch(()=>d.fontSize,(J,O)=>{typeof J=="number"&&core.setPropertyPanel({fontSize:d.fontSize})}),watch(()=>d.head,(J,O)=>{core.setPropertyPanel({head:J})}),watch(()=>d.tail,(J,O)=>{core.setPropertyPanel({tail:J})});const I=(J,O)=>{d[J]=O,core.setPropertyPanel({[J]:O})},N=()=>{d.opacity=Number.isNaN(Number.parseInt(f.value))?100:Number.parseInt(f.value),core.setPropertyPanel({opacity:d.opacity/100})},q=()=>{d.borderWidth=Number.parseInt(y.value),core.setPropertyPanel({borderWidth:d.borderWidth})},Y=J=>{J!==null&&(d.dashes=Math.round(J),core.setPropertyPanel({dashes:[d.dashes]}))},Z=()=>{core.setPropertyPanel({contents:d.contents})},j=J=>{d.borderStyle=J,d.borderStyle==="dashed"?core.setPropertyPanel({borderStyle:J,dashes:[d.dashes]}):core.setPropertyPanel({borderStyle:J})},ne=J=>{for(const O in J){O==="isOpen"&&(J.isOpen?n.openElement("measurePanel"):n.closeElement("measurePanel"));for(const U in d)if(O===U){if(O==="opacity"){d.opacity=Math.round(J.opacity*100);continue}if(O==="dashes"){d.dashes=J.dashes.length?J.dashes[0]:2;continue}d[U]=J[O],O==="fontSize"&&!M.includes(J.fontSize)&&(d.fontSize=J.fontSize+" pt")}}};core.addEvent("measurePropertyChange",ne);const le=()=>{n.closeElement("measurePanel")};return(J,O)=>{const U=__unplugin_components_13$3,W=_sfc_main$3K,H=__unplugin_components_1$e,X=__unplugin_components_0$z;return openBlock(),createElementBlock("div",{class:normalizeClass(["measure-panel property-panel",{closed:!r.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$3h,[createTextVNode(toDisplayString$1(unref(u)("measurementPanel.appearance"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(U,{key:0,class:"close-button",onClick:le})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$Y,[unref(d).type!=="line"&&unref(d).type!=="multiline"?(openBlock(),createElementBlock("div",_hoisted_3$I,[createBaseVNode("div",_hoisted_4$B,toDisplayString$1(unref(u)("measurementPanel.fillColor")),1),createVNode(W,{propertyColor:unref(d).fillColor,onSetActiveColor:O[0]||(O[0]=Q=>I("fillColor",Q))},null,8,["propertyColor"])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_5$u,[createBaseVNode("div",_hoisted_6$q,toDisplayString$1(unref(u)("measurementPanel.lineColor")),1),createVNode(W,{propertyColor:unref(d).borderColor,onSetActiveColor:O[1]||(O[1]=Q=>I("borderColor",Q))},null,8,["propertyColor"])]),createBaseVNode("div",_hoisted_7$l,[createBaseVNode("div",_hoisted_8$i,toDisplayString$1(unref(u)("measurementPanel.lineWidth")),1),createBaseVNode("div",_hoisted_9$e,[createVNode(unref(NSlider),{value:unref(d).borderWidth,"onUpdate:value":O[2]||(O[2]=Q=>unref(d).borderWidth=Q),tooltip:!1,step:1,max:10,min:1,class:"width-slider","on-dragend":F},{thumb:withCtx(()=>[createVNode(H)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(y),"onUpdate:value":[O[3]||(O[3]=Q=>isRef(y)?y.value=Q:y=Q),q],options:unref(_),to:".measure-panel"},{arrow:withCtx(()=>[createVNode(X)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_10$c,[createBaseVNode("div",_hoisted_11$c,toDisplayString$1(unref(u)("opacity")),1),createBaseVNode("div",_hoisted_12$c,[createVNode(unref(NSlider),{value:unref(d).opacity,"onUpdate:value":O[4]||(O[4]=Q=>unref(d).opacity=Q),tooltip:!1,step:1,max:100,min:0,class:"width-slider","on-dragend":D},{thumb:withCtx(()=>[createVNode(H)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(f),"onUpdate:value":[O[5]||(O[5]=Q=>isRef(f)?f.value=Q:f=Q),N],options:unref(m),to:".measure-panel"},{arrow:withCtx(()=>[createVNode(X)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_13$c,[createBaseVNode("div",_hoisted_14$c,toDisplayString$1(unref(u)("measurementPanel.lineStyle")),1),createBaseVNode("div",_hoisted_15$c,[createBaseVNode("div",_hoisted_16$c,[createBaseVNode("div",{class:normalizeClass(["checkbox",{active:unref(d).borderStyle==="solid"}]),onClick:O[6]||(O[6]=Q=>j("solid"))},[withDirectives(createBaseVNode("div",_hoisted_17$9,null,512),[[vShow,unref(d).borderStyle==="solid"]])],2),O[16]||(O[16]=createBaseVNode("div",{class:"solid-line"},null,-1))]),O[18]||(O[18]=createBaseVNode("div",null,null,-1)),createBaseVNode("div",_hoisted_18$9,[createBaseVNode("div",{class:normalizeClass(["checkbox",{active:unref(d).borderStyle==="dashed"}]),onClick:O[7]||(O[7]=Q=>j("dashed"))},[withDirectives(createBaseVNode("div",_hoisted_19$9,null,512),[[vShow,unref(d).borderStyle==="dashed"]])],2),O[17]||(O[17]=createBaseVNode("div",{class:"dashed-line"},null,-1))]),createVNode(unref(NInputNumber),{value:unref(d).dashes,"onUpdate:value":[O[8]||(O[8]=Q=>unref(d).dashes=Q),Y],placeholder:"2 pt",min:"0",max:"10",step:1,"update-value-on-input":!1,disabled:unref(d).borderStyle!=="dashed"},{"minus-icon":withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["arrow down",{disabled:unref(d).borderStyle!=="dashed"}])},null,2)]),"add-icon":withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["arrow up",{disabled:unref(d).borderStyle!=="dashed"}])},null,2)]),_:1},8,["value","disabled"])])]),unref(d).type==="line"?(openBlock(),createElementBlock("div",_hoisted_20$9,[createBaseVNode("div",_hoisted_21$8,toDisplayString$1(unref(u)("measurementPanel.start"))+" & "+toDisplayString$1(unref(u)("measurementPanel.end")),1),createBaseVNode("div",_hoisted_22$8,[createVNode(unref(NSelect),{value:unref(d).head,"onUpdate:value":O[9]||(O[9]=Q=>unref(d).head=Q),options:P,to:".measure-panel",class:"font-style-select"},{arrow:withCtx(()=>[createVNode(X)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(d).tail,"onUpdate:value":O[10]||(O[10]=Q=>unref(d).tail=Q),options:T,to:".measure-panel",class:"font-size-select"},{arrow:withCtx(()=>[createVNode(X)]),_:1},8,["value"])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_23$8,[createBaseVNode("div",_hoisted_24$8,toDisplayString$1(unref(u)("measurementPanel.fontColor")),1),createVNode(W,{propertyColor:unref(d).color,onSetActiveColor:O[11]||(O[11]=Q=>I("color",Q))},null,8,["propertyColor"])]),createBaseVNode("div",_hoisted_25$6,[createBaseVNode("div",_hoisted_26$6,toDisplayString$1(unref(u)("measurementPanel.fontStyle")),1),createVNode(unref(NSelect),{value:unref(d).fontName,"onUpdate:value":O[12]||(O[12]=Q=>unref(d).fontName=Q),options:k.value,to:".measure-panel",class:"text-family"},{arrow:withCtx(()=>[createVNode(X)]),_:1},8,["value","options"]),createBaseVNode("div",_hoisted_27$6,[createVNode(unref(NSelect),{value:unref(d).fontStyle,"onUpdate:value":O[13]||(O[13]=Q=>unref(d).fontStyle=Q),options:S.value,to:".measure-panel",class:"font-style-select"},{arrow:withCtx(()=>[createVNode(X)]),_:1},8,["value","options"]),createVNode(unref(NSelect),{value:unref(d).fontSize,"onUpdate:value":O[14]||(O[14]=Q=>unref(d).fontSize=Q),options:unref(E),to:".measure-panel",class:"font-size-select"},{arrow:withCtx(()=>[createVNode(X)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_28$6,[createBaseVNode("div",_hoisted_29$5,toDisplayString$1(unref(u)("measurementPanel.note")),1),withDirectives(createBaseVNode("textarea",{name:"note",rows:"4","onUpdate:modelValue":O[15]||(O[15]=Q=>unref(d).contents=Q),onBlur:Z},null,544),[[vModelText,unref(d).contents]])])])],6)}}},_sfc_main$3I={},_hoisted_1$3g={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3g,n[0]||(n[0]=[createBaseVNode("rect",{width:"14",height:"14",rx:"1",fill:"currentColor"},null,-1),createBaseVNode("path",{d:"M10.2784 5.27848L5.84653 9.71032L4.20261 8.06642",stroke:"white","stroke-width":"1.5","stroke-linecap":"square"},null,-1)]))}const __unplugin_components_1$d=_export_sfc(_sfc_main$3I,[["render",_sfc_render$2b]]),ColorSeparationPanel_vue_vue_type_style_index_0_scoped_fc173268_lang="",_hoisted_1$3f={class:"sidebar-title"},_hoisted_2$X={class:"container"},_hoisted_3$H={class:"all"},_hoisted_4$A={class:"color-list"},_hoisted_5$t=["onClick"],_hoisted_6$p={class:"name"},_sfc_main$3H={__name:"ColorSeparationPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("colorSeparationPanel")),o=computed(()=>n.getToolMode),s=ref([]),u=ref(new Set);watch(o,(_,w)=>{_==="separation"?(n.openElement("colorSeparationPanel"),n.closeElement("pageModePanel")):r.value&&(n.closeElement("colorSeparationPanel"),u.value.clear())});const d=_=>{s.value=_};core.addEvent("colorSeparationUpdate",d);const f=_=>{u.value.clear(),_.forEach(w=>u.value.add(w))};core.addEvent("ignoreColorsUpdate",f);const g=()=>{n.closeElement("colorSeparationPanel")},m=async()=>{n.setCommonLoading(!0);const _=u.value.size!==0;s.value.forEach(w=>{_?u.value.delete(w.index):u.value.add(w.index)}),await core.updateViewWithColorIndex(Array.from(u.value)),n.setCommonLoading(!1)},y=async _=>{n.setCommonLoading(!0),u.value.has(_.index)?u.value.delete(_.index):u.value.add(_.index),await core.updateViewWithColorIndex(Array.from(u.value)),n.setCommonLoading(!1)},v=(_,w=220)=>{const k=/rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/.exec(_);if(!k)return null;const S=parseInt(k[1]),M=parseInt(k[2]),E=parseInt(k[3]);return .299*S+.587*M+.114*E>w};return(_,w)=>{const x=__unplugin_components_13$3,k=__unplugin_components_1$d;return openBlock(),createElementBlock("div",{class:normalizeClass(["color-separation-panel",{closed:!r.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":""})},[createBaseVNode("div",_hoisted_1$3f,[createTextVNode(toDisplayString$1(_.$t("header.separation"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(x,{key:0,class:"close-button",onClick:g})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$X,[createBaseVNode("div",_hoisted_3$H,[createBaseVNode("div",{class:normalizeClass(["check-box",{active:u.value.size===0}]),onClick:m},[withDirectives(createVNode(k,null,null,512),[[vShow,u.value.size===0]])],2),createBaseVNode("span",null,toDisplayString$1(_.$t("colorSeparation.toggleColor")),1)]),createBaseVNode("div",_hoisted_4$A,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,S=>(openBlock(),createElementBlock("div",{class:"row",key:S.index},[createBaseVNode("div",{class:normalizeClass(["check-box",{active:!u.value.has(S.index),darker:v(S.color)}]),onClick:M=>y(S),style:normalizeStyle({borderColor:S.color,color:S.color})},[withDirectives(createVNode(k,null,null,512),[[vShow,!u.value.has(S.index)]])],14,_hoisted_5$t),createBaseVNode("span",_hoisted_6$p,toDisplayString$1(S.name),1),createBaseVNode("span",null,toDisplayString$1(S.intensity||0)+"%",1)]))),128))])])],6)}}},__unplugin_components_10$4=_export_sfc(_sfc_main$3H,[["__scopeId","data-v-fc173268"]]),_sfc_main$3G={},_hoisted_1$3e={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3e,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.8 12.6V3.29999H11.7561L11.2345 3.85884L11.9655 4.54115L12.3 4.18279V12.6H3.8ZM2.6 13.2V3.29999H0V2.29999H2.6V0.399994H3.8V2.29999H12.8H13.3V2.79999V12.6H16V13.8H13.3V15.6H12.3V13.8H3.2H2.6V13.2ZM14.2055 2.14115L14.7655 1.54115L14.0345 0.858835L13.4745 1.45884L14.2055 2.14115ZM9.72553 6.94115L10.8455 5.74115L10.1145 5.05884L8.99447 6.25883L9.72553 6.94115ZM7.48553 9.34115L8.60553 8.14115L7.87447 7.45883L6.75447 8.65883L7.48553 9.34115ZM5.24553 11.7412L6.36553 10.5412L5.63447 9.85884L4.51447 11.0588L5.24553 11.7412Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_15=_export_sfc(_sfc_main$3G,[["render",_sfc_render$2a]]),_sfc_main$3F={},_hoisted_1$3d={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$29(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3d,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8537 7.17423L8.5001 10.5279L8.5001 1.60001V1.10001H7.5001V1.60001L7.5001 10.5277L4.14666 7.17423L3.7931 6.82068L3.086 7.52778L3.43955 7.88134L7.64664 12.0884C7.8419 12.2837 8.15849 12.2837 8.35375 12.0884L12.5608 7.88134L12.9144 7.52778L12.2073 6.82068L11.8537 7.17423ZM1.6001 13.9H1.1001V14.9H1.6001H14.4001H14.9001V13.9H14.4001H1.6001Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_14$3=_export_sfc(_sfc_main$3F,[["render",_sfc_render$29]]),_sfc_main$3E={},_hoisted_1$3c={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$28(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3c,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.904297 1.60429H0.404297V2.10429V11.5177V12.0177H0.904297H3.57684V13.2072V14.2072H4.57684H9.59007V13.532L9.59996 12.8L6.91751 11.5177L4.57684 12.9057V5.7938H14.6032V10.1729H15.6032V5.7938V4.7938H14.6032H13.4307V2.10429V1.60429H12.9307H0.904297ZM12.4307 4.7938V2.60429H1.4043V11.0177H3.57684V5.7938V4.7938H4.57684H12.4307ZM11.7263 8.42116C12.1681 8.42116 12.5263 8.06071 12.5263 7.61607C12.5263 7.17143 12.1681 6.81098 11.7263 6.81098C11.2845 6.81098 10.9263 7.17143 10.9263 7.61607C10.9263 8.06071 11.2845 8.42116 11.7263 8.42116ZM12.3683 9.91808L12.0502 9.53231L12.8218 8.89613L13.1399 9.2819L14.3095 10.7004L14.9841 11.5185H13.9237H10.3999H9.89994V10.5185H10.3999H12.8634L12.3683 9.91808ZM12.5638 13.9004L12.8819 14.2861L12.1104 14.9223L11.7923 14.5365L10.6227 13.1181L9.94808 12.3H11.0084H14.5322H15.0322V13.3H14.5322H12.0688L12.5638 13.9004Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_13$2=_export_sfc(_sfc_main$3E,[["render",_sfc_render$28]]),_sfc_main$3D={},_hoisted_1$3b={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$27(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3b,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5 7.5H13.1353H1.5H0.5V6.5V1.60353V0.5L1.5 0.966667L13.3571 6.5L15.5 7.5ZM10.9924 6.5H1.5V2.0702L10.9924 6.5ZM15.5 8.5H0.5V15.5L15.5 8.5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_12$2=_export_sfc(_sfc_main$3D,[["render",_sfc_render$27]]),_sfc_main$3C={},_hoisted_1$3a={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$26(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3a,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.52941 14.5H0L7.52941 1.5V14.5ZM9.47059 13.5H14.2652L9.47059 5.2218V13.5ZM16 14.5H14.8444H9.47059H8.47059V13.5V3.49524V1.5L9.47059 3.22656L15.4208 13.5L16 14.5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_11$2=_export_sfc(_sfc_main$3C,[["render",_sfc_render$26]]),_sfc_main$3B={},_hoisted_1$39={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$25(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$39,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.35355 2.26779L9.70711 2.62134L9.35355 2.97489L7.23223 5.09621L6.52513 4.38911L7.86416 3.05007L7.55768 3.0735C4.69176 3.52528 2.5 6.00714 2.5 9C2.5 12.3137 5.18629 15 8.5 15C11.8137 15 14.5 12.3137 14.5 9C14.5 7.01498 13.5366 5.25507 12.0496 4.16209L12.6419 3.35635C14.3741 4.62964 15.5 6.68338 15.5 9C15.5 12.866 12.366 16 8.5 16C4.63401 16 1.5 12.866 1.5 9C1.5 5.49977 4.06855 2.60038 7.4237 2.08231C7.52022 2.0674 7.61737 2.05447 7.71511 2.04356L6.52513 0.853572L7.23223 0.146465L9.35355 2.26779Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_10$3=_export_sfc(_sfc_main$3B,[["render",_sfc_render$25]]),_sfc_main$3A={},_hoisted_1$38={width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$24(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$38,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.14645 2.26779L5.79289 2.62134L6.14645 2.97489L8.26777 5.09621L8.97487 4.38911L7.63584 3.05007L7.94232 3.0735C10.8082 3.52528 13 6.00714 13 9C13 12.3137 10.3137 15 7 15C3.68629 15 1 12.3137 1 9C1 7.01498 1.96344 5.25507 3.45037 4.16209L2.85811 3.35635C1.12586 4.62964 0 6.68338 0 9C0 12.866 3.13401 16 7 16C10.866 16 14 12.866 14 9C14 5.49977 11.4314 2.60038 8.0763 2.08231C7.97978 2.0674 7.88263 2.05447 7.78489 2.04356L8.97487 0.853572L8.26777 0.146465L6.14645 2.26779Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_9$4=_export_sfc(_sfc_main$3A,[["render",_sfc_render$24]]),_sfc_main$3z={},_hoisted_1$37={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$23(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$37,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.0315 11.1503L10.609 2.59406H9.39038L5.96788 11.1503H5.09998V12.0253H7.89998V11.1503H7.38147L8.08144 9.4003H11.9179L12.6179 11.1503H12.1V12.0253H14.9V11.1503H14.0315ZM11.568 8.5253L9.99969 4.60441L8.43142 8.5253H11.568Z",fill:"currentColor"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.499 17.406L1.80957 14.7147L4.50088 12.0253L5.26929 12.7942L3.8888 14.1737L16.1078 14.1703L14.7306 12.7942L15.499 12.0252L18.1903 14.7146L15.5009 17.4059L14.732 16.6375L16.1106 15.2574L3.89264 15.2607L5.26795 16.6376L4.499 17.406Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_8$2=_export_sfc(_sfc_main$3z,[["render",_sfc_render$23]]),_sfc_main$3y={},_hoisted_1$36={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$22(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$36,n[0]||(n[0]=[createStaticVNode('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.55957 5.99906L5.25088 3.30963L7.94031 6.00094L7.17136 6.76935L5.79198 5.38893L5.79519 14.6079L7.17142 13.2307L7.94037 13.9991L5.25094 16.6904L2.55963 14.001L3.32804 13.232L4.70812 14.6105L4.7049 5.39264L3.32798 6.76801L2.55957 5.99906Z" fill="currentColor"></path><rect x="9.44043" y="4.5" width="8" height="1.5" fill="currentColor"></rect><rect x="9.44043" y="7" width="8" height="1.5" fill="currentColor"></rect><rect x="9.44043" y="11.5" width="8" height="1.5" fill="currentColor"></rect><rect x="9.44043" y="14" width="8" height="1.5" fill="currentColor"></rect>',5)]))}const __unplugin_components_7$4=_export_sfc(_sfc_main$3y,[["render",_sfc_render$22]]),_sfc_main$3x={},_hoisted_1$35={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$21(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$35,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.55957 5.99906L5.25088 3.30963L7.94031 6.00094L7.17136 6.76935L5.79198 5.38893L5.79519 14.6079L7.17142 13.2307L7.94037 13.9991L5.25094 16.6904L2.55963 14.001L3.32804 13.232L4.70812 14.6105L4.7049 5.39264L3.32798 6.76801L2.55957 5.99906Z",fill:"currentColor"},null,-1),createBaseVNode("rect",{x:"9.44043",y:"4.75",width:"8",height:"1.5",fill:"currentColor"},null,-1),createBaseVNode("rect",{x:"9.44043",y:"9.25",width:"8",height:"1.5",fill:"currentColor"},null,-1),createBaseVNode("rect",{x:"9.44043",y:"13.75",width:"8",height:"1.5",fill:"currentColor"},null,-1)]))}const __unplugin_components_6$7=_export_sfc(_sfc_main$3x,[["render",_sfc_render$21]]),_sfc_main$3w={},_hoisted_1$34={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$20(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$34,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 4V3H3.00079V4H16ZM16 8V7H0.000976562V8H16ZM16 11V12H6.00061V11H16Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$e=_export_sfc(_sfc_main$3w,[["render",_sfc_render$20]]),_sfc_main$3v={},_hoisted_1$33={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1$(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$33,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 4V3H0V4H16ZM16 12V11H0V12H16ZM13 7V8H3V7H13Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$e=_export_sfc(_sfc_main$3v,[["render",_sfc_render$1$]]),_sfc_main$3u={},_hoisted_1$32={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1_(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$32,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 4V3H0V4H13ZM16 8V7H0V8H16ZM10 11V12H0V11H10Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_2$d=_export_sfc(_sfc_main$3u,[["render",_sfc_render$1_]]),ContentEditorPanel_vue_vue_type_style_index_0_lang="",ContentEditorPanel_vue_vue_type_style_index_1_lang="",_hoisted_1$31={class:"sidebar-title"},_hoisted_2$W={class:"edit-container"},_hoisted_3$G={class:"color"},_hoisted_4$z={class:"color-title subtitle"},_hoisted_5$s={class:"colors-container"},_hoisted_6$o={class:"cell-container"},_hoisted_7$k={class:"cell-container"},_hoisted_8$h={class:"cell-container"},_hoisted_9$d={class:"cell-container"},_hoisted_10$b={class:"cell-container"},_hoisted_11$b={class:"cell-container"},_hoisted_12$b={class:"color-picker"},_hoisted_13$b={class:"opacity"},_hoisted_14$b={class:"opacity-title subtitle"},_hoisted_15$b={class:"tool"},_hoisted_16$b={class:"text"},_hoisted_17$8={class:"text-title subtitle"},_hoisted_18$8={class:"content-block"},_hoisted_19$8={class:"text-align"},_hoisted_20$8={class:"spacing"},_hoisted_21$7={class:"spacing-title"},_hoisted_22$7={class:"block"},_hoisted_23$7={class:"edit-container"},_hoisted_24$7={class:"overview"},_hoisted_25$5=["src"],_hoisted_26$5={class:"rotate"},_hoisted_27$5={class:"subtitle"},_hoisted_28$5={class:"buttons"},_hoisted_29$4=["title"],_hoisted_30$4=["title"],_hoisted_31$4={class:"flips"},_hoisted_32$3={class:"subtitle"},_hoisted_33$2={class:"buttons"},_hoisted_34$2=["title"],_hoisted_35$2=["title"],_hoisted_36$2={class:"opacity"},_hoisted_37$2={class:"opacity-title subtitle"},_hoisted_38$2={class:"tool"},_hoisted_39$2={class:"tools"},_hoisted_40$2={class:"subtitle"},_hoisted_41$2={class:"buttons"},_hoisted_42$2=["title"],_hoisted_43$2=["title"],_hoisted_44$2=["title"],_sfc_main$3t={__name:"ContentEditorPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("contentEditorPanel")),o=computed(()=>n.getContentEditorType);computed(()=>n.getRightPanelButtonDisabled);const s=computed(()=>n.getCustomFonts),d=getCurrentInstance().appContext.app.config.globalProperties.$t;let f=reactive({color:"rgb(0, 0, 0)",opacity:100,fontFamily:"Helvetica",fontStyle:0,alignType:2,fontSize:14,lineSpacing:1,paragraphSpacing:0,characterSpacing:0}),g=ref("100%");const y=[25,50,75,100].map(J=>({label:`${J}%`,value:`${J}%`,class:"edit-select"})),v=J=>{const O=J.fontFamily;n.setCustomFonts(O)};core.addEvent("LoadFont",v),watch(()=>s.value,(J,O)=>{w.value=_(J)},{deep:!0});const _=J=>{if(J.length)return J.map(O=>({label:O.fontFamily,value:O.fontName,class:"edit-select"}))},w=ref([]);w.value=_(s.value);const x=computed(()=>[{label:d("regular"),value:0,class:"edit-select"},{label:d("bold"),value:1,class:"edit-select"},{label:d("boldOblique"),value:3,class:"edit-select"},{label:d("oblique"),value:2,class:"edit-select"}]),k=[12,14,16,20,24,28],S=k.map(J=>({label:`${J} pt`,value:J,class:"edit-select"})),M=ref(""),E=ref("rgb(0, 0, 0)");watch(()=>r.value,(J,O)=>{J&&n.closeElement("pageModePanel")});const P=()=>{core.setContentEditorProperty(o.value,{opacity:f.opacity})};watch(()=>f.fontFamily,(J,O)=>{core.setContentEditorProperty(o.value,{fontFamily:J})}),watch(()=>f.fontStyle,(J,O)=>{core.setContentEditorProperty(o.value,{fontStyle:J})}),watch(()=>f.opacity,(J,O)=>{g.value=J+"%"}),watch(()=>f.fontSize,(J,O)=>{typeof J=="number"&&core.setContentEditorProperty(o.value,{fontSize:f.fontSize})});const T=J=>{f.color=J,core.setContentEditorProperty(o.value,{color:J})},D=()=>{f.opacity=Number.isNaN(Number.parseInt(g.value))?100:Number.parseInt(g.value),core.setContentEditorProperty(o.value,{opacity:f.opacity})},F=J=>{f.alignType=J,core.setContentEditorProperty(o.value,{alignType:f.alignType})},I=J=>{J!==null&&(f.lineSpacing=Math.round(J*2)/2,core.setContentEditorProperty(o.value,{lineSpacing:f.lineSpacing}))},N=J=>{J!==null&&(f.paragraphSpacing=Math.round(J*2)/2,core.setContentEditorProperty(o.value,{paragraphSpacing:f.paragraphSpacing}))},q=J=>{J!==null&&(f.characterSpacing=Math.round(J*2)/2,core.setContentEditorProperty(o.value,{characterSpacing:f.characterSpacing}))},Y=J=>{for(const O in J){O==="type"&&n.setContentEditorType(J[O]),O==="isOpen"&&(J.isOpen?n.openElement("contentEditorPanel"):n.closeElement("contentEditorPanel")),O==="imageUrl"&&(M.value=J[O]);for(const U in f)O===U&&(f[U]=J[O],O==="fontSize"&&!k.includes(J.fontSize)&&(f.fontSize=J.fontSize+" pt"),O==="color"&&(E.value=J.color))}};core.addEvent("contentPropertyChange",Y);const Z=(J,O)=>{core.setContentEditorProperty(o.value,{[J]:O})},j=J=>{areColorsSimilar(J,f.color)||T(J)},ne=J=>{E.value=J},le=()=>{n.closeElement("contentEditorPanel")};return(J,O)=>{const U=__unplugin_components_13$3,W=__unplugin_components_1$e,H=__unplugin_components_0$z,X=__unplugin_components_2$d,Q=__unplugin_components_4$e,fe=__unplugin_components_3$e,Se=__unplugin_components_6$7,Pe=__unplugin_components_7$4,$e=__unplugin_components_8$2,Ie=__unplugin_components_9$4,Ne=__unplugin_components_10$3,Be=__unplugin_components_11$2,be=__unplugin_components_12$2,Ve=__unplugin_components_13$2,De=__unplugin_components_14$3,ve=__unplugin_components_15;return openBlock(),createElementBlock("div",{class:normalizeClass(["editor-panel property-panel",{closed:!r.value,mobile:unref(isMobileDevice)}]),id:"editorPanel",style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$31,[createTextVNode(toDisplayString$1(o.value==="text"?unref(d)("editorPanel.textProp"):unref(d)("editorPanel.imageProp"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(U,{key:0,class:"close-button",onClick:le})):createCommentVNode("",!0)]),withDirectives(createBaseVNode("div",_hoisted_2$W,[createBaseVNode("div",_hoisted_3$G,[createBaseVNode("div",_hoisted_4$z,toDisplayString$1(unref(d)("editorPanel.fontColor")),1),createBaseVNode("div",_hoisted_5$s,[createBaseVNode("span",_hoisted_6$o,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(f).color,"rgb(255, 0, 0)")}]),onClick:O[0]||(O[0]=ye=>T("rgb(255, 0, 0)"))},O[26]||(O[26]=[createBaseVNode("span",{class:"cell red"},null,-1)]),2)]),createBaseVNode("span",_hoisted_7$k,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(f).color,"rgb(255, 236, 102)")}]),onClick:O[1]||(O[1]=ye=>T("rgb(255, 236, 102)"))},O[27]||(O[27]=[createBaseVNode("span",{class:"cell yellow"},null,-1)]),2)]),createBaseVNode("span",_hoisted_8$h,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(f).color,"rgb(45, 119, 250)")}]),onClick:O[2]||(O[2]=ye=>T("rgb(45, 119, 250)"))},O[28]||(O[28]=[createBaseVNode("span",{class:"cell blue"},null,-1)]),2)]),unref(isMobileDevice)?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_9$d,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(f).color,"rgb(255, 246, 179)")}]),onClick:O[3]||(O[3]=ye=>T("rgb(255, 246, 179)"))},O[29]||(O[29]=[createBaseVNode("span",{class:"cell",style:{background:"rgb(255, 246, 179)"}},null,-1)]),2)]),createBaseVNode("span",_hoisted_10$b,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(f).color,"rgb(254, 191, 191)")}]),onClick:O[4]||(O[4]=ye=>T("rgb(254, 191, 191)"))},O[30]||(O[30]=[createBaseVNode("span",{class:"cell",style:{background:"rgb(254, 191, 191)"}},null,-1)]),2)]),createBaseVNode("span",_hoisted_11$b,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(f).color,"rgb(100, 188, 56)")}]),onClick:O[5]||(O[5]=ye=>T("rgb(100, 188, 56)"))},O[31]||(O[31]=[createBaseVNode("span",{class:"cell",style:{background:"rgb(100, 188, 56)"}},null,-1)]),2)])],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_12$b,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:E.value})},null,4),createVNode(unref(NColorPicker),{to:"#editorPanel",onComplete:j,"onUpdate:value":ne,value:E.value,"show-alpha":!1},{label:withCtx(()=>O[32]||(O[32]=[createBaseVNode("img",{src:_imports_0$1,alt:"colorPicker"},null,-1)])),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_13$b,[createBaseVNode("div",_hoisted_14$b,toDisplayString$1(unref(d)("opacity")),1),createBaseVNode("div",_hoisted_15$b,[createVNode(unref(NSlider),{value:unref(f).opacity,"onUpdate:value":O[6]||(O[6]=ye=>unref(f).opacity=ye),tooltip:!1,step:1,max:100,min:0,class:"width-slider","on-dragend":P},{thumb:withCtx(()=>[createVNode(W)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(g),"onUpdate:value":[O[7]||(O[7]=ye=>isRef(g)?g.value=ye:g=ye),D],options:unref(y),to:"#editorPanel"},{arrow:withCtx(()=>[createVNode(H)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_16$b,[createBaseVNode("div",_hoisted_17$8,toDisplayString$1(unref(d)("font")),1),createVNode(unref(NSelect),{value:unref(f).fontFamily,"onUpdate:value":O[8]||(O[8]=ye=>unref(f).fontFamily=ye),options:w.value,to:"#editorPanel",class:"text-family"},{arrow:withCtx(()=>[createVNode(H)]),_:1},8,["value","options"]),createBaseVNode("div",_hoisted_18$8,[createVNode(unref(NSelect),{value:unref(f).fontStyle,"onUpdate:value":O[9]||(O[9]=ye=>unref(f).fontStyle=ye),options:x.value,to:"#editorPanel",class:"font-style-select"},{arrow:withCtx(()=>[createVNode(H)]),_:1},8,["value","options"]),createVNode(unref(NSelect),{value:unref(f).fontSize,"onUpdate:value":O[10]||(O[10]=ye=>unref(f).fontSize=ye),options:unref(S),to:"#editorPanel",class:"font-size-select"},{arrow:withCtx(()=>[createVNode(H)]),_:1},8,["value","options"])]),createBaseVNode("div",_hoisted_19$8,[createBaseVNode("div",{class:normalizeClass({active:unref(f).alignType===2}),onClick:O[11]||(O[11]=ye=>F(2))},[createBaseVNode("span",{class:normalizeClass({border:unref(f).alignType===3})},[createVNode(X)],2)],2),createBaseVNode("div",{class:normalizeClass({active:unref(f).alignType===5}),onClick:O[12]||(O[12]=ye=>F(5))},[createBaseVNode("span",{class:normalizeClass({border:unref(f).alignType===2})},[createVNode(Q)],2)],2),createBaseVNode("div",{class:normalizeClass({active:unref(f).alignType===3}),onClick:O[13]||(O[13]=ye=>F(3))},[createBaseVNode("span",null,[createVNode(fe)])],2)])]),createBaseVNode("div",_hoisted_20$8,[createBaseVNode("div",_hoisted_21$7,toDisplayString$1(unref(d)("editorPanel.spacing")),1),createBaseVNode("div",_hoisted_22$7,[createBaseVNode("div",null,[createVNode(Se),createVNode(unref(NInputNumber),{value:unref(f).lineSpacing,"onUpdate:value":[O[14]||(O[14]=ye=>unref(f).lineSpacing=ye),I],placeholder:unref(d)("editorPanel.lineSpacing"),min:"1",max:"10",step:.5,"update-value-on-input":!1},{"minus-icon":withCtx(()=>O[33]||(O[33]=[createBaseVNode("div",{class:"arrow down"},null,-1)])),"add-icon":withCtx(()=>O[34]||(O[34]=[createBaseVNode("div",{class:"arrow up"},null,-1)])),_:1},8,["value","placeholder"])]),createBaseVNode("div",null,[createVNode(Pe),createVNode(unref(NInputNumber),{value:unref(f).paragraphSpacing,"onUpdate:value":[O[15]||(O[15]=ye=>unref(f).paragraphSpacing=ye),N],placeholder:unref(d)("editorPanel.paragraphSpacing"),min:"0",max:"10",step:.5,"update-value-on-input":!1},{"minus-icon":withCtx(()=>O[35]||(O[35]=[createBaseVNode("div",{class:"arrow down"},null,-1)])),"add-icon":withCtx(()=>O[36]||(O[36]=[createBaseVNode("div",{class:"arrow up"},null,-1)])),_:1},8,["value","placeholder"])]),createBaseVNode("div",null,[createVNode($e),createVNode(unref(NInputNumber),{value:unref(f).characterSpacing,"onUpdate:value":[O[16]||(O[16]=ye=>unref(f).characterSpacing=ye),q],placeholder:unref(d)("editorPanel.characterSpacing"),min:"0",max:"10",step:.5,"update-value-on-input":!1},{"minus-icon":withCtx(()=>O[37]||(O[37]=[createBaseVNode("div",{class:"arrow down"},null,-1)])),"add-icon":withCtx(()=>O[38]||(O[38]=[createBaseVNode("div",{class:"arrow up"},null,-1)])),_:1},8,["value","placeholder"])])])])],512),[[vShow,o.value==="text"]]),withDirectives(createBaseVNode("div",_hoisted_23$7,[createBaseVNode("div",_hoisted_24$7,[withDirectives(createBaseVNode("img",{src:M.value},null,8,_hoisted_25$5),[[vShow,M.value]])]),createBaseVNode("div",_hoisted_26$5,[createBaseVNode("div",_hoisted_27$5,toDisplayString$1(unref(d)("editorPanel.rotate")),1),createBaseVNode("div",_hoisted_28$5,[createBaseVNode("div",{onClick:O[17]||(O[17]=ye=>Z("rotate","90")),title:unref(d)("editorPanel.rotateLeft")},[createVNode(Ie),createTextVNode(toDisplayString$1(unref(d)("editorPanel.rotateLeft")),1)],8,_hoisted_29$4),createBaseVNode("div",{onClick:O[18]||(O[18]=ye=>Z("rotate","-90")),title:unref(d)("editorPanel.rotateRight")},[createVNode(Ne),createTextVNode(toDisplayString$1(unref(d)("editorPanel.rotateRight")),1)],8,_hoisted_30$4)])]),createBaseVNode("div",_hoisted_31$4,[createBaseVNode("div",_hoisted_32$3,toDisplayString$1(unref(d)("editorPanel.flip")),1),createBaseVNode("div",_hoisted_33$2,[createBaseVNode("div",{onClick:O[19]||(O[19]=ye=>Z("flip","x")),title:unref(d)("editorPanel.flipHorizontal")},[createBaseVNode("span",null,[createVNode(Be)])],8,_hoisted_34$2),createBaseVNode("div",{onClick:O[20]||(O[20]=ye=>Z("flip","y")),title:unref(d)("editorPanel.flipVertical")},[createBaseVNode("span",null,[createVNode(be)])],8,_hoisted_35$2)])]),createBaseVNode("div",_hoisted_36$2,[createBaseVNode("div",_hoisted_37$2,toDisplayString$1(unref(d)("opacity")),1),createBaseVNode("div",_hoisted_38$2,[createVNode(unref(NSlider),{value:unref(f).opacity,"onUpdate:value":O[21]||(O[21]=ye=>unref(f).opacity=ye),tooltip:!1,step:1,max:100,min:0,"on-dragend":P,class:"width-slider"},{thumb:withCtx(()=>[createVNode(W)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(g),"onUpdate:value":[O[22]||(O[22]=ye=>isRef(g)?g.value=ye:g=ye),D],options:unref(y),to:"#editorPanel"},{arrow:withCtx(()=>[createVNode(H)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_39$2,[createBaseVNode("div",_hoisted_40$2,toDisplayString$1(unref(d)("editorPanel.tools")),1),createBaseVNode("div",_hoisted_41$2,[createBaseVNode("div",{onClick:O[23]||(O[23]=ye=>Z("tool","replace")),title:unref(d)("editorPanel.replace")},[createBaseVNode("span",null,[createVNode(Ve)])],8,_hoisted_42$2),createBaseVNode("div",{onClick:O[24]||(O[24]=ye=>Z("tool","export")),title:unref(d)("editorPanel.export")},[createBaseVNode("span",null,[createVNode(De)])],8,_hoisted_43$2),createBaseVNode("div",{onClick:O[25]||(O[25]=ye=>Z("tool","crop")),title:unref(d)("editorPanel.crop")},[createBaseVNode("span",null,[createVNode(ve)])],8,_hoisted_44$2)])])],512),[[vShow,o.value==="image"]])],6)}}},_sfc_main$3s={},_hoisted_1$30={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1Z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$30,n[0]||(n[0]=[createBaseVNode("g",{id:"btn / close"},[createBaseVNode("circle",{id:"Ellipse 2704",cx:"8",cy:"8",r:"7",fill:"#999999"}),createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07107 7.29289L4.88909 4.11091L4.18198 4.81802L7.36396 8L4.18198 11.182L4.88909 11.8891L8.07107 8.70711L11.253 11.8891L11.9602 11.182L8.77817 8L11.9602 4.81802L11.253 4.11091L8.07107 7.29289Z",fill:"white"})],-1)]))}const __unplugin_components_0$y=_export_sfc(_sfc_main$3s,[["render",_sfc_render$1Z]]),LinkPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$2$={class:"sidebar-title"},_hoisted_2$V={class:"sidebar-tabs-header"},_hoisted_3$F={class:"sidebar-content"},_hoisted_4$y=["placeholder"],_sfc_main$3r={__name:"LinkPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=ref("URL"),s=computed(()=>n.isElementOpen("linkPanel")),u=computed(()=>r.getActiveTool);computed(()=>n.getCurrentPage);const d=computed(()=>r.getTotalPages);let f=ref(""),g=ref(""),m=ref("");watch(()=>u.value,(E,P)=>{E!=="link"&&n.closeElement("linkPanel")}),watch(()=>s.value,(E,P)=>{E&&(n.closeElement("pageModePanel"),o.value=f.value?"URL":g.value?"PAGE":m.value?"EMAIL":"URL")}),watch(()=>g.value,(E,P)=>{const T=/^\d+$/;E!==""&&(E>d.value||E<=0||!T.test(E))&&(g.value=P)});const y=E=>{o.value=E},v=()=>o.value==="URL"&&w(f.value)||o.value==="PAGE"&&g.value||o.value==="EMAIL"&&_(m.value),_=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E),w=E=>/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(E),x=()=>{if(o.value==="URL")r.setPropertyPanel({destPage:"",url:f.value});else if(o.value==="PAGE")r.setPropertyPanel({url:"",destPage:g.value});else if(o.value==="EMAIL"){const E=m.value.startsWith("mailto:");r.setPropertyPanel({destPage:"",url:E?m.value:"mailto:"+m.value})}n.closeElement("linkPanel")},k=E=>{E?(E.url&&E.url.startsWith("mailto:")?(m.value=E.url.replace("mailto:",""),f.value="",g.value="",o.value="email"):E.url?(f.value=E.url,m.value="",g.value="",o.value="URL"):E.destPage?(g.value=E.destPage,f.value="",m.value="",o.value="PAGE"):(g.value="",f.value="",m.value="",o.value="URL"),n.openElement("linkPanel")):n.closeElement("linkPanel")};core.addEvent("linkPanelChange",k);const S=()=>{o.value==="URL"?f.value="":o.value==="PAGE"?g.value="":o.value==="EMAIL"&&(m.value="")},M=()=>{n.closeElement("linkPanel")};return(E,P)=>{const T=__unplugin_components_13$3,D=_sfc_main$3O,F=__unplugin_components_0$y;return openBlock(),createElementBlock("div",{class:normalizeClass(["link-panel",{closed:!s.value,mobile:unref(isMobileDevice)}]),id:"linkPanel",style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$2$,[createTextVNode(toDisplayString$1(E.$t("linkPanel.linkTo"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(T,{key:0,class:"close-button",onClick:M})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$V,[createVNode(D,{className:o.value==="URL"?"active":"",isActive:o.value==="URL","data-element":"URL",onClick:P[0]||(P[0]=I=>y("URL"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(E.$t("linkPanel.url")),1)]),_:1},8,["className","isActive"]),createVNode(D,{className:o.value==="PAGE"?"active":"",isActive:o.value==="PAGE","data-element":"PAGE",onClick:P[1]||(P[1]=I=>y("PAGE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(E.$t("linkPanel.goToPages")),1)]),_:1},8,["className","isActive"]),createVNode(D,{className:o.value==="EMAIL"?"active":"",isActive:o.value==="EMAIL","data-element":"EMAIL",onClick:P[2]||(P[2]=I=>y("EMAIL"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(E.$t("linkPanel.email")),1)]),_:1},8,["className","isActive"])]),createBaseVNode("div",_hoisted_3$F,[createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="URL"}])},[withDirectives(createBaseVNode("input",{type:"text",placeholder:"https://www.example.com","onUpdate:modelValue":P[3]||(P[3]=I=>isRef(f)?f.value=I:f=I),name:"link"},null,512),[[vModelText,unref(f)]]),withDirectives(createVNode(F,{onClick:S},null,512),[[vShow,unref(f)]])],2),createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="PAGE"}])},[withDirectives(createBaseVNode("input",{type:"text",pattern:"\\d*",placeholder:`1~${d.value}`,"onUpdate:modelValue":P[4]||(P[4]=I=>isRef(g)?g.value=I:g=I),onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",name:"link"},null,8,_hoisted_4$y),[[vModelText,unref(g)]]),withDirectives(createVNode(F,{onClick:S},null,512),[[vShow,unref(g)]])],2),createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="EMAIL"}])},[withDirectives(createBaseVNode("input",{type:"text",placeholder:"support@compdf.com","onUpdate:modelValue":P[5]||(P[5]=I=>isRef(m)?m.value=I:m=I),name:"link"},null,512),[[vModelText,unref(m)]]),withDirectives(createVNode(F,{onClick:S},null,512),[[vShow,unref(m)]])],2),createBaseVNode("div",{class:normalizeClass(["save rect-button blue",{disabled:!v()}]),onClick:x},toDisplayString$1(E.$t("linkPanel.go")),3)])],6)}}},_imports_0=""+new URL("../images/stamp/Approved.png",import.meta.url).href,_imports_1=""+new URL("../images/stamp/NotApproved.png",import.meta.url).href,_imports_2=""+new URL("../images/stamp/Completed.png",import.meta.url).href,_imports_3=""+new URL("../images/stamp/Final.png",import.meta.url).href,_imports_4=""+new URL("../images/stamp/Draft.png",import.meta.url).href,_imports_5=""+new URL("../images/stamp/Confidential.png",import.meta.url).href,_imports_6=""+new URL("../images/stamp/ForPublicRelease.png",import.meta.url).href,_imports_7=""+new URL("../images/stamp/NotForPublicRelease.png",import.meta.url).href,_imports_8=""+new URL("../images/stamp/ForComment.png",import.meta.url).href,_imports_9=""+new URL("../images/stamp/Void.png",import.meta.url).href,_imports_10=""+new URL("../images/stamp/PreliminaryResults.png",import.meta.url).href,_imports_11=""+new URL("../images/stamp/InformationOnly.png",import.meta.url).href,_imports_12=""+new URL("../images/stamp/Witness.png",import.meta.url).href,_imports_13=""+new URL("../images/stamp/InitialHere.png",import.meta.url).href,_imports_14=""+new URL("../images/stamp/SignHere.png",import.meta.url).href,_imports_15=""+new URL("../images/stamp/revised.png",import.meta.url).href,StampPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$2_={class:"sidebar-title"},_hoisted_2$U={class:"sidebar-tabs-header"},_hoisted_3$E={class:"sidebar-content"},_hoisted_4$x={class:"dynamic-stamp red"},_hoisted_5$r={class:"dynamic-stamp green"},_sfc_main$3q={__name:"StampPanel",props:["isHeaderDisabled"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),s=useDocumentStore(),u=computed(()=>o.getActiveElementTab("stampPanel")),d=computed(()=>o.isElementOpen("stampPanel")),f=computed(()=>s.getActiveTool),g=computed(()=>o.getCurrentPage),m=ref("");onMounted(()=>{v(),setInterval(v,1e3)}),watch(()=>f.value,(k,S)=>{k!=="stamp"&&o.closeElement("stampPanel")}),watch(()=>d.value,(k,S)=>{k&&y("STANDARD")});const y=k=>{o.setActiveElementTab("stampPanel",k)},v=()=>{const k=new Date;m.value=_(k)},_=k=>{const S=k.getFullYear(),M=String(k.getMonth()+1).padStart(2,"0"),E=String(k.getDate()).padStart(2,"0"),P=String(k.getHours()).padStart(2,"0"),T=String(k.getMinutes()).padStart(2,"0"),D=String(k.getSeconds()).padStart(2,"0");return`${E}/${M}/${S} ${P}:${T}:${D}`},w=k=>{const S=k instanceof PointerEvent||k instanceof MouseEvent||typeof k=="object",M={page:g.value,stampType:S?"standard":"dynamic"};S?M.stampContainer=k.target:(M.color=k,M.shape="0",M.stampContainer={width:190,height:36},M.text="REVISED",M.time=m.value),core.handleStamp(M),window.innerWidth<=640&&(s.setToolState("stamp"),o.toggleActiveHand(!1),n(0),r(0),o.closeElement("stampPanel"))},x=()=>{o.closeElement("stampPanel"),s.setToolState("")};return(k,S)=>{const M=__unplugin_components_13$3,E=_sfc_main$3O;return openBlock(),createElementBlock("div",{class:normalizeClass(["stamp-panel",{closed:!d.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$2_,[createTextVNode(toDisplayString$1(k.$t("header.stamp"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(M,{key:0,class:"close-button",onClick:x})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$U,[createVNode(E,{className:u.value==="STANDARD"?"active":"",isActive:u.value==="STANDARD","data-element":"STANDARD",onClick:S[0]||(S[0]=P=>y("STANDARD"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(k.$t("stampPanel.standard")),1)]),_:1},8,["className","isActive"]),createVNode(E,{className:u.value==="DYNAMIC"?"active":"",isActive:u.value==="DYNAMIC","data-element":"DYNAMIC",onClick:S[1]||(S[1]=P=>y("DYNAMIC"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(k.$t("stampPanel.dynamic")),1)]),_:1},8,["className","isActive"])]),createBaseVNode("div",_hoisted_3$E,[createBaseVNode("div",{class:normalizeClass(["standard-container",{hidden:u.value!=="STANDARD"}])},[createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_0,alt:"Approved"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_1,alt:"Not Approved"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_2,alt:"Completed"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_3,alt:"Final"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_4,alt:"Draft"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_5,alt:"Confidential"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_6,alt:"For Public Release"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_7,alt:"Not For Public Release"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_8,alt:"For Comment"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_9,alt:"Void"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_10,alt:"Preliminary Results"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_11,alt:"Information Only"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_12,alt:"Witness"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_13,alt:"Initial Here"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_14,alt:"Sign Here"})]),createBaseVNode("div",{class:"block"},[createBaseVNode("img",{onClick:w,src:_imports_15,alt:"revised"})])],2),createBaseVNode("div",{class:normalizeClass(["customize-container",{hidden:u.value!=="DYNAMIC"}])},[createBaseVNode("div",{class:"block",onClick:S[2]||(S[2]=P=>w(1))},[createBaseVNode("div",_hoisted_4$x,[S[4]||(S[4]=createBaseVNode("p",{class:"title"},"REVISED",-1)),createBaseVNode("p",null,toDisplayString$1(m.value),1)])]),createBaseVNode("div",{class:"block",onClick:S[3]||(S[3]=P=>w(2))},[createBaseVNode("div",_hoisted_5$r,[S[5]||(S[5]=createBaseVNode("p",{class:"title"},"REVISED",-1)),createBaseVNode("p",null,toDisplayString$1(m.value),1)])])],2)])],6)}}},_sfc_main$3p={},_hoisted_1$2Z={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1Y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2Z,n[0]||(n[0]=[createBaseVNode("mask",{id:"path-1-inside-1_334_4981",fill:"white"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.58408 11.3387C4.3368 11.6625 7.20552 10.7684 9.31754 8.65635C11.1899 6.78404 12.105 4.31705 12.0631 1.86338C12.9045 2.2377 13.6927 2.76991 14.3828 3.46C17.399 6.47625 17.399 11.3666 14.3828 14.3828C11.3665 17.3991 6.47623 17.3991 3.45998 14.3828C2.57505 13.4979 1.94975 12.4516 1.58408 11.3387Z"})],-1),createBaseVNode("path",{d:"M1.58412 11.3387L1.75933 9.849L-0.574465 9.57451L0.159076 11.807L1.58412 11.3387ZM12.0631 1.86337L12.6728 0.492869L10.5232 -0.46347L10.5634 1.889L12.0631 1.86337ZM8.25692 7.59568C6.48322 9.36938 4.07577 10.1214 1.75933 9.849L1.40891 12.8285C4.59792 13.2035 7.9279 12.1673 10.3782 9.717L8.25692 7.59568ZM10.5634 1.889C10.5986 3.95285 9.82995 6.02265 8.25692 7.59568L10.3782 9.717C12.5498 7.54541 13.6115 4.68123 13.5629 1.83774L10.5634 1.889ZM11.4535 3.23387C12.1295 3.5346 12.7642 3.96264 13.3222 4.52064L15.4435 2.39932C14.6213 1.57714 13.6796 0.940768 12.6728 0.492869L11.4535 3.23387ZM13.3222 4.52064C15.7526 6.95111 15.7526 10.8917 13.3222 13.3221L15.4435 15.4435C19.0455 11.8414 19.0455 6.00136 15.4435 2.39932L13.3222 4.52064ZM13.3222 13.3221C10.8917 15.7526 6.95115 15.7526 4.52068 13.3221L2.39936 15.4435C6.0014 19.0455 11.8415 19.0455 15.4435 15.4435L13.3222 13.3221ZM4.52068 13.3221C3.80572 12.6072 3.30315 11.7652 3.00916 10.8705L0.159076 11.807C0.596442 13.1381 1.34447 14.3886 2.39936 15.4435L4.52068 13.3221Z",fill:"currentColor",mask:"url(#path-1-inside-1_334_4981)"},null,-1)]))}const __unplugin_components_2$c=_export_sfc(_sfc_main$3p,[["render",_sfc_render$1Y]]),_sfc_main$3o={},_hoisted_1$2Y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1X(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2Y,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99938 3.50634C9.58517 3.50634 9.24938 3.17055 9.24938 2.75634V1.57727C9.24938 1.16306 9.58517 0.827271 9.99938 0.827271C10.4136 0.827271 10.7494 1.16306 10.7494 1.57727V2.75634C10.7494 3.17055 10.4136 3.50634 9.99938 3.50634ZM14.7034 9.9044C14.7034 12.5498 12.5589 14.6944 9.91347 14.6944C7.26804 14.6944 5.1235 12.5498 5.1235 9.9044C5.1235 7.25898 7.26804 5.11444 9.91347 5.11444C12.5589 5.11444 14.7034 7.25898 14.7034 9.9044ZM14.5886 4.34193C14.2954 4.63444 14.2954 5.1087 14.5886 5.40121C14.8819 5.69373 15.3574 5.69373 15.6507 5.40121L16.4865 4.56749C16.7798 4.27497 16.7798 3.80071 16.4865 3.5082C16.1933 3.21569 15.7178 3.21569 15.4245 3.5082L14.5886 4.34193ZM16.4906 9.97809C16.4906 9.56388 16.8264 9.22809 17.2406 9.22809H18.4227C18.837 9.22809 19.1727 9.56388 19.1727 9.97809C19.1727 10.3923 18.837 10.7281 18.4227 10.7281H17.2406C16.8264 10.7281 16.4906 10.3923 16.4906 9.97809ZM15.6507 14.555C15.3574 14.2624 14.8819 14.2624 14.5887 14.555C14.2954 14.8475 14.2954 15.3217 14.5887 15.6142L15.4245 16.448C15.7178 16.7405 16.1933 16.7405 16.4866 16.448C16.7798 16.1555 16.7798 15.6812 16.4866 15.3887L15.6507 14.555ZM9.99947 16.4497C10.4137 16.4497 10.7495 16.7855 10.7495 17.1997V18.3788C10.7495 18.793 10.4137 19.1288 9.99947 19.1288C9.58526 19.1288 9.24947 18.793 9.24947 18.3788V17.1997C9.24947 16.7855 9.58526 16.4497 9.99947 16.4497ZM5.41081 15.6142C5.70408 15.3217 5.70408 14.8474 5.41081 14.5549C5.11754 14.2624 4.64205 14.2624 4.34878 14.5549L3.51289 15.3887C3.21962 15.6812 3.21962 16.1554 3.51289 16.4479C3.80616 16.7405 4.28165 16.7405 4.57492 16.4479L5.41081 15.6142ZM3.50939 9.97805C3.50939 10.3923 3.1736 10.728 2.75939 10.728H1.57727C1.16306 10.728 0.827271 10.3923 0.827271 9.97805C0.827271 9.56384 1.16306 9.22805 1.57727 9.22805H2.75939C3.1736 9.22805 3.50939 9.56384 3.50939 9.97805ZM4.34874 5.40119C4.64201 5.6937 5.1175 5.6937 5.41077 5.40119C5.70405 5.10867 5.70405 4.63442 5.41077 4.3419L4.57489 3.50818C4.28162 3.21566 3.80613 3.21566 3.51286 3.50818C3.21958 3.80069 3.21958 4.27495 3.51286 4.56746L4.34874 5.40119Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$x=_export_sfc(_sfc_main$3o,[["render",_sfc_render$1X]]),_sfc_main$3n={},_hoisted_1$2X={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1W(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2X,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22.5 5H2.5V19H22.5V5ZM6.34628 13.75L6.6731 12.7365H8.05023L8.37455 13.75H8.96333L7.66353 10H7.05979L5.76 13.75H6.34628ZM7.90054 12.2687H6.82279L7.33921 10.6575H7.38162L7.90054 12.2687ZM12 18V6H13V18H12ZM18.0694 12.6923C18.0694 13.3498 17.6078 13.75 16.8394 13.75H15.36V10H16.807C17.4831 10 17.8897 10.3586 17.8897 10.933V10.9381C17.8897 11.328 17.6128 11.6788 17.2585 11.7412V11.7853C17.745 11.8399 18.0694 12.1985 18.0694 12.6871V12.6923ZM15.9188 11.5956H16.5825C17.0764 11.5956 17.3334 11.4033 17.3334 11.0395V11.0343C17.3334 10.6809 17.0914 10.4756 16.6773 10.4756H15.9188V11.5956ZM16.7272 13.2744H15.9188V12.04H16.6947C17.2211 12.04 17.498 12.2479 17.498 12.6507V12.6559C17.498 13.0587 17.2311 13.2744 16.7272 13.2744Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_6$6=_export_sfc(_sfc_main$3n,[["render",_sfc_render$1W]]),_sfc_main$3m={},_hoisted_1$2W={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1V(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2W,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 4V20H20.5V4H3.5ZM4 12.5H20V11.5H4V12.5ZM11.4511 9.23649L11.1107 10.25H10.5L11.854 6.5H12.4828L13.8368 10.25H13.2235L12.8857 9.23649H11.4511ZM11.6071 8.76871H12.7297L12.1892 7.15748H12.145L11.6071 8.76871ZM13.8222 16.3923C13.8222 17.0498 13.3415 17.45 12.5411 17.45H11V13.7H12.5073C13.2115 13.7 13.6351 14.0586 13.6351 14.633V14.6382C13.6351 15.028 13.3467 15.3788 12.9777 15.4412V15.4854C13.4844 15.5399 13.8222 15.8986 13.8222 16.3871V16.3923ZM11.5821 15.2956H12.2734C12.7879 15.2956 13.0556 15.1033 13.0556 14.7395V14.7343C13.0556 14.3809 12.8035 14.1756 12.3721 14.1756H11.5821V15.2956ZM12.4241 16.9744H11.5821V15.74H12.3903C12.9387 15.74 13.2271 15.9479 13.2271 16.3507V16.3559C13.2271 16.7587 12.9491 16.9744 12.4241 16.9744Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_5$6=_export_sfc(_sfc_main$3m,[["render",_sfc_render$1V]]),_sfc_main$3l={},_hoisted_1$2V={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1U(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2V,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 15H1V21H11V15ZM23 15H13V21H23V15Z",fill:"currentColor"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 3H8L11 6.2V13H1V3Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$d=_export_sfc(_sfc_main$3l,[["render",_sfc_render$1U]]),_sfc_main$3k={},_hoisted_1$2U={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1T(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2U,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 5H1V19H11V5ZM19 5H13V19H23V9.2L19 5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$d=_export_sfc(_sfc_main$3k,[["render",_sfc_render$1T]]),_sfc_main$3j={},_hoisted_1$2T={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1S(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2T,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 4H14L18 8.2V20H6V4Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_1$c=_export_sfc(_sfc_main$3j,[["render",_sfc_render$1S]]),RightPanelPageMode_vue_vue_type_style_index_0_lang="",_hoisted_1$2S={class:"sidebar-title"},_hoisted_2$T={class:"mode-container"},_hoisted_3$D={class:"mode-item"},_hoisted_4$w={class:"mode-tabs"},_hoisted_5$q={class:"mode-item"},_hoisted_6$n={class:"mode-tabs"},_hoisted_7$j={class:"mode-item"},_hoisted_8$g={class:"mode-tabs"},_sfc_main$3i={__name:"RightPanelPageMode",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen("pageModePanel")),s=computed(()=>n.getScrollMode),u=computed(()=>n.getPageMode),d=computed(()=>n.getThemeMode),f=computed(()=>r.getActiveTool);watch(o,(_,w)=>{_&&f.value==="cropPage"&&r.setToolState("")});const g=(_,w)=>{u.value!==0&&_==="Horizontal"&&(core.switchSpreadMode(0),n.setPageMode(0)),n.setScrollMode(_),core.switchScrollMode(w)},m=_=>{s.value==="Horizontal"&&(n.setScrollMode("Vertical"),core.switchScrollMode(0)),core.switchSpreadMode(_),n.setPageMode(_)},y=_=>{_!==d.value&&n.setThemeMode(_)},v=()=>{n.closeElement("pageModePanel")};return(_,w)=>{const x=__unplugin_components_13$3,k=__unplugin_components_1$c,S=_sfc_main$3O,M=__unplugin_components_3$d,E=__unplugin_components_4$d,P=__unplugin_components_5$6,T=__unplugin_components_6$6,D=__unplugin_components_0$x,F=__unplugin_components_2$c;return openBlock(),createElementBlock("div",{class:normalizeClass(["right-panel-page",{closed:!o.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 44px)"})},[unref(isMobileDevice)?(openBlock(),createBlock(x,{key:0,class:"close-button",onClick:v})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$2S,toDisplayString$1(_.$t("header.viewSetting")),1),createBaseVNode("div",_hoisted_2$T,[createBaseVNode("div",_hoisted_3$D,[createBaseVNode("h2",null,toDisplayString$1(_.$t("pageModePanel.displayMode")),1),createBaseVNode("div",_hoisted_4$w,[createVNode(S,{class:normalizeClass({active:u.value===0}),onClick:w[0]||(w[0]=I=>m(0)),title:_.$t("pageModePanel.singlePage")},{default:withCtx(()=>[createVNode(k)]),_:1},8,["class","title"]),createVNode(S,{class:normalizeClass({active:u.value===1}),onClick:w[1]||(w[1]=I=>m(1)),title:_.$t("pageModePanel.twoPages")},{default:withCtx(()=>[createVNode(M)]),_:1},8,["class","title"]),createVNode(S,{class:normalizeClass({active:u.value===2}),onClick:w[2]||(w[2]=I=>m(2)),title:_.$t("pageModePanel.coverMode")},{default:withCtx(()=>[createVNode(E)]),_:1},8,["class","title"])])]),createBaseVNode("div",_hoisted_5$q,[createBaseVNode("h2",null,toDisplayString$1(_.$t("pageModePanel.splitView")),1),createBaseVNode("div",_hoisted_6$n,[createVNode(S,{class:normalizeClass({active:s.value==="Vertical"}),onClick:w[3]||(w[3]=I=>g("Vertical",0)),title:_.$t("pageModePanel.vertical")},{default:withCtx(()=>[createVNode(P)]),_:1},8,["class","title"]),createVNode(S,{class:normalizeClass({active:s.value==="Horizontal"}),onClick:w[4]||(w[4]=I=>g("Horizontal",1)),title:_.$t("pageModePanel.horizontal")},{default:withCtx(()=>[createVNode(T)]),_:1},8,["class","title"])])]),createBaseVNode("div",_hoisted_7$j,[createBaseVNode("h2",null,toDisplayString$1(_.$t("pageModePanel.themes")),1),createBaseVNode("div",_hoisted_8$g,[createVNode(S,{onClick:w[5]||(w[5]=I=>y("Light")),class:normalizeClass({active:d.value==="Light"}),title:_.$t("header.light")},{default:withCtx(()=>[createVNode(D)]),_:1},8,["class","title"]),createVNode(S,{onClick:w[6]||(w[6]=I=>y("Dark")),class:normalizeClass({active:d.value==="Dark"}),title:_.$t("header.dark")},{default:withCtx(()=>[createVNode(F)]),_:1},8,["class","title"])])])])],6)}}},_sfc_main$3h={},_hoisted_1$2R={width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1R(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2R,n[0]||(n[0]=[createBaseVNode("path",{d:"M5 0.0517578C5.2793 0.0517578 5.47803 0.245117 5.47803 0.524414V7.59814L5.44043 8.74219L7.04639 6.98047L8.271 5.77734C8.35693 5.69141 8.48047 5.64844 8.60938 5.64844C8.87793 5.64844 9.07129 5.85254 9.07129 6.11572C9.07129 6.24463 9.02832 6.35742 8.92627 6.46484L5.35986 10.0366C5.25781 10.144 5.13428 10.1978 5 10.1978C4.86572 10.1978 4.74219 10.144 4.64014 10.0366L1.0791 6.46484C0.977051 6.35742 0.928711 6.24463 0.928711 6.11572C0.928711 5.85254 1.12207 5.64844 1.39062 5.64844C1.51953 5.64844 1.64844 5.69141 1.729 5.77734L2.95361 6.98047L4.56494 8.74756L4.52197 7.59814V0.524414C4.52197 0.245117 4.7207 0.0517578 5 0.0517578Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_7$3=_export_sfc(_sfc_main$3h,[["render",_sfc_render$1R]]),_sfc_main$3g={},_hoisted_1$2Q={width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1Q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2Q,n[0]||(n[0]=[createBaseVNode("path",{d:"M5 10.1978C4.7207 10.1978 4.52197 10.0044 4.52197 9.7251V2.65137L4.56494 1.50195L2.95361 3.26904L1.729 4.47217C1.64844 4.55811 1.51953 4.60107 1.39062 4.60107C1.12207 4.60107 0.928711 4.39697 0.928711 4.13379C0.928711 4.00488 0.977051 3.89209 1.0791 3.78467L4.64014 0.212891C4.74219 0.105469 4.86572 0.0517578 5 0.0517578C5.13428 0.0517578 5.25781 0.105469 5.35986 0.212891L8.92627 3.78467C9.02832 3.89209 9.07129 4.00488 9.07129 4.13379C9.07129 4.39697 8.87793 4.60107 8.60938 4.60107C8.48047 4.60107 8.35693 4.55811 8.271 4.47217L7.04639 3.26904L5.44043 1.50732L5.47803 2.65137V9.7251C5.47803 10.0044 5.2793 10.1978 5 10.1978Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_6$5=_export_sfc(_sfc_main$3g,[["render",_sfc_render$1Q]]),_sfc_main$3f={},_hoisted_1$2P={width:"10",height:"2",viewBox:"0 0 10 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1P(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2P,n[0]||(n[0]=[createBaseVNode("path",{d:"M1.04688 1.61084C0.789062 1.61084 0.568848 1.39062 0.568848 1.12744C0.568848 0.864258 0.789062 0.649414 1.04688 0.649414H8.95312C9.21094 0.649414 9.43115 0.864258 9.43115 1.12744C9.43115 1.39062 9.21094 1.61084 8.95312 1.61084H1.04688Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_5$5=_export_sfc(_sfc_main$3f,[["render",_sfc_render$1P]]),_sfc_main$3e={},_hoisted_1$2O={width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1O(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2O,n[0]||(n[0]=[createBaseVNode("path",{d:"M5 9.6499C4.73682 9.6499 4.52197 9.44043 4.52197 9.18262V5.61084H1.04688C0.789062 5.61084 0.568848 5.39062 0.568848 5.12744C0.568848 4.86426 0.789062 4.64941 1.04688 4.64941H4.52197V1.07227C4.52197 0.814453 4.73682 0.60498 5 0.60498C5.26318 0.60498 5.4834 0.814453 5.4834 1.07227V4.64941H8.95312C9.21094 4.64941 9.43115 4.86426 9.43115 5.12744C9.43115 5.39062 9.21094 5.61084 8.95312 5.61084H5.4834V9.18262C5.4834 9.44043 5.26318 9.6499 5 9.6499Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$c=_export_sfc(_sfc_main$3e,[["render",_sfc_render$1O]]),_sfc_main$3d={},_hoisted_1$2N={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function _sfc_render$1N(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2N,n[0]||(n[0]=[createStaticVNode('<mask id="mask0_3348_1984" style="mask-type:luminance;" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24"><circle cx="12" cy="12" r="12" fill="white"></circle></mask><g mask="url(#mask0_3348_1984)"><rect x="-22.2856" y="-29.1428" width="65.1427" height="80.5713" fill="url(#pattern0_3348_1984)"></rect></g><defs><pattern id="pattern0_3348_1984" patternContentUnits="objectBoundingBox" width="1" height="1"><use xlink:href="#image0_3348_1984" transform="scale(0.0263158 0.0212766)"></use></pattern><image id="image0_3348_1984" width="38" height="47" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAvCAYAAACPMrhmAAAKs2lDQ1BJQ0MgUHJvZmlsZQAASImVlgdUE9kax+/MpBdaAAEpoTfpLYD0Grp0EJWQUEKJMSGI2FBZVEBRRETAhi6CKLgWQNaCiGJFUSkquiCLirIuFkRFZQd4hLfvnffeeV/ON/d3vtz57n/uzD3nDwClj8Xnp8JSAKTx0gXBXq70yKhoOv45QAAWSAFFoMJiC/kuQUF+AI3Z8e/xqRtAU+MDo6le//7/fw1pTryQDQAUhHIcR8hOQ/kMmq1sviAdACQTrWuuTOdPcQXKsgJUIMonpzhxhtumOG6Ge6fnhAa7oTwCAIHCYgkSASB/Ruv0DHYi2oeigLIpj8PloeyNsiM7icVBeQvKC9LSlk8xqgHoxf1Tn8S/9YwT92SxEsU88yzTQXDnCvmprFX/53b870hLFc2uoYEmJUngHYyOSuieVacs9xUzLy4gcJa5nOn505wk8g6bZbbQLXqWOSx331kWpYS5zDJLMHcvN50ZOsuC5cHi/rzUAD9x/3immOOFHiGznMD1ZM5yVlJoxCxncMMDZlmYEuI7N8dNXBeIgsWaEwSe4mdME85pY7Pm1kpPCvWe0xAp1sOJd/cQ13lh4vn8dFdxT35q0Jz+VC9xXZgRIr43Hf3AZjmZ5RM01ydIvD8gHEQCc2CB/qwBHYQADxAMmOgVXTU9PjN9Srjbcv4qATcxKZ3ugp6ceDqTxzZeQDc3NWMAMHUOZ17zh97p8wXJE+ZqQvQ7X2gJAMZ8rhajBsDJCwBIbZur6TwDgCYBwEUeWyTImKlhpi5YQAKSQBY94apAE+gBI1SrNbAHzqhCHxAIQkEUWArYIAmkAQFYCdaADSAX5IMdYDcoAwfAYVANToBToBGcB5fBNXAL3ANd4AnoB0PgDRgFn8AEBEF4iArRIEVIDdKGDCFziAE5Qh6QHxQMRUGxUCLEg0TQGmgTlA8VQWXQIagG+gU6B12GbkCd0CNoABqG3kNfYQSmwLKwCqwDm8AM2AX2hUPhJXAivALOgnPg7XApXAkfhxvgy/AtuAvuh9/AYwhAyIg8oo4YIQzEDQlEopEERICsQ/KQEqQSqUOakXbkAdKPjCBfMDgMDUPHGGHsMd6YMAwbswKzDlOAKcNUYxowbZgHmAHMKOYHlopVxhpi7bBMbCQ2EbsSm4stwVZhz2KvYruwQ9hPOBxOHqeLs8F546JwybjVuALcPlw9rgXXiRvEjeHxeEW8Id4BH4hn4dPxufi9+OP4S/j7+CH8ZwKZoEYwJ3gSogk8wkZCCeEY4SLhPuElYYIoRdQm2hEDiRziKmIh8QixmXiXOEScIEmTdEkOpFBSMmkDqZRUR7pK6iN9IJPJGmRb8iIyl5xNLiWfJF8nD5C/UGQoBhQ3SgxFRNlOOUppoTyifKBSqTpUZ2o0NZ26nVpDvUJ9Rv0sQZMwlmBKcCTWS5RLNEjcl3grSZTUlnSRXCqZJVkieVryruSIFFFKR8pNiiW1Tqpc6pxUj9SYNE3aTDpQOk26QPqY9A3pVzJ4GR0ZDxmOTI7MYZkrMoM0hKZJc6OxaZtoR2hXaUOyOFldWaZssmy+7AnZDtlRORk5S7lwuUy5crkLcv3yiLyOPFM+Vb5Q/pR8t/zXeSrzXObFz9s6r27e/XnjCvMVnBXiFfIU6hW6FL4q0hU9FFMUdyo2Kj5VwigZKC1SWqm0X+mq0sh82fn289nz8+afmv9YGVY2UA5WXq18WPm28piKqoqXCl9lr8oVlRFVeVVn1WTVYtWLqsNqNDVHNa5asdoltdd0OboLPZVeSm+jj6orq3uri9QPqXeoT2joaoRpbNSo13iqSdJkaCZoFmu2ao5qqWn5a63RqtV6rE3UZmgnae/Rbtce19HVidDZrNOo80pXQZepm6Vbq9unR9Vz0luhV6n3UB+nz9BP0d+nf88ANrAySDIoN7hrCBtaG3IN9xl2LsAusF3AW1C5oMeIYuRilGFUazRgLG/sZ7zRuNH4rYmWSbTJTpN2kx+mVqappkdMn5jJmPmYbTRrNntvbmDONi83f2hBtfC0WG/RZPHO0tAy3nK/Za8VzcrfarNVq9V3axtrgXWd9bCNlk2sTYVND0OWEcQoYFy3xdq62q63PW/7xc7aLt3ulN2f9kb2KfbH7F8t1F0Yv/DIwkEHDQeWwyGHfke6Y6zjQcd+J3UnllOl03NnTWeOc5XzSxd9l2SX4y5vXU1dBa5nXcfd7NzWurW4I+5e7nnuHR4yHmEeZR7PPDU8Ez1rPUe9rLxWe7V4Y719vXd69zBVmGxmDXPUx8ZnrU+bL8U3xLfM97mfgZ/Ar9kf9vfx3+XfF6AdwAtoDASBzMBdgU+DdINWBP26CLcoaFH5ohfBZsFrgttDaCHLQo6FfAp1DS0MfRKmFyYKaw2XDI8Jrwkfj3CPKIrojzSJXBt5K0opihvVFI2PDo+uih5b7LF49+KhGKuY3JjuJbpLMpfcWKq0NHXphWWSy1jLTsdiYyNij8V+YwWyKlljccy4irhRtht7D/sNx5lTzBmOd4gvin+Z4JBQlPAq0SFxV+JwklNSSdII141bxn2X7J18IHk8JTDlaMpkakRqfRohLTbtHE+Gl8JrW666PHN5J9+Qn8vvX2G3YveKUYGvoEoICZcIm9JlUcNzW6Qn+kk0kOGYUZ7xeWX4ytOZ0pm8zNurDFZtXfUyyzPr59WY1ezVrWvU12xYM7DWZe2hddC6uHWt6zXX56wfyvbKrt5A2pCy4c5G041FGz9uitjUnKOSk50z+JPXT7W5ErmC3J7N9psPbMFs4W7p2Gqxde/WH3mcvJv5pvkl+d8K2AU3t5ltK902uT1he0ehdeH+HbgdvB3dO512VhdJF2UVDe7y39VQTC/OK/64e9nuGyWWJQf2kPaI9vSX+pU27dXau2Pvt7Kksq5y1/L6CuWKrRXj+zj77u933l93QOVA/oGvB7kHew95HWqo1KksOYw7nHH4xZHwI+0/M36uqVKqyq/6fpR3tL86uLqtxqam5pjyscJauFZUO3w85vi9E+4nmuqM6g7Vy9fnnwQnRSdf/xL7S/cp31Otpxmn685on6k4Szub1wA1rGoYbUxq7G+Kauo853Outdm++eyvxr8ePa9+vvyC3IXCi6SLORcnL2VdGmvht4xcTrw82Lqs9cmVyCsP2xa1dVz1vXr9mue1K+0u7ZeuO1w/f8PuxrmbjJuNt6xvNdy2un32jtWdsx3WHQ13be423bO919y5sPPifaf7lx+4P7j2kPnwVldAV2d3WHdvT0xPfy+n99Wj1EfvHmc8nniS3Yfty3sq9bTkmfKzyt/0f6vvt+6/MOA+cPt5yPMng+zBN78Lf/82lPOC+qLkpdrLmlfmr84Pew7fe7349dAb/puJkdw/pP+oeKv39syfzn/eHo0cHXoneDf5vuCD4oejHy0/to4FjT37lPZpYjzvs+Ln6i+ML+1fI76+nFj5Df+t9Lv+9+Yfvj/6JtMmJ/ksAWvaCiBowgkJALw/CgA1CvUK9wAgScz45OmAZrz9NIH/xDNeejqsAah0BiAMTf8WAA5mox4ETWk0g9BaqDOALSzE+Y8QJliYz/QiN6LWpGRy8gPqD/H6AHzvmZycaJyc/F6Fin0MQMunGX8+FdGoD3Y2mKI7W0nZ4F/iL/OdBdopifIkAAAEQklEQVRYCe2WzYsjRRjGn+5OV3cn6XxOdj7WHXFlHFdxRfak6ODFHUSvggcR9CK4Bw/+IR7FgwdBWA+KshcZFTzo4sJ6ED/AYVlFZnYnmWSSSXfS3elOp316x7mEwKRGD4t0haLo4q2qX5736bdaSdhwHzb1PmS6h5SByWYmUyxTTFYB2fjMY5lisgrIxmcek1UsJ7tgOt4PHPT72/Cc68h520A0wVhdR37hWZQbj8KyStNL5npWTvvZE0Uj3Gl/CVO9ipo4gD6aIBlOgH965IzRHdUQPvgmVh5/GbpuzgV0HHQqMC9wcbv7MVbqX6CiKVADA/A0gmlHYIMIcH3A8RA6IfYXX0Lj+Xdh5e3jc08cpVMZUqnrvQ8gGl+hqBmwUISZs6AIKhLxXYr43amHUHQfiepCjA+x/PM17E1sLF++Aj2Nm6NJg91g+n6pf4NVzUQeZfYS01RELk7hqFwKZowAfwCoBhJFhRqPcebbj7BXOovVjVfnwAKkwFwa/XPxCfScAhMF/krsVVhqFUXCKUIcgeUCQuUBhdunX+7jELrnQ3z2PvxLL8IqlE+EkwK75W7jVvkQC0xgPiGYYlOxCuHqEFoVhrCAkCA5755amKRQVG885HwBtd0Wun/8BuuJZ04EkyqwP4xuwmEKXdjosnforzZV6xDOVRcQ60uAWCFUg0pVCcRSEVK5gL7yTGh9Df73X58IlQZIKbad2+eSRST0VqzU4KOGIfXrc3SoWp4ptZQEypj/d0TVRlTQJ5hH7w2Y5p4G48ff5wPb2tqaGbi5uTlj/qhYKoQCYRL2mEAh+5AKuSF95icQAQ3PkdQEY23zx4Tjc8Aez1dwc7MBZjBxan18Hj8pbcJUEBEmJliYKpdU4FAZJU1VFygdVlEYWMj5NlSPRg+YVr/O8tFA8NTa7M2nZqVS+bRxAZ/GKiKNQITyCOXGZRi+AeVQwbAFFA4SDAlY6eVh9wVM14bm1AjYwFicQX7j4hTC7EcpsDX7ATT6TXRry/BoeidiDRvqSAgVtFm+mgmsToKBy8z1gXJHQ6lro9A1YcYV9M4JlNdWZ5NMzUqB2WYBr/cW8V5MP01KUB1eQT16nDAuwcTdBCbHAWtrWl+HB+wtBWVXwKb/g7frWCoWphBmP0qBpVu8sHAeu607uKqXEPPgsE2FOoC5nyB3l7cR0znoJwj4Ug7pN4/gvjbB4JUmHrs8n1rpOdJghi7w2sIinNs7uNZZht+ijwglmoC2SzCqNkhhWPy9kOAiRPWtFtbeWOI9yZIxZ5MGS/ctmnm888hZrGMHH/5poNmuA02B5K8E2h6BWCESPULhoQ4uXAlxafMchARUesapPnvShcfN9Txs7/Tw3c0Bfr1hsX4BT1708dxGEQ+v8Q4tssCeov1rsFOcOdcSqbtyrh3/o6AMTFbITLFMMVkFZOMzj2WKySogG5957H+j2N8vPYhqDhnSbgAAAABJRU5ErkJggg=="></image></defs>',3)]))}const __unplugin_components_16$1=_export_sfc(_sfc_main$3d,[["render",_sfc_render$1N]]),_sfc_main$3c={},_hoisted_1$2M={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1M(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2M,n[0]||(n[0]=[createBaseVNode("rect",{width:"14",height:"14",rx:"1",fill:"#2D77FA"},null,-1),createBaseVNode("path",{d:"M10.2784 5.27848L5.84653 9.71032L4.20261 8.06642",stroke:"white","stroke-width":"1.5","stroke-linecap":"square"},null,-1)]))}const __unplugin_components_1$b=_export_sfc(_sfc_main$3c,[["render",_sfc_render$1M]]),_sfc_main$3b={__name:"RightPanelTabs",props:["activePanelTab"],setup(e){const n=useViewerStore(),r=(o,s)=>{n.setActiveElementTab("rightPanel",o)};return(o,s)=>{const u=_sfc_main$3O;return openBlock(),createElementBlock(Fragment,null,[createVNode(u,{className:e.activePanelTab==="GENERAL"?"active":"","data-element":"GENERAL",isActive:e.activePanelTab==="GENERAL",onClick:s[0]||(s[0]=d=>r("GENERAL"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.general")),1)]),_:1},8,["className","isActive"]),s[3]||(s[3]=createBaseVNode("div",{class:"divider"},null,-1)),createVNode(u,{className:e.activePanelTab==="APPEARANCE"?"active":"","data-element":"APPEARANCE",isActive:e.activePanelTab==="APPEARANCE",onClick:s[1]||(s[1]=d=>r("APPEARANCE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.appearance")),1)]),_:1},8,["className","isActive"]),s[4]||(s[4]=createBaseVNode("div",{class:"divider"},null,-1)),createVNode(u,{className:e.activePanelTab==="PREFERENCE"?"active":"","data-element":"PREFERENCE",isActive:e.activePanelTab==="PREFERENCE",onClick:s[2]||(s[2]=d=>r("PREFERENCE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.preferences")),1)]),_:1},8,["className","isActive"])],64)}}},RightPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$2L={class:"sidebar-title"},_hoisted_2$S={class:"sidebar-tabs-header"},_hoisted_3$C={class:"sidebar-content"},_hoisted_4$v={class:"content-block"},_hoisted_5$p={key:0,class:"error-text"},_hoisted_6$m={key:0,class:"content-block"},_hoisted_7$i={class:"content-block"},_hoisted_8$f={value:"0"},_hoisted_9$c={value:"1"},_hoisted_10$a={class:"content-block"},_hoisted_11$a={class:"content-block"},_hoisted_12$a={class:"wider"},_hoisted_13$a={class:"colors-container"},_hoisted_14$a={class:"cell-container"},_hoisted_15$a={class:"cell-container"},_hoisted_16$a={class:"cell-container"},_hoisted_17$7={class:"cell-container"},_hoisted_18$7={class:"color-picker"},_hoisted_19$7={class:"content-block"},_hoisted_20$7={class:"wider"},_hoisted_21$6={class:"colors-container"},_hoisted_22$6={class:"cell-container"},_hoisted_23$6={class:"cell-container"},_hoisted_24$6={class:"cell-container"},_hoisted_25$4={class:"color-picker"},_hoisted_26$4={class:"content-block"},_hoisted_27$4={class:"content-block"},_hoisted_28$4={class:"text-style"},_hoisted_29$3={value:"normal"},_hoisted_30$3={value:"bold"},_hoisted_31$3={value:"italic"},_hoisted_32$2={value:"boldItalic"},_hoisted_33$1={class:"content-block"},_hoisted_34$1={value:"left"},_hoisted_35$1={value:"center"},_hoisted_36$1={value:"right"},_hoisted_37$1={class:"content-block"},_hoisted_38$1={class:"content-block"},_hoisted_39$1={class:"content-block"},_hoisted_40$1={value:"0"},_hoisted_41$1={value:"1"},_hoisted_42$1={value:"2"},_hoisted_43$1={value:"3"},_hoisted_44$1={value:"4"},_hoisted_45$1={value:"5"},_hoisted_46$1={class:"content-block"},_hoisted_47$1={class:"content-block"},_hoisted_48$1={class:"content-block"},_hoisted_49$1={value:"1"},_hoisted_50$1={value:"6"},_hoisted_51$1={class:"content-block"},_hoisted_52$1=["placeholder"],_hoisted_53$1={class:"content-block"},_hoisted_54$1={class:"content-block"},_hoisted_55$1={class:"button-content"},_hoisted_56$1={class:"content-block"},_hoisted_57$1={class:"button-content item-list"},_hoisted_58$1=["onClick"],_hoisted_59$1={class:"buttons"},_sfc_main$3a={__name:"RightPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=getCurrentInstance().appContext.app.config.globalProperties,s=computed(()=>{if(g.value==="form"){if(w.value==="textfield")return o.$t("header.textField");if(w.value==="checkbox")return o.$t("header.checkbox");if(w.value==="radiobutton")return o.$t("header.radioButton");if(w.value==="pushbutton")return o.$t("header.button");if(w.value==="listbox")return o.$t("header.listBox");if(w.value==="combobox")return o.$t("header.comboButton")}}),u=computed(()=>n.getActiveElementTab("rightPanel")),d=computed(()=>n.isElementOpen("rightPanel"));computed(()=>r.getActiveTool);const f=computed(()=>r.getTotalPages),g=computed(()=>n.getToolMode);computed(()=>n.getRightPanelButtonDisabled);let m=reactive(r.propertyPanel),y=m.destPage,v=m.url;ref("Helvetica");const _=ref(!1),w=ref(null),x=ref(null),k=ref(null),S=ref([]),M=ref(!0),E=ref("rgb(0, 0, 0)"),P=ref("rgb(0, 0, 0)"),T=X=>{if(X==="fieldName"&&r.setPropertyPanel({fieldName:m.fieldName}),X==="title"&&r.setPropertyPanel({title:m.title}),X==="destPage"){const Q=m.destPage;Q!==""&&Q!=y&&(r.setPropertyPanel({actionType:1,destPage:Q.toString()}),y=Q)}else if(X==="url"){let Q=m.url;Q!==""?(!Q.startsWith("http://")&&!Q.startsWith("https://")&&(Q="https://"+Q),r.setPropertyPanel({url:Q,actionType:6}),v=Q):m.url=v}};watch(()=>d.value,(X,Q)=>{X&&n.closeElement("pageModePanel")}),watch(()=>m.isHidden,(X,Q)=>{r.setPropertyPanel({isHidden:X})}),watch(()=>m.backgroundColor,(X,Q)=>{r.setPropertyPanel({backgroundColor:X})}),watch(()=>m.color,(X,Q)=>{r.setPropertyPanel({color:X})}),watch(()=>m.fontName,(X,Q)=>{r.setPropertyPanel({fontName:X})}),watch(()=>m.fontStyle,(X,Q)=>{r.setPropertyPanel({fontStyle:X})}),watch(()=>m.fontSize,(X,Q)=>{r.setPropertyPanel({fontSize:X})}),watch(()=>m.textAlignment,(X,Q)=>{r.setPropertyPanel({textAlignment:X})}),watch(()=>m.isMultiLine,(X,Q)=>{r.setPropertyPanel({isMultiLine:X})}),watch(()=>m.projectList,(X,Q)=>{r.setPropertyPanel({projectList:X})}),watch(()=>m.checkStyle,(X,Q)=>{r.setPropertyPanel({checkStyle:parseInt(X)})}),watch(()=>m.isChecked,(X,Q)=>{r.setPropertyPanel({isChecked:+X})}),watch(()=>m.required,(X,Q)=>{r.setPropertyPanel({required:+X})}),watch(()=>m.actionType,(X,Q)=>{(X==="1"&&m.destPage!==""||X==="2"&&m.url!=="")&&r.setPropertyPanel({actionType:X})}),watch(()=>m.destPage,(X,Q)=>{const fe=/^\d+$/;X!==""&&(X>f.value||X<=0||!fe.test(X))&&(m.destPage=Q)});const D=X=>{if(x.value="",k.value=null,m.required=0,X)w.value=X.type.replace("-",""),(w.value==="listbox"||w.value==="combobox"||w.value==="pushbutton")&&n.setActiveElementTab("rightPanel","PREFERENCE"),w.value!=="checkbox"&&(M.value=!0);else{w.value=null;return}for(const Q in X)for(const fe in m)Q===fe&&(fe==="items"?S.value=Array.from(X[Q]):m[fe]=X[Q])};core.addEvent("propertyChange",D);const F=(X,Q)=>{m[X]=Q},I=()=>{m.isChecked=!m.isChecked},N=()=>{m.required=!m.required},q=()=>{const X=m.contents===""?" ":m.contents;r.setPropertyPanel({contents:X})},Y=X=>{_.value=X};core.addEvent("judgeRadioBtnIsOne",Y);const Z=X=>{M.value=X};core.addEvent("judgeCheckboxIsOne",Z);const j=(X,Q)=>{k.value=X,x.value=Q},ne=()=>{for(var X=0;X<S.value.length;X++)if(S.value[X]===x.value)return;if(x.value)S.value.push({Value:x.value,String:x.value});else return;k.value=null,r.setPropertyPanel({item:x.value}),x.value=""},le=()=>{for(var X=0;X<S.value.length;X++)S.value[X]===S.value[k.value]&&(S.value.splice(X,1),r.setPropertyPanel({deleteItemIndex:X,selected:0}),x.value="",k.value=null)},J=()=>{if(!!k.value){for(var X=0;X<S.value.length;X++)if(S.value[X]===S.value[k.value]){S.value.splice(X-1,2,S.value[X],S.value[X-1]),r.setPropertyPanel({moveOption:{fromIndex:X,toIndex:X-1}}),k.value-=1;break}}},O=()=>{if(k.value!==S.value.length-1){for(var X=0;X<S.value.length;X++)if(S.value[X]===S.value[k.value]&&X<S.value.length-1){S.value.splice(X,2,S.value[X+1],S.value[X]),r.setPropertyPanel({moveOption:{fromIndex:X,toIndex:X+1}}),k.value+=1;break}}},U=(X,Q)=>{Q==="backgroundColor"&&(E.value=X),Q==="color"&&(P.value=X)},W=(X,Q)=>{areColorsSimilar(X,m[Q])||F(Q,X)},H=()=>{n.closeElement("rightPanel")};return(X,Q)=>{const fe=__unplugin_components_13$3,Se=_sfc_main$3b,Pe=__unplugin_components_1$b,$e=__unplugin_components_16$1,Ie=__unplugin_components_4$c,Ne=__unplugin_components_5$5,Be=__unplugin_components_6$5,be=__unplugin_components_7$3;return openBlock(),createElementBlock("div",{class:normalizeClass(["right-panel",{closed:!d.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$2L,[createTextVNode(toDisplayString$1(s.value)+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(fe,{key:0,class:"close-button",onClick:H})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$S,[createVNode(Se,{activePanelTab:u.value},null,8,["activePanelTab"])]),createBaseVNode("div",_hoisted_3$C,[withDirectives(createBaseVNode("div",{class:"radio-top-tip"},toDisplayString$1(X.$t("rightPanel.radioBtnTip1")),513),[[vShow,_.value&&w.value==="radiobutton"]]),createBaseVNode("div",{class:normalizeClass(["general-container",{hidden:u.value!=="GENERAL"}])},[createBaseVNode("div",_hoisted_4$v,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.name")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Q[0]||(Q[0]=Ve=>unref(m).fieldName=Ve),onBlur:Q[1]||(Q[1]=Ve=>T("fieldName")),name:"form"},null,544),[[vModelText,unref(m).fieldName]]),M.value?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$p,toDisplayString$1(X.$t("rightPanel.differentNameError")),1))]),w.value==="pushbutton"&&g.value==="form"?(openBlock(),createElementBlock("div",_hoisted_6$m,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.buttonText")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Q[2]||(Q[2]=Ve=>unref(m).title=Ve),onBlur:Q[3]||(Q[3]=Ve=>T("title")),name:"form"},null,544),[[vModelText,unref(m).title]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_7$i,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.formField")),1),withDirectives(createBaseVNode("select",{name:"field",id:"field","onUpdate:modelValue":Q[4]||(Q[4]=Ve=>unref(m).isHidden=Ve)},[createBaseVNode("option",_hoisted_8$f,toDisplayString$1(X.$t("rightPanel.visible")),1),createBaseVNode("option",_hoisted_9$c,toDisplayString$1(X.$t("rightPanel.hidden")),1)],512),[[vModelSelect,unref(m).isHidden]])]),createBaseVNode("div",_hoisted_10$a,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.properties")),1),createBaseVNode("div",{class:"check-box",onClick:N},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(m).required}])},[withDirectives(createVNode(Pe,null,null,512),[[vShow,unref(m).required]])],2),createBaseVNode("span",null,toDisplayString$1(X.$t("rightPanel.requried")),1)])])],2),createBaseVNode("div",{class:normalizeClass(["appearance-container",{hidden:u.value!=="APPEARANCE"}])},[createBaseVNode("div",_hoisted_11$a,[createBaseVNode("h2",_hoisted_12$a,toDisplayString$1(X.$t("rightPanel.backgroundColor")),1),createBaseVNode("div",_hoisted_13$a,[createBaseVNode("span",_hoisted_14$a,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(m).backgroundColor,"rgb(251, 189, 191)")}]),onClick:Q[5]||(Q[5]=Ve=>F("backgroundColor","rgb(251, 189, 191)"))},Q[29]||(Q[29]=[createBaseVNode("span",{class:"cell light-red"},null,-1)]),2)]),createBaseVNode("span",_hoisted_15$a,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(m).backgroundColor,"rgb(255, 255, 255)")}]),onClick:Q[6]||(Q[6]=Ve=>F("backgroundColor","rgb(255, 255, 255)"))},Q[30]||(Q[30]=[createBaseVNode("span",{class:"cell white"},null,-1)]),2)]),createBaseVNode("span",_hoisted_16$a,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(m).backgroundColor,"rgb(253, 244, 178)")||unref(areColorsSimilar)(unref(m).backgroundColor,"rgb(253, 244, 177)")}]),onClick:Q[7]||(Q[7]=Ve=>F("backgroundColor","rgb(253, 244, 178)"))},Q[31]||(Q[31]=[createBaseVNode("span",{class:"cell light-yellow"},null,-1)]),2)]),createBaseVNode("span",_hoisted_17$7,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(m).backgroundColor,"rgb(221, 233, 255)")}]),onClick:Q[8]||(Q[8]=Ve=>F("backgroundColor","rgb(221, 233, 255)"))},Q[32]||(Q[32]=[createBaseVNode("span",{class:"cell light-blue"},null,-1)]),2)]),createBaseVNode("div",_hoisted_18$7,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:E.value})},null,4),createVNode(unref(NColorPicker),{to:".right-panel",onComplete:Q[9]||(Q[9]=Ve=>W(Ve,"backgroundColor")),"onUpdate:value":Q[10]||(Q[10]=Ve=>U(Ve,"backgroundColor")),value:E.value,"show-alpha":!1},{label:withCtx(()=>[createVNode($e)]),_:1},8,["value"])])])]),(w.value==="textfield"||w.value==="pushbutton"||w.value==="combobox"||w.value==="listbox")&&g.value==="form"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_19$7,[createBaseVNode("h2",_hoisted_20$7,toDisplayString$1(X.$t("font")),1),createBaseVNode("div",_hoisted_21$6,[createBaseVNode("span",_hoisted_22$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(m).color,"rgb(255, 0, 0)")}]),onClick:Q[11]||(Q[11]=Ve=>F("color","rgb(255, 0, 0)"))},Q[33]||(Q[33]=[createBaseVNode("span",{class:"cell red"},null,-1)]),2)]),createBaseVNode("span",_hoisted_23$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(m).color,"rgb(0, 0, 0)")}]),onClick:Q[12]||(Q[12]=Ve=>F("color","rgb(0, 0, 0)"))},Q[34]||(Q[34]=[createBaseVNode("span",{class:"cell black"},null,-1)]),2)]),createBaseVNode("span",_hoisted_24$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(m).color,"rgb(45, 119, 250)")||unref(areColorsSimilar)(unref(m).color,"rgb(45, 119, 249)")}]),onClick:Q[13]||(Q[13]=Ve=>F("color","rgb(45, 119, 250)"))},Q[35]||(Q[35]=[createBaseVNode("span",{class:"cell blue"},null,-1)]),2)]),createBaseVNode("div",_hoisted_25$4,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:P.value})},null,4),createVNode(unref(NColorPicker),{to:".right-panel",onComplete:Q[14]||(Q[14]=Ve=>W(Ve,"color")),"onUpdate:value":Q[15]||(Q[15]=Ve=>U(Ve,"color")),value:P.value,"show-alpha":!1},{label:withCtx(()=>[createVNode($e)]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_26$4,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Q[16]||(Q[16]=Ve=>unref(m).fontName=Ve)},Q[36]||(Q[36]=[createBaseVNode("option",{value:"Helvetica"},"Helvetica",-1),createBaseVNode("option",{value:"Courier"},"Courier",-1),createBaseVNode("option",{value:"Times"},"Times-Roman",-1)]),512),[[vModelSelect,unref(m).fontName]])]),createBaseVNode("div",_hoisted_27$4,[createBaseVNode("div",_hoisted_28$4,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Q[17]||(Q[17]=Ve=>unref(m).fontStyle=Ve),class:"font-family-select"},[createBaseVNode("option",_hoisted_29$3,toDisplayString$1(X.$t("regular")),1),createBaseVNode("option",_hoisted_30$3,toDisplayString$1(X.$t("bold")),1),createBaseVNode("option",_hoisted_31$3,toDisplayString$1(X.$t("oblique")),1),createBaseVNode("option",_hoisted_32$2,toDisplayString$1(X.$t("boldOblique")),1)],512),[[vModelSelect,unref(m).fontStyle]]),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Q[18]||(Q[18]=Ve=>unref(m).fontSize=Ve),class:"font-size-select"},Q[37]||(Q[37]=[createStaticVNode('<option value="12">12</option><option value="14">14</option><option value="16">16</option><option value="20">20</option><option value="24">24</option><option value="28">28</option>',6)]),512),[[vModelSelect,unref(m).fontSize]])])])],64)):createCommentVNode("",!0)],2),createBaseVNode("div",{class:normalizeClass(["preferences-container",{hidden:u.value!=="PREFERENCE"}])},[w.value==="textfield"&&g.value==="form"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_33$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.alignment")),1),withDirectives(createBaseVNode("select",{name:"alignment",id:"alignment","onUpdate:modelValue":Q[19]||(Q[19]=Ve=>unref(m).textAlignment=Ve)},[createBaseVNode("option",_hoisted_34$1,toDisplayString$1(X.$t("rightPanel.left")),1),createBaseVNode("option",_hoisted_35$1,toDisplayString$1(X.$t("rightPanel.center")),1),createBaseVNode("option",_hoisted_36$1,toDisplayString$1(X.$t("rightPanel.right")),1)],512),[[vModelSelect,unref(m).textAlignment]])]),createBaseVNode("div",_hoisted_37$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.defaultValue")),1),withDirectives(createBaseVNode("textarea",{name:"default-value",id:"default-value",rows:"3","onUpdate:modelValue":Q[20]||(Q[20]=Ve=>unref(m).contents=Ve),onChange:q},null,544),[[vModelText,unref(m).contents]])]),createBaseVNode("div",_hoisted_38$1,[createBaseVNode("div",{class:"check-box",onClick:Q[21]||(Q[21]=Ve=>unref(m).isMultiLine=!unref(m).isMultiLine)},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(m).isMultiLine}])},[withDirectives(createVNode(Pe,null,null,512),[[vShow,unref(m).isMultiLine]])],2),createBaseVNode("span",null,toDisplayString$1(X.$t("rightPanel.multiLine")),1)])])],64)):createCommentVNode("",!0),(w.value==="checkbox"||w.value==="radiobutton")&&g.value==="form"?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_39$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.buttonStyle")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Q[22]||(Q[22]=Ve=>unref(m).checkStyle=Ve)},[createBaseVNode("option",_hoisted_40$1,toDisplayString$1(X.$t("rightPanel.check")),1),createBaseVNode("option",_hoisted_41$1,toDisplayString$1(X.$t("rightPanel.circle")),1),createBaseVNode("option",_hoisted_42$1,toDisplayString$1(X.$t("rightPanel.cross")),1),createBaseVNode("option",_hoisted_43$1,toDisplayString$1(X.$t("rightPanel.diamond")),1),createBaseVNode("option",_hoisted_44$1,toDisplayString$1(X.$t("rightPanel.square")),1),createBaseVNode("option",_hoisted_45$1,toDisplayString$1(X.$t("rightPanel.star")),1)],512),[[vModelSelect,unref(m).checkStyle]])]),createBaseVNode("div",_hoisted_46$1,[createBaseVNode("div",{class:"check-box",onClick:I},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(m).isChecked}])},[withDirectives(createVNode(Pe,null,null,512),[[vShow,unref(m).isChecked]])],2),createBaseVNode("span",null,toDisplayString$1(X.$t("rightPanel.defaultChecked")),1)])]),createBaseVNode("div",_hoisted_47$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.properties")),1),createBaseVNode("div",{class:"check-box",onClick:N},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(m).required}])},[withDirectives(createVNode(Pe,null,null,512),[[vShow,unref(m).required]])],2),createBaseVNode("span",null,toDisplayString$1(X.$t("rightPanel.requried")),1)])])],64)):createCommentVNode("",!0),w.value==="pushbutton"&&g.value==="form"?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",_hoisted_48$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.selectAction")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Q[23]||(Q[23]=Ve=>unref(m).actionType=Ve)},[withDirectives(createBaseVNode("option",{value:"0"},toDisplayString$1(X.$t("rightPanel.none")),513),[[vShow,unref(m).actionType==0]]),createBaseVNode("option",_hoisted_49$1,toDisplayString$1(X.$t("rightPanel.goPage")),1),createBaseVNode("option",_hoisted_50$1,toDisplayString$1(X.$t("rightPanel.openLink")),1)],512),[[vModelSelect,unref(m).actionType]])]),withDirectives(createBaseVNode("div",_hoisted_51$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.goPage")),1),withDirectives(createBaseVNode("input",{type:"text",pattern:"\\d*",placeholder:X.$t("rightPanel.addPage"),"onUpdate:modelValue":Q[24]||(Q[24]=Ve=>unref(m).destPage=Ve),onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:Q[25]||(Q[25]=Ve=>T("destPage")),name:"form"},null,40,_hoisted_52$1),[[vModelText,unref(m).destPage]])],512),[[vShow,unref(m).actionType==1]]),withDirectives(createBaseVNode("div",_hoisted_53$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.openLink")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:"https://","onUpdate:modelValue":Q[26]||(Q[26]=Ve=>unref(m).url=Ve),onBlur:Q[27]||(Q[27]=Ve=>T("url")),name:"form"},null,544),[[vModelText,unref(m).url]])],512),[[vShow,unref(m).actionType==6]])],64)):createCommentVNode("",!0),(w.value==="combobox"||w.value==="listbox")&&g.value==="form"?(openBlock(),createElementBlock(Fragment,{key:3},[createBaseVNode("div",_hoisted_54$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.item")),1),createBaseVNode("div",_hoisted_55$1,[withDirectives(createBaseVNode("input",{type:"text",class:"item","onUpdate:modelValue":Q[28]||(Q[28]=Ve=>x.value=Ve),name:"form"},null,512),[[vModelText,x.value,void 0,{trim:!0}]]),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:!x.value}]),onClick:ne},[createVNode(Ie)],2)])]),createBaseVNode("div",_hoisted_56$1,[createBaseVNode("h2",null,toDisplayString$1(X.$t("rightPanel.itemList")),1),createBaseVNode("div",_hoisted_57$1,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,(Ve,De)=>(openBlock(),createElementBlock("li",{key:De,class:normalizeClass({active:De===k.value}),onClick:ve=>j(De,Ve.Value)},toDisplayString$1(Ve.Value),11,_hoisted_58$1))),128))]),createBaseVNode("div",_hoisted_59$1,[createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:!k.value&&k.value!==0}]),onClick:le},[createVNode(Ne)],2),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:k.value===0||!k.value}]),onClick:J},[createVNode(Be)],2),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:k.value===S.value.length-1||!k.value&&k.value!==0}]),onClick:O},[createVNode(be)],2)])])])],64)):createCommentVNode("",!0)],2),withDirectives(createBaseVNode("div",{class:"radio-bottom-tip"},toDisplayString$1(X.$t("rightPanel.radioBtnTip2")),513),[[vShow,w.value==="radiobutton"]]),withDirectives(createBaseVNode("div",{class:"radio-bottom-tip"},toDisplayString$1(X.$t("rightPanel.listBoxTip")),513),[[vShow,w.value==="combobox"]])])],6)}}},_sfc_main$39={},_hoisted_1$2K={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1L(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2K,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.6466 13.2531L13.0001 13.6066L13.7072 12.8995L13.3537 12.546L8.7072 7.8995L13.2532 3.35352L13.6067 2.99997L12.8996 2.29286L12.5461 2.64642L8.00009 7.19239L3.45418 2.64648L3.10063 2.29292L2.39352 3.00003L2.74708 3.35358L7.29299 7.8995L2.64657 12.5459L2.29302 12.8995L3.00013 13.6066L3.35368 13.253L8.0001 8.6066L12.6466 13.2531Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$w=_export_sfc(_sfc_main$39,[["render",_sfc_render$1L]]),_sfc_main$38={},_hoisted_1$2J={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"};function _sfc_render$1K(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2J,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.7331 15.7936C15.026 16.0864 15.5009 16.0864 15.7937 15.7936C16.0866 15.5007 16.0866 15.0258 15.7937 14.7329L11.3743 10.3135L15.7938 5.89408C16.0867 5.60119 16.0867 5.12631 15.7938 4.83342C15.5009 4.54052 15.026 4.54053 14.7331 4.83342L10.3137 9.25284L5.89425 4.8334C5.60136 4.54051 5.12649 4.54051 4.83359 4.8334C4.5407 5.12629 4.5407 5.60117 4.83359 5.89406L9.25303 10.3135L4.83361 14.7329C4.54072 15.0258 4.54072 15.5007 4.83361 15.7936C5.1265 16.0865 5.60138 16.0865 5.89427 15.7936L10.3137 11.3742L14.7331 15.7936Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_1$a=_export_sfc(_sfc_main$38,[["render",_sfc_render$1K]]),Dialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2I={key:0,class:"dialog"},_hoisted_2$R={class:"dialog-container"},_hoisted_3$B={key:0,class:"close"},_sfc_main$37={__name:"Dialog",props:["show","dialogName","close"],setup(e){const n=useViewerStore(),r=()=>{n.closeElement(e.dialogName)},o=s=>{typeof e.close=="function"?e.close(s):r()};return(s,u)=>{const d=__unplugin_components_1$a,f=__unplugin_components_0$w,g=__unplugin_components_13$3;return e.show?(openBlock(),createElementBlock("div",_hoisted_1$2I,[createBaseVNode("div",_hoisted_2$R,[e.close?(openBlock(),createElementBlock("div",_hoisted_3$B,[e.close==="A"?(openBlock(),createBlock(d,{key:0,onClick:o})):createCommentVNode("",!0),e.close==="B"?(openBlock(),createBlock(f,{key:1,onClick:o})):(openBlock(),createBlock(g,{key:2,onClick:o}))])):createCommentVNode("",!0),createBaseVNode("header",null,[renderSlot(s.$slots,"header")]),createBaseVNode("main",null,[renderSlot(s.$slots,"default")]),createBaseVNode("footer",null,[renderSlot(s.$slots,"footer")])])])):createCommentVNode("",!0)}}},MovePageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2H={key:0,class:"move-page-popup"},_hoisted_2$Q=["placeholder"],dialogName$i="movePageSettingDialog",_sfc_main$36={__name:"MovePageSettingDialog",props:["totalPages","selectedPageList"],emits:["movePage"],setup(e,{emit:n}){const r=e,o=n,s=useViewerStore(),u=computed(()=>s.isElementOpen(dialogName$i)),d=ref("");let f=!1;const g=computed(()=>{if(typeof d.value!="number")return!0;const k=r.selectedPageList;return!!(k.length===1&&(k[0]===d.value||k[0]===d.value-1)||k.length>1&&m(k)&&(k.includes(d.value)||k.includes(d.value-1)))}),m=k=>{k.sort(function(M,E){return M-E});for(var S=0;S<k.length-1;S++)if(k[S]+1!==k[S+1])return!1;return!0},y=()=>{s.closeElement(dialogName$i),d.value=""},v=async()=>{o("movePage",d.value),y()},_=k=>{if(f)return;const S=k.target.valueAsNumber;isNaN(S)&&(k.target.value=""),S>r.totalPages&&(d.value=r.totalPages),S===0&&(k.target.value=S.toFixed(0))},w=()=>{f=!0},x=()=>{f=!1};return(k,S)=>{const M=_sfc_main$37;return u.value?(openBlock(),createElementBlock("div",_hoisted_1$2H,[createVNode(M,{show:u.value,dialogName:dialogName$i,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(k.$t("documentEditor.moveTo")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:g.value}]),onClick:v},toDisplayString$1(k.$t("ok")),3)]),default:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":S[0]||(S[0]=E=>d.value=E),type:"number",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:_,placeholder:k.$t("documentEditor.inputPageTip"),onCompositionstart:w,onCompositionend:x,name:"document-editor"},null,40,_hoisted_2$Q),[[vModelText,d.value,void 0,{number:!0}]])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$35={},_hoisted_1$2G={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1J(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2G,n[0]||(n[0]=[createBaseVNode("g",{id:"ic_btn_radio_dis"},[createBaseVNode("circle",{id:"ic",cx:"7",cy:"7",r:"5.625",fill:"white",stroke:"#666666"})],-1)]))}const __unplugin_components_1$9=_export_sfc(_sfc_main$35,[["render",_sfc_render$1J]]),_sfc_main$34={},_hoisted_1$2F={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1I(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2F,n[0]||(n[0]=[createBaseVNode("g",{id:"ic_btn_radio_sel"},[createBaseVNode("circle",{id:"Radio",cx:"7",cy:"7",r:"6.125",fill:"#1460F3"}),createBaseVNode("circle",{id:"Radio_2",cx:"7",cy:"7",r:"2.625",fill:"white"})],-1)]))}const __unplugin_components_0$v=_export_sfc(_sfc_main$34,[["render",_sfc_render$1I]]),ExtractPageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2E={key:0,class:"extract-page-setting-popup"},_hoisted_2$P={class:"title"},_hoisted_3$A={class:"container"},_hoisted_4$u={class:"select-content"},_hoisted_5$o={key:0,class:"disabled-btn"},_hoisted_6$l={class:"addition"},_hoisted_7$h=["placeholder"],_hoisted_8$e={class:"check-content"},dialogName$h="extractPageSettingDialog",_sfc_main$33={__name:"ExtractPageSettingDialog",props:["selectedPageList","totalPages"],emits:["extractPage"],setup(e,{emit:n}){const r=e,o=n,s=useViewerStore(),u=computed(()=>s.isElementOpen(dialogName$h)),d=ref("custom"),f=ref(""),g=ref(""),m=ref(!1),y=ref(!1);let v="";watch(()=>u.value,(E,P)=>{if(E){const T=r.selectedPageList.map(function(D){return D+1}).join(",");v=k(T),f.value=g.value=v}});const _=()=>{s.closeElement(dialogName$h),d.value="custom"},w=async()=>{const E={range:d.value==="custom"?f.value:d.value,separateFile:m.value,deleteAfter:d.value==="all"?!1:y.value};o("extractPage",E),_()},x=()=>{g.value=k(f.value),f.value=g.value},k=E=>{const P=r.totalPages,D=E.replace(/\s/g,"").match(/\d+-\d+|\d+|\d+/g);if(D){const F=D.flatMap(Y=>{if(Y.includes("-")){const[Z,j]=Y.split("-"),ne=Math.min(Z,j),le=Math.min(Math.max(Z,j),P);return Array.from({length:le-ne+1},(J,O)=>String(Number(ne)+O))}else return Math.min(Math.max(Y,1),P)}).sort((Y,Z)=>Y-Z),I=[];let N=F[0],q=F[0];for(let Y=1;Y<F.length;Y++){const Z=F[Y],j=Number(q);Number(Z)-j>1&&(I.push(S(N,q)),N=Z),q=Z}return I.push(S(N,q)),I.join(", ")}return v},S=(E,P)=>E===P?E.toString():`${E}-${P}`,M=computed(()=>{if(d.value==="all"||r.totalPages===1&&d.value!=="even"||r.totalPages>1&&d.value==="custom"&&f.value==="1-"+r.totalPages)return!0});return(E,P)=>{const T=__unplugin_components_0$v,D=__unplugin_components_1$9,F=__unplugin_components_1$b,I=_sfc_main$37;return u.value?(openBlock(),createElementBlock("div",_hoisted_1$2E,[createVNode(I,{show:u.value,dialogName:dialogName$h,close:!1},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(E.$t("documentEditor.extract")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:_},toDisplayString$1(E.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:d.value==="pdf"&&(!E.inputFile||d.value==="custom"&&!g.value)}]),onClick:w},toDisplayString$1(E.$t("documentEditor.extract")),3)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$P,toDisplayString$1(E.$t("documentEditor.dialog.pageRange")),1),createBaseVNode("div",_hoisted_3$A,[createBaseVNode("div",_hoisted_4$u,[createBaseVNode("div",{onClick:P[0]||(P[0]=N=>d.value="all"),class:"option"},[d.value==="all"?(openBlock(),createBlock(T,{key:0})):(openBlock(),createBlock(D,{key:1})),createTextVNode(toDisplayString$1(E.$t("documentEditor.dialog.allPages")),1)]),createBaseVNode("div",{onClick:P[1]||(P[1]=N=>d.value="odd"),class:"option"},[d.value==="odd"?(openBlock(),createBlock(T,{key:0})):(openBlock(),createBlock(D,{key:1})),createTextVNode(toDisplayString$1(E.$t("documentEditor.dialog.oddPage")),1)]),createBaseVNode("div",{onClick:P[2]||(P[2]=N=>d.value="even"),class:normalizeClass(["option",{disabled:e.totalPages===1}])},[e.totalPages===1?(openBlock(),createElementBlock("div",_hoisted_5$o)):d.value==="even"?(openBlock(),createBlock(T,{key:1})):(openBlock(),createBlock(D,{key:2})),createTextVNode(" "+toDisplayString$1(E.$t("documentEditor.dialog.evenPage")),1)],2),createBaseVNode("div",{onClick:P[4]||(P[4]=N=>d.value="custom"),class:"option custom-page"},[d.value==="custom"?(openBlock(),createBlock(T,{key:0})):(openBlock(),createBlock(D,{key:1})),createTextVNode(toDisplayString$1(E.$t("documentEditor.dialog.page"))+" ",1),createBaseVNode("div",_hoisted_6$l,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":P[3]||(P[3]=N=>f.value=N),placeholder:E.$t("documentEditor.dialog.pageTip"),onBlur:x,name:"document-editor"},null,40,_hoisted_7$h),[[vModelText,f.value]]),createBaseVNode("span",null,"/ "+toDisplayString$1(e.totalPages),1)])])])]),createBaseVNode("div",_hoisted_8$e,[createBaseVNode("div",{class:"check-box",onClick:P[5]||(P[5]=N=>m.value=!m.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:m.value}])},[withDirectives(createVNode(F,null,null,512),[[vShow,m.value]])],2),createBaseVNode("span",null,toDisplayString$1(E.$t("documentEditor.eachPage")),1)]),createBaseVNode("div",{class:normalizeClass(["check-box",{disabled:M.value}]),onClick:P[6]||(P[6]=()=>{M.value||(y.value=!y.value)})},[createBaseVNode("div",{class:normalizeClass(["check",{active:y.value}])},[withDirectives(createVNode(F,null,null,512),[[vShow,y.value&&!M.value]])],2),createBaseVNode("span",null,toDisplayString$1(E.$t("documentEditor.deleteAfter")),1)],2)])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$32={},_hoisted_1$2D={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1H(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2D,n[0]||(n[0]=[createBaseVNode("path",{d:"M20 36.6667C29.2047 36.6667 36.6667 29.2047 36.6667 20C36.6667 10.7952 29.2047 3.33333 20 3.33333C10.7952 3.33333 3.33333 10.7952 3.33333 20C3.33333 29.2047 10.7952 36.6667 20 36.6667Z",fill:"#FFC061"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.6667 12.5C21.6667 11.5795 20.9205 10.8333 20 10.8333C19.0795 10.8333 18.3333 11.5795 18.3333 12.5L18.3333 22.5C18.3333 23.4205 19.0795 24.1667 20 24.1667C20.9205 24.1667 21.6667 23.4205 21.6667 22.5L21.6667 12.5ZM20.1667 29.3333C21.0871 29.3333 21.8333 28.5871 21.8333 27.6667C21.8333 26.7462 21.0871 26 20.1667 26C19.2462 26 18.5 26.7462 18.5 27.6667C18.5 28.5871 19.2462 29.3333 20.1667 29.3333Z",fill:"white"},null,-1)]))}const __unplugin_components_2$b=_export_sfc(_sfc_main$32,[["render",_sfc_render$1H]]),DeletePageDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2C={key:0,class:"delete-page-popup"},dialogName$g="deletePageDialog",_sfc_main$31={__name:"DeletePageDialog",props:["selectedPageList"],emits:["deletePage"],setup(e,{emit:n}){const{locale:r}=useI18n(),o=e,s=n,u=useViewerStore(),d=computed(()=>u.isElementOpen(dialogName$g)),f=computed(()=>o.selectedPageList.sort((y,v)=>y-v).map(y=>y+1).join(", ")),g=()=>{u.closeElement(dialogName$g)},m=async()=>{s("deletePage"),g()};return(y,v)=>{const _=__unplugin_components_2$b,w=_sfc_main$37;return d.value?(openBlock(),createElementBlock("div",_hoisted_1$2C,[createVNode(w,{show:d.value,dialogName:dialogName$g,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:g},toDisplayString$1(y.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:m},toDisplayString$1(y.$t("documentEditor.delete")),1)]),default:withCtx(()=>[createVNode(_),createBaseVNode("p",null,toDisplayString$1(y.$t("documentEditor.deleteConfirmText"))+toDisplayString$1(unref(r)==="en"?` ${f.value}?`:""),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$30={},_hoisted_1$2B={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1G(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2B,n[0]||(n[0]=[createBaseVNode("path",{d:"M6.82225 3.96144L6.99439 4.05909H7.19231H11.75V13.25H1.25V2.75H4.6867L6.82225 3.96144Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M1.55867 13.25L3.84383 6.75H14.4413L12.1562 13.25H1.55867Z",fill:"transparent",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_0$u=_export_sfc(_sfc_main$30,[["render",_sfc_render$1G]]),_sfc_main$2$={},_hoisted_1$2A={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1F(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2A,n[0]||(n[0]=[createBaseVNode("g",{id:"ic_btn_arrow_down"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.0596 5.90869L11.9398 6.72429L8.24969 10.7068L4.55957 6.72429L5.4398 5.90869L8.24969 8.94084L11.0596 5.90869Z",fill:"currentColor"})],-1)]))}const __unplugin_components_0$t=_export_sfc(_sfc_main$2$,[["render",_sfc_render$1F]]),InsertPageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2z={key:0,class:"add-page-setting-popup"},_hoisted_2$O={class:"title"},_hoisted_3$z={class:"container"},_hoisted_4$t={class:"select-content"},_hoisted_5$n={key:0,class:"addition"},_hoisted_6$k={key:1,class:"addition"},_hoisted_7$g={class:"file-input-underbox"},_hoisted_8$d={key:2,class:"addition from-pdf"},_hoisted_9$b={class:"addition"},_hoisted_10$9={value:"all"},_hoisted_11$9={value:"odd"},_hoisted_12$9={value:"even"},_hoisted_13$9={value:"custom"},_hoisted_14$9=["placeholder"],_hoisted_15$9={class:"title"},_hoisted_16$9={class:"container"},_hoisted_17$6={class:"select-content"},_hoisted_18$6={class:"left"},_hoisted_19$6={key:0,class:"right"},_hoisted_20$6={class:"addition"},_hoisted_21$5=["max"],_hoisted_22$5={class:"addition"},_hoisted_23$5={value:0},_hoisted_24$5={value:1},dialogName$f="insertPageSettingDialog",_sfc_main$2_={__name:"InsertPageSettingDialog",props:["selectedPageList","totalPages"],emits:["insertPage"],setup(e,{emit:n}){const r=e,o=n,s=useViewerStore(),u=computed(()=>s.isElementOpen(dialogName$f)),d=ref("blank"),f=ref("A4"),g=ref(null),m=ref("all"),y=ref(""),v=ref(""),_=ref("first"),w=ref(1),x=ref(1),k=ref("");watch(()=>u.value,(N,q)=>{N&&(r.selectedPageList.length>0&&(_.value="custom"),w.value=r.selectedPageList[0]+1)});const S=()=>{s.closeElement(dialogName$f),d.value="blank",f.value="A4",g.value=null,m.value="all",y.value="",v.value="",_.value="first",x.value=1,k.value=""},M=async()=>{const N={type:d.value==="pdf"?"pdf":"blank"};if(d.value==="custom"){const q={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210}};N.size={width:q[f.value].width/25.4*72,height:q[f.value].height/25.4*72}}d.value==="pdf"&&g.value&&(N.file=g.value,N.range=m.value==="custom"?y.value:m.value,N.password=k.value),_.value==="custom"?(N.place=w.value-1+x.value,N.targetPlace=x.value):_.value==="last"?N.place=r.totalPages:N.place=0,o("insertPage",N),S()},E=async N=>{if(!N.target.files[0])return;let q=URL.createObjectURL(N.target.files[0]);const Y=await core.checkPassword(q,!0);if(Y===!1){N.target.value="";return}g.value=N.target.files[0],k.value=Y},P=N=>{const q=N.target.valueAsNumber;q>r.totalPages?w.value=r.totalPages:q<1&&(w.value=1)},T=()=>{w.value||(w.value=1)},D=()=>{v.value=F(y.value),y.value=v.value},F=N=>{const Y=N.replace(/\s/g,"").match(/\d+-\d+|\d+|\d+/g);if(Y){const Z=Y.flatMap(J=>{if(J.includes("-")){const[O,U]=J.split("-"),W=Math.max(1,Math.min(O,U)),H=Math.max(1,O,U);return Array.from({length:H-W+1},(X,Q)=>String(Number(W)+Q))}else return Math.max(1,J)}).sort((J,O)=>J-O),j=[];let ne=Z[0],le=Z[0];for(let J=1;J<Z.length;J++){const O=Z[J],U=Number(le);Number(O)-U>1&&(j.push(I(ne,le)),ne=O),le=O}return j.push(I(ne,le)),j.join(", ")}return"1"},I=(N,q)=>N===q?N.toString():`${N}-${q}`;return(N,q)=>{const Y=__unplugin_components_0$v,Z=__unplugin_components_1$9,j=__unplugin_components_0$t,ne=__unplugin_components_0$u,le=_sfc_main$37;return u.value?(openBlock(),createElementBlock("div",_hoisted_1$2z,[createVNode(le,{show:u.value,dialogName:dialogName$f,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:S},toDisplayString$1(N.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:d.value==="pdf"&&(!g.value||m.value==="custom"&&!v.value)}]),onClick:M},toDisplayString$1(N.$t("documentEditor.insert")),3)]),default:withCtx(()=>{var J,O;return[createBaseVNode("p",_hoisted_2$O,toDisplayString$1(N.$t("documentEditor.dialog.insertPages")),1),createBaseVNode("div",_hoisted_3$z,[createBaseVNode("div",_hoisted_4$t,[createBaseVNode("div",{onClick:q[0]||(q[0]=U=>d.value="blank"),class:"option"},[d.value==="blank"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(N.$t("documentEditor.dialog.blankPage")),1)]),createBaseVNode("div",{onClick:q[1]||(q[1]=U=>d.value="custom"),class:"option"},[d.value==="custom"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(N.$t("documentEditor.dialog.customPage")),1)]),d.value==="custom"?(openBlock(),createElementBlock("div",_hoisted_5$n,[withDirectives(createBaseVNode("select",{name:"customPageSize","onUpdate:modelValue":q[2]||(q[2]=U=>f.value=U)},q[11]||(q[11]=[createBaseVNode("option",{value:"A3"},"A3",-1),createBaseVNode("option",{value:"A4"},"A4",-1),createBaseVNode("option",{value:"A5"},"A5",-1)]),512),[[vModelSelect,f.value]]),createVNode(j)])):createCommentVNode("",!0),createBaseVNode("div",{onClick:q[3]||(q[3]=U=>d.value="pdf"),class:"option"},[d.value==="pdf"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(N.$t("documentEditor.dialog.fromPdf")),1)]),d.value==="pdf"?(openBlock(),createElementBlock("div",_hoisted_6$k,[createBaseVNode("div",_hoisted_7$g,[createBaseVNode("span",{class:normalizeClass({uploaded:(J=g.value)==null?void 0:J.name})},toDisplayString$1(((O=g.value)==null?void 0:O.name)||N.$t("documentEditor.dialog.selectFile")),3),createVNode(ne)]),createBaseVNode("input",{type:"file",onChange:E,accept:".pdf",name:"document-editor"},null,32)])):createCommentVNode("",!0),d.value==="pdf"?(openBlock(),createElementBlock("div",_hoisted_8$d,[createBaseVNode("span",null,toDisplayString$1(N.$t("documentEditor.dialog.pageRange")),1),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_9$b,[withDirectives(createBaseVNode("select",{name:"inputFileRange","onUpdate:modelValue":q[4]||(q[4]=U=>m.value=U)},[createBaseVNode("option",_hoisted_10$9,toDisplayString$1(N.$t("documentEditor.dialog.allPages")),1),createBaseVNode("option",_hoisted_11$9,toDisplayString$1(N.$t("documentEditor.dialog.oddPage")),1),createBaseVNode("option",_hoisted_12$9,toDisplayString$1(N.$t("documentEditor.dialog.evenPage")),1),createBaseVNode("option",_hoisted_13$9,toDisplayString$1(N.$t("documentEditor.dialog.customRange")),1)],512),[[vModelSelect,m.value]]),createVNode(j)]),m.value==="custom"?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"text","onUpdate:modelValue":q[5]||(q[5]=U=>y.value=U),placeholder:N.$t("documentEditor.dialog.pageTip"),onBlur:D,name:"document-editor"},null,40,_hoisted_14$9)),[[vModelText,y.value]]):createCommentVNode("",!0)])])):createCommentVNode("",!0)])]),createBaseVNode("p",_hoisted_15$9,toDisplayString$1(N.$t("documentEditor.dialog.insertTo")),1),createBaseVNode("div",_hoisted_16$9,[createBaseVNode("div",_hoisted_17$6,[createBaseVNode("div",{onClick:q[6]||(q[6]=U=>_.value="first"),class:"option"},[_.value==="first"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(N.$t("documentEditor.dialog.firstPage")),1)]),createBaseVNode("div",{onClick:q[7]||(q[7]=U=>_.value="last"),class:"option"},[_.value==="last"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(N.$t("documentEditor.dialog.lastPage")),1)]),createBaseVNode("div",{onClick:q[10]||(q[10]=U=>_.value="custom"),class:normalizeClass(["option",{"custom-page":_.value==="custom"}])},[createBaseVNode("div",_hoisted_18$6,[_.value==="custom"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Z,{key:1})),createTextVNode(toDisplayString$1(N.$t("documentEditor.dialog.page")),1)]),_.value==="custom"?(openBlock(),createElementBlock("div",_hoisted_19$6,[createBaseVNode("div",_hoisted_20$6,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":q[8]||(q[8]=U=>w.value=U),type:"number",max:e.totalPages,min:"1",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:P,onBlur:T,name:"document-editor"},null,40,_hoisted_21$5),[[vModelText,w.value,void 0,{number:!0}]]),createBaseVNode("span",null,"/ "+toDisplayString$1(e.totalPages),1)]),createBaseVNode("div",_hoisted_22$5,[withDirectives(createBaseVNode("select",{name:"targetPlace","onUpdate:modelValue":q[9]||(q[9]=U=>x.value=U)},[createBaseVNode("option",_hoisted_23$5,toDisplayString$1(N.$t("documentEditor.dialog.before")),1),createBaseVNode("option",_hoisted_24$5,toDisplayString$1(N.$t("documentEditor.dialog.after")),1)],512),[[vModelSelect,x.value]]),createVNode(j)])])):createCommentVNode("",!0)],2)])])]}),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$2Z={},_hoisted_1$2y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1E(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2y,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / all select"},[createBaseVNode("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 2.5H6.5V13.5H17.5V2.5ZM6.5 1H5V2.5V2.9342H2H1.25V3.6842V18V18.75H2H16.3158H17.0658V18V15H17.5H19V13.5V2.5V1H17.5H6.5ZM2.75 4.4342H5V13.5V15H6.5H15.5658V17.25H2.75V4.4342ZM15.4446 6.94453L15.9749 6.4142L14.9142 5.35355L14.3839 5.88388L11.1016 9.16615L10.2177 8.28227L9.68734 7.75195L8.62667 8.8126L9.15701 9.34293L10.5712 10.7571L11.1016 11.2875L11.6319 10.7571L15.4446 6.94453Z",fill:"currentColor"})],-1)]))}const __unplugin_components_10$2=_export_sfc(_sfc_main$2Z,[["render",_sfc_render$1E]]),_sfc_main$2Y={},_hoisted_1$2x={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1D(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2x,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / unselect"},[createBaseVNode("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 2.5H6.5V13.5H17.5V2.5ZM6.5 1H5V2.5V2.9342H2H1.25V3.6842V18V18.75H2H16.3158H17.0658V18V15H17.5H19V13.5V2.5V1H17.5H6.5ZM2.75 4.4342H5V13.5V15H6.5H15.5658V17.25H2.75V4.4342ZM8 8.75H16V7.25H8V8.75Z",fill:"currentColor"})],-1)]))}const __unplugin_components_9$3=_export_sfc(_sfc_main$2Y,[["render",_sfc_render$1D]]),_sfc_main$2X={},_hoisted_1$2w={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1C(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2w,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / reverse"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9019 1.75H1.25V18.25H14.75V5.95882L10.9019 1.75ZM10.24 3.25L13.25 6.542V16.75H2.75V3.25H10.24ZM19.624 6.83397L16.25 1.77292V18.25H17.75V6.729L18.376 7.66603L19.624 6.83397Z",fill:"currentColor"})],-1)]))}const __unplugin_components_8$1=_export_sfc(_sfc_main$2X,[["render",_sfc_render$1C]]),_sfc_main$2W={},_hoisted_1$2v={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1B(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2v,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / replace"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1H13.3107L17.75 5.43934V10.75H16.25V6.061L12.689 2.5H3.75V17H10V18.5H2.25V1ZM14.3454 12.7983L15.3689 11.7017L18.9028 15H11V13.5H15.097L14.3454 12.7983ZM14.5339 19.5L15.5574 18.4034L14.8058 17.7017H18.9028V16.2017H11L14.5339 19.5Z",fill:"currentColor"})],-1)]))}const __unplugin_components_7$2=_export_sfc(_sfc_main$2W,[["render",_sfc_render$1B]]),_sfc_main$2V={},_hoisted_1$2u={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1A(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2u,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / extract"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1.25H13.3107L17.75 5.68934V11H16.25V6.311L12.689 2.75H3.75V17.25H10V18.75H2.25V1.25ZM16.0174 16.25L15.1768 17.091L16.2374 18.1516L18.8891 15.5L16.2374 12.8483L15.1768 13.909L16.0174 14.75H11V16.25H16.0174Z",fill:"currentColor"})],-1)]))}const __unplugin_components_6$4=_export_sfc(_sfc_main$2V,[["render",_sfc_render$1A]]),_sfc_main$2U={},_hoisted_1$2t={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2t,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / copy"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.75 0.75H14.3866L18.25 4.69386V16.25H15.25V19.25H1.75V3.75H4.75V0.75ZM4.75 16.25H13.75V17.75H3.25V5.25H4.75V16.25ZM16.75 5.306L13.756 2.25H6.25V14.75H16.75V5.306ZM14.1974 7.35361C13.8798 6.13053 12.7917 5.25 11.5202 5.25C9.98499 5.25 8.75 6.52361 8.75 8.08333V8.91667L8.75503 9.08874C8.84189 10.569 10.0418 11.75 11.5202 11.75C12.8491 11.75 13.9777 10.7882 14.2357 9.47867L12.764 9.18872L12.7319 9.3182C12.5675 9.86695 12.0782 10.25 11.5202 10.25C10.8239 10.25 10.25 9.65813 10.25 8.91667V8.08333L10.2566 7.94617C10.3222 7.2702 10.8674 6.75 11.5202 6.75C12.1213 6.75 12.6427 7.19453 12.7641 7.81182L14.2359 7.52247L14.1974 7.35361Z",fill:"currentColor"})],-1)]))}const __unplugin_components_5$4=_export_sfc(_sfc_main$2U,[["render",_sfc_render$1z]]),_sfc_main$2T={},_hoisted_1$2s={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2s,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / rotate left"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 9.75V1.75H18.5V9.75V10.5V18.25H2V9.75H10ZM11.5 9.75V3.25H17V9.75H11.5ZM3.5 11.25V16.75H17.001V11.25H3.5ZM1.53769 5.46967L0.477028 6.53033L3.12868 9.18198L5.78033 6.53033L4.71967 5.46967L3.80559 6.38355C3.89386 5.03216 4.82757 3.82648 6.20838 3.4565C6.98256 3.24905 7.78597 3.33465 8.48622 3.68044L8.67454 3.78117L9.42454 2.48213C8.34118 1.85665 7.05293 1.67728 5.82015 2.00761C3.81662 2.54445 2.45713 4.28512 2.31137 6.24287L1.53769 5.46967Z",fill:"currentColor"})],-1)]))}const __unplugin_components_4$b=_export_sfc(_sfc_main$2T,[["render",_sfc_render$1y]]),_sfc_main$2S={},_hoisted_1$2r={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1x(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2r,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / rotate left"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 9.75V1.75H1.5V9.75V10.5V18.25H18V9.75H10ZM8.5 9.75V3.25H3V9.75H8.5ZM16.5 11.25V16.75H2.999V11.25H16.5ZM18.4623 5.46967L19.523 6.53033L16.8713 9.18198L14.2197 6.53033L15.2803 5.46967L16.1944 6.38355C16.1061 5.03216 15.1724 3.82648 13.7916 3.4565C13.0174 3.24905 12.214 3.33465 11.5138 3.68044L11.3255 3.78117L10.5755 2.48213C11.6588 1.85665 12.9471 1.67728 14.1798 2.00761C16.1834 2.54445 17.5429 4.28512 17.6886 6.24287L18.4623 5.46967Z",fill:"currentColor"})],-1)]))}const __unplugin_components_3$c=_export_sfc(_sfc_main$2S,[["render",_sfc_render$1x]]),_sfc_main$2R={},_hoisted_1$2q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1w(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2q,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / delete"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 2.75V1.25H7V2.75H13ZM19 5.75V4.25H16.75H3.25H1V5.75H3.25V18.75H16.75V5.75H19ZM4.75 17.25V5.75H15.25V17.25H4.75ZM8.75 8.5V14.5H7.25V8.5H8.75ZM12.75 8.5V14.5H11.25V8.5H12.75Z",fill:"currentColor"})],-1)]))}const __unplugin_components_3$b=_export_sfc(_sfc_main$2R,[["render",_sfc_render$1w]]),_sfc_main$2Q={},_hoisted_1$2p={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1v(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2p,n[0]||(n[0]=[createBaseVNode("g",{id:"toolbar / pageedit / insert"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1.25H13.3107L17.75 5.68934V11H16.25V6.311L12.689 2.75H3.75V17.25H10V18.75H2.25V1.25ZM14.75 18H13.25V15.75H11V14.25H13.25V12H14.75V14.25H17V15.75H14.75V18Z",fill:"currentColor"})],-1)]))}const __unplugin_components_0$s=_export_sfc(_sfc_main$2Q,[["render",_sfc_render$1v]]),DocumentEditorContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$2o=["onClick"],_hoisted_2$N=["src"],_sfc_main$2P={__name:"DocumentEditorContainer",props:["Sortable"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=reactive({pageList:[],selectedPageList:[]});let{pageList:s,selectedPageList:u}=o;const d=ref(null),f=ref(-2),g=ref(-2),m=ref(!1),y=ref(null),v=ref(0),_=ref(null),w=window.devicePixelRatio||1,x=window.innerWidth<768;let k=null;onMounted(()=>{e.Sortable.create(d.value,{multiDrag:!0,selectedClass:"sortable-selected",dragClass:"sortable-drag",sort:!1,forceFallback:!0,fallbackTolerance:isMobileDevice?0:20,onStart:U,onEnd:H,delay:isMobileDevice?200:0});const{width:Pe,height:$e}=y.value[0].getBoundingClientRect(),Ie={width:Pe,height:$e};core.getDocEditorPages(Ie),window.addEventListener("resize",fe),fe()}),onUnmounted(()=>{core.removeEvent("getDocEditorPages",M),window.addEventListener("resize",fe)});const S=core.getPagesCount();for(let Pe=0;Pe<S;Pe++)s.push({type:"page"});const M=Pe=>{const{index:$e,pageData:Ie}=Pe;s[$e]=Ie};core.addEvent("getDocEditorPages",M);const E=()=>{n.openElement("deletePageDialog")},P=async Pe=>{const $e={type:"insert",pageIndex:Pe.place};if(Pe.type==="blank"){const Ie=Pe.targetPlace?s[Pe.place-1]:s[Pe.place]||s[Pe.place-1],Ne={type:Pe.type,rotation:0,size:Pe.size||{width:Ie.size.width,height:Ie.size.height}};s.splice(Pe.place,0,Ne),$e.size=Ne.size,core.saveDocumentEdit($e)}else if(Pe.type==="pdf"){$e.file=Pe.file,$e.range=Pe.range,$e.password=Pe.password||"";const{width:Ie,height:Ne}=y.value[0].getBoundingClientRect(),Be=await core.saveDocumentEdit($e);if(!Be)return;const be=s.length;for(let De=0;De<Be-be;De++)s.splice(Pe.place+De,0,{type:"page"});const Ve={width:Ie,height:Ne};core.getDocEditorPages(Ve,Pe.place,Be-be)}r.setDocEditorOperationList($e),u.length=0},T=Pe=>{const{width:$e,height:Ie}=Pe,Ne=x?140:204,Be=x?141:216,be=$e/w,Ve=Ie/w,De=Ne/be,ve=Be/Ve;let ye=Math.min(De,ve);ye>1&&(ye=1);const we=be*ye,ke=Ve*ye;return{width:we,height:ke}},D=Pe=>{const $e=u.indexOf(Pe);$e===-1?u.push(Pe):u.splice($e,1)},F=()=>{if(u.length<s.length){u.length=0;for(let Pe=0;Pe<s.length;Pe++)u.push(Pe)}else u.length=0},I=()=>{n.openElement("insertPageSettingDialog")},N=()=>{u.sort(($e,Ie)=>Ie-$e),u.forEach($e=>{s.splice($e,1)});const Pe={type:"delete",selectedPageIndexArray:Array.from(u)};core.saveDocumentEdit(Pe),r.setDocEditorOperationList(Pe),u.length=0},q=Pe=>{u.forEach(Ie=>{const Ne=s[Ie];Ne.rotation+=Pe,(Ne.rotation>3||Ne.rotation<-3)&&(Ne.rotation=0)});const $e={type:"rotate",selectedPageIndexArray:Array.from(u),rotation:Pe};core.saveDocumentEdit($e),r.setDocEditorOperationList($e)},Y=Pe=>new Map([[-3,-270],[-2,180],[-1,-90],[0,0],[1,90],[2,180],[3,270]]).get(Pe),Z=()=>{u.sort(($e,Ie)=>Ie-$e),u.forEach($e=>{s.splice($e,0,{...s[$e]})});const Pe={type:"copy",selectedPageIndexArray:Array.from(u)};core.saveDocumentEdit(Pe),r.setDocEditorOperationList(Pe),u.length=0},j=()=>{const Pe=document.createElement("input");Pe.type="file",Pe.accept=".pdf",Pe.click(),Pe.addEventListener("change",async function($e){const Ie=$e.target.files[0],Ne=u[0];let Be=URL.createObjectURL(Ie);const be=await core.checkPassword(Be,!0);be!==!1&&(P({type:"pdf",file:Ie,range:"all",place:Ne,password:be}),N())})},ne=()=>{n.openElement("extractPageSettingDialog")},le=async Pe=>{let $e=Pe.range.replace(/\s/g,"");const Ie=s.length;Pe.range==="all"?$e="1-"+Ie:Pe.range==="odd"?$e=Array.from({length:Ie},(Ve,De)=>De+1).filter(Ve=>Ve%2!==0).join(","):Pe.range==="even"&&($e=Array.from({length:Ie},(Ve,De)=>De+1).filter(Ve=>Ve%2===0).join(","));let Ne=$e.split(","),Be=[];Ne.forEach(Ve=>{if(Ve.includes("-")){let[De,ve]=Ve.split("-").map(ye=>parseInt(ye));for(let ye=De;ye<=ve;ye++)Be.push(ye-1)}else Ve&&Be.push(parseInt(Ve)-1)});const be={type:"extract",range:Pe.separateFile?Be:$e,separateFile:Pe.separateFile};if(await core.saveDocumentEdit(be),r.setDocEditorOperationList(be),Pe.deleteAfter){Be.reverse().forEach(De=>{s.splice(De,1)});const Ve={type:"delete",selectedPageIndexArray:Be};core.saveDocumentEdit(Ve),r.setDocEditorOperationList(Ve),u.length=0}},J=()=>{n.openElement("movePageSettingDialog")},O=Pe=>{if(u.length===1||u.length<2&&f.value>=0||u.length>1&&f.value>=0&&!u.includes(f.value)){const $e=u.length===1&&u.includes(f.value)||u.length===1&&f.value<0,Ie=$e?u[0]:[f.value],Ne=Ie>Pe?Pe:Pe-1;if(Ie===Ne)return;const[Be]=s.splice(Ie,1);s.splice(Ne,0,Be);const be={type:"move",pageIndex:Ie,targetPageIndex:Ne};core.saveDocumentEdit(be),r.setDocEditorOperationList(be),$e&&(u[0]=Ne)}else{u.sort(($e,Ie)=>$e-Ie);for(let $e=0;$e<u.length;$e++){let Ie,Ne;if(u[$e]===Pe)Ie=u[$e],Ne=Pe;else if(u[$e]>Pe)if(Ie=u[$e],u.includes(Pe)){Ne=Pe;for(let Ve=0;Ve<u.length;Ve++)u[Ve]===Ne&&Ie!==Ne&&Ne++}else Ne=Pe;else Ie=u[$e]-$e,Ne=Pe-1;if(u.includes(Ie)&&u.includes(Ne)&&Ie===Ne)continue;const[Be]=s.splice(Ie,1);s.splice(Ne,0,Be);const be={type:"move",pageIndex:Ie,targetPageIndex:Ne};core.saveDocumentEdit(be),r.setDocEditorOperationList(be),u[$e]=u[$e]>Pe?Ne:Ne-$e}}},U=Pe=>{f.value=Pe.oldIndex,d.value.addEventListener(isMobileDevice?"touchmove":"mousemove",W),isMobileDevice&&(document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",document.getElementById("app").style.touchAction="none",_.value.style.overflow="hidden")},W=Pe=>{u.length>1&&u.includes(f.value)&&d.value.querySelector(".sortable-drag").style.setProperty("--after-content","'"+u.length+"'");let $e=isMobileDevice?document.elementFromPoint(Pe.touches[0].clientX,Pe.touches[0].clientY):Pe.target;const Ie=d.value.children;for(let Ne=0;Ne<Ie.length;Ne++){const Be=Ie[Ne];if(Be.contains($e)){const be=Be.getBoundingClientRect(),Ve=isMobileDevice?Pe.touches[0].clientX-be.left:Pe.offsetX+30;m.value=Ve<be.width/2,m.value?g.value=Ne-1:g.value=Ne}}isMobileDevice&&Se(Pe.touches[0].clientY)},H=()=>{clearInterval(k),d.value.removeEventListener(isMobileDevice?"touchmove":"mousemove",W),g.value>-2&&!X(g.value)&&O(g.value+1),f.value=-2,g.value=-2,isMobileDevice&&(document.body.style.overscrollBehavior="auto",document.body.style.userSelect="auto",document.getElementById("app").style.touchAction="auto",_.value.style.overflow="auto")},X=Pe=>{if(![Pe-1,Pe,Pe+1].includes(g.value+1))return!1;if(u.includes(f.value)){if(u.length===1&&(u[0]===g.value+1||u[0]===g.value)||u.length>1&&Q(u)&&(u.includes(g.value+1)||u.includes(g.value)))return!0}else if([f.value,f.value-1].includes(g.value))return!0;return!1},Q=Pe=>{Pe.sort(function(Ie,Ne){return Ie-Ne});for(var $e=0;$e<Pe.length-1;$e++)if(Pe[$e]+1!==Pe[$e+1])return!1;return!0},fe=()=>{const Pe=window.innerWidth,$e=Pe>767?280:170;v.value=parseInt(Pe%$e/2)},Se=Pe=>{const Ie=_.value,Be=Ie.getBoundingClientRect().height,be=Pe,Ve=Ie.scrollHeight;be<=100||be>=Be-100?(clearInterval(k),k=setInterval(()=>{be<=100?(Ie.scrollTop-=10,Ie.scrollTop<=0&&clearInterval(k)):be>=Be-100&&(Ie.scrollTop+=10,Ie.scrollTop+Be>=Ve&&clearInterval(k))},10)):clearInterval(k)};return(Pe,$e)=>{const Ie=__unplugin_components_0$s,Ne=_sfc_main$3O,Be=__unplugin_components_3$b,be=__unplugin_components_3$c,Ve=__unplugin_components_4$b,De=__unplugin_components_5$4,ve=__unplugin_components_6$4,ye=__unplugin_components_7$2,we=__unplugin_components_8$1,ke=__unplugin_components_9$3,Me=__unplugin_components_10$2,Le=_sfc_main$2_,Fe=_sfc_main$31,ze=_sfc_main$33,te=_sfc_main$36;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:"document-editor-container",ref_key:"docEditorContainer",ref:_},[createBaseVNode("div",{class:normalizeClass(["tools-container",{mobile:unref(isMobileDevice)}])},[createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice)}),onClick:I},{default:withCtx(()=>[createVNode(Ie),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.insert")),1)]),_:1},8,["class"]),createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(u).length||unref(u).length==unref(s).length}),onClick:E},{default:withCtx(()=>[createVNode(Be),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.delete")),1)]),_:1},8,["class"]),createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(u).length}),onClick:$e[0]||($e[0]=oe=>q(1))},{default:withCtx(()=>[createVNode(be),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.rotateRight")),1)]),_:1},8,["class"]),createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(u).length}),onClick:$e[1]||($e[1]=oe=>q(-1))},{default:withCtx(()=>[createVNode(Ve),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.rotateLeft")),1)]),_:1},8,["class"]),createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(u).length}),onClick:Z},{default:withCtx(()=>[createVNode(De),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.copy")),1)]),_:1},8,["class"]),createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(u).length}),onClick:ne},{default:withCtx(()=>[createVNode(ve),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.extract")),1)]),_:1},8,["class"]),createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(u).length}),onClick:j},{default:withCtx(()=>[createVNode(ye),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.replace")),1)]),_:1},8,["class"]),createVNode(Ne,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(u).length}),onClick:J},{default:withCtx(()=>[createVNode(we),createBaseVNode("span",null,toDisplayString$1(Pe.$t("documentEditor.move")),1)]),_:1},8,["class"]),createVNode(Ne,{class:"select-all",onClick:F},{default:withCtx(()=>[unref(u).length===unref(s).length?(openBlock(),createBlock(ke,{key:0})):(openBlock(),createBlock(Me,{key:1}))]),_:1})],2),createBaseVNode("div",{class:"page-container",ref_key:"dragContainer",ref:d,style:normalizeStyle({"margin-left":v.value+"px"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),(oe,_e)=>(openBlock(),createElementBlock("div",{key:`${oe.type} - ${_e}`,class:normalizeClass(["page",{selected:unref(u).includes(_e),"drag-indicate-right":g.value===_e&&!m.value,"drag-indicate-left":g.value+1===_e&&m.value,"drag-indicate-disable":f.value>=0&&g.value>=-1&&X(_e),"has-hover":!unref(isMobileDevice)&&f.value<0&&!unref(u).includes(_e)}]),ref_for:!0,ref_key:"imgBoxEl",ref:y},[createBaseVNode("div",{class:"img-box",onClick:Ce=>D(_e)},[oe.img?(openBlock(),createElementBlock("img",{key:0,src:oe.img,style:normalizeStyle(`transform: rotate(${Y(oe.rotation)}deg);`)},null,12,_hoisted_2$N)):oe.type==="blank"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass({"blank-page":oe.type==="blank"}),style:normalizeStyle({transform:"rotate("+Y(oe.rotation)+"deg)",width:T(oe.size).width+"px",height:T(oe.size).height+"px"})},null,6)):createCommentVNode("",!0)],8,_hoisted_1$2o),createBaseVNode("p",null,toDisplayString$1(_e+1),1)],2))),128))],4)],512),createVNode(Le,{onInsertPage:P,selectedPageList:unref(u),totalPages:unref(s).length},null,8,["selectedPageList","totalPages"]),createVNode(Fe,{onDeletePage:N,selectedPageList:unref(u)},null,8,["selectedPageList"]),createVNode(ze,{onExtractPage:le,totalPages:unref(s).length,selectedPageList:unref(u)},null,8,["totalPages","selectedPageList"]),createVNode(te,{onMovePage:O,totalPages:unref(s).length,selectedPageList:unref(u)},null,8,["totalPages","selectedPageList"])],64)}}},PrintSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2n={key:0,class:"print-setting-popup"},_hoisted_2$M={class:"select-content"},dialogName$e="printSettingDialog",_sfc_main$2O={__name:"PrintSettingDialog",setup(e){const{triggerPrinting:n}=core,r=useViewerStore(),o=useDocumentStore(),s=computed(()=>r.isElementOpen(dialogName$e)),u=computed(()=>o.getCompareResult),d=ref("old"),f=()=>{r.closeElement(dialogName$e)},g=async()=>{let m=null;d.value==="old"?m=u.value.oldFile.url:d.value==="new"&&(m=u.value.newFile.url),f(),r.setDownloading(!0);try{await n(m),r.setDownloading(!1)}catch(y){console.log(y)}};return(m,y)=>{const v=__unplugin_components_0$v,_=__unplugin_components_1$9,w=_sfc_main$37;return s.value?(openBlock(),createElementBlock("div",_hoisted_1$2n,[createVNode(w,{show:s.value,dialogName:dialogName$e,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(m.$t("compare.printSetting")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:f},toDisplayString$1(m.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:g},toDisplayString$1(m.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$M,[createBaseVNode("div",{onClick:y[0]||(y[0]=x=>d.value="old"),class:"option"},[d.value==="old"?(openBlock(),createBlock(v,{key:0})):(openBlock(),createBlock(_,{key:1})),createTextVNode(toDisplayString$1(m.$t("compare.printOldFile")),1)]),createBaseVNode("div",{onClick:y[1]||(y[1]=x=>d.value="new"),class:"option"},[d.value==="new"?(openBlock(),createBlock(v,{key:0})):(openBlock(),createBlock(_,{key:1})),createTextVNode(toDisplayString$1(m.$t("compare.printNewFile")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var FileSaver_min={exports:{}};(function(e,n){(function(r,o){o()})(commonjsGlobal,function(){function r(m,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function o(m,y,v){var _=new XMLHttpRequest;_.open("GET",m),_.responseType="blob",_.onload=function(){g(_.response,y,v)},_.onerror=function(){console.error("could not download file")},_.send()}function s(m){var y=new XMLHttpRequest;y.open("HEAD",m,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function u(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(y)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,f=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(m,y,v){var _=d.URL||d.webkitURL,w=document.createElement("a");y=y||m.name||"download",w.download=y,w.rel="noopener",typeof m=="string"?(w.href=m,w.origin===location.origin?u(w):s(w.href)?o(m,y,v):u(w,w.target="_blank")):(w.href=_.createObjectURL(m),setTimeout(function(){_.revokeObjectURL(w.href)},4e4),setTimeout(function(){u(w)},0))}:"msSaveOrOpenBlob"in navigator?function(m,y,v){if(y=y||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(r(m,v),y);else if(s(m))o(m,y,v);else{var _=document.createElement("a");_.href=m,_.target="_blank",setTimeout(function(){u(_)})}}:function(m,y,v,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof m=="string")return o(m,y,v);var w=m.type==="application/octet-stream",x=/constructor/i.test(d.HTMLElement)||d.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||w&&x||f)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var P=S.result;P=k?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=P:location=P,_=null},S.readAsDataURL(m)}else{var M=d.URL||d.webkitURL,E=M.createObjectURL(m);_?_.location=E:location.href=E,_=null,setTimeout(function(){M.revokeObjectURL(E)},4e4)}});d.saveAs=g.saveAs=g,e.exports=g})})(FileSaver_min);const DownloadSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2m={key:0,class:"download-setting-popup"},_hoisted_2$L={class:"select-content"},dialogName$d="downloadSettingDialog",_sfc_main$2N={__name:"DownloadSettingDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$d)),s=computed(()=>r.getCompareResult),u=ref(1),d=()=>{n.closeElement(dialogName$d)},f=async()=>{const g=[];u.value===1?g.push(s.value.mergeFile):u.value===2&&g.push(s.value.oldFile,s.value.newFile),d(),n.setDownloading(!0);try{g.forEach(m=>{FileSaver_min.exports.saveAs(m.url,m.filename)}),n.setDownloading(!1)}catch(m){console.log(m)}};return(g,m)=>{const y=__unplugin_components_0$v,v=__unplugin_components_1$9,_=_sfc_main$37;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$2m,[createVNode(_,{show:o.value,dialogName:dialogName$d,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(g.$t("compare.downloadOptions")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:d},toDisplayString$1(g.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:f},toDisplayString$1(g.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$L,[createBaseVNode("div",{onClick:m[0]||(m[0]=w=>u.value=2),class:"option"},[u.value===2?(openBlock(),createBlock(y,{key:0})):(openBlock(),createBlock(v,{key:1})),createTextVNode(toDisplayString$1(g.$t("compare.downloadTwoFiles")),1)]),createBaseVNode("div",{onClick:m[1]||(m[1]=w=>u.value=1),class:"option"},[u.value===1?(openBlock(),createBlock(y,{key:0})):(openBlock(),createBlock(v,{key:1})),createTextVNode(toDisplayString$1(g.$t("compare.downloadOneFile")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}};function getHash(){let e=window.location.href,n=e?e.indexOf("#"):-1;return 0<=n?e.substring(n+1):""}function getHashParameters(e,n){let r=typeof n,o=getHash().split("&").reduce(function(s,u){return u=u.split("="),s[decodeURIComponent(u[0])]=decodeURIComponent(u[1]),s},{});if(r==="boolean"&&typeof o[e]<"u"){if(r=o[e],r==="true"||r==="1")return!0;if(r==="false"||r==="0")return!1}return o[e]||n}const CompareSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2l={key:0,class:"compare-setting-popup"},_hoisted_2$K={class:"mode pc"},_hoisted_3$y={class:"dialog-content"},_hoisted_4$s={class:"mode mobile"},_hoisted_5$m={class:"compare-items"},_hoisted_6$j={class:"title"},_hoisted_7$f={class:"row"},_hoisted_8$c={class:"row"},_hoisted_9$a={class:"opacity"},_hoisted_10$8={class:"title"},_hoisted_11$8={class:"row"},_hoisted_12$8={class:"percent-input"},_hoisted_13$8={class:"row"},_hoisted_14$8={class:"percent-input"},_hoisted_15$8={class:"mark-color"},_hoisted_16$8={class:"title"},_hoisted_17$5={class:"row"},_hoisted_18$5={class:"select color-select"},_hoisted_19$5={class:"colors-container mark"},_hoisted_20$5={class:"cell-container"},_hoisted_21$4={class:"cell-outer"},_hoisted_22$4={class:"drop-down"},_hoisted_23$4={class:"colors-container mark"},_hoisted_24$4={class:"cell-container"},_hoisted_25$3=["onClick"],_hoisted_26$3={class:"row"},_hoisted_27$3={class:"select color-select"},_hoisted_28$3={class:"colors-container mark"},_hoisted_29$2={class:"cell-container"},_hoisted_30$2={class:"cell-outer"},_hoisted_31$2={class:"drop-down"},_hoisted_32$1={class:"colors-container mark"},_hoisted_33={class:"cell-container"},_hoisted_34=["onClick"],_hoisted_35={class:"row"},_hoisted_36={class:"select"},_hoisted_37={class:"row"},_hoisted_38={class:"select color-select"},_hoisted_39={class:"colors-container mark"},_hoisted_40={class:"cell-container"},_hoisted_41={class:"cell-outer"},_hoisted_42={class:"drop-down"},_hoisted_43={class:"colors-container mark"},_hoisted_44={class:"cell-container"},_hoisted_45=["onClick"],_hoisted_46={class:"row"},_hoisted_47={class:"select color-select"},_hoisted_48={class:"colors-container mark"},_hoisted_49={class:"cell-container"},_hoisted_50={class:"cell-outer"},_hoisted_51={class:"drop-down"},_hoisted_52={class:"colors-container mark"},_hoisted_53={class:"cell-container"},_hoisted_54=["onClick"],_hoisted_55={class:"row"},_hoisted_56={class:"select color-select"},_hoisted_57={class:"colors-container mark"},_hoisted_58={class:"cell-container"},_hoisted_59={class:"cell-outer"},_hoisted_60={class:"drop-down"},_hoisted_61={class:"colors-container mark"},_hoisted_62={class:"cell-container"},_hoisted_63=["onClick"],_hoisted_64={class:"dialog-footer mobile"},_hoisted_65={class:"loading"},_hoisted_66={class:"loading-compare-tip"},dialogName$c="compareSettingDialog",_sfc_main$2M={__name:"CompareSettingDialog",setup(e){const{t:n}=useI18n(),{compare:r,loadDocument:o,getOptionUrl:s}=core,u=useViewerStore(),d=useDocumentStore();getCurrentInstance().appContext.app.config.globalProperties;const f=computed(()=>u.isElementOpen(dialogName$c)),g=computed(()=>d.getCompareFiles),m=computed(()=>u.getCompareMode),y=ref(50),v=ref(50),_=computed(()=>d.getCompareSetting("oldFileColor")),w=computed(()=>d.getCompareSetting("newFileColor")),x=ref("0"),k=[{label:n("compare.normal"),value:"0"},{label:n("compare.multiply"),value:"1"},{label:n("compare.screen"),value:"2"},{label:n("compare.overlay"),value:"3"},{label:n("compare.darken"),value:"4"},{label:n("compare.lighten"),value:"5"},{label:n("compare.colorDodge"),value:"6"},{label:n("compare.colorBurn"),value:"7"},{label:n("compare.hardLight"),value:"8"},{label:n("compare.softLight"),value:"9"},{label:n("compare.difference"),value:"10"},{label:n("compare.exclusion"),value:"11"},{label:n("compare.hue"),value:"12"},{label:n("compare.saturation"),value:"13"},{label:n("compare.colour"),value:"14"},{label:n("compare.luminosity"),value:"15"}],S=ref(!0),M=ref(!0),E=ref("#93B9FD"),P=ref("#C0FFEC"),T=ref("#FBBDBF"),D=["#FBBDBF","#93B9FD","#FFF6B3","#C0FFEC"],F=ref(null),I=ref(null),N=ref(null),q=ref(null),Y=ref(null),Z=ref(!1),j=ref(null),ne=ref(null);watch(()=>y.value,(Se,Pe)=>{const $e=/^\d+$/;Se!==""&&(Se>100||Se<0||!$e.test(Se))&&(y.value=Pe)}),watch(()=>v.value,(Se,Pe)=>{const $e=/^\d+$/;Se!==""&&(Se>100||Se<0||!$e.test(Se))&&(v.value=Pe)});const le=async()=>{const Se={leftFile:g.value.oldFile,leftFilePassword:g.value.oldFilePassword,rightFile:g.value.newFile,rightFilePassword:g.value.newFilePassword};if(m.value==="content"){let Pe=S.value,$e=M.value;!Pe&&!$e&&(Pe=$e=!0);const Ie={type:1,textCompare:Pe,imgCompare:$e,replaceColor:E.value,insertColor:P.value,deleteColor:T.value};Object.assign(Se,Ie)}else{const Pe={type:2,inTransparency:y.value+"",newTransparency:v.value+"",coverType:x.value,inColor:_.value,newColor:w.value};Object.assign(Se,Pe)}try{u.closeElement(dialogName$c),Z.value=!0;const Pe=await r(Se);if(Pe&&Pe.url){d.resetSetting();const $e={filename:n("compare.byComPDFKit")+".pdf",progress:d.setLoadingProgress,pageChangedCallback:u.setCurrentPage,scaleChangedCallback:u.setCurrentScale,annotationsNumChangedCallback:d.setAnnotationsCount,distanceChangedCallback:d.setDistance,notUpdatePwd:!0};await o(Pe.url,$e),Z.value=!1;const Ie=core.getPagesCount(),Ne=core.getScale();d.setTotalPages(Ie),u.setCurrentScale(Ne),u.setCurrentPage(1),u.setUpload(!0),u.setCompareStatus("finished")}else if(Pe&&Array.isArray(Pe)){const $e=Pe[0],Ie=Pe[1];d.setCompareResult({oldFile:$e,newFile:Ie,mergeFile:Pe[2]}),H($e.url,$e.fileName,2),H(Ie.url,Ie.fileName,3),Z.value=!1,u.setCompareStatus("next")}else Z.value=!1,u.setDownloadError("Compared")}catch(Pe){if(console.log(Pe),Z.value=!1,u.setDownloadError("Compared"),Pe==="invalid_file_error"||Pe==="no_password_given"||Pe==="incorrect_password"){u.setUpload(!1),d.setLoadingProgress(0),u.resetSetting();const $e=document.getElementById("fileInput");$e.value=""}}},J=Se=>{Se.target.value||(y.value=1)},O=Se=>{Se.target.value||(v.value=1)},U=(Se,Pe)=>{Se==="old"?d.setCompareSetting("oldFileColor",Pe):Se==="new"?d.setCompareSetting("newFileColor",Pe):Se==="replace"?E.value=Pe:Se==="insert"?P.value=Pe:Se==="delete"&&(T.value=Pe),m.value==="content"?(N.value.setShow(!1),q.value.setShow(!1),Y.value.setShow(!1)):(F.value.setShow(!1),I.value.setShow(!1))},W=()=>{u.closeElement(dialogName$c)};async function H(Se,Pe=null,$e){u.setUploadLoading(!0);let Ie=null;$e===2?Ie=d.getCompareFile("oldFilePassword"):$e===3&&(Ie=d.getCompareFile("newFilePassword"));const Ne={extension:getHashParameters("extension",null),filename:Pe||getHashParameters("filename",null),externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:d.setLoadingProgress,pageChangedCallback:u.setCurrentPage,scaleChangedCallback:$e===2?Q():fe(),annotationsNumChangedCallback:d.setAnnotationsCount,distanceChangedCallback:d.setDistance,notUploadPdf:!0};Ie&&(Ne.pwd=Ie);try{await o(Se,Ne,$e)}catch(Be){console.log(Be),u.setDownloadError("Loaded")}u.setUploadLoading(!1)}const X=Se=>{u.setCompareMode(Se)},Q=Se=>{j.value=Se},fe=Se=>{ne.value=Se};return(Se,Pe)=>{const $e=__unplugin_components_1$b,Ie=__unplugin_components_1$e,Ne=__unplugin_components_0$t,Be=_sfc_main$37,be=__unplugin_components_12$3;return openBlock(),createElementBlock(Fragment,null,[f.value?(openBlock(),createElementBlock("div",_hoisted_1$2l,[createVNode(Be,{show:f.value,dialogName:dialogName$c,close:!1},{header:withCtx(()=>[createBaseVNode("div",_hoisted_2$K,[createBaseVNode("div",{class:normalizeClass({selected:m.value==="content"}),onClick:Pe[0]||(Pe[0]=Ve=>X("content"))},toDisplayString$1(Se.$t("compare.contentComparison")),3),createBaseVNode("div",{class:normalizeClass({selected:m.value==="cover"}),onClick:Pe[1]||(Pe[1]=Ve=>X("cover"))},toDisplayString$1(Se.$t("compare.overlayComparison")),3)])]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:W},toDisplayString$1(Se.$t("compare.return")),1),createBaseVNode("div",{class:"rect-button blue",onClick:le},toDisplayString$1(Se.$t("compare.compare")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$y,[createBaseVNode("div",_hoisted_4$s,[createBaseVNode("div",{class:normalizeClass({selected:m.value==="content"}),onClick:Pe[2]||(Pe[2]=Ve=>X("content"))},toDisplayString$1(Se.$t("compare.contentComparison")),3),createBaseVNode("div",{class:normalizeClass({selected:m.value==="cover"}),onClick:Pe[3]||(Pe[3]=Ve=>X("cover"))},toDisplayString$1(Se.$t("compare.overlayComparison")),3)]),withDirectives(createBaseVNode("div",_hoisted_5$m,[createBaseVNode("p",_hoisted_6$j,toDisplayString$1(Se.$t("compare.compareItems")),1),createBaseVNode("div",_hoisted_7$f,[createBaseVNode("div",{class:"check-box",onClick:Pe[4]||(Pe[4]=Ve=>S.value=!S.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:S.value}])},[withDirectives(createVNode($e,null,null,512),[[vShow,S.value]])],2),createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.text")),1)])]),createBaseVNode("div",_hoisted_8$c,[createBaseVNode("div",{class:"check-box",onClick:Pe[5]||(Pe[5]=Ve=>M.value=!M.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:M.value}])},[withDirectives(createVNode($e,null,null,512),[[vShow,M.value]])],2),createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.images")),1)])])],512),[[vShow,m.value==="content"]]),withDirectives(createBaseVNode("div",_hoisted_9$a,[createBaseVNode("p",_hoisted_10$8,toDisplayString$1(Se.$t("opacity")),1),createBaseVNode("div",_hoisted_11$8,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.oldFile")),1),createVNode(unref(NSlider),{value:y.value,"onUpdate:value":Pe[6]||(Pe[6]=Ve=>y.value=Ve),step:10,max:100,min:0},{thumb:withCtx(()=>[createVNode(Ie)]),_:1},8,["value"]),createBaseVNode("div",_hoisted_12$8,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":Pe[7]||(Pe[7]=Ve=>y.value=Ve),type:"number",step:"10",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:J,name:"compare"},null,544),[[vModelText,y.value]])])]),createBaseVNode("div",_hoisted_13$8,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.newFile")),1),createVNode(unref(NSlider),{value:v.value,"onUpdate:value":Pe[8]||(Pe[8]=Ve=>v.value=Ve),step:10,max:100,min:0},{thumb:withCtx(()=>[createVNode(Ie)]),_:1},8,["value"]),createBaseVNode("div",_hoisted_14$8,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":Pe[9]||(Pe[9]=Ve=>v.value=Ve),type:"number",step:"10",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:O,name:"compare"},null,544),[[vModelText,v.value]])])])],512),[[vShow,m.value==="cover"]]),createBaseVNode("div",_hoisted_15$8,[createBaseVNode("p",_hoisted_16$8,toDisplayString$1(Se.$t("compare.colorMark")),1),m.value==="cover"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_17$5,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.oldFile")),1),createVNode(unref(NPopover),{ref_key:"oldColorPopover",ref:F,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_18$5,[createBaseVNode("div",_hoisted_19$5,[createBaseVNode("span",_hoisted_20$5,[createBaseVNode("span",_hoisted_21$4,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${_.value};`)},null,4)])])]),createVNode(Ne)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_22$4,[(openBlock(),createElementBlock(Fragment,null,renderList(D,(Ve,De)=>createBaseVNode("div",{class:"drop-item",key:De},[createBaseVNode("div",_hoisted_23$4,[createBaseVNode("span",_hoisted_24$4,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:_.value===Ve}]),onClick:ve=>U("old",Ve)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ve};`)},null,4)],10,_hoisted_25$3)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_26$3,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.newFile")),1),createVNode(unref(NPopover),{ref_key:"newColorPopover",ref:I,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_27$3,[createBaseVNode("div",_hoisted_28$3,[createBaseVNode("span",_hoisted_29$2,[createBaseVNode("span",_hoisted_30$2,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${w.value};`)},null,4)])])]),createVNode(Ne)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_31$2,[(openBlock(),createElementBlock(Fragment,null,renderList(D,(Ve,De)=>createBaseVNode("div",{class:"drop-item",key:De},[createBaseVNode("div",_hoisted_32$1,[createBaseVNode("span",_hoisted_33,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:w.value===Ve}]),onClick:ve=>U("new",Ve)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ve};`)},null,4)],10,_hoisted_34)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_35,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.blendMode")),1),createVNode(unref(NPopselect),{value:x.value,"onUpdate:value":Pe[10]||(Pe[10]=Ve=>x.value=Ve),options:k,trigger:"click",placement:"bottom-start"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_36,[createBaseVNode("span",null,toDisplayString$1(k[parseInt(x.value)].label),1),createVNode(Ne)])]),_:1},8,["value"])])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_37,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.replacedContent")),1),createVNode(unref(NPopover),{ref_key:"replaceColorPopover",ref:N,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_38,[createBaseVNode("div",_hoisted_39,[createBaseVNode("span",_hoisted_40,[createBaseVNode("span",_hoisted_41,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${E.value};`)},null,4)])])]),createVNode(Ne)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_42,[(openBlock(),createElementBlock(Fragment,null,renderList(D,(Ve,De)=>createBaseVNode("div",{class:"drop-item",key:De},[createBaseVNode("div",_hoisted_43,[createBaseVNode("span",_hoisted_44,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:E.value===Ve}]),onClick:ve=>U("replace",Ve)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ve};`)},null,4)],10,_hoisted_45)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_46,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.insertedContent")),1),createVNode(unref(NPopover),{ref_key:"insertColorPopover",ref:q,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_47,[createBaseVNode("div",_hoisted_48,[createBaseVNode("span",_hoisted_49,[createBaseVNode("span",_hoisted_50,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${P.value};`)},null,4)])])]),createVNode(Ne)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_51,[(openBlock(),createElementBlock(Fragment,null,renderList(D,(Ve,De)=>createBaseVNode("div",{class:"drop-item",key:De},[createBaseVNode("div",_hoisted_52,[createBaseVNode("span",_hoisted_53,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:P.value===Ve}]),onClick:ve=>U("insert",Ve)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ve};`)},null,4)],10,_hoisted_54)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_55,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.deletedContent")),1),createVNode(unref(NPopover),{ref_key:"deleteColorPopover",ref:Y,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_56,[createBaseVNode("div",_hoisted_57,[createBaseVNode("span",_hoisted_58,[createBaseVNode("span",_hoisted_59,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${T.value};`)},null,4)])])]),createVNode(Ne)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_60,[(openBlock(),createElementBlock(Fragment,null,renderList(D,(Ve,De)=>createBaseVNode("div",{class:"drop-item",key:De},[createBaseVNode("div",_hoisted_61,[createBaseVNode("span",_hoisted_62,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:T.value===Ve}]),onClick:ve=>U("delete",Ve)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Ve};`)},null,4)],10,_hoisted_63)])])])),64))])]),_:1},512)])],64))]),createBaseVNode("div",_hoisted_64,[createBaseVNode("div",{class:"rect-button white",onClick:W},toDisplayString$1(Se.$t("compare.return")),1),createBaseVNode("div",{class:"rect-button blue",onClick:le},toDisplayString$1(Se.$t("compare.compare")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["mask",{active:Z.value}])},[withDirectives(createBaseVNode("div",_hoisted_65,[createVNode(be)],512),[[vShow,Z.value]]),createBaseVNode("div",_hoisted_66,[createBaseVNode("span",null,toDisplayString$1(Se.$t("compare.comingSoon")),1)])],2)],64)}}},_sfc_main$2L={},_hoisted_1$2k={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1u(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2k,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.625 9.375V3.75H9.375V9.375H3.75V10.625H9.375V16.25H10.625V10.625H16.25V9.375H10.625Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$a=_export_sfc(_sfc_main$2L,[["render",_sfc_render$1u]]),_sfc_main$2K={},_hoisted_1$2j={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1t(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2j,n[0]||(n[0]=[createBaseVNode("rect",{x:"3.75",y:"9.375",width:"12.5",height:"1.25",fill:"currentColor"},null,-1)]))}const __unplugin_components_1$8=_export_sfc(_sfc_main$2K,[["render",_sfc_render$1t]]),_sfc_main$2J={},_hoisted_1$2i={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1s(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2i,n[0]||(n[0]=[createBaseVNode("rect",{opacity:"0.01",width:"16",height:"16",transform:"matrix(0 -1 -1 0 16 16)",fill:"currentColor"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 5.51025L7.5041 10.5L11.5 5.5L3.5 5.51025Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_12$1=_export_sfc(_sfc_main$2J,[["render",_sfc_render$1s]]),ZoomOverlay_vue_vue_type_style_index_0_lang="",_hoisted_1$2h={class:"zoom-overlay"},_hoisted_2$J={class:"input-container"},_hoisted_3$x={class:"drop-down-zoom"},_hoisted_4$r={class:"drop-down zoom"},_sfc_main$2I={__name:"ZoomOverlay",props:["docNum"],setup(e){const n=ref(null),{proxy:{$forceUpdate:r}}=getCurrentInstance(),o=useViewerStore(),s=computed(()=>e.docNum===2?o.getOldScale:e.docNum===3?o.getNewScale:o.getScale),u=computed(()=>o.getUpload),d=()=>{s.value<=5||core.zoomOut(e.docNum)},f=()=>{s.value>1e3||core.zoomIn(e.docNum)},g=_=>{const w=/^(\d){0,4}$/,x=_.target.value;w.test(x)||x===""?e.docNum===2?o.setOldCurrentScale(x/100):e.docNum===3?o.setNewCurrentScale(x/100):o.setCurrentScale(x/100):(e.docNum===2?o.setOldCurrentScale(o.getOldScale/100):e.docNum===3?o.setNewCurrentScale(o.getNewScale/100):o.setCurrentScale(o.getScale/100),r())},m=_=>{let w="";if(_.target&&_.target.value?w=_.target.value:w=_,!w){s.value=o.getScale;return}if(/^(\d){0,4}$/.test(w)){let k=Math.max(5,w);k=Math.min(1e3,k),e.docNum===2?o.setOldCurrentScale(k/100):e.docNum===3?o.setNewCurrentScale(k/100):o.setCurrentScale(k/100),core.scaleChanged(k/100,e.docNum)}else e.docNum===2?o.setOldCurrentScale(o.getOldScale/100):e.docNum===3?o.setNewCurrentScale(o.getNewScale/100):o.setCurrentScale(o.getScale/100),r();n.value.setShow(!1)},y=computed(()=>s.value?s.value.toString().length*9:0),v=_=>{_.target.value?m(_):m("100")};return(_,w)=>{const x=__unplugin_components_12$1,k=__unplugin_components_1$8,S=_sfc_main$3O,M=__unplugin_components_3$a;return openBlock(),createElementBlock("div",_hoisted_1$2h,[createBaseVNode("div",_hoisted_2$J,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":w[0]||(w[0]=E=>s.value=E),type:"text",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:g,onKeydown:withKeys(m,["enter"]),onBlur:v,style:normalizeStyle({width:y.value+"px"}),name:"zoom"},null,36),[[vModelText,s.value]]),createBaseVNode("div",_hoisted_3$x,[w[11]||(w[11]=createBaseVNode("span",null,"%",-1)),createVNode(unref(NPopover),{ref_key:"popover",ref:n,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4,disabled:!u.value},{trigger:withCtx(()=>[createVNode(x,{class:"arrow-left"})]),default:withCtx(()=>[createBaseVNode("div",_hoisted_4$r,[createBaseVNode("div",{class:"drop-item",onClick:w[1]||(w[1]=E=>m("10"))},"10%"),createBaseVNode("div",{class:"drop-item",onClick:w[2]||(w[2]=E=>m("25"))},"25%"),createBaseVNode("div",{class:"drop-item",onClick:w[3]||(w[3]=E=>m("50"))},"50%"),createBaseVNode("div",{class:"drop-item",onClick:w[4]||(w[4]=E=>m("100"))},"100%"),createBaseVNode("div",{class:"drop-item",onClick:w[5]||(w[5]=E=>m("150"))},"150%"),createBaseVNode("div",{class:"drop-item",onClick:w[6]||(w[6]=E=>m("200"))},"200%"),createBaseVNode("div",{class:"drop-item",onClick:w[7]||(w[7]=E=>m("300"))},"300%"),createBaseVNode("div",{class:"drop-item",onClick:w[8]||(w[8]=E=>m("400"))},"400%"),createBaseVNode("div",{class:"drop-item",onClick:w[9]||(w[9]=E=>m("500"))},"500%"),createBaseVNode("div",{class:"drop-item",onClick:w[10]||(w[10]=E=>m("1000"))},"1000%")])]),_:1},8,["disabled"])])]),createVNode(S,{img:"icon-header-zoom-out",onClick:d,title:_.$t("header.zoomOut"),class:normalizeClass({disabled:!u.value})},{default:withCtx(()=>[createVNode(k)]),_:1},8,["title","class"]),createVNode(S,{img:"icon-header-zoom-in",onClick:f,title:_.$t("header.zoomIn"),class:normalizeClass({disabled:!u.value})},{default:withCtx(()=>[createVNode(M)]),_:1},8,["title","class"])])}}},CompareDocumentContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$2g={class:"old"},_hoisted_2$I={class:"file-type"},_hoisted_3$w={class:"upload-tip"},_hoisted_4$q={class:"rect-button white"},_hoisted_5$l={key:1,class:"uploaded pc"},_hoisted_6$i={class:"header-info"},_hoisted_7$e={class:"file-name"},_hoisted_8$b={class:"drop-area mobile"},_hoisted_9$9={class:"upload-tip mobile"},_hoisted_10$7={class:"text"},_hoisted_11$7={class:"rect-button white"},_hoisted_12$7={key:0,class:"file-name"},_hoisted_13$7={class:"new"},_hoisted_14$7={class:"file-type"},_hoisted_15$7={class:"upload-tip"},_hoisted_16$7={class:"rect-button white"},_hoisted_17$4={key:1,class:"uploaded pc"},_hoisted_18$4={class:"header-info"},_hoisted_19$4={class:"file-name"},_hoisted_20$4={class:"drop-area mobile"},_hoisted_21$3={class:"upload-tip"},_hoisted_22$3={class:"text"},_hoisted_23$3={class:"rect-button white"},_hoisted_24$3={key:0,class:"file-name"},_sfc_main$2H={__name:"CompareDocumentContainer",props:{docNum:Number},setup(e){const{loadDocument:n,initializeViewer:r,initConfig:o}=core,s=useViewerStore(),u=useDocumentStore(),d=computed(()=>s.getToolMode),f=computed(()=>s.getCompareStatus),g=ref(),m=ref(),y=ref(),v=ref();let _=computed(()=>u.getCompareFile("oldFile")),w=computed(()=>u.getCompareFile("newFile")),x=ref(!1),k=ref(!1);const S=computed(()=>s.getVerified);watch(()=>d.value,(Y,Z)=>{Z==="compare"&&Y!==Z&&(E(),I()),Y==="compare"&&Y!==Z&&setTimeout(()=>{S.value||(core.eventBus().dispatch("message",{type:"ERROR",message:"Invalid license"}),console.log("Invalid license")),F()},1)});const M=async(Y,Z)=>{if(!Y.target.files[0])return;let j=URL.createObjectURL(Y.target.files[0]);const ne=await core.checkPassword(j,!0);if(ne===!1){Y.target.value="";return}const le=Y.target.files[0].name;Z==="old"&&(u.setCompareFiles("oldFile",Y.target.files[0]),u.setCompareFiles("oldFilePassword",ne),N(j,le,2)),Z==="new"&&(u.setCompareFiles("newFile",Y.target.files[0]),u.setCompareFiles("newFilePassword",ne),N(j,le,3))},E=Y=>{Y==="old"?(u.setCompareFiles("oldFile",null),u.setCompareFiles("oldFilePassword","")):Y==="new"?(u.setCompareFiles("newFile",null),u.setCompareFiles("newFilePassword","")):u.initCompareFiles(),s.setCompareStatus("")},P=async(Y,Z)=>{Y.preventDefault();const j=Y.dataTransfer.files;if(x.value=!1,k.value=!1,j[0].type!=="application/pdf")return;let ne=URL.createObjectURL(j[0]);const le=await core.checkPassword(ne,!0);if(le===!1){Y.target.value="";return}const J=j[0].name;Z==="old"&&(u.setCompareFiles("oldFile",j[0]),u.setCompareFiles("oldFilePassword",le),N(ne,J,2)),Z==="new"&&(u.setCompareFiles("newFile",j[0]),u.setCompareFiles("newFilePassword",le),N(ne,J,3))},T=Y=>{Y==="old"&&(x.value=!0),Y==="new"&&(k.value=!0)},D=Y=>{const Z=document.getElementById("oldDropArea"),j=document.getElementById("newDropArea");let ne=Y.relatedTarget;for(;ne;){if(ne===Z||Z.contains(ne)||ne===j||j.contains(ne))return;ne=ne.parentElement}x.value=!1,k.value=!1},F=()=>{const Y=s.getLicense;!Y||(core.setDocumentViewer(2,null,{$t:instance.$t}),core.setDocumentViewer(3,null,{$t:instance.$t}),o({license:Y},2),r({container:g.value,viewer:m.value},2),o({license:Y},3),r({container:y.value,viewer:v.value},3))},I=()=>{core.deleteDocumentViewer(2),core.deleteDocumentViewer(3)};async function N(Y,Z,j){s.setUpload(!0),s.setUploadLoading(!0),await q(Y,Z,j),s.setUploadLoading(!1)}async function q(Y,Z,j){let ne=null;j===2?ne=u.getCompareFile("oldFilePassword"):j===3&&(ne=u.getCompareFile("newFilePassword"));const le={extension:getHashParameters("extension",null),filename:getHashParameters("filename",null)||Z,externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:u.setLoadingProgress,pageChangedCallback:s.setCurrentPage,scaleChangedCallback:j===2?s.setOldCurrentScale:s.setNewCurrentScale,annotationsNumChangedCallback:u.setAnnotationsCount,distanceChangedCallback:u.setDistance,notUploadPdf:!0};ne&&(le.pwd=ne);try{await n(Y,le,j)}catch(J){console.log(J),(J==="invalid_file_error"||J==="no_password_given"||J==="incorrect_password")&&(s.setUpload(!1),u.setLoadingProgress(0),s.resetSetting())}}return(Y,Z)=>{const j=_sfc_main$2I,ne=__unplugin_components_1$a,le=_sfc_main$2M,J=_sfc_main$2N,O=_sfc_main$2O;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(["compare-document-container",{under:d.value!=="compare"||d.value==="compare"&&f.value==="finished"}])},[createBaseVNode("div",_hoisted_1$2g,[createBaseVNode("div",_hoisted_2$I,toDisplayString$1(Y.$t("compare.oldFile")),1),createBaseVNode("div",{class:normalizeClass(["file-content",{"no-file":!unref(_)}])},[unref(_)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-area pc",{"drag-over":unref(x)}]),id:"oldDropArea",onDragover:Z[1]||(Z[1]=withModifiers(()=>{},["prevent"])),onDragenter:Z[2]||(Z[2]=U=>T("old")),onDragleave:D,onDrop:Z[3]||(Z[3]=U=>P(U,"old"))},[createBaseVNode("div",_hoisted_3$w,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[0]")),1),Z[12]||(Z[12]=createBaseVNode("br",null,null,-1)),createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[1]")),1)]),createBaseVNode("div",_hoisted_4$q,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseOldFile")),1),createBaseVNode("input",{type:"file",onChange:Z[0]||(Z[0]=U=>M(U,"old")),accept:".pdf",name:"compare"},null,32)])])],34)),unref(_)?(openBlock(),createElementBlock("div",_hoisted_5$l,[createBaseVNode("div",_hoisted_6$i,[createVNode(j,{docNum:2}),createBaseVNode("p",_hoisted_7$e,toDisplayString$1(unref(_).name),1),createVNode(ne,{class:"close",onClick:Z[4]||(Z[4]=U=>E("old"))})])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["old-file-container file-container pc",{"no-file":!unref(_)}]),ref_key:"oldFileContainer",ref:g},[createBaseVNode("div",{ref_key:"oldViewerContainer",ref:m,class:"document"},null,512)],2),createBaseVNode("div",_hoisted_8$b,[createBaseVNode("div",_hoisted_9$9,[createBaseVNode("div",_hoisted_10$7,[createBaseVNode("p",null,toDisplayString$1(Y.$t("compare.oldFile")),1)]),createBaseVNode("div",_hoisted_11$7,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseOldFile"))+" ",1),createBaseVNode("input",{type:"file",onChange:Z[5]||(Z[5]=U=>M(U,"old")),accept:".pdf",name:"compare"},null,32),unref(_)?(openBlock(),createElementBlock("p",_hoisted_12$7,toDisplayString$1(unref(_).name),1)):createCommentVNode("",!0)])])])],2)]),createBaseVNode("div",_hoisted_13$7,[createBaseVNode("div",_hoisted_14$7,toDisplayString$1(Y.$t("compare.newFile")),1),createBaseVNode("div",{class:normalizeClass(["file-content",{"no-file":!unref(w)}])},[unref(w)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-area pc",{"drag-over":unref(k)}]),id:"newDropArea",onDragover:Z[7]||(Z[7]=withModifiers(()=>{},["prevent"])),onDragenter:Z[8]||(Z[8]=U=>T("new")),onDragleave:D,onDrop:Z[9]||(Z[9]=U=>P(U,"new"))},[createBaseVNode("div",_hoisted_15$7,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[0]")),1),Z[13]||(Z[13]=createBaseVNode("br",null,null,-1)),createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[1]")),1)]),createBaseVNode("div",_hoisted_16$7,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseNewFile")),1),createBaseVNode("input",{type:"file",onChange:Z[6]||(Z[6]=U=>M(U,"new")),accept:".pdf",name:"compare"},null,32)])])],34)),unref(w)?(openBlock(),createElementBlock("div",_hoisted_17$4,[createBaseVNode("div",_hoisted_18$4,[createVNode(j,{docNum:3}),createBaseVNode("p",_hoisted_19$4,toDisplayString$1(unref(w).name),1),createVNode(ne,{class:"close",onClick:Z[10]||(Z[10]=U=>E("new"))})])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["new-file-container file-container pc",{"no-file":!unref(w)}]),ref_key:"newFileContainer",ref:y},[createBaseVNode("div",{ref_key:"newViewerContainer",ref:v,class:"document"},null,512)],2),createBaseVNode("div",_hoisted_20$4,[createBaseVNode("div",_hoisted_21$3,[createBaseVNode("div",_hoisted_22$3,[createBaseVNode("p",null,toDisplayString$1(Y.$t("compare.newFile")),1)]),createBaseVNode("div",_hoisted_23$3,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseNewFile"))+" ",1),createBaseVNode("input",{type:"file",onChange:Z[11]||(Z[11]=U=>M(U,"new")),accept:".pdf",name:"compare"},null,32),unref(w)?(openBlock(),createElementBlock("p",_hoisted_24$3,toDisplayString$1(unref(w).name),1)):createCommentVNode("",!0)])])])],2)])],2),createVNode(le),createVNode(J),createVNode(O)],64)}}},_sfc_main$2G={},_hoisted_1$2f={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1r(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2f,n[0]||(n[0]=[createBaseVNode("path",{d:"M2.52442 5.684L10 1.36798L17.4756 5.684V14.3161L10 18.6321L2.52442 14.3161V5.684Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M10.0003 6.50003L13.0314 8.25003V11.75L10.0003 13.5L6.96919 11.75V8.25003L10.0003 6.50003Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$a=_export_sfc(_sfc_main$2G,[["render",_sfc_render$1r]]),_sfc_main$2F={},_hoisted_1$2e={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2e,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.54546 4.375L16.6666 4.375V5.625L8.54546 5.625C8.29821 6.2358 7.69939 6.66667 6.99994 6.66667C6.30049 6.66667 5.70167 6.2358 5.45442 5.625L3.33325 5.625L3.33325 4.375L5.45442 4.375C5.70167 3.7642 6.30049 3.33333 6.99994 3.33333C7.69939 3.33333 8.29821 3.7642 8.54546 4.375ZM3.33325 10.625L11.2877 10.625C11.5349 11.2358 12.1337 11.6667 12.8332 11.6667C13.5326 11.6667 14.1314 11.2358 14.3787 10.625H16.6666V9.375H14.3787C14.1314 8.7642 13.5326 8.33333 12.8332 8.33333C12.1337 8.33333 11.5349 8.7642 11.2877 9.375L3.33325 9.375L3.33325 10.625ZM5.45432 15.625H3.33325L3.33325 14.375H5.45432C5.70156 13.7642 6.30038 13.3333 6.99984 13.3333C7.69929 13.3333 8.29811 13.7642 8.54535 14.375L16.6666 14.375V15.625L8.54535 15.625C8.29811 16.2358 7.69929 16.6667 6.99984 16.6667C6.30038 16.6667 5.70156 16.2358 5.45432 15.625Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$9=_export_sfc(_sfc_main$2F,[["render",_sfc_render$1q]]),_sfc_main$2E={},_hoisted_1$2d={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1p(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2d,n[0]||(n[0]=[createBaseVNode("path",{d:"M17.8252 2.743H2.17484V17.4101C2.17484 17.4943 2.27256 17.5408 2.33791 17.4877L6.16578 14.3765H17.8252V2.743Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M5.00003 6.77402H14",stroke:"#43474D","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M5.00003 10.2973H11",stroke:"#43474D","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_1$7=_export_sfc(_sfc_main$2E,[["render",_sfc_render$1p]]),_sfc_main$2D={},_hoisted_1$2c={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1o(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2c,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 3H0V17H20V3ZM9.5918 10.3271C9.5918 12.3794 8.41406 13.6626 6.54199 13.6626C4.65674 13.6626 3.48779 12.3794 3.48779 10.3271C3.48779 8.27051 4.67432 6.99609 6.54199 6.99609C8.40967 6.99609 9.5918 8.2749 9.5918 10.3271ZM4.8457 10.3271C4.8457 11.6719 5.49609 12.5376 6.54199 12.5376C7.57471 12.5376 8.23389 11.6719 8.23389 10.3271C8.23389 8.97803 7.57031 8.12109 6.54199 8.12109C5.50928 8.12109 4.8457 8.97803 4.8457 10.3271ZM12.1758 13.5V11.562L12.8042 10.8062L14.6455 13.5H16.2363L13.7622 9.93604L16.0737 7.15869H14.5972L12.2549 10.0063H12.1758V7.15869H10.8486V13.5H12.1758Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$r=_export_sfc(_sfc_main$2D,[["render",_sfc_render$1o]]),_sfc_main$2C={},_hoisted_1$2b={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1n(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2b,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.25 2.25H19.75V10.75H15.75V17.75H0.25V10.75V9.25V2.25ZM1.75 10.75H14.25V16.25H1.75V10.75ZM18.25 9.25H15.75H1.75V3.75H18.25V9.25ZM15 8L17 5.5H13L15 8Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$q=_export_sfc(_sfc_main$2C,[["render",_sfc_render$1n]]),_sfc_main$2B={},_hoisted_1$2a={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1m(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2a,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.75 2.25H0.25V17.75H19.75V2.25ZM18.25 10.75V16.25H1.75V10.75H18.25ZM18.25 9.25V3.75H1.75V9.25H18.25ZM6 5.5H3V7.5H6V5.5ZM3 12.5H6V14.5H3V12.5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$p=_export_sfc(_sfc_main$2B,[["render",_sfc_render$1m]]),_sfc_main$2A={},_hoisted_1$29={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1l(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$29,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 1.25C5.16751 1.25 1.25 5.16751 1.25 10C1.25 14.8325 5.16751 18.75 10 18.75C14.8325 18.75 18.75 14.8325 18.75 10C18.75 5.16751 14.8325 1.25 10 1.25ZM10 2.75C14.0041 2.75 17.25 5.99594 17.25 10C17.25 14.0041 14.0041 17.25 10 17.25C5.99594 17.25 2.75 14.0041 2.75 10C2.75 5.99594 5.99594 2.75 10 2.75ZM10 13C11.6569 13 13 11.6569 13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$o=_export_sfc(_sfc_main$2A,[["render",_sfc_render$1l]]),_sfc_main$2z={},_hoisted_1$28={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1k(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$28,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.25 1.75H1.75V18.25H18.25V1.75ZM16.75 3.25V16.75H3.25V3.25H16.75ZM15.532 7.52861L14.468 6.47139L9.038 11.935L6.53204 9.41291L5.46796 10.4701L9.03873 14.0641L15.532 7.52861Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$n=_export_sfc(_sfc_main$2z,[["render",_sfc_render$1k]]),_sfc_main$2y={},_hoisted_1$27={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1j(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$27,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.25 2.25H19.75V17.75H0.25V2.25ZM18.25 11.75V3.75H1.75V16.25H13.75L18.25 11.75ZM11.25 5.5V8H9.75V7H8V13H8.75V14.5H5.75V13H6.5V7H4.75V8H3.25V5.5H11.25Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$m=_export_sfc(_sfc_main$2y,[["render",_sfc_render$1j]]),_sfc_main$2x={},_hoisted_1$26={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1i(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$26,n[0]||(n[0]=[createBaseVNode("g",{id:"subtoolbar / mytools / links"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.8388 7.17154L14.331 11.6793L13.2703 10.6187L16.7175 7.17154L12.8284 3.28245L9.38125 6.7296L8.32059 5.66894L12.8284 1.16113L18.8388 7.17154ZM6.7296 9.38125L3.28245 12.8284L7.17154 16.7175L10.6187 13.2703L11.6793 14.331L7.17154 18.8388L1.16113 12.8284L5.66894 8.32059L6.7296 9.38125ZM9.11608 11.9445L11.9445 9.11608L10.8839 8.05542L8.05542 10.8839L9.11608 11.9445Z",fill:"currentColor"})],-1)]))}const __unplugin_components_14$2=_export_sfc(_sfc_main$2x,[["render",_sfc_render$1i]]),_sfc_main$2w={},_hoisted_1$25={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1h(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$25,n[0]||(n[0]=[createBaseVNode("g",{id:"subtoolbar / mytools / image"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.25 3.25H18.75V16.75H1.25V3.25ZM17.25 4.75H2.75V13.2095L5.79496 10L10.0643 13.5L12.3718 11.0678L17.1442 15.25H17.25V4.75ZM14.5 9C15.3284 9 16 8.32843 16 7.5C16 6.67157 15.3284 6 14.5 6C13.6716 6 13 6.67157 13 7.5C13 8.32843 13.6716 9 14.5 9Z",fill:"currentColor"})],-1)]))}const __unplugin_components_13$1=_export_sfc(_sfc_main$2w,[["render",_sfc_render$1h]]),_sfc_main$2v={},_hoisted_1$24={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$24,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.982 9.97521C13.1875 9.28619 14 7.98798 14 6.5C14 4.29086 12.2091 2.5 10 2.5C7.79086 2.5 6 4.29086 6 6.5C6 7.98798 6.81248 9.2862 8.018 9.97522C8.10745 10.1032 8.5 10.6962 8.5 11.25C8.5 11.875 8 12.5 8 12.5H2V14H18V12.5H12C12 12.5 11.5 11.875 11.5 11.25C11.5 10.6962 11.8926 10.1032 11.982 9.97521ZM18 17.5V16H2V17.5H18Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_12=_export_sfc(_sfc_main$2v,[["render",_sfc_render$1g]]),_sfc_main$2u={},_hoisted_1$23={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$23,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.75 2.75V6H15.25V4.25H10.75V16.25H12.3337V17.75H7.66699V16.25H9.25V4.25H4.75V6H3.25V2.75H16.75Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_11$1=_export_sfc(_sfc_main$2u,[["render",_sfc_render$1f]]),_sfc_main$2t={},_hoisted_1$22={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$22,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.4697 3.46967L17.5304 4.53033L3.53039 18.5303L2.46973 17.4697L16.4697 3.46967Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_10$1=_export_sfc(_sfc_main$2t,[["render",_sfc_render$1e]]),_sfc_main$2s={},_hoisted_1$21={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$21,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99164 3.52673L9.24244 3.56122L9.31142 5.05963L10.0606 5.02514L14.0731 4.84043L3.46978 15.4438L2.93945 15.9741L4.00011 17.0348L4.53044 16.5044L15.3467 5.68818L15.5465 10.0282L15.581 10.7774L17.0794 10.7084L17.0449 9.95918L16.769 3.96553L16.7345 3.21632L15.9853 3.25081L9.99164 3.52673Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_9$2=_export_sfc(_sfc_main$2s,[["render",_sfc_render$1d]]),_sfc_main$2r={},_hoisted_1$20={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$20,n[0]||(n[0]=[createBaseVNode("rect",{x:"2",y:"4",width:"16",height:"12",rx:"1",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_8=_export_sfc(_sfc_main$2r,[["render",_sfc_render$1c]]),_sfc_main$2q={},_hoisted_1$1$={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1$,n[0]||(n[0]=[createBaseVNode("circle",{cx:"10",cy:"10",r:"7",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_7$1=_export_sfc(_sfc_main$2q,[["render",_sfc_render$1b]]),_sfc_main$2p={},_hoisted_1$1_={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1_,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.57675 19.1757L1 17.7787L2.23629 17.3267L3.39858 16.9142L4.48804 16.5416L5.17445 16.3153L5.82936 16.1069L6.4531 15.9162L7.04603 15.7435L7.60849 15.5886L8.14082 15.4517L8.64337 15.3328C8.72467 15.3145 8.80474 15.297 8.88359 15.2802L9.34212 15.1884L9.77173 15.1147C11.0868 14.91 11.972 14.9785 12.4769 15.3262C12.7932 15.544 13.0243 15.7942 13.1655 16.0808C13.4151 16.5876 13.3721 16.9889 13.1388 17.5664L13.0118 17.8607L13.1178 17.8549C13.3318 17.8376 13.6024 17.7943 13.926 17.7239L14.1265 17.6785L14.3516 17.6235L14.8394 17.4928C14.9249 17.4688 15.0125 17.4435 15.1022 17.4171L15.6652 17.245L16.2781 17.0452L16.9408 16.8178L17.653 16.5629L18.4146 16.2803L19 17.6741L17.9462 18.0639L17.2946 18.2959L16.6828 18.5054L16.1097 18.6922C15.925 18.7507 15.7466 18.8054 15.5744 18.8563L15.076 18.9974C14.9159 19.0406 14.7618 19.0799 14.6135 19.1154L14.186 19.2101C13.0235 19.4455 12.271 19.399 11.8322 19.0549C11.4563 18.7602 11.3001 18.3582 11.3527 17.9256C11.3673 17.8051 11.3855 17.7161 11.4219 17.6072L11.4922 17.4224L11.6818 16.9751L11.7255 16.8448C11.7439 16.7759 11.7424 16.7393 11.7305 16.715C11.7102 16.674 11.6563 16.6156 11.5457 16.5395C11.436 16.4639 11.2053 16.4374 10.8597 16.4606L10.6123 16.4834C10.5683 16.4885 10.5228 16.4941 10.476 16.5004L10.1783 16.5455L9.84745 16.6054L9.48395 16.6803L9.08816 16.7701C9.01952 16.7863 8.94956 16.8031 8.87827 16.8206L8.43479 16.933L7.95999 17.0604L7.45428 17.203L6.63861 17.4454L5.75561 17.7221L4.80659 18.0333L3.79289 18.3792L3.08181 18.6292L2.34296 18.8946L1.57675 19.1757Z",fill:"#64BC38"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.7275 1.00012L16.9702 5.24276L14.8385 7.37449L10.5958 3.13185L12.7275 1.00012ZM9.8887 3.83896L3.53515 10.1925L2.12094 15.8494L7.77779 14.4352L14.1313 8.0816L9.8887 3.83896Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_6$3=_export_sfc(_sfc_main$2p,[["render",_sfc_render$1a]]),_sfc_main$2o={},_hoisted_1$1Z={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$19(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1Z,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 14H13.9922L12.8923 11.25H7.10772L6.00776 14H7V15H3V14H4.39223L9.30364 1.72146H10.6964L15.6078 14H17V15H13V14ZM7.5077 10.25H12.4923L10 4.019L7.5077 10.25Z",fill:"currentColor"},null,-1),createBaseVNode("path",{d:"M5.08299 17.9328L5.22219 18.0199C6.28806 18.7527 7.65967 18.7912 8.75772 18.1356L8.93809 18.0199C9.52914 17.6135 10.2863 17.5845 10.9011 17.9328L11.0403 18.0199C12.1062 18.7527 13.4778 18.7912 14.5759 18.1356L14.7562 18.0199C15.3473 17.6135 16.1045 17.5845 16.7193 17.9328L16.8585 18.0199C17.0638 18.161 17.2824 18.2777 17.5107 18.3686C17.8854 18.5177 18.3064 18.3253 18.451 17.9389C18.5956 17.5525 18.4091 17.1183 18.0344 16.9692C17.9483 16.9349 17.8647 16.8942 17.784 16.8471L17.6653 16.7718C16.5994 16.039 15.2278 16.0004 14.1298 16.6561L13.9494 16.7718C13.3584 17.1781 12.6011 17.2072 11.9864 16.8589L11.8472 16.7718C10.7813 16.039 9.40969 16.0004 8.31164 16.6561L8.13126 16.7718C7.54022 17.1781 6.78301 17.2072 6.16823 16.8589L6.02902 16.7718C4.96316 16.039 3.59155 16.0004 2.4935 16.6561L2.31312 16.7718C2.23868 16.823 2.16125 16.8684 2.08133 16.908L1.95963 16.9629C1.5862 17.1154 1.40339 17.5513 1.55131 17.9364C1.69922 18.3215 2.12186 18.51 2.49529 18.3575C2.64087 18.298 2.78242 18.228 2.91898 18.1478L3.11995 18.0199C3.711 17.6135 4.46821 17.5845 5.08299 17.9328Z",fill:"#FF0000"},null,-1)]))}const __unplugin_components_5$3=_export_sfc(_sfc_main$2o,[["render",_sfc_render$19]]),_sfc_main$2n={},_hoisted_1$1Y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$18(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1Y,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.3494 15.3928H13.2139V16.3928H17.4996V15.3928H15.9649L10.6964 2.22146H9.30364L4.03508 15.3929H2.5V16.3929H6.78571V15.3929H5.65062L10 4.519L14.3494 15.3928Z",fill:"currentColor"},null,-1),createBaseVNode("rect",{y:"10.5",width:"20",height:"1.5",fill:"#FF0000"},null,-1)]))}const __unplugin_components_4$8=_export_sfc(_sfc_main$2n,[["render",_sfc_render$18]]),_sfc_main$2m={},_hoisted_1$1X={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$17(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1X,n[0]||(n[0]=[createBaseVNode("rect",{y:"17",width:"20",height:"1.5",fill:"#FF0000"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 14H13.9922L12.8923 11.25H7.10772L6.00776 14H7V15H3V14H4.39223L9.30364 1.72146H10.6964L15.6078 14H17V15H13V14ZM7.5077 10.25H12.4923L10 4.019L7.5077 10.25Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$9=_export_sfc(_sfc_main$2m,[["render",_sfc_render$17]]),_sfc_main$2l={},_hoisted_1$1W={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$16(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1W,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 2H20L18 18H0L2 2Z",fill:"#FEF87C"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6078 15.5L10.6964 3.22145H9.30364L4.39223 15.5H3V16.5H7V15.5H6.00776L7.10772 12.75H12.8923L13.9922 15.5H13V16.5H17V15.5H15.6078ZM12.4923 11.75L10 5.51899L7.5077 11.75H12.4923Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_1$6=_export_sfc(_sfc_main$2l,[["render",_sfc_render$16]]),CToolButton_vue_vue_type_style_index_0_scoped_4d1120f8_lang="",_hoisted_1$1V=["title"],_sfc_main$2k={__name:"CToolButton",props:["item"],setup(e){const n=useViewerStore(),r=useDocumentStore(),{type:o,title:s,disabled:u,className:d,toolName:f}=e.item,g=["highlight","underline","squiggly","strikeout"],m=["square","circle","arrow","line"],y=["ink","freetext","stamp","image","link"],v=["textfield","checkbox","radiobutton","listbox","combobox","pushbutton"];computed(()=>{if(g.includes(f))return"markup";if(m.includes(f))return"shape";if(y.includes(f))return"annotation";if(v.includes(f))return"form"});const _=computed(()=>r.getActiveTool),w=computed(()=>f===_.value),x=E=>{if(r.setToolState(E),n.toggleActiveHand(!1),core.switchTool(0),core.switchAnnotationEditorMode(0),E==="stamp"?n.toggleElement("stampPanel"):n.closeElement("stampPanel"),_.value==="image"){const P=isMobileDevice?"annotaionImageInput":"signImageInput";document.getElementById(P).click()}},k=E=>{r.setMarkupToolState(E),x(E)},S=E=>{r.setShapeToolState(E),x(E)},M=()=>{g.includes(f)&&k(f),m.includes(f)&&S(f),y.includes(f)&&x(f),v.includes(f)&&x(f)};return(E,P)=>{const T=__unplugin_components_1$6,D=__unplugin_components_3$9,F=__unplugin_components_4$8,I=__unplugin_components_5$3,N=__unplugin_components_6$3,q=__unplugin_components_7$1,Y=__unplugin_components_8,Z=__unplugin_components_9$2,j=__unplugin_components_10$1,ne=__unplugin_components_11$1,le=__unplugin_components_12,J=__unplugin_components_13$1,O=__unplugin_components_14$2,U=__unplugin_components_0$m,W=__unplugin_components_0$n,H=__unplugin_components_0$o,X=__unplugin_components_0$p,Q=__unplugin_components_0$q,fe=__unplugin_components_0$r;return openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:w.value,[unref(o)]:unref(o),[unref(d)]:unref(d),"with-text":v.includes(unref(f))}]),onClick:P[0]||(P[0]=Se=>M()),title:unref(s)},[unref(f)==="highlight"?(openBlock(),createBlock(T,{key:0})):createCommentVNode("",!0),unref(f)==="underline"?(openBlock(),createBlock(D,{key:1})):createCommentVNode("",!0),unref(f)==="strikeout"?(openBlock(),createBlock(F,{key:2})):createCommentVNode("",!0),unref(f)==="squiggly"?(openBlock(),createBlock(I,{key:3})):createCommentVNode("",!0),unref(f)==="ink"?(openBlock(),createBlock(N,{key:4})):createCommentVNode("",!0),unref(f)==="circle"?(openBlock(),createBlock(q,{key:5})):createCommentVNode("",!0),unref(f)==="square"?(openBlock(),createBlock(Y,{key:6})):createCommentVNode("",!0),unref(f)==="arrow"?(openBlock(),createBlock(Z,{key:7})):createCommentVNode("",!0),unref(f)==="line"?(openBlock(),createBlock(j,{key:8})):createCommentVNode("",!0),unref(f)==="freetext"?(openBlock(),createBlock(ne,{key:9})):createCommentVNode("",!0),unref(f)==="stamp"?(openBlock(),createBlock(le,{key:10})):createCommentVNode("",!0),unref(f)==="image"?(openBlock(),createBlock(J,{key:11})):createCommentVNode("",!0),unref(f)==="link"?(openBlock(),createBlock(O,{key:12})):createCommentVNode("",!0),unref(f)==="textfield"?(openBlock(),createElementBlock(Fragment,{key:13},[createVNode(U),createBaseVNode("span",null,toDisplayString$1(E.$t("header.textField")),1)],64)):createCommentVNode("",!0),unref(f)==="checkbox"?(openBlock(),createElementBlock(Fragment,{key:14},[createVNode(W),createBaseVNode("span",null,toDisplayString$1(E.$t("header.checkbox")),1)],64)):createCommentVNode("",!0),unref(f)==="radiobutton"?(openBlock(),createElementBlock(Fragment,{key:15},[createVNode(H),createBaseVNode("span",null,toDisplayString$1(E.$t("header.radioButton")),1)],64)):createCommentVNode("",!0),unref(f)==="listbox"?(openBlock(),createElementBlock(Fragment,{key:16},[createVNode(X),createBaseVNode("span",null,toDisplayString$1(E.$t("header.listBox")),1)],64)):createCommentVNode("",!0),unref(f)==="combobox"?(openBlock(),createElementBlock(Fragment,{key:17},[createVNode(Q),createBaseVNode("span",null,toDisplayString$1(E.$t("header.comboButton")),1)],64)):createCommentVNode("",!0),unref(f)==="pushbutton"?(openBlock(),createElementBlock(Fragment,{key:18},[createVNode(fe),createBaseVNode("span",null,toDisplayString$1(E.$t("header.button")),1)],64)):createCommentVNode("",!0)],10,_hoisted_1$1V)}}},__unplugin_components_3$8=_export_sfc(_sfc_main$2k,[["__scopeId","data-v-4d1120f8"]]),_hoisted_1$1U=["data-element","disabled","title"],_hoisted_2$H=["innerHTML"],_hoisted_3$v=["src"],_sfc_main$2j={__name:"ToggleButton",props:["item"],setup(e){const n=useViewerStore();useDocumentStore();const{type:r,img:o,dataElement:s,title:u,disabled:d,className:f,element:g}=e.item,m=o==null?void 0:o.trim().toLowerCase().startsWith("<svg"),y=w=>{w==null||w.stopPropagation(),w==null||w.preventDefault()},v=computed(()=>n.isElementOpen(g)),_=()=>{n.toggleElement(g)};return(w,x)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:v.value,[unref(r)]:unref(r),disabled:unref(d),[unref(f)]:unref(f)}]),"data-element":unref(s),onClick:x[0]||(x[0]=k=>unref(d)||!_?y():_()),disabled:unref(d),title:unref(u)},[unref(o)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(m)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(o),class:"img"},null,8,_hoisted_2$H)):(openBlock(),createElementBlock("img",{key:1,src:unref(o),alt:"",class:"img"},null,8,_hoisted_3$v))],64)):createCommentVNode("",!0)],10,_hoisted_1$1U))}},StatefulButton_vue_vue_type_style_index_0_lang="",_hoisted_1$1T=["data-element","disabled","title"],_hoisted_2$G=["innerHTML"],_hoisted_3$u=["src"],_hoisted_4$p={key:1,class:"text"},_sfc_main$2i={__name:"StatefulButton",props:["item"],setup(e){useViewerStore(),useDocumentStore();const{type:n,dataElement:r,title:o,disabled:s,className:u,initialState:d,states:f,mount:g,unmount:m}=e.item,y=P=>{P==null||P.stopPropagation(),P==null||P.preventDefault()},v=ref(d),_=f[v.value],w=ref(!1),{img:x}=_,k=x==null?void 0:x.trim().toLowerCase().startsWith("<svg"),S=()=>{M(),_.onClick(_)},M=()=>{v.value=d},E=computed(()=>_.getContent instanceof Function?_.getContent(_):_.getContent);return g&&onMounted(()=>{g()}),m&&onUnmounted(()=>{m()}),(P,T)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:w.value,[unref(n)]:unref(n),disabled:unref(s),[unref(u)]:unref(u)}]),"data-element":unref(r),onClick:T[0]||(T[0]=D=>unref(s)||!S?y():S()),onDblclick:T[1]||(T[1]=D=>unref(s)?y:P.onDoubleClick),onMouseup:T[2]||(T[2]=D=>unref(s)?y:P.onDoubleClick),disabled:unref(s),title:unref(o)},[unref(x)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(k)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(x),class:"img"},null,8,_hoisted_2$G)):(openBlock(),createElementBlock("img",{key:1,src:unref(x),alt:"",class:"img"},null,8,_hoisted_3$u))],64)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(E.value)+" ",1),e.item.dropItem?(openBlock(),createElementBlock("span",_hoisted_4$p,toDisplayString$1(e.item.text),1)):createCommentVNode("",!0)],42,_hoisted_1$1T))}},_hoisted_1$1S=["data-element","disabled","title"],_hoisted_2$F=["innerHTML"],_hoisted_3$t=["src"],_hoisted_4$o={key:1},_hoisted_5$k={key:2,class:"text"},_sfc_main$2h={__name:"ActionButton",props:["item"],setup(e){const{type:n,img:r,text:o,dataElement:s,onClick:u,title:d,disabled:f,className:g}=e.item,m=r==null?void 0:r.trim().toLowerCase().startsWith("<svg"),y=v=>{v==null||v.stopPropagation(),v==null||v.preventDefault()};return(v,_)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{[unref(n)]:unref(n),disabled:unref(f),[unref(g)]:unref(g)}]),"data-element":unref(s),onClick:_[0]||(_[0]=w=>unref(f)||!unref(u)?y():unref(u)(w)),onDblclick:_[1]||(_[1]=w=>unref(f)?y:v.onDoubleClick),onMouseup:_[2]||(_[2]=w=>unref(f)?y:v.onDoubleClick),disabled:unref(f),title:unref(d)},[unref(r)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(m)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(r),class:"img"},null,8,_hoisted_2$F)):(openBlock(),createElementBlock("img",{key:1,src:unref(r),alt:"",class:"img"},null,8,_hoisted_3$t))],64)):unref(o)?(openBlock(),createElementBlock("div",_hoisted_4$o,toDisplayString$1(unref(o)),1)):createCommentVNode("",!0),e.item.dropItem?(openBlock(),createElementBlock("span",_hoisted_5$k,toDisplayString$1(e.item.text),1)):createCommentVNode("",!0)],42,_hoisted_1$1S))}},CustomButton_vue_vue_type_style_index_0_lang="",_sfc_main$2g={__name:"CustomButton",props:["item"],setup(e){const{type:n}=e.item;return(r,o)=>{const s=_sfc_main$2h,u=_sfc_main$2i,d=_sfc_main$2j,f=__unplugin_components_3$8;return openBlock(),createElementBlock(Fragment,null,[unref(n)==="actionButton"?(openBlock(),createBlock(s,{key:0,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(n)==="statefulButton"?(openBlock(),createBlock(u,{key:1,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(n)==="toggleButton"?(openBlock(),createBlock(d,{key:2,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(n)==="toolButton"?(openBlock(),createBlock(f,{key:3,item:e.item},null,8,["item"])):createCommentVNode("",!0)],64)}}},MeasurementPopup_vue_vue_type_style_index_0_scoped_68e4990c_lang="",_sfc_main$2f={__name:"MeasurementPopup",setup(e){const n=useViewerStore();useDocumentStore();const r=computed(()=>n.getPopupItems("measurementPopup")),o=computed(()=>n.isElementOpen("measurePanel")),s=computed(()=>n.isElementOpen("measurementSettingsDialog")),u=ref(!1),d=ref(0),f=ref(0),g=ref(null);let m;const y=k=>{u.value=!1,core.handlePopup({type:"measurement",tool:k})},v=async(k={})=>{const{rect:S}=k;if(u.value=!!S,await nextTick(),S&&u.value){const M=g.value.children[0];if(!M)return;const E=M.offsetWidth,P=M.offsetHeight+10;let T=S.right-E,D=S.bottom;const F=window.innerWidth,I=window.innerHeight;T>F-E&&(T=F-E),T=Math.max(0,T),D+P>I&&(D=Math.max(0,S.top-P)),d.value=D,f.value=o.value?T+130:T}};core.addEvent("showMeasurementPopup",v);const _=()=>{u.value&&(u.value=!1)},w=()=>{n.toggleElement("measurePanel")},x=()=>{n.openElement("measurementSettingsDialog")};return onMounted(()=>{m=document.querySelector(".document-container"),m&&m.addEventListener("scroll",_)}),onUnmounted(()=>{m&&m.removeEventListener("scroll",_)}),(k,S)=>{const M=_sfc_main$2g,E=__unplugin_components_1$7,P=_sfc_main$3O,T=__unplugin_components_4$9,D=__unplugin_components_4$a,F=__unplugin_components_3$b;return openBlock(),createElementBlock("div",{ref_key:"measurementPopupRef",ref:g},[withDirectives(createBaseVNode("div",{class:"measurement-popup popup",style:normalizeStyle({top:`${d.value}px`,left:`${f.value}px`,transform:`translateX(${!unref(isMobileDevice)&&o.value?-130:0}px) translateY(5px)`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(I,N)=>(openBlock(),createElementBlock(Fragment,{key:`${I.dataElement||new Date}-${N}`},[I.name==="customButton"&&!I.hidden?(openBlock(),createBlock(M,{key:0,item:I,"data-element":I.dataElement},null,8,["item","data-element"])):I.type==="reply"&&!I.hidden?(openBlock(),createBlock(P,{key:1,onClick:S[0]||(S[0]=q=>y("reply")),title:k.$t("measurement.reply"),"data-element":I.dataElement},{default:withCtx(()=>[createVNode(E)]),_:2},1032,["title","data-element"])):I.type==="property"&&!I.hidden?(openBlock(),createBlock(P,{key:2,onClick:w,title:k.$t("properties"),"data-element":I.dataElement,isActive:o.value},{default:withCtx(()=>[createVNode(T)]),_:2},1032,["title","data-element","isActive"])):I.type==="settings"&&!I.hidden?(openBlock(),createBlock(P,{key:3,onClick:x,title:k.$t("header.settings.settings"),"data-element":I.dataElement,isActive:s.value},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["title","data-element","isActive"])):I.type==="delete"&&!I.hidden?(openBlock(),createBlock(P,{key:4,onClick:S[1]||(S[1]=q=>y("delete")),title:k.$t("delete"),"data-element":I.dataElement},{default:withCtx(()=>[createVNode(F)]),_:2},1032,["title","data-element"])):["spacer","divider"].includes(I.type)?(openBlock(),createElementBlock("div",{key:5,class:normalizeClass(I.type)},null,2)):createCommentVNode("",!0)],64))),128))],4),[[vShow,u.value&&r.value.length]])],512)}}},__unplugin_components_20$1=_export_sfc(_sfc_main$2f,[["__scopeId","data-v-68e4990c"]]),_sfc_main$2e={},_hoisted_1$1R={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$15(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1R,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.9596 4.80005L13.2 5.88792L8 11.2L2.8 5.88792L4.0404 4.80005L8 8.84446L11.9596 4.80005Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$l=_export_sfc(_sfc_main$2e,[["render",_sfc_render$15]]),MeasurementSettingsDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1Q={class:"measurements-settings"},_hoisted_2$E={class:"subtitle"},_hoisted_3$s={class:"discription scale-discription"},_hoisted_4$n={class:"scale"},_hoisted_5$j={class:"form-box"},_hoisted_6$h={class:"form-box"},_hoisted_7$d={value:"pt"},_hoisted_8$a={value:"in"},_hoisted_9$8={value:"mm"},_hoisted_10$6={value:"cm"},_hoisted_11$6={value:"m"},_hoisted_12$6={value:"km"},_hoisted_13$6={value:"ft"},_hoisted_14$6={value:"yd"},_hoisted_15$6={value:"mi"},_hoisted_16$6={class:"form-box"},_hoisted_17$3={class:"form-box"},_hoisted_18$3={value:"pt"},_hoisted_19$3={value:"in"},_hoisted_20$3={value:"mm"},_hoisted_21$2={value:"cm"},_hoisted_22$2={value:"m"},_hoisted_23$2={value:"km"},_hoisted_24$2={value:"ft"},_hoisted_25$2={value:"yd"},_hoisted_26$2={value:"mi"},_hoisted_27$2={key:0,class:"error"},_hoisted_28$2={class:"discription"},_hoisted_29$1={class:"form-box"},_hoisted_30$1={key:0,class:"caption"},_hoisted_31$1={class:"subtitle"},_hoisted_32={class:"check-content"},dialogName$b="measurementSettingsDialog",_sfc_main$2d={__name:"MeasurementSettingsDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$b)),s=computed(()=>r.getActiveTool),u=reactive({scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:1}),d=ref(!1),f=ref(!0),g=ref(!0),m=ref("");let y=null,v=!0,_=!0;const w=ref(!1);watch(o,(P,T)=>{P&&(w.value=!1,y?M(y):(u.scale={base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},u.precision=1),d.value=!1)}),watch(u,P=>{y&&P.scale.base===y.scale.base&&P.scale.baseUnit===y.scale.baseUnit&&P.scale.translate===y.scale.translate&&P.scale.translateUnit===y.scale.translateUnit&&P.precision===y.precision||(w.value=!0)}),watch(f,P=>{P!==v&&(w.value=!0)}),watch(g,P=>{P!==_&&(w.value=!0)});const x=()=>{n.closeElement(dialogName$b)},k=()=>{u.scale.base.toString().length>6&&(u.scale.base=u.scale.base.toString().slice(0,6)),u.scale.translate.toString().length>6&&(u.scale.translate=u.scale.translate.toString().slice(0,6)),d.value=u.scale.base<=0||u.scale.translate<=0},S=()=>{core.setMeasurementDefaults(JSON.parse(JSON.stringify(u))),(m.value==="polygon"||m.value!=="polygon"&&s.value==="rectangle")&&core.setMeasurementDefaults({showPerimeter:f.value,showArea:g.value}),x()},M=P=>{for(const T in P){for(const D in u)if(T===D){if(T==="scale"){Object.assign(u.scale,P.scale);continue}u[D]=P[T]}T==="showPerimeter"&&(f.value=P[T]),T==="showArea"&&(g.value=P[T])}y=JSON.parse(JSON.stringify(u)),v=f.value,_=g.value};core.addEvent("updateMeasureData",M);const E=P=>{m.value=P.hasOwnProperty("type")?P.type:""};return core.addEvent("measurePropertyChange",E),(P,T)=>{const D=__unplugin_components_0$l,F=__unplugin_components_1$b,I=_sfc_main$37;return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1Q,[createVNode(I,{show:o.value,dialogName:dialogName$b},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(P.$t("measurement.measurementSettings")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:x},toDisplayString$1(P.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:d.value||!w.value}]),onClick:S},toDisplayString$1(P.$t("measurement.done")),3)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$E,toDisplayString$1(P.$t("measurement.scale")),1),createBaseVNode("p",_hoisted_3$s,toDisplayString$1(P.$t("measurement.drawingToActual")),1),createBaseVNode("div",_hoisted_4$n,[createBaseVNode("div",_hoisted_5$j,[withDirectives(createBaseVNode("input",{type:"number",min:"1",max:"999999","onUpdate:modelValue":T[0]||(T[0]=N=>u.scale.base=N),onInput:k},null,544),[[vModelText,u.scale.base]])]),createBaseVNode("div",_hoisted_6$h,[withDirectives(createBaseVNode("select",{class:"unit-input","onUpdate:modelValue":T[1]||(T[1]=N=>u.scale.baseUnit=N)},[createBaseVNode("option",_hoisted_7$d,toDisplayString$1(P.$t("measurement.pt")),1),createBaseVNode("option",_hoisted_8$a,toDisplayString$1(P.$t("measurement.in")),1),createBaseVNode("option",_hoisted_9$8,toDisplayString$1(P.$t("measurement.mm")),1),createBaseVNode("option",_hoisted_10$6,toDisplayString$1(P.$t("measurement.cm")),1),createBaseVNode("option",_hoisted_11$6,toDisplayString$1(P.$t("measurement.m")),1),createBaseVNode("option",_hoisted_12$6,toDisplayString$1(P.$t("measurement.km")),1),createBaseVNode("option",_hoisted_13$6,toDisplayString$1(P.$t("measurement.ft")),1),createBaseVNode("option",_hoisted_14$6,toDisplayString$1(P.$t("measurement.yd")),1),createBaseVNode("option",_hoisted_15$6,toDisplayString$1(P.$t("measurement.mi")),1)],512),[[vModelSelect,u.scale.baseUnit]]),createVNode(D)]),T[7]||(T[7]=createBaseVNode("span",null,"=",-1)),createBaseVNode("div",_hoisted_16$6,[withDirectives(createBaseVNode("input",{type:"number",min:"1",max:"999999","onUpdate:modelValue":T[2]||(T[2]=N=>u.scale.translate=N),onInput:k},null,544),[[vModelText,u.scale.translate]])]),createBaseVNode("div",_hoisted_17$3,[withDirectives(createBaseVNode("select",{class:"unit-input","onUpdate:modelValue":T[3]||(T[3]=N=>u.scale.translateUnit=N)},[createBaseVNode("option",_hoisted_18$3,toDisplayString$1(P.$t("measurement.pt")),1),createBaseVNode("option",_hoisted_19$3,toDisplayString$1(P.$t("measurement.in")),1),createBaseVNode("option",_hoisted_20$3,toDisplayString$1(P.$t("measurement.mm")),1),createBaseVNode("option",_hoisted_21$2,toDisplayString$1(P.$t("measurement.cm")),1),createBaseVNode("option",_hoisted_22$2,toDisplayString$1(P.$t("measurement.m")),1),createBaseVNode("option",_hoisted_23$2,toDisplayString$1(P.$t("measurement.km")),1),createBaseVNode("option",_hoisted_24$2,toDisplayString$1(P.$t("measurement.ft")),1),createBaseVNode("option",_hoisted_25$2,toDisplayString$1(P.$t("measurement.yd")),1),createBaseVNode("option",_hoisted_26$2,toDisplayString$1(P.$t("measurement.mi")),1)],512),[[vModelSelect,u.scale.translateUnit]]),createVNode(D)]),d.value?(openBlock(),createElementBlock("p",_hoisted_27$2,toDisplayString$1(P.$t("measurement.scaleError")),1)):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_28$2,toDisplayString$1(P.$t("measurement.precision")),1),createBaseVNode("div",_hoisted_29$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":T[4]||(T[4]=N=>u.precision=N)},T[8]||(T[8]=[createBaseVNode("option",{value:1},"1",-1),createBaseVNode("option",{value:.1},"0.1",-1),createBaseVNode("option",{value:.01},"0.01",-1),createBaseVNode("option",{value:.001},"0.001",-1),createBaseVNode("option",{value:1e-4},"0.0001",-1)]),512),[[vModelSelect,u.precision]]),createVNode(D)]),m.value==="polygon"||m.value!=="polygon"&&s.value==="rectangle"?(openBlock(),createElementBlock("div",_hoisted_30$1,[createBaseVNode("p",_hoisted_31$1,toDisplayString$1(P.$t("measurement.showCaption")),1),createBaseVNode("div",_hoisted_32,[createBaseVNode("div",{class:"check-box",onClick:T[5]||(T[5]=N=>f.value=!f.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:f.value}])},[withDirectives(createVNode(F,null,null,512),[[vShow,f.value]])],2),createBaseVNode("span",null,toDisplayString$1(P.$t("measurement.perimeter")),1)]),createBaseVNode("div",{class:"check-box",onClick:T[6]||(T[6]=N=>g.value=!g.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:g.value}])},[withDirectives(createVNode(F,null,null,512),[[vShow,g.value]])],2),createBaseVNode("span",null,toDisplayString$1(P.$t("measurement.area")),1)])])])):createCommentVNode("",!0)]),_:1},8,["show"])],512)),[[vShow,o.value]])}}},_sfc_main$2c={},_hoisted_1$1P={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$14(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1P,n[0]||(n[0]=[createBaseVNode("circle",{cx:"10.5",cy:"10",r:"8.25",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M17.0664 5.21002L3.37442 15.2833",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M13.5967 2.37137L2.12094 11.0831",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M18.9043 9.01334L7.85905 17.3793",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_5$2=_export_sfc(_sfc_main$2c,[["render",_sfc_render$14]]),_sfc_main$2b={},_hoisted_1$1O={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$13(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1O,n[0]||(n[0]=[createBaseVNode("rect",{x:"2.25",y:"3.75",width:"16.5",height:"12.5",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M18.2759 4.31778L2.203 16.3053",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M12.2065 3.56934L2.14012 11.148",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M18.8979 9.27121L9.43893 16.3618",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_4$7=_export_sfc(_sfc_main$2b,[["render",_sfc_render$13]]),_sfc_main$2a={},_hoisted_1$1N={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$12(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1N,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 3C1 1.89543 1.89543 1 3 1C3.83934 1 4.55793 1.51704 4.85462 2.25H16.1454C16.4421 1.51704 17.1607 1 18 1C19.1046 1 20 1.89543 20 3C20 3.83934 19.483 4.55793 18.75 4.85462V17V17.75H18H14.2011L15.0167 18.5765L14.0138 19.5928L11.9986 17.5505L11.4972 17.0423L11.9986 16.5342L14.0138 14.4918L15.0167 15.5082L14.2847 16.25H17.25V4.85462C16.7487 4.65168 16.3483 4.25135 16.1454 3.75H4.85462C4.65168 4.25135 4.25135 4.65168 3.75 4.85462V16.25H6.75V15H8.25V19H6.75V17.75H3H2.25V17V4.85462C1.51704 4.55793 1 3.83934 1 3Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_2$a=_export_sfc(_sfc_main$2a,[["render",_sfc_render$12]]),_sfc_main$29={},_hoisted_1$1M={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$11(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1M,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.278 5.75735L14.7425 2.22181L13.505 3.45925L15.98 5.93421L14.9193 6.99487L12.4444 4.51991L10.6766 6.28768L13.1516 8.76264L12.0909 9.8233L9.61596 7.34834L7.84819 9.11611L10.3232 11.5911L9.26249 12.6517L6.78753 10.1768L5.01977 11.9445L7.49473 14.4195L6.43407 15.4802L3.95911 13.0052L2.72167 14.2426L6.2572 17.7782L18.278 5.75735ZM15.8031 1.16115L14.7425 0.100494L13.6818 1.16115L1.66101 13.182L0.600348 14.2426L1.66101 15.3033L5.19654 18.8388L6.2572 19.8995L7.31786 18.8388L19.3387 6.81801L20.3993 5.75735L19.3387 4.69669L15.8031 1.16115Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$k=_export_sfc(_sfc_main$29,[["render",_sfc_render$11]]),MeasurementBoard_vue_vue_type_style_index_0_lang="",_hoisted_1$1L={key:0,class:"title"},_hoisted_2$D={key:1,class:"title"},_hoisted_3$r={key:2,class:"title"},_hoisted_4$m={key:3,class:"title"},_hoisted_5$i={class:"content"},_hoisted_6$g={class:"setting"},_sfc_main$28={__name:"MeasurementBoard",setup(e){const n=useViewerStore(),r=useDocumentStore(),s=getCurrentInstance().appContext.app.config.globalProperties.$t,u=computed(()=>n.getToolMode),d=computed(()=>r.getActiveTool),f=computed(()=>{const q=u.value==="measurement"&&m.includes(d.value);return k.value||q}),g=computed(()=>{const q=m.includes(d.value)?d.value:"",Y=S.value||q;return Y==="rectangle"?"polygon":Y});computed(()=>r.getMeasure),computed(()=>r.getPrecision);const m=["line","multiline","polygon","rectangle","circle"],y=reactive({scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:1,length:0,angle:0,radius:0,perimeter:0,area:0,X:0,Y:0}),v=ref(),_=ref(!1),w=reactive({x:null,y:100}),x=reactive({x:0,y:0}),k=ref(!1),S=ref(""),M=computed(()=>`${y.scale.base} ${s("measurement."+y.scale.baseUnit)} = ${y.scale.translate} ${s("measurement."+y.scale.translateUnit)}`);watch([f,d],(q,Y)=>{(q[0]||q[1])&&!k.value&&N()});const E=q=>{for(const Y in q)for(const Z in y)if(Y===Z){if(Y==="scale"){Object.assign(y.scale,q.scale);continue}y[Z]=q[Y]}};core.addEvent("updateMeasureData",E);const P=q=>{q.isOpen===!1?(k.value=!1,S.value="",N()):q&&(k.value=!0,S.value=q.type)};core.addEvent("measurePropertyChange",P);const T=()=>{n.openElement("measurementSettingsDialog")},D=q=>{_.value=!0,w.x===null?x.x=v.value.offsetWidth-(window.innerWidth-q.clientX-30):x.x=q.clientX-w.x,x.y=q.clientY-w.y,document.addEventListener("mousemove",I),document.addEventListener("mouseup",F)},F=()=>{_.value=!1,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",F)},I=q=>{if(_.value){const Y=q.clientX-x.x,Z=q.clientY-x.y,j=v.value.offsetWidth+1,ne=v.value.offsetHeight+1,le=window.innerWidth-j,J=window.innerHeight-ne;w.x=Math.min(Math.max(Y,0),le),w.y=Math.min(Math.max(Z,0),J)}},N=()=>{y.length=0,y.angle=0,y.radius=0,y.perimeter=0,y.area=0,y.X=0,y.Y=0};return(q,Y)=>{const Z=__unplugin_components_0$k,j=__unplugin_components_2$a,ne=__unplugin_components_4$7,le=__unplugin_components_5$2;return withDirectives((openBlock(),createElementBlock("div",{ref_key:"measurementBoard",ref:v,class:normalizeClass(["measurement-board",{"init-right":w.x===null}]),style:normalizeStyle({top:w.y+"px",left:w.x===null?"":w.x+"px"}),onMousedown:D},[g.value==="line"?(openBlock(),createElementBlock("div",_hoisted_1$1L,[createVNode(Z),createBaseVNode("span",null,toDisplayString$1(unref(s)("header.measureLine")),1)])):g.value==="multiline"?(openBlock(),createElementBlock("div",_hoisted_2$D,[createVNode(j),createBaseVNode("span",null,toDisplayString$1(unref(s)("header.measureMultiline")),1)])):g.value==="polygon"||g.value==="rectangle"?(openBlock(),createElementBlock("div",_hoisted_3$r,[createVNode(ne),createBaseVNode("span",null,toDisplayString$1(unref(s)("header.measureRectangle")),1)])):g.value==="circle"?(openBlock(),createElementBlock("div",_hoisted_4$m,[createVNode(le),createBaseVNode("span",null,toDisplayString$1(unref(s)("header.measureCircle")),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_5$i,[createBaseVNode("span",null,toDisplayString$1(unref(s)("measurement.scale"))+":",1),createBaseVNode("span",null,toDisplayString$1(M.value),1),createBaseVNode("span",null,toDisplayString$1(unref(s)("measurement.precision"))+":",1),createBaseVNode("span",null,toDisplayString$1(y.precision),1),g.value==="line"||g.value==="multiline"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",null,toDisplayString$1(unref(s)("measurement.length"))+":",1),createBaseVNode("span",null,toDisplayString$1(y.length)+" "+toDisplayString$1(unref(s)(`measurement.${y.scale.translateUnit}`)),1),createBaseVNode("span",null,toDisplayString$1(unref(s)("measurement.angle"))+":",1),createBaseVNode("span",null,toDisplayString$1(y.angle)+"\xB0",1)],64)):createCommentVNode("",!0),g.value==="circle"?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("span",null,toDisplayString$1(unref(s)("measurement.radius"))+":",1),createBaseVNode("span",null,toDisplayString$1(y.radius),1)],64)):createCommentVNode("",!0),["polygon","rectangle","circle"].includes(g.value)?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("span",null,toDisplayString$1(unref(s)("measurement.perimeter"))+":",1),createBaseVNode("span",null,toDisplayString$1(y.perimeter)+" "+toDisplayString$1(unref(s)(`measurement.${y.scale.translateUnit}`)),1),createBaseVNode("span",null,toDisplayString$1(unref(s)("measurement.area"))+":",1),createBaseVNode("span",null,toDisplayString$1(y.area)+" "+toDisplayString$1(unref(s)(`measurement.${y.scale.translateUnit}`))+"\xB2",1)],64)):createCommentVNode("",!0),g.value==="line"?(openBlock(),createElementBlock(Fragment,{key:3},[Y[0]||(Y[0]=createBaseVNode("span",null,"X: ",-1)),createBaseVNode("span",null,toDisplayString$1(y.X)+" "+toDisplayString$1(unref(s)(`measurement.${y.scale.translateUnit}`)),1),Y[1]||(Y[1]=createBaseVNode("span",null,"Y: ",-1)),createBaseVNode("span",null,toDisplayString$1(y.Y)+" "+toDisplayString$1(unref(s)(`measurement.${y.scale.translateUnit}`)),1)],64)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_6$g,[createBaseVNode("span",{onClick:T},toDisplayString$1(unref(s)("header.settings.settings")),1)])],38)),[[vShow,f.value]])}}},RedactionTipDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1K={key:0,class:"redaction-tip-dialog"},_hoisted_2$C={class:"title"},dialogName$a="redactionTipDialog",_sfc_main$27={__name:"RedactionTipDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$a)),s=computed(()=>r.getFirstEnterRedactionTool),u=()=>{r.setRedactionPrompted(!0),r.setToolState(s.value),n.setDisableHeader(!0),n.resetPanels(),n.closeElement(dialogName$a)};return(d,f)=>{const g=__unplugin_components_2$b,m=_sfc_main$37;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1K,[createVNode(m,{show:o.value,dialogName:dialogName$a,close:!0},{default:withCtx(()=>[createVNode(g),createBaseVNode("p",_hoisted_2$C,toDisplayString$1(d.$t("security.caution")),1),createBaseVNode("p",null,toDisplayString$1(d.$t("security.enterTip")),1),createBaseVNode("div",{class:"rect-button blue",onClick:u},toDisplayString$1(d.$t("security.understand")),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_hoisted_1$1J={key:0,class:"layer-locked-tip-popup"},dialogName$9="unsupportedMobileDialog",_sfc_main$26={__name:"UnsupportedMobileDialog",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen(dialogName$9)),o=()=>{n.closeElement(dialogName$9)};return(s,u)=>{const d=__unplugin_components_2$b,f=_sfc_main$37;return r.value?(openBlock(),createElementBlock("div",_hoisted_1$1J,[createVNode(f,{class:"layer-locked-tip-popup",show:r.value,dialogName:dialogName$9},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button blue",onClick:u[0]||(u[0]=g=>o())},toDisplayString$1(s.$t("layer.ok")),1)]),default:withCtx(()=>[createVNode(d),createBaseVNode("p",null,toDisplayString$1(s.$t("colorSeparation.accessOnPc")),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$25={},_hoisted_1$1I={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$10(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1I,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 2.25H2.25V3V15H3.75V3.75H15V2.25H3ZM7.5 7.5H16.5V16.5H7.5V7.5ZM6 6H7.5H16.5H18V7.5V16.5V18H16.5H7.5H6V16.5V7.5V6Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_1$5=_export_sfc(_sfc_main$25,[["render",_sfc_render$10]]),_sfc_main$24={__name:"ContentEditorPopup",setup(e){const n=useViewerStore();useDocumentStore();const r=computed(()=>n.getPopupItems("contentEditorPopup")),o=computed(()=>n.isElementOpen("contentEditorPanel")),s=ref(!1),u=ref(0),d=ref(0),f=ref(null);let g;const m=w=>{s.value=!1,core.handlePopup({type:"contentEditor",tool:w})},y=async(w={})=>{const{rect:x}=w;if(s.value=!!x,await nextTick(),x&&s.value){const k=f.value.children[0];if(!k)return;const S=k.offsetWidth,M=k.offsetHeight+10;let E=x.right-S,P=x.bottom;const T=window.innerWidth,D=window.innerHeight;E>T-S&&(E=T-S),E<0&&(E=0),P+M>D&&(P=Math.max(0,x.top-M)),u.value=P,d.value=o.value?E+130:E}};core.addEvent("showContentEditorPopup",y);const v=()=>{s.value&&(s.value=!1)},_=()=>{n.toggleElement("contentEditorPanel")};return onMounted(()=>{g=document.querySelector(".document-container"),g&&g.addEventListener("scroll",v)}),onUnmounted(()=>{g&&g.removeEventListener("scroll",v)}),(w,x)=>{const k=_sfc_main$2g,S=__unplugin_components_1$5,M=_sfc_main$3O,E=__unplugin_components_3$b,P=__unplugin_components_4$9;return openBlock(),createElementBlock("div",{ref_key:"contentEditorPopupRef",ref:f},[withDirectives(createBaseVNode("div",{class:"content-editor-popup popup",style:normalizeStyle({top:`${u.value}px`,left:`${d.value}px`,transform:`translateX(${!unref(isMobileDevice)&&o.value?-130:0}px) translateY(5px)`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(T,D)=>(openBlock(),createElementBlock(Fragment,{key:`${T.dataElement||new Date}-${D}`},[T.name==="customButton"&&!T.hidden?(openBlock(),createBlock(k,{key:0,item:T,"data-element":T.dataElement},null,8,["item","data-element"])):T.type==="copy"&&!T.hidden?(openBlock(),createBlock(M,{key:1,onClick:x[0]||(x[0]=F=>m("copy")),title:w.$t("documentEditor.copy"),"data-element":T.dataElement},{default:withCtx(()=>[createVNode(S)]),_:2},1032,["title","data-element"])):T.type==="delete"&&!T.hidden?(openBlock(),createBlock(M,{key:2,onClick:x[1]||(x[1]=F=>m("delete")),title:w.$t("delete"),"data-element":T.dataElement},{default:withCtx(()=>[createVNode(E)]),_:2},1032,["title","data-element"])):T.type==="property"&&!T.hidden?(openBlock(),createBlock(M,{key:3,onClick:_,title:w.$t("properties"),"data-element":T.dataElement,isActive:o.value},{default:withCtx(()=>[createVNode(P)]),_:2},1032,["title","data-element","isActive"])):["spacer","divider"].includes(T.type)?(openBlock(),createElementBlock("div",{key:4,class:normalizeClass(T.type)},null,2)):createCommentVNode("",!0)],64))),128))],4),[[vShow,s.value&&r.value.length]])],512)}}},_sfc_main$23={},_hoisted_1$1H={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$$(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1H,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.3596 8.35973L10.7499 11.9694L10.7499 2C10.7499 1.58579 10.4142 1.25 9.99994 1.25C9.58573 1.25 9.24994 1.58579 9.24994 2L9.24994 11.9694L5.64024 8.35973C5.34735 8.06683 4.87247 8.06683 4.57958 8.35973C4.28669 8.65262 4.28669 9.12749 4.57958 9.42039L9.46961 14.3104C9.7625 14.6033 10.2374 14.6033 10.5303 14.3104L15.4203 9.42039C15.7132 9.12749 15.7132 8.65262 15.4203 8.35973C15.1274 8.06683 14.6525 8.06683 14.3596 8.35973ZM2.99994 16.1538C2.58573 16.1538 2.24994 16.4896 2.24994 16.9038C2.24994 17.318 2.58573 17.6538 2.99994 17.6538H17.3076C17.7218 17.6538 18.0576 17.318 18.0576 16.9038C18.0576 16.4896 17.7218 16.1538 17.3076 16.1538H2.99994Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$j=_export_sfc(_sfc_main$23,[["render",_sfc_render$$]]),_sfc_main$22={__name:"CropPagePopup",setup(e){const n=useViewerStore(),r=computed(()=>n.getPopupItems("cropPagePopup")),o=ref(!1),s=ref(0),u=ref(0),d=ref(null),f=ref(!0);let g;const m=ref(0),y=ref(null),v=S=>{core.handlePopup({type:"cropPage",tool:S})},_=async S=>{var E;let{rect:M}=S;if(m.value=S.pageNumber,o.value=!!M,await nextTick(),n.setDisableHeader(o.value),o.value&&n.resetPanels(),M&&o.value){const P=core.pageToWindow({x:M.left,y:M.top},S.pageNumber),T=core.pageToWindow({x:M.right,y:M.bottom},S.pageNumber),D=core.getScrollViewElement();M={left:P.x-D.scrollLeft,top:P.y-D.scrollTop,right:T.x-D.scrollLeft,bottom:T.y-D.scrollTop};const F=(E=d.value)==null?void 0:E.children[0];if(!F)return;y.value=M;let I=M.left+(M.right-M.left)/2,N=M.bottom;const q=F.offsetWidth,Y=F.offsetHeight+10,Z=window.innerWidth,j=window.innerHeight;f.value=!0,I-q/2<0?(I=0,f.value=!1):I+q/2>Z&&(I=Z-q,f.value=!1),N+Y>j&&(N=Math.max(0,M.top-Y)),s.value=N,u.value=I}};core.addEvent("snipSelected",_);const w=async()=>{const S=await core.getCropedPageImage(m.value);x(S),v("close")},x=(S,M)=>{const E=document.createElement("a");E.href=S,E.download=M||"image",document.body.appendChild(E),E.click(),document.body.removeChild(E)},k=()=>{o.value&&(o.value=!1)};return onMounted(()=>{g=document.querySelector(".document-container"),g&&g.addEventListener("scroll",k)}),onUnmounted(()=>{g&&g.removeEventListener("scroll",k)}),(S,M)=>{const E=_sfc_main$2g,P=__unplugin_components_0$j,T=_sfc_main$3O,D=__unplugin_components_1$a;return openBlock(),createElementBlock("div",{ref_key:"cropPagePopupRef",ref:d,onMousedown:M[1]||(M[1]=withModifiers(()=>{},["stop"])),onTouchstart:M[2]||(M[2]=withModifiers(()=>{},["stop"]))},[o.value&&r.value.length?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["crop-page-popup popup",{transform:f.value}]),style:normalizeStyle({top:`${s.value}px`,left:`${u.value}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(F,I)=>(openBlock(),createElementBlock(Fragment,{key:`${F.dataElement||new Date}-${I}`},[F.name==="customButton"&&!F.hidden?(openBlock(),createBlock(E,{key:0,item:F},null,8,["item"])):F.type==="cropPage"&&!F.hidden?(openBlock(),createBlock(T,{key:1,onClick:w,title:S.$t("header.download"),"data-element":F.dataElement},{default:withCtx(()=>[createVNode(P)]),_:2},1032,["title","data-element"])):F.type==="close"&&!F.hidden?(openBlock(),createBlock(T,{key:2,onClick:M[0]||(M[0]=N=>v("close")),title:S.$t("exit"),"data-element":F.dataElement},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["title","data-element"])):["spacer","divider"].includes(F.type)?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(F.type)},null,2)):createCommentVNode("",!0)],64))),128))],6)):createCommentVNode("",!0)],544)}}},_sfc_main$21={},_hoisted_1$1G={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$_(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1G,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6964 3L14.6078 12.7785H15.6004V13.7785H12.4004V12.7785H12.9923L12.1923 10.7785H7.80779L7.00783 12.7785H7.60039V13.7785H4.40039V12.7785H5.39229L9.30371 3H10.6964ZM10.0001 5.29754L11.7924 9.77853H8.20777L10.0001 5.29754ZM5.22219 16.9266L5.08299 16.8542C4.46821 16.565 3.711 16.5891 3.11995 16.9266L2.91898 17.0328C2.78242 17.0994 2.64087 17.1575 2.49529 17.2069C2.12186 17.3336 1.69922 17.177 1.55131 16.8572C1.40339 16.5374 1.5862 16.1755 1.95963 16.0488L2.08133 16.0032C2.16125 15.9703 2.23868 15.9326 2.31312 15.8901L2.4935 15.794C3.59155 15.2495 4.96316 15.2815 6.02902 15.8901L6.16823 15.9624C6.78301 16.2516 7.54022 16.2275 8.13126 15.8901L8.31164 15.794C9.40969 15.2495 10.7813 15.2815 11.8472 15.8901L11.9864 15.9624C12.6011 16.2516 13.3584 16.2275 13.9494 15.8901L14.1298 15.794C15.2278 15.2495 16.5994 15.2815 17.6653 15.8901L17.784 15.9526C17.8647 15.9917 17.9483 16.0256 18.0344 16.054C18.4091 16.1778 18.5956 16.5384 18.451 16.8593C18.3064 17.1802 17.8854 17.34 17.5107 17.2161C17.2824 17.1407 17.0638 17.0438 16.8585 16.9266L16.7193 16.8542C16.1045 16.565 15.3473 16.5891 14.7562 16.9266L14.5759 17.0226C13.4778 17.5671 12.1062 17.5351 11.0403 16.9266L10.9011 16.8542C10.2863 16.565 9.52914 16.5891 8.93809 16.9266L8.75772 17.0226C7.65967 17.5671 6.28806 17.5351 5.22219 16.9266Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_6$2=_export_sfc(_sfc_main$21,[["render",_sfc_render$_]]),_sfc_main$20={},_hoisted_1$1F={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$Z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1F,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.696 3L13.8882 10.6785H18V12.1785H14.5118L15.8006 15.2785H17V16.2785H13V15.2785H14.1738L12.8773 12.1785H7.12195L5.82551 15.2785H7V16.2785H3V15.2785H4.19873L5.48749 12.1785H2V10.6785H6.11109L9.30329 3H10.696ZM9.99965 5.29754L12.25 10.6785H7.74927L9.99965 5.29754Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_5$1=_export_sfc(_sfc_main$20,[["render",_sfc_render$Z]]),_sfc_main$1$={},_hoisted_1$1E={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$Y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1E,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6964 3L14.6078 12.7785H15.6004V13.7785H12.4004V12.7785H12.9923L12.1923 10.7785H7.80779L7.00783 12.7785H7.60039V13.7785H4.40039V12.7785H5.39229L9.30371 3H10.6964ZM10.0001 5.29754L11.7924 9.77853H8.20777L10.0001 5.29754ZM18 15.2785H2V16.7785H18V15.2785Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$6=_export_sfc(_sfc_main$1$,[["render",_sfc_render$Y]]),_sfc_main$1_={},_hoisted_1$1D={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$X(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1D,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 2.79999H2.8L1 17.2H17.2L19 2.79999ZM10.333 3.83661L14.7334 14.8375H15.85V15.9625H12.25V14.8375H12.9159L12.016 12.5875H7.08332L6.18337 14.8375H6.85V15.9625H3.25V14.8375H4.3659L8.76624 3.83661H10.333ZM9.54964 6.42134L11.566 11.4625H7.5333L9.54964 6.42134Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$7=_export_sfc(_sfc_main$1_,[["render",_sfc_render$X]]);var toggleSelection=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(s){e.addRange(s)}),n&&n.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(e){var n=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,n)}function copy(e,n){var r,o,s,u,d,f,g=!1;n||(n={}),r=n.debug||!1;try{s=deselectCurrent(),u=document.createRange(),d=document.getSelection(),f=document.createElement("span"),f.textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(y){if(y.stopPropagation(),n.format)if(y.preventDefault(),typeof y.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var v=clipboardToIE11Formatting[n.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(v,e)}else y.clipboardData.clearData(),y.clipboardData.setData(n.format,e);n.onCopy&&(y.preventDefault(),n.onCopy(y.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),d.addRange(u);var m=document.execCommand("copy");if(!m)throw new Error("copy command was unsuccessful");g=!0}catch(y){r&&console.error("unable to copy using execCommand: ",y),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",e),n.onCopy&&n.onCopy(window.clipboardData),g=!0}catch(v){r&&console.error("unable to copy using clipboardData: ",v),r&&console.error("falling back to prompt"),o=format("message"in n?n.message:defaultMessage),window.prompt(o,e)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),f&&document.body.removeChild(f),s()}return g}var copyToClipboard=copy;const TextPopup_vue_vue_type_style_index_0_lang="",_sfc_main$1Z={__name:"TextPopup",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getPopupItems("textPopup")),s=ref(!1),u=ref(0),d=ref(0),f=ref(null),g=ref(!0),m=ref(null);let y;const v=x=>{var M;if(x==="copy"&&m.value){copyToClipboard(m.value),s.value=!1,m.value=null;return}const k={tool:x},S=(M=r[x])==null?void 0:M.color;S&&(k.color=S),core.handlePopup({type:"text",tool:k})},_=async x=>{const{show:k,rect:S,text:M}=x;if(s.value=k,m.value=M,await nextTick(),S&&s.value){const E=f.value.children[0];if(!E)return;let P=S.left+(S.right-S.left)/2,T=S.bottom;const D=E.offsetWidth,F=E.offsetHeight+10,I=window.innerWidth,N=window.innerHeight;g.value=!0,P-D/2<0?(P=0,g.value=!1):P+D/2>I&&(P=I-D,g.value=!1),T+F>N&&(T=Math.max(0,S.top-F)),u.value=T,d.value=P}};core.addEvent("showTextPopup",_);const w=()=>{s.value&&(s.value=!1)};return onMounted(()=>{y=document.querySelector(".document-container"),y&&y.addEventListener("scroll",w)}),onUnmounted(()=>{y&&y.removeEventListener("scroll",w)}),(x,k)=>{const S=_sfc_main$2g,M=__unplugin_components_1$5,E=_sfc_main$3O,P=__unplugin_components_3$7,T=__unplugin_components_4$6,D=__unplugin_components_5$1,F=__unplugin_components_6$2;return openBlock(),createElementBlock("div",{ref_key:"textPopupRef",ref:f},[s.value&&o.value.length?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["text-popup popup",{transform:g.value}]),style:normalizeStyle({top:`${u.value}px`,left:`${d.value}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(I,N)=>(openBlock(),createElementBlock(Fragment,{key:`${I.dataElement||new Date}-${N}`},[I.name==="customButton"&&!I.hidden?(openBlock(),createBlock(S,{key:0,item:I,"data-element":I.dataElement},null,8,["item","data-element"])):I.type==="copy"&&!I.hidden?(openBlock(),createBlock(E,{key:1,onClick:k[0]||(k[0]=q=>v("copy")),title:x.$t("documentEditor.copy"),"data-element":I.dataElement},{default:withCtx(()=>[createVNode(M)]),_:2},1032,["title","data-element"])):I.type==="highlight"&&!I.hidden?(openBlock(),createBlock(E,{key:2,onClick:k[1]||(k[1]=q=>v("highlight")),title:x.$t("header.highlight"),"data-element":I.dataElement},{default:withCtx(()=>[createVNode(P)]),_:2},1032,["title","data-element"])):I.type==="underline"&&!I.hidden?(openBlock(),createBlock(E,{key:3,onClick:k[2]||(k[2]=q=>v("underline")),title:x.$t("header.underline"),"data-element":I.dataElement},{default:withCtx(()=>[createVNode(T)]),_:2},1032,["title","data-element"])):I.type==="strikeout"&&!I.hidden?(openBlock(),createBlock(E,{key:4,onClick:k[3]||(k[3]=q=>v("strikeout")),title:x.$t("header.strikeout"),"data-element":I.dataElement},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["title","data-element"])):I.type==="squiggly"&&!I.hidden?(openBlock(),createBlock(E,{key:5,onClick:k[4]||(k[4]=q=>v("squiggly")),title:x.$t("header.squiggly"),"data-element":I.dataElement},{default:withCtx(()=>[createVNode(F)]),_:2},1032,["title","data-element"])):["spacer","divider"].includes(I.type)?(openBlock(),createElementBlock("div",{key:6,class:normalizeClass(I.type)},null,2)):createCommentVNode("",!0)],64))),128))],6)):createCommentVNode("",!0)],512)}}},RedactionConfirmDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1C={key:0,class:"redaction-confirm-dialog"},_hoisted_2$B={key:1},_sfc_main$1Y={__name:"RedactionConfirmDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getRedactionConfirmDialog),s=computed(()=>o.value>=0),u=()=>{n.setRedactionConfirmDialog(-1)},d=async()=>{const f=o.value===1?"all":null;n.setCommonLoading(!0),u(),await core.applyRedactions(f),r.setToolState(""),n.setActiveToolMode("view"),n.setCommonLoading(!1)};return(f,g)=>{const m=_sfc_main$37;return s.value?(openBlock(),createElementBlock("div",_hoisted_1$1C,[createVNode(m,{show:s.value,close:u,class:"confirm-dialog"},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(o.value===1?f.$t("documentEditor.save"):f.$t("security.note")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:u},toDisplayString$1(f.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:d},toDisplayString$1(o.value===1?f.$t("security.save"):f.$t("security.exitConfirm")),1)]),default:withCtx(()=>[o.value===1?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("p",null,toDisplayString$1(f.$t("security.saveTip[0]")),1),g[0]||(g[0]=createBaseVNode("br",null,null,-1)),createBaseVNode("p",null,toDisplayString$1(f.$t("security.saveTip[1]")),1)],64)):(openBlock(),createElementBlock("p",_hoisted_2$B,toDisplayString$1(f.$t("security.exitTip")),1))]),_:1},8,["show"])])):createCommentVNode("",!0)}}},AddDigitalFileDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1B={key:0,class:"add-digital-file-dialog"},_hoisted_2$A={class:"input-file row"},_hoisted_3$q={class:"addition"},_hoisted_4$l={class:"icon-file"},_hoisted_5$h={class:"input-pwd row"},_hoisted_6$f=["placeholder"],_hoisted_7$c={key:0,class:"error-text"},dialogName$8="addDigitalFileDialog",_sfc_main$1X={__name:"AddDigitalFileDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),s=getCurrentInstance().appContext.app.config.globalProperties.$t,u=computed(()=>n.isElementOpen(dialogName$8)),d=ref(null),f=ref(!1),g=ref(""),m=ref(null);watch(()=>u.value,(k,S)=>{k&&(d.value=null,f.value=!1)});const y=k=>{k&&(document.body.style.overflow=""),n.closeElement(dialogName$8),g.value=""},v=async()=>{if(!d.value)return;const k=await _();if(!k)return;n.setCommonLoading(!0);const S=k.subject,M=new Date,E=M.getFullYear(),P=M.getMonth()+1<10?`0${M.getMonth()+1}`:M.getMonth()+1,T=M.getDate()<10?`0${M.getDate()}`:M.getDate(),D=M.getHours()<10?`0${M.getHours()}`:M.getHours(),F=M.getMinutes()<10?`0${M.getMinutes()}`:M.getMinutes(),I=M.getSeconds()<10?`0${M.getSeconds()}`:M.getSeconds(),N=`${E}.${P}.${T} ${D}:${F}:${I}`,q=`${s("signatures.appearanceDialog.name")}: ${S.CN}
${s("signatures.appearanceDialog.date")}: ${N}`,Y=await core.getSignature({rect:{width:582,height:187,top:0,left:0,right:582,bottom:187},content:q,text:S.CN});n.setCertSubject(S),n.setDigitalSignaturePreview(Y),n.setCommonLoading(!1),y(),n.openElement("signatureAppearanceDialog")},_=async()=>{const k=new FileReader,M=await new Promise((P,T)=>{k.addEventListener("load",async D=>{P(new Uint8Array(D.target.result))}),k.addEventListener("error",()=>{T("Error reading the local certificate")}),k.readAsArrayBuffer(d.value)}),E=await core.loadCertificates({pkcs12Buffer:M,password:g.value});return f.value=!E,E&&r.setPkcs12({pkcs12Buffer:M,password:g.value}),E},w=()=>{m.value.click()},x=k=>{const S=k.target.files[0],M=S==null?void 0:S.name.split(".").pop().toLowerCase();M!=="pfx"&&M!=="p12"||(d.value=S,m.value.value="")};return(k,S)=>{const M=__unplugin_components_0$u,E=_sfc_main$37;return u.value?(openBlock(),createElementBlock("div",_hoisted_1$1B,[createVNode(E,{show:u.value,dialogName:dialogName$8,close:!0},{header:withCtx(()=>[createTextVNode(toDisplayString$1(unref(s)("signatures.addDigitalFileDialog.title")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:S[2]||(S[2]=P=>y("cancel"))},toDisplayString$1(unref(s)("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:v},toDisplayString$1(unref(s)("continue")),1)]),default:withCtx(()=>{var P,T;return[createBaseVNode("p",null,toDisplayString$1(unref(s)("signatures.addDigitalFileDialog.desc")),1),createBaseVNode("div",_hoisted_2$A,[createBaseVNode("span",null,toDisplayString$1(unref(s)("signatures.addDigitalFileDialog.certificateFile")),1),createBaseVNode("div",_hoisted_3$q,[createBaseVNode("div",{class:"file-input-underbox",onClick:w},[createBaseVNode("span",{class:normalizeClass({uploaded:(P=d.value)==null?void 0:P.name})},toDisplayString$1(((T=d.value)==null?void 0:T.name)||unref(s)("signatures.addDigitalFileDialog.uploadFile")),3),createBaseVNode("span",_hoisted_4$l,[createVNode(M)])]),createBaseVNode("input",{ref_key:"uploadFileEl",ref:m,type:"file",onChange:x,accept:".pfx,.p12",name:"digital-signature"},null,544)])]),createBaseVNode("div",_hoisted_5$h,[createBaseVNode("span",null,toDisplayString$1(unref(s)("signatures.addDigitalFileDialog.password")),1),createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":S[0]||(S[0]=D=>g.value=D),type:"password",placeholder:unref(s)("signatures.addDigitalFileDialog.enterPassword"),onInput:S[1]||(S[1]=D=>f.value&&(f.value=!1)),name:"digital-signature"},null,40,_hoisted_6$f),[[vModelText,g.value]]),f.value?(openBlock(),createElementBlock("p",_hoisted_7$c,toDisplayString$1(unref(s)("signatures.addDigitalFileDialog.invalidPassword")),1)):createCommentVNode("",!0)])])]}),_:1},8,["show"])])):createCommentVNode("",!0)}}},_hoisted_1$1A={key:0,class:"delete-page-popup"},dialogName$7="deleteConfirmDialog",_sfc_main$1W={__name:"DeleteSignatureDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$7)),s=computed(()=>r.getSelectedSignature),u=()=>{n.closeElement(dialogName$7),r.setSelectedSignature(null)},d=()=>{core.deleteSignature(JSON.parse(JSON.stringify(s.value))),u(),n.setSignatureVerify(0)};return(f,g)=>{const m=__unplugin_components_2$b,y=_sfc_main$37;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1A,[createVNode(y,{show:o.value,dialogName:dialogName$7},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:u},toDisplayString$1(f.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:d},toDisplayString$1(f.$t("ok")),1)]),default:withCtx(()=>[createVNode(m),createBaseVNode("p",null,toDisplayString$1(f.$t("signatures.deleteConfirm")),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1V={},_hoisted_1$1z={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$W(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1z,n[0]||(n[0]=[createBaseVNode("path",{d:"M17.5 10.5C17.5 14.6421 14.1421 18 10 18C5.85786 18 2.5 14.6421 2.5 10.5C2.5 6.35786 5.85786 3 10 3C14.1421 3 17.5 6.35786 17.5 10.5Z",fill:"#FF6666"},null,-1),createBaseVNode("path",{d:"M12 8.5L8 12.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"square","stroke-linejoin":"round"},null,-1),createBaseVNode("path",{d:"M8 8.5L12 12.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"square","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_1$4=_export_sfc(_sfc_main$1V,[["render",_sfc_render$W]]),_sfc_main$1U={},_hoisted_1$1y={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$V(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1y,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 18C14.1421 18 17.5 14.6421 17.5 10.5C17.5 6.35786 14.1421 3 10 3C5.85786 3 2.5 6.35786 2.5 10.5C2.5 14.6421 5.85786 18 10 18ZM9.74283 13.4801L13.9095 8.48014L12.7572 7.51986L9.11627 11.8889L7.197 9.96967L6.13634 11.0303L8.63634 13.5303L9.21707 14.1111L9.74283 13.4801Z",fill:"#3CCD75"},null,-1)]))}const __unplugin_components_0$i=_export_sfc(_sfc_main$1U,[["render",_sfc_render$V]]),CertificationViewerDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1x={key:0,class:"certification-details-dialog"},_hoisted_2$z={class:"title"},_hoisted_3$p={class:"desc"},_hoisted_4$k={class:"container"},_hoisted_5$g={class:"left"},_hoisted_6$e=["onFocus"],_hoisted_7$b={class:"right"},_hoisted_8$9={class:"tabs"},_hoisted_9$7={class:"panel"},_hoisted_10$5={class:"summary"},_hoisted_11$5={class:"title"},_hoisted_12$5={class:"info"},_hoisted_13$5={class:"abstracts"},_hoisted_14$5={class:"details"},_hoisted_15$5={class:"trust"},_hoisted_16$5={class:"trust-button"},dialogName$6="certificateViewerDialog",_sfc_main$1T={__name:"CertificationViewerDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$6)),s=computed(()=>r.getSelectedSignature),u=computed(()=>s.value.signerList[0].certificateList[f.value]),d=ref(1),f=ref(0),g=()=>{n.closeElement(dialogName$6)},m=v=>{let _=v.slice(0,4),w=v.slice(4,6),x=v.slice(6,8),k=v.slice(8,10),S=v.slice(10,12),M=v.slice(12,14);return`${_}/${w}/${x} ${k}:${S}:${M}`},y=()=>{if(u.value.isTrusted)return;const v=core.addToTrustedCertificateLists(f.value);u.value.isTrusted=!!v,v&&r.setTrustedCertificateLists(v)};return(v,_)=>{const w=__unplugin_components_0$i,x=__unplugin_components_1$4,k=_sfc_main$37;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1x,[createVNode(k,{show:o.value,dialogName:dialogName$6},{header:withCtx(()=>[createBaseVNode("p",_hoisted_2$z,toDisplayString$1(v.$t("signatures.certificateViewerDialog.title")),1),createBaseVNode("p",_hoisted_3$p,toDisplayString$1(v.$t("signatures.certificateViewerDialog.title")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button blue",onClick:g},toDisplayString$1(v.$t("signatures.certificateViewerDialog.done")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_4$k,[createBaseVNode("div",_hoisted_5$g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value.signerList,(S,M)=>(openBlock(),createElementBlock("p",{key:M,class:normalizeClass({highlighted:f.value===M}),onFocus:E=>f.value=M,onBlur:_[0]||(_[0]=E=>f.value=0),tabindex:"-1"},toDisplayString$1(S.certificateList[0].subject.CN),43,_hoisted_6$e))),128))]),createBaseVNode("div",_hoisted_7$b,[createBaseVNode("div",_hoisted_8$9,[createBaseVNode("div",{onClick:_[1]||(_[1]=S=>d.value=1),class:normalizeClass({active:d.value===1})},toDisplayString$1(v.$t("signatures.certificateViewerDialog.abstracts")),3),createBaseVNode("div",{onClick:_[2]||(_[2]=S=>d.value=2),class:normalizeClass({active:d.value===2})},toDisplayString$1(v.$t("signatures.certificateViewerDialog.details")),3),createBaseVNode("div",{onClick:_[3]||(_[3]=S=>d.value=3),class:normalizeClass({active:d.value===3})},toDisplayString$1(v.$t("signatures.certificateViewerDialog.trust")),3)]),createBaseVNode("div",_hoisted_9$7,[createBaseVNode("div",_hoisted_10$5,[createBaseVNode("div",_hoisted_11$5,toDisplayString$1(d.value===3?v.$t("signatures.certificateViewerDialog.sign"):v.$t("signatures.certificateViewerDialog.summary")),1),createBaseVNode("div",_hoisted_12$5,[withDirectives(createBaseVNode("div",_hoisted_13$5,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.issuedTo"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.issuer.CN)+" <"+toDisplayString$1(u.value.issuer.email)+">",1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.issuer"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.issuer.CN),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.validFrom"))+" ",1),createBaseVNode("span",null,toDisplayString$1(m(u.value.validDateStart)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.validTo"))+" ",1),createBaseVNode("span",null,toDisplayString$1(m(u.value.validDateEnd)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.intendedUsage"))+" ",1),_[4]||(_[4]=createBaseVNode("span",null,"Digital Signature, Non-Repudiation",-1))])],512),[[vShow,d.value===1]]),withDirectives(createBaseVNode("div",_hoisted_14$5,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.version"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.version),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.algorithm"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.signAlgOidType)+" ("+toDisplayString$1(u.value.signAlgOid)+")",1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.subject"))+" ",1),createBaseVNode("span",null,"C="+toDisplayString$1(u.value.subject.C)+",ST="+toDisplayString$1(u.value.subject.ST)+",L="+toDisplayString$1(u.value.subject.L)+",O="+toDisplayString$1(u.value.subject.O)+",OU="+toDisplayString$1(u.value.subject.OU)+",CN="+toDisplayString$1(u.value.subject.CN)+",emailAddress="+toDisplayString$1(u.value.subject.email),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.issuer"))+" ",1),createBaseVNode("span",null,"C="+toDisplayString$1(u.value.issuer.C)+",ST="+toDisplayString$1(u.value.issuer.ST)+",L="+toDisplayString$1(u.value.issuer.L)+",O="+toDisplayString$1(u.value.issuer.O)+",OU="+toDisplayString$1(u.value.issuer.OU)+",CN="+toDisplayString$1(u.value.issuer.CN)+",emailAddress="+toDisplayString$1(u.value.issuer.email),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.serialNumber"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.serialNumber),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.validFrom"))+" ",1),createBaseVNode("span",null,toDisplayString$1(m(u.value.validDateStart)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.validTo"))+" ",1),createBaseVNode("span",null,toDisplayString$1(m(u.value.validDateEnd)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.certificatePolicy"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.certificatePolicies[0]),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.crlDistributionPoints"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.CRLDistributionPoints),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.issuerInfoAccess"))+" ",1),(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value.sccessInfo,(S,M)=>(openBlock(),createElementBlock("span",{key:M},toDisplayString$1(S.Key)+"="+toDisplayString$1(S.AccessInfo)+toDisplayString$1(M===u.value.sccessInfo.length-1?"":","),1))),128))]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.issuerKeyIdentifier"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.authorityKeyIdentifier),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.subjectKeyIdentifier"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.subjectKeyIdentifier),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.basicConstraints"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.basicConstraints),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.keyUsage"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.keyUsage),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.publicKey"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.publicKey),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.X509"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.X509Data),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.SHA1Digest"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.SHA1Digest),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(v.$t("signatures.certificateViewerDialog.MD5Digest"))+" ",1),createBaseVNode("span",null,toDisplayString$1(u.value.MD5Digest),1)])],512),[[vShow,d.value===2]]),withDirectives(createBaseVNode("div",_hoisted_15$5,[createBaseVNode("p",null,[u.value.isTrusted?(openBlock(),createBlock(w,{key:0})):(openBlock(),createBlock(x,{key:1})),createBaseVNode("span",null,toDisplayString$1(v.$t("signatures.certificateViewerDialog.sign")),1)]),createBaseVNode("p",null,[u.value.isTrusted?(openBlock(),createBlock(w,{key:0})):(openBlock(),createBlock(x,{key:1})),createBaseVNode("span",null,toDisplayString$1(v.$t("signatures.certificateViewerDialog.certify")),1)])],512),[[vShow,d.value===3]])]),withDirectives(createBaseVNode("div",_hoisted_16$5,[createBaseVNode("div",{class:normalizeClass(u.value.isTrusted&&"disabled"),onClick:y},toDisplayString$1(v.$t("signatures.certificateViewerDialog.addToTrust")),3)],512),[[vShow,d.value===3]])])])])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1S={},_hoisted_1$1w={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$U(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1w,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.15125 14.4995C8.30837 14.4995 9.2063 13.7913 9.7756 12.6064H16.4175C16.6582 12.6064 16.8433 12.4074 16.8433 12.1713C16.8433 11.9353 16.6582 11.7409 16.4175 11.7409H10.1089C10.3264 11.0327 10.4514 10.2135 10.4838 9.31556C10.7754 9.25076 11.0762 9.21836 11.3863 9.21836C11.4928 9.21836 11.5483 9.26465 11.5483 9.3387C11.5483 9.68584 11.3169 9.98207 11.3169 10.431C11.3169 10.8476 11.6224 11.1207 12.0528 11.1207C13.0572 11.1207 14.256 9.5655 14.5568 9.5655C14.816 9.5655 14.5661 10.9309 15.7464 10.9309C15.9824 10.9309 16.2601 10.8661 16.4684 10.7273C16.6212 10.6208 16.7276 10.4681 16.7276 10.269C16.7276 10.0098 16.5517 9.77841 16.2786 9.77841C16.1305 9.77841 15.9963 9.88024 15.8852 9.88024C15.5288 9.88024 15.876 8.38986 14.8346 8.38986C13.9783 8.38986 12.8628 9.75527 12.599 9.75527C12.5573 9.75527 12.5342 9.73676 12.5342 9.69047C12.5342 9.5655 12.636 9.36185 12.636 9.13968C12.636 8.54723 12.2102 8.20009 11.5205 8.20009C11.1595 8.20009 10.8078 8.23249 10.4699 8.29266C10.2986 5.78865 9.0443 3.93262 7.26696 3.93262C5.91544 3.93262 4.97122 4.96014 4.97122 6.39035C4.97122 7.95941 5.96635 9.26465 7.04479 10.1209C6.54028 10.6301 6.14686 11.1901 5.90155 11.7409H2.856C2.61532 11.7409 2.43018 11.9353 2.43018 12.1713C2.43018 12.4028 2.61994 12.6064 2.856 12.6064H5.64235C5.62847 12.7221 5.61921 12.8378 5.61921 12.9443C5.61921 13.8978 6.15612 14.4995 7.15125 14.4995ZM7.81306 9.45897C6.93828 8.78784 5.99406 7.74643 5.99406 6.38565C5.99406 5.55715 6.51708 4.95544 7.27153 4.95544C8.50271 4.95544 9.38213 6.50599 9.46544 8.56567C8.85911 8.78784 8.29906 9.09795 7.81306 9.45897ZM3.15682 10.9678L3.67521 10.4494L4.1936 10.9631C4.35097 11.1159 4.5824 11.1159 4.73977 10.9631C4.89251 10.8104 4.89251 10.5697 4.73977 10.417L4.22137 9.90321L4.73977 9.38482C4.89251 9.23208 4.89251 8.99602 4.73977 8.84328C4.58703 8.68591 4.34634 8.68591 4.1936 8.83865L3.67521 9.35705L3.15682 8.84328C2.99945 8.69054 2.7634 8.69054 2.61066 8.84328C2.45329 8.99139 2.45329 9.2367 2.61066 9.38945L3.12442 9.90321L2.61066 10.417C2.45329 10.5743 2.45792 10.8058 2.61066 10.9631C2.7634 11.1205 3.00408 11.1159 3.15682 10.9678ZM9.01653 11.7409H7.07256C7.28084 11.3984 7.5678 11.0374 7.91957 10.7041C7.99826 10.7504 8.07231 10.7875 8.14637 10.8245C8.23894 10.8754 8.32688 10.8939 8.41482 10.8939C8.67402 10.8939 8.89156 10.7041 8.89156 10.4542C8.89156 10.3153 8.84064 10.1858 8.71567 10.0747C8.94247 9.92193 9.18315 9.78307 9.44235 9.66736C9.38218 10.4496 9.23406 11.1531 9.01653 11.7409ZM7.27156 13.481C6.88739 13.481 6.69299 13.231 6.69299 12.8423C6.69299 12.7682 6.70225 12.6895 6.71614 12.6062H8.59068C8.22965 13.1616 7.77606 13.481 7.27156 13.481Z",fill:"currentColor"},null,-1),createBaseVNode("rect",{x:"10.625",y:"10.625",width:"7.5",height:"7.5",rx:"3.64583",fill:"#FFA400"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.625 15.247V15.3482H13.9881V15.247C13.9881 15.0268 14.0238 14.8363 14.1071 14.6815C14.1845 14.5149 14.4107 14.2708 14.7798 13.9435L14.881 13.8304C14.9881 13.6935 15.0476 13.5506 15.0476 13.3958C15.0476 13.1875 14.9881 13.0268 14.875 12.9077C14.756 12.7887 14.5833 12.7292 14.369 12.7292C14.1012 12.7292 13.9048 12.8125 13.7857 12.9851C13.6786 13.128 13.625 13.3304 13.625 13.5923H13C13 13.1577 13.125 12.8185 13.375 12.5685C13.625 12.3125 13.9702 12.1875 14.4107 12.1875C14.7917 12.1875 15.1012 12.2887 15.3393 12.503C15.5774 12.7113 15.6964 12.997 15.6964 13.3542C15.6964 13.6458 15.619 13.8899 15.4702 14.0804C15.4167 14.1458 15.25 14.3006 14.9702 14.5446C14.8571 14.6399 14.7738 14.747 14.7202 14.8542C14.6548 14.9732 14.625 15.1042 14.625 15.247ZM14.6131 16.4017C14.5298 16.4791 14.4227 16.5207 14.3036 16.5207C14.1846 16.5207 14.0774 16.4791 13.9941 16.3957C13.9108 16.3124 13.8691 16.2112 13.8691 16.0922C13.8691 15.9672 13.9108 15.866 13.9941 15.7886C14.0774 15.7053 14.1846 15.6696 14.3036 15.6696C14.4286 15.6696 14.5358 15.7053 14.6191 15.7886C14.7024 15.866 14.7441 15.9672 14.7441 16.0922C14.7441 16.2172 14.6965 16.3184 14.6131 16.4017Z",fill:"white"},null,-1)]))}const __unplugin_components_2$9=_export_sfc(_sfc_main$1S,[["render",_sfc_render$U]]),_sfc_main$1R={},_hoisted_1$1v={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$T(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1v,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.15125 14.4995C8.30837 14.4995 9.2063 13.7913 9.7756 12.6064H16.4175C16.6582 12.6064 16.8433 12.4074 16.8433 12.1713C16.8433 11.9353 16.6582 11.7409 16.4175 11.7409H10.1089C10.3264 11.0327 10.4514 10.2135 10.4838 9.31556C10.7754 9.25076 11.0762 9.21836 11.3863 9.21836C11.4928 9.21836 11.5483 9.26465 11.5483 9.3387C11.5483 9.68584 11.3169 9.98207 11.3169 10.431C11.3169 10.8476 11.6224 11.1207 12.0528 11.1207C13.0572 11.1207 14.256 9.5655 14.5568 9.5655C14.816 9.5655 14.5661 10.9309 15.7464 10.9309C15.9824 10.9309 16.2601 10.8661 16.4684 10.7273C16.6212 10.6208 16.7276 10.4681 16.7276 10.269C16.7276 10.0098 16.5517 9.77841 16.2786 9.77841C16.1305 9.77841 15.9963 9.88024 15.8852 9.88024C15.5288 9.88024 15.876 8.38986 14.8346 8.38986C13.9783 8.38986 12.8628 9.75527 12.599 9.75527C12.5573 9.75527 12.5342 9.73676 12.5342 9.69047C12.5342 9.5655 12.636 9.36185 12.636 9.13968C12.636 8.54723 12.2102 8.20009 11.5205 8.20009C11.1595 8.20009 10.8078 8.23249 10.4699 8.29266C10.2986 5.78865 9.0443 3.93262 7.26696 3.93262C5.91544 3.93262 4.97122 4.96014 4.97122 6.39035C4.97122 7.95941 5.96635 9.26465 7.04479 10.1209C6.54028 10.6301 6.14686 11.1901 5.90155 11.7409H2.856C2.61532 11.7409 2.43018 11.9353 2.43018 12.1713C2.43018 12.4028 2.61994 12.6064 2.856 12.6064H5.64235C5.62847 12.7221 5.61921 12.8378 5.61921 12.9443C5.61921 13.8978 6.15612 14.4995 7.15125 14.4995ZM7.81306 9.45897C6.93828 8.78784 5.99406 7.74643 5.99406 6.38565C5.99406 5.55715 6.51708 4.95544 7.27153 4.95544C8.50271 4.95544 9.38213 6.50599 9.46544 8.56567C8.85911 8.78784 8.29906 9.09795 7.81306 9.45897ZM3.15682 10.9678L3.67521 10.4494L4.1936 10.9631C4.35097 11.1159 4.5824 11.1159 4.73977 10.9631C4.89251 10.8104 4.89251 10.5697 4.73977 10.417L4.22137 9.90321L4.73977 9.38482C4.89251 9.23208 4.89251 8.99602 4.73977 8.84328C4.58703 8.68591 4.34634 8.68591 4.1936 8.83865L3.67521 9.35705L3.15682 8.84328C2.99945 8.69054 2.7634 8.69054 2.61066 8.84328C2.45329 8.99139 2.45329 9.2367 2.61066 9.38945L3.12442 9.90321L2.61066 10.417C2.45329 10.5743 2.45792 10.8058 2.61066 10.9631C2.7634 11.1205 3.00408 11.1159 3.15682 10.9678ZM9.01653 11.7409H7.07256C7.28084 11.3984 7.5678 11.0374 7.91957 10.7041C7.99826 10.7504 8.07231 10.7875 8.14637 10.8245C8.23894 10.8754 8.32688 10.8939 8.41482 10.8939C8.67402 10.8939 8.89156 10.7041 8.89156 10.4542C8.89156 10.3153 8.84064 10.1858 8.71567 10.0747C8.94247 9.92193 9.18315 9.78307 9.44235 9.66736C9.38218 10.4496 9.23406 11.1531 9.01653 11.7409ZM7.27156 13.481C6.88739 13.481 6.69299 13.231 6.69299 12.8423C6.69299 12.7682 6.70225 12.6895 6.71614 12.6062H8.59068C8.22965 13.1616 7.77606 13.481 7.27156 13.481Z",fill:"currentColor"},null,-1),createBaseVNode("rect",{x:"10.625",y:"10.625",width:"7.5",height:"7.5",rx:"3.64583",fill:"#BF3030"},null,-1),createBaseVNode("path",{d:"M15.625 13.125L13.125 15.625",stroke:"white","stroke-width":"0.9375","stroke-linecap":"square","stroke-linejoin":"round"},null,-1),createBaseVNode("path",{d:"M13.125 13.125L15.625 15.625",stroke:"white","stroke-width":"0.9375","stroke-linecap":"square","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_1$3=_export_sfc(_sfc_main$1R,[["render",_sfc_render$T]]),_sfc_main$1Q={},_hoisted_1$1u={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$S(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1u,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.15125 14.4995C8.30837 14.4995 9.2063 13.7913 9.7756 12.6064H16.4175C16.6582 12.6064 16.8433 12.4074 16.8433 12.1713C16.8433 11.9353 16.6582 11.7409 16.4175 11.7409H10.1089C10.3264 11.0327 10.4514 10.2135 10.4838 9.31556C10.7754 9.25076 11.0762 9.21836 11.3863 9.21836C11.4928 9.21836 11.5483 9.26465 11.5483 9.3387C11.5483 9.68584 11.3169 9.98207 11.3169 10.431C11.3169 10.8476 11.6224 11.1207 12.0528 11.1207C13.0572 11.1207 14.256 9.5655 14.5568 9.5655C14.816 9.5655 14.5661 10.9309 15.7464 10.9309C15.9824 10.9309 16.2601 10.8661 16.4684 10.7273C16.6212 10.6208 16.7276 10.4681 16.7276 10.269C16.7276 10.0098 16.5517 9.77841 16.2786 9.77841C16.1305 9.77841 15.9963 9.88024 15.8852 9.88024C15.5288 9.88024 15.876 8.38986 14.8346 8.38986C13.9783 8.38986 12.8628 9.75527 12.599 9.75527C12.5573 9.75527 12.5342 9.73676 12.5342 9.69047C12.5342 9.5655 12.636 9.36185 12.636 9.13968C12.636 8.54723 12.2102 8.20009 11.5205 8.20009C11.1595 8.20009 10.8078 8.23249 10.4699 8.29266C10.2986 5.78865 9.0443 3.93262 7.26696 3.93262C5.91544 3.93262 4.97122 4.96014 4.97122 6.39035C4.97122 7.95941 5.96635 9.26465 7.04479 10.1209C6.54028 10.6301 6.14686 11.1901 5.90155 11.7409H2.856C2.61532 11.7409 2.43018 11.9353 2.43018 12.1713C2.43018 12.4028 2.61994 12.6064 2.856 12.6064H5.64235C5.62847 12.7221 5.61921 12.8378 5.61921 12.9443C5.61921 13.8978 6.15612 14.4995 7.15125 14.4995ZM7.81306 9.45897C6.93828 8.78784 5.99406 7.74643 5.99406 6.38565C5.99406 5.55715 6.51708 4.95544 7.27153 4.95544C8.50271 4.95544 9.38213 6.50599 9.46544 8.56567C8.85911 8.78784 8.29906 9.09795 7.81306 9.45897ZM3.15682 10.9678L3.67521 10.4494L4.1936 10.9631C4.35097 11.1159 4.5824 11.1159 4.73977 10.9631C4.89251 10.8104 4.89251 10.5697 4.73977 10.417L4.22137 9.90321L4.73977 9.38482C4.89251 9.23208 4.89251 8.99602 4.73977 8.84328C4.58703 8.68591 4.34634 8.68591 4.1936 8.83865L3.67521 9.35705L3.15682 8.84328C2.99945 8.69054 2.7634 8.69054 2.61066 8.84328C2.45329 8.99139 2.45329 9.2367 2.61066 9.38945L3.12442 9.90321L2.61066 10.417C2.45329 10.5743 2.45792 10.8058 2.61066 10.9631C2.7634 11.1205 3.00408 11.1159 3.15682 10.9678ZM9.01653 11.7409H7.07256C7.28084 11.3984 7.5678 11.0374 7.91957 10.7041C7.99826 10.7504 8.07231 10.7875 8.14637 10.8245C8.23894 10.8754 8.32688 10.8939 8.41482 10.8939C8.67402 10.8939 8.89156 10.7041 8.89156 10.4542C8.89156 10.3153 8.84064 10.1858 8.71567 10.0747C8.94247 9.92193 9.18315 9.78307 9.44235 9.66736C9.38218 10.4496 9.23406 11.1531 9.01653 11.7409ZM7.27156 13.481C6.88739 13.481 6.69299 13.231 6.69299 12.8423C6.69299 12.7682 6.70225 12.6895 6.71614 12.6062H8.59068C8.22965 13.1616 7.77606 13.481 7.27156 13.481Z",fill:"currentColor"},null,-1),createBaseVNode("rect",{x:"10.625",y:"10.625",width:"7.5",height:"7.5",rx:"3.64583",fill:"#30BF83"},null,-1),createBaseVNode("path",{d:"M12.8125 14.6875L14.2969 15.625L16.25 13.125",stroke:"white","stroke-width":"0.9375"},null,-1)]))}const __unplugin_components_0$h=_export_sfc(_sfc_main$1Q,[["render",_sfc_render$S]]);var dayjs_min={exports:{}};(function(e,n){(function(r,o){e.exports=o()})(commonjsGlobal,function(){var r=1e3,o=6e4,s=36e5,u="millisecond",d="second",f="minute",g="hour",m="day",y="week",v="month",_="quarter",w="year",x="date",k="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(le){var J=["th","st","nd","rd"],O=le%100;return"["+le+(J[(O-20)%10]||J[O]||J[0])+"]"}},P=function(le,J,O){var U=String(le);return!U||U.length>=J?le:""+Array(J+1-U.length).join(O)+le},T={s:P,z:function(le){var J=-le.utcOffset(),O=Math.abs(J),U=Math.floor(O/60),W=O%60;return(J<=0?"+":"-")+P(U,2,"0")+":"+P(W,2,"0")},m:function le(J,O){if(J.date()<O.date())return-le(O,J);var U=12*(O.year()-J.year())+(O.month()-J.month()),W=J.clone().add(U,v),H=O-W<0,X=J.clone().add(U+(H?-1:1),v);return+(-(U+(O-W)/(H?W-X:X-W))||0)},a:function(le){return le<0?Math.ceil(le)||0:Math.floor(le)},p:function(le){return{M:v,y:w,w:y,d:m,D:x,h:g,m:f,s:d,ms:u,Q:_}[le]||String(le||"").toLowerCase().replace(/s$/,"")},u:function(le){return le===void 0}},D="en",F={};F[D]=E;var I="$isDayjsObject",N=function(le){return le instanceof j||!(!le||!le[I])},q=function le(J,O,U){var W;if(!J)return D;if(typeof J=="string"){var H=J.toLowerCase();F[H]&&(W=H),O&&(F[H]=O,W=H);var X=J.split("-");if(!W&&X.length>1)return le(X[0])}else{var Q=J.name;F[Q]=J,W=Q}return!U&&W&&(D=W),W||!U&&D},Y=function(le,J){if(N(le))return le.clone();var O=typeof J=="object"?J:{};return O.date=le,O.args=arguments,new j(O)},Z=T;Z.l=q,Z.i=N,Z.w=function(le,J){return Y(le,{locale:J.$L,utc:J.$u,x:J.$x,$offset:J.$offset})};var j=function(){function le(O){this.$L=q(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[I]=!0}var J=le.prototype;return J.parse=function(O){this.$d=function(U){var W=U.date,H=U.utc;if(W===null)return new Date(NaN);if(Z.u(W))return new Date;if(W instanceof Date)return new Date(W);if(typeof W=="string"&&!/Z$/i.test(W)){var X=W.match(S);if(X){var Q=X[2]-1||0,fe=(X[7]||"0").substring(0,3);return H?new Date(Date.UTC(X[1],Q,X[3]||1,X[4]||0,X[5]||0,X[6]||0,fe)):new Date(X[1],Q,X[3]||1,X[4]||0,X[5]||0,X[6]||0,fe)}}return new Date(W)}(O),this.init()},J.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},J.$utils=function(){return Z},J.isValid=function(){return this.$d.toString()!==k},J.isSame=function(O,U){var W=Y(O);return this.startOf(U)<=W&&W<=this.endOf(U)},J.isAfter=function(O,U){return Y(O)<this.startOf(U)},J.isBefore=function(O,U){return this.endOf(U)<Y(O)},J.$g=function(O,U,W){return Z.u(O)?this[U]:this.set(W,O)},J.unix=function(){return Math.floor(this.valueOf()/1e3)},J.valueOf=function(){return this.$d.getTime()},J.startOf=function(O,U){var W=this,H=!!Z.u(U)||U,X=Z.p(O),Q=function(be,Ve){var De=Z.w(W.$u?Date.UTC(W.$y,Ve,be):new Date(W.$y,Ve,be),W);return H?De:De.endOf(m)},fe=function(be,Ve){return Z.w(W.toDate()[be].apply(W.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(Ve)),W)},Se=this.$W,Pe=this.$M,$e=this.$D,Ie="set"+(this.$u?"UTC":"");switch(X){case w:return H?Q(1,0):Q(31,11);case v:return H?Q(1,Pe):Q(0,Pe+1);case y:var Ne=this.$locale().weekStart||0,Be=(Se<Ne?Se+7:Se)-Ne;return Q(H?$e-Be:$e+(6-Be),Pe);case m:case x:return fe(Ie+"Hours",0);case g:return fe(Ie+"Minutes",1);case f:return fe(Ie+"Seconds",2);case d:return fe(Ie+"Milliseconds",3);default:return this.clone()}},J.endOf=function(O){return this.startOf(O,!1)},J.$set=function(O,U){var W,H=Z.p(O),X="set"+(this.$u?"UTC":""),Q=(W={},W[m]=X+"Date",W[x]=X+"Date",W[v]=X+"Month",W[w]=X+"FullYear",W[g]=X+"Hours",W[f]=X+"Minutes",W[d]=X+"Seconds",W[u]=X+"Milliseconds",W)[H],fe=H===m?this.$D+(U-this.$W):U;if(H===v||H===w){var Se=this.clone().set(x,1);Se.$d[Q](fe),Se.init(),this.$d=Se.set(x,Math.min(this.$D,Se.daysInMonth())).$d}else Q&&this.$d[Q](fe);return this.init(),this},J.set=function(O,U){return this.clone().$set(O,U)},J.get=function(O){return this[Z.p(O)]()},J.add=function(O,U){var W,H=this;O=Number(O);var X=Z.p(U),Q=function(Pe){var $e=Y(H);return Z.w($e.date($e.date()+Math.round(Pe*O)),H)};if(X===v)return this.set(v,this.$M+O);if(X===w)return this.set(w,this.$y+O);if(X===m)return Q(1);if(X===y)return Q(7);var fe=(W={},W[f]=o,W[g]=s,W[d]=r,W)[X]||1,Se=this.$d.getTime()+O*fe;return Z.w(Se,this)},J.subtract=function(O,U){return this.add(-1*O,U)},J.format=function(O){var U=this,W=this.$locale();if(!this.isValid())return W.invalidDate||k;var H=O||"YYYY-MM-DDTHH:mm:ssZ",X=Z.z(this),Q=this.$H,fe=this.$m,Se=this.$M,Pe=W.weekdays,$e=W.months,Ie=W.meridiem,Ne=function(Ve,De,ve,ye){return Ve&&(Ve[De]||Ve(U,H))||ve[De].slice(0,ye)},Be=function(Ve){return Z.s(Q%12||12,Ve,"0")},be=Ie||function(Ve,De,ve){var ye=Ve<12?"AM":"PM";return ve?ye.toLowerCase():ye};return H.replace(M,function(Ve,De){return De||function(ve){switch(ve){case"YY":return String(U.$y).slice(-2);case"YYYY":return Z.s(U.$y,4,"0");case"M":return Se+1;case"MM":return Z.s(Se+1,2,"0");case"MMM":return Ne(W.monthsShort,Se,$e,3);case"MMMM":return Ne($e,Se);case"D":return U.$D;case"DD":return Z.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return Ne(W.weekdaysMin,U.$W,Pe,2);case"ddd":return Ne(W.weekdaysShort,U.$W,Pe,3);case"dddd":return Pe[U.$W];case"H":return String(Q);case"HH":return Z.s(Q,2,"0");case"h":return Be(1);case"hh":return Be(2);case"a":return be(Q,fe,!0);case"A":return be(Q,fe,!1);case"m":return String(fe);case"mm":return Z.s(fe,2,"0");case"s":return String(U.$s);case"ss":return Z.s(U.$s,2,"0");case"SSS":return Z.s(U.$ms,3,"0");case"Z":return X}return null}(Ve)||X.replace(":","")})},J.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},J.diff=function(O,U,W){var H,X=this,Q=Z.p(U),fe=Y(O),Se=(fe.utcOffset()-this.utcOffset())*o,Pe=this-fe,$e=function(){return Z.m(X,fe)};switch(Q){case w:H=$e()/12;break;case v:H=$e();break;case _:H=$e()/3;break;case y:H=(Pe-Se)/6048e5;break;case m:H=(Pe-Se)/864e5;break;case g:H=Pe/s;break;case f:H=Pe/o;break;case d:H=Pe/r;break;default:H=Pe}return W?H:Z.a(H)},J.daysInMonth=function(){return this.endOf(v).$D},J.$locale=function(){return F[this.$L]},J.locale=function(O,U){if(!O)return this.$L;var W=this.clone(),H=q(O,U,!0);return H&&(W.$L=H),W},J.clone=function(){return Z.w(this.$d,this)},J.toDate=function(){return new Date(this.valueOf())},J.toJSON=function(){return this.isValid()?this.toISOString():null},J.toISOString=function(){return this.$d.toISOString()},J.toString=function(){return this.$d.toUTCString()},le}(),ne=j.prototype;return Y.prototype=ne,[["$ms",u],["$s",d],["$m",f],["$H",g],["$W",m],["$M",v],["$y",w],["$D",x]].forEach(function(le){ne[le[1]]=function(J){return this.$g(J,le[0],le[1])}}),Y.extend=function(le,J){return le.$i||(le(J,j,Y),le.$i=!0),Y},Y.locale=q,Y.isDayjs=N,Y.unix=function(le){return Y(1e3*le)},Y.en=F[D],Y.Ls=F,Y.p={},Y})})(dayjs_min);const dayjs=dayjs_min.exports,SignatureDetailsDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1t={key:0,class:"signature-details-dialog"},_hoisted_2$y={class:"info"},_hoisted_3$o={class:"title"},_hoisted_4$j={class:"desc"},_hoisted_5$f={class:"summary"},_hoisted_6$d={class:"title"},_hoisted_7$a={class:"content"},_hoisted_8$8={key:3},dialogName$5="signatureDetailsDialog",_sfc_main$1P={__name:"SignatureDetailsDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$5)),s=computed(()=>r.getSelectedSignature),u=computed(()=>{const g=s.value.signerList[0].certificateList[0].validDateEnd,m=g.substring(0,4),y=g.substring(4,6),v=g.substring(6,8),_=g.substring(8,10),w=g.substring(10,12),x=g.substring(12,14),k=g.substring(14);return new Date(`${m}-${y}-${v}T${_}:${w}:${x}${k}`)<new Date}),d=()=>{n.closeElement(dialogName$5)},f=()=>{d(),n.openElement("certificateViewerDialog")};return(g,m)=>{const y=__unplugin_components_0$w,v=__unplugin_components_0$h,_=__unplugin_components_1$3,w=__unplugin_components_2$9,x=_sfc_main$37;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1t,[createVNode(x,{show:o.value,dialogName:dialogName$5},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.title")),1),createVNode(y,{class:"close",onClick:d})]),footer:withCtx(()=>[createBaseVNode("div",{class:"view-button",onClick:f},toDisplayString$1(g.$t("signatures.detailsDialog.viewCertificateDetails")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$y,[s.value.signerList[0].isCertTrusted&&s.value.signerList[0].isSignVerified?(openBlock(),createBlock(v,{key:0})):s.value.signerList[0].isCertTrusted||s.value.signerList[0].isSignVerified?(openBlock(),createBlock(_,{key:1})):(openBlock(),createBlock(w,{key:2})),createBaseVNode("div",null,[createBaseVNode("p",_hoisted_3$o,toDisplayString$1(g.$t("signatures.detailsDialog.signBy"))+' "'+toDisplayString$1(s.value.signerList[0].certificateList[0].subject.CN)+toDisplayString$1(s.value.signerList[0].certificateList[0].subject.email?"<"+s.value.signerList[0].certificateList[0].subject.email+">":"")+'"',1),createBaseVNode("p",_hoisted_4$j,toDisplayString$1(g.$t("signatures.detailsDialog.signingTime"))+" "+toDisplayString$1(unref(dayjs)(s.value.date).format("YYYY-MM-DD HH:mm:ss")),1)])]),createBaseVNode("div",_hoisted_5$f,[createBaseVNode("div",_hoisted_6$d,[m[0]||(m[0]=createBaseVNode("div",{class:"line-left"},null,-1)),createBaseVNode("span",null,toDisplayString$1(g.$t("signatures.detailsDialog.validitySummary")),1),m[1]||(m[1]=createBaseVNode("div",{class:"line-right"},null,-1))]),createBaseVNode("div",_hoisted_7$a,[!s.value.signerList[0].isCertTrusted&&!s.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.invalidIdentity")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.invalidSignature")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.alteredDoc")),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[s.value.signerList[0].isCertTrusted&&s.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.validIdentity")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.validSignature")),1)],64)):!s.value.signerList[0].isCertTrusted&&s.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.invalidIdentity")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.validSignature")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.unknownIdentity")),1)],64)):s.value.signerList[0].isCertTrusted&&!s.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.validIdentity")),1),createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.detailsDialog.invalidSignature")),1)],64)):createCommentVNode("",!0),u.value?(openBlock(),createElementBlock("p",_hoisted_8$8,toDisplayString$1(g.$t("signatures.detailsDialog.expiredCertificate")),1)):createCommentVNode("",!0),createBaseVNode("p",null,toDisplayString$1(s.value.signerList[0].diffInfo.length?g.$t("signatures.detailsDialog.alteredDoc"):g.$t("signatures.detailsDialog.notModifiedDoc")),1)],64))])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},DigitalKeyboardCreatePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$1s={class:"paint-container"},_hoisted_2$x={class:"keyboard-paint",style:{}},_hoisted_3$n=["placeholder"],dialogName$4="digitalKeyboardCreatePanel",_sfc_main$1O={__name:"DigitalKeyboardCreatePanel",props:["text"],emits:["modifyText"],setup(e,{emit:n}){const r=n,o=ref(e.text),s=useViewerStore();useDocumentStore(),computed(()=>s.isElementOpen(dialogName$4));const u=()=>{s.closeElement(dialogName$4),d()},d=()=>{o.value=""},f=()=>{r("modifyText",o.value),u()};return(g,m)=>{const y=__unplugin_components_0$w,v=_sfc_main$37;return openBlock(),createBlock(v,{class:"digital-signature-dialog",show:!0,dialogName:dialogName$4},{header:withCtx(()=>[createVNode(y,{class:"close",onClick:u})]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:d},toDisplayString$1(g.$t("signatures.clear")),1),createBaseVNode("div",{class:"rect-button white",onClick:u},toDisplayString$1(g.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:f},toDisplayString$1(g.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1s,[createBaseVNode("div",_hoisted_2$x,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=_=>o.value=_),type:"text",placeholder:g.$t("signatures.appearanceDialog.signHere"),name:"signature"},null,8,_hoisted_3$n),[[vModelText,o.value]])])])]),_:1})}}},DigitalSignCreatePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$1r=["width","height"],dialogName$3="digitalSignCreatePanel",_sfc_main$1N={__name:"DigitalSignCreatePanel",emits:["modifyImage"],setup(e,{emit:n}){const r=n,o=useViewerStore();useDocumentStore();const s=computed(()=>o.isElementOpen(dialogName$3)),u=ref(578),d=ref(isMobile?0:270),f=ref();watch(()=>s.value,(v,_)=>{v&&isMobile&&nextTick(()=>{const{clientWidth:w,clientHeight:x}=f.value;w&&u.value!==w&&(u.value=w),x&&d.value!==x&&(d.value=x)})});const g=()=>{o.closeElement(dialogName$3),m()},m=()=>{core.handleSign({flag:"clear"})},y=async()=>{const v=await core.handleSign({type:1,flag:"image"});r("modifyImage",v),g()};return(v,_)=>{const w=__unplugin_components_0$w,x=_sfc_main$37;return openBlock(),createBlock(x,{class:"digital-signature-dialog trackpad",show:!0,dialogName:dialogName$3},{header:withCtx(()=>[createVNode(w,{class:"close",onClick:g})]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:m},toDisplayString$1(v.$t("signatures.clear")),1),createBaseVNode("div",{class:"rect-button white",onClick:g},toDisplayString$1(v.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:y},toDisplayString$1(v.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",{class:"paint-container",ref_key:"paintContainer",ref:f},[createBaseVNode("canvas",{id:"digitalTrackpadCanvas",width:u.value,height:d.value},null,8,_hoisted_1$1r)],512)]),_:1})}}},SignatureAppearanceDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1q={key:0,class:"signature-appearance-dialog"},_hoisted_2$w={class:"sign-popup-header"},_hoisted_3$m={class:"preview-area"},_hoisted_4$i=["src"],_hoisted_5$e={class:"preview-options"},_hoisted_6$c={class:"title"},_hoisted_7$9={class:"configurations"},_hoisted_8$7={class:"left"},_hoisted_9$6={class:"checkboxes"},_hoisted_10$4={class:"right"},_hoisted_11$4={class:"text-align"},_hoisted_12$4={class:"buttons"},_hoisted_13$4={key:0,class:"addition"},_hoisted_14$4={key:0},_hoisted_15$4={class:"select-box"},_hoisted_16$4=["value"],_hoisted_17$2=["value"],_hoisted_18$2=["value"],_hoisted_19$2=["value"],_hoisted_20$2={key:1},dialogName$2="signatureAppearanceDialog",_sfc_main$1M={__name:"SignatureAppearanceDialog",setup(e){const{t:n}=useI18n(),o=getCurrentInstance().appContext.app.config.globalProperties.$t,s=useViewerStore(),u=useDocumentStore(),d=computed(()=>s.isElementOpen(dialogName$2)),f=computed(()=>s.getActiveElementTab("signPanel"));computed(()=>s.getToolMode);const g=computed(()=>u.getActiveTool),m=computed(()=>s.getDigitalSignaturePreview),y=computed(()=>s.isElementOpen("digitalSignCreatePanel")),v=computed(()=>s.isElementOpen("digitalKeyboardCreatePanel")),_=computed(()=>u.getDisableDigitalSignature),w=computed(()=>u.getDisableElectronicSignature),x=computed(()=>s.getCertSubject),k=ref(null),S=ref(""),M=ref(""),E=reactive({name:!0,dName:!1,date:!0,version:!1,logo:!1,location:!1,reason:!1,labels:!0,alignment:"left",reasonText:n("signatures.none"),locationText:""});watch(d,(J,O)=>{var U;J&&(S.value=(U=x.value)==null?void 0:U.CN)}),watch(E,async(J,O)=>{const U=D();await F(U)},{deep:!0});const P=async J=>{M.value=J;const O=D();await F(O)},T=async J=>{S.value=J;const O=D();await F(O)},D=()=>{let J="";return E.name&&(J+=I("name")+`
`),E.date&&(J+=I("date")+`
`),E.reason&&(J+=I("reason")+`
`),E.dName&&(J+=I("dName")+`
`),E.version&&(J+=I("version")+`
`),E.location&&(J+=I("location")),J},F=async J=>{const O=N(J);O.rect={width:582,height:187,top:0,left:0,right:582,bottom:187};const U=await core.getSignature(O);s.setDigitalSignaturePreview(U)},I=J=>{let O={};switch(J){case"name":O.title=o("signatures.appearanceDialog.name"),O.value=x.value.CN;break;case"date":const U=new Date,W=U.getFullYear(),H=U.getMonth()+1<10?`0${U.getMonth()+1}`:U.getMonth()+1,X=U.getDate()<10?`0${U.getDate()}`:U.getDate(),Q=U.getHours()<10?`0${U.getHours()}`:U.getHours(),fe=U.getMinutes()<10?`0${U.getMinutes()}`:U.getMinutes(),Se=U.getSeconds()<10?`0${U.getSeconds()}`:U.getSeconds(),Pe=`${W}.${H}.${X} ${Q}:${fe}:${Se}`;O.title=o("signatures.appearanceDialog.date"),O.value=Pe;break;case"reason":O.title=o("signatures.appearanceDialog.reason"),O.value=E.reasonText;break;case"dName":const Ie=["CN","O","OU","email","L","ST","C"].map(Ne=>`${Ne}=${x.value[Ne]}`).join(",");O.title=o("signatures.appearanceDialog.dName"),O.value=Ie;break;case"version":O.title=o("signatures.appearanceDialog.ComPDFKitVersion"),O.value="2.7.0";break;case"location":O.title=o("signatures.appearanceDialog.location"),O.value=E.locationText;break}return E.labels?`${O.title}: ${O.value}`:O.value},N=J=>{const O={content:J,isContentAlginLeft:E.alignment!=="left"};return f.value!=="keyboard"?O.text="":O.text=S.value,(f.value==="image"||f.value==="trackpad")&&(O.imageBase64=M.value),E.logo&&(O.isDrowLogo=!0,O.logoBase64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAYAAACHjumMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA9kSURBVHgB7d1vbJXlGcfx635KpUWqJWgiZGgxg2ZG52k1pmqmJdYl6kZwW8S5F4hlKvGFmG3RZWYU4wuX7QUsMdpsSn3j3LJMo3FLJobqMmMWpDUuS4BkdpKAyWAFi4JAz737Oj2Hlv45PX+e+/x57u8nOZ4/Lbw4nvPjuq77fp7HSAy67x9tPSWyzhhJpSNzhbGSsmJa3fNWAeqBtSNiZMSk7YfWyLCkZfD9gSUjgrIYKVEmVKLoUTG22/013QIkjBE7bK3dQdiUruiAyQWLFdlChYJgWBmQdHobQVOcogKm64HjWwkWBM1K3/svXrxNUJCCAqbr/tE20xC96sIlJUDorIy4amYN1cz8ovl+oav3sw02ioYIFyDLSJttiIZu7B1dJ8grb8BoS+TieoCWCDifK/1brUSvTnxHMJc5W6TMG2ekTwDkx1xmTrMGjJZ+ms4CoEDm/vdfuOglwXlmBIwOdHXmQlsEFM7NKI+Z8XQHg9/zzZzBRNFuwgUojs5kdKVVcJ7zAiY7d2kTAEXTldauB0b7BOeca5G0NZKG6GMBUDJtlZrH0ysHB5YcE0ypYFgxAsqmrdKpSLYIMjIVDNULEB+qmElR9r/dAiAWVDGTMgFjTPSoAIiPabhVIIb2CPCjaTy9JPQ2KaI9AvxwbVLwB0NGenpLARA7vlsuYGxkrhUAsUtHUZsELnJraisFQOxcBRP8P96RW0K6QgDEznJM3/xntANQGt0PI4EjYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAmwUCFGjZUiOXXRLJMr0tjTLPFy8y0uJu+ppa3DzxHBM6v/+8lTpgjYyIdbe0fOieDcu4DA7fsXlEykTAYAYNiK+uiGTVigZZ7e5XX94gl7lAITiSy1hpc3dtrqfpds8yvU1qV/+wpNM7ygkbAgaZ4PhGxwIXJg1yi7vX6gQwYlMSmZ0TYfP8gJyx24oNGtPVe7wuSjjEq6O9QW7taJROd6+VCvzofLtfksQa0zd820PbCv19AiYguVC586ZG2p0KSVrAZI3YM3ZNIdUMLVLCESrwoM00ypCb0Wwc7nnotXy/SMAkkAbJHS5QbnXzlM52/hfDB9PqZjSvpt7uz9sy8elLEA2We3oaZX3PQqoVVISxts+FjMwVMgRMAugelN61C+UuV7UAlZYJmV39I65demn6z1iPrGMaLM/+ZJH86ZnFhAuqykh6e+ovz7VNf50Kpg5RsaD2uJlMo3nVPeiY+ioVTB3RuUrv2gvkpZ9fSLigBtlU6q3n+qa+QsDUCd1h+9LWC2XT2iYGuKhZxsijqd07W3PPaZFqnLZDT25sYrkZdcK0ytlTW9yDPn1GBVPD1vdMtEOEC+rJ1CqGT24NompBfZusYvgE1xitWnSFiDkL6pkx5la9J2BqRG6FSHfhAgnQrW0SAVMDchvmOA8LEuXMqXUETJXp8vOTG5tpiZA8kUkRMFW0aa3OW5oESCJjbRsBUyVb7l3IvAXJZsy1BEyFaSv0zCPNLEEjAJYhbyXpMPcXLlw4By7CYAiYSmGlCCHi014BhAtCxSfeM8IFIeNT7xHhgtDxyfdEV4t0oEu4IGR8+j352cYmVosQPALGA91Epxc7A0JHwMRsE0dEA+cQMDHSAxc5tgiYRMDEZOIsdM0CYBIBEwNdMdLlaE65AJyPgImBnomO5WhgJr4VZbrz5kaGusAcCJgy6Nxly3qGusBcCJgy6KVFmLsAcyNgSqT7XThpFJAfAVMCbY3uYe4CzIuAKQEXRgMKQ8AUSVeN7rqJ44yAQhAwRdCqZdNaWiOgUARMEdb3NLKhDigC35YC6WCXAxmB4hAwBeqlNQKKRsAUQKsXBrtA8QiYAlC9AKUhYOZB9QKUjoCZB9ULUDoCJg+qF6A8BEweVC9AeQiYPDrbua4RUA4CZg56zBG7doHy8A2aw709FwiA8nDGpFmsXtHAZV8LdPjUmOz53yHZd+Jo5vEhdxs7czpzDxAws7jndqqXfD4YPSS7/zsig+5GkCAfAmYWDHdnGjv7pbx88J/y8icfZR4DhSBgptFwYbg7iWBBOQiYae68mfYoR0Ol/+MPCBaUjICZhvZIMnOVvn8Nyh43awHKQcBMQXtE1YJ4ETBT3NIR9nFHvzrwXiZggLgQMFOE3B5tdS3RG4f3CRAnAiZLj5wOdXPdvf/4o+wfOypA3FiPzVq1Isy3QisXwgW+EDBZIc5f+v+9h7YIXhEwWasDq2Byq0WATwSMTFyxMaT5i+5zIVxQCQSMhDd/+eHeN9jngoogYESCql5edzOXwyc5AhqVQcCI7n8JY7We1giVRsCI7oExEoKXD35E9YKKImAkjBZJq5c3Du0XoJKCDxjdwRsCPTKawS4qjYBZGkZ7xOwF1RB8wFx2SfLbIz2HLrMXVAMVTAAVzOuHmb2gOgiYAGYwe45xZjpUR/AB09Kc7ApGV49oj1AtwQfM4kWSaPvHjghQLVQwi5JdwezjXC+oIiqYRcl+C/SSrkC1EDDNkmiHubQrqogWKeEt0mdnTgtQLRyLlHBUMKgmAgaANwQMAG8IGADeEDAJt6ypRYBqCT5gxr6wkmQXNV4gQLUEHzAnTkqiUcGgmmiREm45AYMqCj5gDh8ZlyRbvXipANVCi/SFJNr1S5YLUC0MeU8me8i7vLmFOQyqhhbpSFqSbs2lbQJUAwFzNNkVjOomYFAlwQfMpwkf8iqdw7QsWChApVHBBFDBqPtWXC1ApREwbgaT9N286r7Lr6GKQcWx0c759GjyB70aLlQxqDQCxtl/MPkBo6hiUGkEjHPgk+QPepWGy4MrOwWoFALGOXAwjIBRP7j863Jd6zIBKoGAEQ2YMFqknG1XraFVQkUQMDJxTphQlquVHj5Aq4RKIGCy3h06IyHRVum+FdcI4BMBkxXKStJUP159k3xrWbsAvhAwWX8LrILJeeqqblndwjlj4AcBk6VzmJBWk6Z65YbvUcnACwJmir37wgwYpZXMgyuvEyBOBMwUoQ16p3v4yuvlR6tuZAkbsSFgptAKJoQDH/PR1aXf3fBdzoKHWBAw0/z5vbCrGKX7ZN68+T7p+1o3QYOyEDDThN4mTbV2ebv8pvPbmf0ytE0ohenqPR52TzCLv/66RVoWGcGkQyfHZM/oIen/+AM5fGpMgEI0fKXzp32C8yy9OJKrr2wQTGppXCjtLZe4Gc01cl32UihjZ0/LCXcD5rJAMIO2Set7uKbzXPQcv7nrLWlls+/EEdk/dtTdH8081+ChyoEiYGahq0l7952VznbenvnoQFhvay5dKZip8+1+CRlD3jm8O3RWAJSHgJmDLleHvicGKBcBMwcNlz/sYoAJlIOAyeP3BAxQFgImD61i3mRnL1AyAmYeL7z+pQAoDQEzD73yoy5ZAygeAVOAp3eeEgDFI2AKoFUMsxigeARMgXQWw74YoDgETIG0imFfDFAcAqYIui/m8NHwLm8ClIqAKYK2SNtfYeALFIqAKZIeBMmyNVAYAqYEumzNwBeYHwFTAh34vsgOX2BeBEyJXnEDX1olID8Cpgy0SkB+BEwZaJWA/AiYMmmrxHljgNkRMDHQwwjYgAfMRMDEQOcwj/zyC+YxwDQETEx0HvP0zpMCYBIBEyPd5csZ8IBJBEzMfusChqEvMIGA8UAPiGQTHkDAePPEsyflwMFxAUJGwHiiK0qPu5Bh+RohI2A80pUlXb4mZBAqAsYzQgYhI2AqgJBBqAiYCsmFDINfhCSyIscEFZELmXeGuMYSwhAZa48LKkZXl3QJm814CEFkjB0WVJxuxuOwAiRdJGkZEVSFHlbw+LMchY3kiqwRKpgq0gMkNzz1OStMSKSoKS2vCapKh78btn3OXAaJEw0OLHGrSGZQUFW5q0bqOWVomZAUE/tg7Pg7gprw5t/PZFomjsZGEmQCxrVJ29kPUzty+2V0lYlqBvUsEzDaJhmb3iGoKbrKpNXMm++xMQ/16dyhAlQxtSlzrt8XT2ZmM6w0od6cCxiqmNqWmc24lSY256GemOkv3Nh7fMhVMilBzVp2SSS9axfKXTc1Cmpb59v9ErIZR1PbxvTdtEq1Ldc2feeJE8xnUNPMbC92PTB6v5hop6AuUNHUrtArGDPXD7o2He8TK1sFdSMXNJ3tDbJsKaf6qQUETB6ETP266+ZGWd+zUFatIGiqiYCZx429o+vSEu10v9gqqDurVjTI+tsvoKqpEgKmAF0Pj7bJmWi3e9gmqFud7QvkTlfZEDaVQ8AUgZYpOTRsbulYkLmnjfKHgClStprpcw83CBJBh8PaSmngrHb3BE58CJgSZYLmtHS7v2KLGHOtIDFaFplM4GjQdLgKZ3kmgAidUhAwMciFjTFRylqru4DbXOhcIUgUndtotXOZuy1bajLPF7swasne9PHi5omAwgQCJnAdu57nfAiAJ9S9ALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANASP2mADwgoAROS4AfBgJPmCsNcMCIH7W/ocKxsiIAIidNWaYgDGWCgbwwX23CJio6TUBEL9IBoMPmOE1G3UVaVAAxGl4eM1mhrzKWvuOAIiNNXaH3hMwakHTdvbDADGKJroCAkYm2iRrZYcAKJsxMqDtkT4mYHKoYoBYpCO7LfeYgMmiigHKZ6zdlqteMs8F5+nY1T/kKpmUACiOkZGh2x5eOfUlKphpbEP6bloloEjGHrORXTP9ZQJmGi3vrJHHBEDBrI02Tm2NcgiYWQzftnlAe0kBMK/M3KXnoVl3xDODyaPzref6rDFbBcCsNFz23r65b86fC/JK7epfZyS9071VrQJggpu5mHF5bO83Nw/k/TXBvFK7n2szabNbrLQJEDwzrIshs81cZvymoGC0TAiaVi1p2ZGvJZrxRwRFyVQz49Ln3roNAoQgGyzpBU3bs2cfKPyPCkqiQSNp6TbWbHFPrxUgaax9xwXEYCnBkkPAxCAXNpE1KWttyr2rbe6tvUKAeuAqFDdfPO5uw8aYkbSe5TFqeq3UUJnq/zPmsRQ9GquGAAAAAElFTkSuQmCC"),f.value==="none"&&(O.isDrawOnlyContent=!0),O},q=J=>{J===f.value&&["image","none"].includes(J)||(core.handleSign({flag:"create",type:1}),s.setActiveSignWay(J),J==="trackpad"&&s.openElement("digitalSignCreatePanel"),J==="keyboard"&&s.openElement("digitalKeyboardCreatePanel"),Z())},Y=J=>{s.closeElement(dialogName$2),f.value!=="trackpad"&&Z(),core.handleSign({flag:"reset"}),document.body.style.overflow="",!g.value&&J==="cancel"&&_.value&&w.value&&s.openElement("selectSignTypeDialog"),s.setActiveSignWay("keyboard"),Object.assign(E,{name:!0,dName:!1,date:!0,version:!1,logo:!1,location:!1,reason:!1,labels:!0,alignment:"left",reasonText:o("signatures.none"),locationText:""})},Z=async()=>{M.value="",f.value==="trackpad"&&core.handleSign({flag:"clear"});const J=D();await F(J)},j=()=>{k.value.click()},ne=async J=>{let O=J.target.files[0];if(O.size>1024*1024){window.$message.error(o("signatures.uploadError"),{duration:5e3,icon:()=>h$1("img",{src:MessageError})}),J.target.value="";return}const U=new FileReader,H=await new Promise((Q,fe)=>{U.addEventListener("load",async Se=>{Q(Se.target.result)}),U.addEventListener("error",()=>{fe("Error reading the local image")}),U.readAsDataURL(O)});M.value=H;const X=D();await F(X)},le=async()=>{s.setCommonLoading(!0);const J=D(),O=N(J),U=u.getPkcs12;await core.handleSign({type:1,flag:"save",param:{annotation:toRaw(s.getSelectedSignatureField),...O},pkcs12Buffer:U.pkcs12Buffer,password:U.password}),Y(),s.setCommonLoading(!1)};return(J,O)=>{const U=__unplugin_components_0$w,W=__unplugin_components_1$b,H=__unplugin_components_2$d,X=__unplugin_components_3$e,Q=__unplugin_components_0$t,fe=_sfc_main$37,Se=_sfc_main$1N,Pe=_sfc_main$1O;return d.value?(openBlock(),createElementBlock("div",_hoisted_1$1q,[createVNode(fe,{show:d.value,dialogName:dialogName$2,class:"appearance-dialog"},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.title")),1),createVNode(U,{class:"close",onClick:Y})]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:O[16]||(O[16]=$e=>Y("cancel"))},toDisplayString$1(unref(o)("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:le},toDisplayString$1(unref(o)("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$w,[createBaseVNode("div",{onClick:O[0]||(O[0]=$e=>q("keyboard")),class:normalizeClass({active:f.value==="keyboard"})},toDisplayString$1(unref(o)("signatures.keyboard")),3),createBaseVNode("div",{onClick:O[1]||(O[1]=$e=>q("trackpad")),class:normalizeClass({active:f.value==="trackpad"})},toDisplayString$1(unref(o)("signatures.trackpad")),3),createBaseVNode("div",{onClick:O[2]||(O[2]=$e=>q("image")),class:normalizeClass({active:f.value==="image"})},toDisplayString$1(unref(o)("signatures.image")),3),createBaseVNode("div",{onClick:O[3]||(O[3]=$e=>q("none")),class:normalizeClass({active:f.value==="none"})},toDisplayString$1(unref(o)("signatures.none")),3)]),createBaseVNode("div",_hoisted_3$m,[createBaseVNode("img",{src:m.value},null,8,_hoisted_4$i)]),createBaseVNode("div",_hoisted_5$e,[f.value==="image"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:"upload",onClick:j},[createTextVNode(toDisplayString$1(unref(o)("upload")),1),createBaseVNode("input",{ref_key:"uploadImageEl",ref:k,type:"file",onChange:ne,accept:".png, .jpg, .jpeg",name:"signature"},null,544)]),createBaseVNode("span",{onClick:Z},toDisplayString$1(unref(o)("signatures.clear")),1)],64)):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_6$c,toDisplayString$1(unref(o)("signatures.appearanceDialog.includeText")),1),createBaseVNode("div",_hoisted_7$9,[createBaseVNode("div",_hoisted_8$7,[createBaseVNode("div",_hoisted_9$6,[createBaseVNode("div",{class:"check-box",onClick:O[4]||(O[4]=$e=>E.name=!E.name)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.name}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.name]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.name")),1)]),createBaseVNode("div",{class:"check-box",onClick:O[5]||(O[5]=$e=>E.dName=!E.dName)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.dName}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.dName]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.dName")),1)]),createBaseVNode("div",{class:"check-box",onClick:O[6]||(O[6]=$e=>E.date=!E.date)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.date}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.date]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.date")),1)]),createBaseVNode("div",{class:"check-box",onClick:O[7]||(O[7]=$e=>E.version=!E.version)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.version}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.version]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.ComPDFKitVersion")),1)]),createBaseVNode("div",{class:"check-box",onClick:O[8]||(O[8]=$e=>E.logo=!E.logo)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.logo}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.logo]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.logo")),1)]),createBaseVNode("div",{class:"check-box",onClick:O[9]||(O[9]=$e=>E.location=!E.location)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.location}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.location]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.location")),1)]),createBaseVNode("div",{class:"check-box",onClick:O[10]||(O[10]=$e=>E.reason=!E.reason)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.reason}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.reason]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.reason")),1)]),createBaseVNode("div",{class:"check-box",onClick:O[11]||(O[11]=$e=>E.labels=!E.labels)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.labels}])},[withDirectives(createVNode(W,null,null,512),[[vShow,E.labels]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.labels")),1)])])]),createBaseVNode("div",_hoisted_10$4,[createBaseVNode("div",_hoisted_11$4,[createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.textAlignment")),1),createBaseVNode("div",_hoisted_12$4,[createBaseVNode("div",{class:normalizeClass({active:E.alignment==="left"}),onClick:O[12]||(O[12]=$e=>E.alignment="left")},[createVNode(H)],2),createBaseVNode("div",{class:normalizeClass({active:E.alignment==="right"}),onClick:O[13]||(O[13]=$e=>E.alignment="right")},[createVNode(X)],2)])]),E.reason||E.location?(openBlock(),createElementBlock("div",_hoisted_13$4,[E.reason?(openBlock(),createElementBlock("div",_hoisted_14$4,[createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.reason")),1),createBaseVNode("div",_hoisted_15$4,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":O[14]||(O[14]=$e=>E.reasonText=$e)},[createBaseVNode("option",{value:unref(o)("signatures.none")},toDisplayString$1(unref(o)("signatures.none")),9,_hoisted_16$4),createBaseVNode("option",{value:unref(o)("signatures.appearanceDialog.docOwner")},toDisplayString$1(unref(o)("signatures.appearanceDialog.docOwner")),9,_hoisted_17$2),createBaseVNode("option",{value:unref(o)("signatures.appearanceDialog.approvingDoc")},toDisplayString$1(unref(o)("signatures.appearanceDialog.approvingDoc")),9,_hoisted_18$2),createBaseVNode("option",{value:unref(o)("signatures.appearanceDialog.reviewedDoc")},toDisplayString$1(unref(o)("signatures.appearanceDialog.reviewedDoc")),9,_hoisted_19$2)],512),[[vModelSelect,E.reasonText]]),createVNode(Q)])])):createCommentVNode("",!0),E.location?(openBlock(),createElementBlock("div",_hoisted_20$2,[createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.location")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":O[15]||(O[15]=$e=>E.locationText=$e),name:"signature"},null,512),[[vModelText,E.locationText]])])):createCommentVNode("",!0)])):createCommentVNode("",!0)])])]),_:1},8,["show"]),withDirectives(createVNode(Se,{onModifyImage:P},null,512),[[vShow,y.value]]),v.value?(openBlock(),createBlock(Pe,{key:0,text:S.value,onModifyText:T},null,8,["text"])):createCommentVNode("",!0)])):createCommentVNode("",!0)}}},SelectSignTypeDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1p={key:0,class:"select-type-popup"},_hoisted_2$v={class:"title title-color"},_hoisted_3$l={class:"select-text"},_hoisted_4$h={class:"text"},_hoisted_5$d={class:"title"},_hoisted_6$b={class:"text"},_hoisted_7$8={class:"title"},dialogName$1="selectSignTypeDialog",_sfc_main$1L={__name:"SelectSignTypeDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$1)),s=computed(()=>r.getActiveTool),u=computed(()=>r.getDisableDigitalSignature),d=computed(()=>r.getDisableElectronicSignature),f=ref("electronic"),g=v=>{n.setSelectedSignatureField(v),s.value==="addDigitalSign"||!u.value&&d.value?n.openElement("addDigitalFileDialog"):s.value==="addElectronicSign"||u.value&&!d.value?y():n.openElement("selectSignTypeDialog")};core.addEvent("openSelectSignTypeDialog",g);const m=()=>{n.closeElement(dialogName$1),document.body.style.overflow="hidden",f.value==="digital"?n.openElement("addDigitalFileDialog"):y()},y=()=>{n.toggleElement("signCreatePanel"),n.setActiveToolMode("sign"),n.toggleActiveHand(!1),core.switchTool(0),core.switchAnnotationEditorMode(0)};return(v,_)=>{const w=__unplugin_components_0$v,x=__unplugin_components_1$9,k=_sfc_main$37;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1p,[createVNode(k,{show:o.value,dialogName:dialogName$1,close:!0},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button blue",onClick:m},toDisplayString$1(v.$t("signatures.selectTypeDialog.startSigning")),1)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$v,toDisplayString$1(v.$t("signatures.selectTypeDialog.selectType")),1),createBaseVNode("div",_hoisted_3$l,[createBaseVNode("div",{onClick:_[0]||(_[0]=S=>f.value="electronic"),class:"option"},[f.value==="electronic"?(openBlock(),createBlock(w,{key:0})):(openBlock(),createBlock(x,{key:1})),createBaseVNode("div",_hoisted_4$h,[createBaseVNode("p",_hoisted_5$d,toDisplayString$1(v.$t("signatures.selectTypeDialog.signWithElectronic")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.selectTypeDialog.signWithElectronicDesc")),1)])]),createBaseVNode("div",{onClick:_[1]||(_[1]=S=>f.value="digital"),class:"option"},[f.value==="digital"?(openBlock(),createBlock(w,{key:0})):(openBlock(),createBlock(x,{key:1})),createBaseVNode("div",_hoisted_6$b,[createBaseVNode("p",_hoisted_7$8,toDisplayString$1(v.$t("signatures.selectTypeDialog.signWithDigital")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.selectTypeDialog.signWithDigitalDesc")),1)])])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},PreventDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1o={key:0,class:"edit-dialog"},_hoisted_2$u={class:"edit"},_hoisted_3$k={class:"close"},_hoisted_4$g={class:"warning"},_hoisted_5$c={class:"title"},_hoisted_6$a={class:"des"},_sfc_main$1K={__name:"PreventDialog",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("contentEditorPreventDialog")),o=computed(()=>n.isElementOpen("docEditorPreventDialog")),s=()=>n.closeElement(r.value?"contentEditorPreventDialog":"docEditorPreventDialog");return(u,d)=>{const f=__unplugin_components_13$3,g=__unplugin_components_2$b;return r.value||o.value?(openBlock(),createElementBlock("div",_hoisted_1$1o,[createBaseVNode("div",_hoisted_2$u,[createBaseVNode("div",_hoisted_3$k,[createVNode(f,{onClick:s})]),createBaseVNode("div",_hoisted_4$g,[createVNode(g)]),createBaseVNode("div",_hoisted_5$c,toDisplayString$1(u.$t("prevent.title")),1),createBaseVNode("div",_hoisted_6$a,toDisplayString$1(r.value?u.$t("prevent.description"):u.$t("prevent.description1")),1),createBaseVNode("div",{class:"button",onClick:s},toDisplayString$1(u.$t("ok")),1)])])):createCommentVNode("",!0)}}},SettingsDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1n={class:"settings-popup"},_hoisted_2$t={class:"title"},_hoisted_3$j={class:"container"},_hoisted_4$f={class:"info"},_hoisted_5$b={class:"row"},_hoisted_6$9={class:"row"},_hoisted_7$7={class:"row"},_hoisted_8$6={class:"select-box"},_hoisted_9$5={class:"row"},_hoisted_10$3={class:"controller"},_hoisted_11$3={class:"row"},_hoisted_12$3={class:"controller"},_hoisted_13$3={class:"row"},_hoisted_14$3={class:"controller"},_hoisted_15$3={class:"title"},_hoisted_16$3={class:"version row"},_sfc_main$1J={__name:"SettingsDialog",setup(e){const{locale:n}=useI18n(),r=useViewerStore(),o=useDocumentStore(),s=ref(o.getAuthor),u=ref(o.getAnnotator),d=computed(()=>r.isElementOpen("settingsDialog")),f=computed(()=>o.getAuthor),g=computed(()=>o.getAnnotator),m=ref(n.value),y=ref(!0),v=ref(!0),_=ref(!1),w=ref(!1);watch(()=>d.value,(S,M)=>{S&&(y.value=o.getHighlightLink,v.value=o.getHighlightForm,_.value=!1)}),watch(f,(S,M)=>{s.value=S}),watch(g,(S,M)=>{u.value=S}),watch(w,S=>{S?core.enableFillConsecutively():core.disableFillConsecutively(),_.value=!0}),watch([s,u,m,y,v],(S,M)=>{S[0]!==o.getAuthor||S[1]!==o.getAnnotator||S[2]!==n.value||S[3]!==o.getHighlightLink||S[4]!==o.getHighlightForm?_.value=!0:_.value=!1});const x=()=>{r.closeElement("settingsDialog"),m.value=n.value},k=()=>{n.value=m.value,window.localStorage.setItem("language",m.value),r.closeElement("settingsDialog"),o.setAuthor(s.value?s.value:"ComPDFKit"),o.setAnnotator(u.value?u.value:"Guest"),o.setHighlightLink(y.value),o.setHighlightForm(v.value)};return(S,M)=>{const E=__unplugin_components_0$z,P=_sfc_main$37;return openBlock(),createElementBlock("div",_hoisted_1$1n,[createVNode(P,{show:d.value},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:x},toDisplayString$1(S.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!_.value}]),onClick:k},toDisplayString$1(S.$t("documentEditor.save")),3)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$t,toDisplayString$1(S.$t("header.settings.settings")),1),createBaseVNode("div",_hoisted_3$j,[createBaseVNode("div",_hoisted_4$f,[createBaseVNode("div",_hoisted_5$b,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.author")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:"ComPDFKit","onUpdate:modelValue":M[0]||(M[0]=T=>s.value=T),name:"settings"},null,512),[[vModelText,s.value]])]),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.annotator")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:"Guest","onUpdate:modelValue":M[1]||(M[1]=T=>u.value=T),name:"settings"},null,512),[[vModelText,u.value]])]),createBaseVNode("div",_hoisted_7$7,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.language")),1),createBaseVNode("div",_hoisted_8$6,[withDirectives(createBaseVNode("select",{name:"language","onUpdate:modelValue":M[2]||(M[2]=T=>m.value=T)},M[6]||(M[6]=[createBaseVNode("option",{value:"en"},"English",-1),createBaseVNode("option",{value:"zh-CN"},"\u7B80\u4F53\u4E2D\u6587",-1),createBaseVNode("option",{value:"zh-TW"},"\u7E41\u9AD4\u4E2D\u6587",-1),createBaseVNode("option",{value:"fr"},"Fran\xE7ais",-1),createBaseVNode("option",{value:"ja"},"\u65E5\u672C\u8A9E",-1),createBaseVNode("option",{value:"th"},"\u0E44\u0E17\u0E22",-1)]),512),[[vModelSelect,m.value]]),createVNode(E)])])]),createBaseVNode("div",_hoisted_9$5,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.highlightLink")),1),createBaseVNode("div",_hoisted_10$3,[createVNode(unref(NSwitch),{value:y.value,"onUpdate:value":M[3]||(M[3]=T=>y.value=T)},null,8,["value"])])]),createBaseVNode("div",_hoisted_11$3,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.highlightForm")),1),createBaseVNode("div",_hoisted_12$3,[createVNode(unref(NSwitch),{value:v.value,"onUpdate:value":M[4]||(M[4]=T=>v.value=T)},null,8,["value"])])]),createBaseVNode("div",_hoisted_13$3,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.fillConsecutively")),1),createBaseVNode("div",_hoisted_14$3,[createVNode(unref(NSwitch),{value:w.value,"onUpdate:value":M[5]||(M[5]=T=>w.value=T)},null,8,["value"])])])]),createBaseVNode("p",_hoisted_15$3,toDisplayString$1(S.$t("header.settings.creationInfo")),1),createBaseVNode("div",_hoisted_16$3,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.version")),1),M[7]||(M[7]=createBaseVNode("span",null,"2.7.0",-1))])]),_:1},8,["show"])])}}},_sfc_main$1I={},_hoisted_1$1m={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$R(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1m,n[0]||(n[0]=[createBaseVNode("path",{d:"M13 1L1 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),createBaseVNode("path",{d:"M1 1L13 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_0$g=_export_sfc(_sfc_main$1I,[["render",_sfc_render$R]]),ModalContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1l={className:"modal-container"},_hoisted_2$s={className:"wrapper"},_hoisted_3$i={className:"header-container"},_hoisted_4$e={class:"title"},_sfc_main$1H={__name:"ModalContainer",props:["title","onCloseClick"],setup(e){return(n,r)=>{const o=__unplugin_components_0$g,s=_sfc_main$3O;return openBlock(),createElementBlock("div",_hoisted_1$1l,[createBaseVNode("div",_hoisted_2$s,[createBaseVNode("div",_hoisted_3$i,[createBaseVNode("span",_hoisted_4$e,toDisplayString$1(e.title),1),createVNode(s,{className:"close-button",onClick:e.onCloseClick},{default:withCtx(()=>[createVNode(o)]),_:1},8,["onClick"])]),renderSlot(n.$slots,"default")])])}}},_sfc_main$1G={},_hoisted_1$1k={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$Q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1k,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3033 12.5962L3.40381 2.69666L2.6967 3.40376L12.5962 13.3033L13.3033 12.5962ZM2 7.99996C2 7.99996 2.69777 6.96095 3.82074 5.94202L9.58576 11.707C9.08063 11.8902 8.54892 12 8 12C4.68629 12 2 7.99996 2 7.99996ZM14 7.99996C14 7.99996 13.3022 9.03896 12.1793 10.0579L6.41424 4.29288C6.91937 4.10972 7.45108 3.99996 8 3.99996C11.3137 3.99996 14 7.99996 14 7.99996Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$5=_export_sfc(_sfc_main$1G,[["render",_sfc_render$Q]]),_sfc_main$1F={},_hoisted_1$1j={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$P(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1j,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 12C11.3137 12 14 8 14 8C14 8 11.3137 4 8 4C4.68629 4 2 8 2 8C2 8 4.68629 12 8 12ZM8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$6=_export_sfc(_sfc_main$1F,[["render",_sfc_render$P]]),_sfc_main$1E={},_hoisted_1$1i={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$O(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1i,n[0]||(n[0]=[createBaseVNode("path",{d:"M32.5 19.2321V13.1607C32.5 8.46629 28.6944 4.66071 24 4.66071V4.66071C19.3056 4.66071 15.5 8.46628 15.5 13.1607V19.2321",stroke:"#93B9FD","stroke-width":"4"},null,-1),createBaseVNode("rect",{x:"7",y:"16.8036",width:"34",height:"26.7143",rx:"2",fill:"currentColor"},null,-1),createBaseVNode("rect",{x:"15",y:"28",width:"18",height:"3",fill:"white"},null,-1)]))}const __unplugin_components_2$8=_export_sfc(_sfc_main$1E,[["render",_sfc_render$O]]),MessageSuccess=""+new URL("icon-message-success.c9ccee05.svg",import.meta.url).href,SetPassword_vue_vue_type_style_index_0_lang="",_hoisted_1$1h={class:"password-container"},_hoisted_2$r={class:"password-title"},_hoisted_3$h={class:"input-container"},_hoisted_4$d=["type","placeholder"],_hoisted_5$a={class:"wrong-password"},_hoisted_6$8={class:"note"},_sfc_main$1D={__name:"SetPassword",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=ref(!1),s=ref(""),u=ref(!1),d=ref(!1),f=computed(()=>r.isElementOpen("setPasswordModal"));watch(()=>s.value,(v,_)=>{v&&(v=v.replace(/\s/g,""),v=v.replace(/[^a-zA-Z0-9!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/,""),v=v.replace(/[\u4e00-\u9fa5\uFE30-\uFFA0]/,""),s.value=v),v.length&&(d.value=!1)});const g=()=>{r.closeElement("setPasswordModal"),o.value=!1,s.value="",d.value=!1},m=async()=>{if(!s.value.length||u.value)return;if(y())d.value=!1;else{d.value=!0;return}u.value=!0;const v=await core.setPassword(s.value);g(),v?window.$message.success(n.$t("passwordDialog.setPwdSuccess"),{duration:3e3,icon:()=>h$1("img",{src:MessageSuccess})}):window.$message.error(n.$t("passwordDialog.setPwdFailure"),{duration:3e3,icon:()=>h$1("img",{src:MessageError})}),u.value=!1},y=()=>/^(?=.*[a-zA-Z]+$|.*\d+$|.*[@$!%*?&]+$)[a-zA-Z\d@$!%*?&]{1,20}$/.test(s.value);return(v,_)=>{const w=__unplugin_components_2$8,x=__unplugin_components_3$6,k=__unplugin_components_4$5,S=_sfc_main$1H;return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1h,[createVNode(S,{onCloseClick:g},{default:withCtx(()=>[createVNode(w,{class:"lock-icon"}),createBaseVNode("div",_hoisted_2$r,toDisplayString$1(v.$t("passwordDialog.encryptPdf")),1),createBaseVNode("div",_hoisted_3$h,[withDirectives(createBaseVNode("input",{type:o.value?"text":"password",name:"password","onUpdate:modelValue":_[0]||(_[0]=M=>s.value=M),maxlength:"20",placeholder:v.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_4$d),[[vModelDynamic,s.value]]),createBaseVNode("span",{class:"eye-btn",onClick:_[1]||(_[1]=M=>o.value=!o.value)},[o.value?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1}))])]),withDirectives(createBaseVNode("div",_hoisted_5$a,[createBaseVNode("p",null,toDisplayString$1(v.$t("passwordDialog.supportTip")),1)],512),[[vShow,d.value]]),createBaseVNode("span",{class:normalizeClass(["set-btn",{disabled:!s.value}]),onClick:m},toDisplayString$1(v.$t("passwordDialog.encrypt")),3),createBaseVNode("div",_hoisted_6$8,[createBaseVNode("p",null,toDisplayString$1(v.$t("passwordDialog.note[0]")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("passwordDialog.note[1]")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("passwordDialog.note[2]")),1)])]),_:1})],512)),[[vShow,f.value]])}}},EnterPassword_vue_vue_type_style_index_0_lang="",_hoisted_1$1g={id:"passwordDialog",class:"password-dialog"},_hoisted_2$q={class:"password-container"},_hoisted_3$g={class:"modal-container"},_hoisted_4$c={class:"wrapper"},_hoisted_5$9={class:"header-container"},_hoisted_6$7={class:"password-title"},_hoisted_7$6={class:"input-container"},_hoisted_8$5=["type","placeholder"],_hoisted_9$4={class:"set-btn",id:"passwordSubmit"},_sfc_main$1C={__name:"EnterPassword",setup(e){const n=ref(!1),r=o=>{o.param===!0||o.param===!1?n.value=o.param:n.value=!n.value};return(o,s)=>{const u=__unplugin_components_0$g,d=_sfc_main$3O,f=__unplugin_components_2$8,g=__unplugin_components_3$6,m=__unplugin_components_4$5;return openBlock(),createElementBlock("div",_hoisted_1$1g,[createBaseVNode("div",_hoisted_2$q,[createBaseVNode("div",_hoisted_3$g,[createBaseVNode("div",_hoisted_4$c,[createBaseVNode("div",_hoisted_5$9,[s[0]||(s[0]=createBaseVNode("span",{class:"title"},null,-1)),createVNode(d,{class:"close-button",id:"passwordCancel"},{default:withCtx(()=>[createVNode(u)]),_:1})]),createVNode(f,{class:"lock-icon"}),createBaseVNode("div",_hoisted_6$7,toDisplayString$1(o.$t("passwordDialog.enterPwd")),1),createBaseVNode("div",_hoisted_7$6,[createBaseVNode("input",{id:"password",type:n.value?"text":"password",name:"password",placeholder:o.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_8$5),createBaseVNode("span",{class:"eye-btn",id:"eyeVisible",onClick:r},[n.value?(openBlock(),createBlock(g,{key:0})):(openBlock(),createBlock(m,{key:1}))])]),s[1]||(s[1]=createBaseVNode("div",{class:"wrong-password",id:"passwordText"},null,-1)),createBaseVNode("span",_hoisted_9$4,toDisplayString$1(o.$t("ok")),1)])])])])}}},_sfc_main$1B={},_hoisted_1$1f={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$N(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1f,n[0]||(n[0]=[createBaseVNode("path",{d:"M7 4.07123L13 10.071L7 16.0709",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_14$1=_export_sfc(_sfc_main$1B,[["render",_sfc_render$N]]),_sfc_main$1A={},_hoisted_1$1e={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$M(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1e,n[0]||(n[0]=[createBaseVNode("path",{d:"M13 4.07123L7 10.071L13 16.0709",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_0$f=_export_sfc(_sfc_main$1A,[["render",_sfc_render$M]]),PageNavOverlay_vue_vue_type_style_index_0_lang="",_hoisted_1$1d={key:0,class:"page-nav","data-element":"pageNavOverlay"},_hoisted_2$p={class:"form-container"},_sfc_main$1z={__name:"PageNavOverlay",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=ref(n.getCurrentPage);effect(()=>o.value=n.getCurrentPage);const s=computed(()=>n.getFullMode),u=computed(()=>n.getCurrentPage===1),d=computed(()=>r.getTotalPages),f=computed(()=>d.value===n.getCurrentPage);watch(o,(v,_)=>{v!==""&&d.value!==0&&(v>d.value||v<=0)&&(o.value=_)});const g=()=>{core.previousPage()&&n.setCurrentPage(core.getCurrentPage())},m=()=>{core.nextPage()&&n.setCurrentPage(core.getCurrentPage())},y=v=>{if(v.target.blur(),!v.target.value){o.value=n.getCurrentPage;return}core.pageNumberChanged(v.target)};return(v,_)=>{const w=__unplugin_components_0$f,x=_sfc_main$3O,k=__unplugin_components_14$1;return d.value>0&&!s.value?(openBlock(),createElementBlock("div",_hoisted_1$1d,[createVNode(x,{className:"side-arrow-container",img:"icon-previous-left",title:u.value?null:v.$t("previousPage"),onClick:g,disabled:u.value},{default:withCtx(()=>[createVNode(w)]),_:1},8,["title","disabled"]),createBaseVNode("div",_hoisted_2$p,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":_[0]||(_[0]=S=>o.value=S),onInput:_[1]||(_[1]=(...S)=>v.onChange&&v.onChange(...S)),onBlur:y,onKeydown:withKeys(y,["enter"]),tabIndex:"-1",style:normalizeStyle({width:o.value.toString().length*8+2+"px"}),pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",name:"page-nav"},null,36),[[vModelText,o.value]]),createBaseVNode("span",null,toDisplayString$1(`/${d.value}`),1)]),createVNode(x,{className:"side-arrow-container",img:"icon-next-right",title:f.value?null:v.$t("nextPage"),onClick:m,disabled:f.value},{default:withCtx(()=>[createVNode(k)]),_:1},8,["title","disabled"])])):createCommentVNode("",!0)}}},DocumentContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1c=["innerHTML"],_hoisted_2$o={class:"loading"},_hoisted_3$f={class:"upload-container"},_hoisted_4$b={for:"fileInput"},_sfc_main$1y={__name:"DocumentContainer",props:["isHeaderDisabled"],setup(e){const{loadDocument:n,initializeViewer:r,initConfig:o,getDocumentViewer:s}=core,u=ref(),d=ref(),f=useViewerStore(),g=useDocumentStore(),m=computed(()=>f.getCustomLoading),y=computed(()=>f.getActiveHand),v=computed(()=>f.getDisableSignatureTool),_=computed(()=>f.isElementOpen("leftPanel")),w=computed(()=>isMobileDevice?0:_.value?260:0),x=computed(()=>isMobileDevice?0:f.isElementOpen("rightPanel")||f.isElementOpen("pageModePanel")||f.isElementOpen("stampPanel")||f.isElementOpen("linkPanel")||f.isElementOpen("contentEditorPanel")||f.isElementOpen("colorSeparationPanel")||f.isElementOpen("measurePanel")?260:0),k=computed(()=>f.getToolMode),S=computed(()=>f.getCompareStatus),M=computed(()=>e.isHeaderDisabled||["view","document","separation"].includes(f.getToolMode)||k.value==="compare"&&S.value!=="finished"?0:["redaction","remove"].includes(F.value)?window.innerWidth>500?44+48:44+88:k.value==="sign"&&v.value?0:N.value&&k.value==="sign"?44+44:44),E=computed(()=>f.getUploadLoading&&f.getUpload),P=computed(()=>f.getActiveElementTab("leftPanel")),T=computed(()=>f.getUpload),D=computed(()=>f.getDisabledElements("pageNavOverlay")),F=computed(()=>g.getActiveTool),I=computed(()=>f.getScale),N=computed(()=>f.getSignatureVerify),q=computed(()=>f.getCommonLoading),Y=computed(()=>f.getVerified);let Z=100,j=0;const ne=getHashParameters("d","");function le(){if(!isMobileDevice)return;const H=50,X=2,Q=I.value<Z+X*H?I.value+H:Z;f.setCurrentScale(Q/100),core.scaleChanged(Q/100)}function J(H){const X=u.value.querySelector(".page-nav");if(H.target.nodeName==="A"||(X==null?void 0:X.contains(H.target)))return;const Q=new Date().getTime();Q-j<300&&le(),j=Q}async function O(H){const X=H.target.files[0];if(!X)return;_.value&&f.closeElement("leftPanel"),f.$patch({fullMode:!1,currentPage:0,scale:"",themeMode:"Light",pageMode:0,scrollMode:"Vertical",activeTab:0,searchStatus:!1,activeElements:{leftPanel:!1,rightPanel:!1,pageModePanel:!1},activeElementsTab:{leftPanel:"THUMBS",rightPanel:"GENERAL"},signatureVerify:0}),g.resetSetting(),core.clearSearchResults(),g.setToolState(""),f.setActiveToolMode("view"),f.setUploadLoading(!0);let Q=X.name;f.setUpload(!0);let fe=URL.createObjectURL(X);await W(fe,{filename:Q}),f.setUploadLoading(!1),URL.revokeObjectURL(fe)}const U=computed(()=>g.getLoadingProgress);async function W(H,{filename:X=null,password:Q=""}){const fe={extension:getHashParameters("extension",null),filename:getHashParameters("filename",null)||X,externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:g.setLoadingProgress,pageChangedCallback:f.setCurrentPage,scaleChangedCallback:f.setCurrentScale,annotationsNumChangedCallback:g.setAnnotationsCount,distanceChangedCallback:g.setDistance,password:Q};try{const $e=await n(H,fe);if(!$e||!$e.verified)return;Y.value||(f.setVerified($e.verified),f.setLicense(s()._license));const{pwd:Ie}=$e;g.setFileHasPwd(!!Ie),g.setPassword(Ie),g.setCurrentPdfData(H,fe),g.setOutline(core.getOutlines())}catch($e){if(console.log($e),$e==="invalid_file_error"||$e==="no_password_given"||$e==="incorrect_password"){f.setUpload(!1),f.resetSetting();const Ie=document.getElementById("fileInput");Ie.value="",g.setCurrentPdfData();return}}const Se=core.getPagesCount(),Pe=core.getScale();g.setTotalPages(Se),f.setCurrentPage(1),f.setCurrentScale(Pe),Z=Math.round(Pe*100)}return window.instance.initOptions=async H=>{f.setUpload(!0),f.setUploadLoading(!0),await o(H),!ne&&!H.initialDoc&&(f.setUpload(!1),f.setUploadLoading(!1)),H.renderLayerPermission||f.setDisabledElements("layers");const X=H&&H.webviewerServer?H.webviewerServer:"Standalone";f.setWebviewerMode(X);const Q=Ne=>{Ne!==k.value&&f.setActiveToolMode(Ne)};core.addEvent("toolModeChanged",Q);const fe=({tool:Ne})=>{g.setActiveTool(Ne)};core.addEvent("toolChanged",fe);const Se=document.querySelector(".thumbnail-view"),Pe=document.querySelector(".annotation-view"),$e=document.querySelector(".outline-view"),Ie=document.querySelector(".findbar-view");r({container:u.value,viewer:d.value,thumbnailView:Se,outlineView:$e,annotationView:Pe,findbarView:Ie,toggleButton:document.querySelector(".toggle-button")}),H.autoJumpNextSign&&g.setAutoJumpNextSign(!0),H.disableDigitalSignature&&g.setDisableDigitalSignature(H.disableDigitalSignature),H.disableElectronicSignature&&g.setDisableElectronicSignature(H.disableElectronicSignature),core.addEvent("onPagesUpdated",Ne=>{const{pageNumber:Be}=Ne;g.setOutline(core.getOutlines());const be=core.getPagesCount(),Ve=core.getScale();g.setTotalPages(be),f.setCurrentPage(Be||1),f.setCurrentScale(Ve);const De=f.getScrollMode,ve=f.getPageMode,ye=De==="Vertical"?0:1;core.switchScrollMode(ye),core.switchSpreadMode(ve)})},window.instances.UI.loadDocument=async(H,{filename:X="",password:Q=""}={})=>{if(!H)return;_.value&&f.closeElement("leftPanel"),f.$patch({fullMode:!1,currentPage:0,scale:"",themeMode:"Light",pageMode:0,scrollMode:"Vertical",activeTab:0,searchStatus:!1,activeElements:{leftPanel:!1,rightPanel:!1},activeElementsTab:{leftPanel:"THUMBS",rightPanel:"GENERAL"}}),g.resetSetting(),core.clearSearchResults(),g.setToolState(""),f.setActiveToolMode("view"),f.setUploadLoading(!0),f.setUpload(!0);let fe=typeof H=="string"?H:URL.createObjectURL(H);await W(fe,{filename:H.name||X,password:Q}),f.setUploadLoading(!1)},(H,X)=>{const Q=_sfc_main$1z,fe=_sfc_main$1C,Se=_sfc_main$1D,Pe=_sfc_main$1J,$e=_sfc_main$1K,Ie=_sfc_main$1L,Ne=_sfc_main$1M,Be=_sfc_main$1P,be=_sfc_main$1T,Ve=_sfc_main$1W,De=_sfc_main$1X,ve=_sfc_main$1Y,ye=__unplugin_components_12$3,we=_sfc_main$1Z,ke=_sfc_main$22,Me=_sfc_main$24,Le=_sfc_main$26,Fe=_sfc_main$27,ze=_sfc_main$28,te=_sfc_main$2d,oe=__unplugin_components_20$1;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{ref_key:"mainContainer",ref:u,class:normalizeClass(["document-container",{"no-select":y.value,under:k.value==="compare"&&S.value!=="finished"||k.value==="document","no-touch":["selectText","highlight","underline","squiggly","strikeout"].includes(F.value),redact:["redaction","remove"].includes(F.value)}]),style:normalizeStyle({width:`calc(100% - ${w.value}px - ${x.value}px)`,"margin-left":`${w.value}px`,"margin-right":`${x.value}px`,"margin-top":`${M.value}px`,top:e.isHeaderDisabled?"0px":"44px"}),onDblclick:le,onClick:J},[createBaseVNode("div",{ref_key:"viewerContainer",ref:d,class:"document"},null,512),D.value?createCommentVNode("",!0):(openBlock(),createBlock(Q,{key:0,style:normalizeStyle({left:`calc(50% + ${w.value/2}px - ${x.value/2}px)`})},null,8,["style"]))],38),createVNode(fe),X[0]||(X[0]=createStaticVNode('<div id="printServiceDialog" class="print-dialog"><div class="print-container"><div class="print-title">Preparing document for printing\u2026</div><div class="print-progress"><progress value="0" max="100"></progress><span class="relative-progress">0%</span></div></div></div>',1)),createVNode(Se),createVNode(Pe),createVNode($e),createVNode(Ie),createVNode(Ne),createVNode(Be),createVNode(be),createVNode(Ve),createVNode(De),createVNode(ve),E.value&&U.value<100?(openBlock(),createElementBlock("div",{key:0,class:"loading-state",innerHTML:m.value?m.value.element:`${H.$t("loading")}...`,style:normalizeStyle(m.value&&m.value.styles?m.value.styles:"")},null,12,_hoisted_1$1c)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["mask",{active:q.value}])},[withDirectives(createBaseVNode("div",_hoisted_2$o,[createVNode(ye)],512),[[vShow,q.value]])],2),withDirectives(createBaseVNode("div",_hoisted_3$f,[createBaseVNode("input",{id:"fileInput",type:"file",accept:".pdf",onChange:O,name:"document"},null,32),createBaseVNode("label",_hoisted_4$b,toDisplayString$1(H.$t("upload")),1)],512),[[vShow,!T.value&&P.value!=="COMPARISON"&&["compare","view"].includes(k.value)]]),createVNode(we),createVNode(ke),createVNode(Me),createVNode(Le),createVNode(Fe),createVNode(ze),createVNode(te),createVNode(oe)],64)}}},SearchItem_vue_vue_type_style_index_0_lang="",_hoisted_1$1b={key:0,class:"page-title"},_hoisted_2$n=["innerHTML"],_sfc_main$1x={__name:"SearchItem",props:["searchResults","result","currentIndex"],setup(e){const n=e.currentIndex===0?e.currentIndex:e.currentIndex-1,r=e.searchResults[e.currentIndex],o=e.searchResults[n],s=o===r,u=o.pageNum!==r.pageNum,d=new RegExp(e.result.searchValue,"gi"),f=e.result.content.replace(d,function(g,m){return`<span class="highlight">${g}</span>`});return(g,m)=>(openBlock(),createElementBlock(Fragment,null,[s||u?(openBlock(),createElementBlock("div",_hoisted_1$1b,toDisplayString$1(e.result.pageNum),1)):createCommentVNode("",!0),createBaseVNode("div",{class:"item-content",innerHTML:unref(f)},null,8,_hoisted_2$n)],64))}},SearchContent_vue_vue_type_style_index_0_lang="",_hoisted_1$1a={class:"search-number"},_hoisted_2$m={class:"search-container"},_hoisted_3$e={key:1,class:"no-annotations"},_sfc_main$1w={__name:"SearchContent",setup(e){const n=useDocumentStore(),r=computed(()=>n.getSearchResults);return(o,s)=>{const u=_sfc_main$1x;return openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",_hoisted_1$1a,[s[0]||(s[0]=createBaseVNode("div",{id:"findResultsCount",class:"toolbarLabel"},null,-1)),createBaseVNode("div",null,toDisplayString$1(o.$t("leftPanel.page")),1)],512),[[vShow,r.value.length]]),createBaseVNode("div",_hoisted_2$m,[r.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(r.value,(d,f)=>(openBlock(),createBlock(u,{key:d,searchResults:r.value,result:d,currentIndex:f},null,8,["searchResults","result","currentIndex"]))),128)):(openBlock(),createElementBlock("div",_hoisted_3$e,toDisplayString$1(o.$t("leftPanel.noResults")),1))])],64)}}};var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(e,n,r){var o,s,u,d,f,g,m=0,y=!1,v=!1,_=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);n=toNumber(n)||0,isObject$1(r)&&(y=!!r.leading,v="maxWait"in r,u=v?nativeMax(toNumber(r.maxWait)||0,n):u,_="trailing"in r?!!r.trailing:_);function w(F){var I=o,N=s;return o=s=void 0,m=F,d=e.apply(N,I),d}function x(F){return m=F,f=setTimeout(M,n),y?w(F):d}function k(F){var I=F-g,N=F-m,q=n-I;return v?nativeMin(q,u-N):q}function S(F){var I=F-g,N=F-m;return g===void 0||I>=n||I<0||v&&N>=u}function M(){var F=now();if(S(F))return E(F);f=setTimeout(M,k(F))}function E(F){return f=void 0,_&&o?w(F):(o=s=void 0,d)}function P(){f!==void 0&&clearTimeout(f),m=0,o=g=s=f=void 0}function T(){return f===void 0?d:E(now())}function D(){var F=now(),I=S(F);if(o=arguments,s=this,g=F,I){if(f===void 0)return x(g);if(v)return f=setTimeout(M,n),w(g)}return f===void 0&&(f=setTimeout(M,n)),d}return D.cancel=P,D.flush=T,D}function isObject$1(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$1(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce;const SearchHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$19={id:"findbarInputContainer",class:"findbar-input-container"},_hoisted_2$l={class:"input-container"},_hoisted_3$d=["placeholder"],_hoisted_4$a={class:"button-container"},waitTime=200,_sfc_main$1v={__name:"SearchHeader",setup(e){const n=ref(!1),r=ref(""),o=useDocumentStore(),s=useViewerStore(),u=ref([]),d=ref(0),f=()=>{const x=u.value,k=d.value;if(x.length>0){const S=k<=0?x.length-1:k-1;core.setActiveSearchResult(toRaw(x[S]),S),d.value=S}},g=()=>{const x=u.value,k=d.value;if(x.length>0){const S=k===x.length-1?0:k+1;core.setActiveSearchResult(toRaw(x[S]),S),d.value=S}},m=()=>{n.value=!1,r.value="",o.setSearchResults([]),core.clearSearchResults(),u.value=[]},y=lodash_debounce(async x=>{if(x&&x.length>0){n.value=!0;const k=await core.search(x);o.setSearchResults(k),u.value=k}else m()},waitTime),v=x=>{y(x)};watch(r,()=>{v(r.value),d.value=0});const _=computed(()=>s.getActiveElementTab("leftPanel")),w=computed(()=>s.isElementOpen("leftPanel"));return watch([_,w],()=>{(_.value!=="SEARCH"||!w.value)&&(core.clearSearchResults(),r.value="",d.value=0)}),(x,k)=>{const S=__unplugin_components_0$y,M=__unplugin_components_0$f,E=_sfc_main$3O,P=__unplugin_components_14$1;return openBlock(),createElementBlock("div",{id:"findbar",class:normalizeClass(["findbar",{mobile:unref(isMobileDevice)}])},[createBaseVNode("div",_hoisted_1$19,[createBaseVNode("div",_hoisted_2$l,[withDirectives(createBaseVNode("input",{type:"text",autocomplete:"off",placeholder:x.$t("leftPanel.searchPdf"),"onUpdate:modelValue":k[0]||(k[0]=T=>r.value=T),name:"search"},null,8,_hoisted_3$d),[[vModelText,r.value]]),createVNode(S,{id:"emptyInput",class:normalizeClass(["empty-input",!r.value&&"hidden"]),onClick:m},null,8,["class"])]),createBaseVNode("div",_hoisted_4$a,[createVNode(E,{img:"icon-previous-left",id:"findPrevious",class:normalizeClass(["toolbarButton",!u.value.length&&"disabled"]),title:x.$t("leftPanel.previousPhrase"),onClick:f},{default:withCtx(()=>[createVNode(M)]),_:1},8,["class","title"]),createVNode(E,{img:"icon-next-right",id:"findNext",class:normalizeClass(["toolbarButton",!u.value.length&&"disabled"]),title:x.$t("leftPanel.nextPhrase"),onClick:g},{default:withCtx(()=>[createVNode(P)]),_:1},8,["class","title"])])])],2)}}},_sfc_main$1u={};function _sfc_render$L(e,n){const r=_sfc_main$1v,o=_sfc_main$1w;return openBlock(),createElementBlock(Fragment,null,[createVNode(r),createVNode(o)],64)}const __unplugin_components_7=_export_sfc(_sfc_main$1u,[["render",_sfc_render$L]]),_sfc_main$1t={},_hoisted_1$18={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$K(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$18,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 6C11 6.55228 10.5523 7 10 7C9.44772 7 9 6.55228 9 6C9 5.44772 9.44772 5 10 5C10.5523 5 11 5.44772 11 6ZM11 10C11 10.5523 10.5523 11 10 11C9.44772 11 9 10.5523 9 10C9 9.44772 9.44772 9 10 9C10.5523 9 11 9.44772 11 10ZM10 15C10.5523 15 11 14.5523 11 14C11 13.4477 10.5523 13 10 13C9.44772 13 9 13.4477 9 14C9 14.5523 9.44772 15 10 15Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$4=_export_sfc(_sfc_main$1t,[["render",_sfc_render$K]]),SignatureContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$17={class:"container"},_hoisted_2$k={class:"signature-title"},_hoisted_3$c={key:0,class:"signatures"},_hoisted_4$9=["onClick"],_hoisted_5$8=["title"],_hoisted_6$6={class:"drop-down medium"},_hoisted_7$5={key:1,class:"no-signatures"},_sfc_main$1s={__name:"SignatureContainer",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getSignatures),s=computed(()=>r.getSelectedSignature),u=ref(!1),d=v=>{r.initSignatures(v)};core.addEvent("getSignatures",d);const f=v=>{v<0||core.pageNumberChanged({value:(v*1+1).toString()})},g=()=>{u.value=!1,r.setSelectedSignature(null)},m=v=>{u.value=!1,n.openElement(v)},y=(v,_)=>{u.value=!0,v.index=_,r.setSelectedSignature(v)};return(v,_)=>{const w=__unplugin_components_0$h,x=__unplugin_components_1$3,k=__unplugin_components_2$9,S=__unplugin_components_4$4,M=_sfc_main$3O;return openBlock(),createElementBlock("div",_hoisted_1$17,[createBaseVNode("div",_hoisted_2$k,toDisplayString$1(v.$t("leftPanel.signatureList")),1),o.value.length?(openBlock(),createElementBlock("div",_hoisted_3$c,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(E,P)=>(openBlock(),createElementBlock("div",{key:P,class:normalizeClass(["signature",{focus:s.value&&s.value.index===E.index}]),onClick:T=>f(E.pageIndex)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(E.signerList,(T,D)=>{var F;return openBlock(),createElementBlock(Fragment,null,[T.isCertTrusted&&T.isSignVerified?(openBlock(),createBlock(w,{key:0})):T.isCertTrusted||T.isSignVerified?(openBlock(),createBlock(x,{key:1})):(openBlock(),createBlock(k,{key:2})),createBaseVNode("span",{title:E.name},toDisplayString$1((T.certificateList[0].subject.CN?T.certificateList[0].subject.CN:"")+"'s signature"),9,_hoisted_5$8),createVNode(unref(NPopover),{placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,show:((F=s.value)==null?void 0:F.index)===P&&u.value,onClickoutside:g},{trigger:withCtx(()=>[createVNode(M,{class:"more",onClick:withModifiers(I=>y(E,P),["stop"])},{default:withCtx(()=>[createVNode(S)]),_:2},1032,["onClick"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_6$6,[createBaseVNode("div",{class:"drop-item",onClick:_[0]||(_[0]=I=>m("signatureDetailsDialog"))},toDisplayString$1(v.$t("leftPanel.signatureDetails")),1),createBaseVNode("div",{class:"drop-item",onClick:_[1]||(_[1]=I=>m("certificateViewerDialog"))},toDisplayString$1(v.$t("leftPanel.certificationDetails")),1),createBaseVNode("div",{class:"drop-item",onClick:_[2]||(_[2]=I=>m("deleteConfirmDialog"))},toDisplayString$1(v.$t("delete")),1)])]),_:2},1032,["show"])],64)}),256))],10,_hoisted_4$9))),128))])):(openBlock(),createElementBlock("div",_hoisted_7$5,toDisplayString$1(v.$t("leftPanel.noSignatures")),1))])}}},Icon_vue_vue_type_style_index_0_lang="",_hoisted_1$16=["xlink:href"],_sfc_main$1r={__name:"Icon",props:["className","color","glyph","fillColor","strokeColor","disabled"],setup(e){const n=e,r={filter:n.color};n.disabled||(r.color=n.color);const o=computed(()=>`#${n.glyph}`);return(s,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["icon",[e.className,{disabled:e.disabled}]]),style:r},[(openBlock(),createElementBlock("svg",mergeProps({class:"svg-icon","aria-hidden":"true"},toHandlers(s.$attrs,!0)),[createBaseVNode("use",{"xlink:href":o.value},null,8,_hoisted_1$16)],16))],2))}};var _a;const isClient=typeof window<"u",isString$1=e=>typeof e=="string";isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():unref(e)}function promiseTimeout(e,n=!1,r="Timeout"){return new Promise((o,s)=>{setTimeout(n?()=>s(r):o,e)})}function createUntil(e,n=!1){function r(v,{flush:_="sync",deep:w=!1,timeout:x,throwOnTimeout:k}={}){let S=null;const E=[new Promise(P=>{S=watch(e,T=>{v(T)!==n&&(S==null||S(),P(T))},{flush:_,deep:w,immediate:!0})})];return x!=null&&E.push(promiseTimeout(x,k).then(()=>resolveUnref(e)).finally(()=>S==null?void 0:S())),Promise.race(E)}function o(v,_){if(!isRef(v))return r(T=>T===v,_);const{flush:w="sync",deep:x=!1,timeout:k,throwOnTimeout:S}=_!=null?_:{};let M=null;const P=[new Promise(T=>{M=watch([e,v],([D,F])=>{n!==(D===F)&&(M==null||M(),T(D))},{flush:w,deep:x,immediate:!0})})];return k!=null&&P.push(promiseTimeout(k,S).then(()=>resolveUnref(e)).finally(()=>(M==null||M(),resolveUnref(e)))),Promise.race(P)}function s(v){return r(_=>Boolean(_),v)}function u(v){return o(null,v)}function d(v){return o(void 0,v)}function f(v){return r(Number.isNaN,v)}function g(v,_){return r(w=>{const x=Array.from(w);return x.includes(v)||x.includes(resolveUnref(v))},_)}function m(v){return y(1,v)}function y(v=1,_){let w=-1;return r(()=>(w+=1,w>=v),_)}return Array.isArray(resolveUnref(e))?{toMatch:r,toContains:g,changed:m,changedTimes:y,get not(){return createUntil(e,!n)}}:{toMatch:r,toBe:o,toBeTruthy:s,toBeNull:u,toBeNaN:f,toBeUndefined:d,changed:m,changedTimes:y,get not(){return createUntil(e,!n)}}}function until(e){return createUntil(e)}var axios$3={exports:{}},axios$2={exports:{}},bind$2=function e(n,r){return function(){for(var s=new Array(arguments.length),u=0;u<s.length;u++)s[u]=arguments[u];return n.apply(r,s)}},bind$1=bind$2,toString=Object.prototype.toString,kindOf=function(e){return function(n){var r=toString.call(n);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(e){return e=e.toLowerCase(),function(r){return kindOf(r)===e}}function isArray(e){return Array.isArray(e)}function isUndefined(e){return typeof e>"u"}function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){var n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&isArrayBuffer(e.buffer),n}function isString(e){return typeof e=="string"}function isNumber(e){return typeof e=="number"}function isObject(e){return e!==null&&typeof e=="object"}function isPlainObject(e){if(kindOf(e)!=="object")return!1;var n=Object.getPrototypeOf(e);return n===null||n===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(e){return toString.call(e)==="[object Function]"}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isFormData(e){var n="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||toString.call(e)===n||isFunction(e.toString)&&e.toString()===n)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(e,n){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),isArray(e))for(var r=0,o=e.length;r<o;r++)n.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.call(null,e[s],s,e)}function merge(){var e={};function n(s,u){isPlainObject(e[u])&&isPlainObject(s)?e[u]=merge(e[u],s):isPlainObject(s)?e[u]=merge({},s):isArray(s)?e[u]=s.slice():e[u]=s}for(var r=0,o=arguments.length;r<o;r++)forEach(arguments[r],n);return e}function extend$1(e,n,r){return forEach(n,function(s,u){r&&typeof s=="function"?e[u]=bind$1(s,r):e[u]=s}),e}function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function inherits(e,n,r,o){e.prototype=Object.create(n.prototype,o),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function toFlatObject(e,n,r){var o,s,u,d={};n=n||{};do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)u=o[s],d[u]||(n[u]=e[u],d[u]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,n))&&e!==Object.prototype);return n}function endsWith(e,n,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=n.length;var o=e.indexOf(n,r);return o!==-1&&o===r}function toArray(e){if(!e)return null;var n=e.length;if(isUndefined(n))return null;for(var r=new Array(n);n-- >0;)r[n]=e[n];return r}var isTypedArray=function(e){return function(n){return e&&n instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$b={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$a=utils$b;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function e(n,r,o){if(!r)return n;var s;if(o)s=o(r);else if(utils$a.isURLSearchParams(r))s=r.toString();else{var u=[];utils$a.forEach(r,function(g,m){g===null||typeof g>"u"||(utils$a.isArray(g)?m=m+"[]":g=[g],utils$a.forEach(g,function(v){utils$a.isDate(v)?v=v.toISOString():utils$a.isObject(v)&&(v=JSON.stringify(v)),u.push(encode(m)+"="+encode(v))}))}),s=u.join("&")}if(s){var d=n.indexOf("#");d!==-1&&(n=n.slice(0,d)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n},utils$9=utils$b;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function e(n,r,o){return this.handlers.push({fulfilled:n,rejected:r,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function e(n){this.handlers[n]&&(this.handlers[n]=null)};InterceptorManager$1.prototype.forEach=function e(n){utils$9.forEach(this.handlers,function(o){o!==null&&n(o)})};var InterceptorManager_1=InterceptorManager$1,utils$8=utils$b,normalizeHeaderName$1=function e(n,r){utils$8.forEach(n,function(s,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(n[r]=s,delete n[u])})},utils$7=utils$b;function AxiosError$2(e,n,r,o,s){Error.call(this),this.message=e,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),o&&(this.request=o),s&&(this.response=s)}utils$7.inherits(AxiosError$2,Error,{toJSON:function e(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){descriptors[e]={value:e}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(e,n,r,o,s,u){var d=Object.create(prototype);return utils$7.toFlatObject(e,d,function(g){return g!==Error.prototype}),AxiosError$2.call(d,e.message,n,r,o,s),d.name=e.name,u&&Object.assign(d,u),d};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$b;function toFormData$1(e,n){n=n||new FormData;var r=[];function o(u){return u===null?"":utils$6.isDate(u)?u.toISOString():utils$6.isArrayBuffer(u)||utils$6.isTypedArray(u)?typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function s(u,d){if(utils$6.isPlainObject(u)||utils$6.isArray(u)){if(r.indexOf(u)!==-1)throw Error("Circular reference detected in "+d);r.push(u),utils$6.forEach(u,function(g,m){if(!utils$6.isUndefined(g)){var y=d?d+"."+m:m,v;if(g&&!d&&typeof g=="object"){if(utils$6.endsWith(m,"{}"))g=JSON.stringify(g);else if(utils$6.endsWith(m,"[]")&&(v=utils$6.toArray(g))){v.forEach(function(_){!utils$6.isUndefined(_)&&n.append(y,o(_))});return}}s(g,y)}}),r.pop()}else n.append(d,o(u))}return s(e),n}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var e=AxiosError_1;return settle=function(r,o,s){var u=s.config.validateStatus;!s.status||!u||u(s.status)?r(s):o(new e("Request failed with status code "+s.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var e=utils$b;return cookies=e.isStandardBrowserEnv()?function(){return{write:function(o,s,u,d,f,g){var m=[];m.push(o+"="+encodeURIComponent(s)),e.isNumber(u)&&m.push("expires="+new Date(u).toGMTString()),e.isString(d)&&m.push("path="+d),e.isString(f)&&m.push("domain="+f),g===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(o){var s=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function e(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},combineURLs$1=function e(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function e(n,r){return n&&!isAbsoluteURL(r)?combineURLs(n,r):r},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var e=utils$b,n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(o){var s={},u,d,f;return o&&e.forEach(o.split(`
`),function(m){if(f=m.indexOf(":"),u=e.trim(m.substr(0,f)).toLowerCase(),d=e.trim(m.substr(f+1)),u){if(s[u]&&n.indexOf(u)>=0)return;u==="set-cookie"?s[u]=(s[u]?s[u]:[]).concat([d]):s[u]=s[u]?s[u]+", "+d:d}}),s},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var e=utils$b;return isURLSameOrigin=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),s;function u(d){var f=d;return r&&(o.setAttribute("href",f),f=o.href),o.setAttribute("href",f),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return s=u(window.location.href),function(f){var g=e.isString(f)?u(f):f;return g.protocol===s.protocol&&g.host===s.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var e=AxiosError_1,n=utils$b;function r(o){e.call(this,o==null?"canceled":o,e.ERR_CANCELED),this.name="CanceledError"}return n.inherits(r,e,{__CANCEL__:!0}),CanceledError_1=r,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var e=utils$b,n=requireSettle(),r=requireCookies(),o=buildURL$1,s=buildFullPath$1,u=requireParseHeaders(),d=requireIsURLSameOrigin(),f=transitional,g=AxiosError_1,m=requireCanceledError(),y=requireParseProtocol();return xhr=function(_){return new Promise(function(x,k){var S=_.data,M=_.headers,E=_.responseType,P;function T(){_.cancelToken&&_.cancelToken.unsubscribe(P),_.signal&&_.signal.removeEventListener("abort",P)}e.isFormData(S)&&e.isStandardBrowserEnv()&&delete M["Content-Type"];var D=new XMLHttpRequest;if(_.auth){var F=_.auth.username||"",I=_.auth.password?unescape(encodeURIComponent(_.auth.password)):"";M.Authorization="Basic "+btoa(F+":"+I)}var N=s(_.baseURL,_.url);D.open(_.method.toUpperCase(),o(N,_.params,_.paramsSerializer),!0),D.timeout=_.timeout;function q(){if(!!D){var j="getAllResponseHeaders"in D?u(D.getAllResponseHeaders()):null,ne=!E||E==="text"||E==="json"?D.responseText:D.response,le={data:ne,status:D.status,statusText:D.statusText,headers:j,config:_,request:D};n(function(O){x(O),T()},function(O){k(O),T()},le),D=null}}if("onloadend"in D?D.onloadend=q:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(q)},D.onabort=function(){!D||(k(new g("Request aborted",g.ECONNABORTED,_,D)),D=null)},D.onerror=function(){k(new g("Network Error",g.ERR_NETWORK,_,D,D)),D=null},D.ontimeout=function(){var ne=_.timeout?"timeout of "+_.timeout+"ms exceeded":"timeout exceeded",le=_.transitional||f;_.timeoutErrorMessage&&(ne=_.timeoutErrorMessage),k(new g(ne,le.clarifyTimeoutError?g.ETIMEDOUT:g.ECONNABORTED,_,D)),D=null},e.isStandardBrowserEnv()){var Y=(_.withCredentials||d(N))&&_.xsrfCookieName?r.read(_.xsrfCookieName):void 0;Y&&(M[_.xsrfHeaderName]=Y)}"setRequestHeader"in D&&e.forEach(M,function(ne,le){typeof S>"u"&&le.toLowerCase()==="content-type"?delete M[le]:D.setRequestHeader(le,ne)}),e.isUndefined(_.withCredentials)||(D.withCredentials=!!_.withCredentials),E&&E!=="json"&&(D.responseType=_.responseType),typeof _.onDownloadProgress=="function"&&D.addEventListener("progress",_.onDownloadProgress),typeof _.onUploadProgress=="function"&&D.upload&&D.upload.addEventListener("progress",_.onUploadProgress),(_.cancelToken||_.signal)&&(P=function(j){!D||(k(!j||j&&j.type?new m:j),D.abort(),D=null)},_.cancelToken&&_.cancelToken.subscribe(P),_.signal&&(_.signal.aborted?P():_.signal.addEventListener("abort",P))),S||(S=null);var Z=y(N);if(Z&&["http","https","file"].indexOf(Z)===-1){k(new g("Unsupported protocol "+Z+":",g.ERR_BAD_REQUEST,_));return}D.send(S)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$b,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,n){!utils$5.isUndefined(e)&&utils$5.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}function getDefaultAdapter(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=requireXhr()),e}function stringifySafely(e,n,r){if(utils$5.isString(e))try{return(n||JSON.parse)(e),utils$5.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(r||JSON.stringify)(e)}var defaults$4={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function e(n,r){if(normalizeHeaderName(r,"Accept"),normalizeHeaderName(r,"Content-Type"),utils$5.isFormData(n)||utils$5.isArrayBuffer(n)||utils$5.isBuffer(n)||utils$5.isStream(n)||utils$5.isFile(n)||utils$5.isBlob(n))return n;if(utils$5.isArrayBufferView(n))return n.buffer;if(utils$5.isURLSearchParams(n))return setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var o=utils$5.isObject(n),s=r&&r["Content-Type"],u;if((u=utils$5.isFileList(n))||o&&s==="multipart/form-data"){var d=this.env&&this.env.FormData;return toFormData(u?{"files[]":n}:n,d&&new d)}else if(o||s==="application/json")return setContentTypeIfUnset(r,"application/json"),stringifySafely(n);return n}],transformResponse:[function e(n){var r=this.transitional||defaults$4.transitional,o=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,u=!o&&this.responseType==="json";if(u||s&&utils$5.isString(n)&&n.length)try{return JSON.parse(n)}catch(d){if(u)throw d.name==="SyntaxError"?AxiosError$1.from(d,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):d}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function e(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function e(n){defaults$4.headers[n]={}});utils$5.forEach(["post","put","patch"],function e(n){defaults$4.headers[n]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$4,utils$4=utils$b,defaults$3=defaults_1,transformData$1=function e(n,r,o){var s=this||defaults$3;return utils$4.forEach(o,function(d){n=d.call(s,n,r)}),n},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(n){return!!(n&&n.__CANCEL__)}),isCancel$1}var utils$3=utils$b,transformData=transformData$1,isCancel=requireIsCancel(),defaults$2=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError}var dispatchRequest$1=function e(n){throwIfCancellationRequested(n),n.headers=n.headers||{},n.data=transformData.call(n,n.data,n.headers,n.transformRequest),n.headers=utils$3.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(s){delete n.headers[s]});var r=n.adapter||defaults$2.adapter;return r(n).then(function(s){return throwIfCancellationRequested(n),s.data=transformData.call(n,s.data,s.headers,n.transformResponse),s},function(s){return isCancel(s)||(throwIfCancellationRequested(n),s&&s.response&&(s.response.data=transformData.call(n,s.response.data,s.response.headers,n.transformResponse))),Promise.reject(s)})},utils$2=utils$b,mergeConfig$2=function e(n,r){r=r||{};var o={};function s(y,v){return utils$2.isPlainObject(y)&&utils$2.isPlainObject(v)?utils$2.merge(y,v):utils$2.isPlainObject(v)?utils$2.merge({},v):utils$2.isArray(v)?v.slice():v}function u(y){if(utils$2.isUndefined(r[y])){if(!utils$2.isUndefined(n[y]))return s(void 0,n[y])}else return s(n[y],r[y])}function d(y){if(!utils$2.isUndefined(r[y]))return s(void 0,r[y])}function f(y){if(utils$2.isUndefined(r[y])){if(!utils$2.isUndefined(n[y]))return s(void 0,n[y])}else return s(void 0,r[y])}function g(y){if(y in r)return s(n[y],r[y]);if(y in n)return s(void 0,n[y])}var m={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g};return utils$2.forEach(Object.keys(n).concat(Object.keys(r)),function(v){var _=m[v]||u,w=_(v);utils$2.isUndefined(w)&&_!==g||(o[v]=w)}),o},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(e,n){validators$1[e]=function(o){return typeof o===e||"a"+(n<1?"n ":" ")+e}});var deprecatedWarnings={};validators$1.transitional=function e(n,r,o){function s(u,d){return"[Axios v"+VERSION+"] Transitional option '"+u+"'"+d+(o?". "+o:"")}return function(u,d,f){if(n===!1)throw new AxiosError(s(d," has been removed"+(r?" in "+r:"")),AxiosError.ERR_DEPRECATED);return r&&!deprecatedWarnings[d]&&(deprecatedWarnings[d]=!0,console.warn(s(d," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(u,d,f):!0}};function assertOptions(e,n,r){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(e),s=o.length;s-- >0;){var u=o[s],d=n[u];if(d){var f=e[u],g=f===void 0||d(f,u,e);if(g!==!0)throw new AxiosError("option "+u+" must be "+g,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError("Unknown option "+u,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$b,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function e(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=mergeConfig$1(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var o=r.transitional;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var s=[],u=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(u=u&&w.synchronous,s.unshift(w.fulfilled,w.rejected))});var d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});var f;if(!u){var g=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(g,s),g=g.concat(d),f=Promise.resolve(r);g.length;)f=f.then(g.shift(),g.shift());return f}for(var m=r;s.length;){var y=s.shift(),v=s.shift();try{m=y(m)}catch(_){v(_);break}}try{f=dispatchRequest(m)}catch(_){return Promise.reject(_)}for(;d.length;)f=f.then(d.shift(),d.shift());return f};Axios$1.prototype.getUri=function e(n){n=mergeConfig$1(this.defaults,n);var r=buildFullPath(n.baseURL,n.url);return buildURL(r,n.params,n.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function e(n){Axios$1.prototype[n]=function(r,o){return this.request(mergeConfig$1(o||{},{method:n,url:r,data:(o||{}).data}))}});utils$1.forEach(["post","put","patch"],function e(n){function r(o){return function(u,d,f){return this.request(mergeConfig$1(f||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:d}))}}Axios$1.prototype[n]=r(),Axios$1.prototype[n+"Form"]=r(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var e=requireCanceledError();function n(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(d){o=d});var s=this;this.promise.then(function(u){if(!!s._listeners){var d,f=s._listeners.length;for(d=0;d<f;d++)s._listeners[d](u);s._listeners=null}}),this.promise.then=function(u){var d,f=new Promise(function(g){s.subscribe(g),d=g}).then(u);return f.cancel=function(){s.unsubscribe(d)},f},r(function(d){s.reason||(s.reason=new e(d),o(s.reason))})}return n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]},n.prototype.unsubscribe=function(o){if(!!this._listeners){var s=this._listeners.indexOf(o);s!==-1&&this._listeners.splice(s,1)}},n.source=function(){var o,s=new n(function(d){o=d});return{token:s,cancel:o}},CancelToken_1=n,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(n){return function(o){return n.apply(null,o)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var e=utils$b;return isAxiosError=function(r){return e.isObject(r)&&r.isAxiosError===!0},isAxiosError}var utils=utils$b,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$1=defaults_1;function createInstance(e){var n=new Axios(e),r=bind(Axios.prototype.request,n);return utils.extend(r,Axios.prototype,n),utils.extend(r,n),r.create=function(s){return createInstance(mergeConfig(e,s))},r}var axios$1=createInstance(defaults$1);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function e(n){return Promise.all(n)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(e){e.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,n,r)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues=(e,n)=>{for(var r in n||(n={}))__hasOwnProp.call(n,r)&&__defNormalProp(e,r,n[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(n))__propIsEnum.call(n,r)&&__defNormalProp(e,r,n[r]);return e},__spreadProps=(e,n)=>__defProps(e,__getOwnPropDescs(n));function useAxios(...e){const n=typeof e[0]=="string"?e[0]:void 0,r=isString$1(n)?1:0;let o={},s=axios,u={immediate:!!r,shallow:!0};const d=D=>!!(D!=null&&D.request);e.length>0+r&&(d(e[0+r])?s=e[0+r]:o=e[0+r]),e.length>1+r&&d(e[1+r])&&(s=e[1+r]),(e.length===2+r&&!d(e[1+r])||e.length===3+r)&&(u=e[e.length-1]);const f=shallowRef(),g=u.shallow?shallowRef():ref(),m=ref(!1),y=ref(!1),v=ref(!1),_=shallowRef(),w=axios.CancelToken.source;let x=w();const k=D=>{m.value||!y.value||(x.cancel(D),x=w(),v.value=!0,y.value=!1,m.value=!1)},S=D=>{y.value=D,m.value=!D},M=()=>new Promise((D,F)=>{until(m).toBe(!0).then(()=>D(T)).catch(F)}),E=(D,F)=>M().then(D,F),P=(D=n,F={})=>{_.value=void 0;const I=typeof D=="string"?D:n!=null?n:F.url;return I===void 0?(_.value=new axios$3.exports.AxiosError(axios$3.exports.AxiosError.ERR_INVALID_URL),m.value=!0,{then:E}):(k(),S(!0),s(I,__spreadProps(__spreadValues(__spreadValues({},o),typeof D=="object"?D:F),{cancelToken:x.token})).then(N=>{var q;f.value=N;const Y=N.data;g.value=Y,(q=u.onSuccess)==null||q.call(u,Y)}).catch(N=>{var q;_.value=N,(q=u.onError)==null||q.call(u,N)}).finally(()=>S(!1)),{then:E})};u.immediate&&n&&P();const T={response:f,data:g,error:_,finished:m,loading:y,isFinished:m,isLoading:y,cancel:k,isAborted:v,canceled:v,aborted:v,isCanceled:v,abort:k,execute:P};return __spreadProps(__spreadValues({},T),{then:E})}const Compare_vue_vue_type_style_index_0_lang="",_sfc_main$1q={__name:"Compare",setup(e){const{loadDocument:n,getOptionUrl:r}=core,o=ref(),s=ref(),u=useViewerStore(),d=useDocumentStore();let f=reactive({firstFile:null,secondFile:null});const g=ref(!1),m=w=>w.click(),y=computed(()=>!(f.firstFile&&f.secondFile)),v=(w,x)=>{w.preventDefault(),f[x]=w.target.files[0]},_=async()=>{const w=r();if(!g.value&&!y.value){g.value=!0;const x=new FormData;x.append("firstFile",f.firstFile),x.append("secondFile",f.secondFile);const{data:k,isFinished:S}=await useAxios(`${w.compareBaseUrl||w.baseUrl}${w.compareUrl}`,{method:"POST",data:x,responseType:"arraybuffer"});if(S.value){g.value=!1;const M={progress:d.setLoadingProgress,pageChangedCallback:u.setCurrentPage,scaleChangedCallback:u.setCurrentScale,annotationsNumChangedCallback:d.setAnnotationsCount,distanceChangedCallback:d.setDistance};await n(k.value,M),u.toggleElement("leftPanel");const E=core.getPagesCount(),P=core.getScale();d.setTotalPages(E),u.setCurrentScale(P),u.setCurrentPage(1)}}};return(w,x)=>{const k=_sfc_main$1r;return openBlock(),createElementBlock(Fragment,null,[x[5]||(x[5]=createBaseVNode("div",{class:"file-text"},[createBaseVNode("span",{class:"circle circle-red"}),createBaseVNode("p",null,"First File")],-1)),createBaseVNode("button",{onClick:x[0]||(x[0]=S=>m(o.value))},"Select File"),createBaseVNode("input",{ref_key:"firstFileInput",ref:o,class:"hidden",type:"file",onChange:x[1]||(x[1]=S=>v(S,"firstFile")),accept:".pdf",name:"compare"},null,544),createBaseVNode("p",null,toDisplayString$1(unref(f).firstFile&&unref(f).firstFile.name),1),x[6]||(x[6]=createBaseVNode("div",{class:"file-text"},[createBaseVNode("span",{class:"circle circle-blue"}),createBaseVNode("p",null,"Second File")],-1)),createBaseVNode("button",{onClick:x[2]||(x[2]=S=>m(s.value))},"Select File"),createBaseVNode("input",{ref_key:"secondFileInput",ref:s,class:"hidden",type:"file",onChange:x[3]||(x[3]=S=>v(S,"secondFile")),accept:".pdf",name:"compare"},null,544),createBaseVNode("p",null,toDisplayString$1(unref(f).secondFile&&unref(f).secondFile.name),1),createBaseVNode("button",{class:normalizeClass(["compare-button",{disabled:y.value}]),onClick:_},[x[4]||(x[4]=createTextVNode(" Compare ")),g.value?(openBlock(),createBlock(k,{key:0,glyph:"icon-loading",class:normalizeClass(w.iconClassName)},null,8,["class"])):createCommentVNode("",!0)],2)],64)}}},LayerPropertyDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$15={key:0,class:"layer-property-popup"},_hoisted_2$j={class:"title"},_hoisted_3$b={class:"container"},_hoisted_4$8=["placeholder"],_hoisted_5$7={class:"text-start"},_hoisted_6$5={class:"select-container"},_hoisted_7$4={value:1},_hoisted_8$4={value:0},_hoisted_9$3={class:"select-container"},_hoisted_10$2={value:0},_hoisted_11$2={value:1},_hoisted_12$2={value:2},_hoisted_13$2={class:"select-container"},_hoisted_14$2={value:0},_hoisted_15$2={value:1},_hoisted_16$2={value:2},dialogName="layerPropertyDialog",_sfc_main$1p={__name:"LayerPropertyDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName)),s=computed(()=>r.getSelectedLayer),u=ref(""),d=ref(0),f=ref(0),g=ref(3),m=ref(3),y=ref(!1);watch(o,(w,x)=>{w&&(u.value=s.value.name,d.value=s.value.defaultVisible,f.value=s.value.isLocked,g.value=s.value.printState,m.value=s.value.exportState),y.value=!1}),watch([u,d,f,g,m],(w,x)=>{!s.value||(y.value=!((s.value.name===w[0]||w[0].trim()==="")&&s.value.defaultVisible===w[1]&&s.value.isLocked===w[2]&&s.value.printState===w[3]&&s.value.exportState===w[4]))});const v=()=>{n.closeElement(dialogName),r.setSelectedLayer(null)},_=async()=>{const w={node:s.value.node};u.value!==""&&u.value!==s.value.name&&(w.name=s.value.name=u.value),d.value!==s.value.defaultVisible&&(w.defaultVisible=s.value.defaultVisible=d.value),f.value!==s.value.isLocked&&(w.isLocked=s.value.isLocked=f.value),g.value!==s.value.printState&&(w.printState=s.value.printState=g.value),m.value!==s.value.exportState&&(w.exportState=s.value.exportState=m.value),d.value!==s.value.visible&&(w.visible=s.value.visible=d.value,w.ocg=s.value.ocg),core.setLayers(w),v()};return(w,x)=>{const k=__unplugin_components_0$t,S=__unplugin_components_1$b,M=_sfc_main$37;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$15,[createVNode(M,{show:o.value,dialogName,close:v},{header:withCtx(()=>[createBaseVNode("p",_hoisted_2$j,toDisplayString$1(w.$t("layer.layerProperty")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!y.value}]),onClick:_},toDisplayString$1(w.$t("ok")),3)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$b,[createBaseVNode("span",null,toDisplayString$1(w.$t("layer.layerName")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:w.$t("layer.enterLayerName"),name:"layerName","onUpdate:modelValue":x[0]||(x[0]=E=>u.value=E),maxlength:"50"},null,8,_hoisted_4$8),[[vModelText,u.value]]),createBaseVNode("span",_hoisted_5$7,toDisplayString$1(w.$t("layer.defaultSettings")),1),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_6$5,[withDirectives(createBaseVNode("select",{name:"defaultSetting","onUpdate:modelValue":x[1]||(x[1]=E=>d.value=E)},[createBaseVNode("option",_hoisted_7$4,toDisplayString$1(w.$t("layer.defaultShow")),1),createBaseVNode("option",_hoisted_8$4,toDisplayString$1(w.$t("layer.defaultHide")),1)],512),[[vModelSelect,d.value]]),createVNode(k)]),createBaseVNode("div",{class:"check-box",onClick:x[2]||(x[2]=E=>f.value=(f.value+1)%2)},[createBaseVNode("div",{class:normalizeClass(["check",{active:f.value}])},[withDirectives(createVNode(S,null,null,512),[[vShow,f.value]])],2),createBaseVNode("span",null,toDisplayString$1(w.$t("layer.lockLayer")),1)])]),createBaseVNode("span",null,toDisplayString$1(w.$t("layer.printProperty")),1),createBaseVNode("div",_hoisted_9$3,[withDirectives(createBaseVNode("select",{name:"printProperty","onUpdate:modelValue":x[3]||(x[3]=E=>g.value=E)},[createBaseVNode("option",_hoisted_10$2,toDisplayString$1(w.$t("layer.always")),1),createBaseVNode("option",_hoisted_11$2,toDisplayString$1(w.$t("layer.never")),1),createBaseVNode("option",_hoisted_12$2,toDisplayString$1(w.$t("layer.printVisible")),1)],512),[[vModelSelect,g.value]]),createVNode(k)]),createBaseVNode("span",null,toDisplayString$1(w.$t("layer.exportProperty")),1),createBaseVNode("div",_hoisted_13$2,[withDirectives(createBaseVNode("select",{name:"exportProperty","onUpdate:modelValue":x[4]||(x[4]=E=>m.value=E)},[createBaseVNode("option",_hoisted_14$2,toDisplayString$1(w.$t("layer.always")),1),createBaseVNode("option",_hoisted_15$2,toDisplayString$1(w.$t("layer.never")),1),createBaseVNode("option",_hoisted_16$2,toDisplayString$1(w.$t("layer.exportVisible")),1)],512),[[vModelSelect,m.value]]),createVNode(k)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1o={},_hoisted_1$14={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$J(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$14,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 8H12V7C12 5.89543 11.1046 5 10 5C8.89543 5 8 5.89543 8 7V8ZM7 8H6C5.44772 8 5 8.44772 5 9V15C5 15.5523 5.44772 16 6 16H14C14.5523 16 15 15.5523 15 15V9C15 8.44772 14.5523 8 14 8H13V7C13 5.34315 11.6569 4 10 4C8.34315 4 7 5.34315 7 7V8Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$5=_export_sfc(_sfc_main$1o,[["render",_sfc_render$J]]),_sfc_main$1n={},_hoisted_1$13={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$I(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$13,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 3H17V17H3V3ZM2 3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V17C18 17.5523 17.5523 18 17 18H3C2.44772 18 2 17.5523 2 17V3ZM5.40381 5L15.3033 14.8995L14.5962 15.6066L4.6967 5.70711L5.40381 5ZM5.82074 8.24536C4.69777 9.2643 4 10.3033 4 10.3033C4 10.3033 6.68629 14.3033 10 14.3033C10.5489 14.3033 11.0806 14.1935 11.5858 14.0104L5.82074 8.24536ZM14.1793 12.3612C15.3022 11.3423 16 10.3033 16 10.3033C16 10.3033 13.3137 6.3033 10 6.3033C9.45108 6.3033 8.91937 6.41306 8.41424 6.59622L14.1793 12.3612Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_2$7=_export_sfc(_sfc_main$1n,[["render",_sfc_render$I]]),_sfc_main$1m={},_hoisted_1$12={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$H(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$12,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 3H17V17H3V3ZM2 3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V17C18 17.5523 17.5523 18 17 18H3C2.44772 18 2 17.5523 2 17V3ZM16 10C16 10 13.3137 14 10 14C6.68629 14 4 10 4 10C4 10 6.68629 6 10 6C13.3137 6 16 10 16 10ZM12 10C12 11.1046 11.1046 12 10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_1$2=_export_sfc(_sfc_main$1m,[["render",_sfc_render$H]]),_sfc_main$1l={},_hoisted_1$11={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$G(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$11,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.01025 4L11 8.0041L6 12L6.01025 4Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$e=_export_sfc(_sfc_main$1l,[["render",_sfc_render$G]]),Layer_vue_vue_type_style_index_0_lang="",_hoisted_1$10={class:"layer"},_hoisted_2$i=["title"],_hoisted_3$a={class:"drop-down medium"},_sfc_main$1k={__name:"Layer",props:["layer","level"],setup(e,{emit:n}){const r=n,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getSelectedLayer),d=ref(!1),f=ref(!1),g=ref(!1),m=ref(""),y=ref(null),v=D=>{D.stopPropagation(),d.value=!d.value},_=()=>{f.value=!1,o.setSelectedLayer(null)},w=D=>{f.value=!1,s.openElement(D)},x=D=>{f.value=!0,o.setSelectedLayer(D)},k=D=>{if(D.isLocked){S(D);return}D.visible=(D.visible+1)%2,core.setLayers({node:D.node,visible:D.visible,ocg:D.ocg})},S=D=>{o.setSelectedLayer(D),r("showTipDialog",D)},M=async D=>{f.value=!1,s.setCommonLoading(!0);const I=(N=>{for(;N;){if(N.ocg)return N.ocg;N=N.children[0]}})(D);if(!I){console.error("Unable to export."),o.setSelectedLayer(null),s.setCommonLoading(!1);return}await core.exportLayers(I,!0),o.setSelectedLayer(null),s.setCommonLoading(!1)},E=D=>{m.value=D,g.value=!0,nextTick(()=>{y.value.focus(),y.value.select()})},P=D=>{if(!m.value.trim()){g.value=!1;return}D.name=m.value,core.setLayers({node:D.node,name:m.value}),g.value=!1},T=D=>{g.value&&y.value&&!y.value.contains(D.target)&&(g.value=!1)};return onMounted(()=>{window.addEventListener("click",T)}),onBeforeUnmount(()=>{window.removeEventListener("click",T)}),(D,F)=>{var le;const I=__unplugin_components_0$e,N=__unplugin_components_1$2,q=__unplugin_components_2$7,Y=__unplugin_components_3$5,Z=__unplugin_components_4$4,j=_sfc_main$3O,ne=resolveComponent("Layer",!0);return openBlock(),createElementBlock("div",_hoisted_1$10,[createBaseVNode("div",{class:normalizeClass(["layer-item",{focus:u.value&&u.value.node===e.layer.node}])},[createBaseVNode("div",{class:normalizeClass(["layer-item-toggle",d.value&&"active"]),style:normalizeStyle({marginLeft:12*e.level+"px"})},[e.layer.children.length?(openBlock(),createBlock(I,{key:0,onClick:v})):createCommentVNode("",!0)],6),e.layer.visible?(openBlock(),createBlock(N,{key:0,onClick:F[0]||(F[0]=J=>k(e.layer))})):(openBlock(),createBlock(q,{key:1,onClick:F[1]||(F[1]=J=>k(e.layer))})),createBaseVNode("div",{class:"layer-item-name",onClick:T},[g.value?withDirectives((openBlock(),createElementBlock("input",{key:1,type:"text","onUpdate:modelValue":F[3]||(F[3]=J=>m.value=J),onBlur:F[4]||(F[4]=J=>g.value=!1),onKeyup:F[5]||(F[5]=withKeys(J=>P(e.layer),["enter"])),ref_key:"nameInputRef",ref:y,maxlength:"50"},null,544)),[[vModelText,m.value]]):(openBlock(),createElementBlock("span",{key:0,onDblclick:F[2]||(F[2]=J=>E(e.layer.name)),title:e.layer.name},toDisplayString$1(e.layer.name),41,_hoisted_2$i))]),e.layer.isLocked?(openBlock(),createBlock(Y,{key:2,onClick:F[6]||(F[6]=J=>S(e.layer))})):createCommentVNode("",!0),createVNode(unref(NPopover),{placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,show:((le=u.value)==null?void 0:le.name)===e.layer.name&&f.value,onClickoutside:_,class:"no-margin-top"},{trigger:withCtx(()=>[createVNode(j,{class:"more",onClick:F[7]||(F[7]=withModifiers(J=>x(e.layer),["stop"])),title:D.$t("leftPanel.menu")},{default:withCtx(()=>[createVNode(Z)]),_:1},8,["title"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$a,[createBaseVNode("div",{class:"drop-item",onClick:F[8]||(F[8]=J=>w("layerPropertyDialog"))},toDisplayString$1(D.$t("leftPanel.layerProperty")),1),createBaseVNode("div",{class:"drop-item",onClick:F[9]||(F[9]=J=>M(e.layer))},toDisplayString$1(D.$t("leftPanel.exportLayer")),1)])]),_:1},8,["show"])],2),d.value?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.layer.children,J=>(openBlock(),createBlock(ne,{layer:J,level:e.level+1,onShowTipDialog:S},null,8,["layer","level"]))),256)):createCommentVNode("",!0)])}}},_sfc_main$1j={},_hoisted_1$$={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$F(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$$,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 5.25C3 4.83579 3.33579 4.5 3.75 4.5H16.2516C16.6659 4.5 17.0016 4.83579 17.0016 5.25C17.0016 5.66421 16.6659 6 16.2516 6H3.75C3.33579 6 3 5.66421 3 5.25ZM3 10.0006C3 9.58635 3.33579 9.25056 3.75 9.25056H16.2516C16.6659 9.25056 17.0016 9.58635 17.0016 10.0006C17.0016 10.4148 16.6659 10.7506 16.2516 10.7506H3.75C3.33579 10.7506 3 10.4148 3 10.0006ZM3.75 14.0012C3.33579 14.0012 3 14.337 3 14.7512C3 15.1654 3.33579 15.5012 3.75 15.5012H16.2516C16.6659 15.5012 17.0016 15.1654 17.0016 14.7512C17.0016 14.337 16.6659 14.0012 16.2516 14.0012H3.75Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$d=_export_sfc(_sfc_main$1j,[["render",_sfc_render$F]]),LayerContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$_={class:"container"},_hoisted_2$h={class:"layer-title"},_hoisted_3$9={class:"drop-down medium"},_hoisted_4$7={key:1,class:"no-layers"},_hoisted_5$6={key:0,class:"layer-locked-tip-popup"},_sfc_main$1i={__name:"LayerContainer",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getLayers),s=computed(()=>{const k=S=>S.some(M=>{if(M.exportState===0||M.exportState!==1&&M.visible)return!0;if(Array.isArray(M.children)&&M.children.length)return k(M.children)});return k(o.value)}),u=computed(()=>x(!1)),d=computed(()=>x(!0)),f=ref(!1),g=ref(),m=ref(!1),y=k=>{r.setLayers(k),m.value=!k.some(S=>S.children.length)};core.addEvent("getLayers",y);const v=k=>{f.value=!1,k?n.openElement("layerPropertyDialog"):r.setSelectedLayer(null)},_=()=>{f.value=!0},w=async k=>{if(g.value.setShow(!1),k==="show"||k==="hide"){const S=[],M=(E,P)=>{E.forEach(T=>{T.isLocked||(T.visible=P,S.push({node:T.node,visible:P,ocg:T.ocg})),Array.isArray(T.children)&&T.children.length&&M(T.children,P)})};M(o.value,k==="show"?1:0),S.length&&core.setLayers(S)}if(k==="restore"){const S=[],M=E=>{E.forEach(P=>{P.visible!==P.defaultVisible&&(P.visible=P.defaultVisible,S.push({node:P.node,visible:P.defaultVisible,ocg:P.ocg})),Array.isArray(P.children)&&P.children.length&&M(P.children)})};M(o.value),S.length&&core.setLayers(S)}k==="export"&&(n.setCommonLoading(!0),await core.exportLayers(null,!0),n.setCommonLoading(!1))},x=k=>o.value.some(S=>(k?S.visible:!S.visible)?!0:Array.isArray(S.children)&&S.children.length?x(S.children):!1);return(k,S)=>{const M=__unplugin_components_0$d,E=_sfc_main$1k,P=__unplugin_components_2$b,T=_sfc_main$37,D=_sfc_main$1p;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$_,[createBaseVNode("div",_hoisted_2$h,[createTextVNode(toDisplayString$1(k.$t("leftPanel.layers"))+" ",1),o.value.length?(openBlock(),createBlock(unref(NPopover),{key:0,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"no-margin-top layer-title-popover",ref_key:"layersMenuPopover",ref:g},{trigger:withCtx(()=>[createVNode(M)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!u.value}]),onClick:S[0]||(S[0]=F=>w("show"))},toDisplayString$1(k.$t("leftPanel.showAll")),3),createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!d.value}]),onClick:S[1]||(S[1]=F=>w("hide"))},toDisplayString$1(k.$t("leftPanel.hideAll")),3),createBaseVNode("div",{class:"drop-item",onClick:S[2]||(S[2]=F=>w("restore"))},toDisplayString$1(k.$t("leftPanel.restoreSettings")),1),createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!s.value}]),onClick:S[3]||(S[3]=F=>w("export"))},toDisplayString$1(k.$t("leftPanel.exportLayers")),3)])]),_:1},512)):createCommentVNode("",!0)]),o.value.length?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["layers",{single:m.value}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,F=>(openBlock(),createBlock(E,{layer:F,level:0,onShowTipDialog:_},null,8,["layer"]))),256))],2)):(openBlock(),createElementBlock("div",_hoisted_4$7,toDisplayString$1(k.$t("leftPanel.noLayers")),1))]),f.value?(openBlock(),createElementBlock("div",_hoisted_5$6,[createVNode(T,{show:f.value,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:S[4]||(S[4]=F=>v())},toDisplayString$1(k.$t("ok")),1),createBaseVNode("div",{class:"rect-button blue",onClick:S[5]||(S[5]=F=>v(!0))},toDisplayString$1(k.$t("layer.setProperty")),1)]),default:withCtx(()=>[createVNode(P),createBaseVNode("p",null,toDisplayString$1(k.$t("layer.lockedTip")),1)]),_:1},8,["show"])])):createCommentVNode("",!0),createVNode(D)],64)}}},Outlines_vue_vue_type_style_index_0_lang="",_hoisted_1$Z={class:"outlines"},_hoisted_2$g={class:"outline-item-title"},splitter="-",_sfc_main$1h={__name:"Outlines",props:{outline:{type:Object,required:!0}},setup(e,{emit:n}){const r=useDocumentStore(),o=useViewerStore(),s=_=>{const w=_.title;return`${u(_)}${splitter}${w}`},u=_=>d(_).reverse().join(splitter),d=_=>{const w=[];let x=_;for(;x;)w.push(x.index),x=x.parent;return w},f=computed(()=>s(e.outline)),g=ref(!1),m=computed(()=>r.getActiveOutlineId===f.value),y=()=>{r.setActiveOutlineId(f.value),core.pageNumberChanged({value:e.outline.pageNumber}),isMobile&&o.closeElement("leftPanel")},v=_=>{_.stopPropagation(),g.value=!g.value};return(_,w)=>{const x=__unplugin_components_0$e,k=resolveComponent("Outlines",!0);return openBlock(),createElementBlock("div",_hoisted_1$Z,[createBaseVNode("div",{class:normalizeClass(["outline-item",m.value&&"selected"]),onClick:y},[createBaseVNode("div",{class:normalizeClass(["outline-item-toggle",g.value&&"active"]),style:normalizeStyle({marginLeft:12*e.outline.level+"px"})},[e.outline.children.length?(openBlock(),createBlock(x,{key:0,onClick:v})):createCommentVNode("",!0)],6),createBaseVNode("div",_hoisted_2$g,toDisplayString$1(e.outline.title),1)],2),g.value?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.outline.children,S=>(openBlock(),createBlock(k,{outline:S},null,8,["outline"]))),256)):createCommentVNode("",!0)])}}},OutlinesPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$Y={class:"outline"},_hoisted_2$f={class:"outline-title"},_hoisted_3$8={key:0,class:"outlines-container"},_hoisted_4$6={key:1,class:"no-outlines"},_sfc_main$1g={__name:"OutlinesPanel",setup(e){const n=useDocumentStore(),r=computed(()=>n.getOutlines);return(o,s)=>{const u=_sfc_main$1h;return openBlock(),createElementBlock("div",_hoisted_1$Y,[createBaseVNode("div",_hoisted_2$f,toDisplayString$1(o.$t("leftPanel.outlines")),1),r.value.length?(openBlock(),createElementBlock("div",_hoisted_3$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,d=>(openBlock(),createBlock(u,{outline:d},null,8,["outline"]))),256))])):(openBlock(),createElementBlock("div",_hoisted_4$6,toDisplayString$1(o.$t("leftPanel.noOutlines")),1))])}}},_sfc_main$1f={},_hoisted_1$X={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$E(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$X,n[0]||(n[0]=[createBaseVNode("path",{d:"M6.36661 7L3.19995 10.1667L6.36661 13.3333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),createBaseVNode("path",{d:"M13.3333 3.2V7.63332C13.3333 8.3052 13.0664 8.94957 12.5913 9.42466C12.1162 9.89975 11.4718 10.1667 10.7999 10.1667H3.19995",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_22=_export_sfc(_sfc_main$1f,[["render",_sfc_render$E]]),_sfc_main$1e={},_hoisted_1$W={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$D(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$W,n[0]||(n[0]=[createBaseVNode("path",{d:"M12.8 9.86666C12.8 10.1613 12.683 10.444 12.4746 10.6523C12.2662 10.8607 11.9836 10.9778 11.6889 10.9778H5.02227L2.80005 13.2V4.31111C2.80005 4.01642 2.91711 3.73381 3.12549 3.52543C3.33386 3.31706 3.61647 3.2 3.91116 3.2H11.6889C11.9836 3.2 12.2662 3.31706 12.4746 3.52543C12.683 3.73381 12.8 4.01642 12.8 4.31111V9.86666Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_21=_export_sfc(_sfc_main$1e,[["render",_sfc_render$D]]),_sfc_main$1d={},_hoisted_1$V={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$C(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$V,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 4H15.5V15.5H4V4ZM2.5 2.5H4H15.5H17V4V15.5V17H15.5H4H2.5V15.5V4V2.5ZM7 9.25H6.25V10.75H7H13H13.75V9.25H13H7Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_20=_export_sfc(_sfc_main$1d,[["render",_sfc_render$C]]),_sfc_main$1c={},_hoisted_1$U={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$B(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$U,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 4H15.5V15.5H4V4ZM2.5 2.5H4H15.5H17V4V15.5V17H15.5H4H2.5V15.5V4V2.5ZM13.6441 8.40148L14.1745 7.87115L13.1138 6.81049L12.5835 7.34082L8.87115 11.0531L7.53033 9.71231L7 9.18198L5.93934 10.2426L6.46967 10.773L8.34082 12.6441L8.87115 13.1745L9.40148 12.6441L13.6441 8.40148Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_19=_export_sfc(_sfc_main$1c,[["render",_sfc_render$B]]),_sfc_main$1b={},_hoisted_1$T={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$A(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$T,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 4H15.5V15.5H4V4ZM2.5 2.5H4H15.5H17V4V15.5V17H15.5H4H2.5V15.5V4V2.5ZM7.06066 6L7.59099 6.53033L9.56066 8.5L11.5303 6.53033L12.0607 6L13.1213 7.06066L12.591 7.59099L10.6213 9.56066L12.591 11.5303L13.1213 12.0607L12.0607 13.1213L11.5303 12.591L9.56066 10.6213L7.59099 12.591L7.06066 13.1213L6 12.0607L6.53033 11.5303L8.5 9.56066L6.53033 7.59099L6 7.06066L7.06066 6Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_18$1=_export_sfc(_sfc_main$1b,[["render",_sfc_render$A]]),_sfc_main$1a={},_hoisted_1$S={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$S,n[0]||(n[0]=[createBaseVNode("path",{d:"M13.5224 10.8835L10.6558 17.3333C10.0856 17.3333 9.53871 17.1068 9.13551 16.7036C8.73232 16.3004 8.5058 15.7536 8.5058 15.1834V12.3168H4.44954C4.24178 12.3191 4.03598 12.2763 3.84642 12.1912C3.65686 12.1061 3.48807 11.9808 3.35173 11.8241C3.21539 11.6673 3.11477 11.4827 3.05684 11.2832C2.99891 11.0836 2.98505 10.8739 3.01623 10.6685L4.00521 4.21857C4.05704 3.87679 4.23065 3.56526 4.49404 3.34138C4.75743 3.1175 5.09286 2.99635 5.43852 3.00026H13.5224M13.5224 10.8835V3.00026M13.5224 10.8835H15.4359C15.8415 10.8906 16.2356 10.7486 16.5434 10.4844C16.8512 10.2202 17.0513 9.85215 17.1057 9.45015V4.43357C17.0513 4.03157 16.8512 3.66352 16.5434 3.39931C16.2356 3.13509 15.8415 2.99309 15.4359 3.00026H13.5224",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_17=_export_sfc(_sfc_main$1a,[["render",_sfc_render$z]]),_sfc_main$19={},_hoisted_1$R={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$R,n[0]||(n[0]=[createBaseVNode("path",{d:"M6.58333 8.44989L9.44994 1.99999C10.0202 1.99999 10.567 2.22651 10.9702 2.6297C11.3734 3.0329 11.5999 3.57975 11.5999 4.14996V7.01658H15.6562C15.8639 7.01422 16.0697 7.05707 16.2593 7.14215C16.4489 7.22722 16.6176 7.3525 16.754 7.50929C16.8903 7.66608 16.9909 7.85063 17.0489 8.05017C17.1068 8.24971 17.1207 8.45946 17.0895 8.66488L16.1005 15.1148C16.0487 15.4565 15.8751 15.7681 15.6117 15.992C15.3483 16.2158 15.0129 16.337 14.6672 16.3331H6.58333M6.58333 8.44989V16.3331M6.58333 8.44989H4.66986C4.26426 8.44271 3.87015 8.58471 3.56233 8.84893C3.25452 9.11315 3.05443 9.48119 3.00005 9.88319V14.8998C3.05443 15.3018 3.25452 15.6698 3.56233 15.934C3.87015 16.1983 4.26426 16.3403 4.66986 16.3331H6.58333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const __unplugin_components_16=_export_sfc(_sfc_main$19,[["render",_sfc_render$y]]),_sfc_main$18={},_hoisted_1$Q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$x(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$Q,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.5 10C6.5 10.8284 5.82843 11.5 5 11.5C4.17157 11.5 3.5 10.8284 3.5 10C3.5 9.17157 4.17157 8.5 5 8.5C5.82843 8.5 6.5 9.17157 6.5 10ZM11.5 10C11.5 10.8284 10.8284 11.5 10 11.5C9.17157 11.5 8.5 10.8284 8.5 10C8.5 9.17157 9.17157 8.5 10 8.5C10.8284 8.5 11.5 9.17157 11.5 10ZM15 11.5C15.8284 11.5 16.5 10.8284 16.5 10C16.5 9.17157 15.8284 8.5 15 8.5C14.1716 8.5 13.5 9.17157 13.5 10C13.5 10.8284 14.1716 11.5 15 11.5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_14=_export_sfc(_sfc_main$18,[["render",_sfc_render$x]]),_sfc_main$17={},_hoisted_1$P={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$w(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$P,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 3H2V15H5V18L10 15H18V3ZM5 6H11V7.5H5V6ZM5 9.5H15V11H5V9.5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$c=_export_sfc(_sfc_main$17,[["render",_sfc_render$w]]),AnnotationContent_vue_vue_type_style_index_0_lang="",_hoisted_1$O={class:"page-title"},_hoisted_2$e=["id"],_hoisted_3$7={class:"item-header"},_hoisted_4$5=["onClick"],_hoisted_5$5={class:"name"},_hoisted_6$4={class:"date"},_hoisted_7$3={key:0,class:"content"},_hoisted_8$3=["onClick"],_hoisted_9$2={key:0,class:"item-reply"},_hoisted_10$1={key:0},_hoisted_11$1=["placeholder"],_hoisted_12$1={class:"buttons"},_hoisted_13$1={class:"replies"},_hoisted_14$1={key:0,class:"info"},_hoisted_15$1={class:"info-header"},_hoisted_16$1={class:"name"},_hoisted_17$1={class:"date"},_hoisted_18$1={key:0,class:"content"},_hoisted_19$1={class:"buttons"},_hoisted_20$1={key:1,class:"content"},_hoisted_21$1={class:"drop-down"},_hoisted_22$1={class:"item-footer"},_hoisted_23$1={class:"drop-down"},_hoisted_24$1=["onClick"],_hoisted_25$1=["onClick"],_hoisted_26$1=["onClick"],_hoisted_27$1=["onClick"],_hoisted_28$1=["onClick"],_hoisted_29={class:"re"},_hoisted_30={key:0},_hoisted_31={key:1,class:"no-annotations"},_sfc_main$16={__name:"AnnotationContent",setup(e){const n=useDocumentStore(),r=useViewerStore();let o=computed(()=>n.getAllAnnotations);const s=computed(()=>r.getActiveElementTab("leftPanel")),u=computed(()=>r.isElementOpen("leftPanel")),d=computed(()=>n.getAnnotator),f=computed(()=>r.getToolMode),g=ref(null),m=ref(null),y=ref(!1),v=ref(""),_=ref(!1),w=ref(""),x=ref(""),k=ref(!1),S=ref(0),M=ref(0);let E=null,P=null,T=null;const D=ref(null);watch([s,u],($e,Ie)=>{Ie[0]==="ANNOTATION"&&Ie[1]&&N()});const F=({annotations:$e})=>{var Ne;P=T,T=JSON.parse(JSON.stringify($e)),n.initAnnotations($e);const Ie=getCurrentInstance();(Ne=Ie==null?void 0:Ie.proxy)==null||Ne.$forceUpdate(),setTimeout(()=>{const Be=Se(P,T);if(Be&&Be.name){const be=document.getElementById(`annotationList-${Be.name}`);be&&fe(be)}})};core.addEvent("annotationUpdated",F);const I=$e=>{var Ie;core.jumpToAnnotation($e),f.value!=="editor"&&core.selectAnnotation($e),((Ie=g.value)==null?void 0:Ie.name)!==$e.name&&(v.value="",g.value=$e,y.value=!1),isMobile&&r.closeElement("leftPanel")},N=()=>{y.value=!1,v.value=""},q=($e,Ie)=>{let Ne;$e.reviewAnnotState?Ne={type:"edit",annotation:$e,reviewAnnotState:$e.reviewAnnotState.annotPtr?{annotPtr:$e.reviewAnnotState.annotPtr,state:Ie}:Ie}:Ne={type:"add",annotation:$e,reviewAnnotState:Ie},core.handleReplyAnnotation(Ne),x.value=""},Y=$e=>{x.value?x.value="":x.value=$e.name},Z=($e,Ie)=>{if(k.value){U();return}let Ne=$e.target;for(;Ne.parentElement&&!Ne.classList.contains("more");)Ne=Ne.parentElement;if(Ne.classList.contains("more")){const Be=Ne.getBoundingClientRect();S.value=Be.left,M.value=Be.bottom,k.value=!0,m.value=Ie}},j=$e=>{let Ie;$e.markedAnnotState?Ie={type:"edit",annotation:$e,markedAnnotState:$e.markedAnnotState.annotPtr?{annotPtr:$e.markedAnnotState.annotPtr,state:$e.markedAnnotState.state==="MARKED"?"UNMARKED":"MARKED"}:$e.markedAnnotState==="MARKED"?"UNMARKED":"MARKED"}:Ie={type:"add",annotation:$e,markedAnnotState:"MARKED"},core.handleReplyAnnotation(Ie)},ne=()=>{var Ie;if(v.value==="")return;const $e={type:"add",annotation:g.value,reply:{operate:"add-annot",type:"reply",author:d.value,title:d.value,contents:v.value,date:new Date,pageIndex:g.value.pageIndex,index:((Ie=g.value.replies)==null?void 0:Ie.length)||0}};core.handleReplyAnnotation($e),v.value=""},le=()=>{if(y.value=!1,k.value=!1,_.value&&w.value!==m.value.contents){const $e={type:"edit",annotation:g.value,reply:{...m.value,operate:"mod-annot",contents:w.value,date:new Date}};core.handleReplyAnnotation($e),_.value=!1}else _.value=!0,w.value=m.value.contents,nextTick(()=>{const $e=document.querySelector(".replyEditInput");$e.focus(),$e.setSelectionRange($e.value.length,$e.value.length)})},J=()=>{const $e={type:"delete",annotation:g.value,reply:m.value};core.handleReplyAnnotation($e),U()},O=$e=>{document.querySelector(".button.more.active").contains($e.target)||U()},U=()=>{k.value=!1,_.value||(m.value=null)},W=()=>{_.value=!1,w.value="",m.value=null},H=$e=>{document.querySelector(".button.state.active").contains($e.target)||(x.value="")},X=($e,Ie)=>{var Ne;y.value=!0,((Ne=g.value)==null?void 0:Ne.name)!==$e.name&&(g.value=$e,v.value=""),!Ie&&nextTick(()=>{var Be;(Be=document.querySelector(".annotReplyInput"))==null||Be.focus()})},Q=$e=>{s.value!=="ANNOTATION"&&r.setActiveElementTab("leftPanel","ANNOTATION"),u.value||r.openElement("leftPanel"),X($e,!0),E&&(clearTimeout(E),E=null),setTimeout(()=>{const Ie=document.querySelector(".annotation-item.selected");Ie.scrollIntoView({behavior:"smooth"}),Ie.classList.contains("flash-border")?(Ie.classList.remove("flash-border"),clearTimeout(E),E=null):(Ie.classList.add("flash-border"),E=setTimeout(()=>document.querySelector(".annotation-item.selected").classList.remove("flash-border"),2e3))})};core.addEvent("openAnnotationReply",Q);const fe=($e,Ie={behavior:"smooth",block:"start"})=>{$e.scrollIntoView(Ie)},Se=($e,Ie)=>{if(!(!$e||!Ie)){for(let Ne in Ie){let Be=Ie[Ne]||0,be=$e[Ne]||0;if(Be&&Be.length>be.length)return Be[Be.length-1]}return null}},Pe=$e=>{D.value=$e.name?$e:null,setTimeout(()=>{const Ie=document.querySelector(".annotation-item.selected-measure");Ie&&fe(Ie)})};return core.addEvent("measurePropertyChange",Pe),($e,Ie)=>{const Ne=__unplugin_components_1$6,Be=__unplugin_components_5$3,be=__unplugin_components_4$8,Ve=__unplugin_components_3$9,De=__unplugin_components_6$3,ve=__unplugin_components_0$k,ye=__unplugin_components_10$1,we=__unplugin_components_9$2,ke=__unplugin_components_8,Me=__unplugin_components_7$1,Le=__unplugin_components_11$1,Fe=__unplugin_components_0$c,ze=__unplugin_components_12,te=__unplugin_components_4$7,oe=__unplugin_components_14,_e=_sfc_main$3O,Ce=__unplugin_components_16,Ee=__unplugin_components_17,Te=__unplugin_components_18$1,Re=__unplugin_components_19,Oe=__unplugin_components_20,je=__unplugin_components_21,We=__unplugin_components_22;return openBlock(),createElementBlock("div",{class:normalizeClass(["annotation-view",{pb:!["view","sign","document"].includes(f.value)}])},[unref(o).annotationsCount>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(o).annotations,(Ze,Xe)=>(openBlock(),createElementBlock("div",null,[Ze.pageAnnotationsCount>0?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_1$O,[createBaseVNode("span",null,toDisplayString$1($e.$t("leftPanel.whichPage[0]"))+toDisplayString$1(Xe*1+1)+toDisplayString$1($e.$t("leftPanel.whichPage[1]")),1),createBaseVNode("span",null,toDisplayString$1(Ze.pageAnnotationsCount),1)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ze.annotations,(Ge,Qe)=>{var rt,dt,qe;return openBlock(),createElementBlock(Fragment,null,[!["link","reply"].includes(Ge.type)&&!Ge.isDelete&&!Ge.isHidden?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["annotation-item",{selected:g.value&&g.value.name===Ge.name,"selected-measure":D.value&&D.value.name===Ge.name}]),id:Ge.name?`annotationList-${Ge.name}`:null},[createBaseVNode("div",_hoisted_3$7,[Ge.type==="highlight"?(openBlock(),createBlock(Ne,{key:0})):Ge.type==="squiggly"?(openBlock(),createBlock(Be,{key:1})):Ge.type==="strikeout"?(openBlock(),createBlock(be,{key:2})):Ge.type==="underline"?(openBlock(),createBlock(Ve,{key:3})):Ge.type==="ink"?(openBlock(),createBlock(De,{key:4})):Ge.type==="line"&&Ge.measure?(openBlock(),createBlock(ve,{key:5})):Ge.type==="line"&&((Ge.tail==="None"||Ge.tail==="Unknown")&&(Ge.head==="None"||Ge.head==="Unknown")||!Ge.tail&&!Ge.head)?(openBlock(),createBlock(ye,{key:6})):Ge.type==="line"&&(Ge.tail==="OpenArrow"||Ge.head==="OpenArrow"||Ge.arrow)?(openBlock(),createBlock(we,{key:7})):Ge.type==="square"?(openBlock(),createBlock(ke,{key:8})):Ge.type==="circle"?(openBlock(),createBlock(Me,{key:9})):Ge.type==="freetext"?(openBlock(),createBlock(Le,{key:10})):Ge.type==="text"?(openBlock(),createBlock(Fe,{key:11})):Ge.type==="image"||Ge.type==="stamp"?(openBlock(),createBlock(ze,{key:12})):Ge.type==="polygon"&&Ge.measure?(openBlock(),createBlock(te,{key:13})):Ge.type==="polygon"?(openBlock(),createBlock(ke,{key:14})):createCommentVNode("",!0),createBaseVNode("div",{class:"info",onClick:He=>I(Ge)},[createBaseVNode("p",_hoisted_5$5,toDisplayString$1(Ge.author||Ge.title||"Guest"),1),createBaseVNode("p",_hoisted_6$4,toDisplayString$1(unref(dayjs)(Ge.date).format("DD/MM/YYYY HH:mm:ss")),1),Ge.contents?(openBlock(),createElementBlock("div",_hoisted_7$3,toDisplayString$1(Ge.contents),1)):createCommentVNode("",!0)],8,_hoisted_4$5),createVNode(unref(NPopover),{trigger:"hover",placement:"bottom",class:"mark-popover"},{trigger:withCtx(()=>{var He;return[createBaseVNode("div",{class:normalizeClass(["mark-box",{marked:Ge.markedAnnotState==="MARKED"||((He=Ge.markedAnnotState)==null?void 0:He.state)==="MARKED"}]),onClick:withModifiers(Ke=>j(Ge),["stop"])},null,10,_hoisted_8$3)]}),default:withCtx(()=>{var He;return[createBaseVNode("span",null,toDisplayString$1(Ge.markedAnnotState==="MARKED"||((He=Ge.markedAnnotState)==null?void 0:He.state)==="MARKED"?$e.$t("leftPanel.marked"):$e.$t("leftPanel.unmarked")),1)]}),_:2},1024)]),g.value&&g.value.name===Ge.name&&(y.value||((rt=Ge.replies)==null?void 0:rt.length))?(openBlock(),createElementBlock("div",_hoisted_9$2,[y.value?(openBlock(),createElementBlock("div",_hoisted_10$1,[withDirectives(createBaseVNode("textarea",{placeholder:$e.$t("leftPanel.replyPlaceholder"),"onUpdate:modelValue":Ie[0]||(Ie[0]=He=>v.value=He),class:"annotReplyInput"},null,8,_hoisted_11$1),[[vModelText,v.value]]),createBaseVNode("div",_hoisted_12$1,[createBaseVNode("span",{onClick:withModifiers(N,["stop"])},toDisplayString$1($e.$t("cancel")),1),createBaseVNode("button",{class:normalizeClass({active:v.value,disabled:!v.value}),onClick:ne},toDisplayString$1($e.$t("leftPanel.reply")),3)])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_13$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ge.replies,(He,Ke)=>{var ot,at;return openBlock(),createElementBlock(Fragment,{key:Ke},[He.contents?(openBlock(),createElementBlock("div",_hoisted_14$1,[createBaseVNode("div",_hoisted_15$1,[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_16$1,toDisplayString$1(He.author||He.title||d.value),1),createBaseVNode("p",_hoisted_17$1,toDisplayString$1(unref(dayjs)(He.date).format("DD/MM/YYYY HH:mm:ss")),1)]),createVNode(_e,{class:normalizeClass(["more",{active:k.value&&He.name===((ot=m.value)==null?void 0:ot.name)}]),onClick:et=>Z(et,He)},{default:withCtx(()=>[createVNode(oe)]),_:2},1032,["class","onClick"])]),_.value&&He.name===((at=m.value)==null?void 0:at.name)?(openBlock(),createElementBlock("div",_hoisted_18$1,[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":Ie[1]||(Ie[1]=et=>w.value=et),class:"replyEditInput"},null,512),[[vModelText,w.value]]),createBaseVNode("div",_hoisted_19$1,[createBaseVNode("span",{onClick:W},toDisplayString$1($e.$t("cancel")),1),createBaseVNode("button",{class:normalizeClass([w.value&&w.value!==He.contents?"active":"disabled"]),onClick:le},toDisplayString$1($e.$t("leftPanel.confirm")),3)])])):(openBlock(),createElementBlock("div",_hoisted_20$1,toDisplayString$1(He.contents),1))])):createCommentVNode("",!0)],64)}),128))]),createVNode(unref(NPopover),{placement:"bottom-start",trigger:"manual","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":96,class:"reply-popover",show:k.value,x:S.value,y:M.value,onClickoutside:O},{default:withCtx(()=>[createBaseVNode("div",_hoisted_21$1,[createBaseVNode("div",{class:"drop-item",onClick:le},toDisplayString$1($e.$t("leftPanel.edit")),1),createBaseVNode("div",{class:"drop-item",onClick:J},toDisplayString$1($e.$t("leftPanel.delete")),1)])]),_:1},8,["show","x","y"])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_22$1,[createVNode(unref(NPopover),{placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":96,class:"state-popover",show:x.value===Ge.name,onClickoutside:H},{trigger:withCtx(()=>[createVNode(_e,{class:normalizeClass(["state",{active:x.value===Ge.name}]),onClick:withModifiers(He=>Y(Ge),["stop"])},{default:withCtx(()=>{var He,Ke,ot,at;return[Ge.reviewAnnotState==="ACCEPTED"||((He=Ge.reviewAnnotState)==null?void 0:He.state)==="ACCEPTED"?(openBlock(),createBlock(Ce,{key:0})):Ge.reviewAnnotState==="REJECTED"||((Ke=Ge.reviewAnnotState)==null?void 0:Ke.state)==="REJECTED"?(openBlock(),createBlock(Ee,{key:1})):Ge.reviewAnnotState==="CANCELLED"||((ot=Ge.reviewAnnotState)==null?void 0:ot.state)==="CANCELLED"?(openBlock(),createBlock(Te,{key:2})):Ge.reviewAnnotState==="COMPLETED"||((at=Ge.reviewAnnotState)==null?void 0:at.state)==="COMPLETED"?(openBlock(),createBlock(Re,{key:3})):(openBlock(),createBlock(Oe,{key:4}))]}),_:2},1032,["class","onClick"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_23$1,[createBaseVNode("div",{class:"drop-item",onClick:He=>q(Ge,"ACCEPTED")},[createVNode(Ce),createTextVNode(toDisplayString$1($e.$t("leftPanel.accepted")),1)],8,_hoisted_24$1),createBaseVNode("div",{class:"drop-item",onClick:He=>q(Ge,"REJECTED")},[createVNode(Ee),createTextVNode(toDisplayString$1($e.$t("leftPanel.rejected")),1)],8,_hoisted_25$1),createBaseVNode("div",{class:"drop-item",onClick:He=>q(Ge,"CANCELLED")},[createVNode(Te),createTextVNode(toDisplayString$1($e.$t("leftPanel.cancelled")),1)],8,_hoisted_26$1),createBaseVNode("div",{class:"drop-item",onClick:He=>q(Ge,"COMPLETED")},[createVNode(Re),createTextVNode(toDisplayString$1($e.$t("leftPanel.completed")),1)],8,_hoisted_27$1),createBaseVNode("div",{class:"drop-item",onClick:He=>q(Ge,"NONE")},[createVNode(Oe),createTextVNode(toDisplayString$1($e.$t("leftPanel.none")),1)],8,_hoisted_28$1)])]),_:2},1032,["show"]),createBaseVNode("div",_hoisted_29,[createVNode(je),(qe=(dt=Ge==null?void 0:Ge.replies)==null?void 0:dt.filter(He=>He.contents))!=null&&qe.length?(openBlock(),createElementBlock("span",_hoisted_30,toDisplayString$1(Ge.replies.filter(He=>He.contents).length),1)):createCommentVNode("",!0),createVNode(We,{class:"return",onClick:He=>X(Ge)},null,8,["onClick"])])])],10,_hoisted_2$e)):createCommentVNode("",!0)],64)}),256))],64)):createCommentVNode("",!0)]))),256)):(openBlock(),createElementBlock("div",_hoisted_31,toDisplayString$1($e.$t("leftPanel.noAnnotations")),1))],2)}}},_sfc_main$15={},_hoisted_1$N={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$v(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$N,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.56181 13.8733C9.85977 14.1611 10.3429 14.1611 10.6408 13.8733L14.7421 9.91282C15.0401 9.62509 15.0401 9.15858 14.7421 8.87085C14.4442 8.58311 13.9611 8.58311 13.6631 8.87085L10.75 11.6839L10.75 4C10.75 3.58579 10.4142 3.25 10 3.25C9.58581 3.25 9.25002 3.58579 9.25002 4L9.25003 11.4883L6.53951 8.87085C6.24155 8.58311 5.75846 8.58311 5.46049 8.87085C5.16253 9.15858 5.16253 9.62509 5.46049 9.91282L9.56181 13.8733ZM4 15.7543C3.58579 15.7543 3.25 16.0901 3.25 16.5043C3.25 16.9185 3.58579 17.2543 4 17.2543H16C16.4142 17.2543 16.75 16.9185 16.75 16.5043C16.75 16.0901 16.4142 15.7543 16 15.7543H4Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_2$6=_export_sfc(_sfc_main$15,[["render",_sfc_render$v]]),_sfc_main$14={},_hoisted_1$M={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$u(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$M,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6374 2.96451C10.3413 2.67483 9.8613 2.67483 9.56523 2.96451L5.46391 6.97719C5.16784 7.26687 5.16784 7.73652 5.46391 8.0262C5.75999 8.31588 6.24002 8.31588 6.53609 8.0262L9.25012 5.37083L9.25012 12.8271C9.25012 13.2413 9.58591 13.5771 10.0001 13.5771C10.4143 13.5771 10.7501 13.2413 10.7501 12.8271L10.7501 5.17281L13.6665 8.0262C13.9626 8.31588 14.4426 8.31588 14.7387 8.0262C15.0348 7.73652 15.0348 7.26687 14.7387 6.97719L10.6374 2.96451ZM4 15.7516C3.58579 15.7516 3.25 16.0873 3.25 16.5016C3.25 16.9158 3.58579 17.2516 4 17.2516H16C16.4142 17.2516 16.75 16.9158 16.75 16.5016C16.75 16.0873 16.4142 15.7516 16 15.7516H4Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$b=_export_sfc(_sfc_main$14,[["render",_sfc_render$u]]),AnnotationHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$L={class:"annotation-header"},_hoisted_2$d={class:"annotation-title"},_hoisted_3$6={class:"annotation-header-buttons"},_sfc_main$13={__name:"AnnotationHeader",setup(e){const n=useDocumentStore(),r=useViewerStore(),o=computed(()=>r.isAnnotationExport),s=computed(()=>r.isAnnotationImport),{removeAllAnnotations:u,importAnnotations:d,exportXfdf:f}=core,g=()=>{uploadFile(isIOS?"":".xfdf").then(x=>{x.name.split(".").pop().toLowerCase()==="xfdf"&&d(x)})},m=computed(()=>n.getTotalPages),y=computed(()=>n.getAllAnnotations);computed(()=>n.getOptionUrl);const v=computed(()=>n.info);v.value&&v.value.token&&atob(v.value.token).replace(".pdf",".xfdf");const _=async()=>{try{r.setDownloading(!0);const w=await f(!0);r.setDownloading(!1),w||r.setDownloadError("Downloaded")}catch(w){console.log(w),r.setDownloading(!1),r.setDownloadError("Downloaded")}};return(w,x)=>{const k=__unplugin_components_0$b,S=_sfc_main$3O,M=__unplugin_components_2$6;return openBlock(),createElementBlock("div",_hoisted_1$L,[createBaseVNode("h2",_hoisted_2$d,toDisplayString$1(w.$t("leftPanel.annotations")),1),createBaseVNode("div",_hoisted_3$6,[o.value?(openBlock(),createBlock(S,{key:0,className:"button-icon",img:"icon-import",onClick:_,title:w.$t("leftPanel.exportAnnotations"),disabled:!y.value||y.value.annotationsCount===0},{default:withCtx(()=>[createVNode(k)]),_:1},8,["title","disabled"])):createCommentVNode("",!0),s.value?(openBlock(),createBlock(S,{key:1,className:"button-icon",img:"icon-export",onClick:g,title:w.$t("leftPanel.importAnnotations"),disabled:m.value<=0},{default:withCtx(()=>[createVNode(M)]),_:1},8,["title","disabled"])):createCommentVNode("",!0)])])}}},LeftPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$K={key:0,class:"close-button"},_hoisted_2$c={class:"sidebar-content"},_sfc_main$12={__name:"LeftPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getActiveElementTab("leftPanel")),s=computed(()=>n.isElementOpen("leftPanel")),u=computed(()=>r.getActiveTool);watch(s,(f,g)=>{f&&u.value==="cropPage"&&r.setToolState("")});const d=()=>{n.closeElement("leftPanel")};return(f,g)=>{const m=__unplugin_components_13$3,y=_sfc_main$13,v=_sfc_main$16,_=_sfc_main$1g,w=_sfc_main$1i,x=_sfc_main$1q,k=_sfc_main$1s,S=__unplugin_components_7;return openBlock(),createElementBlock("div",{class:normalizeClass(["left-panel",{closed:!s.value,mobile:unref(isMobileDevice)}]),id:"leftPanel",style:normalizeStyle({height:e.isHeaderDisabled||unref(isMobileDevice)?"100%":"calc(100% - 44px)"})},[unref(isMobileDevice)?(openBlock(),createElementBlock("div",_hoisted_1$K,[createVNode(m,{onClick:d})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_2$c,[createBaseVNode("div",{class:normalizeClass(["thumbnail-container",{hidden:o.value!=="THUMBS"}])},[createBaseVNode("h2",null,toDisplayString$1(f.$t("leftPanel.thumbnails")),1),g[0]||(g[0]=createBaseVNode("div",{class:"thumbnail-view"},null,-1))],2),createBaseVNode("div",{class:normalizeClass(["annotation-container",{hidden:o.value!=="ANNOTATION"}])},[createVNode(y),createVNode(v)],2),withDirectives(createVNode(_,null,null,512),[[vShow,o.value==="OUTLINE"]]),createBaseVNode("div",{class:normalizeClass(["layer-container",{hidden:o.value!=="LAYER"}])},[createVNode(w)],2),createBaseVNode("div",{class:normalizeClass(["compare-container",{hidden:o.value!=="COMPARISON"}])},[createVNode(x)],2),createBaseVNode("div",{class:normalizeClass(["signature-container",{hidden:o.value!=="SIGNATURE"}])},[createVNode(k)],2),createBaseVNode("div",{class:normalizeClass(["findbar-container",{hidden:o.value!=="SEARCH"}])},[createVNode(S)],2)])],6)}}},SecurityApplyBar_vue_vue_type_style_index_0_lang="",_hoisted_1$J={class:"security-apply-bar"},_hoisted_2$b={class:"buttons"},_sfc_main$11={__name:"SecurityApplyBar",setup(e){const n=useViewerStore(),r=useDocumentStore();let o=0;const s=d=>{if(!o){r.setToolState(""),n.setActiveToolMode("view");return}n.setRedactionConfirmDialog(d)},u=d=>{o=d};return core.addEvent("redactAnnotationChanged",u),(d,f)=>(openBlock(),createElementBlock("div",_hoisted_1$J,[createBaseVNode("span",null,toDisplayString$1(d.$t("security.applyTip")),1),createBaseVNode("div",_hoisted_2$b,[createBaseVNode("div",{class:"view-button",onClick:f[0]||(f[0]=g=>s(0))},toDisplayString$1(d.$t("security.exit")),1),createBaseVNode("div",{class:"view-button",onClick:f[1]||(f[1]=g=>s(1))},toDisplayString$1(d.$t("security.apply")),1)])]))}},SignatureVerifyBar_vue_vue_type_style_index_0_scoped_c3701190_lang="",_hoisted_1$I={class:"signature-verify"},_hoisted_2$a={key:0},_hoisted_3$5={key:0},_hoisted_4$4={key:1},_hoisted_5$4={key:2},_sfc_main$10={__name:"SignatureVerifyBar",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getSignatureVerify),s=computed(()=>r.getSignatures),u=()=>{n.openElement("leftPanel"),n.setActiveElementTab("leftPanel","SIGNATURE")};return(d,f)=>{const g=__unplugin_components_0$h,m=__unplugin_components_1$3,y=__unplugin_components_2$9;return openBlock(),createElementBlock("div",_hoisted_1$I,[o.value===1?(openBlock(),createElementBlock("div",_hoisted_2$a,[createVNode(g),createBaseVNode("span",null,toDisplayString$1(d.$t("signatures.detailsDialog.validSignature")),1)])):s.value.length===1?(openBlock(),createElementBlock(Fragment,{key:1},[o.value===2?(openBlock(),createElementBlock("div",_hoisted_3$5,[createVNode(m),createBaseVNode("span",null,toDisplayString$1(d.$t("signatures.detailsDialog.invalidSignature")),1)])):(openBlock(),createElementBlock("div",_hoisted_4$4,[createVNode(y),createBaseVNode("span",null,toDisplayString$1(d.$t("signatures.detailsDialog.unknownSignature")),1)]))],64)):o.value===2||o.value===3?(openBlock(),createElementBlock("div",_hoisted_5$4,[createVNode(m),createBaseVNode("span",null,toDisplayString$1(d.$t("signatures.detailsDialog.atLeastOneInvalid")),1)])):createCommentVNode("",!0),createBaseVNode("div",{class:"view-button",onClick:u},toDisplayString$1(d.$t("signatures.detailsDialog.viewAllSignatures")),1)])}}},__unplugin_components_2$5=_export_sfc(_sfc_main$10,[["__scopeId","data-v-c3701190"]]),_sfc_main$$={},_hoisted_1$H={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$t(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$H,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5663 0.846478C12.3457 0.625895 11.9792 0.658942 11.8017 0.915427L9.00221 4.95911C8.97541 4.99782 8.93581 5.02583 8.89039 5.03822L5.20212 6.04411C5.12329 6.06561 5.06548 6.13203 5.05485 6.21304C4.99741 6.65059 4.78835 8.10157 4.36452 9.61523C4.00509 10.8989 2.91361 13.3787 2.30714 14.7167C1.93791 14.5472 1.48666 14.6144 1.18254 14.9186C0.792017 15.3091 0.792017 15.9423 1.18254 16.3328C1.57307 16.7233 2.20623 16.7233 2.59676 16.3328C2.90731 16.0222 2.9709 15.5582 2.78754 15.1848C3.97427 14.6183 6.12247 13.6485 7.90006 13.1508C9.90855 12.5884 10.9209 12.4728 11.2798 12.4494C11.3716 12.4434 11.4526 12.3813 11.4768 12.2925L12.4771 8.6249C12.4895 8.57948 12.5175 8.53988 12.5562 8.51308L16.5999 5.71361C16.8563 5.53604 16.8894 5.16954 16.6688 4.94896L12.5663 0.846478ZM8.34417 7.93803C8.29817 7.89203 8.22119 7.90151 8.18771 7.95729L6.33809 11.04C6.28453 11.1293 6.38602 11.2308 6.47529 11.1772L9.558 9.32758C9.61378 9.2941 9.62326 9.21712 9.57726 9.17112L8.34417 7.93803ZM12.3814 12.3738C12.3814 12.1505 12.5293 11.9543 12.744 11.893L15.8033 11.0189C15.8931 10.9933 15.9883 10.9933 16.078 11.0189L19.1374 11.893C19.352 11.9543 19.5 12.1505 19.5 12.3738V15.913C19.5 16.0117 19.4713 16.1076 19.4146 16.1884C19.0137 16.7602 17.2809 19.1153 15.9407 19.1153C14.6004 19.1153 12.8677 16.7602 12.4667 16.1884C12.41 16.1076 12.3814 16.0117 12.3814 15.913V12.3738ZM14.9114 15.9254L14.9114 15.9255L15.6305 16.6446L17.9549 14.3201L17.2358 13.601L15.6305 15.2063L14.6993 14.2752L13.9802 14.9943L14.9114 15.9254Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$3=_export_sfc(_sfc_main$$,[["render",_sfc_render$t]]),_sfc_main$_={},_hoisted_1$G={width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$s(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$G,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.5623 7.9067L14.6557 3L11.5014 7.55623L7.64623 8.60766C7.64623 8.60766 7.44842 10.3155 6.94528 12.1125C6.58896 13.3851 5.50688 15.8434 4.90572 17.1698C4.5396 17.0014 4.09196 17.068 3.79034 17.3696C3.40322 17.7568 3.40322 18.3844 3.79034 18.7715C4.17746 19.1587 4.80511 19.1587 5.19223 18.7715C5.5 18.4638 5.56308 18.004 5.38149 17.6339C6.55777 17.0723 8.68764 16.1107 10.45 15.6172C13.034 14.8937 13.9547 14.9163 13.9547 14.9163L15.0061 11.061L19.5623 7.9067ZM10.7997 10.3601L12.2016 11.762L8.69685 13.8649L10.7997 10.3601ZM17.9547 17.5658C17.6177 16.9944 17.0028 16.7812 16.1476 16.8013C16.0495 16.8036 15.9455 16.8091 15.8353 16.8179L15.4861 16.854L15.0991 16.9101C15.0313 16.9211 14.962 16.933 14.891 16.9457L14.445 17.0323L13.9583 17.1398L13.4299 17.2684L12.8587 17.4186L12.2436 17.5906L11.2363 17.8906L10.5067 18.119L9.32254 18.5051L8.47165 18.7921L7.10044 19.2678L7.68591 21L8.57815 20.6888L9.82355 20.2659L10.5929 20.0127L11.3145 19.782L12.3087 19.4775L12.9138 19.3017L13.737 19.0778L14.2305 18.9546L14.6806 18.8519L15.088 18.7692L15.4535 18.7063L15.7779 18.6628C15.93 18.6459 16.0669 18.636 16.189 18.6332L16.3181 18.6327L16.2761 18.8388C16.2125 19.1636 16.1998 19.3368 16.2394 19.5948C16.324 20.1475 16.6955 20.5595 17.257 20.7155C17.7746 20.8593 18.5301 20.7995 19.6673 20.5229L20.2199 20.3798C20.4134 20.327 20.6166 20.2689 20.8298 20.2057L21.5002 20.0001L20.9702 18.2494L20.3733 18.4324L19.8368 18.5865L19.3603 18.7128L18.9431 18.8123C18.8784 18.8267 18.8163 18.8401 18.7565 18.8524L18.4273 18.9139C18.3273 18.9303 18.237 18.9427 18.1562 18.9514L18.0859 18.9576L18.118 18.7913C18.2062 18.2932 18.1885 17.9622 17.9547 17.5658Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$4=_export_sfc(_sfc_main$_,[["render",_sfc_render$s]]),_sfc_main$Z={},_hoisted_1$F={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$r(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$F,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5663 1.73124C12.3457 1.51066 11.9792 1.54371 11.8017 1.80019L9.00221 5.84387C8.97541 5.88258 8.93581 5.9106 8.89039 5.92298L5.20212 6.92888C5.12329 6.95038 5.06548 7.01679 5.05485 7.0978C4.99741 7.53536 4.78835 8.98634 4.36452 10.5C4.00509 11.7837 2.91361 14.2634 2.30714 15.6015C1.93791 15.4319 1.48666 15.4992 1.18254 15.8033C0.792017 16.1939 0.792017 16.827 1.18254 17.2175C1.57307 17.6081 2.20623 17.6081 2.59676 17.2175C2.90731 16.907 2.9709 16.443 2.78754 16.0696C3.97427 15.503 6.12247 14.5333 7.90006 14.0355C9.90855 13.4732 10.9209 13.3576 11.2798 13.3342C11.3716 13.3282 11.4526 13.266 11.4768 13.1773L12.4771 9.50966C12.4895 9.46424 12.5175 9.42465 12.5562 9.39785L16.5999 6.59838C16.8563 6.42081 16.8894 6.05431 16.6688 5.83373L12.5663 1.73124ZM8.34417 8.8228C8.29817 8.77679 8.22119 8.78627 8.18771 8.84206L6.33809 11.9248C6.28453 12.014 6.38602 12.1155 6.47529 12.062L9.558 10.2123C9.61378 10.1789 9.62326 10.1019 9.57726 10.0559L8.34417 8.8228ZM16.027 16.5933C15.9522 16.5981 15.8766 16.6005 15.8006 16.6005C15.7254 16.6005 15.6507 16.5982 15.5767 16.5935L14.0309 19.2709C13.9525 19.4067 13.7553 19.4035 13.6813 19.2651L13.0771 18.1343C13.0412 18.0671 12.9702 18.0262 12.8941 18.0287L11.6126 18.0708C11.4558 18.0759 11.3544 17.9067 11.4329 17.7709L12.9536 15.1369C12.5425 14.5632 12.3006 13.8601 12.3006 13.1005C12.3006 11.1675 13.8676 9.60053 15.8006 9.60053C17.7336 9.60053 19.3006 11.1675 19.3006 13.1005C19.3006 13.8592 19.0592 14.5615 18.649 15.1348L20.171 17.7709C20.2494 17.9067 20.148 18.0759 19.9912 18.0708L18.7098 18.0287C18.6336 18.0262 18.5627 18.0671 18.5268 18.1343L17.9225 19.2651C17.8486 19.4035 17.6514 19.4067 17.5729 19.2709L16.027 16.5933Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_2$4=_export_sfc(_sfc_main$Z,[["render",_sfc_render$r]]),_sfc_main$Y={},_hoisted_1$E={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$E,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 16V4H18V16H3ZM1.5 3.5C1.5 2.94772 1.94772 2.5 2.5 2.5H18.5C19.0523 2.5 19.5 2.94772 19.5 3.5V16.5C19.5 17.0523 19.0523 17.5 18.5 17.5H2.5C1.94772 17.5 1.5 17.0523 1.5 16.5V3.5ZM10.3774 13.1117C9.88462 14.0732 9.12745 14.6461 8.15796 14.6461C7.29663 14.6461 6.83191 14.1213 6.83191 13.3C6.83191 13.2359 6.83592 13.1758 6.84393 13.1117H4V12.2865H7.06427C7.2766 11.8017 7.62113 11.305 8.06982 10.8523C7.13237 10.1151 6.27505 8.98137 6.27505 7.62728C6.27505 6.38937 7.09231 5.5 8.25811 5.5C9.79649 5.5 10.8862 7.10247 11.0304 9.27383C11.3268 9.21774 11.6313 9.1897 11.9398 9.1897C12.5407 9.1897 12.9093 9.49417 12.9093 10.003C12.9093 10.067 12.8995 10.1298 12.8864 10.1889L12.844 10.3525C12.8309 10.4018 12.8212 10.445 12.8212 10.4797C12.8212 10.5238 12.8372 10.5398 12.8732 10.5398C12.9385 10.5398 13.0642 10.443 13.2278 10.3047L13.4031 10.1546L13.5985 9.98918C13.9722 9.67931 14.4221 9.35395 14.8082 9.35395C15.3152 9.35395 15.4429 9.75975 15.5112 10.1168L15.5627 10.4004C15.5929 10.5465 15.6313 10.6479 15.7176 10.6479C15.7399 10.6479 15.7763 10.6396 15.8268 10.623L15.9467 10.5788L16.1042 10.5123L16.2995 10.4238L16.4637 11.245L16.2383 11.3483L16.0433 11.4309C15.8337 11.5152 15.6864 11.5574 15.6014 11.5574C15.0514 11.5574 14.8602 11.2147 14.7653 10.8984L14.7297 10.7655L14.6756 10.5353C14.6496 10.4385 14.6205 10.3755 14.5679 10.3755C14.501 10.3755 14.3806 10.4669 14.2239 10.6019L13.8668 10.916L13.6613 11.0903C13.2715 11.4106 12.8163 11.7176 12.4005 11.7176C12.0279 11.7176 11.7635 11.4812 11.7635 11.1207C11.7635 10.9165 11.8211 10.7485 11.8751 10.5908C11.9229 10.4515 11.9678 10.3202 11.9678 10.1792C11.9678 10.1151 11.9158 10.0711 11.8236 10.0711C11.5592 10.0711 11.2948 10.1031 11.0424 10.1552C11.0144 10.9484 10.9022 11.6695 10.7099 12.2865H16.6226V13.1117H10.3774ZM7.15643 7.61933C7.15643 8.80115 7.97369 9.69854 8.73086 10.2834C9.15551 9.96695 9.63625 9.70254 10.1611 9.51025C10.089 7.72749 9.32778 6.38542 8.26213 6.38542C7.60912 6.38542 7.15643 6.90222 7.15643 7.61933ZM8.07385 12.2865H9.76046C9.95676 11.7737 10.089 11.1528 10.141 10.4597C9.9207 10.5639 9.70837 10.684 9.51207 10.8122C9.58685 10.8763 9.70169 10.9542 9.85658 11.0458L9.22061 11.5887L8.82301 11.3611C8.51053 11.6576 8.25413 11.978 8.07385 12.2865ZM7.76133 13.2119C7.76133 13.5444 7.9336 13.7648 8.2621 13.7648C8.66673 13.7648 9.03129 13.5244 9.33176 13.1118H7.76934C7.76894 13.1154 7.76853 13.119 7.76813 13.1226C7.76457 13.1543 7.76133 13.1831 7.76133 13.2119Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$a=_export_sfc(_sfc_main$Y,[["render",_sfc_render$q]]),SignatureToolBar_vue_vue_type_style_index_0_scoped_974cf520_lang="",_hoisted_1$D={key:0,class:"signature-tool"},_sfc_main$X={__name:"SignatureToolBar",setup(e){const{switchTool:n,switchAnnotationEditorMode:r,verifySignature:o}=core,s=useDocumentStore(),u=useViewerStore(),d=computed(()=>s.getActiveTool),f=computed(()=>s.getSignatures),g=computed(()=>s.getDisableDigitalSignature),m=computed(()=>s.getDisableElectronicSignature),y=computed(()=>u.getDisableSignatureTool),v=w=>{s.setToolState(w),u.toggleActiveHand(!1),n(0),r(0)},_=async()=>{v(""),await o();const w=f.value;if(w.length!==0){if(w.length===1){const x=w[0].signerList[0].isSignVerified,k=w[0].signerList[0].isCertTrusted;x&&k?u.setSignatureVerify(1):x?x&&!k&&u.setSignatureVerify(3):u.setSignatureVerify(2);return}else for(let x=0;x<w.length;x++){const k=w[x].signerList[0].isSignVerified,S=w[x].signerList[0].isCertTrusted;if(!(k&&S)&&(!k||!S)){u.setSignatureVerify(2);return}}u.setSignatureVerify(1)}};return(w,x)=>{const k=__unplugin_components_0$a,S=_sfc_main$3O,M=__unplugin_components_2$4,E=__unplugin_components_3$4,P=__unplugin_components_4$3;return y.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$D,[createVNode(S,{id:"createSignFieldButton",class:normalizeClass({active:d.value==="signatureFields"}),onClick:x[0]||(x[0]=T=>v("signatureFields")),title:w.$t("header.createSignField")},{default:withCtx(()=>[createVNode(k),createBaseVNode("span",null,toDisplayString$1(w.$t("header.createSignField")),1)]),_:1},8,["class","title"]),g.value?createCommentVNode("",!0):(openBlock(),createBlock(S,{key:0,class:normalizeClass({active:d.value==="addDigitalSign"}),onClick:x[1]||(x[1]=T=>v("addDigitalSign")),title:w.$t("header.addDigitalSign")},{default:withCtx(()=>[createVNode(M),createBaseVNode("span",null,toDisplayString$1(w.$t("header.addDigitalSign")),1)]),_:1},8,["class","title"])),m.value?createCommentVNode("",!0):(openBlock(),createBlock(S,{key:1,class:normalizeClass({active:d.value==="addElectronicSign"}),onClick:x[2]||(x[2]=T=>v("addElectronicSign")),title:w.$t("header.addElectronicSign")},{default:withCtx(()=>[createVNode(E),createBaseVNode("span",null,toDisplayString$1(w.$t("header.addElectronicSign")),1)]),_:1},8,["class","title"])),g.value?createCommentVNode("",!0):(openBlock(),createBlock(S,{key:2,onClick:_,title:w.$t("header.verifyDigitalSign"),disabled:!f.value.length},{default:withCtx(()=>[createVNode(P),createBaseVNode("span",null,toDisplayString$1(w.$t("header.verifyDigitalSign")),1)]),_:1},8,["title","disabled"]))]))}}},__unplugin_components_13=_export_sfc(_sfc_main$X,[["__scopeId","data-v-974cf520"]]),ComparedToolbar_vue_vue_type_style_index_0_lang="",_hoisted_1$C={class:"compare-toolbar"},_hoisted_2$9={class:"file-color"},_sfc_main$W={__name:"ComparedToolbar",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getCompareSetting("oldFileColor")),s=computed(()=>r.getCompareSetting("newFileColor")),u=()=>{n.setCompareStatus("end"),r.initCompareFiles()};return(d,f)=>{const g=_sfc_main$2I,m=__unplugin_components_1$a;return openBlock(),createElementBlock("div",_hoisted_1$C,[createVNode(g),createBaseVNode("div",_hoisted_2$9,[createBaseVNode("div",null,[createBaseVNode("div",{class:"color",style:normalizeStyle({"background-color":o.value})},null,4),createBaseVNode("span",null,toDisplayString$1(d.$t("compare.oldFile")),1)]),createBaseVNode("div",null,[createBaseVNode("div",{class:"color",style:normalizeStyle({"background-color":s.value})},null,4),createBaseVNode("span",null,toDisplayString$1(d.$t("compare.newFile")),1)])]),createVNode(m,{class:"close",onClick:u})])}}},SecurityToolbar_vue_vue_type_style_index_0_lang="",_hoisted_1$B={class:"security-toolbar"},_hoisted_2$8={class:"drop-down"},_hoisted_3$4={class:"drop-down"},_sfc_main$V={__name:"SecurityToolbar",props:["item"],setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=ref(!1),o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=computed(()=>v.value&&v.value.getMergedShow()),f=computed(()=>_.value&&_.value.getMergedShow()),g=computed(()=>o.getFilehasPwd),m=computed(()=>s.getWebviewerMode),y=computed(()=>o.getRedactionPrompted),v=ref(),_=ref(),w=()=>{v.value.setShow(!1),s.openElement("setPasswordModal")},x=async()=>{if(!g.value&&m.value!=="Standalone"||(v.value.setShow(!1),r.value))return;r.value=!0,await core.removePassword()?window.$message.success(n.$t("passwordDialog.removePwdSuccess"),{duration:3e3,icon:()=>h$1("img",{src:MessageSuccess})}):window.$message.error(n.$t("passwordDialog.removePwdFailure"),{duration:3e3,icon:()=>h$1("img",{src:MessageError})}),r.value=!1},k=S=>{y.value?u.value!==S&&(o.setToolState(S),s.resetPanels()):(o.setFirstEnterRedactionTool(S),s.openElement("redactionTipDialog")),_.value.setShow(!1)};return(S,M)=>{const E=__unplugin_components_12$1,P=_sfc_main$3O;return openBlock(),createElementBlock("div",_hoisted_1$B,[createVNode(unref(NPopover),{ref_key:"securityPopover",ref:v,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4,class:"security-popover"},{trigger:withCtx(()=>[createVNode(P,{class:normalizeClass({active:d.value,disabled:["redaction","remove"].includes(u.value)})},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(S.$t("security.pwdProtection")),1),createVNode(E,{class:"arrow-left"})]),_:1},8,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",{class:"drop-item",onClick:w},toDisplayString$1(S.$t("security.encryption")),1),createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!g.value&&m.value!=="Standalone"}]),onClick:x},toDisplayString$1(S.$t("security.decryption")),3)])]),_:1},512),createVNode(unref(NPopover),{ref_key:"redactionPopover",ref:_,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4,class:"security-popover"},{trigger:withCtx(()=>[createVNode(P,{class:normalizeClass({active:f.value||["redaction","remove"].includes(u.value)})},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(u.value==="redaction"?S.$t("security.fillBlack"):u.value==="remove"?S.$t("security.fillWhite"):S.$t("security.redaction")),1),createVNode(E,{class:"arrow-left"})]),_:1},8,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$4,[createBaseVNode("div",{class:"drop-item",onClick:M[0]||(M[0]=T=>k("redaction")),"data-element":"redaction"},toDisplayString$1(S.$t("security.fillBlack")),1),createBaseVNode("div",{class:"drop-item",onClick:M[1]||(M[1]=T=>k("remove")),"data-element":"remove"},toDisplayString$1(S.$t("security.fillWhite")),1)])]),_:1},512)])}}},_sfc_main$U={__name:"PushButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,g)=>{const m=__unplugin_components_0$r,y=_sfc_main$3O;return openBlock(),createBlock(y,{class:normalizeClass(["with-text",{active:u.value==="pushbutton"}]),title:f.$t("header.button"),onClick:g[0]||(g[0]=v=>d("pushbutton"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.button")),1)]),_:1},8,["title","class"])}}},_sfc_main$T={__name:"ComboBox",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,g)=>{const m=__unplugin_components_0$q,y=_sfc_main$3O;return openBlock(),createBlock(y,{class:normalizeClass(["with-text",{active:u.value==="combobox"}]),title:f.$t("header.comboButton"),onClick:g[0]||(g[0]=v=>d("combobox"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.comboButton")),1)]),_:1},8,["title","class"])}}},_sfc_main$S={__name:"ListBox",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,g)=>{const m=__unplugin_components_0$p,y=_sfc_main$3O;return openBlock(),createBlock(y,{class:normalizeClass(["with-text",{active:u.value==="listbox"}]),title:f.$t("header.listBox"),onClick:g[0]||(g[0]=v=>d("listbox"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.listBox")),1)]),_:1},8,["title","class"])}}},_sfc_main$R={__name:"RadioButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,g)=>{const m=__unplugin_components_0$o,y=_sfc_main$3O;return openBlock(),createBlock(y,{class:normalizeClass(["with-text",{active:u.value==="radiobutton"}]),title:f.$t("header.radioButton"),onClick:g[0]||(g[0]=v=>d("radiobutton"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.radioButton")),1)]),_:1},8,["title","class"])}}},_sfc_main$Q={__name:"CheckBoxButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,g)=>{const m=__unplugin_components_0$n,y=_sfc_main$3O;return openBlock(),createBlock(y,{class:normalizeClass(["with-text",{active:u.value==="checkbox"}]),title:f.$t("header.checkbox"),onClick:g[0]||(g[0]=v=>d("checkbox"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.checkbox")),1)]),_:1},8,["title","class"])}}},_sfc_main$P={__name:"TextFieldButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,g)=>{const m=__unplugin_components_0$m,y=_sfc_main$3O;return openBlock(),createBlock(y,{class:normalizeClass(["with-text",{active:u.value==="textfield"}]),title:f.$t("header.textField"),onClick:g[0]||(g[0]=v=>d("textfield"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t("header.textField")),1)]),_:1},8,["title","class"])}}},_sfc_main$O={},_hoisted_1$A={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$p(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$A,n[0]||(n[0]=[createBaseVNode("path",{d:"M14.2041 4.48883L3.08548 11.1043",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M16.9145 8.71439L5.51183 15.5114",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("path",{d:"M2.95577 5.93301L10 1.86603L17.0442 5.93301V14.067L10 18.134L2.95577 14.067V5.93301Z",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_3$3=_export_sfc(_sfc_main$O,[["render",_sfc_render$p]]),MeasurementToolBar_vue_vue_type_style_index_0_scoped_206c1763_lang="",_hoisted_1$z={class:"measurement-tool"},_sfc_main$N={__name:"MeasurementToolBar",props:["items"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=f=>{o.setToolState(f),s.toggleActiveHand(!1),n(0),r(0)};return(f,g)=>{const m=__unplugin_components_0$k,y=_sfc_main$3O,v=__unplugin_components_2$a,_=__unplugin_components_3$3,w=__unplugin_components_4$7,x=__unplugin_components_5$2;return openBlock(),createElementBlock("div",_hoisted_1$z,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(k,S)=>(openBlock(),createElementBlock(Fragment,{key:S},[k.type==="line"&&!k.hidden?(openBlock(),createBlock(y,{key:0,"data-element":k.dataElement,class:normalizeClass(["with-text",{active:u.value==="line"}]),title:f.$t(k.title),onClick:g[0]||(g[0]=M=>d("line"))},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(f.$t(k.title)),1)]),_:2},1032,["data-element","class","title"])):k.type==="multiline"&&!k.hidden?(openBlock(),createBlock(y,{key:1,"data-element":k.dataElement,class:normalizeClass(["with-text",{active:u.value==="multiline"}]),title:f.$t(k.title),onClick:g[1]||(g[1]=M=>d("multiline"))},{default:withCtx(()=>[createVNode(v),createBaseVNode("span",null,toDisplayString$1(f.$t(k.title)),1)]),_:2},1032,["data-element","class","title"])):k.type==="polygon"&&!k.hidden?(openBlock(),createBlock(y,{key:2,"data-element":k.dataElement,class:normalizeClass(["with-text",{active:u.value==="polygon"}]),title:f.$t(k.title),onClick:g[2]||(g[2]=M=>d("polygon"))},{default:withCtx(()=>[createVNode(_),createBaseVNode("span",null,toDisplayString$1(f.$t(k.title)),1)]),_:2},1032,["data-element","class","title"])):k.type==="rectangle"&&!k.hidden?(openBlock(),createBlock(y,{key:3,"data-element":k.dataElement,class:normalizeClass(["with-text",{active:u.value==="rectangle"}]),title:f.$t(k.title),onClick:g[3]||(g[3]=M=>d("rectangle"))},{default:withCtx(()=>[createVNode(w),createBaseVNode("span",null,toDisplayString$1(f.$t(k.title)),1)]),_:2},1032,["data-element","class","title"])):k.type==="circle"&&!k.hidden?(openBlock(),createBlock(y,{key:4,"data-element":k.dataElement,class:normalizeClass(["with-text",{active:u.value==="circle"}]),title:f.$t(k.title),onClick:g[4]||(g[4]=M=>d("circle"))},{default:withCtx(()=>[createVNode(x),createBaseVNode("span",null,toDisplayString$1(f.$t(k.title)),1)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)],64))),128))])}}},__unplugin_components_4$2=_export_sfc(_sfc_main$N,[["__scopeId","data-v-206c1763"]]),_sfc_main$M={},_hoisted_1$y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$o(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$y,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.2802 7.62131L16.8105 8.15164L16.2802 8.68197L12.6589 12.3033L11.5982 11.2426L13.9392 8.90164H7.24989C5.7311 8.90164 4.49989 10.1329 4.49989 11.6516C4.49989 13.1704 5.7311 14.4016 7.24989 14.4016H14.7499V15.9016H7.24989C4.90268 15.9016 2.99989 13.9988 2.99989 11.6516C2.99989 9.30443 4.90268 7.40164 7.24989 7.40164H13.9392L11.5982 5.06066L12.6589 4L16.2802 7.62131Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4$1=_export_sfc(_sfc_main$M,[["render",_sfc_render$o]]),_sfc_main$L={},_hoisted_1$x={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$n(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$x,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.53033 7.62131L3 8.15164L3.53033 8.68197L7.15164 12.3033L8.2123 11.2426L5.87132 8.90164H12.5607C14.0794 8.90164 15.3107 10.1329 15.3107 11.6516C15.3107 13.1704 14.0794 14.4016 12.5607 14.4016H5.06066V15.9016H12.5607C14.9079 15.9016 16.8107 13.9988 16.8107 11.6516C16.8107 9.30443 14.9079 7.40164 12.5607 7.40164H5.87132L8.2123 5.06066L7.15164 4L3.53033 7.62131Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3$2=_export_sfc(_sfc_main$L,[["render",_sfc_render$n]]),_sfc_main$K={},_hoisted_1$w={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$m(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$w,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 3H1.75V3.75V16.25V17H2.5H19H19.75V16.25V10H18.25V15.5H18.2147L12.8718 10.8178L10.5643 13.25L6.29496 9.75L3.25 12.9595V4.5H13.75V3H2.5ZM14.5 8.25C14.5 9.07843 13.8284 9.75 13 9.75C12.1716 9.75 11.5 9.07843 11.5 8.25C11.5 7.42157 12.1716 6.75 13 6.75C13.8284 6.75 14.5 7.42157 14.5 8.25ZM16.75 6.75H14.5V5.25H16.75V3H18.25V5.25H20.5V6.75H18.25V9H16.75V6.75Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_2$3=_export_sfc(_sfc_main$K,[["render",_sfc_render$m]]),_sfc_main$J={},_hoisted_1$v={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$l(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$v,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 3H1.5V3.75V16.25V17H2.25H18.75H19.5V16.25V10H18V15.5H3V4.5H13.5V3H2.25ZM12.5 8V5.5H4.5V8H6V7H7.75V13H7V14.5H10V13H9.25V7H11V8H12.5ZM16.75 6.75H14.5V5.25H16.75V3H18.25V5.25H20.5V6.75H18.25V9H16.75V6.75Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$9=_export_sfc(_sfc_main$J,[["render",_sfc_render$l]]),ContentEditorToolBar_vue_vue_type_style_index_0_scoped_02c1a51a_lang="",_hoisted_1$u={class:"edit-tool"},_hoisted_2$7=["data-element"],_sfc_main$I={__name:"ContentEditorToolBar",props:["items"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r,resetOperate:o}=core,s=useDocumentStore(),u=useViewerStore(),d=computed(()=>s.getActiveTool),f=computed(()=>u.getCurrentPage),g=ref(0),m=ref(0),y=ref(!0),v=S=>{s.setToolState(S),u.toggleActiveHand(!1),n(0),r(0),d.value==="addImage"&&isMobileDevice&&document.getElementById("editorImageInput").click()},_=S=>{const M=S.target.files[0];if(!M)return;if(M.size>2*1024*1024){window.$message.error(instance.$t("editorPanel.maximum"),{duration:3e3,icon:()=>h$1("img",{src:MessageError})}),S.target.value="";return}const E=new FileReader;E.onload=function(P){const T=new Image;T.onload=function(){const D={imageBase64:P.target.result,width:T.width,height:T.height,pageNum:f.value};core.addEditorImage(D)},T.onerror=function(D){console.log(D)},T.src=P.target.result},E.onerror=function(P){console.log(P)},E.readAsDataURL(M)},w=S=>{o({operation:S,pageNumber:f.value})},x=S=>{g.value=S.undoListLength,m.value=S.redoListLength};core.addEvent("changeOperateList",x);const k=S=>{if(!y.value)return;const M=S.key.toLowerCase();(S.ctrlKey||S.metaKey)&&M==="z"&&!S.shiftKey&&g.value&&w("undo"),(S.ctrlKey&&M==="y"||S.metaKey&&S.shiftKey&&M==="z")&&m.value&&w("redo")};return onMounted(()=>{document.addEventListener("keydown",k)}),onUnmounted(()=>{document.removeEventListener("keydown",k),y.value=!1}),(S,M)=>{const E=__unplugin_components_0$9,P=_sfc_main$3O,T=__unplugin_components_2$3,D=__unplugin_components_3$2,F=__unplugin_components_4$1;return openBlock(),createElementBlock("div",_hoisted_1$u,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(I,N)=>(openBlock(),createElementBlock(Fragment,{key:N},[I.type==="addText"?(openBlock(),createBlock(P,{key:0,"data-element":I.dataElement,class:normalizeClass(["operate",{active:d.value==="addText"}]),onClick:M[0]||(M[0]=q=>v("addText")),title:S.$t(I.title)},{default:withCtx(()=>[createVNode(E),createTextVNode(toDisplayString$1(S.$t(I.title)),1)]),_:2},1032,["data-element","class","title"])):I.type==="addImage"?(openBlock(),createBlock(P,{key:1,"data-element":I.dataElement,class:normalizeClass(["operate",{active:d.value==="addImage"}]),onClick:M[1]||(M[1]=q=>v("addImage")),title:"Add Image"},{default:withCtx(()=>[createVNode(T),createTextVNode(toDisplayString$1(S.$t(I.title)),1),unref(isMobileDevice)?(openBlock(),createElementBlock("input",{key:0,type:"file",id:"editorImageInput",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:_,name:"editor"},null,32)):createCommentVNode("",!0)]),_:2},1032,["data-element","class"])):I.type==="divider"?(openBlock(),createElementBlock("div",{key:2,"data-element":I.dataElement,class:"divider pc"},null,8,_hoisted_2$7)):I.type==="undo"?(openBlock(),createBlock(P,{key:3,"data-element":I.dataElement,class:normalizeClass(["history",{disabled:!g.value}]),id:"undo",title:S.$t(I.title),onClick:M[2]||(M[2]=q=>w("undo"))},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["data-element","class","title"])):I.type==="redo"?(openBlock(),createBlock(P,{key:4,"data-element":I.dataElement,class:normalizeClass(["history",{disabled:!m.value}]),id:"redo",title:S.$t(I.title),onClick:M[3]||(M[3]=q=>w("redo"))},{default:withCtx(()=>[createVNode(F)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)],64))),128))])}}},__unplugin_components_3$1=_export_sfc(_sfc_main$I,[["__scopeId","data-v-02c1a51a"]]),_sfc_main$H={__name:"StickyNoteButton",props:["item"],setup(e){const{switchAnnotationEditorMode:n,switchTool:r}=core,o=useViewerStore(),s=useDocumentStore(),u=g=>{s.setToolState(g),o.toggleActiveHand(!1)},d=computed(()=>s.getActiveTool);computed(()=>o.getActiveStickNote);const f=()=>{u("text"),o.toggleActiveStickNote(),n(0),r(0),o.closeActiveHand(),o.closeActiveMeasure()};return(g,m)=>{const y=__unplugin_components_0$c,v=_sfc_main$3O;return openBlock(),createBlock(v,mergeProps({isActive:d.value==="text"},{...e.item},{onClick:f,title:g.$t("header.note")}),{default:withCtx(()=>[createVNode(y)]),_:1},16,["isActive","title"])}}},Annotate_vue_vue_type_style_index_0_lang="",Annotate_vue_vue_type_style_index_1_scoped_7a48cfa9_lang="",_hoisted_1$t={key:1,class:"markup-container"},_hoisted_2$6={key:3,class:"shape-container"},_hoisted_3$3={key:0,class:"colors-container"},_hoisted_4$3={class:"cell-container"},_hoisted_5$3={class:"cell-container"},_hoisted_6$3={class:"cell-container"},_hoisted_7$2={class:"cell-container"},_hoisted_8$2={class:"color-picker"},_sfc_main$G={__name:"Annotate",props:["items"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),s=useViewerStore(),u=computed(()=>o.getActiveTool),d=computed(()=>["highlight","underline","squiggly","strikeout"].includes(u.value)),f=["highlight","underline","squiggly","strikeout","square","circle","arrow","line","ink"],g=computed(()=>["square","circle","arrow","line"].includes(u.value)),m=computed(()=>o.getMarkupToolState),y=computed(()=>o.getShapeToolState),v=computed(()=>o.getActiveToolColor),_=ref("rgb(0, 0, 0)"),w=T=>{if(o.setToolState(T),s.toggleActiveHand(!1),n(0),r(0),T==="stamp"?s.toggleElement("stampPanel"):s.closeElement("stampPanel"),u.value==="image"){const D=isMobileDevice?"annotaionImageInput":"signImageInput";document.getElementById(D).click()}},x=T=>{o.setMarkupToolState(T),w(T)},k=T=>{o.setShapeToolState(T),w(T)},S=T=>{o.setActiveToolColor(T)},M=()=>{u.value==="image"&&w("image")};core.addEvent("imageChange",M);const E=T=>{areColorsSimilar(T,v.value)||S(T)},P=T=>{_.value=T};return onUnmounted(()=>{core.removeEvent("imageChange",M)}),(T,D)=>{const F=_sfc_main$H,I=__unplugin_components_1$6,N=_sfc_main$3O,q=__unplugin_components_3$9,Y=__unplugin_components_4$8,Z=__unplugin_components_5$3,j=__unplugin_components_6$3,ne=__unplugin_components_7$1,le=__unplugin_components_8,J=__unplugin_components_9$2,O=__unplugin_components_10$1,U=__unplugin_components_11$1,W=__unplugin_components_12,H=__unplugin_components_13$1,X=__unplugin_components_14$2,Q=_sfc_main$2g,fe=__unplugin_components_16$1;return openBlock(),createElementBlock(Fragment,null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(Se,Pe)=>(openBlock(),createElementBlock(Fragment,{key:`${Se.type}-${Se.dataElement||Pe}`},[Se.type==="note"&&!Se.hidden?(openBlock(),createBlock(F,{key:0,"data-element":Se.dataElement},null,8,["data-element"])):["highlight","underline","strikeout","squiggly"].includes(Se.type)?(openBlock(),createElementBlock("div",_hoisted_1$t,[Se.type==="highlight"&&!Se.hidden?(openBlock(),createBlock(N,{key:0,"data-element":Se.dataElement,class:normalizeClass({active:d.value&&m.value==="highlight"}),onClick:D[0]||(D[0]=withModifiers($e=>x("highlight"),["stop"])),title:T.$t("header.highlight")},{default:withCtx(()=>[createVNode(I)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Se.type==="underline"&&!Se.hidden?(openBlock(),createBlock(N,{key:1,"data-element":Se.dataElement,class:normalizeClass({active:d.value&&m.value==="underline"}),onClick:D[1]||(D[1]=withModifiers($e=>x("underline"),["stop"])),title:T.$t("header.underline")},{default:withCtx(()=>[createVNode(q)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Se.type==="strikeout"&&!Se.hidden?(openBlock(),createBlock(N,{key:2,"data-element":Se.dataElement,class:normalizeClass({active:d.value&&m.value==="strikeout"}),onClick:D[2]||(D[2]=withModifiers($e=>x("strikeout"),["stop"])),title:T.$t("header.strikeout")},{default:withCtx(()=>[createVNode(Y)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Se.type==="squiggly"&&!Se.hidden?(openBlock(),createBlock(N,{key:3,"data-element":Se.dataElement,class:normalizeClass({active:d.value&&m.value==="squiggly"}),onClick:D[3]||(D[3]=withModifiers($e=>x("squiggly"),["stop"])),title:T.$t("header.squiggly")},{default:withCtx(()=>[createVNode(Z)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)])):createCommentVNode("",!0),Se.type==="ink"&&!Se.hidden?(openBlock(),createBlock(N,{key:2,"data-element":Se.dataElement,class:normalizeClass({active:u.value==="ink"}),onClick:D[4]||(D[4]=$e=>w("ink")),title:T.$t("header.ink")},{default:withCtx(()=>[createVNode(j)]),_:2},1032,["data-element","class","title"])):["circle","square","arrow","line"].includes(Se.type)?(openBlock(),createElementBlock("div",_hoisted_2$6,[Se.type==="circle"&&!Se.hidden?(openBlock(),createBlock(N,{key:0,"data-element":Se.dataElement,class:normalizeClass({active:g.value&&y.value==="circle"}),onClick:D[5]||(D[5]=withModifiers($e=>k("circle"),["stop"])),title:T.$t("header.circle")},{default:withCtx(()=>[createVNode(ne)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Se.type==="square"&&!Se.hidden?(openBlock(),createBlock(N,{key:1,"data-element":Se.dataElement,class:normalizeClass({active:g.value&&y.value==="square"}),onClick:D[6]||(D[6]=withModifiers($e=>k("square"),["stop"])),title:T.$t("header.square")},{default:withCtx(()=>[createVNode(le)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Se.type==="arrow"&&!Se.hidden?(openBlock(),createBlock(N,{key:2,"data-element":Se.dataElement,class:normalizeClass({active:g.value&&y.value==="arrow"}),onClick:D[7]||(D[7]=withModifiers($e=>k("arrow"),["stop"])),title:T.$t("header.arrow")},{default:withCtx(()=>[createVNode(J)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Se.type==="line"&&!Se.hidden?(openBlock(),createBlock(N,{key:3,"data-element":Se.dataElement,class:normalizeClass({active:g.value&&y.value==="line"}),onClick:D[8]||(D[8]=withModifiers($e=>k("line"),["stop"])),title:T.$t("header.line")},{default:withCtx(()=>[createVNode(O)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)])):Se.type==="freetext"&&!Se.hidden?(openBlock(),createBlock(N,{key:4,"data-element":Se.dataElement,class:normalizeClass({active:u.value==="freetext"}),onClick:D[9]||(D[9]=$e=>w("freetext")),title:T.$t("header.freetext")},{default:withCtx(()=>[createVNode(U)]),_:2},1032,["data-element","class","title"])):Se.type==="stamp"&&!Se.hidden?(openBlock(),createBlock(N,{key:5,"data-element":Se.dataElement,class:normalizeClass({active:u.value==="stamp"}),onClick:D[10]||(D[10]=$e=>w("stamp")),title:T.$t("header.stamp")},{default:withCtx(()=>[createVNode(W)]),_:2},1032,["data-element","class","title"])):Se.type==="image"&&!Se.hidden?(openBlock(),createBlock(N,{key:6,"data-element":Se.dataElement,class:normalizeClass({active:u.value==="image"}),onClick:D[11]||(D[11]=$e=>w("image")),title:T.$t("header.image")},{default:withCtx(()=>[createVNode(H)]),_:2},1032,["data-element","class","title"])):Se.type==="link"&&!Se.hidden?(openBlock(),createBlock(N,{key:7,"data-element":Se.dataElement,class:normalizeClass({active:u.value==="link"}),onClick:D[12]||(D[12]=$e=>w("link")),title:T.$t("header.link")},{default:withCtx(()=>[createVNode(X)]),_:2},1032,["data-element","class","title"])):Se.name==="customButton"&&!Se.hidden&&!Se.dropItem?(openBlock(),createBlock(Q,{key:8,item:Se},null,8,["item"])):createCommentVNode("",!0)],64))),128)),D[21]||(D[21]=createBaseVNode("div",{class:"divider pc"},null,-1)),f.includes(u.value)?(openBlock(),createElementBlock("div",_hoisted_3$3,[createBaseVNode("span",_hoisted_4$3,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:v.value==="#FF0000"}]),onClick:D[13]||(D[13]=Se=>S("#FF0000"))},D[17]||(D[17]=[createBaseVNode("span",{class:"cell red"},null,-1)]),2)]),createBaseVNode("span",_hoisted_5$3,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:v.value==="#FFEC66"}]),onClick:D[14]||(D[14]=Se=>S("#FFEC66"))},D[18]||(D[18]=[createBaseVNode("span",{class:"cell yellow"},null,-1)]),2)]),createBaseVNode("span",_hoisted_6$3,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:v.value==="#2D77FA"}]),onClick:D[15]||(D[15]=Se=>S("#2D77FA"))},D[19]||(D[19]=[createBaseVNode("span",{class:"cell blue"},null,-1)]),2)]),createBaseVNode("span",_hoisted_7$2,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:v.value==="#64BC38"}]),onClick:D[16]||(D[16]=Se=>S("#64BC38"))},D[20]||(D[20]=[createBaseVNode("span",{class:"cell green"},null,-1)]),2)]),createBaseVNode("div",_hoisted_8$2,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:_.value})},null,4),createVNode(unref(NColorPicker),{onComplete:E,"onUpdate:value":P,value:_.value,"show-alpha":!1,class:"annot-color"},{label:withCtx(()=>[createVNode(fe)]),_:1},8,["value"])])])):createCommentVNode("",!0)],64)}}},__unplugin_components_2$2=_export_sfc(_sfc_main$G,[["__scopeId","data-v-7a48cfa9"]]),Toolbar_vue_vue_type_style_index_0_scoped_15353ecc_lang="",_hoisted_1$s={class:"scroll-container left"},_hoisted_2$5={class:"scroll-container right"},_sfc_main$F={__name:"Toolbar",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=useDocumentStore(),s=r.getToolItems,u=computed(()=>r.getCompareStatus),d=computed(()=>r.getDisabledHeader),f=computed(()=>r.getToolMode),g=computed(()=>o.getActiveTool),m=computed(()=>r.getCurrentPage),y=computed(()=>r.getDisableSignatureTool),v=ref(!1),_=ref(null),w=ref(!1),x=ref(!1);watch(f,async(T,D)=>{v.value=!(["view","document","separation"].includes(T)||T==="compare"&&u!=="finished"),w.value=!1,x.value=!1,await nextTick(),v.value&&(_.value&&_.value.scrollLeft>0&&(w.value=!0),_.value&&_.value.scrollLeft+_.value.clientWidth<_.value.scrollWidth&&(x.value=!0))}),watch(u,async(T,D)=>{v.value=!(["view","document"].includes(f.value)||f.value==="compare"&&T!=="finished"),w.value=!1,x.value=!1});const k=()=>{_.value.scrollTo({left:_.value.scrollLeft-_.value.clientWidth,behavior:"smooth"})},S=()=>{_.value.scrollTo({left:_.value.scrollLeft+_.value.clientWidth,behavior:"smooth"})},M=T=>{w.value=T.target.scrollLeft>0,x.value=T.target.scrollLeft+T.target.clientWidth<T.target.scrollWidth-1},E=T=>{let D=T.target.files[0];if(!D)return;if(D&&D.size>2*1024*1024){window.$message.error(n.$t("signatures.uploadError"),{duration:5e3,icon:()=>h("img",{src:MessageError})}),T.target.value="";return}if(f.value==="annotation"&&(o.setToolState("image"),core.handleCreateStatus({bool:!0,fileData:D})),g.value!=="image")return;const F=new FileReader;F.onload=function(I){const N=new Image;N.onload=function(){const q={imageBase64:I.target.result,width:N.width,height:N.height,pageNum:m.value};core.addAnnotationImage(q)},N.onerror=function(q){console.log(q)},N.src=I.target.result},F.onerror=function(I){console.log(I)},F.readAsDataURL(D)},P=()=>{o.setToolState("image")};return(T,D)=>{const F=__unplugin_components_0$f,I=_sfc_main$3O,N=__unplugin_components_2$2,q=__unplugin_components_3$1,Y=__unplugin_components_4$2,Z=_sfc_main$P,j=_sfc_main$Q,ne=_sfc_main$R,le=_sfc_main$S,J=_sfc_main$T,O=_sfc_main$U,U=_sfc_main$V,W=_sfc_main$W,H=__unplugin_components_13,X=__unplugin_components_14$1;return f.value==="sign"&&y.value?createCommentVNode("",!0):withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["toolbar",{security:f.value==="security",editor:f.value==="editor",disabled:d.value}])},[withDirectives(createBaseVNode("div",_hoisted_1$s,[createVNode(I,{class:"flip-button",onClick:k},{default:withCtx(()=>[createVNode(F)]),_:1})],512),[[vShow,unref(isMobileDevice)&&w.value]]),createBaseVNode("div",{class:"tools",ref_key:"toolbarRef",ref:_,onScroll:M},[f.value==="annotation"?(openBlock(),createBlock(N,{key:0,items:unref(s)[f.value]},null,8,["items"])):f.value==="editor"?(openBlock(),createBlock(q,{key:1,items:unref(s)[f.value]},null,8,["items"])):f.value==="measurement"?(openBlock(),createBlock(Y,{key:2,items:unref(s)[f.value]},null,8,["items"])):(openBlock(!0),createElementBlock(Fragment,{key:3},renderList(unref(s)[f.value],(Q,fe)=>(openBlock(),createElementBlock(Fragment,{key:`${Q.type}-${Q.dataElement||fe}`},[Q.type==="textFieldButton"&&!Q.hidden?(openBlock(),createBlock(Z,{key:0,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="checkBoxButton"&&!Q.hidden?(openBlock(),createBlock(j,{key:1,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="radioButton"&&!Q.hidden?(openBlock(),createBlock(ne,{key:2,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="listBox"&&!Q.hidden?(openBlock(),createBlock(le,{key:3,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="comboBox"&&!Q.hidden?(openBlock(),createBlock(J,{key:4,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="pushButton"&&!Q.hidden?(openBlock(),createBlock(O,{key:5,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="securityToolbar"?(openBlock(),createBlock(U,{key:6,item:Q},null,8,["item"])):Q.type==="comparedToolbar"?(openBlock(),createBlock(W,{key:7})):Q.type==="signatureToolBar"?(openBlock(),createBlock(H,{key:8})):createCommentVNode("",!0)],64))),128))],544),withDirectives(createBaseVNode("div",_hoisted_2$5,[createVNode(I,{class:"flip-button",onClick:S},{default:withCtx(()=>[createVNode(X)]),_:1})],512),[[vShow,unref(isMobileDevice)&&x.value]]),unref(isMobileDevice)?(openBlock(),createElementBlock("input",{key:0,type:"file",id:"annotaionImageInput",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:E,onClick:P,name:"annotaion"},null,32)):createCommentVNode("",!0)],2)),[[vShow,v.value]])}}},__unplugin_components_1$1=_export_sfc(_sfc_main$F,[["__scopeId","data-v-15353ecc"]]),DocumentEditorHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$r={class:"header-items document-editor-header"},_hoisted_2$4={class:"right-container"},_sfc_main$E={__name:"DocumentEditorHeader",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getDocEditorOperationList),s=computed(()=>n.getToolMode),u=computed(()=>n.getScrollMode),d=computed(()=>n.getPageMode);watch(s,(y,v)=>{v==="document"&&r.setDocEditorOperationList("reset")});const f=()=>{r.setToolState(""),n.setActiveToolMode("view"),n.setCompareStatus(""),core.saveDocumentEdit("cancel")},g=async()=>{r.resetSetting(),r.setToolState(""),n.setActiveToolMode("view"),n.setUpload(!0),n.setUploadLoading(!0);const y=n.getScale,v=await core.saveDocumentEdit(),_=r.getPassword;await core.loadDocument(v,{password:_}),r.setCurrentPdfData(v);const w=core.getPagesCount();r.setTotalPages(w),r.setOutline(core.getOutlines()),n.setCurrentPage(1),core.switchScrollMode(u.value==="Vertical"?0:1),core.switchSpreadMode(d.value),n.setCurrentScale(y/100),core.scaleChanged(y/100),n.setUploadLoading(!1)},m=async()=>{const{blobData:y,filename:v}=await core.saveDocumentEdit("saveAs");FileSaver_min.exports.saveAs(y,v)};return(y,v)=>(openBlock(),createElementBlock("div",_hoisted_1$r,[createBaseVNode("div",{class:"rect-button white",onClick:f},toDisplayString$1(y.$t("cancel")),1),createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!o.value.length}]),onClick:g},toDisplayString$1(y.$t("documentEditor.save")),3),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!o.value.length}]),onClick:m},toDisplayString$1(y.$t("documentEditor.saveAs")),3)])]))}},_sfc_main$D={},_hoisted_1$q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$k(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$q,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.25 1.25H5H15H15.75V2V5.25H18H18.75V6V15V15.75H18H15V17.5V19H13.5H6.5H5V17.5V15.75H2H1.25V15V6V5.25H2H4.25V2V1.25ZM14.25 2.75V5.25H5.75V2.75H14.25ZM15 14.25H17.25V6.75H2.75V14.25H5V12.5V11H6.5H13.5H15V12.5V14.25ZM6.5 12.5H13.5V17.5H6.5V12.5ZM15 10C15.5523 10 16 9.55229 16 9C16 8.44772 15.5523 8 15 8C14.4477 8 14 8.44772 14 9C14 9.55229 14.4477 10 15 10Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$8=_export_sfc(_sfc_main$D,[["render",_sfc_render$k]]),_sfc_main$C={__name:"PrintButton",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getToolMode),o=computed(()=>n.getCompareMode),s=async()=>{if(r.value==="compare"&&o.value==="content"){n.openElement("printSettingDialog");return}n.setDownloading(!0);try{const u=await core.webViewerNamedAction("Print");n.setDownloading(!1),u||n.setDownloadError("Print")}catch(u){console.log(u)}};return(u,d)=>{const f=__unplugin_components_0$8,g=_sfc_main$3O;return openBlock(),createBlock(g,mergeProps({...e.item},{onClick:s,title:u.$t("header.print")}),{default:withCtx(()=>[createVNode(f)]),_:1},16,["title"])}}},DownloadButton_vue_vue_type_style_index_0_lang="",_sfc_main$B={__name:"DownloadButton",setup(e){const n=useViewerStore(),r=computed(()=>n.getToolMode),o=computed(()=>n.getCompareMode),{download:s}=core,u=async()=>{if(r.value==="compare"&&o.value==="content"){n.openElement("downloadSettingDialog");return}n.setDownloading(!0);try{const d=await s();n.setDownloading(!1),d||n.setDownloadError("Downloaded")}catch(d){console.log(d)}};return(d,f)=>{const g=__unplugin_components_0$j,m=_sfc_main$3O;return openBlock(),createBlock(m,{onClick:u,title:d.$t("header.download")},{default:withCtx(()=>[createVNode(g)]),_:1},8,["title"])}}},CompareButtons_vue_vue_type_style_index_0_lang="",_hoisted_1$p={class:"compare-buttons"},_sfc_main$A={__name:"CompareButtons",setup(e){const{loadDocument:n}=core,r=useViewerStore(),o=useDocumentStore(),s=computed(()=>r.getCompareStatus),u=computed(()=>o.getCompareFile("oldFile")&&o.getCompareFile("newFile")&&s.value!=="finished"),d=computed(()=>o.getCurrentPdfData),f=()=>{r.closeElement("compareSettingDialog"),o.setToolState(""),r.setActiveToolMode("view"),s.value&&g(),r.setCompareStatus("")},g=async()=>{if(d.value){r.setUploadLoading(!0),o.setTotalPages(0);try{const _=d.value;_.options.notUpdatePwd=!0,await n(_.pdf,_.options)}catch(_){if(console.log(_),_==="invalid_file_error"||_==="no_password_given"||_==="incorrect_password"){r.setUpload(!1),o.setLoadingProgress(0),r.resetSetting();const w=document.getElementById("fileInput");w.value="",o.setCurrentPdfData();return}}r.setUploadLoading(!1);const y=core.getPagesCount(),v=core.getScale();o.setTotalPages(y),r.setCurrentPage(1),r.setCurrentScale(v)}},m=()=>{r.openElement("compareSettingDialog"),o.initCompareSetting(),r.setCompareMode("content")};return(y,v)=>(openBlock(),createElementBlock("div",_hoisted_1$p,[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!u.value}]),onClick:m},toDisplayString$1(y.$t("compare.startCompare")),3),createBaseVNode("div",{class:"rect-button white",onClick:f},toDisplayString$1(y.$t("compare.exit")),1)]))}},_sfc_main$z={},_hoisted_1$o={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$j(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$o,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.70581 6.36601L10 2.73204L16.2943 6.36601V13.634L10 17.2679L3.70581 13.634V6.36601ZM9.43754 1.32475C9.78562 1.12379 10.2145 1.12379 10.5625 1.32475L17.2318 5.17523C17.5798 5.37619 17.7943 5.74758 17.7943 6.14951V13.8505C17.7943 14.2524 17.5798 14.6238 17.2318 14.8247L10.5625 18.6752C10.2145 18.8762 9.78561 18.8762 9.43754 18.6752L2.76831 14.8247C2.42023 14.6238 2.20581 14.2524 2.20581 13.8505V6.14951C2.20581 5.74758 2.42023 5.37619 2.76831 5.17523L9.43754 1.32475ZM11.875 9.99999C11.875 11.0355 11.0356 11.875 10 11.875C8.96451 11.875 8.12504 11.0355 8.12504 9.99999C8.12504 8.96445 8.96451 8.12499 10 8.12499C11.0356 8.12499 11.875 8.96445 11.875 9.99999ZM13.375 9.99999C13.375 11.8639 11.864 13.375 10 13.375C8.13608 13.375 6.62504 11.8639 6.62504 9.99999C6.62504 8.13603 8.13608 6.62499 10 6.62499C11.864 6.62499 13.375 8.13603 13.375 9.99999Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_9$1=_export_sfc(_sfc_main$z,[["render",_sfc_render$j]]),_sfc_main$y={},_hoisted_1$n={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$i(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$n,n[0]||(n[0]=[createBaseVNode("path",{d:"M18.3327 10C18.3327 10 14.6017 16.25 9.99935 16.25C5.39698 16.25 1.66602 10 1.66602 10C1.66602 10 5.39698 3.75 9.99935 3.75C14.6017 3.75 18.3327 10 18.3327 10Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),createBaseVNode("circle",{cx:"10",cy:"10",r:"2",stroke:"currentColor","stroke-width":"1.5"},null,-1)]))}const __unplugin_components_0$7=_export_sfc(_sfc_main$y,[["render",_sfc_render$i]]),_sfc_main$x={},_hoisted_1$m={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$h(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$m,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.1722 3.67907C9.75796 3.67907 9.42218 3.34328 9.42218 2.92907V1.75C9.42218 1.33579 9.75796 1 10.1722 1C10.5864 1 10.9222 1.33579 10.9222 1.75V2.92907C10.9222 3.34328 10.5864 3.67907 10.1722 3.67907ZM10.0862 13.3672C11.9032 13.3672 13.3761 11.8942 13.3761 10.0772C13.3761 8.26024 11.9032 6.78727 10.0862 6.78727C8.26916 6.78727 6.79619 8.26024 6.79619 10.0772C6.79619 11.8942 8.26916 13.3672 10.0862 13.3672ZM10.0862 14.8672C12.7316 14.8672 14.8761 12.7227 14.8761 10.0772C14.8761 7.43181 12.7316 5.28727 10.0862 5.28727C7.44074 5.28727 5.29619 7.43181 5.29619 10.0772C5.29619 12.7227 7.44074 14.8672 10.0862 14.8672ZM14.7612 4.51466C14.468 4.80718 14.468 5.28144 14.7612 5.57395C15.0545 5.86646 15.53 5.86646 15.8233 5.57395L16.6592 4.74023C16.9524 4.44771 16.9524 3.97345 16.6592 3.68094C16.3659 3.38842 15.8904 3.38842 15.5971 3.68094L14.7612 4.51466ZM16.6633 10.1509C16.6633 9.73669 16.9991 9.4009 17.4133 9.4009H18.5954C19.0096 9.4009 19.3454 9.73669 19.3454 10.1509C19.3454 10.5651 19.0096 10.9009 18.5954 10.9009H17.4133C16.9991 10.9009 16.6633 10.5651 16.6633 10.1509ZM15.8233 14.7278C15.53 14.4353 15.0546 14.4353 14.7613 14.7278C14.468 15.0203 14.468 15.4946 14.7613 15.7871L15.5972 16.6208C15.8904 16.9134 16.3659 16.9134 16.6592 16.6208C16.9525 16.3283 16.9525 15.8541 16.6592 15.5615L15.8233 14.7278ZM10.1721 16.6227C10.5863 16.6227 10.9221 16.9585 10.9221 17.3727V18.5517C10.9221 18.966 10.5863 19.3017 10.1721 19.3017C9.75784 19.3017 9.42206 18.966 9.42206 18.5517V17.3727C9.42206 16.9585 9.75784 16.6227 10.1721 16.6227ZM5.58357 15.7871C5.87684 15.4946 5.87684 15.0204 5.58357 14.7279C5.2903 14.4353 4.81481 14.4353 4.52154 14.7279L3.68565 15.5616C3.39238 15.8541 3.39238 16.3284 3.68565 16.6209C3.97893 16.9134 4.45441 16.9134 4.74769 16.6209L5.58357 15.7871ZM3.68212 10.1509C3.68212 10.5651 3.34633 10.9009 2.93212 10.9009H1.75C1.33579 10.9009 1 10.5651 1 10.1509C1 9.7367 1.33579 9.40091 1.75 9.40091H2.93212C3.34633 9.40091 3.68212 9.7367 3.68212 10.1509ZM4.52151 5.57399C4.81478 5.8665 5.29027 5.8665 5.58354 5.57399C5.87681 5.28147 5.87681 4.80721 5.58354 4.5147L4.74765 3.68098C4.45438 3.38846 3.97889 3.38846 3.68562 3.68098C3.39235 3.97349 3.39235 4.44775 3.68562 4.74026L4.52151 5.57399Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_6$1=_export_sfc(_sfc_main$x,[["render",_sfc_render$h]]),_sfc_main$w={},_hoisted_1$l={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$l,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 1.25H5.25V2V4H6.75V2.75H14.0533L17.25 6.75603V17.1111V17.25H6.75V16H5.25V18V18.75H6H18H18.75V18V17.1111V6.49346V6.23089L18.5862 6.02566L15.0005 1.5322L14.7753 1.25H14.4143H6ZM2 4.95819H1.25V5.70819V15V16.1967L2.32698 15.675L4.83876 14.4582H11.7778H12.5278V13.7082V5.70819V4.95819H11.7778H2ZM2.75 13.8033V6.45819H11.0278V12.9582H4.66667H4.49457L4.33969 13.0332L2.75 13.8033ZM9.11107 11.8166H4.66663V10.3166H9.11107V11.8166ZM4.66663 8.97222H9.11107V7.47222H4.66663V8.97222Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$6=_export_sfc(_sfc_main$w,[["render",_sfc_render$g]]),FlattenButton_vue_vue_type_style_index_0_lang="",_sfc_main$v={__name:"FlattenButton",props:["item"],setup(e){const n=useViewerStore(),{flattenPdfDownload:r}=core,o=async()=>{n.setDownloading(!0);try{const s=await r();n.setDownloading(!1),s||n.setDownloadError("Downloaded")}catch(s){console.log(s)}};return(s,u)=>{const d=__unplugin_components_0$6,f=_sfc_main$3O;return openBlock(),createBlock(f,mergeProps({...e.item},{onClick:o}),{default:withCtx(()=>[createVNode(d)]),_:1},16)}}},_sfc_main$u={},_hoisted_1$k={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$k,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.62109 10C2.62109 5.92468 5.9248 2.62097 10.0001 2.62097C14.0755 2.62097 17.3792 5.92468 17.3792 10C17.3792 14.0753 14.0755 17.379 10.0001 17.379C5.9248 17.379 2.62109 14.0753 2.62109 10ZM10.0001 1.12097C5.09637 1.12097 1.12109 5.09625 1.12109 10C1.12109 14.9038 5.09637 18.879 10.0001 18.879C14.9039 18.879 18.8792 14.9038 18.8792 10C18.8792 5.09625 14.9039 1.12097 10.0001 1.12097ZM6.02432 11.5C6.71468 11.5 7.27432 10.9404 7.27432 10.25C7.27432 9.55967 6.71468 9.00003 6.02432 9.00003C5.33396 9.00003 4.77432 9.55967 4.77432 10.25C4.77432 10.9404 5.33396 11.5 6.02432 11.5ZM10.0888 11.5C10.7792 11.5 11.3388 10.9404 11.3388 10.25C11.3388 9.55967 10.7792 9.00003 10.0888 9.00003C9.39848 9.00003 8.83884 9.55967 8.83884 10.25C8.83884 10.9404 9.39848 11.5 10.0888 11.5ZM15.4034 10.25C15.4034 10.9404 14.8437 11.5 14.1534 11.5C13.463 11.5 12.9034 10.9404 12.9034 10.25C12.9034 9.55967 13.463 9.00003 14.1534 9.00003C14.8437 9.00003 15.4034 9.55967 15.4034 10.25Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$5=_export_sfc(_sfc_main$u,[["render",_sfc_render$f]]),Dropdown_vue_vue_type_style_index_0_scoped_634cc88a_lang="",Dropdown_vue_vue_type_style_index_1_lang="",_hoisted_1$j={class:"drop-down"},_hoisted_2$3=["data-element"],_hoisted_3$2=["data-element"],_hoisted_4$2=["data-element"],_hoisted_5$2=["data-element"],_hoisted_6$2=["data-element"],_hoisted_7$1=["data-element"],_hoisted_8$1=["data-element"],_hoisted_9$1=["data-element"],_sfc_main$t={__name:"Dropdown",props:["rightItems"],setup(e){const n=e,r=useViewerStore(),o=ref(null),{download:s,webViewerNamedAction:u,flattenPdfDownload:d}=core,f=computed(()=>r.getPopoverChanged),g=computed(()=>o.value&&o.value.getMergedShow()),m=computed(()=>r.getUpload),y=computed(()=>r.getThemeMode),v=computed(()=>{const E=["downloadButton","flattenButton","printButton","settingButton"];return isMobileDevice&&E.push("themeMode","pageModeButton"),n.rightItems.filter(P=>E.includes(P.type)||P.name==="customButton"&&P.dropItem).every(P=>P.hidden)});watch(()=>f.value,(E,P)=>{E&&(o.value.setShow(!1),r.setPopoverChanged(!1))}),watch(y,()=>{if(!isMobileDevice)return;document.documentElement.classList.toggle("dark")});const _=async()=>{o.value.setShow(!1),r.setDownloading(!0);try{const E=await s();r.setDownloading(!1),E||r.setDownloadError("Downloaded")}catch(E){console.log(E)}},w=async()=>{o.value.setShow(!1),r.setDownloading(!0);try{const E=await d();r.setDownloading(!1),E||r.setDownloadError("Downloaded")}catch(E){console.log(E)}},x=async()=>{o.value.setShow(!1),r.setDownloading(!0);try{const E=await u("Print");r.setDownloading(!1),E||r.setDownloadError("Print")}catch(E){console.log(E)}},k=()=>{o.value.setShow(!1),r.setPopoverChanged(!1),r.openElement("settingsDialog")},S=E=>{o.value.setShow(!1),E!==y.value&&r.setThemeMode(E)},M=()=>{o.value.setShow(!1),r.isElementOpen("pageModePanel")?r.closeElement("pageModePanel"):(r.openElement("pageModePanel"),r.closeElement("contentEditorPanel"))};return(E,P)=>{const T=__unplugin_components_0$5,D=__unplugin_components_12$1,F=_sfc_main$3O,I=_sfc_main$B,N=_sfc_main$v,q=_sfc_main$C,Y=__unplugin_components_6$1,Z=__unplugin_components_2$c,j=__unplugin_components_0$7,ne=__unplugin_components_9$1,le=_sfc_main$2g;return openBlock(),createBlock(unref(NPopover),{ref_key:"popover",ref:o,placement:"top-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4},{trigger:withCtx(()=>[withDirectives(createVNode(F,{class:normalizeClass(["more",{active:g.value,disabled:!m.value}])},{default:withCtx(()=>[createVNode(T),createVNode(D)]),_:1},8,["class"]),[[vShow,!v.value]])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$j,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(J,O)=>(openBlock(),createElementBlock(Fragment,{key:`${J.type}-${J.dataElement||O}`},[J.type==="downloadButton"&&!J.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":J.dataElement,class:"drop-item",onClick:_},[createVNode(I),createTextVNode(toDisplayString$1(E.$t("header.download")),1)],8,_hoisted_2$3)):createCommentVNode("",!0),J.type==="flattenButton"&&!J.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":J.dataElement,class:"drop-item",onClick:w},[createVNode(N),createTextVNode(toDisplayString$1(E.$t("header.flatten")),1)],8,_hoisted_3$2)):createCommentVNode("",!0),J.type==="printButton"&&!J.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":J.dataElement,class:"drop-item",onClick:x},[createVNode(q),createTextVNode(toDisplayString$1(E.$t("header.print")),1)],8,_hoisted_4$2)):createCommentVNode("",!0),J.type==="themeMode"&&!J.hidden&&unref(isMobileDevice)?(openBlock(),createElementBlock("div",{key:3,"data-element":J.dataElement,class:"drop-item",onClick:P[0]||(P[0]=U=>S("Light"))},[createVNode(F,null,{default:withCtx(()=>[createVNode(Y)]),_:1}),createTextVNode(toDisplayString$1(E.$t("header.lightMode")),1)],8,_hoisted_5$2)):createCommentVNode("",!0),J.type==="themeMode"&&!J.hidden&&unref(isMobileDevice)?(openBlock(),createElementBlock("div",{key:4,"data-element":J.dataElement,class:"drop-item",onClick:P[1]||(P[1]=U=>S("Dark"))},[createVNode(F,null,{default:withCtx(()=>[createVNode(Z)]),_:1}),createTextVNode(toDisplayString$1(E.$t("header.darkMode")),1)],8,_hoisted_6$2)):createCommentVNode("",!0)],64))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(J,O)=>(openBlock(),createElementBlock(Fragment,{key:`${J.type}-${J.dataElement||O}`},[J.type==="pageModeButton"&&!J.hidden&&unref(isMobileDevice)?(openBlock(),createElementBlock("div",{key:0,"data-element":J.dataElement,class:"drop-item",onClick:M},[createVNode(F,null,{default:withCtx(()=>[createVNode(j)]),_:1}),createTextVNode(toDisplayString$1(E.$t("header.viewSetting")),1)],8,_hoisted_7$1)):createCommentVNode("",!0)],64))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(J,O)=>(openBlock(),createElementBlock(Fragment,{key:`${J.type}-${J.dataElement||O}`},[J.type==="settingButton"&&!J.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":J.dataElement,class:"drop-item",onClick:k},[createVNode(F,null,{default:withCtx(()=>[createVNode(ne)]),_:1}),createTextVNode(toDisplayString$1(E.$t("header.settings.settings")),1)],8,_hoisted_8$1)):createCommentVNode("",!0),J.name==="customButton"&&J.dropItem&&!J.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":J.dataElement,class:"drop-item"},[createVNode(le,{item:J},null,8,["item"])],8,_hoisted_9$1)):createCommentVNode("",!0)],64))),128))])]),_:1},512)}}},__unplugin_components_18=_export_sfc(_sfc_main$t,[["__scopeId","data-v-634cc88a"]]),_sfc_main$s={__name:"PageMode",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("pageModePanel")),o=computed(()=>n.getToolMode),s=()=>{r.value?(n.closeElement("pageModePanel"),o.value==="separation"&&n.openElement("colorSeparationPanel")):(n.openElement("pageModePanel"),n.closeElement("contentEditorPanel"),o.value==="separation"&&n.closeElement("colorSeparationPanel"))};return(u,d)=>{const f=__unplugin_components_0$7,g=_sfc_main$3O;return openBlock(),createBlock(g,{class:normalizeClass({active:r.value}),onClick:s,title:u.$t("header.viewSetting")},{default:withCtx(()=>[createVNode(f)]),_:1},8,["class","title"])}}},_sfc_main$r={},_hoisted_1$i={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$i,n[0]||(n[0]=[createBaseVNode("rect",{x:"12",y:"8",width:"6",height:"9",fill:"#999999"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 3.5H17.5V7.25H12H2.5V3.5ZM12.75 8.75H17.5V16.5H12.75V8.75ZM11.25 16.5V8.75H2.5V16.5H11.25ZM17.5 2H19V3.5V16.5V18H17.5H2.5H1V16.5V3.5V2H2.5H17.5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$4=_export_sfc(_sfc_main$r,[["render",_sfc_render$e]]),_sfc_main$q={__name:"index",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getToolMode),o=computed(()=>n.isElementOpen(e.item.element)),s=computed(()=>n.isElementOpen("contentEditorPanel"));computed(()=>n.getContentEditorType);const u=computed(()=>n.getRightPanelButtonDisabled),d=computed(()=>n.isElementOpen("measurePanel"));let f=ref(!0),g=ref(!0);watch(()=>s.value,(v,_)=>{g.value=!s.value&&!document.querySelector(".frame-container.selected")}),watch(r,(v,_)=>{_==="form"&&v!=="form"&&n.closeElement(e.item.element)}),watch([f,g,r],(v,_)=>{const w=v[0]&&v[1]||!["form","editor","measurement"].includes(v[2]);n.setRightPanelButtonDisabled(w)}),watch([o,s,d],(v,_)=>{v[0]||v[1]||v[2]?core.eventBus().dispatch("isRightSidePanelOpened",!0):core.eventBus().dispatch("isRightSidePanelOpened",!1)}),watch(u,(v,_)=>{core.eventBus().dispatch("isRightSidePanelBtnDisabled",v)});const m=()=>{setTimeout(()=>{f.value=document.getElementsByClassName("outline-container").length===0,!(r.value==="form"&&f.value&&document.getElementsByClassName("right-panel")[0].className.indexOf("closed")!==-1)&&(r.value==="form"?n.toggleElement(e.item.element):r.value==="editor"?n.toggleElement("contentEditorPanel"):r.value==="measurement"&&n.toggleElement("measurePanel"))},1)},y=v=>{r.value==="editor"&&(g.value=v),setTimeout(()=>{f.value=document.getElementsByClassName("outline-container").length===0})};return core.addEvent("changeRightPanelBtnDisabled",y),(v,_)=>{const w=__unplugin_components_0$4,x=_sfc_main$3O;return openBlock(),createBlock(x,mergeProps({isActive:o.value||s.value||d.value},{...e.item},{onClick:m,class:{disabled:u.value},title:v.$t("header.rightPanel")}),{default:withCtx(()=>[createVNode(w)]),_:1},16,["isActive","class","title"])}}},_sfc_main$p={},_hoisted_1$h={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$h,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.10986 13.9354C2.71178 11.5373 2.71178 7.64923 5.10986 5.25114C7.50795 2.85306 11.396 2.85306 13.7941 5.25114C16.1922 7.64923 16.1922 11.5373 13.7941 13.9354C11.396 16.3335 7.50795 16.3335 5.10986 13.9354ZM4.0492 4.19048C1.06533 7.17436 1.06533 12.0122 4.0492 14.996C6.85416 17.801 11.2974 17.9692 14.2988 15.5006L17.1989 18.4006C17.4918 18.6935 17.9666 18.6935 18.2595 18.4006C18.5524 18.1078 18.5524 17.6329 18.2595 17.34L15.3595 14.4399C17.8279 11.4385 17.6597 6.99539 14.8548 4.19048C11.8709 1.20661 7.03307 1.20661 4.0492 4.19048Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$3=_export_sfc(_sfc_main$p,[["render",_sfc_render$d]]),_hoisted_1$g={class:"search-container"},_sfc_main$o={__name:"index",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getSearchStatus),o=computed(()=>n.getUpload),s=computed(()=>n.isElementOpen("leftPanel")),u=computed(()=>n.getActiveElementTab("leftPanel")),d=()=>{core.webViewerNamedAction("Find"),s.value&&u.value!=="SEARCH"?n.setSearchStatus(!0):s.value?(n.setSearchStatus(!1),n.toggleElement("leftPanel")):(n.setSearchStatus(!0),n.toggleElement("leftPanel")),n.setActiveElementTab("leftPanel","SEARCH")};return(f,g)=>{const m=__unplugin_components_0$3,y=_sfc_main$3O;return openBlock(),createElementBlock("div",_hoisted_1$g,[createVNode(y,mergeProps({id:"viewFind"},{...e.item},{isActive:r.value&&s.value,onClick:d,class:{disabled:!o.value},title:f.$t("header.search")}),{default:withCtx(()=>[createVNode(m)]),_:1},16,["isActive","class","title"])])}}},_sfc_main$n={},_hoisted_1$f={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$f,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 3V17H11.5625V18.5H3.5H2V17V3V1.5H3.5H11.5625L16.875 5.75V10H15.375V6.47094L11.0363 3H3.5ZM6.25001 6.0625H5.50001V7.5625H6.25001H8.37501H9.12501V6.0625H8.37501H6.25001ZM5.50001 9.25H6.25001H9.96876H10.7188V10.75H9.96876H6.25001H5.50001V9.25ZM6.25001 12.4375H5.50001V13.9375H6.25001H9.96876H10.7188V12.4375H9.96876H6.25001ZM12.5842 14.8916L13.62 13.8558V17.604V18.354H15.12V17.604V13.8558L16.1558 14.8916L17.2165 13.831L14.9003 11.5148L14.37 10.9845L13.8397 11.5148L11.5235 13.831L12.5842 14.8916Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$2=_export_sfc(_sfc_main$n,[["render",_sfc_render$c]]),_sfc_main$m={__name:"OpenFileButton",props:["item"],setup(e){const n=()=>{window.instance.changeFile()};return(r,o)=>{const s=__unplugin_components_0$2,u=_sfc_main$3O;return openBlock(),createBlock(u,mergeProps({...e.item},{onClick:n,title:r.$t("header.openFile")}),{default:withCtx(()=>[createVNode(s)]),_:1},16,["title"])}}},_sfc_main$l={},_hoisted_1$e={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$e,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.7463 7.94055L8.43134 3.20358C8.38986 2.6073 8.82031 2.08322 9.40947 2.01273L9.46546 2.00656C9.75502 1.97416 10.0451 2.06271 10.2681 2.25159C10.4911 2.44047 10.6276 2.71317 10.6457 3.00614L10.9886 8.17061C10.999 8.31659 11.1097 8.43516 11.2537 8.45444C11.3176 8.46288 11.382 8.44409 11.4315 8.40258C11.481 8.36108 11.5111 8.30063 11.5145 8.23584L11.7612 3.47595C11.7918 2.85998 12.3116 2.38523 12.923 2.41468H12.9309C13.5429 2.44972 14.0111 2.97745 13.9773 3.59407L13.7218 8.51438C13.7137 8.66679 13.8235 8.79975 13.9738 8.81936C14.1225 8.83876 14.2625 8.73915 14.2914 8.59018L14.8006 6.02337C14.9178 5.41517 15.497 5.01851 16.0954 5.13574L16.1041 5.13751C16.7058 5.25854 17.0969 5.84695 16.979 6.45353L16.3684 9.53687C15.8189 13.3474 15.0586 15.5052 14.3946 16.4246C13.3649 17.8508 11.5573 17.8667 10.1251 17.8667C8.69381 17.8667 7.16012 17.5291 6.44796 16.9993C5.73492 16.4696 4.77079 15.2575 4.15837 13.9327L4.16712 13.9283C4.11876 13.8639 4.0774 13.7945 4.04376 13.7212L3.105 11.685C2.84552 11.1243 3.08338 10.4577 3.63781 10.1918L3.64656 10.1874C3.91235 10.0626 4.21656 10.0497 4.49179 10.1517C4.76702 10.2536 4.99055 10.4619 5.11287 10.7304C5.62206 11.8234 5.94227 12.324 6.07526 12.2324C6.27386 12.0949 6.12075 11.7176 5.85478 9.21249C5.67578 7.53039 5.45319 5.85328 5.18724 4.18289C5.07653 3.5968 5.44002 3.02581 6.01489 2.88273L6.07526 2.86775C6.35866 2.79957 6.65742 2.85178 6.90147 3.01215C7.14552 3.17252 7.3134 3.42693 7.36572 3.71571L8.168 8.02341C8.19642 8.17613 8.33897 8.27937 8.49171 8.25787C8.64561 8.23564 8.75656 8.09774 8.7463 7.94143V7.94055Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_11=_export_sfc(_sfc_main$l,[["render",_sfc_render$b]]),_sfc_main$k={},_hoisted_1$d={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$d,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.33187 3.41643C4.74608 3.41643 5.08187 3.08064 5.08187 2.66643C5.08187 2.25221 4.74608 1.91643 4.33187 1.91643L1.66643 1.91643C1.25221 1.91643 0.916428 2.25221 0.916428 2.66643C0.916428 3.08064 1.25221 3.41643 1.66643 3.41643L2.35645 3.41643V3.8183L2.35645 15.3384V15.7404H1.66643C1.25221 15.7404 0.916428 16.0762 0.916428 16.4904C0.916428 16.9047 1.25221 17.2404 1.66643 17.2404H4.33187C4.74608 17.2404 5.08187 16.9047 5.08187 16.4904C5.08187 16.0762 4.74608 15.7404 4.33187 15.7404H3.85645V15.3384L3.85645 3.8183V3.41643H4.33187ZM7.30219 4.09613C7.10328 4.09613 6.91251 4.17515 6.77186 4.3158C6.63121 4.45645 6.55219 4.64722 6.55219 4.84613V12.8425C6.55219 13.1458 6.73492 13.4193 7.01518 13.5354C7.29543 13.6514 7.61802 13.5873 7.83252 13.3728L9.88684 11.3185L14.7821 16.2137C15.075 16.5066 15.5498 16.5066 15.8427 16.2137L18.6699 13.3866C18.8105 13.2459 18.8895 13.0551 18.8895 12.8562C18.8895 12.6573 18.8105 12.4665 18.6699 12.3259L13.7746 7.43067L15.8288 5.37646C16.0433 5.16196 16.1075 4.83937 15.9914 4.55912C15.8753 4.27886 15.6019 4.09613 15.2985 4.09613L7.30219 4.09613ZM9.35651 9.72747L8.05219 11.0318V5.59613L13.4879 5.59613L12.1836 6.90034C12.043 7.041 11.964 7.23176 11.964 7.43067C11.964 7.62959 12.043 7.82035 12.1836 7.961L17.0789 12.8562L15.3124 14.6227L10.4172 9.72747C10.1243 9.43458 9.64941 9.43458 9.35651 9.72747Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_10=_export_sfc(_sfc_main$k,[["render",_sfc_render$a]]),_sfc_main$j={},_hoisted_1$c={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$9(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$c,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.1142 2.47079H2V6.57766H6.1142V2.47079ZM18.0002 2.47076H13.886V6.57763H18.0002V2.47076ZM6.11436 13.4224H2.00016V17.5293H6.11436V13.4224ZM18.0002 13.4224H13.886V17.5293H18.0002V13.4224ZM9.08594 5.20866V3.8397H7.25741V5.20866H9.08594ZM12.743 5.20866V3.8397H10.9145V5.20866H12.743ZM4.74251 9.08729H3.3711V7.26201H4.74251V9.08729ZM4.74251 12.7379H3.3711V10.9126H4.74251V12.7379ZM15.2571 9.08734H16.6285V7.26206H15.2571V9.08734ZM15.2571 12.7379H16.6285V10.9126H15.2571V12.7379ZM9.08594 14.7913V16.1603H7.25741V14.7913H9.08594ZM12.743 14.7913V16.1603H10.9145V14.7913H12.743Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_9=_export_sfc(_sfc_main$j,[["render",_sfc_render$9]]),_sfc_main$i={__name:"ViewRotationControls",setup(e){const n=()=>{core.rotateCounterclockwise()},r=()=>{core.rotateClockwise()};return(o,s)=>{const u=_sfc_main$3O;return openBlock(),createElementBlock(Fragment,null,[createVNode(u,{img:"icon-header-counter-clockwise",title:"Rotate Counterclockwise",onClick:n}),createVNode(u,{img:"icon-header-clockwise",title:"Rotate Clockwise",onClick:r})],64)}}},ThemeMode_vue_vue_type_style_index_0_lang="",_hoisted_1$b={class:"theme-mode"},_sfc_main$h={__name:"ThemeMode",setup(e){const n=useViewerStore(),r=computed(()=>n.getThemeMode),o=computed(()=>n.getUpload);watch(r,()=>{document.documentElement.classList.toggle("dark")});const s=u=>{u!==r.value&&n.setThemeMode(u)};return(u,d)=>{const f=__unplugin_components_0$x,g=_sfc_main$3O,m=__unplugin_components_2$c;return openBlock(),createElementBlock("div",_hoisted_1$b,[createVNode(g,{onClick:d[0]||(d[0]=y=>s("Light")),class:normalizeClass({active:r.value==="Light",disabled:!o.value}),title:u.$t("header.light")},{default:withCtx(()=>[createVNode(f)]),_:1},8,["class","title"]),createVNode(g,{onClick:d[1]||(d[1]=y=>s("Dark")),class:normalizeClass({active:r.value==="Dark",disabled:!o.value}),title:u.$t("header.dark")},{default:withCtx(()=>[createVNode(m)]),_:1},8,["class","title"])])}}},_sfc_main$g={__name:"CropPageButton",props:["item","popoverTool"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),s=useDocumentStore(),u=computed(()=>s.getActiveTool),d=()=>{e.popoverTool&&e.popoverTool[0].setShow(!1),s.setToolState(u.value==="cropPage"?"":"cropPage"),u.value==="cropPage"&&(o.resetPanels(),o.setActiveToolMode("view")),n(0),r(0),o.closeActiveStickNote(),o.setSearchStatus(!1),o.toggleActiveHand(!1)};return(f,g)=>{const m=__unplugin_components_9,y=_sfc_main$3O;return openBlock(),createBlock(y,mergeProps({isActive:u.value==="cropPage"&&!unref(isMobileDevice)},{...e.item},{onClick:d,title:f.$t("header.cropPage")}),{default:withCtx(()=>[createVNode(m)]),_:1},16,["isActive","title"])}}},_sfc_main$f={__name:"HandButton",props:["item","popoverTool"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),s=useDocumentStore(),u=computed(()=>o.getActiveHand),d=()=>{e.popoverTool&&e.popoverTool[0].setShow(!1),window.getSelection().empty(),o.toggleActiveHand(!u.value);const f=u.value?1:0;n(f),r(0),o.closeActiveStickNote(),core.webViewerNamedAction("Find",4),s.setToolState(""),o.setSearchStatus(!1)};return(f,g)=>{const m=__unplugin_components_11,y=_sfc_main$3O;return openBlock(),createBlock(y,mergeProps({isActive:u.value&&!unref(isMobileDevice),img:"icon-hand-tool"},{...e.item},{onClick:d,title:f.$t("header.pan")}),{default:withCtx(()=>[createVNode(m)]),_:1},16,["isActive","title"])}}},_sfc_main$e={},_hoisted_1$a={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$8(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$a,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 3.5H16.5V16.5H3.5V3.5ZM2 2H3.5H16.5H18V3.5V16.5V18H16.5H3.5H2V16.5V3.5V2ZM14.2461 14.9961H11.6868V13.4961H13.4961V11.6893H14.9961V14.2461V14.9961H14.2461ZM13.4961 6.5H11.6868V5H14.2461H14.9961V5.75V8.3078H13.4961V6.5ZM6.5 6.5H8.30664V5H5.75H5V5.75V8.3078H6.5V6.5ZM5.75 14.9961H8.30664V13.4961H6.5V11.6893H5V14.2461V14.9961H5.75Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0$1=_export_sfc(_sfc_main$e,[["render",_sfc_render$8]]),FullScreenButton_vue_vue_type_style_index_0_lang="",_sfc_main$d={__name:"FullScreenButton",props:["item"],setup(e){const{requestFullScreenMode:n}=core,r=useViewerStore(),o=useDocumentStore(),s=computed(()=>r.isElementOpen("leftPanel"));core.addEvent("presentationmodechanged",({state:d})=>{d===1?r.setFullMode(!1):d===3&&r.setFullMode(!0)});const u=()=>{const d=navigator.userAgent.match(/(iPad)/)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;s.value&&(window.innerWidth<930||d)&&r.toggleElement("leftPanel");const f=document.getElementById("sign-image-save");f&&f.remove(),n(),o.setToolState("")};return(d,f)=>{const g=__unplugin_components_0$1,m=_sfc_main$3O;return openBlock(),createBlock(m,mergeProps({img:"icon-full-screen",className:"full-screen"},{...e.item},{onClick:u,title:d.$t("header.fullScreen")}),{default:withCtx(()=>[createVNode(g)]),_:1},16,["title"])}}},_sfc_main$c={};function _sfc_render$7(e,n){return openBlock(),createElementBlock("div")}const __unplugin_components_2$1=_export_sfc(_sfc_main$c,[["render",_sfc_render$7]]),_sfc_main$b={},_hoisted_1$9={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$6(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$9,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.11004 13.9353C2.71196 11.5372 2.71196 7.64917 5.11004 5.25108C7.50813 2.853 11.3962 2.853 13.7943 5.25108C16.1924 7.64917 16.1924 11.5372 13.7943 13.9353C11.3962 16.3334 7.50813 16.3334 5.11004 13.9353ZM4.04938 4.19042C1.06551 7.17429 1.06551 12.0121 4.04938 14.996C6.85434 17.8009 11.2976 17.9691 14.299 15.5005L17.1991 18.4006C17.4919 18.6935 17.9668 18.6935 18.2597 18.4006C18.5526 18.1077 18.5526 17.6328 18.2597 17.3399L15.3596 14.4399C17.8281 11.4384 17.6598 6.99532 14.8549 4.19042C11.8711 1.20655 7.03325 1.20655 4.04938 4.19042Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_5=_export_sfc(_sfc_main$b,[["render",_sfc_render$6]]),_sfc_main$a={},_hoisted_1$8={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$5(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$8,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.0663 1.73124C11.8457 1.51066 11.4792 1.54371 11.3017 1.80019L8.50221 5.84387C8.47541 5.88258 8.43581 5.9106 8.39039 5.92299L4.70212 6.92888C4.62329 6.95038 4.56548 7.01679 4.55485 7.0978C4.49741 7.53536 4.28835 8.98634 3.86452 10.5C3.50509 11.7837 2.41361 14.2634 1.80715 15.6014C1.43791 15.4319 0.986657 15.4992 0.682542 15.8033C0.292017 16.1938 0.292017 16.827 0.682542 17.2175C1.07307 17.6081 1.70623 17.6081 2.09676 17.2175C2.40731 16.907 2.4709 16.443 2.28754 16.0696C3.47428 15.503 5.62248 14.5333 7.40006 14.0355C9.40855 13.4732 10.4209 13.3576 10.7798 13.3342C10.8716 13.3282 10.9526 13.266 10.9768 13.1773L11.9771 9.50966C11.9895 9.46424 12.0175 9.42465 12.0562 9.39785L16.0999 6.59838C16.3563 6.42081 16.3894 6.05431 16.1688 5.83373L12.0663 1.73124ZM7.84432 8.82278C7.79831 8.77678 7.72133 8.78626 7.68786 8.84204L5.83823 11.9248C5.78467 12.014 5.88616 12.1155 5.97543 12.062L9.05814 10.2123C9.11392 10.1789 9.1234 10.1019 9.0774 10.0559L7.84432 8.82278ZM15.5271 16.5933C15.4522 16.5981 15.3767 16.6005 15.3006 16.6005C15.2254 16.6005 15.1508 16.5982 15.0768 16.5935L13.531 19.2708C13.4525 19.4067 13.2553 19.4035 13.1814 19.2651L12.5771 18.1343C12.5412 18.0671 12.4703 18.0261 12.3942 18.0286L11.1127 18.0707C10.9559 18.0759 10.8545 17.9067 10.9329 17.7708L12.4536 15.1369C12.0425 14.5632 11.8006 13.8601 11.8006 13.1005C11.8006 11.1675 13.3676 9.60052 15.3006 9.60052C17.2336 9.60052 18.8006 11.1675 18.8006 13.1005C18.8006 13.8592 18.5592 14.5614 18.1491 15.1347L19.671 17.7708C19.7495 17.9067 19.6481 18.0759 19.4912 18.0707L18.2098 18.0286C18.1336 18.0261 18.0627 18.0671 18.0268 18.1343L17.4225 19.2651C17.3486 19.4035 17.1514 19.4067 17.0729 19.2708L15.5271 16.5933Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_4=_export_sfc(_sfc_main$a,[["render",_sfc_render$5]]),_sfc_main$9={},_hoisted_1$7={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$4(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$7,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 3.5H13.3V13.3H3.5V3.5ZM2 2H3.5H13.3H14.8V3.5V5.2H16.5H18V6.7V16.5V18H16.5H6.7H5.2V16.5V14.8H3.5H2V13.3V3.5V2ZM6.7 14.8V16.5H16.5V6.7H14.8V13.3V14.8H13.3H6.7Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_3=_export_sfc(_sfc_main$9,[["render",_sfc_render$4]]),_sfc_main$8={},_hoisted_1$6={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$3(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$6,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 1.25H2L0 18.75H18L20 1.25ZM10.4361 3.51788L15.0866 15.1442H16.5866V16.3942H12.7404V15.1442H13.7403L12.798 12.7885H6.91309L5.9711 15.1442H6.97115V16.3942H3.125V15.1442H4.62492L9.27547 3.51788H10.4361ZM9.85499 5.43124L12.298 11.5385H7.41292L9.85499 5.43124Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_2=_export_sfc(_sfc_main$8,[["render",_sfc_render$3]]),_sfc_main$7={},_hoisted_1$5={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$5,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 1.875H1.25V5.625H5V1.875ZM5 8.125H1.25V11.875H5V8.125ZM1.25 14.375H5V18.125H1.25V14.375ZM18.75 4.6875V2.8125H7.5V4.6875H18.75ZM18.75 9.0625V10.9375H7.5V9.0625H18.75ZM18.75 17.1875V15.3125H7.5V17.1875H18.75Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_1=_export_sfc(_sfc_main$7,[["render",_sfc_render$2]]),_sfc_main$6={},_hoisted_1$4={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$4,n[0]||(n[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.4375 1.4375H2.6875V2.1875V17.8125V18.5625H3.4375H16.5612H17.3112V17.8125V10V7.07031V6.77538L17.1103 6.55944L12.5675 1.67663L12.345 1.4375H12.0184H9.99936H3.4375ZM4.1875 17.0625V2.9375H9.99936H10.5V7.5V8.25H11.25H15.8112V10V17.0625H4.1875ZM15.2388 6.75L12 3.2688V6.75H15.2388Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_0=_export_sfc(_sfc_main$6,[["render",_sfc_render$1]]),_sfc_main$5={__name:"LeftPanelTabs",props:["activePanelTab","popover"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("leftPanel")),o=computed(()=>n.getActiveElementTab("leftPanel")),s=computed(()=>n.getDisabledElements("thumbnails")),u=computed(()=>n.getDisabledElements("outlines")),d=computed(()=>n.getDisabledElements("annotation")),f=computed(()=>n.getDisabledElements("layers")),g=computed(()=>n.getDisabledElements("signature")),m=computed(()=>n.getDisabledElements("search")),y=v=>{e.popover&&e.popover.setShow(!1),r.value||n.openElement("leftPanel"),v!==o.value&&(n.setActiveElementTab("leftPanel",v),v==="SEARCH"?(core.webViewerNamedAction("FindOpen"),n.setSearchStatus(!0)):(core.clearSearchResults(),n.setSearchStatus(!1)))};return(v,_)=>{const w=__unplugin_components_0,x=__unplugin_components_1,k=__unplugin_components_2,S=__unplugin_components_3,M=__unplugin_components_4,E=__unplugin_components_5;return openBlock(),createElementBlock(Fragment,null,[s.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-item",{active:o.value==="THUMBS"}]),onClick:_[0]||(_[0]=P=>y("THUMBS"))},[createVNode(w),createTextVNode(toDisplayString$1(v.$t("leftPanel.thumbnails")),1)],2)),u.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["drop-item",{active:o.value==="OUTLINE"}]),onClick:_[1]||(_[1]=P=>y("OUTLINE"))},[createVNode(x),createTextVNode(toDisplayString$1(v.$t("leftPanel.outlines")),1)],2)),d.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["drop-item",{active:o.value==="ANNOTATION"}]),onClick:_[2]||(_[2]=P=>y("ANNOTATION"))},[createVNode(k),createTextVNode(toDisplayString$1(v.$t("leftPanel.annotations")),1)],2)),f.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(["drop-item",{active:o.value==="LAYER"}]),onClick:_[3]||(_[3]=P=>y("LAYER"))},[createVNode(S),createTextVNode(toDisplayString$1(v.$t("leftPanel.layers")),1)],2)),r.value&&o.value==="COMPARISON"?(openBlock(),createElementBlock("div",{key:4,class:normalizeClass(["drop-item",{active:o.value==="COMPARISON"}]),onClick:_[4]||(_[4]=P=>y("COMPARISON"))},[createVNode(w),_[7]||(_[7]=createTextVNode("Compare"))],2)):createCommentVNode("",!0),g.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:5,class:normalizeClass(["drop-item",{active:o.value==="SIGNATURE"}]),onClick:_[5]||(_[5]=P=>y("SIGNATURE"))},[createVNode(M),createTextVNode(toDisplayString$1(v.$t("leftPanel.signature")),1)],2)),m.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:6,class:normalizeClass(["drop-item",{active:o.value==="SEARCH"}]),onClick:_[6]||(_[6]=P=>y("SEARCH"))},[createVNode(E),createTextVNode(toDisplayString$1(v.$t("leftPanel.search")),1)],2))],64)}}},_sfc_main$4={},_hoisted_1$3={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3,n[0]||(n[0]=[createBaseVNode("rect",{x:"2",y:"8",width:"6",height:"9",fill:"#999999"},null,-1),createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 3.5H2.5V7.25H8H17.5V3.5ZM7.25 8.75H2.5V16.5H7.25V8.75ZM8.75 16.5V8.75H17.5V16.5H8.75ZM2.5 2H1V3.5V16.5V18H2.5H17.5H19V16.5V3.5V2H17.5H2.5Z",fill:"currentColor"},null,-1)]))}const __unplugin_components_6=_export_sfc(_sfc_main$4,[["render",_sfc_render]]),ToggleElementButton_vue_vue_type_style_index_0_lang="",_hoisted_1$2=["title"],_hoisted_2$2={class:"drop-down medium left-panel-button-popover"},_sfc_main$3={__name:"ToggleElementButton",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen(e.item.element)),o=computed(()=>n.getActiveElementTab("leftPanel")),s=computed(()=>n.getPopoverChanged),u=computed(()=>n.getDisabledElements("thumbnails")),d=computed(()=>n.getDisabledElements("outlines")),f=computed(()=>n.getDisabledElements("annotation")),g=computed(()=>n.getDisabledElements("layers")),m=computed(()=>n.getDisabledElements("signature")),y=computed(()=>n.getDisabledElements("search")),v=computed(()=>!u.value||!d.value||!f.value||!g.value||!m.value||!y.value),_=ref(null),w=()=>{o.value==="SEARCH"&&core.webViewerNamedAction("Find"),n.toggleElement(e.item.element)};return watch(()=>s.value,(x,k)=>{x&&(_.value.setShow(!1),n.setPopoverChanged(!1))}),(x,k)=>{const S=__unplugin_components_0,M=__unplugin_components_1,E=__unplugin_components_2,P=__unplugin_components_3,T=__unplugin_components_4,D=__unplugin_components_5,F=__unplugin_components_6,I=_sfc_main$3O,N=__unplugin_components_12$1,q=_sfc_main$5;return openBlock(),createElementBlock("div",{title:x.$t("header.leftPanel"),class:"left-panel-button toggle-button"},[createVNode(I,{isActive:r.value,onClick:w},{default:withCtx(()=>[o.value==="THUMBS"?(openBlock(),createBlock(S,{key:0})):o.value==="OUTLINE"?(openBlock(),createBlock(M,{key:1})):o.value==="ANNOTATION"?(openBlock(),createBlock(E,{key:2})):o.value==="LAYER"?(openBlock(),createBlock(P,{key:3})):o.value==="SIGNATURE"?(openBlock(),createBlock(T,{key:4})):o.value==="SEARCH"?(openBlock(),createBlock(D,{key:5})):(openBlock(),createBlock(F,{key:6}))]),_:1},8,["isActive"]),createVNode(unref(NPopover),{ref_key:"popover",ref:_,placement:"top-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4},{trigger:withCtx(()=>[withDirectives(createVNode(N,{class:"arrow"},null,512),[[vShow,v.value]])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$2,[createVNode(q,{activePanelTab:o.value,popover:_.value},null,8,["activePanelTab","popover"])])]),_:1},512)],8,_hoisted_1$2)}}},HeaderItems_vue_vue_type_style_index_0_lang="",_hoisted_1$1=["data-element"],_hoisted_2$1={class:"drop-down narrower hand-tools"},_hoisted_3$1={class:"drop-menu"},_hoisted_4$1={class:"drop-down narrower"},_hoisted_5$1=["data-element"],_hoisted_6$1=["data-element"],_hoisted_7=["data-element"],_hoisted_8=["data-element"],_hoisted_9=["data-element"],_hoisted_10=["data-element"],_hoisted_11=["data-element"],_hoisted_12=["data-element"],_hoisted_13=["data-element"],_hoisted_14=["data-element"],_hoisted_15={key:0,class:"tool-menu"},_hoisted_16=["data-element"],_hoisted_17=["data-element"],_hoisted_18=["data-element"],_hoisted_19=["data-element"],_hoisted_20=["data-element"],_hoisted_21=["data-element"],_hoisted_22=["data-element"],_hoisted_23=["data-element"],_hoisted_24=["data-element"],_hoisted_25=["data-element"],_hoisted_26={class:"right-container"},_hoisted_27={key:1,class:"header-items"},_hoisted_28={class:"right-container"},_sfc_main$2={__name:"HeaderItems",props:["items","rightItems","toolMode"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,s=getCurrentInstance().appContext.app.config.globalProperties.$t,u=e,d=useViewerStore(),f=useDocumentStore(),g=computed(()=>d.getCompareStatus),m=computed(()=>d.getUpload&&d.getVerified&&!d.getUploadLoading),y=computed(()=>d.getTools);let v=computed(()=>{const T={view:s("header.viewer"),form:s("header.forms"),annotation:s("header.annotations"),sign:s("header.signatures"),security:s("header.security"),compare:s("header.compare"),editor:s("header.editor"),document:s("header.document"),separation:s("header.separation"),measurement:s("header.measurement")};return T[u.toolMode]?T[u.toolMode]:""});const _=computed(()=>d.getWebviewerMode),w=computed(()=>f.getActiveTool),x=computed(()=>f.getDisableDigitalSignature),k=ref(null),S=ref(null),M=T=>{if(_.value!=="Standalone"&&["editor","document"].includes(T)){T==="editor"?d.openElement("contentEditorPreventDialog"):d.openElement("docEditorPreventDialog");return}if(T==="sign"&&!x&&window.$message.info(s("signatures.tip"),{duration:3e3,showIcon:!1}),isMobileDevice&&["separation","measurement"].includes(T)){k.value.setShow(!1),d.openElement("unsupportedMobileDialog");return}d.setActiveToolMode(T),f.setToolState(""),d.toggleActiveHand(!1),n(0),r(0),k.value.setShow(!1),(T==="compare"||T==="document")&&d.resetPanels()},E=()=>{S.value[0].setShow(!1),f.setToolState("selectText"),n(0),r(0),d.closeActiveStickNote(),d.setSearchStatus(!1),d.toggleActiveHand(!1)},P=T=>!T.length||T.length&&T.every(D=>D.hidden);return(T,D)=>{const F=_sfc_main$2g,I=_sfc_main$3,N=__unplugin_components_2$1,q=_sfc_main$d,Y=_sfc_main$f,Z=_sfc_main$g,j=_sfc_main$2I,ne=_sfc_main$h,le=_sfc_main$i,J=__unplugin_components_9,O=__unplugin_components_10,U=__unplugin_components_11,W=__unplugin_components_12$1,H=_sfc_main$3O,X=_sfc_main$m,Q=_sfc_main$o,fe=_sfc_main$q,Se=_sfc_main$s,Pe=__unplugin_components_18,$e=_sfc_main$A,Ie=_sfc_main$B,Ne=_sfc_main$C,Be=_sfc_main$E;return e.toolMode!=="compare"&&e.toolMode!=="document"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["header-items",{mobile:unref(isMobileDevice)}])},[unref(isMobileDevice)?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(e.items,(be,Ve)=>(openBlock(),createElementBlock(Fragment,{key:`${be.type}-${be.dataElement||Ve}-mobile`},[be.name==="customButton"&&!be.hidden&&!be.dropItem?(openBlock(),createBlock(F,{key:0,item:be},null,8,["item"])):be.type==="toggleElementButton"&&!be.hidden?(openBlock(),createBlock(I,{key:1,item:be,class:normalizeClass({disabled:!m.value}),"data-element":be.dataElement},null,8,["item","class","data-element"])):be.type==="selectTools"&&!be.hidden?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["hand-tools",{"events-none":!m.value}]),"data-element":be.dataElement},[createVNode(unref(NPopover),{ref_for:!0,ref_key:"popoverTool",ref:S,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0},{trigger:withCtx(()=>[createVNode(H,{class:normalizeClass(["drop-menu",{disabled:!m.value}])},{default:withCtx(()=>[w.value==="cropPage"?(openBlock(),createBlock(J,{key:0})):["selectText","highlight","underline","squiggly","strikeout"].includes(w.value)?(openBlock(),createBlock(O,{key:1})):(openBlock(),createBlock(U,{key:2})),createVNode(W)]),_:1},8,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(De,ve)=>(openBlock(),createElementBlock(Fragment,{key:`${De.type}-${De.dataElement||ve}`},[De.type==="handToolButton"&&!De.hidden?(openBlock(),createBlock(Y,{key:0,item:De,"data-element":De.dataElement,popoverTool:S.value},null,8,["item","data-element","popoverTool"])):De.type==="cropPageButton"&&!De.hidden?(openBlock(),createBlock(Z,{key:1,item:De,"data-element":De.dataElement,popoverTool:S.value},null,8,["item","data-element","popoverTool"])):De.type==="selectTools"&&!De.hidden?(openBlock(),createBlock(H,{key:2,"data-element":De.dataElement,onClick:E},{default:withCtx(()=>[createVNode(O)]),_:2},1032,["data-element"])):createCommentVNode("",!0)],64))),128))])]),_:2},1536)],10,_hoisted_1$1)):be.type==="openFileButton"&&!be.hidden?(openBlock(),createBlock(X,{key:3,item:be,"data-element":be.dataElement},null,8,["item","data-element"])):createCommentVNode("",!0)],64))),128)):(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.items,(be,Ve)=>(openBlock(),createElementBlock(Fragment,{key:`${be.type}-${be.dataElement||Ve}`},[be.name==="customButton"&&!be.hidden&&!be.dropItem?(openBlock(),createBlock(F,{key:0,item:be},null,8,["item"])):be.type==="toggleElementButton"&&!be.hidden?(openBlock(),createBlock(I,{key:1,item:be,class:normalizeClass({disabled:!m.value}),"data-element":be.dataElement},null,8,["item","class","data-element"])):be.type==="toolButton"&&!be.hidden?(openBlock(),createBlock(N,{key:2,item:be,"data-element":be.dataElement},null,8,["item","data-element"])):be.type==="fullScreenButton"&&!be.hidden?(openBlock(),createBlock(q,{key:3,item:be,class:normalizeClass({disabled:!m.value}),"data-element":be.dataElement},null,8,["item","class","data-element"])):be.type==="handToolButton"&&!be.hidden?(openBlock(),createBlock(Y,{key:4,item:be,class:normalizeClass({disabled:!m.value}),"data-element":be.dataElement},null,8,["item","class","data-element"])):be.type==="cropPageButton"&&!be.hidden?(openBlock(),createBlock(Z,{key:5,item:be,class:normalizeClass({disabled:!m.value}),"data-element":be.dataElement},null,8,["item","class","data-element"])):be.type==="zoomOverlay"&&!be.hidden?(openBlock(),createBlock(j,{key:6,"data-element":be.dataElement},null,8,["data-element"])):be.type==="themeMode"&&!be.hidden?(openBlock(),createBlock(ne,{key:7,"data-element":be.dataElement},null,8,["data-element"])):be.type==="viewRotationControls"&&!be.hidden?(openBlock(),createBlock(le,{key:8,"data-element":be.dataElement},null,8,["data-element"])):["spacer","divider"].includes(be.type)?(openBlock(),createElementBlock("div",{key:9,class:normalizeClass(be.type)},null,2)):createCommentVNode("",!0)],64))),128)),createBaseVNode("div",{class:normalizeClass(["tool-container mobile",{"events-none":!m.value}])},[P(y.value)?createCommentVNode("",!0):(openBlock(),createBlock(unref(NPopover),{key:0,ref_key:"popoverMode",ref:k,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("span",null,toDisplayString$1(unref(v)),1),createVNode(W,{class:"arrow-left"})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_4$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,(be,Ve)=>(openBlock(),createElementBlock(Fragment,{key:`${be.dataElement||Ve}`},[be.element==="view"&&!be.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="view"}]),onClick:D[0]||(D[0]=De=>M("view"))},toDisplayString$1(unref(s)("header.viewer")),11,_hoisted_5$1)):be.element==="annotation"&&!be.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="annotation"}]),onClick:D[1]||(D[1]=De=>M("annotation"))},toDisplayString$1(unref(s)("header.annotations")),11,_hoisted_6$1)):be.element==="form"&&!be.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="form"}]),onClick:D[2]||(D[2]=De=>M("form"))},toDisplayString$1(unref(s)("header.forms")),11,_hoisted_7)):be.element==="sign"&&!be.hidden&&_.value==="Standalone"?(openBlock(),createElementBlock("div",{key:3,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="sign"}]),onClick:D[3]||(D[3]=De=>M("sign"))},toDisplayString$1(unref(s)("header.signatures")),11,_hoisted_8)):be.element==="security"&&!be.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="security"}]),onClick:D[4]||(D[4]=De=>M("security"))},toDisplayString$1(unref(s)("header.security")),11,_hoisted_9)):be.element==="compare"&&!be.hidden?(openBlock(),createElementBlock("div",{key:5,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="compare"}]),onClick:D[5]||(D[5]=De=>M("compare"))},toDisplayString$1(unref(s)("header.compare")),11,_hoisted_10)):be.element==="editor"&&!be.hidden?(openBlock(),createElementBlock("div",{key:6,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="editor"}]),onClick:D[6]||(D[6]=De=>M("editor"))},toDisplayString$1(unref(s)("header.editor")),11,_hoisted_11)):be.element==="document"&&!be.hidden?(openBlock(),createElementBlock("div",{key:7,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="document"}]),onClick:D[7]||(D[7]=De=>M("document"))},toDisplayString$1(unref(s)("header.document")),11,_hoisted_12)):be.element==="separation"&&!be.hidden?(openBlock(),createElementBlock("div",{key:8,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="separation"}]),onClick:D[8]||(D[8]=De=>M("separation"))},toDisplayString$1(unref(s)("header.separation")),11,_hoisted_13)):be.element==="measurement"&&!be.hidden?(openBlock(),createElementBlock("div",{key:9,"data-element":be.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="measurement"}]),onClick:D[9]||(D[9]=De=>M("measurement"))},toDisplayString$1(unref(s)("header.measurement")),11,_hoisted_14)):createCommentVNode("",!0)],64))),128))])]),_:1},512))],2),createBaseVNode("div",{class:normalizeClass(["tool-container pc",{"events-none":!m.value}])},[P(y.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_15,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,(be,Ve)=>(openBlock(),createElementBlock(Fragment,{key:`${be.dataElement||Ve}`},[be.element==="view"&&!be.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="view"}]),onClick:D[10]||(D[10]=De=>M("view"))},toDisplayString$1(unref(s)("header.viewer")),11,_hoisted_16)):be.element==="annotation"&&!be.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="annotation"}]),onClick:D[11]||(D[11]=De=>M("annotation"))},toDisplayString$1(unref(s)("header.annotations")),11,_hoisted_17)):be.element==="form"&&!be.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="form"}]),onClick:D[12]||(D[12]=De=>M("form"))},toDisplayString$1(unref(s)("header.forms")),11,_hoisted_18)):be.element==="sign"&&!be.hidden&&_.value==="Standalone"?(openBlock(),createElementBlock("div",{key:3,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="sign"}]),onClick:D[13]||(D[13]=De=>M("sign"))},toDisplayString$1(unref(s)("header.signatures")),11,_hoisted_19)):be.element==="security"&&!be.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="security"}]),onClick:D[14]||(D[14]=De=>M("security"))},toDisplayString$1(unref(s)("header.security")),11,_hoisted_20)):be.element==="compare"&&!be.hidden?(openBlock(),createElementBlock("div",{key:5,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="compare"}]),onClick:D[15]||(D[15]=De=>M("compare"))},toDisplayString$1(unref(s)("header.compare")),11,_hoisted_21)):be.element==="editor"&&!be.hidden?(openBlock(),createElementBlock("div",{key:6,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="editor"}]),onClick:D[16]||(D[16]=De=>M("editor"))},toDisplayString$1(unref(s)("header.editor")),11,_hoisted_22)):be.element==="document"&&!be.hidden?(openBlock(),createElementBlock("div",{key:7,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="document"}]),onClick:D[17]||(D[17]=De=>M("document"))},toDisplayString$1(unref(s)("header.document")),11,_hoisted_23)):be.element==="separation"&&!be.hidden?(openBlock(),createElementBlock("div",{key:8,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="separation"}]),onClick:D[18]||(D[18]=De=>M("separation"))},toDisplayString$1(unref(s)("header.separation")),11,_hoisted_24)):be.element==="measurement"&&!be.hidden?(openBlock(),createElementBlock("div",{key:9,"data-element":be.dataElement,class:normalizeClass(["item",{active:e.toolMode==="measurement"}]),onClick:D[19]||(D[19]=De=>M("measurement"))},toDisplayString$1(unref(s)("header.measurement")),11,_hoisted_25)):createCommentVNode("",!0)],64))),128))]))],2),createBaseVNode("div",_hoisted_26,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(be,Ve)=>(openBlock(),createElementBlock(Fragment,{key:`${be.type}-${be.dataElement||Ve}`},[be.name==="customButton"&&!be.hidden&&!be.dropItem?(openBlock(),createBlock(F,{key:0,item:be,"data-element":be.dataElement},null,8,["item","data-element"])):be.type==="searchButton"&&!be.hidden?(openBlock(),createBlock(Q,{key:1,item:be,"data-element":be.dataElement},null,8,["item","data-element"])):be.type==="toggleRightPanelButton"&&!be.hidden?(openBlock(),createBlock(fe,{key:2,item:be,disabled:!m.value,"data-element":be.dataElement},null,8,["item","disabled","data-element"])):be.type==="openFileButton"&&!be.hidden&&!unref(isMobileDevice)?(openBlock(),createBlock(X,{key:3,item:be,"data-element":be.dataElement},null,8,["item","data-element"])):be.type==="pageModeButton"&&!be.hidden&&!unref(isMobileDevice)?(openBlock(),createBlock(Se,{key:4,class:normalizeClass({disabled:!m.value}),"data-element":be.dataElement},null,8,["class","data-element"])):["spacer","divider"].includes(be.type)?(openBlock(),createElementBlock("div",{key:5,class:normalizeClass(be.type)},null,2)):createCommentVNode("",!0)],64))),128)),createVNode(Pe,{rightItems:e.rightItems},null,8,["rightItems"])])],2)):e.toolMode==="compare"?(openBlock(),createElementBlock("div",_hoisted_27,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(be,Ve)=>(openBlock(),createElementBlock(Fragment,{key:`${be.type}-${be.dataElement||Ve}`},[be.type==="fullScreenButton"&&!be.hidden?(openBlock(),createBlock(q,{key:0,item:be,class:normalizeClass({disabled:g.value!=="finished"}),"data-element":be.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0)],64))),128)),D[20]||(D[20]=createBaseVNode("div",{class:"divider"},null,-1)),createVNode($e),createBaseVNode("div",_hoisted_28,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(be,Ve)=>(openBlock(),createElementBlock(Fragment,{key:`${be.type}-${be.dataElement||Ve}`},[be.type==="downloadButton"&&!be.hidden?(openBlock(),createBlock(Ie,{key:0,item:be,class:normalizeClass({disabled:g.value!=="finished"&&g.value!=="next"}),"data-element":be.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0),be.type==="printButton"&&!be.hidden?(openBlock(),createBlock(Ne,{key:1,item:be,class:normalizeClass({disabled:g.value!=="finished"&&g.value!=="next"}),"data-element":be.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0)],64))),128))])])):e.toolMode==="document"?(openBlock(),createBlock(Be,{key:2})):createCommentVNode("",!0)}}},Header_vue_vue_type_style_index_0_lang="",_sfc_main$1={__name:"Header",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=n.getActiveHeaderItems,s=n.getActiveRightHeaderItems,u=computed(()=>n.getToolMode),d=computed(()=>n.getSignatureVerify),f=computed(()=>n.getDisabledHeader),g=computed(()=>r.getActiveTool);return(m,y)=>{const v=_sfc_main$2,_=__unplugin_components_1$1,w=__unplugin_components_2$5,x=_sfc_main$11;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(["header",{disabled:f.value||["redaction","remove"].includes(g.value)}]),"data-element":"header"},[createVNode(v,{items:unref(o),rightItems:unref(s),toolMode:u.value},null,8,["items","rightItems","toolMode"])],2),createVNode(_),d.value&&u.value==="sign"?(openBlock(),createBlock(w,{key:0})):createCommentVNode("",!0),withDirectives(createVNode(x,null,null,512),[[vShow,["redaction","remove"].includes(g.value)]])],64)}}},initDocument=(e={})=>{const n=new ComPDFKitViewer(e);window.instance=n,core.setDocumentViewer(1,n)};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,o)}return r}function _objectSpread2(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(o){_defineProperty(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _typeof(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(e)}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _extends(){return _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,n){if(e==null)return{};var r={},o=Object.keys(e),s,u;for(u=0;u<o.length;u++)s=o[u],!(n.indexOf(s)>=0)&&(r[s]=e[s]);return r}function _objectWithoutProperties(e,n){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,n),o,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)o=u[s],!(n.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(r[o]=e[o]))}return r}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _unsupportedIterableToArray(e,n){if(!!e){if(typeof e=="string")return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}}function _arrayLikeToArray(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var version="1.15.3";function userAgent(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(e,n,r){e.addEventListener(n,r,!IE11OrLess&&captureMode)}function off(e,n,r){e.removeEventListener(n,r,!IE11OrLess&&captureMode)}function matches(e,n){if(!!n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function getParentOrHost(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function closest(e,n,r,o){if(e){r=r||document;do{if(n!=null&&(n[0]===">"?e.parentNode===r&&matches(e,n):matches(e,n))||o&&e===r)return e;if(e===r)break}while(e=getParentOrHost(e))}return null}var R_SPACE=/\s+/g;function toggleClass(e,n,r){if(e&&n)if(e.classList)e.classList[r?"add":"remove"](n);else{var o=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+n+" "," ");e.className=(o+(r?" "+n:"")).replace(R_SPACE," ")}}function css(e,n,r){var o=e&&e.style;if(o){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),n===void 0?r:r[n];!(n in o)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),o[n]=r+(typeof r=="string"?"":"px")}}function matrix(e,n){var r="";if(typeof e=="string")r=e;else do{var o=css(e,"transform");o&&o!=="none"&&(r=o+" "+r)}while(!n&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function find(e,n,r){if(e){var o=e.getElementsByTagName(n),s=0,u=o.length;if(r)for(;s<u;s++)r(o[s],s);return o}return[]}function getWindowScrollingElement(){var e=document.scrollingElement;return e||document.documentElement}function getRect(e,n,r,o,s){if(!(!e.getBoundingClientRect&&e!==window)){var u,d,f,g,m,y,v;if(e!==window&&e.parentNode&&e!==getWindowScrollingElement()?(u=e.getBoundingClientRect(),d=u.top,f=u.left,g=u.bottom,m=u.right,y=u.height,v=u.width):(d=0,f=0,g=window.innerHeight,m=window.innerWidth,y=window.innerHeight,v=window.innerWidth),(n||r)&&e!==window&&(s=s||e.parentNode,!IE11OrLess))do if(s&&s.getBoundingClientRect&&(css(s,"transform")!=="none"||r&&css(s,"position")!=="static")){var _=s.getBoundingClientRect();d-=_.top+parseInt(css(s,"border-top-width")),f-=_.left+parseInt(css(s,"border-left-width")),g=d+u.height,m=f+u.width;break}while(s=s.parentNode);if(o&&e!==window){var w=matrix(s||e),x=w&&w.a,k=w&&w.d;w&&(d/=k,f/=x,v/=x,y/=k,g=d+y,m=f+v)}return{top:d,left:f,bottom:g,right:m,width:v,height:y}}}function isScrolledPast(e,n,r){for(var o=getParentAutoScrollElement(e,!0),s=getRect(e)[n];o;){var u=getRect(o)[r],d=void 0;if(r==="top"||r==="left"?d=s>=u:d=s<=u,!d)return o;if(o===getWindowScrollingElement())break;o=getParentAutoScrollElement(o,!1)}return!1}function getChild(e,n,r,o){for(var s=0,u=0,d=e.children;u<d.length;){if(d[u].style.display!=="none"&&d[u]!==Sortable.ghost&&(o||d[u]!==Sortable.dragged)&&closest(d[u],r.draggable,e,!1)){if(s===n)return d[u];s++}u++}return null}function lastChild(e,n){for(var r=e.lastElementChild;r&&(r===Sortable.ghost||css(r,"display")==="none"||n&&!matches(r,n));)r=r.previousElementSibling;return r||null}function index(e,n){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Sortable.clone&&(!n||matches(e,n))&&r++;return r}function getRelativeScrollOffset(e){var n=0,r=0,o=getWindowScrollingElement();if(e)do{var s=matrix(e),u=s.a,d=s.d;n+=e.scrollLeft*u,r+=e.scrollTop*d}while(e!==o&&(e=e.parentNode));return[n,r]}function indexOfObject(e,n){for(var r in e)if(!!e.hasOwnProperty(r)){for(var o in n)if(n.hasOwnProperty(o)&&n[o]===e[r][o])return Number(r)}return-1}function getParentAutoScrollElement(e,n){if(!e||!e.getBoundingClientRect)return getWindowScrollingElement();var r=e,o=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=css(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return getWindowScrollingElement();if(o||n)return r;o=!0}}while(r=r.parentNode);return getWindowScrollingElement()}function extend(e,n){if(e&&n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e}function isRectEqual(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var _throttleTimeout;function throttle(e,n){return function(){if(!_throttleTimeout){var r=arguments,o=this;r.length===1?e.call(o,r[0]):e.apply(o,r),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},n)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(e,n,r){e.scrollLeft+=n,e.scrollTop+=r}function clone(e){var n=window.Polymer,r=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}function setRect(e,n){css(e,"position","absolute"),css(e,"top",n.top),css(e,"left",n.left),css(e,"width",n.width),css(e,"height",n.height)}function unsetRect(e){css(e,"position",""),css(e,"top",""),css(e,"left",""),css(e,"width",""),css(e,"height","")}function getChildContainingRectFromElement(e,n,r){var o={};return Array.from(e.children).forEach(function(s){var u,d,f,g;if(!(!closest(s,n.draggable,e,!1)||s.animated||s===r)){var m=getRect(s);o.left=Math.min((u=o.left)!==null&&u!==void 0?u:1/0,m.left),o.top=Math.min((d=o.top)!==null&&d!==void 0?d:1/0,m.top),o.right=Math.max((f=o.right)!==null&&f!==void 0?f:-1/0,m.right),o.bottom=Math.max((g=o.bottom)!==null&&g!==void 0?g:-1/0,m.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(s){if(!(css(s,"display")==="none"||s===Sortable.ghost)){e.push({target:s,rect:getRect(s)});var u=_objectSpread2({},e[e.length-1].rect);if(s.thisAnimationDuration){var d=matrix(s,!0);d&&(u.top-=d.f,u.left-=d.e)}s.fromRect=u}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(indexOfObject(e,{target:o}),1)},animateAll:function(o){var s=this;if(!this.options.animation){clearTimeout(n),typeof o=="function"&&o();return}var u=!1,d=0;e.forEach(function(f){var g=0,m=f.target,y=m.fromRect,v=getRect(m),_=m.prevFromRect,w=m.prevToRect,x=f.rect,k=matrix(m,!0);k&&(v.top-=k.f,v.left-=k.e),m.toRect=v,m.thisAnimationDuration&&isRectEqual(_,v)&&!isRectEqual(y,v)&&(x.top-v.top)/(x.left-v.left)===(y.top-v.top)/(y.left-v.left)&&(g=calculateRealTime(x,_,w,s.options)),isRectEqual(v,y)||(m.prevFromRect=y,m.prevToRect=v,g||(g=s.options.animation),s.animate(m,x,v,g)),g&&(u=!0,d=Math.max(d,g),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},g),m.thisAnimationDuration=g)}),clearTimeout(n),u?n=setTimeout(function(){typeof o=="function"&&o()},d):typeof o=="function"&&o(),e=[]},animate:function(o,s,u,d){if(d){css(o,"transition",""),css(o,"transform","");var f=matrix(this.el),g=f&&f.a,m=f&&f.d,y=(s.left-u.left)/(g||1),v=(s.top-u.top)/(m||1);o.animatingX=!!y,o.animatingY=!!v,css(o,"transform","translate3d("+y+"px,"+v+"px,0)"),this.forRepaintDummy=repaint(o),css(o,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),css(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){css(o,"transition",""),css(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},d)}}}}function repaint(e){return e.offsetWidth}function calculateRealTime(e,n,r,o){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-r.top,2)+Math.pow(n.left-r.left,2))*o.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function e(n){for(var r in defaults)defaults.hasOwnProperty(r)&&!(r in n)&&(n[r]=defaults[r]);plugins.forEach(function(o){if(o.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),plugins.push(n)},pluginEvent:function e(n,r,o){var s=this;this.eventCanceled=!1,o.cancel=function(){s.eventCanceled=!0};var u=n+"Global";plugins.forEach(function(d){!r[d.pluginName]||(r[d.pluginName][u]&&r[d.pluginName][u](_objectSpread2({sortable:r},o)),r.options[d.pluginName]&&r[d.pluginName][n]&&r[d.pluginName][n](_objectSpread2({sortable:r},o)))})},initializePlugins:function e(n,r,o,s){plugins.forEach(function(f){var g=f.pluginName;if(!(!n.options[g]&&!f.initializeByDefault)){var m=new f(n,r,n.options);m.sortable=n,m.options=n.options,n[g]=m,_extends(o,m.defaults)}});for(var u in n.options)if(!!n.options.hasOwnProperty(u)){var d=this.modifyOption(n,u,n.options[u]);typeof d<"u"&&(n.options[u]=d)}},getEventProperties:function e(n,r){var o={};return plugins.forEach(function(s){typeof s.eventProperties=="function"&&_extends(o,s.eventProperties.call(r[s.pluginName],n))}),o},modifyOption:function e(n,r,o){var s;return plugins.forEach(function(u){!n[u.pluginName]||u.optionListeners&&typeof u.optionListeners[r]=="function"&&(s=u.optionListeners[r].call(n[u.pluginName],o))}),s}};function dispatchEvent(e){var n=e.sortable,r=e.rootEl,o=e.name,s=e.targetEl,u=e.cloneEl,d=e.toEl,f=e.fromEl,g=e.oldIndex,m=e.newIndex,y=e.oldDraggableIndex,v=e.newDraggableIndex,_=e.originalEvent,w=e.putSortable,x=e.extraEventProperties;if(n=n||r&&r[expando],!!n){var k,S=n.options,M="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?k=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(o,!0,!0)),k.to=d||r,k.from=f||r,k.item=s||r,k.clone=u,k.oldIndex=g,k.newIndex=m,k.oldDraggableIndex=y,k.newDraggableIndex=v,k.originalEvent=_,k.pullMode=w?w.lastPutMode:void 0;var E=_objectSpread2(_objectSpread2({},x),PluginManager.getEventProperties(o,n));for(var P in E)k[P]=E[P];r&&r.dispatchEvent(k),S[M]&&S[M].call(n,k)}}var _excluded=["evt"],pluginEvent=function e(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.evt,u=_objectWithoutProperties(o,_excluded);PluginManager.pluginEvent.bind(Sortable)(n,r,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:s,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(f){_dispatchEvent({sortable:r,name:f,originalEvent:s})}},u))};function _dispatchEvent(e){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},e))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(!!documentExists){if(IE11OrLess)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),_detectDirection=function e(n,r){var o=css(n),s=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),u=getChild(n,0,r),d=getChild(n,1,r),f=u&&css(u),g=d&&css(d),m=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+getRect(u).width,y=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+getRect(d).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&f.float&&f.float!=="none"){var v=f.float==="left"?"left":"right";return d&&(g.clear==="both"||g.clear===v)?"vertical":"horizontal"}return u&&(f.display==="block"||f.display==="flex"||f.display==="table"||f.display==="grid"||m>=s&&o[CSSFloatProperty]==="none"||d&&o[CSSFloatProperty]==="none"&&m+y>s)?"vertical":"horizontal"},_dragElInRowColumn=function e(n,r,o){var s=o?n.left:n.top,u=o?n.right:n.bottom,d=o?n.width:n.height,f=o?r.left:r.top,g=o?r.right:r.bottom,m=o?r.width:r.height;return s===f||u===g||s+d/2===f+m/2},_detectNearestEmptySortable=function e(n,r){var o;return sortables.some(function(s){var u=s[expando].options.emptyInsertThreshold;if(!(!u||lastChild(s))){var d=getRect(s),f=n>=d.left-u&&n<=d.right+u,g=r>=d.top-u&&r<=d.bottom+u;if(f&&g)return o=s}}),o},_prepareGroup=function e(n){function r(u,d){return function(f,g,m,y){var v=f.options.group.name&&g.options.group.name&&f.options.group.name===g.options.group.name;if(u==null&&(d||v))return!0;if(u==null||u===!1)return!1;if(d&&u==="clone")return u;if(typeof u=="function")return r(u(f,g,m,y),d)(f,g,m,y);var _=(d?f:g).options.group.name;return u===!0||typeof u=="string"&&u===_||u.join&&u.indexOf(_)>-1}}var o={},s=n.group;(!s||_typeof(s)!="object")&&(s={name:s}),o.name=s.name,o.checkPull=r(s.pull,!0),o.checkPut=r(s.put),o.revertClone=s.revertClone,n.group=o},_hideGhostForTarget=function e(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function e(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(e){if(ignoreNextClick)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function e(n){if(dragEl){n=n.touches?n.touches[0]:n;var r=_detectNearestEmptySortable(n.clientX,n.clientY);if(r){var o={};for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);o.target=o.rootEl=r,o.preventDefault=void 0,o.stopPropagation=void 0,r[expando]._onDragOver(o)}}},_checkOutsideTargetEl=function e(n){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(n.target)};function Sortable(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=_extends({},n),e[expando]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,f){d.setData("Text",f.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,e,r);for(var o in r)!(o in n)&&(n[o]=r[o]);_prepareGroup(n);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=n.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?on(e,"pointerdown",this._onTapStart):(on(e,"mousedown",this._onTapStart),on(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(e,"dragover",this),on(e,"dragenter",this)),sortables.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function e(n){!this.el.contains(n)&&n!==this.el&&(lastTarget=null)},_getDirection:function e(n,r){return typeof this.options.direction=="function"?this.options.direction.call(this,n,r,dragEl):this.options.direction},_onTapStart:function e(n){if(!!n.cancelable){var r=this,o=this.el,s=this.options,u=s.preventOnFilter,d=n.type,f=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,g=(f||n).target,m=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||g,y=s.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(d)&&n.button!==0||s.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&Safari&&g&&g.tagName.toUpperCase()==="SELECT")&&(g=closest(g,s.draggable,o,!1),!(g&&g.animated)&&lastDownEl!==g)){if(oldIndex=index(g),oldDraggableIndex=index(g,s.draggable),typeof y=="function"){if(y.call(this,n,g,this)){_dispatchEvent({sortable:r,rootEl:m,name:"filter",targetEl:g,toEl:o,fromEl:o}),pluginEvent("filter",r,{evt:n}),u&&n.cancelable&&n.preventDefault();return}}else if(y&&(y=y.split(",").some(function(v){if(v=closest(m,v.trim(),o,!1),v)return _dispatchEvent({sortable:r,rootEl:v,name:"filter",targetEl:g,fromEl:o,toEl:o}),pluginEvent("filter",r,{evt:n}),!0}),y)){u&&n.cancelable&&n.preventDefault();return}s.handle&&!closest(m,s.handle,o,!1)||this._prepareDragStart(n,f,g)}}},_prepareDragStart:function e(n,r,o){var s=this,u=s.el,d=s.options,f=u.ownerDocument,g;if(o&&!dragEl&&o.parentNode===u){var m=getRect(o);if(rootEl=u,dragEl=o,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=d.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(r||n).clientX,clientY:(r||n).clientY},tapDistanceLeft=tapEvt.clientX-m.left,tapDistanceTop=tapEvt.clientY-m.top,this._lastX=(r||n).clientX,this._lastY=(r||n).clientY,dragEl.style["will-change"]="all",g=function(){if(pluginEvent("delayEnded",s,{evt:n}),Sortable.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!FireFox&&s.nativeDraggable&&(dragEl.draggable=!0),s._triggerDragStart(n,r),_dispatchEvent({sortable:s,name:"choose",originalEvent:n}),toggleClass(dragEl,d.chosenClass,!0)},d.ignore.split(",").forEach(function(y){find(dragEl,y.trim(),_disableDraggable)}),on(f,"dragover",nearestEmptyInsertDetectEvent),on(f,"mousemove",nearestEmptyInsertDetectEvent),on(f,"touchmove",nearestEmptyInsertDetectEvent),on(f,"mouseup",s._onDrop),on(f,"touchend",s._onDrop),on(f,"touchcancel",s._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:n}),d.delay&&(!d.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(f,"mouseup",s._disableDelayedDrag),on(f,"touchend",s._disableDelayedDrag),on(f,"touchcancel",s._disableDelayedDrag),on(f,"mousemove",s._delayedDragTouchMoveHandler),on(f,"touchmove",s._delayedDragTouchMoveHandler),d.supportPointer&&on(f,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(g,d.delay)}else g()}},_delayedDragTouchMoveHandler:function e(n){var r=n.touches?n.touches[0]:n;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function e(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function e(){var n=this.el.ownerDocument;off(n,"mouseup",this._disableDelayedDrag),off(n,"touchend",this._disableDelayedDrag),off(n,"touchcancel",this._disableDelayedDrag),off(n,"mousemove",this._delayedDragTouchMoveHandler),off(n,"touchmove",this._delayedDragTouchMoveHandler),off(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function e(n,r){r=r||n.pointerType=="touch"&&n,!this.nativeDraggable||r?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):r?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function e(n,r){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:r}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var o=this.options;!n&&toggleClass(dragEl,o.dragClass,!1),toggleClass(dragEl,o.ghostClass,!0),Sortable.active=this,n&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function e(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var n=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),r=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),n!==r);)r=n;if(dragEl.parentNode[expando]._isOutsideThisEl(n),r)do{if(r[expando]){var o=void 0;if(o=r[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:n,rootEl:r}),o&&!this.options.dragoverBubble)break}n=r}while(r=getParentOrHost(r));_unhideGhostForTarget()}},_onTouchMove:function e(n){if(tapEvt){var r=this.options,o=r.fallbackTolerance,s=r.fallbackOffset,u=n.touches?n.touches[0]:n,d=ghostEl&&matrix(ghostEl,!0),f=ghostEl&&d&&d.a,g=ghostEl&&d&&d.d,m=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),y=(u.clientX-tapEvt.clientX+s.x)/(f||1)+(m?m[0]-ghostRelativeParentInitialScroll[0]:0)/(f||1),v=(u.clientY-tapEvt.clientY+s.y)/(g||1)+(m?m[1]-ghostRelativeParentInitialScroll[1]:0)/(g||1);if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<o)return;this._onDragStart(n,!0)}if(ghostEl){d?(d.e+=y-(lastDx||0),d.f+=v-(lastDy||0)):d={a:1,b:0,c:0,d:1,e:y,f:v};var _="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");css(ghostEl,"webkitTransform",_),css(ghostEl,"mozTransform",_),css(ghostEl,"msTransform",_),css(ghostEl,"transform",_),lastDx=y,lastDy=v,touchEvt=u}n.cancelable&&n.preventDefault()}},_appendGhost:function e(){if(!ghostEl){var n=this.options.fallbackOnBody?document.body:rootEl,r=getRect(dragEl,!0,PositionGhostAbsolutely,!0,n),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=n;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),r.top+=ghostRelativeParent.scrollTop,r.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,o.ghostClass,!1),toggleClass(ghostEl,o.fallbackClass,!0),toggleClass(ghostEl,o.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",r.top),css(ghostEl,"left",r.left),css(ghostEl,"width",r.width),css(ghostEl,"height",r.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,n.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function e(n,r){var o=this,s=n.dataTransfer,u=o.options;if(pluginEvent("dragStart",this,{evt:n}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick(function(){pluginEvent("clone",o),!Sortable.eventCanceled&&(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))}),!r&&toggleClass(dragEl,u.dragClass,!0),r?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),s&&(s.effectAllowed="move",u.setData&&u.setData.call(o,s,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,r,n)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function e(n){var r=this.el,o=n.target,s,u,d,f=this.options,g=f.group,m=Sortable.active,y=activeGroup===g,v=f.sort,_=putSortable||m,w,x=this,k=!1;if(_silent)return;function S(W,H){pluginEvent(W,x,_objectSpread2({evt:n,isOwner:y,axis:w?"vertical":"horizontal",revert:d,dragRect:s,targetRect:u,canSort:v,fromSortable:_,target:o,completed:E,onMove:function(Q,fe){return _onMove(rootEl,r,dragEl,s,Q,getRect(Q),n,fe)},changed:P},H))}function M(){S("dragOverAnimationCapture"),x.captureAnimationState(),x!==_&&_.captureAnimationState()}function E(W){return S("dragOverCompleted",{insertion:W}),W&&(y?m._hideClone():m._showClone(x),x!==_&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:m.options.ghostClass,!1),toggleClass(dragEl,f.ghostClass,!0)),putSortable!==x&&x!==Sortable.active?putSortable=x:x===Sortable.active&&putSortable&&(putSortable=null),_===x&&(x._ignoreWhileAnimating=o),x.animateAll(function(){S("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(o===dragEl&&!dragEl.animated||o===r&&!o.animated)&&(lastTarget=null),!f.dragoverBubble&&!n.rootEl&&o!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(n.target),!W&&nearestEmptyInsertDetectEvent(n)),!f.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),k=!0}function P(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,f.draggable),_dispatchEvent({sortable:x,name:"change",toEl:r,newIndex,newDraggableIndex,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),o=closest(o,f.draggable,r,!0),S("dragOver"),Sortable.eventCanceled)return k;if(dragEl.contains(n.target)||o.animated&&o.animatingX&&o.animatingY||x._ignoreWhileAnimating===o)return E(!1);if(ignoreNextClick=!1,m&&!f.disabled&&(y?v||(d=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,m,dragEl,n))&&g.checkPut(this,m,dragEl,n))){if(w=this._getDirection(n,o)==="vertical",s=getRect(dragEl),S("dragOverValid"),Sortable.eventCanceled)return k;if(d)return parentEl=rootEl,M(),this._hideClone(),S("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),E(!0);var T=lastChild(r,f.draggable);if(!T||_ghostIsLast(n,w,this)&&!T.animated){if(T===dragEl)return E(!1);if(T&&r===n.target&&(o=T),o&&(u=getRect(o)),_onMove(rootEl,r,dragEl,s,o,u,n,!!o)!==!1)return M(),T&&T.nextSibling?r.insertBefore(dragEl,T.nextSibling):r.appendChild(dragEl),parentEl=r,P(),E(!0)}else if(T&&_ghostIsFirst(n,w,this)){var D=getChild(r,0,f,!0);if(D===dragEl)return E(!1);if(o=D,u=getRect(o),_onMove(rootEl,r,dragEl,s,o,u,n,!1)!==!1)return M(),r.insertBefore(dragEl,D),parentEl=r,P(),E(!0)}else if(o.parentNode===r){u=getRect(o);var F=0,I,N=dragEl.parentNode!==r,q=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||s,o.animated&&o.toRect||u,w),Y=w?"top":"left",Z=isScrolledPast(o,"top","top")||isScrolledPast(dragEl,"top","top"),j=Z?Z.scrollTop:void 0;lastTarget!==o&&(I=u[Y],pastFirstInvertThresh=!1,isCircumstantialInvert=!q&&f.invertSwap||N),F=_getSwapDirection(n,o,u,w,q?1:f.swapThreshold,f.invertedSwapThreshold==null?f.swapThreshold:f.invertedSwapThreshold,isCircumstantialInvert,lastTarget===o);var ne;if(F!==0){var le=index(dragEl);do le-=F,ne=parentEl.children[le];while(ne&&(css(ne,"display")==="none"||ne===ghostEl))}if(F===0||ne===o)return E(!1);lastTarget=o,lastDirection=F;var J=o.nextElementSibling,O=!1;O=F===1;var U=_onMove(rootEl,r,dragEl,s,o,u,n,O);if(U!==!1)return(U===1||U===-1)&&(O=U===1),_silent=!0,setTimeout(_unsilent,30),M(),O&&!J?r.appendChild(dragEl):o.parentNode.insertBefore(dragEl,O?J:o),Z&&scrollBy(Z,0,j-Z.scrollTop),parentEl=dragEl.parentNode,I!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(I-getRect(o)[Y])),P(),E(!0)}if(r.contains(dragEl))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function e(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function e(){var n=this.el.ownerDocument;off(n,"mouseup",this._onDrop),off(n,"touchend",this._onDrop),off(n,"pointerup",this._onDrop),off(n,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function e(n){var r=this.el,o=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),pluginEvent("drop",this,{evt:n}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),n&&(moved&&(n.cancelable&&n.preventDefault(),!o.dropBubble&&n.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:n}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:n}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:n})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:n})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:n}),this.save()))),this._nulling()},_nulling:function e(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(n){n.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function e(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(n),_globalDragOver(n));break;case"selectstart":n.preventDefault();break}},toArray:function e(){for(var n=[],r,o=this.el.children,s=0,u=o.length,d=this.options;s<u;s++)r=o[s],closest(r,d.draggable,this.el,!1)&&n.push(r.getAttribute(d.dataIdAttr)||_generateId(r));return n},sort:function e(n,r){var o={},s=this.el;this.toArray().forEach(function(u,d){var f=s.children[d];closest(f,this.options.draggable,s,!1)&&(o[u]=f)},this),r&&this.captureAnimationState(),n.forEach(function(u){o[u]&&(s.removeChild(o[u]),s.appendChild(o[u]))}),r&&this.animateAll()},save:function e(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function e(n,r){return closest(n,r||this.options.draggable,this.el,!1)},option:function e(n,r){var o=this.options;if(r===void 0)return o[n];var s=PluginManager.modifyOption(this,n,r);typeof s<"u"?o[n]=s:o[n]=r,n==="group"&&_prepareGroup(o)},destroy:function e(){pluginEvent("destroy",this);var n=this.el;n[expando]=null,off(n,"mousedown",this._onTapStart),off(n,"touchstart",this._onTapStart),off(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(n,"dragover",this),off(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=n=null},_hideClone:function e(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function e(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _onMove(e,n,r,o,s,u,d,f){var g,m=e[expando],y=m.options.onMove,v;return window.CustomEvent&&!IE11OrLess&&!Edge?g=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent("move",!0,!0)),g.to=n,g.from=e,g.dragged=r,g.draggedRect=o,g.related=s||n,g.relatedRect=u||getRect(n),g.willInsertAfter=f,g.originalEvent=d,e.dispatchEvent(g),y&&(v=y.call(m,g,d)),v}function _disableDraggable(e){e.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(e,n,r){var o=getRect(getChild(r.el,0,r.options,!0)),s=getChildContainingRectFromElement(r.el,r.options,ghostEl),u=10;return n?e.clientX<s.left-u||e.clientY<o.top&&e.clientX<o.right:e.clientY<s.top-u||e.clientY<o.bottom&&e.clientX<o.left}function _ghostIsLast(e,n,r){var o=getRect(lastChild(r.el,r.options.draggable)),s=getChildContainingRectFromElement(r.el,r.options,ghostEl),u=10;return n?e.clientX>s.right+u||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>s.bottom+u||e.clientX>o.right&&e.clientY>o.top}function _getSwapDirection(e,n,r,o,s,u,d,f){var g=o?e.clientY:e.clientX,m=o?r.height:r.width,y=o?r.top:r.left,v=o?r.bottom:r.right,_=!1;if(!d){if(f&&targetMoveDistance<m*s){if(!pastFirstInvertThresh&&(lastDirection===1?g>y+m*u/2:g<v-m*u/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)_=!0;else if(lastDirection===1?g<y+targetMoveDistance:g>v-targetMoveDistance)return-lastDirection}else if(g>y+m*(1-s)/2&&g<v-m*(1-s)/2)return _getInsertDirection(n)}return _=_||d,_&&(g<y+m*u/2||g>v-m*u/2)?g>y+m/2?1:-1:0}function _getInsertDirection(e){return index(dragEl)<index(e)?1:-1}function _generateId(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,r=n.length,o=0;r--;)o+=n.charCodeAt(r);return o.toString(36)}function _saveInputCheckedState(e){savedInputChecked.length=0;for(var n=e.getElementsByTagName("input"),r=n.length;r--;){var o=n[r];o.checked&&savedInputChecked.push(o)}}function _nextTick(e){return setTimeout(e,0)}function _cancelNextTick(e){return clearTimeout(e)}documentExists&&on(document,"touchmove",function(e){(Sortable.active||awaitingDragStarted)&&e.cancelable&&e.preventDefault()});Sortable.utils={on,off,css,find,is:function e(n,r){return!!closest(n,r,n,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(e){return e[expando]};Sortable.mount=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n[0].constructor===Array&&(n=n[0]),n.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),o.utils)),PluginManager.mount(o)})};Sortable.create=function(e,n){return new Sortable(e,n)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(r){var o=r.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):o.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var o=r.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,o){var s=this,u=(r.touches?r.touches[0]:r).clientX,d=(r.touches?r.touches[0]:r).clientY,f=document.elementFromPoint(u,d);if(touchEvt$1=r,o||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(r,this.options,f,o);var g=getParentAutoScrollElement(f,!0);scrolling&&(!pointerElemChangedInterval||u!==lastAutoScrollX||d!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var m=getParentAutoScrollElement(document.elementFromPoint(u,d),!0);m!==g&&(g=m,clearAutoScrolls()),autoScroll(r,s.options,m,o)},10),lastAutoScrollX=u,lastAutoScrollY=d)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(f,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(r,this.options,getParentAutoScrollElement(f,!1),!1)}}},_extends(e,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(e){clearInterval(e.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(e,n,r,o){if(!!n.scroll){var s=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,d=n.scrollSensitivity,f=n.scrollSpeed,g=getWindowScrollingElement(),m=!1,y;scrollRootEl!==r&&(scrollRootEl=r,clearAutoScrolls(),scrollEl=n.scroll,y=n.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(r,!0)));var v=0,_=scrollEl;do{var w=_,x=getRect(w),k=x.top,S=x.bottom,M=x.left,E=x.right,P=x.width,T=x.height,D=void 0,F=void 0,I=w.scrollWidth,N=w.scrollHeight,q=css(w),Y=w.scrollLeft,Z=w.scrollTop;w===g?(D=P<I&&(q.overflowX==="auto"||q.overflowX==="scroll"||q.overflowX==="visible"),F=T<N&&(q.overflowY==="auto"||q.overflowY==="scroll"||q.overflowY==="visible")):(D=P<I&&(q.overflowX==="auto"||q.overflowX==="scroll"),F=T<N&&(q.overflowY==="auto"||q.overflowY==="scroll"));var j=D&&(Math.abs(E-s)<=d&&Y+P<I)-(Math.abs(M-s)<=d&&!!Y),ne=F&&(Math.abs(S-u)<=d&&Z+T<N)-(Math.abs(k-u)<=d&&!!Z);if(!autoScrolls[v])for(var le=0;le<=v;le++)autoScrolls[le]||(autoScrolls[le]={});(autoScrolls[v].vx!=j||autoScrolls[v].vy!=ne||autoScrolls[v].el!==w)&&(autoScrolls[v].el=w,autoScrolls[v].vx=j,autoScrolls[v].vy=ne,clearInterval(autoScrolls[v].pid),(j!=0||ne!=0)&&(m=!0,autoScrolls[v].pid=setInterval(function(){o&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var J=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*f:0,O=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*f:0;typeof y=="function"&&y.call(Sortable.dragged.parentNode[expando],O,J,e,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,O,J)}.bind({layer:v}),24))),v++}while(n.bubbleScroll&&_!==g&&(_=getParentAutoScrollElement(_,!1)));scrolling=m}},30),drop=function e(n){var r=n.originalEvent,o=n.putSortable,s=n.dragEl,u=n.activeSortable,d=n.dispatchSortableEvent,f=n.hideGhostForTarget,g=n.unhideGhostForTarget;if(!!r){var m=o||u;f();var y=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,v=document.elementFromPoint(y.clientX,y.clientY);g(),m&&!m.el.contains(v)&&(d("spill"),this.onSpill({dragEl:s,putSortable:o}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function e(n){var r=n.oldDraggableIndex;this.startIndex=r},onSpill:function e(n){var r=n.dragEl,o=n.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var s=getChild(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),o&&o.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function e(n){var r=n.dragEl,o=n.putSortable,s=o||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});var multiDragElements=[],multiDragClones=[],lastMultiDragSelect,multiDragSortable,initialFolding=!1,folding=!1,dragStarted=!1,dragEl$1,clonesFromRect,clonesHidden;function MultiDragPlugin(){function e(n){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));n.options.avoidImplicitDeselect||(n.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag))),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(s,u){var d="";multiDragElements.length&&multiDragSortable===n?multiDragElements.forEach(function(f,g){d+=(g?", ":"")+f.textContent}):d=u.textContent,s.setData("Text",d)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var o=r.dragEl;dragEl$1=o},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(r){var o=r.sortable,s=r.cancel;if(!!this.isMultiDrag){for(var u=0;u<multiDragElements.length;u++)multiDragClones.push(clone(multiDragElements[u])),multiDragClones[u].sortableIndex=multiDragElements[u].sortableIndex,multiDragClones[u].draggable=!1,multiDragClones[u].style["will-change"]="",toggleClass(multiDragClones[u],this.options.selectedClass,!1),multiDragElements[u]===dragEl$1&&toggleClass(multiDragClones[u],this.options.chosenClass,!1);o._hideClone(),s()}},clone:function(r){var o=r.sortable,s=r.rootEl,u=r.dispatchSortableEvent,d=r.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===o&&(insertMultiDragClones(!0,s),u("clone"),d())},showClone:function(r){var o=r.cloneNowShown,s=r.rootEl,u=r.cancel;!this.isMultiDrag||(insertMultiDragClones(!1,s),multiDragClones.forEach(function(d){css(d,"display","")}),o(),clonesHidden=!1,u())},hideClone:function(r){var o=this;r.sortable;var s=r.cloneNowHidden,u=r.cancel;!this.isMultiDrag||(multiDragClones.forEach(function(d){css(d,"display","none"),o.options.removeCloneOnHide&&d.parentNode&&d.parentNode.removeChild(d)}),s(),clonesHidden=!0,u())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(o){o.sortableIndex=index(o)}),multiDragElements=multiDragElements.sort(function(o,s){return o.sortableIndex-s.sortableIndex}),dragStarted=!0},dragStarted:function(r){var o=this,s=r.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){multiDragElements.forEach(function(d){d!==dragEl$1&&css(d,"position","absolute")});var u=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(d){d!==dragEl$1&&setRect(d,u)}),folding=!0,initialFolding=!0}s.animateAll(function(){folding=!1,initialFolding=!1,o.options.animation&&multiDragElements.forEach(function(d){unsetRect(d)}),o.options.sort&&removeMultiDragElements()})}},dragOver:function(r){var o=r.target,s=r.completed,u=r.cancel;folding&&~multiDragElements.indexOf(o)&&(s(!1),u())},revert:function(r){var o=r.fromSortable,s=r.rootEl,u=r.sortable,d=r.dragRect;multiDragElements.length>1&&(multiDragElements.forEach(function(f){u.addAnimationState({target:f,rect:folding?getRect(f):d}),unsetRect(f),f.fromRect=d,o.removeAnimationState(f)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(r){var o=r.sortable,s=r.isOwner,u=r.insertion,d=r.activeSortable,f=r.parentEl,g=r.putSortable,m=this.options;if(u){if(s&&d._hideClone(),initialFolding=!1,m.animation&&multiDragElements.length>1&&(folding||!s&&!d.options.sort&&!g)){var y=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(_){_!==dragEl$1&&(setRect(_,y),f.appendChild(_))}),folding=!0}if(!s)if(folding||removeMultiDragElements(),multiDragElements.length>1){var v=clonesHidden;d._showClone(o),d.options.animation&&!clonesHidden&&v&&multiDragClones.forEach(function(_){d.addAnimationState({target:_,rect:clonesFromRect}),_.fromRect=clonesFromRect,_.thisAnimationDuration=null})}else d._showClone(o)}},dragOverAnimationCapture:function(r){var o=r.dragRect,s=r.isOwner,u=r.activeSortable;if(multiDragElements.forEach(function(f){f.thisAnimationDuration=null}),u.options.animation&&!s&&u.multiDrag.isMultiDrag){clonesFromRect=_extends({},o);var d=matrix(dragEl$1,!0);clonesFromRect.top-=d.f,clonesFromRect.left-=d.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(r){var o=r.originalEvent,s=r.rootEl,u=r.parentEl,d=r.sortable,f=r.dispatchSortableEvent,g=r.oldIndex,m=r.putSortable,y=m||this.sortable;if(!!o){var v=this.options,_=u.children;if(!dragStarted)if(v.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,v.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:d,rootEl:s,name:"deselect",targetEl:dragEl$1,originalEvent:o});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:d,rootEl:s,name:"select",targetEl:dragEl$1,originalEvent:o}),o.shiftKey&&lastMultiDragSelect&&d.el.contains(lastMultiDragSelect)){var w=index(lastMultiDragSelect),x=index(dragEl$1);if(~w&&~x&&w!==x){var k,S;for(x>w?(S=w,k=x):(S=x,k=w+1);S<k;S++)~multiDragElements.indexOf(_[S])||(toggleClass(_[S],v.selectedClass,!0),multiDragElements.push(_[S]),dispatchEvent({sortable:d,rootEl:s,name:"select",targetEl:_[S],originalEvent:o}))}}else lastMultiDragSelect=dragEl$1;multiDragSortable=y}if(dragStarted&&this.isMultiDrag){if(folding=!1,(u[expando].options.sort||u!==s)&&multiDragElements.length>1){var M=getRect(dragEl$1),E=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&v.animation&&(dragEl$1.thisAnimationDuration=null),y.captureAnimationState(),!initialFolding&&(v.animation&&(dragEl$1.fromRect=M,multiDragElements.forEach(function(T){if(T.thisAnimationDuration=null,T!==dragEl$1){var D=folding?getRect(T):M;T.fromRect=D,y.addAnimationState({target:T,rect:D})}})),removeMultiDragElements(),multiDragElements.forEach(function(T){_[E]?u.insertBefore(T,_[E]):u.appendChild(T),E++}),g===index(dragEl$1))){var P=!1;multiDragElements.forEach(function(T){if(T.sortableIndex!==index(T)){P=!0;return}}),P&&(f("update"),f("sort"))}multiDragElements.forEach(function(T){unsetRect(T)}),y.animateAll()}multiDragSortable=y}(s===u||m&&m.lastPutMode!=="clone")&&multiDragClones.forEach(function(T){T.parentNode&&T.parentNode.removeChild(T)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof dragStarted<"u"&&dragStarted)&&multiDragSortable===this.sortable&&!(r&&closest(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;multiDragElements.length;){var o=multiDragElements[0];toggleClass(o,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:o,originalEvent:r})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(e,{pluginName:"multiDrag",utils:{select:function(r){var o=r.parentNode[expando];!o||!o.options.multiDrag||~multiDragElements.indexOf(r)||(multiDragSortable&&multiDragSortable!==o&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=o),toggleClass(r,o.options.selectedClass,!0),multiDragElements.push(r))},deselect:function(r){var o=r.parentNode[expando],s=multiDragElements.indexOf(r);!o||!o.options.multiDrag||!~s||(toggleClass(r,o.options.selectedClass,!1),multiDragElements.splice(s,1))}},eventProperties:function(){var r=this,o=[],s=[];return multiDragElements.forEach(function(u){o.push({multiDragElement:u,index:u.sortableIndex});var d;folding&&u!==dragEl$1?d=-1:folding?d=index(u,":not(."+r.options.selectedClass+")"):d=index(u),s.push({multiDragElement:u,index:d})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:o,newIndicies:s}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function insertMultiDragElements(e,n){multiDragElements.forEach(function(r,o){var s=n.children[r.sortableIndex+(e?Number(o):0)];s?n.insertBefore(r,s):n.appendChild(r)})}function insertMultiDragClones(e,n){multiDragClones.forEach(function(r,o){var s=n.children[r.sortableIndex+(e?Number(o):0)];s?n.insertBefore(r,s):n.appendChild(r)})}function removeMultiDragElements(){multiDragElements.forEach(function(e){e!==dragEl$1&&e.parentNode&&e.parentNode.removeChild(e)})}Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);const index_vue_vue_type_style_index_0_lang="",_hoisted_1={class:"loading"},_hoisted_2={class:"error-dialog"},_hoisted_3={class:"close-btn"},_hoisted_4={class:"fail-logo"},_hoisted_5={class:"text"},_hoisted_6={class:"mask active"},_sfc_main={__name:"index",setup(e){Sortable.mount(new MultiDragPlugin);const n=useViewerStore(),r=computed(()=>n.getThemeMode),o=computed(()=>n.getDownloading),s=computed(()=>n.getDownloadError),u=computed(()=>n.isElementOpen("signCreatePanel")),d=computed(()=>n.isElementOpen("digitalSignCreatePanel")),f=computed(()=>n.getPopoverChanged),g=computed(()=>n.getToolMode),m=computed(()=>n.getScale),y=getCurrentInstance().appContext.app.config.globalProperties;provide("themeMode",r),initDocument({$t:y.$t});const v=!getHashParameters("header",!0),_=getHashParameters("css",null);if(_){const Y=document.createElement("link");Y.rel="stylesheet",Y.type="text/css",Y.href=_,document.getElementsByTagName("head")[0].appendChild(Y)}v&&n.setDisabledElements("header");const w=computed(()=>n.getDisabledElements("header"));window.instance.changeFile=()=>{document.getElementById("fileInput").click(),(u.value||d.value)&&(n.closeElement("signCreatePanel"),n.closeElement("digitalSignCreatePanel"),n.setActiveToolMode("view")),f.value||n.setPopoverChanged(!0),g.value==="document"&&core.saveDocumentEdit("cancel")};const x=()=>{n.setDownloadError("")},k=ref(),S=ref(1);let M=0,E=1,P=1,T=0,D=!1;const F=Y=>{Y.touches.length===2&&(M=q(Y.touches),E=S.value,P=m.value,T=P,D=!0)},I=Y=>{if(D&&Y.touches.length===2){k.value.style.transform=`scale(${S.value})`;const Z=q(Y.touches);S.value=E*(Z/M),T=Math.round(P*S.value),n.setCurrentScale(T/100)}},N=Y=>{D&&Y.touches.length<2&&(k.value.style.transform="",core.scaleChanged(T/100),S.value=1,D=!1)},q=Y=>{const Z=Y[0].clientX-Y[1].clientX,j=Y[0].clientY-Y[1].clientY;return Math.sqrt(Z*Z+j*j)};return window.parent.postMessage({type:"documentViewerLoaded",docId:parseInt(getHashParameters("docId"),10)},"*"),(Y,Z)=>{const j=_sfc_main$1,ne=_sfc_main$12,le=_sfc_main$1y,J=_sfc_main$2H,O=_sfc_main$2P,U=_sfc_main$3a,W=_sfc_main$3i,H=_sfc_main$3q,X=_sfc_main$3r,Q=_sfc_main$3t,fe=__unplugin_components_10$4,Se=_sfc_main$3J,Pe=__unplugin_components_12$3,$e=__unplugin_components_13$3,Ie=_sfc_main$3O,Ne=__unplugin_components_15$1,Be=_sfc_main$3Q,be=__unplugin_components_17$1;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{id:"outerContainer",class:normalizeClass(["app",{dark:r.value==="Dark"}])},[withDirectives(createBaseVNode("div",null,[createVNode(j)],512),[[vShow,!w.value]]),createBaseVNode("div",{class:"content",ref_key:"contentRef",ref:k,onTouchstart:F,onTouchmove:I,onTouchend:N},[createVNode(ne,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(le,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(J),g.value==="document"?(openBlock(),createBlock(O,{key:0,Sortable:unref(Sortable)},null,8,["Sortable"])):createCommentVNode("",!0),createVNode(U,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(W,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(H,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(X,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(Q,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(fe,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"]),createVNode(Se,{isHeaderDisabled:w.value},null,8,["isHeaderDisabled"])],544),createBaseVNode("div",{class:normalizeClass(["mask",{active:o.value||s.value!==""}])},[withDirectives(createBaseVNode("div",_hoisted_1,[createVNode(Pe)],512),[[vShow,o.value]]),withDirectives(createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createVNode(Ie,{onClick:x},{default:withCtx(()=>[createVNode($e)]),_:1})]),createBaseVNode("div",_hoisted_4,[createVNode(Ne)]),createBaseVNode("div",_hoisted_5,toDisplayString$1(s.value)+" failed",1),createBaseVNode("div",{class:"confirm-btn",onClick:x},"OK")],512),[[vShow,s.value!==""]])],2),withDirectives(createBaseVNode("div",_hoisted_6,[createVNode(Be)],512),[[vShow,u.value]])],2),Z[0]||(Z[0]=createBaseVNode("div",{id:"printContainer"},null,-1)),createVNode(be)],64)}}},store=createPinia();function setupStore(e){e.use(store)}const main="";function createEncapsulatedStore(e){return{dispatch(r){if(typeof e.dispatch=="function")return e.dispatch(r);throw new Error("Original store does not have a dispatch method.")},getState(r){if(typeof e.getState=="function")return JSON.parse(JSON.stringify(e.getState(r)));throw new Error("Original store does not have a getState method.")}}}const disableElements=e=>n=>{var o;const r=[...e.getActiveHeaderItems,...e.getTools,...e.getActiveRightHeaderItems,...e.getToolItems.annotation,...e.getToolItems.form,...e.getPopupItems("textPopup"),...e.getPopupItems("cropPagePopup")];if(Array.isArray(n))for(let s=0;s<r.length;s++)n.forEach(u=>{e.getDisabledElementsObj[u]?e.setDisabledElements(u):r[s].dataElement===u&&(r[s].hidden=!0)});else if(typeof n=="string"){if(e.getDisabledElementsObj[n]){e.setDisabledElements(n);return}const s=r.find(u=>u.dataElement===n);s?(s.hidden=!0,e.toolMode===s.element&&e.setActiveToolMode((o=e.tools[0])==null?void 0:o.element)):console.warn("DataElement not found.")}else console.error("Wrong dataElements type.")},enableElements=e=>n=>{const r=[...e.getActiveHeaderItems,...e.getTools,...e.getActiveRightHeaderItems,...e.getToolItems.annotation,...e.getToolItems.form,...e.getPopupItems("textPopup"),...e.getPopupItems("cropPagePopup")];if(Array.isArray(n))for(let o=0;o<r.length;o++)n.forEach(s=>{e.getDisabledElementsObj[s]?e.setEnabledElements(s):r[o].dataElement===s&&(r[o].hidden=!1)});else if(typeof n=="string"){if(e.getDisabledElementsObj[n]){e.setEnabledElements(n);return}const o=r.find(s=>s.dataElement===n);o?o.hidden=!1:console.warn("DataElement not found.")}else console.error("Wrong dataElements type.")},setHeaderItems=e=>n=>{const r={headers:e.headers,rightHeaders:e.rightHeaders,tools:e.tools,toolItems:e.toolItems},o=Object.create(Header).initialize(e,r);n(o),Object.keys(r).forEach(s=>{const u=r[s];e[s]=u})},Header={initialize(e){return this.headers={headers:e.headers,rightHeaders:e.rightHeaders,tools:e.tools,toolItems:e.toolItems},this.toolButtonObjects=e.toolItems,this.headerGroup="headers",this.index=-1,this},get(e){if(this.index!==-1){const n=this.headers[this.headerGroup][this.index];Object.keys(n).forEach(r=>{delete this[r]})}if(this._setIndex(e),this.index===-1)console.warn(`${e} does not exist in ${this.headerGroup} header`);else{const n=this.headers[this.headerGroup][this.index];Object.keys(n).forEach(r=>{this[r]=n[r]})}return this},getItems(){return this.headers[this.headerGroup]},getHeader(e){const n=Object.keys(this.headers);return n.includes(e)?(this.headerGroup=e,this._resetIndex()):console.warn(`Header must be one of: ${n.join(" or ")}.`),this},insertBefore(e){return this.index===-1?console.warn("Please use .get(dataElement) first before using insertBefore"):this.headers[this.headerGroup].splice(this.index,0,e),this},insertAfter(e){return this.index===-1?console.warn("Please use .get(dataElement) first before using insertAfter"):(this.index++,this.headers[this.headerGroup].splice(this.index,0,e)),this},delete(e){let n;return typeof e=="number"?n=e:typeof e=="string"?this._getIndexOfElement(e)===-1?console.warn(`${e} does not exist in ${this.headerGroup} header`):n=this._getIndexOfElement(e):typeof e>"u"?this.index===-1?console.warn("Please use .get(dataElement) first before using delete()"):n=this.index:Array.isArray(e)?e.forEach(r=>{(typeof r=="number"||typeof r=="string")&&this.delete(r)}):console.warn("Argument must be empty, a number, a string or an array"),n!==void 0&&n!==-1&&(this.headers[this.headerGroup].splice(n,1),this._resetIndex()),this},shift(){return this.headers[this.headerGroup].shift(),this},unshift(...e){return this.headers[this.headerGroup].unshift(...e),this},push(...e){return this.headers[this.headerGroup].push(...e),this},pop(){return this.headers[this.headerGroup].pop(),this},update(e){return Array.isArray(e)?this._updateItems(e):console.warn("Argument must be an array"),this},_updateItems(e){return this.headers[this.headerGroup].length=0,this.headers[this.headerGroup].push(...e),this},_setIndex(e){this.index=this._getIndexOfElement(e)},_getIndexOfElement(e){return this.headers[this.headerGroup].findIndex(n=>{let r;return n.type==="toolButton"?r=this.toolButtonObjects[n.toolName].dataElement:r=n.dataElement,r===e})},_resetIndex(){this.index=-1}},setActiveToolMode=e=>n=>{const r=e.tools.find(o=>o.dataElement===n);r?(r.hidden&&(r.hidden=!1),e.setActiveToolMode(r.element)):console.warn("DataElement not found.")},setActiveTool=(e,n)=>r=>{const o=e.getToolMode;if(o){if(!r){n.setToolState();return}const u=e.getToolItems[o].find(d=>d.dataElement===r);if(!u){console.warn("DataElement not match toolMode.");return}u.hidden&&(u.hidden=!1),n.setToolState(u.type)}else console.warn("DataElement not found.")},{locale}=i18n.global,setLanguage=e=>n=>{n&&!["zh-CN","en","ja","th","zh-TW","fr"].includes(n)&&(n="en"),locale.value=n,e.setLanguage(n),window.localStorage.setItem("currentLanguage",n)},getPassword=e=>()=>e.dispatch("getPassword"),createPopupAPI=(e,n)=>Object.create(PopupAPI).initialize(e,n),PopupAPI={initialize(e,n){return this.store=e,this.popupDataElement=n,this},add(e,n){Array.isArray(e)||(e=[e]);const r=this._getIndexByDataElement(n);this.getItems().splice(r+1,0,...e)},update(e){e||(e=[]),Array.isArray(e)||(e=[e]);const n=this.getItems();n.length=0,n.push(...e)},getItems(){return this.store.dispatch("getPopupItems")(this.popupDataElement)},_getIndexByDataElement(e){let n;return typeof e>"u"?n=-1:n=this.store.dispatch("getPopupItems")(this.popupDataElement).findIndex(r=>r.dataElement===e),n}},textPopup=e=>createPopupAPI(e,"textPopup"),openElement=e=>n=>{if(["rightPanel","contentEditorPanel","measurePanel"].includes(n)&&e.getRightPanelButtonDisabled)return!1;e.dispatch("openElement")(n)},closeElement=e=>n=>e.dispatch("closeElement")(n),isElementOpen=e=>n=>e.dispatch("isElementOpen")(n),setActiveElementTab=e=>(n,r)=>{e.activeElementsTab.hasOwnProperty(n)?e.setActiveElementTab(n,r):console.warn("DataElement not found.")},setCustomFonts=e=>n=>{Array.isArray(n)?e.setCustomFonts(n):console.error("setCustomFonts: fonts must be an array")},setAnnotator=e=>n=>{e.setAnnotator(n||"Guest")},getToolColor=e=>n=>e[n].color,getTool=e=>n=>({...e[n]}),getActiveTool=e=>()=>e.getActiveTool,cropPagePopup=e=>createPopupAPI(e,"cropPagePopup"),setAutoJumpNextSign=e=>n=>{e.setAutoJumpNextSign(!!n)},setSignatureDialogTabs=e=>n=>{e.setSignatureDialogTabs(n)},setSignatureDialogProperties=e=>(n,r)=>{e.setSignatureDialogProperties(n,r)},setCustomLoading=e=>n=>{e.setCustomLoading(n)},disableAnnotationExport=e=>()=>{e.setAnnotationExport(!1)},disableAnnotationImport=e=>()=>{e.setAnnotationImport(!1)},enableAnnotationExport=e=>()=>{e.setAnnotationExport(!0)},enableAnnotationImport=e=>()=>{e.setAnnotationImport(!0)},enableSignatureTool=e=>()=>{e.setDisableSignatureTool(!1)},disableSignatureTool=e=>()=>{e.setDisableSignatureTool(!0)},setCustomStyle=e=>{const n=document.createElement("style");n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n)},setThemeMode=e=>n=>{e.setThemeMode(n)},defineWebViewerInstanceUIAPIs=()=>{const{locale:e}=i18n.global,n=useViewerStore(),r=useDocumentStore(),o=createEncapsulatedStore(n),s=createEncapsulatedStore(r);n.setLanguage(e.value);const u="Core",d="UI",f={...core},g={disableElements:disableElements(n),enableElements:enableElements(n),setHeaderItems:setHeaderItems(n),setActiveToolMode:setActiveToolMode(n),setActiceToolMode:setActiveToolMode(n),setActiveTool:setActiveTool(n,r),setLanguage:setLanguage(n),getPassword:getPassword(s),textPopup:textPopup(o),openElement:openElement(n),closeElement:closeElement(n),isElementOpen:isElementOpen(n),setActiveElementTab:setActiveElementTab(n),setCustomFonts:setCustomFonts(n),setAnnotator:setAnnotator(r),getActiveTool:getActiveTool(r),getToolColor:getToolColor(r),getTool:getTool(r),cropPagePopup:cropPagePopup(o),setAutoJumpNextSign:setAutoJumpNextSign(r),setSignatureDialogTabs:setSignatureDialogTabs(n),setSignatureDialogProperties:setSignatureDialogProperties(n),setCustomLoading:setCustomLoading(n),disableAnnotationExport:disableAnnotationExport(n),disableAnnotationImport:disableAnnotationImport(n),enableAnnotationExport:enableAnnotationExport(n),enableAnnotationImport:enableAnnotationImport(n),enableSignatureTool:enableSignatureTool(n),disableSignatureTool:disableSignatureTool(n),setCustomStyle,setThemeMode:setThemeMode(n)};window.instances={[u]:f,[d]:g}},app=createApp(_sfc_main);setupStore(app);defineWebViewerInstanceUIAPIs();app.use(i18n);app.mount("#app");
